<div class="admin-container">
  <h1>🔧 Admin Panel</h1>
  
  <!-- User Info -->
  <div class="user-info">
    <span>Welcome, {{ currentUser?.username }}</span>
    <span class="role-badge">{{ currentUser?.role }}</span>
  </div>

  <!-- Messages -->
  <div *ngIf="message" class="message" [class.success]="messageType === 'success'" [class.error]="messageType === 'error'">
    {{ message }}
  </div>

  <!-- JSON Management Section -->
  <div class="json-management">
    <h2>📁 JSON File Management</h2>
    
    <!-- Cards JSON -->
    <div class="json-section">
      <div class="json-header">
        <h3>🃏 Cards JSON</h3>
        <div class="json-actions">
          <button (click)="loadCardsJson()" [disabled]="loadingCards" class="btn btn-secondary">
            {{ loadingCards ? '⏳ Loading...' : '🔄 Reload' }}
          </button>
          <button (click)="downloadCardsJson()" class="btn btn-primary">
            📥 Download
          </button>
          <button (click)="formatJson(cardsJson)" class="btn btn-secondary">
            ✨ Format
          </button>
          <button (click)="copyCardsToClipboard()" class="btn btn-info">
            � Copy
          </button>
        </div>
      </div>
      <div class="json-editor">
        <textarea 
          [(ngModel)]="cardsJson" 
          placeholder="Cards JSON content will appear here..."
          class="json-textarea"
          [readonly]="loadingCards">
        </textarea>
      </div>
    </div>

    <!-- Rarity JSON -->
    <div class="json-section">
      <div class="json-header">
        <h3>⭐ Rarity JSON</h3>
        <div class="json-actions">
          <button (click)="loadRarityJson()" [disabled]="loadingRarity" class="btn btn-secondary">
            {{ loadingRarity ? '⏳ Loading...' : '🔄 Reload' }}
          </button>
          <button (click)="downloadRarityJson()" class="btn btn-primary">
            📥 Download
          </button>
          <button (click)="formatJson(rarityJson)" class="btn btn-secondary">
            ✨ Format
          </button>
          <button (click)="copyRarityToClipboard()" class="btn btn-info">
            � Copy
          </button>
        </div>
      </div>
      <div class="json-editor">
        <textarea 
          [(ngModel)]="rarityJson" 
          placeholder="Rarity JSON content will appear here..."
          class="json-textarea"
          [readonly]="loadingRarity">
        </textarea>
      </div>
    </div>

    <!-- Sets JSON -->
    <div class="json-section">
      <div class="json-header">
        <h3>📦 Sets JSON</h3>
        <div class="json-actions">
          <button (click)="loadSetsJson()" [disabled]="loadingSets" class="btn btn-secondary">
            {{ loadingSets ? '⏳ Loading...' : '🔄 Reload' }}
          </button>
          <button (click)="downloadSetsJson()" class="btn btn-primary">
            📥 Download
          </button>
          <button (click)="formatJson(setsJson)" class="btn btn-secondary">
            ✨ Format
          </button>
          <button (click)="copySetsToClipboard()" class="btn btn-info">
            � Copy
          </button>
        </div>
      </div>
      <div class="json-editor">
        <textarea 
          [(ngModel)]="setsJson" 
          placeholder="Sets JSON content will appear here..."
          class="json-textarea"
          [readonly]="loadingSets">
        </textarea>
      </div>
    </div>
  </div>

  <!-- Instructions -->
  <div class="instructions">
    <h3>📋 GitHub Pages Deployment Workflow</h3>
    
    <div class="workflow-steps">
      <h4>🔧 Editing JSON Files:</h4>
      <ol>
        <li><strong>📥 Download:</strong> Download current JSON files to your computer</li>
        <li><strong>✏️ Edit:</strong> Modify the JSON content in the text areas above</li>
        <li><strong>✨ Format:</strong> Use Format button for proper JSON indentation</li>
        <li><strong>📋 Copy:</strong> Copy formatted JSON to clipboard for easy pasting</li>
      </ol>

      <h4>🚀 Deploying Changes:</h4>
      <ol>
        <li><strong>💾 Save Files:</strong> Replace JSON files in your local <code>src/assets/cards/</code> folder</li>
        <li><strong>📝 Commit:</strong> Add and commit changes to your Git repository</li>
        <li><strong>⬆️ Push:</strong> Push changes to GitHub main/master branch</li>
        <li><strong>🔄 Wait:</strong> GitHub Pages will automatically rebuild and deploy</li>
        <li><strong>✅ Live:</strong> Changes will be live in 1-5 minutes</li>
      </ol>
    </div>

    <div class="workflow-note">
      💡 <strong>Pro Tip:</strong> Always validate your JSON before deploying to avoid breaking the application!
    </div>
    
    <div class="warning">
      ⚠️ <strong>GitHub Pages Limitation:</strong> JSON files cannot be updated directly from the web interface. 
      Manual file replacement and deployment is required for changes to take effect.
    </div>
  </div>
</div>