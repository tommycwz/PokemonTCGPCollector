(self.webpackChunkPokemonTCGPCollector=self.webpackChunkPokemonTCGPCollector||[]).push([[179],{337:(It,de,X)=>{"use strict";function oe(n){return"function"==typeof n}function ve(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Ne=ve(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function He(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class I{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const i of e)i.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(oe(r))try{r()}catch(i){t=i instanceof Ne?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{K(i)}catch(s){t=t??[],s instanceof Ne?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Ne(t)}}add(t){var e;if(t&&t!==this)if(this.closed)K(t);else{if(t instanceof I){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&He(e,t)}remove(t){const{_finalizers:e}=this;e&&He(e,t),t instanceof I&&t._removeParent(this)}}I.EMPTY=(()=>{const n=new I;return n.closed=!0,n})();const O=I.EMPTY;function H(n){return n instanceof I||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function K(n){oe(n)?n():n.unsubscribe()}const ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ee={setTimeout(n,t,...e){const{delegate:r}=Ee;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=Ee;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Re(n){Ee.setTimeout(()=>{const{onUnhandledError:t}=ne;if(!t)throw n;t(n)})}function De(){}const Fe=Ot("C",void 0,void 0);function Ot(n,t,e){return{kind:n,value:t,error:e}}let Je=null;function st(n){if(ne.useDeprecatedSynchronousErrorHandling){const t=!Je;if(t&&(Je={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=Je;if(Je=null,e)throw r}}else n()}class Zn extends I{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,H(t)&&t.add(this)):this.destination=Ea}static create(t,e,r){return new en(t,e,r)}next(t){this.isStopped?lo(function zt(n){return Ot("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?lo(function it(n){return Ot("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?lo(Fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xt=Function.prototype.bind;function bn(n,t){return Xt.call(n,t)}class Ji{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){wn(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){wn(r)}else wn(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){wn(e)}}}class en extends Zn{constructor(t,e,r){let o;if(super(),oe(t)||!t)o={next:t??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&ne.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&bn(t.next,i),error:t.error&&bn(t.error,i),complete:t.complete&&bn(t.complete,i)}):o=t}this.destination=new Ji(o)}}function wn(n){ne.useDeprecatedSynchronousErrorHandling?function Mt(n){ne.useDeprecatedSynchronousErrorHandling&&Je&&(Je.errorThrown=!0,Je.error=n)}(n):Re(n)}function lo(n,t){const{onStoppedNotification:e}=ne;e&&Ee.setTimeout(()=>e(n,t))}const Ea={closed:!0,next:De,error:function jr(n){throw n},complete:De},Ro="function"==typeof Symbol&&Symbol.observable||"@@observable";function Xn(n){return n}function Qi(n){return 0===n.length?Xn:1===n.length?n[0]:function(e){return n.reduce((r,o)=>o(r),e)}}let ze=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,o){const i=function Ia(n){return n&&n instanceof Zn||function Ta(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}(n)&&H(n)}(e)?e:new en(e,r,o);return st(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=Ma(r))((o,i)=>{const s=new en({next:a=>{try{e(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[Ro](){return this}pipe(...e){return Qi(e)(this)}toPromise(e){return new(e=Ma(e))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=t=>new n(t),n})();function Ma(n){var t;return null!==(t=n??ne.Promise)&&void 0!==t?t:Promise}const eu=ve(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let w=(()=>{class n extends ze{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new M(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new eu}next(e){st(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){st(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){st(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:o,observers:i}=this;return r||o?O:(this.currentObservers=null,i.push(e),new I(()=>{this.currentObservers=null,He(i,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:o,isStopped:i}=this;r?e.error(o):i&&e.complete()}asObservable(){const e=new ze;return e.source=this,e}}return n.create=(t,e)=>new M(t,e),n})();class M extends w{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:O}}function T(n){return oe(n?.lift)}function S(n){return t=>{if(T(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function N(n,t,e,r,o){return new U(n,t,e,r,o)}class U extends Zn{constructor(t,e,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function k(n,t){return S((e,r)=>{let o=0;e.subscribe(N(r,i=>{r.next(n.call(t,i,o++))}))})}var V=X(582);const Tt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ue(n){return oe(n?.then)}function We(n){return oe(n[Ro])}function bt(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function Vr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ft=function Ve(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tn(n){return oe(n?.[Ft])}function Dn(n){return(0,V.__asyncGenerator)(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:o}=yield(0,V.__await)(e.read());if(o)return yield(0,V.__await)(void 0);yield yield(0,V.__await)(r)}}finally{e.releaseLock()}})}function er(n){return oe(n?.getReader)}function Fn(n){if(n instanceof ze)return n;if(null!=n){if(We(n))return function YD(n){return new ze(t=>{const e=n[Ro]();if(oe(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Tt(n))return function ZD(n){return new ze(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(ue(n))return function XD(n){return new ze(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Re)})}(n);if(bt(n))return Wp(n);if(tn(n))return function eS(n){return new ze(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(er(n))return function tS(n){return Wp(Dn(n))}(n)}throw Vr(n)}function Wp(n){return new ze(t=>{(function nS(n,t){var e,r,o,i;return(0,V.__awaiter)(this,void 0,void 0,function*(){try{for(e=(0,V.__asyncValues)(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(o)throw o.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function _r(n,t,e,r=0,o=!1){const i=t.schedule(function(){e(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function At(n,t,e=1/0){return oe(t)?At((r,o)=>k((i,s)=>t(r,i,o,s))(Fn(n(r,o))),e):("number"==typeof t&&(e=t),S((r,o)=>function rS(n,t,e,r,o,i,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&t.complete()},f=m=>c<r?p(m):l.push(m),p=m=>{i&&t.next(m),c++;let g=!1;Fn(e(m,u++)).subscribe(N(t,C=>{o?.(C),i?f(C):t.next(C)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){const C=l.shift();s?_r(t,s,()=>p(C)):p(C)}h()}catch(C){t.error(C)}}))};return n.subscribe(N(t,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,n,e)))}function No(n=1/0){return At(Xn,n)}const tr=new ze(n=>n.complete());function tu(n){return n[n.length-1]}function Kp(n){return oe(tu(n))?n.pop():void 0}function Yi(n){return function iS(n){return n&&oe(n.schedule)}(tu(n))?n.pop():void 0}function Jp(n,t=0){return S((e,r)=>{e.subscribe(N(r,o=>_r(r,n,()=>r.next(o),t),()=>_r(r,n,()=>r.complete(),t),o=>_r(r,n,()=>r.error(o),t)))})}function Qp(n,t=0){return S((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Yp(n,t){if(!n)throw new Error("Iterable cannot be null");return new ze(e=>{_r(e,t,()=>{const r=n[Symbol.asyncIterator]();_r(e,t,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function ft(n,t){return t?function hS(n,t){if(null!=n){if(We(n))return function aS(n,t){return Fn(n).pipe(Qp(t),Jp(t))}(n,t);if(Tt(n))return function cS(n,t){return new ze(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(ue(n))return function lS(n,t){return Fn(n).pipe(Qp(t),Jp(t))}(n,t);if(bt(n))return Yp(n,t);if(tn(n))return function uS(n,t){return new ze(e=>{let r;return _r(e,t,()=>{r=n[Ft](),_r(e,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void e.error(s)}i?e.complete():e.next(o)},0,!0)}),()=>oe(r?.return)&&r.return()})}(n,t);if(er(n))return function dS(n,t){return Yp(Dn(n),t)}(n,t)}throw Vr(n)}(n,t):Fn(n)}function nu(n,t,...e){if(!0===t)return void n();if(!1===t)return;const r=new en({next:()=>{r.unsubscribe(),n()}});return t(...e).subscribe(r)}function Le(n){for(let t in n)if(n[t]===Le)return t;throw Error("Could not find renamed property on target object.")}function ru(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function $e(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map($e).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function ou(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const gS=Le({__forward_ref__:Le});function Ue(n){return n.__forward_ref__=Ue,n.toString=function(){return $e(this())},n}function se(n){return iu(n)?n():n}function iu(n){return"function"==typeof n&&n.hasOwnProperty(gS)&&n.__forward_ref__===Ue}function su(n){return n&&!!n.\u0275providers}const Zp="https://g.co/ng/security#xss";class $ extends Error{constructor(t,e){super(Oa(t,e)),this.code=t}}function Oa(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}function he(n){return"string"==typeof n?n:null==n?"":String(n)}function Aa(n,t){throw new $(-201,!1)}function Sn(n,t){null==n&&function Ie(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function J(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function En(n){return{providers:n.providers||[],imports:n.imports||[]}}function Pa(n){return Xp(n,ka)||Xp(n,tg)}function Xp(n,t){return n.hasOwnProperty(t)?n[t]:null}function eg(n){return n&&(n.hasOwnProperty(au)||n.hasOwnProperty(DS))?n[au]:null}const ka=Le({\u0275prov:Le}),au=Le({\u0275inj:Le}),tg=Le({ngInjectableDef:Le}),DS=Le({ngInjectorDef:Le});var ae=(()=>((ae=ae||{})[ae.Default=0]="Default",ae[ae.Host=1]="Host",ae[ae.Self=2]="Self",ae[ae.SkipSelf=4]="SkipSelf",ae[ae.Optional=8]="Optional",ae))();let lu;function xn(n){const t=lu;return lu=n,t}function ng(n,t,e){const r=Pa(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&ae.Optional?null:void 0!==t?t:void Aa($e(n))}const Ge=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zi={},cu="__NG_DI_FLAG__",Ra="ngTempTokenPath",ES="ngTokenPath",xS=/\n/gm,MS="\u0275",rg="__source";let Xi;function Fo(n){const t=Xi;return Xi=n,t}function TS(n,t=ae.Default){if(void 0===Xi)throw new $(-203,!1);return null===Xi?ng(n,void 0,t):Xi.get(n,t&ae.Optional?null:void 0,t)}function G(n,t=ae.Default){return(function SS(){return lu}()||TS)(se(n),t)}function Ce(n,t=ae.Default){return G(n,Na(t))}function Na(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uu(n){const t=[];for(let e=0;e<n.length;e++){const r=se(n[e]);if(Array.isArray(r)){if(0===r.length)throw new $(900,!1);let o,i=ae.Default;for(let s=0;s<r.length;s++){const a=r[s],l=IS(a);"number"==typeof l?-1===l?o=a.token:i|=l:o=a}t.push(G(o,i))}else t.push(G(r))}return t}function es(n,t){return n[cu]=t,n.prototype[cu]=t,n}function IS(n){return n[cu]}function vr(n){return{toString:n}.toString()}var nr=(()=>((nr=nr||{})[nr.OnPush=0]="OnPush",nr[nr.Default=1]="Default",nr))(),rr=(()=>{return(n=rr||(rr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",rr;var n})();const Cr={},Me=[],Fa=Le({\u0275cmp:Le}),du=Le({\u0275dir:Le}),hu=Le({\u0275pipe:Le}),ig=Le({\u0275mod:Le}),br=Le({\u0275fac:Le}),ts=Le({__NG_ELEMENT_ID__:Le});let PS=0;function co(n){return vr(()=>{const t=ag(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||rr.Emulated,id:"c"+PS++,styles:n.styles||Me,_:null,schemas:n.schemas||null,tView:null};lg(e);const r=n.dependencies;return e.directiveDefs=La(r,!1),e.pipeDefs=La(r,!0),e})}function RS(n){return Oe(n)||Lt(n)}function NS(n){return null!==n}function Ln(n){return vr(()=>({type:n.type,bootstrap:n.bootstrap||Me,declarations:n.declarations||Me,imports:n.imports||Me,exports:n.exports||Me,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function sg(n,t){if(null==n)return Cr;const e={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),e[o]=r,t&&(t[o]=i)}return e}function ce(n){return vr(()=>{const t=ag(n);return lg(t),t})}function Oe(n){return n[Fa]||null}function Lt(n){return n[du]||null}function rn(n){return n[hu]||null}function un(n,t){const e=n[ig]||null;if(!e&&!0===t)throw new Error(`Type ${$e(n)} does not have '\u0275mod' property.`);return e}function ag(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Me,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sg(n.inputs,t),outputs:sg(n.outputs)}}function lg(n){n.features?.forEach(t=>t(n))}function La(n,t){if(!n)return null;const e=t?rn:RS;return()=>("function"==typeof n?n():n).map(r=>e(r)).filter(NS)}const wr=0,q=1,ye=2,Xe=3,jn=4,uo=5,jt=6,jo=7,at=8,ja=9,Va=10,be=11,fu=12,ns=13,cg=14,Vo=15,Vt=16,rs=17,$o=18,or=19,os=20,ug=21,qe=22,pu=1,dg=2,$a=7,Ua=8,Uo=9,Gt=10;function dn(n){return Array.isArray(n)&&"object"==typeof n[pu]}function Vn(n){return Array.isArray(n)&&!0===n[pu]}function gu(n){return 0!=(4&n.flags)}function is(n){return n.componentOffset>-1}function Ba(n){return 1==(1&n.flags)}function $n(n){return!!n.template}function LS(n){return 0!=(256&n[ye])}function ho(n,t){return n.hasOwnProperty(br)?n[br]:null}class $S{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Mn(){return pg}function pg(n){return n.type.prototype.ngOnChanges&&(n.setInput=BS),US}function US(){const n=mg(this),t=n?.current;if(t){const e=n.previous;if(e===Cr)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function BS(n,t,e,r){const o=this.declaredInputs[e],i=mg(n)||function HS(n,t){return n[gg]=t}(n,{previous:Cr,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[o];s[o]=new $S(l&&l.currentValue,t,a===Cr),n[r]=t}Mn.ngInherit=!0;const gg="__ngSimpleChanges__";function mg(n){return n[gg]||null}const Tn=function(n,t,e){};function Pt(n){for(;Array.isArray(n);)n=n[wr];return n}function Ha(n,t){return Pt(t[n])}function hn(n,t){return Pt(t[n.index])}function vg(n,t){return n.data[t]}function on(n,t){const e=t[n];return dn(e)?e:e[wr]}function za(n){return 64==(64&n[ye])}function Ur(n,t){return null==t?null:n[t]}function Cg(n){n[$o]=0}function yu(n,t){n[uo]+=t;let e=n,r=n[Xe];for(;null!==r&&(1===t&&1===e[uo]||-1===t&&0===e[uo]);)r[uo]+=t,e=r,r=r[Xe]}const fe={lFrame:Og(null),bindingsEnabled:!0};function wg(){return fe.bindingsEnabled}function F(){return fe.lFrame.lView}function xe(){return fe.lFrame.tView}function ee(n){return fe.lFrame.contextLView=n,n[at]}function te(n){return fe.lFrame.contextLView=null,n}function kt(){let n=Dg();for(;null!==n&&64===n.type;)n=n.parent;return n}function Dg(){return fe.lFrame.currentTNode}function ir(n,t){const e=fe.lFrame;e.currentTNode=n,e.isParent=t}function _u(){return fe.lFrame.isParent}function vu(){fe.lFrame.isParent=!1}function qt(){const n=fe.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Ho(){return fe.lFrame.bindingIndex++}function Sr(n){const t=fe.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function nE(n,t){const e=fe.lFrame;e.bindingIndex=e.bindingRootIndex=n,Cu(t)}function Cu(n){fe.lFrame.currentDirectiveIndex=n}function Mg(){return fe.lFrame.currentQueryIndex}function wu(n){fe.lFrame.currentQueryIndex=n}function oE(n){const t=n[q];return 2===t.type?t.declTNode:1===t.type?n[jt]:null}function Tg(n,t,e){if(e&ae.SkipSelf){let o=t,i=n;for(;!(o=o.parent,null!==o||e&ae.Host||(o=oE(i),null===o||(i=i[Vo],10&o.type))););if(null===o)return!1;t=o,n=i}const r=fe.lFrame=Ig();return r.currentTNode=t,r.lView=n,!0}function Du(n){const t=Ig(),e=n[q];fe.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Ig(){const n=fe.lFrame,t=null===n?null:n.child;return null===t?Og(n):t}function Og(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Ag(){const n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Pg=Ag;function Su(){const n=Ag();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Wt(){return fe.lFrame.selectedIndex}function fo(n){fe.lFrame.selectedIndex=n}function Qe(){const n=fe.lFrame;return vg(n.tView,n.selectedIndex)}function Ga(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const i=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(n.contentHooks??(n.contentHooks=[])).push(-e,s),a&&((n.contentHooks??(n.contentHooks=[])).push(e,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks??(n.viewHooks=[])).push(-e,l),c&&((n.viewHooks??(n.viewHooks=[])).push(e,c),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(e,c)),null!=u&&(n.destroyHooks??(n.destroyHooks=[])).push(e,u)}}function qa(n,t,e){kg(n,t,3,e)}function Wa(n,t,e,r){(3&n[ye])===e&&kg(n,t,e,r)}function Eu(n,t){let e=n[ye];(3&e)===t&&(e&=2047,e+=1,n[ye]=e)}function kg(n,t,e,r){const i=r??-1,s=t.length-1;let a=0;for(let l=void 0!==r?65535&n[$o]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(n[$o]+=65536),(a<i||-1==i)&&(fE(n,e,t,l),n[$o]=(4294901760&n[$o])+l+2),l++}function fE(n,t,e,r){const o=e[r]<0,i=e[r+1],a=n[o?-e[r]:e[r]];if(o){if(n[ye]>>11<n[$o]>>16&&(3&n[ye])===t){n[ye]+=2048,Tn(4,a,i);try{i.call(a)}finally{Tn(5,a,i)}}}else{Tn(4,a,i);try{i.call(a)}finally{Tn(5,a,i)}}}const zo=-1;class as{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function Mu(n,t,e){let r=0;for(;r<e.length;){const o=e[r];if("number"==typeof o){if(0!==o)break;r++;const i=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,i)}else{const i=o,s=e[++r];Ng(i)?n.setProperty(t,i,s):n.setAttribute(t,i,s),r++}}return r}function Rg(n){return 3===n||4===n||6===n}function Ng(n){return 64===n.charCodeAt(0)}function ls(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?e=o:0===e||Fg(n,e,o,null,-1===e||2===e?t[++r]:null)}}return n}function Fg(n,t,e,r,o){let i=0,s=n.length;if(-1===t)s=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==o&&(n[i+1]=o));if(r===n[i+1])return void(n[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(n.splice(s,0,t),i=s+1),n.splice(i++,0,e),null!==r&&n.splice(i++,0,r),null!==o&&n.splice(i++,0,o)}function Lg(n){return n!==zo}function Ka(n){return 32767&n}function Ja(n,t){let e=function yE(n){return n>>16}(n),r=t;for(;e>0;)r=r[Vo],e--;return r}let Tu=!0;function Qa(n){const t=Tu;return Tu=n,t}const jg=255,Vg=5;let _E=0;const sr={};function Ya(n,t){const e=$g(n,t);if(-1!==e)return e;const r=t[q];r.firstCreatePass&&(n.injectorIndex=t.length,Iu(r.data,n),Iu(t,null),Iu(r.blueprint,null));const o=Ou(n,t),i=n.injectorIndex;if(Lg(o)){const s=Ka(o),a=Ja(o,t),l=a[q].data;for(let c=0;c<8;c++)t[i+c]=a[s+c]|l[s+c]}return t[i+8]=o,i}function Iu(n,t){n.push(0,0,0,0,0,0,0,0,t)}function $g(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Ou(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,o=t;for(;null!==o;){if(r=Wg(o),null===r)return zo;if(e++,o=o[Vo],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return zo}function Au(n,t,e){!function vE(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(ts)&&(r=e[ts]),null==r&&(r=e[ts]=_E++);const o=r&jg;t.data[n+(o>>Vg)]|=1<<o}(n,t,e)}function Ug(n,t,e){if(e&ae.Optional||void 0!==n)return n;Aa()}function Bg(n,t,e,r){if(e&ae.Optional&&void 0===r&&(r=null),!(e&(ae.Self|ae.Host))){const o=n[ja],i=xn(void 0);try{return o?o.get(t,r,e&ae.Optional):ng(t,r,e&ae.Optional)}finally{xn(i)}}return Ug(r,0,e)}function Hg(n,t,e,r=ae.Default,o){if(null!==n){if(1024&t[ye]){const s=function SE(n,t,e,r,o){let i=n,s=t;for(;null!==i&&null!==s&&1024&s[ye]&&!(256&s[ye]);){const a=zg(i,s,e,r|ae.Self,sr);if(a!==sr)return a;let l=i.parent;if(!l){const c=s[ug];if(c){const u=c.get(e,sr,r);if(u!==sr)return u}l=Wg(s),s=s[Vo]}i=l}return o}(n,t,e,r,sr);if(s!==sr)return s}const i=zg(n,t,e,r,sr);if(i!==sr)return i}return Bg(t,e,r,o)}function zg(n,t,e,r,o){const i=function wE(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(ts)?n[ts]:void 0;return"number"==typeof t?t>=0?t&jg:DE:t}(e);if("function"==typeof i){if(!Tg(t,n,r))return r&ae.Host?Ug(o,0,r):Bg(t,e,r,o);try{const s=i(r);if(null!=s||r&ae.Optional)return s;Aa()}finally{Pg()}}else if("number"==typeof i){let s=null,a=$g(n,t),l=zo,c=r&ae.Host?t[Vt][jt]:null;for((-1===a||r&ae.SkipSelf)&&(l=-1===a?Ou(n,t):t[a+8],l!==zo&&qg(r,!1)?(s=t[q],a=Ka(l),t=Ja(l,t)):a=-1);-1!==a;){const u=t[q];if(Gg(i,a,u.data)){const d=bE(a,t,e,s,r,c);if(d!==sr)return d}l=t[a+8],l!==zo&&qg(r,t[q].data[a+8]===c)&&Gg(i,a,t)?(s=u,a=Ka(l),t=Ja(l,t)):a=-1}}return o}function bE(n,t,e,r,o,i){const s=t[q],a=s.data[n+8],u=Za(a,s,e,null==r?is(a)&&Tu:r!=s&&0!=(3&a.type),o&ae.Host&&i===a);return null!==u?po(t,s,u,a):sr}function Za(n,t,e,r,o){const i=n.providerIndexes,s=t.data,a=1048575&i,l=n.directiveStart,u=i>>20,h=o?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(o){const f=s[l];if(f&&$n(f)&&f.type===e)return l}return null}function po(n,t,e,r){let o=n[e];const i=t.data;if(function pE(n){return n instanceof as}(o)){const s=o;s.resolving&&function mS(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new $(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Te(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():he(n)}(i[e]));const a=Qa(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?xn(s.injectImpl):null;Tg(n,r,ae.Default);try{o=n[e]=s.factory(void 0,i,n,r),t.firstCreatePass&&e>=r.directiveStart&&function hE(n,t,e){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){const s=pg(t);(e.preOrderHooks??(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,s)}o&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-n,o),i&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n,i),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,i))}(e,i[e],t)}finally{null!==l&&xn(l),Qa(a),s.resolving=!1,Pg()}}return o}function Gg(n,t,e){return!!(e[t+(n>>Vg)]&1<<n)}function qg(n,t){return!(n&ae.Self||n&ae.Host&&t)}class Go{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return Hg(this._tNode,this._lView,t,Na(r),e)}}function DE(){return new Go(kt(),F())}function Rt(n){return vr(()=>{const t=n.prototype.constructor,e=t[br]||Pu(t),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const i=o[br]||Pu(o);if(i&&i!==e)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Pu(n){return iu(n)?()=>{const t=Pu(se(n));return t&&t()}:ho(n)}function Wg(n){const t=n[q],e=t.type;return 2===e?t.declTNode:1===e?n[jt]:null}const Wo="__parameters__";function Jo(n,t,e){return vr(()=>{const r=function ku(n){return function(...e){if(n){const r=n(...e);for(const o in r)this[o]=r[o]}}}(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Wo)?l[Wo]:Object.defineProperty(l,Wo,{value:[]})[Wo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}class Y{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=J({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function go(n,t){n.forEach(e=>Array.isArray(e)?go(e,t):t(e))}function Jg(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function el(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function fn(n,t,e){let r=Qo(n,t);return r>=0?n[1|r]=e:(r=~r,function TE(n,t,e,r){let o=n.length;if(o==t)n.push(e,r);else if(1===o)n.push(r,n[0]),n[0]=e;else{for(o--,n.push(n[o-1],n[o]);o>t;)n[o]=n[o-2],o--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function Nu(n,t){const e=Qo(n,t);if(e>=0)return n[1|e]}function Qo(n,t){return function Qg(n,t,e){let r=0,o=n.length>>e;for(;o!==r;){const i=r+(o-r>>1),s=n[i<<e];if(t===s)return i<<e;s>t?o=i:r=i+1}return~(o<<e)}(n,t,1)}const hs=es(Jo("Optional"),8),fs=es(Jo("SkipSelf"),4);var sn=(()=>((sn=sn||{})[sn.Important=1]="Important",sn[sn.DashCase=2]="DashCase",sn))();const Uu=new Map;let QE=0;const Hu="__ngContext__";function $t(n,t){dn(t)?(n[Hu]=t[os],function ZE(n){Uu.set(n[os],n)}(t)):n[Hu]=t}let zu;function Gu(n,t){return zu(n,t)}function ys(n){const t=n[Xe];return Vn(t)?t[Xe]:t}function qu(n){return mm(n[ns])}function Wu(n){return mm(n[jn])}function mm(n){for(;null!==n&&!Vn(n);)n=n[jn];return n}function Zo(n,t,e,r,o){if(null!=r){let i,s=!1;Vn(r)?i=r:dn(r)&&(s=!0,r=r[wr]);const a=Pt(r);0===n&&null!==e?null==o?wm(t,e,a):mo(t,e,a,o||null,!0):1===n&&null!==e?mo(t,e,a,o||null,!0):2===n?function ed(n,t,e){const r=ol(n,t);r&&function _x(n,t,e,r){n.removeChild(t,e,r)}(n,r,t,e)}(t,a,s):3===n&&t.destroyNode(a),null!=i&&function bx(n,t,e,r,o){const i=e[$a];i!==Pt(e)&&Zo(t,n,r,i,o);for(let a=Gt;a<e.length;a++){const l=e[a];_s(l[q],l,n,t,r,i)}}(t,n,i,e,o)}}function Ju(n,t,e){return n.createElement(t,e)}function _m(n,t){const e=n[Uo],r=e.indexOf(t),o=t[Xe];512&t[ye]&&(t[ye]&=-513,yu(o,-1)),e.splice(r,1)}function Qu(n,t){if(n.length<=Gt)return;const e=Gt+t,r=n[e];if(r){const o=r[rs];null!==o&&o!==n&&_m(o,r),t>0&&(n[e-1][jn]=r[jn]);const i=el(n,Gt+t);!function ux(n,t){_s(n,t,t[be],2,null,null),t[wr]=null,t[jt]=null}(r[q],r);const s=i[or];null!==s&&s.detachView(i[q]),r[Xe]=null,r[jn]=null,r[ye]&=-65}return r}function vm(n,t){if(!(128&t[ye])){const e=t[be];e.destroyNode&&_s(n,t,e,3,null,null),function fx(n){let t=n[ns];if(!t)return Yu(n[q],n);for(;t;){let e=null;if(dn(t))e=t[ns];else{const r=t[Gt];r&&(e=r)}if(!e){for(;t&&!t[jn]&&t!==n;)dn(t)&&Yu(t[q],t),t=t[Xe];null===t&&(t=n),dn(t)&&Yu(t[q],t),e=t&&t[jn]}t=e}}(t)}}function Yu(n,t){if(!(128&t[ye])){t[ye]&=-65,t[ye]|=128,function yx(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const o=t[e[r]];if(!(o instanceof as)){const i=e[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],l=i[s+1];Tn(4,a,l);try{l.call(a)}finally{Tn(5,a,l)}}else{Tn(4,o,i);try{i.call(o)}finally{Tn(5,o,i)}}}}}(n,t),function mx(n,t){const e=n.cleanup,r=t[jo];let o=-1;if(null!==e)for(let i=0;i<e.length-1;i+=2)if("string"==typeof e[i]){const s=e[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=e[i+1]];e[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();t[jo]=null}}(n,t),1===t[q].type&&t[be].destroy();const e=t[rs];if(null!==e&&Vn(t[Xe])){e!==t[Xe]&&_m(e,t);const r=t[or];null!==r&&r.detachView(n)}!function XE(n){Uu.delete(n[os])}(t)}}function Cm(n,t,e){return function bm(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[wr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=n.data[r.directiveStart+o];if(i===rr.None||i===rr.Emulated)return null}return hn(r,e)}}(n,t.parent,e)}function mo(n,t,e,r,o){n.insertBefore(t,e,r,o)}function wm(n,t,e){n.appendChild(t,e)}function Dm(n,t,e,r,o){null!==r?mo(n,t,e,r,o):wm(n,t,e)}function ol(n,t){return n.parentNode(t)}let Zu,rd,ll,xm=function Em(n,t,e){return 40&n.type?hn(n,e):null};function il(n,t,e,r){const o=Cm(n,r,t),i=t[be],a=function Sm(n,t,e){return xm(n,t,e)}(r.parent||t[jt],r,t);if(null!=o)if(Array.isArray(e))for(let l=0;l<e.length;l++)Dm(i,o,e[l],a,!1);else Dm(i,o,e,a,!1);void 0!==Zu&&Zu(i,r,t,e,o)}function sl(n,t){if(null!==t){const e=t.type;if(3&e)return hn(t,n);if(4&e)return Xu(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return sl(n,r);{const o=n[t.index];return Vn(o)?Xu(-1,o):Pt(o)}}if(32&e)return Gu(t,n)()||Pt(n[t.index]);{const r=Tm(n,t);return null!==r?Array.isArray(r)?r[0]:sl(ys(n[Vt]),r):sl(n,t.next)}}return null}function Tm(n,t){return null!==t?n[Vt][jt].projection[t.projection]:null}function Xu(n,t){const e=Gt+n+1;if(e<t.length){const r=t[e],o=r[q].firstChild;if(null!==o)return sl(r,o)}return t[$a]}function td(n,t,e,r,o,i,s){for(;null!=e;){const a=r[e.index],l=e.type;if(s&&0===t&&(a&&$t(Pt(a),r),e.flags|=2),32!=(32&e.flags))if(8&l)td(n,t,e.child,r,o,i,!1),Zo(t,n,o,a,i);else if(32&l){const c=Gu(e,r);let u;for(;u=c();)Zo(t,n,o,u,i);Zo(t,n,o,a,i)}else 16&l?Im(n,t,r,e,o,i):Zo(t,n,o,a,i);e=s?e.projectionNext:e.next}}function _s(n,t,e,r,o,i){td(e,r,n.firstChild,t,o,i,!1)}function Im(n,t,e,r,o,i){const s=e[Vt],l=s[jt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Zo(t,n,o,l[c],i);else td(n,t,l,s[Xe],o,i,!0)}function Om(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Am(n,t,e){const{mergedAttrs:r,classes:o,styles:i}=e;null!==r&&Mu(n,t,r),null!==o&&Om(n,t,o),null!==i&&function Dx(n,t,e){n.setAttribute(t,"style",e)}(n,t,i)}function Nm(n){return function od(){if(void 0===ll&&(ll=null,Ge.trustedTypes))try{ll=Ge.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ll}()?.createScriptURL(n)||n}class Fm{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Zp})`}}function Br(n){return n instanceof Fm?n.changingThisBreaksApplicationSecurity:n}function vs(n,t){const e=function kx(n){return n instanceof Fm&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Zp})`)}return e===t}const Lx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var pt=(()=>((pt=pt||{})[pt.NONE=0]="NONE",pt[pt.HTML=1]="HTML",pt[pt.STYLE=2]="STYLE",pt[pt.SCRIPT=3]="SCRIPT",pt[pt.URL=4]="URL",pt[pt.RESOURCE_URL=5]="RESOURCE_URL",pt))();function bs(n){const t=ws();return t?t.sanitize(pt.URL,n)||"":vs(n,"URL")?Br(n):function id(n){return(n=String(n)).match(Lx)?n:"unsafe:"+n}(he(n))}function Hm(n){const t=ws();if(t)return Nm(t.sanitize(pt.RESOURCE_URL,n)||"");if(vs(n,"ResourceURL"))return Nm(Br(n));throw new $(904,!1)}function ws(){const n=F();return n&&n[fu]}const ul=new Y("ENVIRONMENT_INITIALIZER"),Gm=new Y("INJECTOR",-1),qm=new Y("INJECTOR_DEF_TYPES");class Wm{get(t,e=Zi){if(e===Zi){const r=new Error(`NullInjectorError: No provider for ${$e(t)}!`);throw r.name="NullInjectorError",r}return e}}function Yx(...n){return{\u0275providers:Km(0,n),\u0275fromNgModule:!0}}function Km(n,...t){const e=[],r=new Set;let o;return go(t,i=>{const s=i;cd(s,e,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&Jm(o,e),e}function Jm(n,t){for(let e=0;e<n.length;e++){const{providers:o}=n[e];ud(o,i=>{t.push(i)})}}function cd(n,t,e,r){if(!(n=se(n)))return!1;let o=null,i=eg(n);const s=!i&&Oe(n);if(i||s){if(s&&!s.standalone)return!1;o=n}else{const l=n.ngModule;if(i=eg(l),!i)return!1;o=l}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)cd(c,t,e,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{go(i.imports,u=>{cd(u,t,e,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&Jm(c,t)}if(!a){const c=ho(o)||(()=>new o);t.push({provide:o,useFactory:c,deps:Me},{provide:qm,useValue:o,multi:!0},{provide:ul,useValue:()=>G(o),multi:!0})}const l=i.providers;null==l||a||ud(l,u=>{t.push(u)})}}return o!==n&&void 0!==n.providers}function ud(n,t){for(let e of n)su(e)&&(e=e.\u0275providers),Array.isArray(e)?ud(e,t):t(e)}const Zx=Le({provide:String,useValue:Le});function dd(n){return null!==n&&"object"==typeof n&&Zx in n}function yo(n){return"function"==typeof n}const hd=new Y("Set Injector scope."),dl={},eM={};let fd;function hl(){return void 0===fd&&(fd=new Wm),fd}class ar{}class Zm extends ar{get destroyed(){return this._destroyed}constructor(t,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gd(t,s=>this.processProvider(s)),this.records.set(Gm,ei(void 0,this)),o.has("environment")&&this.records.set(ar,ei(void 0,this));const i=this.records.get(hd);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(qm.multi,Me,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Fo(this),r=xn(void 0);try{return t()}finally{Fo(e),xn(r)}}get(t,e=Zi,r=ae.Default){this.assertNotDestroyed(),r=Na(r);const o=Fo(this),i=xn(void 0);try{if(!(r&ae.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function iM(n){return"function"==typeof n||"object"==typeof n&&n instanceof Y}(t)&&Pa(t);a=l&&this.injectableDefInScope(l)?ei(pd(t),dl):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&ae.Self?hl():this.parent).get(t,e=r&ae.Optional&&e===Zi?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[Ra]=s[Ra]||[]).unshift($e(t)),o)throw s;return function OS(n,t,e,r){const o=n[Ra];throw t[rg]&&o.unshift(t[rg]),n.message=function AS(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==MS?n.slice(2):n;let o=$e(t);if(Array.isArray(t))o=t.map($e).join(" -> ");else if("object"==typeof t){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):$e(a)))}o=`{${i.join(", ")}}`}return`${e}${r?"("+r+")":""}[${o}]: ${n.replace(xS,"\n  ")}`}("\n"+n.message,o,e,r),n[ES]=o,n[Ra]=null,n}(s,t,"R3InjectorError",this.source)}throw s}finally{xn(i),Fo(o)}}resolveInjectorInitializers(){const t=Fo(this),e=xn(void 0);try{const r=this.get(ul.multi,Me,ae.Self);for(const o of r)o()}finally{Fo(t),xn(e)}}toString(){const t=[],e=this.records;for(const r of e.keys())t.push($e(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(t){let e=yo(t=se(t))?t:se(t&&t.provide);const r=function nM(n){return dd(n)?ei(void 0,n.useValue):ei(Xm(n),dl)}(t);if(yo(t)||!0!==t.multi)this.records.get(e);else{let o=this.records.get(e);o||(o=ei(void 0,dl,!0),o.factory=()=>uu(o.multi),this.records.set(e,o)),e=t,o.multi.push(t)}this.records.set(e,r)}hydrate(t,e){return e.value===dl&&(e.value=eM,e.value=e.factory()),"object"==typeof e.value&&e.value&&function oM(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=se(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function pd(n){const t=Pa(n),e=null!==t?t.factory:ho(n);if(null!==e)return e;if(n instanceof Y)throw new $(204,!1);if(n instanceof Function)return function tM(n){const t=n.length;if(t>0)throw function ds(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}(t,"?"),new $(204,!1);const e=function wS(n){return n&&(n[ka]||n[tg])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new $(204,!1)}function Xm(n,t,e){let r;if(yo(n)){const o=se(n);return ho(o)||pd(o)}if(dd(n))r=()=>se(n.useValue);else if(function Ym(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...uu(n.deps||[]));else if(function Qm(n){return!(!n||!n.useExisting)}(n))r=()=>G(se(n.useExisting));else{const o=se(n&&(n.useClass||n.provide));if(!function rM(n){return!!n.deps}(n))return ho(o)||pd(o);r=()=>new o(...uu(n.deps))}return r}function ei(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function gd(n,t){for(const e of n)Array.isArray(e)?gd(e,t):e&&su(e)?gd(e.\u0275providers,t):t(e)}class sM{}class ey{}class lM{resolveComponentFactory(t){throw function aM(n){const t=Error(`No component factory found for ${$e(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let Ds=(()=>{class n{}return n.NULL=new lM,n})();function cM(){return ti(kt(),F())}function ti(n,t){return new pn(hn(n,t))}let pn=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=cM,n})();function uM(n){return n instanceof pn?n.nativeElement:n}class ny{}let xr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function dM(){const n=F(),e=on(kt().index,n);return(dn(e)?e:n)[be]}(),n})(),hM=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>null}),n})();class Ss{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const fM=new Ss("15.2.10"),md={},yd="ngOriginalError";function _d(n){return n[yd]}class ni{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&_d(t);for(;e&&_d(e);)e=_d(e);return e||null}}function ry(n){return n.ownerDocument}function Mr(n){return n instanceof Function?n():n}function iy(n,t,e){let r=n.length;for(;;){const o=n.indexOf(t,e);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const i=t.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}e=o+1}}const sy="ng-template";function DM(n,t,e){let r=0,o=!0;for(;r<n.length;){let i=n[r++];if("string"==typeof i&&o){const s=n[r++];if(e&&"class"===i&&-1!==iy(s.toLowerCase(),t,0))return!0}else{if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===t)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function ay(n){return 4===n.type&&n.value!==sy}function SM(n,t,e){return t===(4!==n.type||e?n.value:sy)}function EM(n,t,e){let r=4;const o=n.attrs||[],i=function TM(n){for(let t=0;t<n.length;t++)if(Rg(n[t]))return t;return n.length}(o);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!SM(n,l,e)||""===l&&1===t.length){if(Un(r))return!1;s=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==n.attrs){if(!DM(n.attrs,c,e)){if(Un(r))return!1;s=!0}continue}const d=xM(8&r?"class":l,o,ay(n),e);if(-1===d){if(Un(r))return!1;s=!0;continue}if(""!==c){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==iy(f,c,0)||2&r&&c!==h){if(Un(r))return!1;s=!0}}}}else{if(!s&&!Un(r)&&!Un(l))return!1;if(s&&Un(l))continue;s=!1,r=l|1&r}}return Un(r)||s}function Un(n){return 0==(1&n)}function xM(n,t,e,r){if(null===t)return-1;let o=0;if(r||!e){let i=!1;for(;o<t.length;){const s=t[o];if(s===n)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=t[++o];for(;"string"==typeof a;)a=t[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function IM(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function ly(n,t,e=!1){for(let r=0;r<t.length;r++)if(EM(n,t[r],e))return!0;return!1}function cy(n,t){return n?":not("+t.trim()+")":t}function AM(n){let t=n[0],e=1,r=2,o="",i=!1;for(;e<n.length;){let s=n[e];if("string"==typeof s)if(2&r){const a=n[++e];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Un(s)&&(t+=cy(i,o),o=""),r=s,i=i||!Un(r);e++}return""!==o&&(t+=cy(i,o)),t}const pe={};function D(n){uy(xe(),F(),Wt()+n,!1)}function uy(n,t,e,r){if(!r)if(3==(3&t[ye])){const i=n.preOrderCheckHooks;null!==i&&qa(t,i,e)}else{const i=n.preOrderHooks;null!==i&&Wa(t,i,0,e)}fo(e)}function py(n,t=null,e=null,r){const o=gy(n,t,e,r);return o.resolveInjectorInitializers(),o}function gy(n,t=null,e=null,r,o=new Set){const i=[e||Me,Yx(n)];return r=r||("object"==typeof n?void 0:$e(n)),new Zm(i,t||hl(),r||null,o)}let lr=(()=>{class n{static create(e,r){if(Array.isArray(e))return py({name:""},r,e,"");{const o=e.name??"";return py({name:o},e.parent,e.providers,o)}}}return n.THROW_IF_NOT_FOUND=Zi,n.NULL=new Wm,n.\u0275prov=J({token:n,providedIn:"any",factory:()=>G(Gm)}),n.__NG_ELEMENT_ID__=-1,n})();function P(n,t=ae.Default){const e=F();return null===e?G(n,t):Hg(kt(),e,se(n),t)}function Dy(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const i=e[r+1];if(-1!==i){const s=n.data[i];wu(e[r]),s.contentQueries(2,t[i],i)}}}function pl(n,t,e,r,o,i,s,a,l,c,u){const d=t.blueprint.slice();return d[wr]=o,d[ye]=76|r,(null!==u||n&&1024&n[ye])&&(d[ye]|=1024),Cg(d),d[Xe]=d[Vo]=n,d[at]=e,d[Va]=s||n&&n[Va],d[be]=a||n&&n[be],d[fu]=l||n&&n[fu]||null,d[ja]=c||n&&n[ja]||null,d[jt]=i,d[os]=function YE(){return QE++}(),d[ug]=u,d[Vt]=2==t.type?n[Vt]:d,d}function ii(n,t,e,r,o){let i=n.data[t];if(null===i)i=function Dd(n,t,e,r,o){const i=Dg(),s=_u(),l=n.data[t]=function r1(n,t,e,r,o,i){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,e,t,r,o);return null===n.firstChild&&(n.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(n,t,e,r,o),function tE(){return fe.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=e,i.value=r,i.attrs=o;const s=function ss(){const n=fe.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return ir(i,!0),i}function Es(n,t,e,r){if(0===e)return-1;const o=t.length;for(let i=0;i<e;i++)t.push(r),n.blueprint.push(r),n.data.push(null);return o}function Sd(n,t,e){Du(t);try{const r=n.viewQuery;null!==r&&kd(1,r,e);const o=n.template;null!==o&&Sy(n,t,o,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Dy(n,t),n.staticViewQueries&&kd(2,n.viewQuery,e);const i=n.components;null!==i&&function e1(n,t){for(let e=0;e<t.length;e++)D1(n,t[e])}(t,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[ye]&=-5,Su()}}function gl(n,t,e,r){const o=t[ye];if(128!=(128&o)){Du(t);try{Cg(t),function Eg(n){return fe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&Sy(n,t,e,2,r);const s=3==(3&o);if(s){const c=n.preOrderCheckHooks;null!==c&&qa(t,c,null)}else{const c=n.preOrderHooks;null!==c&&Wa(t,c,0,null),Eu(t,0)}if(function b1(n){for(let t=qu(n);null!==t;t=Wu(t)){if(!t[dg])continue;const e=t[Uo];for(let r=0;r<e.length;r++){const o=e[r];512&o[ye]||yu(o[Xe],1),o[ye]|=512}}}(t),function C1(n){for(let t=qu(n);null!==t;t=Wu(t))for(let e=Gt;e<t.length;e++){const r=t[e],o=r[q];za(r)&&gl(o,r,o.template,r[at])}}(t),null!==n.contentQueries&&Dy(n,t),s){const c=n.contentCheckHooks;null!==c&&qa(t,c)}else{const c=n.contentHooks;null!==c&&Wa(t,c,1),Eu(t,1)}!function ZM(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const o=e[r];if(o<0)fo(~o);else{const i=o,s=e[++r],a=e[++r];nE(s,i),a(2,t[i])}}}finally{fo(-1)}}(n,t);const a=n.components;null!==a&&function XM(n,t){for(let e=0;e<t.length;e++)w1(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&kd(2,l,r),s){const c=n.viewCheckHooks;null!==c&&qa(t,c)}else{const c=n.viewHooks;null!==c&&Wa(t,c,2),Eu(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[ye]&=-41,512&t[ye]&&(t[ye]&=-513,yu(t[Xe],-1))}finally{Su()}}}function Sy(n,t,e,r,o){const i=Wt(),s=2&r;try{fo(-1),s&&t.length>qe&&uy(n,t,qe,!1),Tn(s?2:0,o),e(r,o)}finally{fo(i),Tn(s?3:1,o)}}function Ed(n,t,e){if(gu(t)){const o=t.directiveEnd;for(let i=t.directiveStart;i<o;i++){const s=n.data[i];s.contentQueries&&s.contentQueries(1,e[i],i)}}}function xd(n,t,e){wg()&&(function u1(n,t,e,r){const o=e.directiveStart,i=e.directiveEnd;is(e)&&function y1(n,t,e){const r=hn(t,n),o=Ey(e),i=n[Va],s=ml(n,pl(n,o,null,e.onPush?32:16,r,t,i,i.createRenderer(r,e),null,null,null));n[t.index]=s}(t,e,n.data[o+e.componentOffset]),n.firstCreatePass||Ya(e,t),$t(r,t);const s=e.initialInputs;for(let a=o;a<i;a++){const l=n.data[a],c=po(t,n,a,e);$t(c,t),null!==s&&_1(0,a-o,c,l,0,s),$n(l)&&(on(e.index,t)[at]=po(t,n,a,e))}}(n,t,e,hn(e,t)),64==(64&e.flags)&&Oy(n,t,e))}function Md(n,t,e=hn){const r=t.localNames;if(null!==r){let o=t.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?e(t,n):n[s];n[o++]=a}}}function Ey(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Td(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Td(n,t,e,r,o,i,s,a,l,c){const u=qe+r,d=u+o,h=function t1(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:pe);return e}(u,d),f="function"==typeof c?c():c;return h[q]={type:n,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function xy(n,t,e,r){const o=Py(t);null===e?o.push(r):(o.push(e),n.firstCreatePass&&ky(n).push(r,o.length-1))}function My(n,t,e,r){for(let o in n)if(n.hasOwnProperty(o)){e=null===e?{}:e;const i=n[o];null===r?Ty(e,t,o,i):r.hasOwnProperty(o)&&Ty(e,t,r[o],i)}return e}function Ty(n,t,e,r){n.hasOwnProperty(e)?n[e].push(t,r):n[e]=[t,r]}function Id(n,t,e,r){if(wg()){const o=null===r?null:{"":-1},i=function h1(n,t){const e=n.directiveRegistry;let r=null,o=null;if(e)for(let i=0;i<e.length;i++){const s=e[i];if(ly(t,s.selectors,!1))if(r||(r=[]),$n(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Od(n,t,a.length)}else r.unshift(s),Od(n,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(n,e);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&Iy(n,t,e,s,o,a),o&&function f1(n,t,e){if(t){const r=n.localNames=[];for(let o=0;o<t.length;o+=2){const i=e[t[o+1]];if(null==i)throw new $(-301,!1);r.push(t[o],i)}}}(e,r,o)}e.mergedAttrs=ls(e.mergedAttrs,e.attrs)}function Iy(n,t,e,r,o,i){for(let c=0;c<r.length;c++)Au(Ya(e,t),n,r[c].type);!function g1(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Es(n,t,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];e.mergedAttrs=ls(e.mergedAttrs,u.hostAttrs),m1(n,e,t,l,u),p1(l,u,o),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function o1(n,t,e){const o=t.directiveEnd,i=n.data,s=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<o;u++){const d=i[u],h=e?e.get(d):null,p=h?h.outputs:null;l=My(d.inputs,u,l,h?h.inputs:null),c=My(d.outputs,u,c,p);const m=null===l||null===s||ay(t)?null:v1(l,u,s);a.push(m)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(n,e,i)}function Oy(n,t,e){const r=e.directiveStart,o=e.directiveEnd,i=e.index,s=function rE(){return fe.lFrame.currentDirectiveIndex}();try{fo(i);for(let a=r;a<o;a++){const l=n.data[a],c=t[a];Cu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&d1(l,c)}}finally{fo(-1),Cu(s)}}function d1(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function Od(n,t,e){t.componentOffset=e,(n.components??(n.components=[])).push(t.index)}function p1(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;$n(t)&&(e[""]=n)}}function m1(n,t,e,r,o){n.data[r]=o;const i=o.factory||(o.factory=ho(o.type)),s=new as(i,$n(o),P);n.blueprint[r]=s,e[r]=s,function l1(n,t,e,r,o){const i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~t.index;(function c1(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,r,i)}}(n,t,r,Es(n,e,o.hostVars,pe),o)}function cr(n,t,e,r,o,i){const s=hn(n,t);!function Ad(n,t,e,r,o,i,s){if(null==i)n.removeAttribute(t,o,e);else{const a=null==s?he(i):s(i,r||"",o);n.setAttribute(t,o,a,e)}}(t[be],s,i,n.value,e,r,o)}function _1(n,t,e,r,o,i){const s=i[t];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(e,d,c,u):e[u]=d}}}function v1(n,t,e){let r=null,o=0;for(;o<e.length;){const i=e[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const s=n[i];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(i,s[a+1],e[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Ay(n,t,e,r){return[n,!0,!1,t,null,0,r,e,null,null]}function w1(n,t){const e=on(t,n);if(za(e)){const r=e[q];48&e[ye]?gl(r,e,r.template,e[at]):e[uo]>0&&Pd(e)}}function Pd(n){for(let r=qu(n);null!==r;r=Wu(r))for(let o=Gt;o<r.length;o++){const i=r[o];if(za(i))if(512&i[ye]){const s=i[q];gl(s,i,s.template,i[at])}else i[uo]>0&&Pd(i)}const e=n[q].components;if(null!==e)for(let r=0;r<e.length;r++){const o=on(e[r],n);za(o)&&o[uo]>0&&Pd(o)}}function D1(n,t){const e=on(t,n),r=e[q];(function S1(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),Sd(r,e,e[at])}function ml(n,t){return n[ns]?n[cg][jn]=t:n[ns]=t,n[cg]=t,t}function yl(n){for(;n;){n[ye]|=32;const t=ys(n);if(LS(n)&&!t)return n;n=t}return null}function _l(n,t,e,r=!0){const o=t[Va];o.begin&&o.begin();try{gl(n,t,n.template,e)}catch(s){throw r&&Ny(t,s),s}finally{o.end&&o.end()}}function kd(n,t,e){wu(0),t(n,e)}function Py(n){return n[jo]||(n[jo]=[])}function ky(n){return n.cleanup||(n.cleanup=[])}function Ny(n,t){const e=n[ja],r=e?e.get(ni,null):null;r&&r.handleError(t)}function Rd(n,t,e,r,o){for(let i=0;i<e.length;){const s=e[i++],a=e[i++],l=t[s],c=n.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function Tr(n,t,e){const r=Ha(t,n);!function ym(n,t,e){n.setValue(t,e)}(n[be],r,e)}function vl(n,t,e){let r=e?n.styles:null,o=e?n.classes:null,i=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?i=a:1==i?o=ou(o,a):2==i&&(r=ou(r,a+": "+t[++s]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=o:n.classesWithoutHost=o}function Cl(n,t,e,r,o=!1){for(;null!==e;){const i=t[e.index];if(null!==i&&r.push(Pt(i)),Vn(i))for(let a=Gt;a<i.length;a++){const l=i[a],c=l[q].firstChild;null!==c&&Cl(l[q],l,c,r)}const s=e.type;if(8&s)Cl(n,t,e.child,r);else if(32&s){const a=Gu(e,t);let l;for(;l=a();)r.push(l)}else if(16&s){const a=Tm(t,e);if(Array.isArray(a))r.push(...a);else{const l=ys(t[Vt]);Cl(l[q],l,a,r,!0)}}e=o?e.projectionNext:e.next}return r}class xs{get rootNodes(){const t=this._lView,e=t[q];return Cl(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[at]}set context(t){this._lView[at]=t}get destroyed(){return 128==(128&this._lView[ye])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Xe];if(Vn(t)){const e=t[Ua],r=e?e.indexOf(this):-1;r>-1&&(Qu(t,r),el(e,r))}this._attachedToViewContainer=!1}vm(this._lView[q],this._lView)}onDestroy(t){xy(this._lView[q],this._lView,null,t)}markForCheck(){yl(this._cdRefInjectingView||this._lView)}detach(){this._lView[ye]&=-65}reattach(){this._lView[ye]|=64}detectChanges(){_l(this._lView[q],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hx(n,t){_s(n,t,t[be],2,null,null)}(this._lView[q],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=t}}class E1 extends xs{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;_l(t[q],t,t[at],!1)}checkNoChanges(){}get context(){return null}}class Fy extends Ds{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Oe(t);return new Ms(e,this.ngModule)}}function Ly(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class M1{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=Na(r);const o=this.injector.get(t,md,r);return o!==md||e===md?o:this.parentInjector.get(t,e,r)}}class Ms extends ey{get inputs(){return Ly(this.componentDef.inputs)}get outputs(){return Ly(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function PM(n){return n.map(AM).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,o){let i=(o=o||this.ngModule)instanceof ar?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new M1(t,i):t,a=s.get(ny,null);if(null===a)throw new $(407,!1);const l=s.get(hM,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function n1(n,t,e){return n.selectRootElement(t,e===rr.ShadowDom)}(c,r,this.componentDef.encapsulation):Ju(c,u,function x1(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Td(0,null,null,1,0,null,null,null,null,null),p=pl(null,f,null,h,null,null,a,c,l,s,null);let m,g;Du(p);try{const C=this.componentDef;let x,b=null;C.findHostDirectiveDefs?(x=[],b=new Map,C.findHostDirectiveDefs(C,x,b),x.push(C)):x=[C];const A=function I1(n,t){const e=n[q],r=qe;return n[r]=t,ii(e,r,2,"#host",null)}(p,d),R=function O1(n,t,e,r,o,i,s,a){const l=o[q];!function A1(n,t,e,r){for(const o of n)t.mergedAttrs=ls(t.mergedAttrs,o.hostAttrs);null!==t.mergedAttrs&&(vl(t,t.mergedAttrs,!0),null!==e&&Am(r,e,t))}(r,n,t,s);const c=i.createRenderer(t,e),u=pl(o,Ey(e),null,e.onPush?32:16,o[n.index],n,i,c,a||null,null,null);return l.firstCreatePass&&Od(l,n,r.length-1),ml(o,u),o[n.index]=u}(A,d,C,x,p,a,c);g=vg(f,qe),d&&function k1(n,t,e,r){if(r)Mu(n,e,["ng-version",fM.full]);else{const{attrs:o,classes:i}=function kM(n){const t=[],e=[];let r=1,o=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===o?""!==i&&t.push(i,n[++r]):8===o&&e.push(i);else{if(!Un(o))break;o=i}r++}return{attrs:t,classes:e}}(t.selectors[0]);o&&Mu(n,e,o),i&&i.length>0&&Om(n,e,i.join(" "))}}(c,C,d,r),void 0!==e&&function R1(n,t,e){const r=n.projection=[];for(let o=0;o<t.length;o++){const i=e[o];r.push(null!=i?Array.from(i):null)}}(g,this.ngContentSelectors,e),m=function P1(n,t,e,r,o,i){const s=kt(),a=o[q],l=hn(s,o);Iy(a,o,s,e,null,r);for(let u=0;u<e.length;u++)$t(po(o,a,s.directiveStart+u,s),o);Oy(a,o,s),l&&$t(l,o);const c=po(o,a,s.directiveStart+s.componentOffset,s);if(n[at]=o[at]=c,null!==i)for(const u of i)u(c,t);return Ed(a,s,n),c}(R,C,x,b,p,[N1]),Sd(f,p,null)}finally{Su()}return new T1(this.componentType,m,ti(g,p),p,g)}}class T1 extends sM{constructor(t,e,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new E1(o),this.componentType=t}setInput(t,e){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[t])){const i=this._rootLView;Rd(i[q],i,o,t,e),yl(on(this._tNode.index,i))}}get injector(){return new Go(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function N1(){const n=kt();Ga(F()[q],n)}function Pe(n){let t=function jy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let o;if($n(n))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new $(903,!1);o=t.\u0275dir}if(o){if(e){r.push(o);const s=n;s.inputs=Nd(n.inputs),s.declaredInputs=Nd(n.declaredInputs),s.outputs=Nd(n.outputs);const a=o.hostBindings;a&&V1(n,a);const l=o.viewQuery,c=o.contentQueries;if(l&&L1(n,l),c&&j1(n,c),ru(n.inputs,o.inputs),ru(n.declaredInputs,o.declaredInputs),ru(n.outputs,o.outputs),$n(o)&&o.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(n),a===Pe&&(e=!1)}}t=Object.getPrototypeOf(t)}!function F1(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const o=n[r];o.hostVars=t+=o.hostVars,o.hostAttrs=ls(o.hostAttrs,e=ls(e,o.hostAttrs))}}(r)}function Nd(n){return n===Cr?{}:n===Me?[]:n}function L1(n,t){const e=n.viewQuery;n.viewQuery=e?(r,o)=>{t(r,o),e(r,o)}:t}function j1(n,t){const e=n.contentQueries;n.contentQueries=e?(r,o,i)=>{t(r,o,i),e(r,o,i)}:t}function V1(n,t){const e=n.hostBindings;n.hostBindings=e?(r,o)=>{t(r,o),e(r,o)}:t}function bl(n){return!!Fd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Fd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ur(n,t,e){return n[t]=e}function Ut(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function _o(n,t,e,r){const o=Ut(n,t,e);return Ut(n,t+1,r)||o}function Bt(n,t,e,r){const o=F();return Ut(o,Ho(),t)&&(xe(),cr(Qe(),o,n,t,e,r)),Bt}function li(n,t,e,r,o,i){const a=_o(n,function Dr(){return fe.lFrame.bindingIndex}(),e,o);return Sr(2),a?t+he(e)+r+he(o)+i:pe}function Q(n,t,e,r,o,i,s,a){const l=F(),c=xe(),u=n+qe,d=c.firstCreatePass?function J1(n,t,e,r,o,i,s,a,l){const c=t.consts,u=ii(t,n,4,s||null,Ur(c,a));Id(t,e,u,Ur(c,l)),Ga(t,u);const d=u.tView=Td(2,u,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,r,o,i,s):c.data[u];ir(d,!1);const h=l[be].createComment("");il(c,l,h,d),$t(h,l),ml(l,l[u]=Ay(h,l,h,d)),Ba(d)&&xd(c,l,d),null!=s&&Md(l,d,a)}function Dl(n){return function Bo(n,t){return n[t]}(function eE(){return fe.lFrame.contextLView}(),qe+n)}function L(n,t,e){const r=F();return Ut(r,Ho(),t)&&function gn(n,t,e,r,o,i,s,a){const l=hn(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[r])?(Rd(n,e,u,r,o),is(t)&&function s1(n,t){const e=on(t,n);16&e[ye]||(e[ye]|=32)}(e,t.index)):3&t.type&&(r=function i1(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=s?s(o,t.value||"",r):o,i.setProperty(l,r,o))}(xe(),Qe(),r,n,t,r[be],e,!1),L}function Ld(n,t,e,r,o){const s=o?"class":"style";Rd(n,e,t.inputs[s],s,r)}function y(n,t,e,r){const o=F(),i=xe(),s=qe+n,a=o[be],l=i.firstCreatePass?function Y1(n,t,e,r,o,i){const s=t.consts,l=ii(t,n,2,r,Ur(s,o));return Id(t,e,l,Ur(s,i)),null!==l.attrs&&vl(l,l.attrs,!1),null!==l.mergedAttrs&&vl(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,i,o,t,e,r):i.data[s],c=o[s]=Ju(a,t,function dE(){return fe.lFrame.currentNamespace}()),u=Ba(l);return ir(l,!0),Am(a,c,l),32!=(32&l.flags)&&il(i,o,c,l),0===function JS(){return fe.lFrame.elementDepthCount}()&&$t(c,o),function QS(){fe.lFrame.elementDepthCount++}(),u&&(xd(i,o,l),Ed(i,l,o)),null!==r&&Md(o,l),y}function _(){let n=kt();_u()?vu():(n=n.parent,ir(n,!1));const t=n;!function YS(){fe.lFrame.elementDepthCount--}();const e=xe();return e.firstCreatePass&&(Ga(e,n),gu(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function gE(n){return 0!=(8&n.flags)}(t)&&Ld(e,t,F(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function mE(n){return 0!=(16&n.flags)}(t)&&Ld(e,t,F(),t.stylesWithoutHost,!1),_}function et(n,t,e,r){return y(n,t,e,r),_(),et}function Is(n,t,e){const r=F(),o=xe(),i=n+qe,s=o.firstCreatePass?function Z1(n,t,e,r,o){const i=t.consts,s=Ur(i,r),a=ii(t,n,8,"ng-container",s);return null!==s&&vl(a,s,!0),Id(t,e,a,Ur(i,o)),null!==t.queries&&t.queries.elementStart(t,a),a}(i,o,r,t,e):o.data[i];ir(s,!0);const a=r[i]=r[be].createComment("");return il(o,r,a,s),$t(a,r),Ba(s)&&(xd(o,r,s),Ed(o,s,r)),null!=e&&Md(r,s),Is}function Os(){let n=kt();const t=xe();return _u()?vu():(n=n.parent,ir(n,!1)),t.firstCreatePass&&(Ga(t,n),gu(n)&&t.queries.elementEnd(n)),Os}function tt(){return F()}function As(n){return!!n&&"function"==typeof n.then}const jd=function Zy(n){return!!n&&"function"==typeof n.subscribe};function B(n,t,e,r){const o=F(),i=xe(),s=kt();return function e_(n,t,e,r,o,i,s){const a=Ba(r),c=n.firstCreatePass&&ky(n),u=t[at],d=Py(t);let h=!0;if(3&r.type||s){const m=hn(r,t),g=s?s(m):m,C=d.length,x=s?A=>s(Pt(A[r.index])):r.index;let b=null;if(!s&&a&&(b=function X1(n,t,e,r){const o=n.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===e&&o[i+1]===r){const a=t[jo],l=o[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(n,t,o,r.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=i,b.__ngLastListenerFn__=i,h=!1;else{i=n_(r,t,u,i,!1);const A=e.listen(g,o,i);d.push(i,A),c&&c.push(o,x,C,C+1)}}else i=n_(r,t,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const m=p.length;if(m)for(let g=0;g<m;g+=2){const R=t[p[g]][p[g+1]].subscribe(i),W=d.length;d.push(i,R),c&&c.push(o,r.index,W,-(W+1))}}}(i,o,o[be],s,n,t,r),B}function t_(n,t,e,r){try{return Tn(6,t,e),!1!==e(r)}catch(o){return Ny(n,o),!1}finally{Tn(7,t,e)}}function n_(n,t,e,r,o){return function i(s){if(s===Function)return r;yl(n.componentOffset>-1?on(n.index,t):t);let l=t_(t,e,r,s),c=i.__ngNextListenerFn__;for(;c;)l=t_(t,e,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function j(n=1){return function iE(n){return(fe.lFrame.contextLView=function sE(n,t){for(;n>0;)t=t[Vo],n--;return t}(n,fe.lFrame.contextLView))[at]}(n)}function Sl(n,t){return n<<17|t<<2}function Hr(n){return n>>17&32767}function $d(n){return 2|n}function vo(n){return(131068&n)>>2}function Ud(n,t){return-131069&n|t<<2}function Bd(n){return 1|n}function h_(n,t,e,r,o){const i=n[e+1],s=null===t;let a=r?Hr(i):vo(i),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];lT(n[a],t)&&(l=!0,n[a+1]=r?Bd(u):$d(u)),a=r?Hr(u):vo(u)}l&&(n[e+1]=r?$d(i):Bd(i))}function lT(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Qo(n,t)>=0}function nt(n,t){return function Bn(n,t,e,r){const o=F(),i=xe(),s=Sr(2);i.firstUpdatePass&&function b_(n,t,e,r){const o=n.data;if(null===o[e+1]){const i=o[Wt()],s=function C_(n,t){return t>=n.expandoStartIndex}(n,e);(function E_(n,t){return 0!=(n.flags&(t?8:16))})(i,r)&&null===t&&!s&&(t=!1),t=function yT(n,t,e,r){const o=function bu(n){const t=fe.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let i=r?t.residualClasses:t.residualStyles;if(null===o)0===(r?t.classBindings:t.styleBindings)&&(e=Ps(e=Hd(null,n,t,e,r),t.attrs,r),i=null);else{const s=t.directiveStylingLast;if(-1===s||n[s]!==o)if(e=Hd(o,n,t,e,r),null===i){let l=function _T(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==vo(r))return n[Hr(r)]}(n,t,r);void 0!==l&&Array.isArray(l)&&(l=Hd(null,n,t,l[1],r),l=Ps(l,t.attrs,r),function vT(n,t,e,r){n[Hr(e?t.classBindings:t.styleBindings)]=r}(n,t,r,l))}else i=function CT(n,t,e){let r;const o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++)r=Ps(r,n[i].hostAttrs,e);return Ps(r,t.attrs,e)}(n,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),e}(o,i,t,r),function sT(n,t,e,r,o,i){let s=i?t.classBindings:t.styleBindings,a=Hr(s),l=vo(s);n[r]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Qo(e,u)>0)&&(c=!0)):u=e,o)if(0!==l){const h=Hr(n[a+1]);n[r+1]=Sl(h,a),0!==h&&(n[h+1]=Ud(n[h+1],r)),n[a+1]=function oT(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=Sl(a,0),0!==a&&(n[a+1]=Ud(n[a+1],r)),a=r;else n[r+1]=Sl(l,0),0===a?a=r:n[l+1]=Ud(n[l+1],r),l=r;c&&(n[r+1]=$d(n[r+1])),h_(n,u,r,!0),h_(n,u,r,!1),function aT(n,t,e,r,o){const i=o?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof t&&Qo(i,t)>=0&&(e[r+1]=Bd(e[r+1]))}(t,u,n,r,i),s=Sl(a,l),i?t.classBindings=s:t.styleBindings=s}(o,i,t,e,s,r)}}(i,n,s,r),t!==pe&&Ut(o,s,t)&&function D_(n,t,e,r,o,i,s,a){if(!(3&t.type))return;const l=n.data,c=l[a+1],u=function iT(n){return 1==(1&n)}(c)?S_(l,t,e,o,vo(c),s):void 0;El(u)||(El(i)||function rT(n){return 2==(2&n)}(c)&&(i=S_(l,null,e,o,a,s)),function wx(n,t,e,r,o){if(t)o?n.addClass(e,r):n.removeClass(e,r);else{let i=-1===r.indexOf("-")?void 0:sn.DashCase;null==o?n.removeStyle(e,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=sn.Important),n.setStyle(e,r,o,i))}}(r,s,Ha(Wt(),e),o,i))}(i,i.data[Wt()],o,o[be],n,o[s+1]=function ST(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=$e(Br(n)))),n}(t,e),r,s)}(n,t,null,!0),nt}function Hd(n,t,e,r,o){let i=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(i=t[a],r=Ps(r,i.hostAttrs,o),i!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function Ps(n,t,e){const r=e?1:2;let o=-1;if(null!==t)for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?o=s:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),fn(n,s,!!e||t[++i]))}return void 0===n?null:n}function S_(n,t,e,r,o,i){const s=null===t;let a;for(;o>0;){const l=n[o],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[o+1];h===pe&&(h=d?Me:void 0);let f=d?Nu(h,r):u===r?h:void 0;if(c&&!El(f)&&(f=Nu(l,r)),El(f)&&(a=f,s))return a;const p=n[o+1];o=s?Hr(p):vo(p)}if(null!==t){let l=i?t.residualClasses:t.residualStyles;null!=l&&(a=Nu(l,r))}return a}function El(n){return void 0!==n}function E(n,t=""){const e=F(),r=xe(),o=n+qe,i=r.firstCreatePass?ii(r,o,1,t,null):r.data[o],s=e[o]=function Ku(n,t){return n.createText(t)}(e[be],t);il(r,e,s,i),ir(i,!1)}function St(n){return ke("",n,""),St}function ke(n,t,e){const r=F(),o=function ai(n,t,e,r){return Ut(n,Ho(),e)?t+he(e)+r:pe}(r,n,t,e);return o!==pe&&Tr(r,Wt(),o),ke}function Co(n,t,e,r,o){const i=F(),s=li(i,n,t,e,r,o);return s!==pe&&Tr(i,Wt(),s),Co}const yi="en-US";let q_=yi;function qd(n,t,e,r,o){if(n=se(n),Array.isArray(n))for(let i=0;i<n.length;i++)qd(n[i],t,e,r,o);else{const i=xe(),s=F();let a=yo(n)?n:se(n.provide),l=Xm(n);const c=kt(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(yo(n)||!n.multi){const f=new as(l,o,P),p=Kd(a,t,o?u:u+h,d);-1===p?(Au(Ya(c,s),i,a),Wd(i,n,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(f),s.push(f)):(e[p]=f,s[p]=f)}else{const f=Kd(a,t,u+h,d),p=Kd(a,t,u,u+h),g=p>=0&&e[p];if(o&&!g||!o&&!(f>=0&&e[f])){Au(Ya(c,s),i,a);const C=function BI(n,t,e,r,o){const i=new as(n,e,P);return i.multi=[],i.index=t,i.componentProviders=0,yv(i,o,r&&!e),i}(o?UI:$I,e.length,o,r,l);!o&&g&&(e[p].providerFactory=C),Wd(i,n,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(C),s.push(C)}else Wd(i,n,f>-1?f:p,yv(e[o?p:f],l,!o&&r));!o&&r&&g&&e[p].componentProviders++}}}function Wd(n,t,e,r){const o=yo(t),i=function Xx(n){return!!n.useClass}(t);if(o||i){const l=(i?se(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!o&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function yv(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Kd(n,t,e,r){for(let o=e;o<r;o++)if(t[o]===n)return o;return-1}function $I(n,t,e,r){return Jd(this.multi,[])}function UI(n,t,e,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=po(e,e[q],this.providerFactory.index,r);i=a.slice(0,s),Jd(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],Jd(o,i);return i}function Jd(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Ke(n,t=[]){return e=>{e.providersResolver=(r,o)=>function VI(n,t,e){const r=xe();if(r.firstCreatePass){const o=$n(n);qd(e,r.data,r.blueprint,o,!0),qd(t,r.data,r.blueprint,o,!1)}}(r,o?o(n):n,t)}}class _i{}class _v{}class vv extends _i{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Fy(this);const r=un(t);this._bootstrapComponents=Mr(r.bootstrap),this._r3Injector=gy(t,e,[{provide:_i,useValue:this},{provide:Ds,useValue:this.componentFactoryResolver}],$e(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Qd extends _v{constructor(t){super(),this.moduleType=t}create(t){return new vv(this.moduleType,t)}}class zI extends _i{constructor(t,e,r){super(),this.componentFactoryResolver=new Fy(this),this.instance=null;const o=new Zm([...t,{provide:_i,useValue:this},{provide:Ds,useValue:this.componentFactoryResolver}],e||hl(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Ol(n,t,e=null){return new zI(n,t,e).injector}let GI=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const r=Km(0,e.type),o=r.length>0?Ol([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,o)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=J({token:n,providedIn:"environment",factory:()=>new n(G(ar))}),n})();function Cv(n){n.getStandaloneInjector=t=>t.get(GI).getOrCreateStandaloneInjector(n)}function vi(n,t,e){const r=qt()+n,o=F();return o[r]===pe?ur(o,r,e?t.call(e):t()):function Ts(n,t){return n[t]}(o,r)}function Al(n,t,e,r,o){return function Tv(n,t,e,r,o,i,s){const a=t+e;return _o(n,a,o,i)?ur(n,a+2,s?r.call(s,o,i):r(o,i)):js(n,a+2)}(F(),qt(),n,t,e,r,o)}function Zd(n,t,e,r,o,i){return function Iv(n,t,e,r,o,i,s,a){const l=t+e;return function wl(n,t,e,r,o){const i=_o(n,t,e,r);return Ut(n,t+2,o)||i}(n,l,o,i,s)?ur(n,l+3,a?r.call(a,o,i,s):r(o,i,s)):js(n,l+3)}(F(),qt(),n,t,e,r,o,i)}function js(n,t){const e=n[t];return e===pe?void 0:e}function Xd(n){return t=>{setTimeout(n,void 0,t)}}const ot=class pO extends w{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){let o=t,i=e||(()=>null),s=r;if(t&&"object"==typeof t){const l=t;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=Xd(i),o&&(o=Xd(o)),s&&(s=Xd(s)));const a=super.subscribe({next:o,error:i,complete:s});return t instanceof I&&t.add(a),a}};function gO(){return this._results[Symbol.iterator]()}class eh{get changes(){return this._changes||(this._changes=new ot)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=eh.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=gO)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const o=function In(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function xE(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],i=t[r];if(e&&(o=e(o),i=e(i)),i!==o)return!1}return!0}(r._results,o,e))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ir=(()=>{class n{}return n.__NG_ELEMENT_ID__=_O,n})();const mO=Ir,yO=class extends mO{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t,e){const r=this._declarationTContainer.tView,o=pl(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,e||null);o[rs]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[or];return null!==s&&(o[or]=s.createEmbeddedView(r)),Sd(r,o,t),new xs(o)}};function _O(){return Pl(kt(),F())}function Pl(n,t){return 4&n.type?new yO(t,n,ti(n,t)):null}let zn=(()=>{class n{}return n.__NG_ELEMENT_ID__=vO,n})();function vO(){return Rv(kt(),F())}const CO=zn,Pv=class extends CO{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return ti(this._hostTNode,this._hostLView)}get injector(){return new Go(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ou(this._hostTNode,this._hostLView);if(Lg(t)){const e=Ja(t,this._hostLView),r=Ka(t);return new Go(e[q].data[r+8],e)}return new Go(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=kv(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(t,e,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=t.createEmbeddedView(e||{},i);return this.insert(s,o),s}createComponent(t,e,r,o,i){const s=t&&!function us(n){return"function"==typeof n}(t);let a;if(s)a=e;else{const d=e||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const l=s?t:new Ms(Oe(t)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const h=(s?c:this.parentInjector).get(ar,null);h&&(i=h)}const u=l.create(c,o,void 0,i);return this.insert(u.hostView,a),u}insert(t,e){const r=t._lView,o=r[q];if(function KS(n){return Vn(n[Xe])}(r)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const d=r[Xe],h=new Pv(d,d[jt],d[Xe]);h.detach(h.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function px(n,t,e,r){const o=Gt+r,i=e.length;r>0&&(e[o-1][jn]=t),r<i-Gt?(t[jn]=e[o],Jg(e,Gt+r,t)):(e.push(t),t[jn]=null),t[Xe]=e;const s=t[rs];null!==s&&e!==s&&function gx(n,t){const e=n[Uo];t[Vt]!==t[Xe][Xe][Vt]&&(n[dg]=!0),null===e?n[Uo]=[t]:e.push(t)}(s,t);const a=t[or];null!==a&&a.insertView(n),t[ye]|=64}(o,r,s,i);const a=Xu(i,s),l=r[be],c=ol(l,s[$a]);return null!==c&&function dx(n,t,e,r,o,i){r[wr]=o,r[jt]=t,_s(n,r,e,1,o,i)}(o,s[jt],l,r,c,a),t.attachToViewContainerRef(),Jg(th(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=kv(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=Qu(this._lContainer,e);r&&(el(th(this._lContainer),e),vm(r[q],r))}detach(t){const e=this._adjustIndex(t,-1),r=Qu(this._lContainer,e);return r&&null!=el(th(this._lContainer),e)?new xs(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function kv(n){return n[Ua]}function th(n){return n[Ua]||(n[Ua]=[])}function Rv(n,t){let e;const r=t[n.index];if(Vn(r))e=r;else{let o;if(8&n.type)o=Pt(r);else{const i=t[be];o=i.createComment("");const s=hn(n,t);mo(i,ol(i,s),o,function vx(n,t){return n.nextSibling(t)}(i,s),!1)}t[n.index]=e=Ay(r,t,o,n),ml(t,e)}return new Pv(e,n,t)}class nh{constructor(t){this.queryList=t,this.matches=null}clone(){return new nh(this.queryList)}setDirty(){this.queryList.setDirty()}}class rh{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,o=[];for(let i=0;i<r;i++){const s=e.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new rh(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Bv(t,e).matches&&this.queries[e].setDirty()}}class Nv{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class oh{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const o=null!==e?e.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,null!==e?e.push(i):e=[i])}return null!==e?new oh(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ih{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ih(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(t,e,bO(e,i)),this.matchTNodeWithReadOption(t,e,Za(e,t,i,!1,!1))}else r===Ir?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Za(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===pn||o===zn||o===Ir&&4&e.type)this.addMatch(e.index,-2);else{const i=Za(e,t,o,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function bO(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function DO(n,t,e,r){return-1===e?function wO(n,t){return 11&n.type?ti(n,t):4&n.type?Pl(n,t):null}(t,n):-2===e?function SO(n,t,e){return e===pn?ti(t,n):e===Ir?Pl(t,n):e===zn?Rv(t,n):void 0}(n,t,r):po(n,n[q],e,t)}function Fv(n,t,e,r){const o=t[or].queries[r];if(null===o.matches){const i=n.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:DO(t,i[c],s[l+1],e.metadata.read))}o.matches=a}return o.matches}function sh(n,t,e,r){const o=n.queries.getByIndex(e),i=o.matches;if(null!==i){const s=Fv(n,t,o,e);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(s[a/2]);else{const c=i[a+1],u=t[-l];for(let d=Gt;d<u.length;d++){const h=u[d];h[rs]===h[Xe]&&sh(h[q],h,c,r)}if(null!==u[Uo]){const d=u[Uo];for(let h=0;h<d.length;h++){const f=d[h];sh(f[q],f,c,r)}}}}}return r}function Lv(n){const t=F(),e=xe(),r=Mg();wu(r+1);const o=Bv(e,r);if(n.dirty&&function WS(n){return 4==(4&n[ye])}(t)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{const i=o.crossesNgTemplate?sh(e,t,r,[]):Fv(e,t,o,r);n.reset(i,uM),n.notifyOnChanges()}return!0}return!1}function jv(n,t,e,r){const o=xe();if(o.firstCreatePass){const i=kt();(function Uv(n,t,e){null===n.queries&&(n.queries=new oh),n.queries.track(new ih(t,e))})(o,new Nv(t,e,r),i.index),function MO(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(o,n),2==(2&e)&&(o.staticContentQueries=!0)}!function $v(n,t,e){const r=new eh(4==(4&e));xy(n,t,r,r.destroy),null===t[or]&&(t[or]=new rh),t[or].queries.push(new nh(r))}(o,F(),e)}function Bv(n,t){return n.queries.getByIndex(t)}function ah(n,t){return Pl(n,t)}function Rl(...n){}const Nl=new Y("Application Initializer");let Fl=(()=>{class n{constructor(e){this.appInits=e,this.resolve=Rl,this.reject=Rl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(As(i))e.push(i);else if(jd(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});e.push(s)}}Promise.all(e).then(()=>{r()}).catch(o=>{this.reject(o)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(G(Nl,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Us=new Y("AppId",{providedIn:"root",factory:function sC(){return`${fh()}${fh()}${fh()}`}});function fh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aC=new Y("Platform Initializer"),ph=new Y("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let WO=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Or=new Y("LocaleId",{providedIn:"root",factory:()=>Ce(Or,ae.Optional|ae.SkipSelf)||function KO(){return typeof $localize<"u"&&$localize.locale||yi}()});class QO{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let lC=(()=>{class n{compileModuleSync(e){return new Qd(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),i=Mr(un(e).declarations).reduce((s,a)=>{const l=Oe(a);return l&&s.push(new Ms(l)),s},[]);return new QO(r,i)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XO=(()=>Promise.resolve(0))();function gh(n){typeof Zone>"u"?XO.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class lt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&e,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function eA(){let n=Ge.requestAnimationFrame,t=Ge.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function rA(n){const t=()=>{!function nA(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ge,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,yh(n),n.isCheckStableRunning=!0,mh(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),yh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,o,i,s,a)=>{try{return dC(n),e.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&t(),hC(n)}},onInvoke:(e,r,o,i,s,a,l)=>{try{return dC(n),e.invoke(o,i,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),hC(n)}},onHasTask:(e,r,o,i)=>{e.hasTask(o,i),r===o&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,yh(n),mh(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,r,o,i)=>(e.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lt.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(lt.isInAngularZone())throw new $(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,tA,Rl,Rl);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const tA={};function mh(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function yh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function dC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hC(n){n._nesting--,mh(n)}class oA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,o){return t.apply(e,r)}}const fC=new Y(""),Ll=new Y("");let Ch,_h=(()=>{class n{constructor(e,r,o){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ch||(function iA(n){Ch=n}(o),o.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lt.assertNotInAngularZone(),gh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gh(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:o})}whenStable(e,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,o){return[]}}return n.\u0275fac=function(e){return new(e||n)(G(lt),G(vh),G(Ll))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),vh=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return Ch?.findTestabilityInTree(this,e,r)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ar=!1;let zr=null;const pC=new Y("AllowMultipleToken"),bh=new Y("PlatformDestroyListeners"),gC=new Y("appBootstrapListener");class mC{constructor(t,e){this.name=t,this.token=e}}function _C(n,t,e=[]){const r=`Platform: ${t}`,o=new Y(r);return(i=[])=>{let s=wh();if(!s||s.injector.get(pC,!1)){const a=[...e,...i,{provide:o,useValue:!0}];n?n(a):function lA(n){if(zr&&!zr.get(pC,!1))throw new $(400,!1);zr=n;const t=n.get(CC);(function yC(n){const t=n.get(aC,null);t&&t.forEach(e=>e())})(n)}(function vC(n=[],t){return lr.create({name:t,providers:[{provide:hd,useValue:"platform"},{provide:bh,useValue:new Set([()=>zr=null])},...n]})}(a,r))}return function uA(n){const t=wh();if(!t)throw new $(401,!1);return t}()}}function wh(){return zr?.get(CC)??null}let CC=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const o=function wC(n,t){let e;return e="noop"===n?new oA:("zone.js"===n?void 0:n)||new lt(t),e}(r?.ngZone,function bC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:lt,useValue:o}];return o.run(()=>{const s=lr.create({providers:i,parent:this.injector,name:e.moduleType.name}),a=e.create(s),l=a.injector.get(ni,null);if(!l)throw new $(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Vl(this._modules,a),c.unsubscribe()})}),function DC(n,t,e){try{const r=e();return As(r)?r.catch(o=>{throw t.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(l,o,()=>{const c=a.injector.get(Fl);return c.runInitializers(),c.donePromise.then(()=>(function W_(n){Sn(n,"Expected localeId to be defined"),"string"==typeof n&&(q_=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Or,yi)||yi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,r=[]){const o=SC({},r);return function sA(n,t,e){const r=new Qd(e);return Promise.resolve(r)}(0,0,e).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(e){const r=e.injector.get(jl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!e.instance.ngDoBootstrap)throw new $(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(bh,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(G(lr))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function SC(n,t){return Array.isArray(t)?t.reduce(SC,n):{...n,...t}}let jl=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,r,o){this._zone=e,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new ze(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new ze(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{lt.assertNotInAngularZone(),gh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{lt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function fS(...n){const t=Yi(n),e=function sS(n,t){return"number"==typeof tu(n)?n.pop():t}(n,1/0),r=n;return r.length?1===r.length?Fn(r[0]):No(e)(ft(r,t)):tr}(i,s.pipe(function pS(n={}){const{connector:t=(()=>new w),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=n;return i=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const m=s;f(),m?.unsubscribe()};return S((m,g)=>{c++,!d&&!u&&h();const C=l=l??t();g.add(()=>{c--,0===c&&!d&&!u&&(a=nu(p,o))}),C.subscribe(g),!s&&c>0&&(s=new en({next:x=>C.next(x),error:x=>{d=!0,h(),a=nu(f,e,x),C.error(x)},complete:()=>{u=!0,h(),a=nu(f,r),C.complete()}}),Fn(m).subscribe(s))})(i)}}()))}bootstrap(e,r){const o=e instanceof ey;if(!this._injector.get(Fl).done){!o&&function Lo(n){const t=Oe(n)||Lt(n)||rn(n);return null!==t&&t.standalone}(e);throw new $(405,Ar)}let s;s=o?e:this._injector.get(Ds).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function aA(n){return n.isBoundToModule}(s)?void 0:this._injector.get(_i),c=s.create(lr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(fC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Vl(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new $(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;Vl(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(gC,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Vl(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new $(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(G(lt),G(ar),G(ni))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vl(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let wi=(()=>{class n{}return n.__NG_ELEMENT_ID__=hA,n})();function hA(n){return function fA(n,t,e){if(is(n)&&!e){const r=on(n.index,t);return new xs(r,r)}return 47&n.type?new xs(t[Vt],t):null}(kt(),F(),16==(16&n))}class IC{constructor(){}supports(t){return bl(t)}create(t){return new vA(t)}}const _A=(n,t)=>t;class vA{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||_A}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,o=0,i=null;for(;e||r;){const s=!r||e&&e.currentIndex<AC(r,o,i)?e:r,a=AC(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,u=l-o;if(c!=u){for(let h=0;h<c;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<c&&(i[h]=f+1)}i[s.previousIndex]=u-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!bl(t))throw new $(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,i,s,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,i,s,a)),Object.is(e.item,i)||this._addIdentityChange(e,i)):(e=this._mismatch(e,i,s,a),r=!0),e=e._next}else o=0,function q1(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(o,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,o),r=!0),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,o){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,o)):t=this._addAfter(new CA(e,r),i,o),t}_verifyReinsertion(t,e,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,i=t._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const o=null===e?this._itHead:e._next;return t._next=o,t._prev=e,null===o?this._itTail=t:o._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new OC),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OC),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class CA{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bA{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class OC{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new bA,this.map.set(e,r)),r.add(t)}get(t,e){const o=this.map.get(t);return o?o.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AC(n,t,e){const r=n.previousIndex;if(null===r)return r;let o=0;return e&&r<e.length&&(o=e[r]),r+t+o}class PC{constructor(){}supports(t){return t instanceof Map||Fd(t)}create(){return new wA}}class wA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Fd(t)))throw new $(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(o,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const o=this._records.get(t);this._maybeAddToChanges(o,e);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new DA(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class DA{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kC(){return new Bl([new IC])}let Bl=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const o=r.factories.slice();e=e.concat(o)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||kC()),deps:[[n,new fs,new hs]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(null!=r)return r;throw new $(901,!1)}}return n.\u0275prov=J({token:n,providedIn:"root",factory:kC}),n})();function RC(){return new Bs([new PC])}let Bs=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(r){const o=r.factories.slice();e=e.concat(o)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||RC()),deps:[[n,new fs,new hs]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(r)return r;throw new $(901,!1)}}return n.\u0275prov=J({token:n,providedIn:"root",factory:RC}),n})();const xA=_C(null,"core",[]);let MA=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(G(jl))},n.\u0275mod=Ln({type:n}),n.\u0275inj=En({}),n})();function Di(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Mh=null;function Pr(){return Mh}class OA{}const Qt=new Y("DocumentToken");let Th=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return function AA(){return G(NC)}()},providedIn:"platform"}),n})();const PA=new Y("Location Initialized");let NC=(()=>{class n extends Th{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pr().getBaseHref(this._doc)}onPopState(e){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){FC()?this._history.pushState(e,r,o):this._location.hash=o}replaceState(e,r,o){FC()?this._history.replaceState(e,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(G(Qt))},n.\u0275prov=J({token:n,factory:function(){return function kA(){return new NC(G(Qt))}()},providedIn:"platform"}),n})();function FC(){return!!window.history.pushState}function Ih(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function LC(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function kr(n){return n&&"?"!==n[0]?"?"+n:n}let Do=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return Ce(VC)},providedIn:"root"}),n})();const jC=new Y("appBaseHref");let VC=(()=>{class n extends Do{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ce(Qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ih(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+kr(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,i){const s=this.prepareExternalUrl(o+kr(i));this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){const s=this.prepareExternalUrl(o+kr(i));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(G(Th),G(jC,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RA=(()=>{class n extends Do{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Ih(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+kr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+kr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(G(Th),G(jC,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),Oh=(()=>{class n{constructor(e){this._subject=new ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function LA(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(LC($C(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+kr(r))}normalize(e){return n.stripTrailingSlash(function FA(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,$C(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+kr(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+kr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r,complete:o})}}return n.normalizeQueryParams=kr,n.joinWithSlash=Ih,n.stripTrailingSlash=LC,n.\u0275fac=function(e){return new(e||n)(G(Do))},n.\u0275prov=J({token:n,factory:function(){return function NA(){return new Oh(G(Do))}()},providedIn:"root"}),n})();function $C(n){return n.replace(/\/index.html$/,"")}function JC(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[o,i]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}const $h=/\s+/,QC=[];let Uh=(()=>{class n{constructor(e,r,o,i){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this.initialClasses=QC,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split($h):QC}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split($h):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split($h).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(e){return new(e||n)(P(Bl),P(Bs),P(pn),P(xr))},n.\u0275dir=ce({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class bP{constructor(t,e,r,o){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bh=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,o){this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new bP(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),XC(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{XC(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(P(zn),P(Ir),P(Bl))},n.\u0275dir=ce({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function XC(n,t){n.context.$implicit=t.item}let Gs=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new DP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){eb("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){eb("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(P(zn),P(Ir))},n.\u0275dir=ce({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class DP{constructor(){this.$implicit=null,this.ngIf=null}}function eb(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${$e(t)}'.`)}let nb=(()=>{class n{constructor(e,r,o){this._ngEl=e,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[o,i]=e.split("."),s=-1===o.indexOf("-")?void 0:sn.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,o,i?`${r}${i}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,o,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(P(pn),P(Bs),P(xr))},n.\u0275dir=ce({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),ob=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=En({}),n})();let ZP=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>new XP(G(Qt),window)}),n})();class XP{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function ek(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(t)||i.querySelector(`[name="${t}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=sb(this.window.history)||sb(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function sb(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ab{}class Mk extends OA{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Jh extends Mk{static makeCurrent(){!function IA(n){Mh||(Mh=n)}(new Jh)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Tk(){return Ws=Ws||document.querySelector("base"),Ws?Ws.getAttribute("href"):null}();return null==e?null:function Ik(n){ec=ec||document.createElement("a"),ec.setAttribute("href",n);const t=ec.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return JC(document.cookie,t)}}let ec,Ws=null;const hb=new Y("TRANSITION_ID"),Ak=[{provide:Nl,useFactory:function Ok(n,t,e){return()=>{e.get(Fl).donePromise.then(()=>{const r=Pr(),o=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[hb,Qt,lr],multi:!0}];let kk=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const tc=new Y("EventManagerPlugins");let nc=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o){return this._findPluginFor(r).addEventListener(e,r,o)}addGlobalEventListener(e,r,o){return this._findPluginFor(r).addGlobalEventListener(e,r,o)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(G(tc),G(lt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class fb{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const o=Pr().getGlobalEventTarget(this._doc,t);if(!o)throw new Error(`Unsupported event target ${o} for event ${e}`);return this.addEventListener(o,e,r)}}let pb=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const o=this.usageCount;let i=o.get(e)??0;return i+=r,i>0?o.set(e,i):o.delete(e),i}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),Ks=(()=>{class n extends pb{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(i=>i.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const o=this.doc.createElement("style");o.textContent=r,e.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(G(Qt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const Qh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yh=/%COMP%/g,yb=new Y("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function _b(n,t){return t.flat(100).map(e=>e.replace(Yh,n))}function vb(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Zh=(()=>{class n{constructor(e,r,o,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new Xh(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(e,r);return o instanceof wb?o.applyToHost(e):o instanceof ef&&o.applyStyles(),o}getOrCreateRenderer(e,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case rr.Emulated:i=new wb(s,a,r,this.appId,l);break;case rr.ShadowDom:return new $k(s,a,e,r);default:i=new ef(s,a,r,l)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(G(nc),G(Ks),G(Us),G(yb))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class Xh{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Qh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(bb(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(bb(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,o){if(o){e=o+":"+e;const i=Qh[o];i?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const o=Qh[r];o?t.removeAttributeNS(o,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,o){o&(sn.DashCase|sn.Important)?t.style.setProperty(e,r,o&sn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&sn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,vb(r)):this.eventManager.addEventListener(t,e,vb(r))}}function bb(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $k extends Xh{constructor(t,e,r,o){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=_b(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ef extends Xh{constructor(t,e,r,o,i=r.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=_b(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class wb extends ef{constructor(t,e,r,o,i){const s=o+"-"+r.id;super(t,e,r,i,s),this.contentAttr=function Lk(n){return"_ngcontent-%COMP%".replace(Yh,n)}(s),this.hostAttr=function jk(n){return"_nghost-%COMP%".replace(Yh,n)}(s)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let Uk=(()=>{class n extends fb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o){return e.addEventListener(r,o,!1),()=>this.removeEventListener(e,r,o)}removeEventListener(e,r,o){return e.removeEventListener(r,o)}}return n.\u0275fac=function(e){return new(e||n)(G(Qt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const Db=["alt","control","meta","shift"],Bk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zk=(()=>{class n extends fb{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,o){const i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pr().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Db.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let o=Bk[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(o=e.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Db.forEach(s=>{s!==o&&(0,Hk[s])(e)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(e,r,o){return i=>{n.matchEventFullKeyCode(i,e)&&o.runGuarded(()=>r(i))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(G(Qt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const Kk=_C(xA,"browser",[{provide:ph,useValue:"browser"},{provide:aC,useValue:function Gk(){Jh.makeCurrent()},multi:!0},{provide:Qt,useFactory:function Wk(){return function Mx(n){rd=n}(document),document},deps:[]}]),xb=new Y(""),Mb=[{provide:Ll,useClass:class Pk{addToWindow(t){Ge.getAngularTestability=(r,o=!0)=>{const i=t.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},Ge.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ge.getAllAngularRootElements=()=>t.getAllRootElements(),Ge.frameworkStabilizers||(Ge.frameworkStabilizers=[]),Ge.frameworkStabilizers.push(r=>{const o=Ge.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(l){s=s||l,i--,0==i&&r(s)};o.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?Pr().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:fC,useClass:_h,deps:[lt,vh,Ll]},{provide:_h,useClass:_h,deps:[lt,vh,Ll]}],Tb=[{provide:hd,useValue:"root"},{provide:ni,useFactory:function qk(){return new ni},deps:[]},{provide:tc,useClass:Uk,multi:!0,deps:[Qt,lt,ph]},{provide:tc,useClass:zk,multi:!0,deps:[Qt]},{provide:Zh,useClass:Zh,deps:[nc,Ks,Us,yb]},{provide:ny,useExisting:Zh},{provide:pb,useExisting:Ks},{provide:Ks,useClass:Ks,deps:[Qt]},{provide:nc,useClass:nc,deps:[tc,lt]},{provide:ab,useClass:kk,deps:[]},[]];let Jk=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Us,useValue:e.appId},{provide:hb,useExisting:Us},Ak]}}}return n.\u0275fac=function(e){return new(e||n)(G(xb,12))},n.\u0275mod=Ln({type:n}),n.\u0275inj=En({providers:[...Tb,...Mb],imports:[ob,MA]}),n})(),Ib=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(G(Qt))},n.\u0275prov=J({token:n,factory:function(e){let r=null;return r=e?new e:function Yk(){return new Ib(G(Qt))}(),r},providedIn:"root"}),n})();function Z(...n){return ft(n,Yi(n))}function qr(n,t){return oe(t)?At(n,t,1):At(n,1)}function Nr(n,t){return S((e,r)=>{let o=0;e.subscribe(N(r,i=>n.call(t,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class rc{}class rf{}class Fr{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const o=e.slice(0,r),i=o.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=e.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(e,i)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Fr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Fr;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Fr?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const o=("a"===t.op?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":const i=t.value;if(i){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class rR{encodeKey(t){return Pb(t)}encodeValue(t){return Pb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const iR=/%(\d[a-f0-9])/gi,sR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Pb(n){return encodeURIComponent(n).replace(iR,(t,e)=>sR[e]??t)}function oc(n){return`${n}`}class Wr{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new rR,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function oR(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,i)),t.decodeValue(o.slice(i+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],o=Array.isArray(r)?r.map(oc):[oc(r)];this.map.set(e,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const o=t[r];Array.isArray(o)?o.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Wr({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(oc(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const o=r.indexOf(oc(t.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class aR{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function kb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Rb(n){return typeof Blob<"u"&&n instanceof Blob}function Nb(n){return typeof FormData<"u"&&n instanceof FormData}class Js{constructor(t,e,r,o){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function lR(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Fr),this.context||(this.context=new aR),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Wr,this.urlWithParams=e}serializeBody(){return null===this.body?null:kb(this.body)||Rb(this.body)||Nb(this.body)||function cR(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Nb(this.body)?null:Rb(this.body)?this.body.type||null:kb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((d,h)=>d.set(h,t.setHeaders[h]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((d,h)=>d.set(h,t.setParams[h]),c)),new Js(e,r,i,{params:c,headers:l,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var yt=(()=>((yt=yt||{})[yt.Sent=0]="Sent",yt[yt.UploadProgress=1]="UploadProgress",yt[yt.ResponseHeader=2]="ResponseHeader",yt[yt.DownloadProgress=3]="DownloadProgress",yt[yt.Response=4]="Response",yt[yt.User=5]="User",yt))();class sf{constructor(t,e=200,r="OK"){this.headers=t.headers||new Fr,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class af extends sf{constructor(t={}){super(t),this.type=yt.ResponseHeader}clone(t={}){return new af({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ic extends sf{constructor(t={}){super(t),this.type=yt.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ic({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Fb extends sf{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function lf(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Si=(()=>{class n{constructor(e){this.handler=e}request(e,r,o={}){let i;if(e instanceof Js)i=e;else{let l,c;l=o.headers instanceof Fr?o.headers:new Fr(o.headers),o.params&&(c=o.params instanceof Wr?o.params:new Wr({fromObject:o.params})),i=new Js(e,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=Z(i).pipe(qr(l=>this.handler.handle(l)));if(e instanceof Js||"events"===o.observe)return s;const a=s.pipe(Nr(l=>l instanceof ic));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(k(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(k(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(k(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(k(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Wr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,lf(o,r))}post(e,r,o={}){return this.request("POST",e,lf(o,r))}put(e,r,o={}){return this.request("PUT",e,lf(o,r))}}return n.\u0275fac=function(e){return new(e||n)(G(rc))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function Lb(n,t){return t(n)}function uR(n,t){return(e,r)=>t.intercept(e,{handle:o=>n(o,r)})}const hR=new Y("HTTP_INTERCEPTORS"),Qs=new Y("HTTP_INTERCEPTOR_FNS");function fR(){let n=null;return(t,e)=>(null===n&&(n=(Ce(hR,{optional:!0})??[]).reduceRight(uR,Lb)),n(t,e))}let jb=(()=>{class n extends rc{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Qs)));this.chain=r.reduceRight((o,i)=>function dR(n,t,e){return(r,o)=>e.runInContext(()=>t(r,i=>n(i,o)))}(o,i,this.injector),Lb)}return this.chain(e,r=>this.backend.handle(r))}}return n.\u0275fac=function(e){return new(e||n)(G(rf),G(ar))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const yR=/^\)\]\}',?\n/;let $b=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ze(r=>{const o=this.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((f,p)=>o.setRequestHeader(f,p.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=e.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",p=new Fr(o.getAllResponseHeaders()),m=function _R(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||e.url;return s=new af({headers:p,status:o.status,statusText:f,url:m}),s},l=()=>{let{headers:f,status:p,statusText:m,url:g}=a(),C=null;204!==p&&(C=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=C?200:0);let x=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof C){const b=C;C=C.replace(yR,"");try{C=""!==C?JSON.parse(C):null}catch(A){C=b,x&&(x=!1,C={error:A,text:C})}}x?(r.next(new ic({body:C,headers:f,status:p,statusText:m,url:g||void 0})),r.complete()):r.error(new Fb({error:C,headers:f,status:p,statusText:m,url:g||void 0}))},c=f=>{const{url:p}=a(),m=new Fb({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});r.error(m)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:yt.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===e.responseType&&o.responseText&&(p.partialText=o.responseText),r.next(p)},h=f=>{let p={type:yt.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return o.addEventListener("load",l),o.addEventListener("error",c),o.addEventListener("timeout",c),o.addEventListener("abort",c),e.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:yt.Sent}),()=>{o.removeEventListener("error",c),o.removeEventListener("abort",c),o.removeEventListener("load",l),o.removeEventListener("timeout",c),e.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(G(ab))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const cf=new Y("XSRF_ENABLED"),Ub=new Y("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Bb=new Y("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Hb{}let bR=(()=>{class n{constructor(e,r,o){this.doc=e,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=JC(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(G(Qt),G(ph),G(Ub))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function wR(n,t){const e=n.url.toLowerCase();if(!Ce(cf)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=Ce(Hb).getToken(),o=Ce(Bb);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),t(n)}var dt=(()=>((dt=dt||{})[dt.Interceptors=0]="Interceptors",dt[dt.LegacyInterceptors=1]="LegacyInterceptors",dt[dt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",dt[dt.NoXsrfProtection=3]="NoXsrfProtection",dt[dt.JsonpSupport=4]="JsonpSupport",dt[dt.RequestsMadeViaParent=5]="RequestsMadeViaParent",dt))();function Ei(n,t){return{\u0275kind:n,\u0275providers:t}}function DR(...n){const t=[Si,$b,jb,{provide:rc,useExisting:jb},{provide:rf,useExisting:$b},{provide:Qs,useValue:wR,multi:!0},{provide:cf,useValue:!0},{provide:Hb,useClass:bR}];for(const e of n)t.push(...e.\u0275providers);return function Qx(n){return{\u0275providers:n}}(t)}const zb=new Y("LEGACY_INTERCEPTOR_FN");let ER=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=En({providers:[DR(Ei(dt.LegacyInterceptors,[{provide:zb,useFactory:fR},{provide:Qs,useExisting:zb,multi:!0}]))]}),n})();const{isArray:xR}=Array,{getPrototypeOf:MR,prototype:TR,keys:IR}=Object;function Gb(n){if(1===n.length){const t=n[0];if(xR(t))return{args:t,keys:null};if(function OR(n){return n&&"object"==typeof n&&MR(n)===TR}(t)){const e=IR(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}const{isArray:AR}=Array;function qb(n){return k(t=>function PR(n,t){return AR(t)?n(...t):n(t)}(n,t))}function Wb(n,t){return n.reduce((e,r,o)=>(e[r]=t[o],e),{})}function So(...n){const t=Kp(n),{args:e,keys:r}=Gb(n),o=new ze(i=>{const{length:s}=e;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Fn(e[u]).subscribe(N(i,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?Wb(r,a):a),i.complete())}))}});return t?o.pipe(qb(t)):o}let Kb=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(P(xr),P(pn))},n.\u0275dir=ce({type:n}),n})(),Eo=(()=>{class n extends Kb{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,features:[Pe]}),n})();const fr=new Y("NgValueAccessor"),kR={provide:fr,useExisting:Ue(()=>uf),multi:!0};let uf=(()=>{class n extends Eo{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&B("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[Ke([kR]),Pe]}),n})();const RR={provide:fr,useExisting:Ue(()=>Ys),multi:!0},FR=new Y("CompositionEventMode");let Ys=(()=>{class n extends Kb{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function NR(){const n=Pr()?Pr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(P(xr),P(pn),P(FR,8))},n.\u0275dir=ce({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&B("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[Ke([RR]),Pe]}),n})();const LR=!1;function Kr(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Ht=new Y("NgValidators"),Jr=new Y("NgAsyncValidators");function Zb(n){return Kr(n.value)?{required:!0}:null}function sc(n){return null}function ow(n){return null!=n}function iw(n){const t=As(n)?ft(n):n;if(LR&&!jd(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new $(-1101,e)}return t}function sw(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function aw(n,t){return t.map(e=>e(n))}function lw(n){return n.map(t=>function VR(n){return!n.validate}(t)?t:e=>t.validate(e))}function df(n){return null!=n?function cw(n){if(!n)return null;const t=n.filter(ow);return 0==t.length?null:function(e){return sw(aw(e,t))}}(lw(n)):null}function hf(n){return null!=n?function uw(n){if(!n)return null;const t=n.filter(ow);return 0==t.length?null:function(e){return So(aw(e,t).map(iw)).pipe(k(sw))}}(lw(n)):null}function dw(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function ff(n){return n?Array.isArray(n)?n:[n]:[]}function ac(n,t){return Array.isArray(n)?n.includes(t):n===t}function pw(n,t){const e=ff(t);return ff(n).forEach(o=>{ac(e,o)||e.push(o)}),e}function gw(n,t){return ff(t).filter(e=>!ac(n,e))}class mw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=df(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=hf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Yt extends mw{get formDirective(){return null}get path(){return null}}class Qr extends mw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yw{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let lc=(()=>{class n extends yw{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(P(Qr,2))},n.\u0275dir=ce({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&nt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Pe]}),n})(),_w=(()=>{class n extends yw{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(P(Yt,10))},n.\u0275dir=ce({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&nt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Pe]}),n})();function vw(n,t){return n?`with name: '${t}'`:`at index: ${t}`}const mf=!1,Zs="VALID",uc="INVALID",xi="PENDING",Xs="DISABLED";function yf(n){return(dc(n)?n.validators:n)||null}function _f(n,t){return(dc(t)?t.asyncValidators:n)||null}function dc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ww{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Zs}get invalid(){return this.status===uc}get pending(){return this.status==xi}get disabled(){return this.status===Xs}get enabled(){return this.status!==Xs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(pw(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(pw(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(gw(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(gw(t,this._rawAsyncValidators))}hasValidator(t){return ac(this._rawValidators,t)}hasAsyncValidator(t){return ac(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=xi,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Xs,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Zs,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zs||this.status===xi)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xs:Zs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=xi,this._hasOwnPendingAsyncValidator=!0;const e=iw(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?Xs:this.errors?uc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xi)?xi:this._anyControlsHaveStatus(uc)?uc:Zs}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){dc(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function qR(n){return Array.isArray(n)?df(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function WR(n){return Array.isArray(n)?hf(n):n||null}(this._rawAsyncValidators)}}class vf extends ww{constructor(t,e,r){super(yf(e),_f(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function bw(n,t,e){n._forEachChild((r,o)=>{if(void 0===e[o])throw new $(1002,mf?function GR(n,t){return`Must supply a value for form control ${vw(n,t)}`}(t,o):"")})})(this,!0,t),Object.keys(t).forEach(r=>{(function Cw(n,t,e){const r=n.controls;if(!(t?Object.keys(r):r).length)throw new $(1e3,mf?function HR(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!r[e])throw new $(1001,mf?function zR(n,t){return`Cannot find form control ${vw(n,t)}`}(t,e):"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{const o=this.controls[r];o&&o.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,o)=>{r.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((o,i)=>{r=e(r,o,i)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Mi=new Y("CallSetDisabledState",{providedIn:"root",factory:()=>hc}),hc="always";function ea(n,t,e=hc){Cf(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function QR(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Dw(n,t)})}(n,t),function ZR(n,t){const e=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function YR(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Dw(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function JR(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function gc(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Cf(n,t){const e=function hw(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(dw(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function fw(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(dw(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();gc(t._rawValidators,o),gc(t._rawAsyncValidators,o)}function Dw(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const rN={provide:Yt,useExisting:Ue(()=>yc)},ta=(()=>Promise.resolve())();let yc=(()=>{class n extends Yt{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ot,this.form=new vf({},df(e),hf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ta.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),ea(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ta.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ta.then(()=>{const r=this._findContainer(e.path),o=new vf({});(function Sw(n,t){Cf(n,t)})(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ta.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){ta.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function Ew(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(P(Ht,10),P(Jr,10),P(Mi,8))},n.\u0275dir=ce({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&B("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ke([rN]),Pe]}),n})();function xw(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function Mw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Tw=class extends ww{constructor(t=null,e,r){super(yf(e),_f(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dc(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Mw(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){xw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){xw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Mw(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},sN={provide:Qr,useExisting:Ue(()=>na)},Aw=(()=>Promise.resolve())();let na=(()=>{class n extends Qr{constructor(e,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Tw,this._registered=!1,this.update=new ot,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Df(n,t){if(!t)return null;let e,r,o;return Array.isArray(t),t.forEach(i=>{i.constructor===Ys?e=i:function tN(n){return Object.getPrototypeOf(n.constructor)===Eo}(i)?r=i:o=i}),o||r||e||null}(0,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function wf(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ea(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Aw.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,o=0!==r&&Di(r);Aw.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function fc(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(P(Yt,9),P(Ht,10),P(Jr,10),P(fr,10),P(wi,8),P(Mi,8))},n.\u0275dir=ce({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ke([sN]),Pe,Mn]}),n})(),Pw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ce({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const aN={provide:fr,useExisting:Ue(()=>Sf),multi:!0};let Sf=(()=>{class n extends Eo{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,r){1&e&&B("input",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},features:[Ke([aN]),Pe]}),n})(),kw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=En({}),n})();const mN={provide:fr,useExisting:Ue(()=>ra),multi:!0};function $w(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let ra=(()=>{class n extends Eo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=$w(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function yN(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&B("change",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ke([mN]),Pe]}),n})(),Tf=(()=>{class n{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue($w(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(P(pn),P(xr),P(ra,9))},n.\u0275dir=ce({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const _N={provide:fr,useExisting:Ue(()=>If),multi:!0};function Uw(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let If=(()=>{class n extends Eo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const o=e.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);o.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,e(o)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function vN(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&B("change",function(i){return r.onChange(i.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ke([_N]),Pe]}),n})(),Of=(()=>{class n{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Uw(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Uw(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(P(pn),P(xr),P(If,9))},n.\u0275dir=ce({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function Hw(n){return"number"==typeof n?n:parseFloat(n)}let xo=(()=>{class n{constructor(){this._validator=sc}ngOnChanges(e){if(this.inputName in e){const r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):sc,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ce({type:n,features:[Mn]}),n})();const CN={provide:Ht,useExisting:Ue(()=>Af),multi:!0};let Af=(()=>{class n extends xo{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>Hw(e),this.createValidator=e=>function Yb(n){return t=>{if(Kr(t.value)||Kr(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&Bt("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Ke([CN]),Pe]}),n})();const bN={provide:Ht,useExisting:Ue(()=>Pf),multi:!0};let Pf=(()=>{class n extends xo{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>Hw(e),this.createValidator=e=>function Qb(n){return t=>{if(Kr(t.value)||Kr(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&Bt("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Ke([bN]),Pe]}),n})();const wN={provide:Ht,useExisting:Ue(()=>_c),multi:!0};let _c=(()=>{class n extends xo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Di,this.createValidator=e=>Zb}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&Bt("required",r._enabled?"":null)},inputs:{required:"required"},features:[Ke([wN]),Pe]}),n})(),TN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=En({imports:[kw]}),n})(),ON=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Mi,useValue:e.callSetDisabledState??hc}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=En({imports:[TN]}),n})();class kn extends w{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const vc=ve(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Jw(...n){const t=Yi(n),e=Kp(n),{args:r,keys:o}=Gb(n);if(0===r.length)return ft([],t);const i=new ze(function AN(n,t,e=Xn){return r=>{Qw(t,()=>{const{length:o}=n,i=new Array(o);let s=o,a=o;for(let l=0;l<o;l++)Qw(t,()=>{const c=ft(n[l],t);let u=!1;c.subscribe(N(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(e(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,o?s=>Wb(o,s):Xn));return e?i.pipe(qb(e)):i}function Qw(n,t,e){n?_r(e,n,t):t()}function kf(...n){return function PN(){return No(1)}()(ft(n,Yi(n)))}function Yw(n){return new ze(t=>{Fn(n()).subscribe(t)})}function Ti(n,t){const e=oe(n)?n:()=>n,r=o=>o.error(e());return new ze(t?o=>t.schedule(r,0,o):r)}function Rf(){return S((n,t)=>{let e=null;n._refCount++;const r=N(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const o=n._connection,i=e;e=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class Zw extends ze{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,T(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new I;const e=this.getSubject();t.add(this.source.subscribe(N(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=I.EMPTY)}return t}refCount(){return Rf()(this)}}function pr(n,t){return S((e,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();e.subscribe(N(r,l=>{o?.unsubscribe();let c=0;const u=i++;Fn(n(l,u)).subscribe(o=N(r,d=>r.next(t?t(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Ii(n){return n<=0?()=>tr:S((t,e)=>{let r=0;t.subscribe(N(e,o=>{++r<=n&&(e.next(o),n<=r&&e.complete())}))})}function Cc(n){return S((t,e)=>{let r=!1;t.subscribe(N(e,o=>{r=!0,e.next(o)},()=>{r||e.next(n),e.complete()}))})}function Xw(n=RN){return S((t,e)=>{let r=!1;t.subscribe(N(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(n())))})}function RN(){return new vc}function Yr(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Nr((o,i)=>n(o,i,r)):Xn,Ii(1),e?Cc(t):Xw(()=>new vc))}function _t(n,t,e){const r=oe(n)||t||e?{next:n,error:t,complete:e}:n;return r?S((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(N(i,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),i.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),i.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),i.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Xn}function Kn(n){return S((t,e)=>{let i,r=null,o=!1;r=t.subscribe(N(e,void 0,void 0,s=>{i=Fn(n(s,Kn(n)(t))),r?(r.unsubscribe(),r=null,i.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(e))})}function e0(n,t){return S(function NN(n,t,e,r,o){return(i,s)=>{let a=e,l=t,c=0;i.subscribe(N(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}(n,t,arguments.length>=2,!0))}function Nf(n){return n<=0?()=>tr:S((t,e)=>{let r=[];t.subscribe(N(e,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function t0(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Nr((o,i)=>n(o,i,r)):Xn,Nf(1),e?Cc(t):Xw(()=>new vc))}function Ff(n){return S((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const me="primary",oa=Symbol("RouteTitle");class jN{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Oi(n){return new jN(n)}function VN(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function gr(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let i=0;i<e.length;i++)if(o=e[i],!n0(n[o],t[o]))return!1;return!0}function n0(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((o,i)=>r[i]===o)}return n===t}function r0(n){return Array.prototype.concat.apply([],n)}function o0(n){return n.length>0?n[n.length-1]:null}function Nt(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Zr(n){return jd(n)?n:As(n)?ft(Promise.resolve(n)):Z(n)}const bc=!1,UN={exact:function l0(n,t,e){if(!Mo(n.segments,t.segments)||!wc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!l0(n.children[r],t.children[r],e))return!1;return!0},subset:c0},s0={exact:function BN(n,t){return gr(n,t)},subset:function HN(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>n0(n[e],t[e]))},ignored:()=>!0};function a0(n,t,e){return UN[e.paths](n.root,t.root,e.matrixParams)&&s0[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function c0(n,t,e){return u0(n,t,t.segments,e)}function u0(n,t,e,r){if(n.segments.length>e.length){const o=n.segments.slice(0,e.length);return!(!Mo(o,e)||t.hasChildren()||!wc(o,e,r))}if(n.segments.length===e.length){if(!Mo(n.segments,e)||!wc(n.segments,e,r))return!1;for(const o in t.children)if(!n.children[o]||!c0(n.children[o],t.children[o],r))return!1;return!0}{const o=e.slice(0,n.segments.length),i=e.slice(n.segments.length);return!!(Mo(n.segments,o)&&wc(n.segments,o,r)&&n.children[me])&&u0(n.children[me],t,i,r)}}function wc(n,t,e){return t.every((r,o)=>s0[e](n[o].parameters,r.parameters))}class Xr{constructor(t=new we([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){return qN.serialize(this)}}class we{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Nt(e,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dc(this)}}class ia{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Oi(this.parameters)),this._parameterMap}toString(){return f0(this)}}function Mo(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let sa=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return new Lf},providedIn:"root"}),n})();class Lf{parse(t){const e=new tF(t);return new Xr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${aa(t.root,!0)}`,r=function JN(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(o=>`${Sc(e)}=${Sc(o)}`).join("&"):`${Sc(e)}=${Sc(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function WN(n){return encodeURI(n)}(t.fragment)}`:""}`}}const qN=new Lf;function Dc(n){return n.segments.map(t=>f0(t)).join("/")}function aa(n,t){if(!n.hasChildren())return Dc(n);if(t){const e=n.children[me]?aa(n.children[me],!1):"",r=[];return Nt(n.children,(o,i)=>{i!==me&&r.push(`${i}:${aa(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function GN(n,t){let e=[];return Nt(n.children,(r,o)=>{o===me&&(e=e.concat(t(r,o)))}),Nt(n.children,(r,o)=>{o!==me&&(e=e.concat(t(r,o)))}),e}(n,(r,o)=>o===me?[aa(n.children[me],!1)]:[`${o}:${aa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[me]?`${Dc(n)}/${e[0]}`:`${Dc(n)}/(${e.join("//")})`}}function d0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sc(n){return d0(n).replace(/%3B/gi,";")}function jf(n){return d0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ec(n){return decodeURIComponent(n)}function h0(n){return Ec(n.replace(/\+/g,"%20"))}function f0(n){return`${jf(n.path)}${function KN(n){return Object.keys(n).map(t=>`;${jf(t)}=${jf(n[t])}`).join("")}(n.parameters)}`}const QN=/^[^\/()?;=#]+/;function xc(n){const t=n.match(QN);return t?t[0]:""}const YN=/^[^=?&#]+/,XN=/^[^&#]+/;class tF{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[me]=new we(t,e)),r}parseSegment(){const t=xc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new $(4009,bc);return this.capture(t),new ia(Ec(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=xc(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=xc(this.remaining);o&&(r=o,this.capture(r))}t[Ec(e)]=Ec(r)}parseQueryParam(t){const e=function ZN(n){const t=n.match(YN);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const s=function eF(n){const t=n.match(XN);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=h0(e),i=h0(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=xc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new $(4010,bc);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=me);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s[me]:new we([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new $(4011,bc)}}function Vf(n){return n.segments.length>0?new we([],{[me]:n}):n}function Mc(n){const t={};for(const r of Object.keys(n.children)){const i=Mc(n.children[r]);(i.segments.length>0||i.hasChildren())&&(t[r]=i)}return function nF(n){if(1===n.numberOfChildren&&n.children[me]){const t=n.children[me];return new we(n.segments.concat(t.segments),t.children)}return n}(new we(n.segments,t))}function To(n){return n instanceof Xr}const $f=!1;function rF(n,t,e,r,o){if(0===e.length)return Ai(t.root,t.root,t.root,r,o);const i=function _0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new y0(!0,0,n);let t=0,e=!1;const r=n.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Nt(i.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new y0(e,t,r)}(e);return i.toRoot()?Ai(t.root,t.root,new we([],{}),r,o):function s(l){const c=function iF(n,t,e,r){if(n.isAbsolute)return new Pi(t.root,!0,0);if(-1===r)return new Pi(e,e===t.root,0);return function v0(n,t,e){let r=n,o=t,i=e;for(;i>o;){if(i-=o,r=r.parent,!r)throw new $(4005,$f&&"Invalid number of '../'");o=r.segments.length}return new Pi(r,!1,o-i)}(e,r+(la(n.commands[0])?0:1),n.numberOfDoubleDots)}(i,t,n.snapshot?._urlSegment,l),u=c.processChildren?ki(c.segmentGroup,c.index,i.commands):Uf(c.segmentGroup,c.index,i.commands);return Ai(t.root,c.segmentGroup,u,r,o)}(n.snapshot?._lastPathIndex)}function la(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ca(n){return"object"==typeof n&&null!=n&&n.outlets}function Ai(n,t,e,r,o){let s,i={};r&&Nt(r,(l,c)=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===t?e:m0(n,t,e);const a=Vf(Mc(s));return new Xr(a,i,o)}function m0(n,t,e){const r={};return Nt(n.children,(o,i)=>{r[i]=o===t?e:m0(o,t,e)}),new we(n.segments,r)}class y0{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&la(r[0]))throw new $(4003,$f&&"Root segment cannot have matrix parameters");const o=r.find(ca);if(o&&o!==o0(r))throw new $(4004,$f&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pi{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function Uf(n,t,e){if(n||(n=new we([],{})),0===n.segments.length&&n.hasChildren())return ki(n,t,e);const r=function aF(n,t,e){let r=0,o=t;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=e.length)return i;const s=n.segments[o],a=e[r];if(ca(a))break;const l=`${a}`,c=r<e.length-1?e[r+1]:null;if(o>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!b0(l,c,s))return i;r+=2}else{if(!b0(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,t,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new we(n.segments.slice(0,r.pathIndex),{});return i.children[me]=new we(n.segments.slice(r.pathIndex),n.children),ki(i,0,o)}return r.match&&0===o.length?new we(n.segments,{}):r.match&&!n.hasChildren()?Bf(n,t,e):r.match?ki(n,0,o):Bf(n,t,e)}function ki(n,t,e){if(0===e.length)return new we(n.segments,{});{const r=function sF(n){return ca(n[0])?n[0].outlets:{[me]:n}}(e),o={};if(!r[me]&&n.children[me]&&1===n.numberOfChildren&&0===n.children[me].segments.length){const i=ki(n.children[me],t,e);return new we(n.segments,i.children)}return Nt(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=Uf(n.children[s],t,i))}),Nt(n.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new we(n.segments,o)}}function Bf(n,t,e){const r=n.segments.slice(0,t);let o=0;for(;o<e.length;){const i=e[o];if(ca(i)){const l=lF(i.outlets);return new we(r,l)}if(0===o&&la(e[0])){r.push(new ia(n.segments[t].path,C0(e[0]))),o++;continue}const s=ca(i)?i.outlets[me]:`${i}`,a=o<e.length-1?e[o+1]:null;s&&a&&la(a)?(r.push(new ia(s,C0(a))),o+=2):(r.push(new ia(s,{})),o++)}return new we(r,{})}function lF(n){const t={};return Nt(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Bf(new we([],{}),0,e))}),t}function C0(n){const t={};return Nt(n,(e,r)=>t[r]=`${e}`),t}function b0(n,t,e){return n==e.path&&gr(t,e.parameters)}const ua="imperative";class mr{constructor(t,e){this.id=t,this.url=e}}class Hf extends mr{constructor(t,e,r="imperative",o=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class eo extends mr{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tc extends mr{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ic extends mr{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=16}}class zf extends mr{constructor(t,e,r,o){super(t,e),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cF extends mr{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uF extends mr{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dF extends mr{constructor(t,e,r,o,i){super(t,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hF extends mr{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fF extends mr{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pF{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gF{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mF{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yF{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _F{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vF{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w0{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let wF=(()=>{class n{createUrlTree(e,r,o,i,s,a){return rF(e||r.root,o,i,s,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),SF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(t){return wF.\u0275fac(t)},providedIn:"root"}),n})();class D0{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Gf(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Gf(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=qf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return qf(t,this._root).map(e=>e.value)}}function Gf(n,t){if(n===t.value)return t;for(const e of t.children){const r=Gf(n,e);if(r)return r}return null}function qf(n,t){if(n===t.value)return[t];for(const e of t.children){const r=qf(n,e);if(r.length)return r.unshift(t),r}return[]}class Lr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ri(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class S0 extends D0{constructor(t,e){super(t),this.snapshot=e,Wf(this,t)}toString(){return this.snapshot.toString()}}function E0(n,t){const e=function EF(n,t){const s=new Oc([],{},{},"",{},me,t,null,n.root,-1,{});return new M0("",new Lr(s,[]))}(n,t),r=new kn([new ia("",{})]),o=new kn({}),i=new kn({}),s=new kn({}),a=new kn(""),l=new to(r,o,s,a,i,me,t,e.root);return l.snapshot=e.root,new S0(new Lr(l,[]),e)}class to{constructor(t,e,r,o,i,s,a,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(k(c=>c[oa]))??Z(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(k(t=>Oi(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(k(t=>Oi(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function x0(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const o=e[r],i=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function xF(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Oc{get title(){return this.data?.[oa]}constructor(t,e,r,o,i,s,a,l,c,u,d){this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class M0 extends D0{constructor(t,e){super(e),this.url=t,Wf(this,e)}toString(){return T0(this._root)}}function Wf(n,t){t.value._routerState=n,t.children.forEach(e=>Wf(n,e))}function T0(n){const t=n.children.length>0?` { ${n.children.map(T0).join(", ")} } `:"";return`${n.value}${t}`}function Kf(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,gr(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),gr(t.params,e.params)||n.params.next(e.params),function $N(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!gr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),gr(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Jf(n,t){const e=gr(n.params,t.params)&&function zN(n,t){return Mo(n,t)&&n.every((e,r)=>gr(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Jf(n.parent,t.parent))}function da(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const o=function TF(n,t,e){return t.children.map(r=>{for(const o of e.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return da(n,r,o);return da(n,r)})}(n,t,e);return new Lr(r,o)}{if(n.shouldAttach(t.value)){const i=n.retrieve(t.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>da(n,a)),s}}const r=function IF(n){return new to(new kn(n.url),new kn(n.params),new kn(n.queryParams),new kn(n.fragment),new kn(n.data),n.outlet,n.component,n)}(t.value),o=t.children.map(i=>da(n,i));return new Lr(r,o)}}const Qf="ngNavigationCancelingError";function I0(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=To(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=O0(!1,0,t);return o.url=e,o.navigationBehaviorOptions=r,o}function O0(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[Qf]=!0,r.cancellationCode=t,e&&(r.url=e),r}function A0(n){return P0(n)&&To(n.url)}function P0(n){return n&&n[Qf]}class OF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ha,this.attachRef=null}}let ha=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new OF,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ac=!1;let Pc=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=me,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=Ce(ha),this.location=Ce(zn),this.changeDetector=Ce(wi),this.environmentInjector=Ce(ar)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,Ac);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,Ac);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,Ac);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new $(4013,Ac);this._activatedRoute=e;const o=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new AF(e,a,o.injector);if(r&&function PF(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=o.createComponent(c,o.length,l)}else this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ce({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mn]}),n})();class AF{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===to?this.route:t===ha?this.childContexts:this.parent.get(t,e)}}let Yf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=co({type:n,selectors:[["ng-component"]],standalone:!0,features:[Cv],decls:1,vars:0,template:function(e,r){1&e&&et(0,"router-outlet")},dependencies:[Pc],encapsulation:2}),n})();function k0(n,t){return n.providers&&!n._injector&&(n._injector=Ol(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Xf(n){const t=n.children&&n.children.map(Xf),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==me&&(e.component=Yf),e}function Rn(n){return n.outlet||me}function R0(n,t){const e=n.filter(r=>Rn(r)===t);return e.push(...n.filter(r=>Rn(r)!==t)),e}function fa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class LF{constructor(t,e,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=o}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Kf(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const o=Ri(e);t.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Nt(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,e,r){const o=t.value,i=e?e.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,i=Ri(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,i=Ri(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const o=Ri(e);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new vF(i.value.snapshot))}),t.children.length&&this.forwardEvent(new yF(t.value.snapshot))}activateRoutes(t,e,r){const o=t.value,i=e?e.value:null;if(Kf(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Kf(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=fa(o.snapshot),l=a?.get(Ds)??null;s.attachRef=null,s.route=o,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class N0{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class kc{constructor(t,e){this.component=t,this.route=e}}function jF(n,t,e){const r=n._root;return pa(r,t?t._root:null,e,[r.value])}function Ni(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||function bS(n){return null!==Pa(n)}(n)?t.get(n):n:r}function pa(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Ri(t);return n.children.forEach(s=>{(function $F(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function UF(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Mo(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Mo(n.url,t.url)||!gr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jf(n,t)||!gr(n.queryParams,t.queryParams);default:return!Jf(n,t)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new N0(r)):(i.data=s.data,i._resolvedData=s._resolvedData),pa(n,t,i.component?a?a.children:null:e,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new kc(a.outlet.component,s))}else s&&ga(t,a,o),o.canActivateChecks.push(new N0(r)),pa(n,null,i.component?a?a.children:null:e,r,o)})(s,i[s.value.outlet],e,r.concat([s.value]),o),delete i[s.value.outlet]}),Nt(i,(s,a)=>ga(s,e.getContext(a),o)),o}function ga(n,t,e){const r=Ri(n),o=n.value;Nt(r,(i,s)=>{ga(i,o.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new kc(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}function ma(n){return"function"==typeof n}function ep(n){return n instanceof vc||"EmptyError"===n?.name}const Rc=Symbol("INITIAL_VALUE");function Fi(){return pr(n=>Jw(n.map(t=>t.pipe(Ii(1),function kN(...n){const t=Yi(n);return S((e,r)=>{(t?kf(n,e,t):kf(n,e)).subscribe(r)})}(Rc)))).pipe(k(t=>{for(const e of t)if(!0!==e){if(e===Rc)return Rc;if(!1===e||e instanceof Xr)return e}return!0}),Nr(t=>t!==Rc),Ii(1)))}function F0(n){return function xa(...n){return Qi(n)}(_t(t=>{if(To(t))throw I0(0,t)}),k(t=>!0===t))}const tp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function L0(n,t,e,r,o){const i=np(n,t,e);return i.matched?function o2(n,t,e,r){const o=t.canMatch;return o&&0!==o.length?Z(o.map(s=>{const a=Ni(s,n);return Zr(function WF(n){return n&&ma(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(Fi(),F0()):Z(!0)}(r=k0(t,r),t,e).pipe(k(s=>!0===s?i:{...tp})):Z(i)}function np(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...tp}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||VN)(e,n,t);if(!o)return{...tp};const i={};Nt(o.posParams,(a,l)=>{i[l]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Nc(n,t,e,r){if(e.length>0&&function a2(n,t,e){return e.some(r=>Fc(n,t,r)&&Rn(r)!==me)}(n,e,r)){const i=new we(t,function s2(n,t,e,r){const o={};o[me]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const i of e)if(""===i.path&&Rn(i)!==me){const s=new we([],{});s._sourceSegment=n,s._segmentIndexShift=t.length,o[Rn(i)]=s}return o}(n,t,r,new we(e,n.children)));return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===e.length&&function l2(n,t,e){return e.some(r=>Fc(n,t,r))}(n,e,r)){const i=new we(n.segments,function i2(n,t,e,r,o){const i={};for(const s of r)if(Fc(n,e,s)&&!o[Rn(s)]){const a=new we([],{});a._sourceSegment=n,a._segmentIndexShift=t.length,i[Rn(s)]=a}return{...o,...i}}(n,t,e,r,n.children));return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:e}}const o=new we(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}function Fc(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function j0(n,t,e,r){return!!(Rn(n)===r||r!==me&&Fc(t,e,n))&&("**"===n.path||np(t,n,e).matched)}function V0(n,t,e){return 0===t.length&&!n.children[e]}const Lc=!1;class jc{constructor(t){this.segmentGroup=t||null}}class $0{constructor(t){this.urlTree=t}}function ya(n){return Ti(new jc(n))}function U0(n){return Ti(new $0(n))}class h2{constructor(t,e,r,o,i){this.injector=t,this.configLoader=e,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const t=Nc(this.urlTree.root,[],[],this.config).segmentGroup,e=new we(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,me).pipe(k(i=>this.createUrlTree(Mc(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Kn(i=>{if(i instanceof $0)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof jc?this.noMatchError(i):i}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,me).pipe(k(o=>this.createUrlTree(Mc(o),t.queryParams,t.fragment))).pipe(Kn(o=>{throw o instanceof jc?this.noMatchError(o):o}))}noMatchError(t){return new $(4002,Lc)}createUrlTree(t,e,r){const o=Vf(t);return new Xr(o,e,r)}expandSegmentGroup(t,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(k(i=>new we([],i))):this.expandSegment(t,r,e,r.segments,o,!0)}expandChildren(t,e,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return ft(o).pipe(qr(i=>{const s=r.children[i],a=R0(e,i);return this.expandSegmentGroup(t,a,s,i).pipe(k(l=>({segment:l,outlet:i})))}),e0((i,s)=>(i[s.outlet]=s.segment,i),{}),t0())}expandSegment(t,e,r,o,i,s){return ft(r).pipe(qr(a=>this.expandSegmentAgainstRoute(t,e,r,a,o,i,s).pipe(Kn(c=>{if(c instanceof jc)return Z(null);throw c}))),Yr(a=>!!a),Kn((a,l)=>{if(ep(a))return V0(e,o,i)?Z(new we([],{})):ya(e);throw a}))}expandSegmentAgainstRoute(t,e,r,o,i,s,a){return j0(o,e,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(t,e,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s):ya(e):ya(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?U0(i):this.lineralizeSegments(r,i).pipe(At(s=>{const a=new we(s,{});return this.expandSegment(t,a,e,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=np(e,o,i);if(!a)return ya(e);const d=this.applyRedirectCommands(l,o.redirectTo,u);return o.redirectTo.startsWith("/")?U0(d):this.lineralizeSegments(o,d).pipe(At(h=>this.expandSegment(t,e,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(t,e,r,o,i){return"**"===r.path?(t=k0(r,t),r.loadChildren?(r._loadedRoutes?Z({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(k(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new we(o,{})))):Z(new we(o,{}))):L0(e,r,o,t).pipe(pr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(t=r._injector??t,r,o).pipe(At(u=>{const d=u.injector??t,h=u.routes,{segmentGroup:f,slicedSegments:p}=Nc(e,a,l,h),m=new we(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(k(b=>new we(a,b)));if(0===h.length&&0===p.length)return Z(new we(a,{}));const g=Rn(r)===i;return this.expandSegment(d,m,h,p,g?me:i,!0).pipe(k(x=>new we(a.concat(x.segments),x.children)))})):ya(e)))}getChildConfig(t,e,r){return e.children?Z({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Z({routes:e._loadedRoutes,injector:e._loadedInjector}):function r2(n,t,e,r){const o=t.canLoad;return void 0===o||0===o.length?Z(!0):Z(o.map(s=>{const a=Ni(s,n);return Zr(function HF(n){return n&&ma(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(Fi(),F0())}(t,e,r).pipe(At(o=>o?this.configLoader.loadChildren(t,e).pipe(_t(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):function u2(n){return Ti(O0(Lc,3))}())):Z({routes:[],injector:t})}lineralizeSegments(t,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Z(r);if(o.numberOfChildren>1||!o.children[me])return t.redirectTo,Ti(new $(4e3,Lc));o=o.children[me]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,o){const i=this.createSegmentGroup(t,e.root,r,o);return new Xr(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Nt(t,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,o){const i=this.createSegments(t,e.segments,r,o);let s={};return Nt(e.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,r,o)}),new we(i,s)}createSegments(t,e,r,o){return e.map(i=>i.path.startsWith(":")?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,e,r){const o=r[e.path.substring(1)];if(!o)throw new $(4001,Lc);return o}findOrReturn(t,e){let r=0;for(const o of e){if(o.path===t.path)return e.splice(r),o;r++}return t}}class p2{}class y2{constructor(t,e,r,o,i,s,a){this.injector=t,this.rootComponentType=e,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const t=Nc(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,me).pipe(k(e=>{if(null===e)return null;const r=new Oc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},me,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Lr(r,e),i=new M0(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(t){const e=t.value,r=x0(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,o)}processChildren(t,e,r){return ft(Object.keys(r.children)).pipe(qr(o=>{const i=r.children[o],s=R0(e,o);return this.processSegmentGroup(t,s,i,o)}),e0((o,i)=>o&&i?(o.push(...i),o):null),function FN(n,t=!1){return S((e,r)=>{let o=0;e.subscribe(N(r,i=>{const s=n(i,o++);(s||t)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),Cc(null),t0(),k(o=>{if(null===o)return null;const i=H0(o);return function _2(n){n.sort((t,e)=>t.value.outlet===me?-1:e.value.outlet===me?1:t.value.outlet.localeCompare(e.value.outlet))}(i),i}))}processSegment(t,e,r,o,i){return ft(e).pipe(qr(s=>this.processSegmentAgainstRoute(s._injector??t,s,r,o,i)),Yr(s=>!!s),Kn(s=>{if(ep(s))return V0(r,o,i)?Z([]):Z(null);throw s}))}processSegmentAgainstRoute(t,e,r,o,i){if(e.redirectTo||!j0(e,r,o,i))return Z(null);let s;if("**"===e.path){const a=o.length>0?o0(o).parameters:{},l=G0(r)+o.length;s=Z({snapshot:new Oc(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,q0(e),Rn(e),e.component??e._loadedComponent??null,e,z0(r),l,W0(e)),consumedSegments:[],remainingSegments:[]})}else s=L0(r,e,o,t).pipe(k(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=G0(r)+l.length;return{snapshot:new Oc(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,q0(e),Rn(e),e.component??e._loadedComponent??null,e,z0(r),d,W0(e)),consumedSegments:l,remainingSegments:c}}));return s.pipe(pr(a=>{if(null===a)return Z(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;t=e._injector??t;const d=e._loadedInjector??t,h=function v2(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:f,slicedSegments:p}=Nc(r,c,u,h.filter(g=>void 0===g.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(k(g=>null===g?null:[new Lr(l,g)]));if(0===h.length&&0===p.length)return Z([new Lr(l,[])]);const m=Rn(e)===i;return this.processSegment(d,h,f,p,m?me:i).pipe(k(g=>null===g?null:[new Lr(l,g)]))}))}}function C2(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function H0(n){const t=[],e=new Set;for(const r of n){if(!C2(r)){t.push(r);continue}const o=t.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),e.add(o)):t.push(r)}for(const r of e){const o=H0(r.children);t.push(new Lr(r.value,o))}return t.filter(r=>!e.has(r))}function z0(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function G0(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function q0(n){return n.data||{}}function W0(n){return n.resolve||{}}function K0(n){return"string"==typeof n.title||null===n.title}function rp(n){return pr(t=>{const e=n(t);return e?ft(e).pipe(k(()=>t)):Z(t)})}const Li=new Y("ROUTES");let op=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ce(lC)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Z(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=Zr(e.loadComponent()).pipe(k(Q0),_t(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),Ff(()=>{this.componentLoaders.delete(e)})),o=new Zw(r,()=>new w).pipe(Rf());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(k(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(e).injector,c=r0(l.get(Li,[],ae.Self|ae.Optional)));return{routes:c.map(Xf),injector:l}}),Ff(()=>{this.childrenLoaders.delete(r)})),s=new Zw(i,()=>new w).pipe(Rf());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(e){return Zr(e()).pipe(k(Q0),At(r=>r instanceof _v||Array.isArray(r)?Z(r):ft(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Q0(n){return function T2(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let $c=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new w,this.configLoader=Ce(op),this.environmentInjector=Ce(ar),this.urlSerializer=Ce(sa),this.rootContexts=Ce(ha),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new gF(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new pF(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new kn({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ua,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Nr(r=>0!==r.id),k(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),pr(r=>{let o=!1,i=!1;return Z(r).pipe(_t(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pr(s=>{const a=e.browserUrlTree.toString(),l=!e.navigated||s.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const u="";return this.events.next(new Ic(s.id,e.serializeUrl(r.rawUrl),u,0)),e.rawUrlTree=s.rawUrl,s.resolve(null),tr}if(e.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Y0(s.source)&&(e.browserUrlTree=s.extractedUrl),Z(s).pipe(pr(u=>{const d=this.transitions?.getValue();return this.events.next(new Hf(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?tr:Promise.resolve(u)}),function f2(n,t,e,r){return pr(o=>function d2(n,t,e,r,o){return new h2(n,t,e,r,o).apply()}(n,t,e,o.extractedUrl,r).pipe(k(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),_t(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function w2(n,t,e,r,o){return At(i=>function m2(n,t,e,r,o,i,s="emptyOnly"){return new y2(n,t,e,r,o,s,i).recognize().pipe(pr(a=>null===a?function g2(n){return new ze(t=>t.error(n))}(new p2):Z(a)))}(n,t,e,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(k(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),_t(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=e.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);e.setBrowserUrl(h,u)}e.browserUrlTree=u.urlAfterRedirects}const d=new cF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,m=new Hf(u,this.urlSerializer.serialize(d),h,f);this.events.next(m);const g=E0(d,this.rootComponentType).snapshot;return Z(r={...s,targetSnapshot:g,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Ic(s.id,e.serializeUrl(r.extractedUrl),u,1)),e.rawUrlTree=s.rawUrl,s.resolve(null),tr}}),_t(s=>{const a=new uF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),k(s=>r={...s,guards:jF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function JF(n,t){return At(e=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return 0===s.length&&0===i.length?Z({...e,guardsResult:!0}):function QF(n,t,e,r){return ft(n).pipe(At(o=>function n2(n,t,e,r,o){const i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return i&&0!==i.length?Z(i.map(a=>{const l=fa(t)??o,c=Ni(a,l);return Zr(function qF(n){return n&&ma(n.canDeactivate)}(c)?c.canDeactivate(n,t,e,r):l.runInContext(()=>c(n,t,e,r))).pipe(Yr())})).pipe(Fi()):Z(!0)}(o.component,o.route,e,t,r)),Yr(o=>!0!==o,!0))}(s,r,o,n).pipe(At(a=>a&&function BF(n){return"boolean"==typeof n}(a)?function YF(n,t,e,r){return ft(t).pipe(qr(o=>kf(function XF(n,t){return null!==n&&t&&t(new mF(n)),Z(!0)}(o.route.parent,r),function ZF(n,t){return null!==n&&t&&t(new _F(n)),Z(!0)}(o.route,r),function t2(n,t,e){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(s=>function VF(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(s)).filter(s=>null!==s).map(s=>Yw(()=>Z(s.guards.map(l=>{const c=fa(s.node)??e,u=Ni(l,c);return Zr(function GF(n){return n&&ma(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(Yr())})).pipe(Fi())));return Z(i).pipe(Fi())}(n,o.path,e),function e2(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Z(!0);const o=r.map(i=>Yw(()=>{const s=fa(t)??e,a=Ni(i,s);return Zr(function zF(n){return n&&ma(n.canActivate)}(a)?a.canActivate(t,n):s.runInContext(()=>a(t,n))).pipe(Yr())}));return Z(o).pipe(Fi())}(n,o.route,e))),Yr(o=>!0!==o,!0))}(r,i,n,t):Z(a)),k(a=>({...e,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),_t(s=>{if(r.guardsResult=s.guardsResult,To(s.guardsResult))throw I0(0,s.guardsResult);const a=new dF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Nr(s=>!!s.guardsResult||(e.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),rp(s=>{if(s.guards.canActivateChecks.length)return Z(s).pipe(_t(a=>{const l=new hF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),pr(a=>{let l=!1;return Z(a).pipe(function D2(n,t){return At(e=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return Z(e);let i=0;return ft(o).pipe(qr(s=>function S2(n,t,e,r){const o=n.routeConfig,i=n._resolve;return void 0!==o?.title&&!K0(o)&&(i[oa]=o.title),function E2(n,t,e,r){const o=function x2(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Z({});const i={};return ft(o).pipe(At(s=>function M2(n,t,e,r){const o=fa(t)??r,i=Ni(n,o);return Zr(i.resolve?i.resolve(t,e):o.runInContext(()=>i(t,e)))}(n[s],t,e,r).pipe(Yr(),_t(a=>{i[s]=a}))),Nf(1),function LN(n){return k(()=>n)}(i),Kn(s=>ep(s)?tr:Ti(s)))}(i,n,t,r).pipe(k(s=>(n._resolvedData=s,n.data=x0(n,e).resolve,o&&K0(o)&&(n.data[oa]=o.title),null)))}(s.route,r,n,t)),_t(()=>i++),Nf(1),At(s=>i===o.length?Z(e):tr))})}(e.paramsInheritanceStrategy,this.environmentInjector),_t({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),_t(a=>{const l=new fF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),rp(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(_t(u=>{l.component=u}),k(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Jw(a(s.targetSnapshot.root)).pipe(Cc(),Ii(1))}),rp(()=>this.afterPreactivation()),k(s=>{const a=function MF(n,t,e){const r=da(n,t._root,e?e._root:void 0);return new S0(r,t)}(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),_t(s=>{e.currentUrlTree=s.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),e.routerState=s.targetRouterState,"deferred"===e.urlUpdateStrategy&&(s.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,s),e.browserUrlTree=s.urlAfterRedirects)}),((n,t,e)=>k(r=>(new LF(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s)),Ii(1),_t({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new eo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Ff(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Kn(s=>{if(i=!0,P0(s)){A0(s)||(e.navigated=!0,e.restoreHistory(r,!0));const a=new Tc(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),A0(s)){const l=e.urlHandlingStrategy.merge(s.url,e.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||Y0(r.source)};e.scheduleNavigation(l,ua,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const a=new zf(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(e.errorHandler(s))}catch(l){r.reject(l)}}return tr}))}))}cancelNavigationTransition(e,r,o){const i=new Tc(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(i),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Y0(n){return n!==ua}let Z0=(()=>{class n{buildTitle(e){let r,o=e.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===me);return r}getResolvedTitleForRoute(e){return e.data[oa]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return Ce(I2)},providedIn:"root"}),n})(),I2=(()=>{class n extends Z0{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(G(Ib))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return Ce(P2)},providedIn:"root"}),n})();class A2{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let P2=(()=>{class n extends A2{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Uc=new Y("",{providedIn:"root",factory:()=>({})});let R2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return Ce(N2)},providedIn:"root"}),n})(),N2=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function F2(n){throw n}function L2(n,t,e){return t.parse("/")}const j2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},V2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xt=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ce(WO),this.isNgZoneEnabled=!1,this.options=Ce(Uc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||F2,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||L2,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ce(R2),this.routeReuseStrategy=Ce(O2),this.urlCreationStrategy=Ce(SF),this.titleStrategy=Ce(Z0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=r0(Ce(Li,{optional:!0})??[]),this.navigationTransitions=Ce($c),this.urlSerializer=Ce(sa),this.location=Ce(Oh),this.isNgZoneEnabled=Ce(lt)instanceof lt&&lt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Xr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=E0(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ua,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(Xf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){const o=To(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ua,null,r)}navigate(e,r={skipLocationChange:!1}){return function $2(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new $(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return r}isActive(e,r){let o;if(o=!0===r?{...j2}:!1===r?{...V2}:r,To(e))return a0(this.currentUrlTree,e,o);const i=this.parseUrl(e);return a0(this.currentUrlTree,i,o)}removeEmptyProps(e){return Object.keys(e).reduce((r,o)=>{const i=e[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(e,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(e,r){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bc=(()=>{class n{constructor(e,r,o,i,s,a){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new w;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof eo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=Di(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=Di(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=Di(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function zm(n,t,e){return function Jx(n,t){return"src"===t&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===t&&("base"===n||"link"===n)?Hm:bs}(t,e)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,e,r):o.removeAttribute(i,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(P(xt),P(to),function Xa(n){return function CE(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let o=0;for(;o<r;){const i=e[o];if(Rg(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof e[o];)o++;else{if(i===t)return e[o+1];o+=2}}}return null}(kt(),n)}("tabindex"),P(xr),P(pn),P(Do))},n.\u0275dir=ce({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,r){1&e&&B("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&e&&Bt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Mn]}),n})(),X0=(()=>{class n{get isActive(){return this._isActive}constructor(e,r,o,i,s){this.router=e,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ot,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof eo&&this.update()})}ngAfterContentInit(){Z(this.links.changes,Z(null)).pipe(No()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ft(e).pipe(No()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const r=function U2(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&e.isActive(o.urlTree,r)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}}return n.\u0275fac=function(e){return new(e||n)(P(xt),P(pn),P(xr),P(wi),P(Bc,8))},n.\u0275dir=ce({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,r,o){if(1&e&&jv(o,Bc,5),2&e){let i;Lv(i=function Vv(){return function xO(n,t){return n[or].queries[t].queryList}(F(),Mg())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Mn]}),n})();class eD{}let B2=(()=>{class n{constructor(e,r,o,i,s){this.router=e,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Nr(e=>e instanceof eo),qr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=Ol(i.providers,e,`Route: ${i.path}`));const s=i._injector??e,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return ft(o).pipe(No())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):Z(null);const i=o.pipe(At(s=>null===s?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return r.loadComponent&&!r._loadedComponent?ft([i,this.loader.loadComponent(r)]).pipe(No()):i})}}return n.\u0275fac=function(e){return new(e||n)(G(xt),G(lC),G(ar),G(eD),G(op))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sp=new Y("");let tD=(()=>{class n{constructor(e,r,o,i,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Hf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof eo&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof w0&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new w0(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){!function wy(){throw new Error("invalid")}()},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();var mn=(()=>((mn=mn||{})[mn.COMPLETE=0]="COMPLETE",mn[mn.FAILED=1]="FAILED",mn[mn.REDIRECTING=2]="REDIRECTING",mn))();const ji=!1;function no(n,t){return{\u0275kind:n,\u0275providers:t}}const ap=new Y("",{providedIn:"root",factory:()=>!1});function rD(){const n=Ce(lr);return t=>{const e=n.get(jl);if(t!==e.components[0])return;const r=n.get(xt),o=n.get(oD);1===n.get(lp)&&r.initialNavigation(),n.get(iD,null,ae.Optional)?.setUpPreloading(),n.get(sp,null,ae.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const oD=new Y(ji?"bootstrap done indicator":"",{factory:()=>new w}),lp=new Y(ji?"initial navigation":"",{providedIn:"root",factory:()=>1});function W2(){let n=[];return n=ji?[{provide:ul,multi:!0,useFactory:()=>{const t=Ce(xt);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function CF(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],no(1,n)}const iD=new Y(ji?"router preloader":"");function K2(n){return no(0,[{provide:iD,useExisting:B2},{provide:eD,useExisting:n}])}const _a=!1,sD=new Y(_a?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),J2=[Oh,{provide:sa,useClass:Lf},xt,ha,{provide:to,useFactory:function nD(n){return n.routerState.root},deps:[xt]},op,_a?{provide:ap,useValue:!0}:[]];function Q2(){return new mC("Router",xt)}let aD=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[J2,_a&&r?.enableTracing?W2().\u0275providers:[],{provide:Li,multi:!0,useValue:e},{provide:sD,useFactory:eL,deps:[[xt,new hs,new fs]]},{provide:Uc,useValue:r||{}},r?.useHash?{provide:Do,useClass:RA}:{provide:Do,useClass:VC},{provide:sp,useFactory:()=>{const n=Ce(ZP),t=Ce(lt),e=Ce(Uc),r=Ce($c),o=Ce(sa);return e.scrollOffset&&n.setOffset(e.scrollOffset),new tD(o,r,n,t,e)}},r?.preloadingStrategy?K2(r.preloadingStrategy).\u0275providers:[],{provide:mC,multi:!0,useFactory:Q2},r?.initialNavigation?tL(r):[],[{provide:lD,useFactory:rD},{provide:gC,multi:!0,useExisting:lD}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Li,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(G(sD,8))},n.\u0275mod=Ln({type:n}),n.\u0275inj=En({imports:[Yf]}),n})();function eL(n){if(_a&&n)throw new $(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function tL(n){return["disabled"===n.initialNavigation?no(3,[{provide:Nl,multi:!0,useFactory:()=>{const t=Ce(xt);return()=>{t.setUpLocationChangeListener()}}},{provide:lp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?no(2,[{provide:lp,useValue:0},{provide:Nl,multi:!0,deps:[lr],useFactory:t=>{const e=t.get(PA,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=t.get(xt),i=t.get(oD);(function H2(n,t){n.events.pipe(Nr(e=>e instanceof eo||e instanceof Tc||e instanceof zf||e instanceof Ic),k(e=>e instanceof eo||e instanceof Ic?mn.COMPLETE:e instanceof Tc&&(0===e.code||1===e.code)?mn.REDIRECTING:mn.FAILED),Nr(e=>e!==mn.REDIRECTING),Ii(1)).subscribe(()=>{t()})})(o,()=>{r(!0)}),t.get($c).afterPreactivation=()=>(r(!0),i.closed?Z(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const lD=new Y(_a?"Router Initializer":"");let rL=(()=>{const t=class{constructor(r){this.router=r,this.title="Pokemon TCG Pocket Collector"}ngOnInit(){const r=()=>{const o=this.router.url.startsWith("/signin");document.body.classList.toggle("signin-page",o)};r(),this.routerSub=this.router.events.subscribe(o=>{o instanceof eo&&r()})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe?.(),document.body.classList.remove("signin-page")}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(xt))},t.\u0275cmp=co({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){1&o&&et(0,"router-outlet")},dependencies:[Pc],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background-color:#000;min-height:100vh}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.data-overview[_ngcontent-%COMP%]{margin-top:30px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 6px #0000001a}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;opacity:.9}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0}.section[_ngcontent-%COMP%]{margin:40px 0;padding:20px 0;border-top:2px solid #e9ecef}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:20px}.sets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.set-card[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.set-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px}.rarity-stats[_ngcontent-%COMP%], .pack-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.rarity-item[_ngcontent-%COMP%], .pack-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#000;border-radius:5px;border-left:4px solid #007bff}.rarity-name[_ngcontent-%COMP%], .pack-name[_ngcontent-%COMP%]{font-weight:600;color:#fff}.rarity-count[_ngcontent-%COMP%], .pack-count[_ngcontent-%COMP%]{color:#ccc}.rarity-percentage[_ngcontent-%COMP%], .pack-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0}.feature[_ngcontent-%COMP%]{background-color:#000;padding:20px;border-radius:8px;border-left:4px solid #17a2b8}.feature[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0;font-size:14px}.api-info[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:20px}.api-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0}.api-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;margin:0}.api-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;color:#ff6b6b}.error[_ngcontent-%COMP%]{background-color:#000;color:#ff6b6b;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center;border:1px solid #ff6b6b}.card-info[_ngcontent-%COMP%]{margin-top:30px}.card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}.card-item[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.card-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin:0 0 10px;font-size:16px}.card-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#ccc}.note[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#ccc;margin-top:20px}.instructions[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:30px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:#fff}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace}.data-info[_ngcontent-%COMP%]{background-color:#000;border-left:4px solid #007bff;padding:15px;margin-top:20px}.data-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:200px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),n})();function cD(n,t,e,r,o,i,s){try{var a=n[i](s),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function v(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function s(l){cD(i,r,o,s,a,"next",l)}function a(l){cD(i,r,o,s,a,"throw",l)}s(void 0)})}}let cp=(()=>{const t=class{constructor(r){this.http=r,this.BASE_PATH="assets/cards/",this.API_BASE="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/"}getCardRarityCode(r,o){for(const[i,s]of Object.entries(o))if(s.split(" - ")[0]===r.rarity)return i;return r.rarity||"Unknown"}loadSets(){return this.http.get(`${this.BASE_PATH}sets2.json`)}loadRarities(){return this.http.get(`${this.BASE_PATH}rarity.json`)}loadCards(){return this.http.get(`${this.BASE_PATH}cards.json`)}loadAllData(){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(_t(r=>{}))}getSetByCode(r){return this.loadSets().pipe(k(o=>o.find(i=>i.code===r)))}getRarityName(r){return this.loadRarities().pipe(k(o=>o[r]))}getCardsBySetWithInfo(r){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(k(({cards:o,sets:i,rarities:s})=>{const a=i.find(l=>l.code===r);return o.filter(l=>l.set===r).map(l=>({...l,setInfo:a,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}))}))}getSetsWithCardCounts(){return So({cards:this.loadCards(),sets:this.loadSets()}).pipe(k(({cards:r,sets:o})=>o.map(i=>{const s=r.filter(a=>a.set===i.code).length;return{...i,actualCardCount:s}})))}getRarityDistribution(){return So({cards:this.loadCards(),rarities:this.loadRarities()}).pipe(k(({cards:r,rarities:o})=>{const i={};r.forEach(a=>{const l=this.getCardRarityCode(a,o);i[l]=(i[l]||0)+1});const s=r.length;return Object.entries(i).map(([a,l])=>({code:a,name:o[a]||a,count:l,percentage:Math.round(l/s*100*100)/100})).sort((a,l)=>l.count-a.count)}))}getPackDistribution(){return this.loadCards().pipe(k(r=>{const o={};r.forEach(s=>{(Array.isArray(s.packs)?s.packs:[]).forEach(l=>{l&&l.trim()&&(o[l]=(o[l]||0)+1)})});const i=Object.values(o).reduce((s,a)=>s+a,0);return Object.entries(o).map(([s,a])=>({pack:s,count:a,percentage:i>0?Math.round(a/i*100*100)/100:0})).sort((s,a)=>a.count-s.count)}))}searchCardsEnhanced(r){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(k(({cards:o,sets:i,rarities:s})=>o.filter(l=>l.label.eng.toLowerCase().includes(r.toLowerCase())).map(l=>{const c=i.find(u=>u.code===l.set);return{...l,setInfo:c,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}})))}getComprehensiveStats(){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(k(({cards:r,sets:o,rarities:i})=>({totalCards:r.length,totalSets:o.length,totalRarities:Object.keys(i).length,setBreakdown:o.map(a=>({...a,actualCardCount:r.filter(l=>l.set===a.code).length})),rarityBreakdown:Object.entries(i).map(([a,l])=>({code:a,name:l,count:r.filter(c=>this.getCardRarityCode(c,i)===a).length})),packBreakdown:this.calculatePackDistribution(r),dateRange:{earliest:o.reduce((a,l)=>new Date(l.releaseDate)<new Date(a)?l.releaseDate:a,o[0]?.releaseDate||""),latest:o.reduce((a,l)=>new Date(l.releaseDate)>new Date(a)?l.releaseDate:a,o[0]?.releaseDate||"")}})))}calculatePackDistribution(r){const o={};return r.forEach(i=>{(Array.isArray(i.packs)?i.packs:[]).forEach(a=>{a&&a.trim()&&(o[a]=(o[a]||0)+1)})}),Object.entries(o).map(([i,s])=>({pack:i,count:s})).sort((i,s)=>s.count-i.count)}};let n=t;return t.\u0275fac=function(o){return new(o||t)(G(Si))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),oL=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json",this.LOCAL_CARDS_PATH="assets/cards/cards.json"}fetchCardsFromAPI(){return this.http.get(this.CARDS_API_URL)}downloadAndStoreCards(){return this.fetchCardsFromAPI().pipe(_t(r=>{localStorage.setItem("pokemonCards",JSON.stringify(r))}))}getStoredCards(){const r=localStorage.getItem("pokemonCards");return r?JSON.parse(r):null}loadCards(){return this.http.get(this.LOCAL_CARDS_PATH).pipe(k(r=>r||[]))}getCardsBySet(r){return this.loadCards().pipe(k(o=>o.filter(i=>i.set===r)))}getCardsByType(r){return this.loadCards().pipe(k(o=>o.filter(i=>i.types&&i.types.includes(r))))}getCardsByRarity(r){return this.loadCards().pipe(k(o=>o.filter(i=>i.rarity===r)))}searchCardsByName(r){return this.loadCards().pipe(k(o=>o.filter(i=>i.label.eng.toLowerCase().includes(r.toLowerCase()))))}getUniqueSets(){return this.loadCards().pipe(k(r=>[...new Set(r.map(o=>o.set))]))}getAvailableTypes(){return this.loadCards().pipe(k(r=>[...new Set(r.flatMap(o=>o.types||[]).filter(o=>!!o))]))}getUniqueRarities(){return this.loadCards().pipe(k(r=>[...new Set(r.map(o=>o.rarity))]))}getUniquePacks(){return this.loadCards().pipe(k(r=>[...new Set(r.flatMap(o=>o.packs))]))}};let n=t;return t.\u0275fac=function(o){return new(o||t)(G(Si))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),iL=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsData(){return this.http.get(this.CARDS_API_URL).pipe(Kn(r=>(console.error("Error downloading cards data:",r),Ti(()=>new Error("Failed to download cards data")))))}downloadCardsAsBlob(){return this.downloadCardsData().pipe(k(r=>{const o=JSON.stringify(r,null,2);return new Blob([o],{type:"application/json"})}))}triggerDownload(){this.downloadCardsAsBlob().subscribe({next:r=>{const o=window.URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download="cards.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},error:r=>{console.error("Failed to download cards data:",r)}})}getStorageInstructions(){return"\nTo store the cards data locally:\n\n1. Create a 'cards' folder in src/assets/\n2. Use the downloadCardsAsBlob() method to get the data\n3. Save the file as 'cards.json' in src/assets/cards/\n\nAlternative: Use triggerDownload() to download the file and manually move it to the assets folder.\n\nNote: In a production environment, you would typically have a backend service \nto handle file storage and serving.\n    "}};let n=t;return t.\u0275fac=function(o){return new(o||t)(G(Si))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),sL=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsJson(){this.http.get(this.CARDS_API_URL).subscribe({next:r=>{const o=JSON.stringify(r,null,2),i=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="cards.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`Downloaded ${r.length} cards to cards.json\n\nPlease move the file to: src/assets/cards/cards.json`)},error:r=>{console.error("Failed to download cards data:",r),alert("Failed to download cards data. Please check your internet connection.")}})}showSetupInstructions(){return`\n=== Pokemon TCG Pocket Collector Setup Instructions ===\n\n1. AUTOMATIC DOWNLOAD (Recommended):\n   - Click "Download cards.json" button\n   - Move the downloaded file to: src/assets/cards/cards.json\n   - Restart the development server\n\n2. MANUAL DOWNLOAD:\n   - Go to: ${this.CARDS_API_URL}\n   - Right-click and "Save As" to src/assets/cards/cards.json\n   - Restart the development server\n\n3. VERIFY SETUP:\n   - Click "Load Cards Data" to test the service\n   - Check browser console for detailed information\n   - Data will be cached in localStorage for offline use\n\n=== Service Features ===\n- \u2705 Fetch cards from Pokemon TCG Pocket database\n- \u2705 Store data locally for offline access\n- \u2705 Filter by set, type, rarity\n- \u2705 Search cards by name\n- \u2705 Get unique values for filters\n- \u2705 Automatic fallback to localStorage\n\nFor more information, check the browser console when using the services.\n    `}};let n=t;return t.\u0275fac=function(o){return new(o||t)(G(Si))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),uD=(()=>{const t=class{constructor(r,o,i,s){this.cardDataService=r,this.fileStorageService=o,this.assetsHelper=i,this.pokemonDataService=s}initializeCardData(){return this.cardDataService.downloadAndStoreCards().pipe(_t(r=>{this.logDataSummary(r)}),Kn(r=>(console.error("Failed to initialize card data:",r),Z(this.cardDataService.getStoredCards()||[]))))}downloadCardsFile(){this.assetsHelper.downloadCardsJson()}getStorageInstructions(){return this.assetsHelper.showSetupInstructions()}logDataSummary(r){new Set(r.map(a=>a.set)),new Set(r.map(a=>a.rarity)),new Set(r.flatMap(a=>a.packs))}getAllCards(){return this.cardDataService.loadCards()}getCardsBySet(r){return this.cardDataService.getCardsBySet(r)}getCardsByType(r){return this.cardDataService.getCardsByType(r)}getCardsByPack(r){return this.cardDataService.loadCards().pipe(k(o=>o.filter(i=>i.packs.includes(r))))}searchCards(r){return this.cardDataService.searchCardsByName(r)}getFilterOptions(){return new ze(r=>{Promise.all([this.cardDataService.getUniqueSets().toPromise(),this.cardDataService.getAvailableTypes().toPromise(),this.cardDataService.getUniqueRarities().toPromise(),this.cardDataService.getUniquePacks().toPromise()]).then(([o,i,s,a])=>{r.next({sets:o||[],types:i||[],rarities:s||[],packs:a||[]}),r.complete()}).catch(o=>{r.error(o)})})}loadAllPokemonData(){return this.pokemonDataService.loadAllData().pipe(_t(r=>{this.logEnhancedDataSummary(r)}))}getAllSets(){return this.pokemonDataService.loadSets()}getSetsWithCounts(){return this.pokemonDataService.getSetsWithCardCounts()}getRarityMapping(){return this.pokemonDataService.loadRarities()}getSetInfo(r){return this.pokemonDataService.getSetByCode(r)}getCardsBySetEnhanced(r){return this.pokemonDataService.getCardsBySetWithInfo(r)}searchCardsEnhanced(r){return this.pokemonDataService.searchCardsEnhanced(r)}getRarityStats(){return this.pokemonDataService.getRarityDistribution()}getPackStats(){return this.pokemonDataService.getPackDistribution()}getComprehensiveStats(){return this.pokemonDataService.getComprehensiveStats()}logEnhancedDataSummary(r){}};let n=t;return t.\u0275fac=function(o){return new(o||t)(G(oL),G(iL),G(sL),G(cp))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),aL=(()=>{const t=class{constructor(r){this.http=r,this.BASE_IMAGE_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-exchange/main/public/images/cards",this.imageCache=new Map}getCardImageUrl(r){return`${this.BASE_IMAGE_URL}/${r}`}checkImageExists(r){if(this.imageCache.has(r))return Z(this.imageCache.get(r));const o=this.getCardImageUrl(r);return this.http.head(o,{observe:"response"}).pipe(k(i=>{const s=200===i.status;return this.imageCache.set(r,s),s}),Kn(()=>(this.imageCache.set(r,!1),Z(!1))))}preloadImage(r){return new Promise(o=>{const i=new Image;i.onload=()=>{this.imageCache.set(r,!0),o(!0)},i.onerror=()=>{this.imageCache.set(r,!1),o(!1)},i.src=this.getCardImageUrl(r)})}getPlaceholderImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDIwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExNi41NjkgMTQwIDEzMCAxMjYuNTY5IDEzMCAxMTBDMTMwIDkzLjQzMTUgMTE2LjU2OSA4MCAxMDAgODBDODMuNDMxNSA4MCA3MCA5My40MzE1IDcwIDExMEM3MCAxMjYuNTY5IDgzLjQzMTUgMTQwIDEwMCAxNDBaIiBmaWxsPSIjOUI5QkE4Ii8+CjxwYXRoIGQ9Ik0xMDAgMTAwQzEwNS41MjMgMTAwIDExMCAxMDQuNDc3IDExMCAxMTBDMTEwIDExNS41MjMgMTA1LjUyMyAxMjAgMTAwIDEyMEM5NC40NzcgMTIwIDkwIDExNS41MjMgOTAgMTEwQzkwIDEwNC40NzcgOTQuNDc3IDEwMCAxMDAgMTAwWiIgZmlsbD0iI0Y5RkFGQiIvPgo8L3N2Zz4K"}};let n=t;return t.\u0275fac=function(o){return new(o||t)(G(Si))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();class up extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}}class dD extends up{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hD extends up{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class fD extends up{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Hc=(()=>{return(n=Hc||(Hc={})).Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",Hc;var n})();class cL{constructor(t,{headers:e={},customFetch:r,region:o=Hc.Any}={}){this.url=t,this.headers=e,this.region=o,this.fetch=(n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(X.bind(X,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return(0,V.__awaiter)(this,arguments,void 0,function*(e,r={}){var o;try{const{headers:i,method:s,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${e}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):"string"==typeof a?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(C=>{throw"AbortError"===C.name?C:new dD(C)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new hD(f);if(!f.ok)throw new fD(f);let g,m=(null!==(o=f.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return g="application/json"===m?yield f.json():"application/octet-stream"===m||"application/pdf"===m?yield f.blob():"text/event-stream"===m?f:"multipart/form-data"===m?yield f.formData():yield f.text(),{data:g,error:null,response:f}}catch(i){return i instanceof Error&&"AbortError"===i.name?{data:null,error:new dD(i)}:{data:null,error:i,response:i instanceof fD||i instanceof hD?i.context:void 0}}})}}var uL=X(358);const{PostgrestClient:pD}=uL,yL=class mL{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(t=navigator.userAgent)&&void 0!==t&&t.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const o=parseInt(e.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`\n\nSuggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){return new(this.getWebSocketConstructor())(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return"native"===t.type||"ws"===t.type}catch{return!1}}};var Vi=(()=>{return(n=Vi||(Vi={}))[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",Vi;var n})(),vt=(()=>{return(n=vt||(vt={})).closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",vt;var n})(),Nn=(()=>{return(n=Nn||(Nn={})).close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",Nn;var n})(),zc=(()=>((zc||(zc={})).websocket="websocket",zc))(),ro=(()=>{return(n=ro||(ro={})).Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",ro;var n})();class wL{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e("string"==typeof t?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){const o=e.getUint8(1),i=e.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(t.slice(s,s+o));s+=o;const l=r.decode(t.slice(s,s+i));return s+=i,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(t.slice(s,t.byteLength)))}}}class gD{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var je=(()=>{return(n=je||(je={})).abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",je;var n})();const mD=(n,t,e={})=>{var r;const o=null!==(r=e.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=DL(s,n,t,o),i),{}):{}},DL=(n,t,e,r)=>{const i=t.find(a=>a.name===n)?.type,s=e[n];return i&&!r.includes(i)?yD(i,s):hp(s)},yD=(n,t)=>{if("_"===n.charAt(0)){const e=n.slice(1,n.length);return ML(t,e)}switch(n){case je.bool:return SL(t);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return EL(t);case je.json:case je.jsonb:return xL(t);case je.timestamp:return TL(t);default:return hp(t)}},hp=n=>n,SL=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},EL=n=>{if("string"==typeof n){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},xL=n=>{if("string"==typeof n)try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},ML=(n,t)=>{if("string"!=typeof n)return n;const e=n.length-1;if("{"===n[0]&&"}"===n[e]){let i;const s=n.slice(1,e);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>yD(t,a))}return n},TL=n=>"string"==typeof n?n.replace(" ","T"):n,_D=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname=""===t.pathname||"/"===t.pathname?"/api/broadcast":t.pathname+"/api/broadcast",t.href};class fp{constructor(t,e,r={},o=1e4){this.channel=t,this.event=e,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}class va{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=va.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=va.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=va.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,o){const i=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(g=>g.presence_ref),f=d.map(g=>g.presence_ref),p=u.filter(g=>f.indexOf(g.presence_ref)<0),m=d.filter(g=>h.indexOf(g.presence_ref)<0);p.length>0&&(a[c]=p),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(t,e,r,o){const{joins:i,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=t[a])&&void 0!==c?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,o(a,c,l),0===c.length&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{const o=t[r];return e[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $i=(()=>{return(n=$i||($i={})).BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",$i;var n})(),yr=(()=>{return(n=yr||(yr={})).SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",yr;var n})();class pp{constructor(t,e={config:{}},r){var o,i;if(this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new fp(this,Nn.join,this.params,this.timeout),this.rejoinTimer=new gD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nn.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new va(this),this.broadcastEndpointURL=_D(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(p=>p.filter))&&void 0!==i?i:[],d=!!this.bindings[$i.PRESENCE]&&this.bindings[$i.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t?.(yr.CHANNEL_ERROR,p)),this._onClose(()=>t?.(yr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",function(){var p=v(function*({postgres_changes:m}){var g;if(r.socket.setAuth(),void 0!==m){const C=r.bindings.postgres_changes,x=null!==(g=C?.length)&&void 0!==g?g:0,b=[];for(let A=0;A<x;A++){const R=C[A],{filter:{event:W,schema:Zt,table:Ae,filter:ht}}=R,Yn=m&&m[A];if(!Yn||Yn.event!==W||Yn.schema!==Zt||Yn.table!==Ae||Yn.filter!==ht)return r.unsubscribe(),r.state=vt.errored,void t?.(yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));b.push(Object.assign(Object.assign({},R),{id:Yn.id}))}return r.bindings.postgres_changes=b,void(t&&t(yr.SUBSCRIBED))}t?.(yr.SUBSCRIBED)});return function(m){return p.apply(this,arguments)}}()).receive("error",p=>{this.state=vt.errored,t?.(yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t?.(yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(t){var e=this;return v(function*(r,o={}){return yield e.send({type:"presence",event:"track",payload:r},o.timeout||e.timeout)}).apply(this,arguments)}untrack(){var t=this;return v(function*(e={}){return yield t.send({type:"presence",event:"untrack"},e)}).apply(this,arguments)}on(t,e,r){return this.state===vt.joined&&t===$i.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}httpSend(t,e){var r=this;return v(function*(o,i,s={}){var a;const l=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,c,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const h=yield u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(t){var e=this;return v(function*(r,o={}){var i,s;if(e._canPush()||"broadcast"!==r.type)return new Promise(a=>{var l,c,u;const d=e._push(r.type,r,o.timeout||e.timeout);"broadcast"===r.type&&!(null!==(u=null===(c=null===(l=e.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=r,u={method:"POST",headers:{Authorization:e.socket.accessTokenValue?`Bearer ${e.socket.accessTokenValue}`:"",apikey:e.socket.apiKey?e.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:e.subTopic,event:a,payload:l,private:e.private}]})};try{const d=yield e._fetchWithTimeout(e.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:e.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=vt.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new fp(this,Nn.leave,{},t),r.receive("ok",()=>{e(),o("ok")}).receive("timeout",()=>{e(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vt.closed,this.bindings={}}_fetchWithTimeout(t,e,r){var o=this;return v(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(s),a})()}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new fp(this,t,e,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var o,i;const s=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Nn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(f=>{var p,m,g;return"*"===(null===(p=f.filter)||void 0===p?void 0:p.event)||(null===(g=null===(m=f.filter)||void 0===m?void 0:m.event)||void 0===g?void 0:g.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):null===(i=this.bindings[s])||void 0===i||i.filter(f=>{var p,m,g,C,x,b;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in f){const A=f.id,R=null===(p=f.filter)||void 0===p?void 0:p.event;return A&&(null===(m=e.ids)||void 0===m?void 0:m.includes(A))&&("*"===R||R?.toLocaleLowerCase()===(null===(g=e.data)||void 0===g?void 0:g.type.toLocaleLowerCase()))}{const A=null===(x=null===(C=f?.filter)||void 0===C?void 0:C.event)||void 0===x?void 0:x.toLocaleLowerCase();return"*"===A||A===(null===(b=e?.event)||void 0===b?void 0:b.toLocaleLowerCase())}}return f.type.toLocaleLowerCase()===s}).map(f=>{if("object"==typeof h&&"ids"in h){const p=h.data,{schema:m,table:g,commit_timestamp:C,type:x,errors:b}=p;h=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:C,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){const o=t.toLocaleLowerCase(),i={type:o,filter:e,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(t,e){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&pp.isEqual(o.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Nn.close,{},t)}_onError(t){this._on(Nn.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return("INSERT"===t.type||"UPDATE"===t.type)&&(e.new=mD(t.columns,t.record)),("UPDATE"===t.type||"DELETE"===t.type)&&(e.old=mD(t.columns,t.old_record)),e}}const gp=()=>{},IL=[1e3,2e3,5e3,1e4];class PL{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gp,this.ref=0,this.reconnectTimer=null,this.logger=gp,this.conn=null,this.sendBuffer=[],this.serializer=new wL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return i=o||(typeof fetch>"u"?(...s)=>Promise.resolve().then(X.bind(X,397)).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...s)=>i(...s)},null===(r=e?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${zc.websocket}`,this.httpEndpoint=_D(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yL.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){var e=this;return v(function*(){const r=yield t.unsubscribe();return 0===e.channels.length&&e.disconnect(),r})()}removeAllChannels(){var t=this;return v(function*(){const e=yield Promise.all(t.channels.map(r=>r.unsubscribe()));return t.channels=[],t.disconnect(),e})()}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vi.connecting:return ro.Connecting;case Vi.open:return ro.Open;case Vi.closing:return ro.Closing;default:return ro.Closed}}isConnected(){return this.connectionState()===ro.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(t,e={config:{}}){const r=`realtime:${t}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new pp(`realtime:${t}`,e,this);return this.channels.push(i),i}}push(t){const{topic:e,event:r,payload:o,ref:i}=t,s=()=>{this.encode(t,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${e} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var t=this;return v(function*(e=null){t._authPromise=t._performAuth(e);try{yield t._authPromise}finally{t._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var t=this;return v(function*(){var e;if(t.isConnected()){if(t.pendingHeartbeatRef){t.pendingHeartbeatRef=null,t.log("transport","heartbeat timeout. Attempting to re-establish connection");try{t.heartbeatCallback("timeout")}catch(r){t.log("error","error in heartbeat callback",r)}return t._wasManualDisconnect=!1,null===(e=t.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;t.isConnected()||null===(r=t.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}t.pendingHeartbeatRef=t._makeRef(),t.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t.pendingHeartbeatRef});try{t.heartbeatCallback("sent")}catch(r){t.log("error","error in heartbeat callback",r)}t._setAuthSafely("heartbeat")}else try{t.heartbeatCallback("disconnected")}catch(r){t.log("error","error in heartbeat callback",r)}})()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return this.ref=t===this.ref?0:t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=e;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;"heartbeat"===t&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===t&&(null===(e=this.reconnectTimer)||void 0===e||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Nn.error))}_appendParams(t,e){if(0===Object.keys(e).length)return t;const r=t.match(/\?/)?"&":"?";return`${t}${r}${new URLSearchParams(e)}`}_workerObjectUrl(t){let e;if(t)e=t;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,"connecting"===t?this._wasManualDisconnect=!1:"disconnecting"===t&&(this._wasManualDisconnect=e)}_performAuth(){var t=this;return v(function*(e=null){let r;r=e||(t.accessToken?yield t.accessToken():t.accessTokenValue),t.accessTokenValue!=r&&(t.accessTokenValue=r,t.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.76.1"}),o.joinedOnce&&o._isJoined()&&o._push(Nn.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var t=this;return v(function*(){t._authPromise&&(yield t._authPromise)})()}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){var t=this;this.reconnectTimer=new gD(v(function*(){setTimeout(v(function*(){yield t._waitForAuthIfNeeded(),t.isConnected()||t.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(t){var e,r,o,i,s,a,l,c,u;if(this.transport=null!==(e=t?.transport)&&void 0!==e?e:null,this.timeout=null!==(r=t?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=t?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=t?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=t?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=t?.heartbeatCallback)&&void 0!==a?a:gp,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=t?.reconnectAfterMs)&&void 0!==l?l:d=>IL[d-1]||1e4,this.encode=null!==(c=t?.encode)&&void 0!==c?c:(d,h)=>h(JSON.stringify(d)),this.decode=null!==(u=t?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class mp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ze(n){return"object"==typeof n&&null!==n&&"__isStorageError"in n}class kL extends mp{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yp extends mp{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}const _p=n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(X.bind(X,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)},vp=n=>{if(Array.isArray(n))return n.map(e=>vp(e));if("function"==typeof n||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([e,r])=>{const o=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[o]=vp(r)}),t},Cp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),FL=(n,t,e)=>(0,V.__awaiter)(void 0,void 0,void 0,function*(){const r=yield(0,V.__awaiter)(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(X.bind(X,397))).Response:Response});n instanceof r&&!e?.noResolveJson?n.json().then(o=>{const i=n.status||500,s=o?.statusCode||i+"";t(new kL(Cp(o),i,s))}).catch(o=>{t(new yp(Cp(o),o))}):t(new yp(Cp(n),n))}),LL=(n,t,e,r)=>{const o={method:n,headers:t?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const t=Object.getPrototypeOf(n);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),e)):o};function Ca(n,t,e,r,o,i){return(0,V.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,LL(t,r,o,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>FL(l,a,r))})})}function ba(n,t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ca(n,"GET",t,e,r)})}function Jn(n,t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ca(n,"POST",t,r,o,e)})}function bp(n,t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ca(n,"PUT",t,r,o,e)})}function wp(n,t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ca(n,"DELETE",t,r,o,e)})}class VL{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}}var vD;vD=Symbol.toStringTag;const BL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},CD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class HL{constructor(t,e={},r,o){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=_p(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},CD),o);let a=Object.assign(Object.assign({},this.headers),"POST"===t&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield("PUT"==t?bp:Jn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}upload(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:CD.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(yield bp(this.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const o=Object.assign({},this.headers);e?.upsert&&(o["x-upsert"]="true");const i=yield Jn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new mp("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}update(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}copy(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}createSignedUrl(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),i=yield Jn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}createSignedUrls(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const o=yield Jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}download(t,e){const o=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(t);return new class $L{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[vD]="BlobDownloadBuilder",this.promise=null}asStream(){return new VL(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}}(()=>ba(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{const r=yield ba(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:vp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}exists(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{return yield function jL(n,t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ca(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r)&&r instanceof yp&&[400,404].includes(r.originalError?.status))return{data:!1,error:r};throw r}})}getPublicUrl(t,e){const r=this._getFinalPath(t),o=[],i=e?.download?`download=${!0===e.download?"":e.download}`:"";""!==i&&o.push(i);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});""!==l&&o.push(l);let c=o.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield wp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}list(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},BL),e),{prefix:t||""});return{data:yield Jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}listV2(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Jn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const wD={"X-Client-Info":"storage-js/2.76.1"};class zL{constructor(t,e={},r,o){this.shouldThrowOnError=!1;const i=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wD),e),this.fetch=_p(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}getBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}createBucket(t){return(0,V.__awaiter)(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ze(o))return{data:null,error:o};throw o}})}updateBucket(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield bp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}emptyBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}deleteBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield wp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}}class GL{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wD),e),this.fetch=_p(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}listBuckets(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const e=new URLSearchParams;void 0!==t?.limit&&e.set("limit",t.limit.toString()),void 0!==t?.offset&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);const r=e.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield ba(this.fetch,o,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}deleteBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield wp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}}const Dp={"X-Client-Info":"storage-js/2.76.1","Content-Type":"application/json"};class DD extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function yn(n){return"object"==typeof n&&null!==n&&"__isStorageVectorsError"in n}class Sp extends DD{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qL extends DD{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}}const Ep=n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(X.bind(X,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)},SD=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),KL=(n,t,e)=>(0,V.__awaiter)(void 0,void 0,void 0,function*(){if(n&&"object"==typeof n&&"status"in n&&"ok"in n&&"number"==typeof n.status&&!e?.noResolveJson){const o=n.status||500,i=n;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";t(new Sp(SD(s),o,a))}).catch(()=>{t(new Sp(i.statusText||`HTTP ${o} error`,o,o+""))}):t(new Sp(i.statusText||`HTTP ${o} error`,o,o+""))}else t(new qL(SD(n),n))}),JL=(n,t,e,r)=>{const o={method:n,headers:t?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const t=Object.getPrototypeOf(n);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),e)):o};function _n(n,t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return function qc(n,t,e,r,o,i){return(0,V.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,JL(t,r,o,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return c&&c.includes("application/json")?l.json():{}}).then(l=>s(l)).catch(l=>KL(l,a,r))})})}(n,"POST",t,r,o,e)})}class QL{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dp),e),this.fetch=Ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield _n(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}getIndex(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r))return{data:null,error:r};throw r}})}listIndexes(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield _n(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r))return{data:null,error:r};throw r}})}}class YL{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dp),e),this.fetch=Ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield _n(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}getVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}listVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==t.segmentCount){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==t.segmentIndex&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error("segmentIndex must be between 0 and "+(t.segmentCount-1))}return{data:yield _n(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}queryVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}deleteVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield _n(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}}class ZL{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dp),e),this.fetch=Ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield _n(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}getBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,V.__awaiter)(this,arguments,void 0,function*(t={}){try{return{data:yield _n(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}deleteBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield _n(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yn(e))return{data:null,error:e};throw e}})}}class XL extends ZL{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new ej(this.url,this.headers,t,this.fetch)}}class ej extends QL{constructor(t,e,r,o){super(t,e,o),this.vectorBucketName=r}createIndex(t){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,V.__awaiter)(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new tj(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class tj extends YL{constructor(t,e,r,o,i){super(t,e,i),this.vectorBucketName=r,this.indexName=o}putVectors(t){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,V.__awaiter)(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class nj extends zL{constructor(t,e={},r,o){super(t,e,r,o)}from(t){return new HL(this.url,this.headers,t,this.fetch)}get vectors(){return new XL(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new GL(this.url+"/iceberg",this.headers,this.fetch)}}let wa="";wa=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const oj={headers:{"X-Client-Info":`supabase-js-${wa}/2.76.1`}},ij={schema:"public"},sj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aj={};var ED=X(397);const uj=(n,t,e)=>{const r=(n=>{let t;return t=n||(typeof fetch>"u"?ED.default:fetch),(...e)=>t(...e)})(e),o=typeof Headers>"u"?ED.Headers:Headers;return function(){var i=v(function*(s,a){var l;const c=null!==(l=yield t())&&void 0!==l?l:n;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},Ui=3e4,Tp="X-Supabase-Api-Version",MD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Da extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}}function re(n){return"object"==typeof n&&null!==n&&"__isAuthError"in n}class vj extends Da{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}}class Io extends Da{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class oo extends Da{constructor(t,e,r,o){super(t,r,o),this.name=e,this.status=r}}class io extends oo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Bi extends oo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wc extends oo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Kc extends oo{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class TD extends oo{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ip extends oo{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function Op(n){return re(n)&&"AuthRetryableFetchError"===n.name}class ID extends oo{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}}class Ap extends oo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),OD=" \t\n\r=".split(""),Dj=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<OD.length;t+=1)n[OD[t].charCodeAt(0)]=-2;for(let t=0;t<Jc.length;t+=1)n[Jc[t].charCodeAt(0)]=t;return n})();function Qc(n,t,e){if(null!==n)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;)e(Jc[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)e(Jc[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function AD(n,t,e){const r=Dj[n];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function PD(n){const t=[],e=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function Ej(n,t,e){if(0===t.utf8seq){if(n<=127)return void e(n);for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&n;else if(3===t.utf8seq)t.codepoint=15&n;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&n}t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&n,t.utf8seq-=1,0===t.utf8seq&&e(t.codepoint)}}(s,r,e)};for(let s=0;s<n.length;s+=1)AD(n.charCodeAt(s),o,i);return t.join("")}function Sj(n,t){if(!(n<=127)){if(n<=2047)return t(192|n>>6),void t(128|63&n);if(n<=65535)return t(224|n>>12),t(128|n>>6&63),void t(128|63&n);if(n<=1114111)return t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),void t(128|63&n);throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}t(n)}function Hi(n){const t=[],e={queue:0,queuedBits:0},r=o=>{t.push(o)};for(let o=0;o<n.length;o+=1)AD(n.charCodeAt(o),e,r);return new Uint8Array(t)}function Oo(n){const t=[],e={queue:0,queuedBits:0},r=o=>{t.push(o)};return n.forEach(o=>Qc(o,e,r)),Qc(null,e,r),t.join("")}const vn=()=>typeof window<"u"&&typeof document<"u",Ao={tested:!1,writable:!1},RD=()=>{if(!vn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Ao.tested)return Ao.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ao.tested=!0,Ao.writable=!0}catch{Ao.tested=!0,Ao.writable=!1}return Ao.writable},ND=n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(X.bind(X,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)},Oj=n=>"object"==typeof n&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json,zi=function(){var n=v(function*(t,e,r){yield t.setItem(e,JSON.stringify(r))});return function(e,r,o){return n.apply(this,arguments)}}(),Po=function(){var n=v(function*(t,e){const r=yield t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(e,r){return n.apply(this,arguments)}}(),so=function(){var n=v(function*(t,e){yield t.removeItem(e)});return function(e,r){return n.apply(this,arguments)}}();class Yc{constructor(){this.promise=new Yc.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}function Pp(n){const t=n.split(".");if(3!==t.length)throw new Ap("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!yj.test(t[r]))throw new Ap("JWT not in base64url format");return{header:JSON.parse(PD(t[0])),payload:JSON.parse(PD(t[1])),signature:Hi(t[2]),raw:{header:t[0],payload:t[1]}}}function kp(){return(kp=v(function*(n){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})).apply(this,arguments)}function kj(n){return("0"+n.toString(16)).substr(-2)}function Rp(){return(Rp=v(function*(n){const e=(new TextEncoder).encode(n),r=yield crypto.subtle.digest("SHA-256",e),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function Np(){return Np=v(function*(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=yield function Nj(n){return Rp.apply(this,arguments)}(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Np.apply(this,arguments)}function Gi(n,t){return Fp.apply(this,arguments)}function Fp(){return Fp=v(function*(n,t,e=!1){const r=function Rj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length;let o="";for(let i=0;i<56;i++)o+=e.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(t),Array.from(t,kj).join("")}();let o=r;e&&(o+="/PASSWORD_RECOVERY"),yield zi(n,`${t}-code-verifier`,o);const i=yield function Fj(n){return Np.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),Fp.apply(this,arguments)}Yc.promiseConstructor=Promise;const Lj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Uj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qi(n){if(!Uj.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lp(){return new Proxy({},{get:(t,e)=>{if("__isUserNotAvailableProxy"===e)return!0;if("symbol"==typeof e){const r=e.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function FD(n){return JSON.parse(JSON.stringify(n))}const ko=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Bj=[502,503,504];function LD(n){return jp.apply(this,arguments)}function jp(){return(jp=v(function*(n){var t;if(!Oj(n))throw new Ip(ko(n),0);if(Bj.includes(n.status))throw new Ip(ko(n),n.status);let e,r;try{e=yield n.json()}catch(i){throw new Io(ko(i),i)}const o=function jj(n){const t=n.headers.get(Tp);if(!t||!t.match(Lj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}(n);if(o&&o.getTime()>=MD["2024-01-01"].timestamp&&"object"==typeof e&&e&&"string"==typeof e.code?r=e.code:"object"==typeof e&&e&&"string"==typeof e.error_code&&(r=e.error_code),r){if("weak_password"===r)throw new ID(ko(e),n.status,(null===(t=e.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new io}else if("object"==typeof e&&e&&"object"==typeof e.weak_password&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new ID(ko(e),n.status,e.weak_password.reasons);throw new vj(ko(e),n.status||500,r)})).apply(this,arguments)}const Hj=(n,t,e,r)=>{const o={method:n,headers:t?.headers||{}};return"GET"===n?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),e))};function ge(n,t,e,r){return Vp.apply(this,arguments)}function Vp(){return Vp=v(function*(n,t,e,r){var o;const i=Object.assign({},r?.headers);i[Tp]||(i[Tp]=MD["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield function zj(n,t,e,r,o,i){return $p.apply(this,arguments)}(n,t,e+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),Vp.apply(this,arguments)}function $p(){return($p=v(function*(n,t,e,r,o,i){const s=Hj(t,r,o,i);let a;try{a=yield n(e,Object.assign({},s))}catch(l){throw console.error(l),new Ip(ko(l),0)}if(a.ok||(yield LD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield LD(l)}})).apply(this,arguments)}function Qn(n){var t;let e=null;return function Wj(n){return n.access_token&&n.refresh_token&&n.expires_in}(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=function Mj(n){return Math.round(Date.now()/1e3)+n}(n.expires_in))),{data:{session:e,user:null!==(t=n.user)&&void 0!==t?t:n},error:null}}function jD(n){const t=Qn(n);return!t.error&&n.weak_password&&"object"==typeof n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&"string"==typeof n.weak_password.message&&n.weak_password.reasons.reduce((e,r)=>e&&"string"==typeof r,!0)&&(t.data.weak_password=n.weak_password),t}function ao(n){var t;return{data:{user:null!==(t=n.user)&&void 0!==t?t:n},error:null}}function Gj(n){return{data:n,error:null}}function qj(n){const{action_link:t,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i}=n,s=(0,V.__rest)(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function VD(n){return n}const Up=["global","local","others"];class Kj{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=ND(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(t){var e=this;return v(function*(r,o=Up[0]){if(Up.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Up.join(", ")}`);try{return yield ge(e.fetch,"POST",`${e.url}/logout?scope=${o}`,{headers:e.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(re(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(t){var e=this;return v(function*(r,o={}){try{return yield ge(e.fetch,"POST",`${e.url}/invite`,{body:{email:r,data:o.data},headers:e.headers,redirectTo:o.redirectTo,xform:ao})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(t){var e=this;return v(function*(){try{const{options:r}=t,o=(0,V.__rest)(t,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield ge(e.fetch,"POST",`${e.url}/admin/generate_link`,{body:i,headers:e.headers,xform:qj,redirectTo:r?.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(t){var e=this;return v(function*(){try{return yield ge(e.fetch,"POST",`${e.url}/admin/users`,{body:t,headers:e.headers,xform:ao})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})()}listUsers(t){var e=this;return v(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield ge(e.fetch,"GET",`${e.url}/admin/users`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=t?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=t?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:VD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(m.split(";")[1].split("=")[1]);u[`${C}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}})()}getUserById(t){var e=this;return v(function*(){qi(t);try{return yield ge(e.fetch,"GET",`${e.url}/admin/users/${t}`,{headers:e.headers,xform:ao})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})()}updateUserById(t,e){var r=this;return v(function*(){qi(t);try{return yield ge(r.fetch,"PUT",`${r.url}/admin/users/${t}`,{body:e,headers:r.headers,xform:ao})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}})()}deleteUser(t){var e=this;return v(function*(r,o=!1){qi(r);try{return yield ge(e.fetch,"DELETE",`${e.url}/admin/users/${r}`,{headers:e.headers,body:{should_soft_delete:o},xform:ao})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(t){var e=this;return v(function*(){qi(t.userId);try{const{data:r,error:o}=yield ge(e.fetch,"GET",`${e.url}/admin/users/${t.userId}/factors`,{headers:e.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_deleteFactor(t){var e=this;return v(function*(){qi(t.userId),qi(t.id);try{return{data:yield ge(e.fetch,"DELETE",`${e.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:e.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_listOAuthClients(t){var e=this;return v(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield ge(e.fetch,"GET",`${e.url}/admin/oauth/clients`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=t?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=t?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:VD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(m.split(";")[1].split("=")[1]);u[`${C}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(t){var e=this;return v(function*(){try{return yield ge(e.fetch,"POST",`${e.url}/admin/oauth/clients`,{body:t,headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_getOAuthClient(t){var e=this;return v(function*(){try{return yield ge(e.fetch,"GET",`${e.url}/admin/oauth/clients/${t}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_deleteOAuthClient(t){var e=this;return v(function*(){try{return yield ge(e.fetch,"DELETE",`${e.url}/admin/oauth/clients/${t}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(t){var e=this;return v(function*(){try{return yield ge(e.fetch,"POST",`${e.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}}function $D(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}const Wi={debug:!!(globalThis&&RD()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class UD extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Jj extends UD{}function Yj(n,t,e){return Bp.apply(this,arguments)}function Bp(){return Bp=v(function*(n,t,e){Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=v(function*(i){if(!i){if(0===t)throw Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Jj(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Wi.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield e()}finally{Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),Bp.apply(this,arguments)}function HD(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function eV(n){const t=(new TextEncoder).encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}class Ct extends Error{constructor({message:t,code:e,cause:r,name:o}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=e}}class Zc extends Ct{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}}function nV({error:n,options:t}){var e,r,o;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(t.signal instanceof AbortSignal)return new Ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if("ConstraintError"===n.name){if(!0===(null===(e=i.authenticatorSelection)||void 0===e?void 0:e.requireResidentKey))return new Ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if("conditional"===t.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new Ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new Ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if("InvalidStateError"===n.name)return new Ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if("NotAllowedError"===n.name)return new Ct({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("NotSupportedError"===n.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new Ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if("SecurityError"===n.name){const s=window.location.hostname;if(!zD(s))return new Ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(i.rp.id!==s)return new Ct({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("TypeError"===n.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if("UnknownError"===n.name)return new Ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function rV({error:n,options:t}){const{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(t.signal instanceof AbortSignal)return new Ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if("NotAllowedError"===n.name)return new Ct({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("SecurityError"===n.name){const r=window.location.hostname;if(!zD(r))return new Ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(e.rpId!==r)return new Ct({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("UnknownError"===n.name)return new Ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}const iV=new class oV{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}};function sV(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:e,excludeCredentials:r}=n,o=(0,V.__rest)(n,["challenge","user","excludeCredentials"]),i=Hi(t).buffer,s=Object.assign(Object.assign({},e),{id:Hi(e.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Hi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function aV(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:e}=n,r=(0,V.__rest)(n,["challenge","allowCredentials"]),o=Hi(t).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(e&&e.length>0){i.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){const a=e[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Hi(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function lV(n){var t;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const e=n;return{id:n.id,rawId:n.id,response:{attestationObject:Oo(new Uint8Array(n.response.attestationObject)),clientDataJSON:Oo(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:null!==(t=e.authenticatorAttachment)&&void 0!==t?t:void 0}}function cV(n){var t;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const e=n,r=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Oo(new Uint8Array(o.authenticatorData)),clientDataJSON:Oo(new Uint8Array(o.clientDataJSON)),signature:Oo(new Uint8Array(o.signature)),userHandle:o.userHandle?Oo(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=e.authenticatorAttachment)&&void 0!==t?t:void 0}}function zD(n){return"localhost"===n||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function GD(){var n,t;return!!(vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(n=navigator?.credentials)||void 0===n?void 0:n.create)&&"function"==typeof(null===(t=navigator?.credentials)||void 0===t?void 0:t.get))}function zp(){return(zp=v(function*(n){try{const t=yield navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zc("Browser returned unexpected credential type",t)}:{data:null,error:new Zc("Empty credential response",t)}}catch(t){return{data:null,error:nV({error:t,options:n})}}})).apply(this,arguments)}function Gp(){return(Gp=v(function*(n){try{const t=yield navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zc("Browser returned unexpected credential type",t)}:{data:null,error:new Zc("Empty credential response",t)}}catch(t){return{data:null,error:rV({error:t,options:n})}}})).apply(this,arguments)}const hV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},fV={userVerification:"preferred",hints:["security-key"]};function Xc(...n){const t=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),e=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of n)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(e(s))r[i]=s;else if(t(s)){const a=r[i];r[i]=t(a)?Xc(a,s):Xc(s)}else r[i]=s}return r}class mV{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){var e=this;return v(function*(){return e.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})()}_challenge(t,e){var r=this;return v(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!c)return{data:null,error:u};const d=a??iV.createNewAbortSignal();if("create"===c.webauthn.type){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=function pV(n,t){return Xc(hV,n,t||{})}(c.webauthn.credential_options.publicKey,l?.create),{data:f,error:p}=yield function uV(n){return zp.apply(this,arguments)}({publicKey:h,signal:d});return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=function gV(n,t){return Xc(fV,n,t||{})}(c.webauthn.credential_options.publicKey,l?.request),{data:f,error:p}=yield function dV(n){return Gp.apply(this,arguments)}(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Io("Unexpected error in challenge",c)}}}).apply(this,arguments)}_verify(t){var e=this;return v(function*({challengeId:r,factorId:o,webauthn:i}){return e.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(t,e){var r=this;return v(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}},l){if(!i)return{data:null,error:new Da("rpId is required for WebAuthn authentication")};try{if(!GD())return{data:null,error:new Io("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:u};const{webauthn:d}=c;return r._verify({factorId:o,challengeId:c.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Io("Unexpected error in authenticate",c)}}}).apply(this,arguments)}_register(t,e){var r=this;return v(function*({friendlyName:o,rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a},l){if(!i)return{data:null,error:new Da("rpId is required for WebAuthn registration")};try{if(!GD())return{data:null,error:new Io("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r._enroll({friendlyName:o});if(!c)return yield r.client.mfa.listFactors().then(f=>{var p;return null===(p=f.data)||void 0===p?void 0:p.all.find(m=>"webauthn"===m.factor_type&&m.friendly_name===o&&"unverified"!==m.status)}).then(f=>f?r.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:d,error:h}=yield r._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return d?r._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Io("Unexpected error in register",c)}}}).apply(this,arguments)}}!function Zj(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const yV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.76.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function qD(n,t,e){return qp.apply(this,arguments)}function qp(){return(qp=v(function*(n,t,e){return yield e()})).apply(this,arguments)}const Ki={},vV=(()=>{class n{get jwks(){var e,r;return null!==(r=null===(e=Ki[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==r?r:{keys:[]}}set jwks(e){Ki[this.storageKey]=Object.assign(Object.assign({},Ki[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return null!==(r=null===(e=Ki[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ki[this.storageKey]=Object.assign(Object.assign({},Ki[this.storageKey]),{cachedAt:e})}constructor(e){var o,i,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},yV),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Kj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ND(s.fetch),this.lock=s.lock||qD,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.lock=s.lock?s.lock:vn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?Yj:qD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new mV(this)},this.persistSession?(s.storage?this.storage=s.storage:RD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$D(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=$D(this.memoryStorage)),vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=v(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.76.1) ${(new Date).toISOString()}`,...e),this}initialize(){var e=this;return v(function*(){return e.initializePromise||(e.initializePromise=v(function*(){return yield e._acquireLock(-1,v(function*(){return yield e._initialize()}))})()),yield e.initializePromise})()}_initialize(){var e=this;return v(function*(){var r;try{const o=function Ij(n){const t={},e=new URL(n);if(e.hash&&"#"===e.hash[0])try{new URLSearchParams(e.hash.substring(1)).forEach((o,i)=>{t[i]=o})}catch{}return e.searchParams.forEach((r,o)=>{t[o]=r}),t}(window.location.href);let i="none";if(e._isImplicitGrantCallback(o)?i="implicit":(yield e._isPKCECallback(o))&&(i="pkce"),vn()&&e.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield e._getSessionFromURL(o,i);if(a){if(e._debug("#_initialize()","error detecting session from URL",a),function wj(n){return re(n)&&"AuthImplicitGrantRedirectError"===n.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield e._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return e._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield e._saveSession(l),setTimeout(v(function*(){"recovery"===c?yield e._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield e._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield e._recoverAndRefresh(),{error:null}}catch(o){return re(o)?{error:o}:{error:new Io("Unexpected error during initialization",o)}}finally{yield e._handleVisibilityChange(),e._debug("#_initialize()","end")}})()}signInAnonymously(e){var r=this;return v(function*(){var o,i,s;try{const a=yield ge(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=e?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=e?.options)||void 0===s?void 0:s.captchaToken}},xform:Qn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(e){var r=this;return v(function*(){var o,i,s;try{let a;if("email"in e){const{email:h,password:f,options:p}=e;let m=null,g=null;"pkce"===r.flowType&&([m,g]=yield Gi(r.storage,r.storageKey)),a=yield ge(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:null!==(o=p?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:g},xform:Qn})}else{if(!("phone"in e))throw new Wc("You must provide either an email or phone number and a password");{const{phone:h,password:f,options:p}=e;a=yield ge(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:h,password:f,data:null!==(i=p?.data)&&void 0!==i?i:{},channel:null!==(s=p?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Qn})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(e){var r=this;return v(function*(){try{let o;if("email"in e){const{email:a,password:l,options:c}=e;o=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:jD})}else{if(!("phone"in e))throw new Wc("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=e;o=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:jD})}}const{data:i,error:s}=o;return s?{data:{user:null,session:null},error:s}:i&&i.session&&i.user?(i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Bi}}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(e){var r=this;return v(function*(){var o,i,s,a;return yield r._handleProviderSignIn(e.provider,{redirectTo:null===(o=e.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=e.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(e){var r=this;return v(function*(){return yield r.initializePromise,r._acquireLock(-1,v(function*(){return r._exchangeCodeForSession(e)}))})()}signInWithWeb3(e){var r=this;return v(function*(){const{chain:o}=e;switch(o){case"ethereum":return yield r.signInWithEthereum(e);case"solana":return yield r.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(e){var r=this;return v(function*(){var o,i,s,a,l,c,u,d,h,f,p;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{wallet:x,statement:b,options:A}=e;let R;if(vn())if("object"==typeof x)R=x;else{const Cn=window;if(!("ethereum"in Cn)||"object"!=typeof Cn.ethereum||!("request"in Cn.ethereum)||"function"!=typeof Cn.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");R=Cn.ethereum}else{if("object"!=typeof x||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=x}const W=new URL(null!==(o=A?.url)&&void 0!==o?o:window.location.href),Zt=yield R.request({method:"eth_requestAccounts"}).then(Cn=>Cn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Zt||0===Zt.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Ae=HD(Zt[0]);let ht=null===(i=A?.signInWithEthereum)||void 0===i?void 0:i.chainId;ht||(ht=function Xj(n){return parseInt(n,16)}(yield R.request({method:"eth_chainId"}))),m=function tV(n){var t;const{chainId:e,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=n;if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null!==(t=n.statement)&&void 0!==t&&t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`);const g=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${HD(n.address)}\n\n${n.statement?`${n.statement}\n`:""}`;let C=`URI: ${d}\nVersion: ${h}\nChain ID: ${e}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(C+=`\nExpiration Time: ${o.toISOString()}`),a&&(C+=`\nNot Before: ${a.toISOString()}`),l&&(C+=`\nRequest ID: ${l}`),c){let x="\nResources:";for(const b of c){if(!b||"string"!=typeof b)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`\n- ${b}`}C+=x}return`${g}\n${C}`}({domain:W.host,address:Ae,statement:b,uri:W.href,version:"1",chainId:ht,nonce:null===(s=A?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(l=null===(a=A?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==l?l:new Date,expirationTime:null===(c=A?.signInWithEthereum)||void 0===c?void 0:c.expirationTime,notBefore:null===(u=A?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=A?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(h=A?.signInWithEthereum)||void 0===h?void 0:h.resources}),g=yield R.request({method:"personal_sign",params:[eV(m),Ae]})}try{const{data:C,error:x}=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},null!==(f=e.options)&&void 0!==f&&f.captchaToken?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Qn});if(x)throw x;return C&&C.session&&C.user?(C.session&&(yield r._saveSession(C.session),yield r._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:x}):{data:{user:null,session:null},error:new Bi}}catch(C){if(re(C))return{data:{user:null,session:null},error:C};throw C}})()}signInWithSolana(e){var r=this;return v(function*(){var o,i,s,a,l,c,u,d,h,f,p,m;let g,C;if("message"in e)g=e.message,C=e.signature;else{const{wallet:b,statement:A,options:R}=e;let W;if(vn())if("object"==typeof b)W=b;else{const Ae=window;if(!("solana"in Ae)||"object"!=typeof Ae.solana||!("signIn"in Ae.solana&&"function"==typeof Ae.solana.signIn||"signMessage"in Ae.solana&&"function"==typeof Ae.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");W=Ae.solana}else{if("object"!=typeof b||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=b}const Zt=new URL(null!==(o=R?.url)&&void 0!==o?o:window.location.href);if("signIn"in W&&W.signIn){const Ae=yield W.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},R?.signInWithSolana),{version:"1",domain:Zt.host,uri:Zt.href}),A?{statement:A}:null));let ht;if(Array.isArray(Ae)&&Ae[0]&&"object"==typeof Ae[0])ht=Ae[0];else{if(!(Ae&&"object"==typeof Ae&&"signedMessage"in Ae&&"signature"in Ae))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");ht=Ae}if(!("signedMessage"in ht&&"signature"in ht&&("string"==typeof ht.signedMessage||ht.signedMessage instanceof Uint8Array)&&ht.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");g="string"==typeof ht.signedMessage?ht.signedMessage:(new TextDecoder).decode(ht.signedMessage),C=ht.signature}else{if(!("signMessage"in W&&"function"==typeof W.signMessage&&"publicKey"in W&&"object"==typeof W&&W.publicKey&&"toBase58"in W.publicKey&&"function"==typeof W.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${Zt.host} wants you to sign in with your Solana account:`,W.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${Zt.href}`,`Issued At: ${null!==(s=null===(i=R?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=R?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...null!==(l=R?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...null!==(c=R?.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...null!==(u=R?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...null!==(d=R?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...null!==(f=null===(h=R?.signInWithSolana)||void 0===h?void 0:h.resources)&&void 0!==f&&f.length?["Resources",...R.signInWithSolana.resources.map(ht=>`- ${ht}`)]:[]].join("\n");const Ae=yield W.signMessage((new TextEncoder).encode(g),"utf8");if(!(Ae&&Ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=Ae}}try{const{data:x,error:b}=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:g,signature:Oo(C)},null!==(p=e.options)&&void 0!==p&&p.captchaToken?{gotrue_meta_security:{captcha_token:null===(m=e.options)||void 0===m?void 0:m.captchaToken}}:null),xform:Qn});if(b)throw b;return x&&x.session&&x.user?(x.session&&(yield r._saveSession(x.session),yield r._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:b}):{data:{user:null,session:null},error:new Bi}}catch(x){if(re(x))return{data:{user:null,session:null},error:x};throw x}})()}_exchangeCodeForSession(e){var r=this;return v(function*(){const o=yield Po(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:l}=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:e,code_verifier:i},xform:Qn});if(yield so(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Bi}}catch(a){if(re(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(e){var r=this;return v(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:l}=e,c=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Qn}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new Bi}}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(e){var r=this;return v(function*(){var o,i,s,a,l;try{if("email"in e){const{email:c,options:u}=e;let d=null,h=null;"pkce"===r.flowType&&([d,h]=yield Gi(r.storage,r.storageKey));const{error:f}=yield ge(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:c,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:c,options:u}=e,{data:d,error:h}=yield ge(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:c,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(l=u?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new Wc("You must provide either an email or phone number.")}catch(c){if(re(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(e){var r=this;return v(function*(){var o,i;try{let s,a;"options"in e&&(s=null===(o=e.options)||void 0===o?void 0:o.redirectTo,a=null===(i=e.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield ge(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Qn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,d=l.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithSSO(e){var r=this;return v(function*(){var o,i,s;try{let a=null,l=null;return"pkce"===r.flowType&&([a,l]=yield Gi(r.storage,r.storageKey)),yield ge(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(i=null===(o=e.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=e?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:Gj})}catch(a){if(re(a))return{data:null,error:a};throw a}})()}reauthenticate(){var e=this;return v(function*(){return yield e.initializePromise,yield e._acquireLock(-1,v(function*(){return yield e._reauthenticate()}))})()}_reauthenticate(){var e=this;return v(function*(){try{return yield e._useSession(function(){var r=v(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new io;const{error:a}=yield ge(e.fetch,"GET",`${e.url}/reauthenticate`,{headers:e.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(e){var r=this;return v(function*(){try{const o=`${r.url}/resend`;if("email"in e){const{email:i,type:s,options:a}=e,{error:l}=yield ge(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in e){const{phone:i,type:s,options:a}=e,{data:l,error:c}=yield ge(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new Wc("You must provide either an email or phone number and a type")}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var e=this;return v(function*(){return yield e.initializePromise,yield e._acquireLock(-1,v(function*(){return e._useSession(function(){var o=v(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(e,r){var o=this;return v(function*(){o._debug("#_acquireLock","begin",e);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=v(function*(){return yield i,yield r()})();return o.pendingInLock.push(v(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,e,v(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(v(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(e){var r=this;return v(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield e(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var e=this;return v(function*(){e._debug("#__loadSession()","begin"),e.lockAcquired||e._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield Po(e.storage,e.storageKey);if(e._debug("#getSession()","session from storage",o),null!==o&&(e._isValidSession(o)?r=o:(e._debug("#getSession()","session from storage is not valid"),yield e._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(e._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(e.userStorage){const l=yield Po(e.userStorage,e.storageKey+"-user");r.user=l?.user?l.user:Lp()}if(e.storage.isServer&&r.user){let l=e.suppressGetSessionWarning;r=new Proxy(r,{get:(u,d,h)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,e.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:r},error:null}}const{data:s,error:a}=yield e._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{e._debug("#__loadSession()","end")}})()}getUser(e){var r=this;return v(function*(){return e?yield r._getUser(e):(yield r.initializePromise,yield r._acquireLock(-1,v(function*(){return yield r._getUser()})))})()}_getUser(e){var r=this;return v(function*(){try{return e?yield ge(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:e,xform:ao}):yield r._useSession(function(){var o=v(function*(i){var s,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(s=c.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield ge(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:ao}):{data:{user:null},error:new io}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return function bj(n){return re(n)&&"AuthSessionMissingError"===n.name}(o)&&(yield r._removeSession(),yield so(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(e){var r=this;return v(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,v(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(e){var r=this;return v(function*(o,i={}){try{return yield r._useSession(function(){var s=v(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new io;const u=l.session;let d=null,h=null;"pkce"===r.flowType&&null!=o.email&&([d,h]=yield Gi(r.storage,r.storageKey));const{data:f,error:p}=yield ge(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:ao});if(p)throw p;return u.user=f.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return s.apply(this,arguments)}}())}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}).apply(this,arguments)}setSession(e){var r=this;return v(function*(){return yield r.initializePromise,yield r._acquireLock(-1,v(function*(){return yield r._setSession(e)}))})()}_setSession(e){var r=this;return v(function*(){try{if(!e.access_token||!e.refresh_token)throw new io;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:l}=Pp(e.access_token);if(l.exp&&(i=l.exp,s=i<=o),s){const{data:c,error:u}=yield r._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield r._getUser(e.access_token);if(u)throw u;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(o){if(re(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(e){var r=this;return v(function*(){return yield r.initializePromise,yield r._acquireLock(-1,v(function*(){return yield r._refreshSession(e)}))})()}_refreshSession(e){var r=this;return v(function*(){try{return yield r._useSession(function(){var o=v(function*(i){var s;if(!e){const{data:c,error:u}=i;if(u)throw u;e=null!==(s=c.session)&&void 0!==s?s:void 0}if(!e?.refresh_token)throw new io;const{data:a,error:l}=yield r._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(e,r){var o=this;return v(function*(){try{if(!vn())throw new Kc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Kc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new TD("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new Kc("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new TD("No code detected.");const{data:A,error:R}=yield o._exchangeCodeForSession(e.code);if(R)throw R;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:d}=e;if(!(a&&c&&l&&d))throw new Kc("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let p=h+f;u&&(p=parseInt(u));const m=p-h;1e3*m<=Ui&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=p-f;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,p,h);const{data:C,error:x}=yield o._getUser(a);if(x)throw x;const b={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:d,user:C.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(i){if(re(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}_isPKCECallback(e){var r=this;return v(function*(){const o=yield Po(r.storage,`${r.storageKey}-code-verifier`);return!(!e.code||!o)})()}signOut(){var e=this;return v(function*(r={scope:"global"}){return yield e.initializePromise,yield e._acquireLock(-1,v(function*(){return yield e._signOut(r)}))}).apply(this,arguments)}_signOut(){var e=this;return v(function*({scope:r}={scope:"global"}){return yield e._useSession(function(){var o=v(function*(i){var s;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(s=a.session)||void 0===s?void 0:s.access_token;if(c){const{error:u}=yield e.admin.signOut(c,r);if(u&&(!function Cj(n){return re(n)&&"AuthApiError"===n.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==r&&(yield e._removeSession(),yield so(e.storage,`${e.storageKey}-code-verifier`)),{error:null}});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(e){var r=this;const o=function Tj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)})}(),i={id:o,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),v(function*(){yield r.initializePromise,yield r._acquireLock(-1,v(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(e){var r=this;return v(function*(){return yield r._useSession(function(){var o=v(function*(i){var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(s=r.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(e){var r=this;return v(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield Gi(r.storage,r.storageKey,!0));try{return yield ge(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(l){if(re(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var e=this;return v(function*(){var r;try{const{data:o,error:i}=yield e.getUser();if(i)throw i;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(re(o))return{data:null,error:o};throw o}})()}linkIdentity(e){var r=this;return v(function*(){return"token"in e?r.linkIdentityIdToken(e):r.linkIdentityOAuth(e)})()}linkIdentityOAuth(e){var r=this;return v(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=v(function*(l){var c,u,d,h,f;const{data:p,error:m}=l;if(m)throw m;const g=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,e.provider,{redirectTo:null===(c=e.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=e.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=e.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield ge(r.fetch,"GET",g,{headers:r.headers,jwt:null!==(f=null===(h=p.session)||void 0===h?void 0:h.access_token)&&void 0!==f?f:void 0})});return function(l){return a.apply(this,arguments)}}());if(s)throw s;return vn()&&!(null!==(o=e.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(re(i))return{data:{provider:e.provider,url:null},error:i};throw i}})()}linkIdentityIdToken(e){var r=this;return v(function*(){return yield r._useSession(function(){var o=v(function*(i){var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:u,token:d,access_token:h,nonce:f}=e,p=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=l?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Qn}),{data:m,error:g}=p;return g?{data:{user:null,session:null},error:g}:m&&m.session&&m.user?(m.session&&(yield r._saveSession(m.session),yield r._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:g}):{data:{user:null,session:null},error:new Bi}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(e){var r=this;return v(function*(){try{return yield r._useSession(function(){var o=v(function*(i){var s,a;const{data:l,error:c}=i;if(c)throw c;return yield ge(r.fetch,"DELETE",`${r.url}/user/identities/${e.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=l.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(e){var r=this;return v(function*(){const o=`#_refreshAccessToken(${e.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function Pj(n,t){return new Promise((r,o)=>{v(function*(){for(let i=0;i<1/0;i++)try{const s=yield n(i);if(!t(i,null,s))return void r(s)}catch(s){if(!t(i,s))return void o(s)}})()})}(function(){var s=v(function*(a){return a>0&&(yield function Aj(n){return kp.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield ge(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:r.headers,xform:Qn})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const l=200*Math.pow(2,s);return a&&Op(a)&&Date.now()+l-i<Ui})}catch(i){if(r._debug(o,"error",i),re(i))return{data:{session:null,user:null},error:i};throw i}finally{r._debug(o,"end")}})()}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){var o=this;return v(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),vn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})()}_recoverAndRefresh(){var e=this;return v(function*(){var r,o;const i="#_recoverAndRefresh()";e._debug(i,"begin");try{const s=yield Po(e.storage,e.storageKey);if(s&&e.userStorage){let l=yield Po(e.userStorage,e.storageKey+"-user");!e.storage.isServer&&Object.is(e.storage,e.userStorage)&&!l&&(l={user:s.user},yield zi(e.userStorage,e.storageKey+"-user",l)),s.user=null!==(r=l?.user)&&void 0!==r?r:Lp()}else if(s&&!s.user&&!s.user){const l=yield Po(e.storage,e.storageKey+"-user");l&&l?.user?(s.user=l.user,yield so(e.storage,e.storageKey+"-user"),yield zi(e.storage,e.storageKey,s)):s.user=Lp()}if(e._debug(i,"session from storage",s),!e._isValidSession(s))return e._debug(i,"session is not valid"),void(null!==s&&(yield e._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(e._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(e.autoRefreshToken&&s.refresh_token){const{error:l}=yield e._callRefreshToken(s.refresh_token);l&&(console.error(l),Op(l)||(e._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield e._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield e._getUser(s.access_token);!c&&l?.user?(s.user=l.user,yield e._saveSession(s),yield e._notifyAllSubscribers("SIGNED_IN",s)):e._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),e._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield e._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return e._debug(i,"error",s),void console.error(s)}finally{e._debug(i,"end")}})()}_callRefreshToken(e){var r=this;return v(function*(){var o,i;if(!e)throw new io;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new Yc;const{data:a,error:l}=yield r._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new io;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return r.refreshingDeferred.resolve(c),c}catch(a){if(r._debug(s,"error",a),re(a)){const l={data:null,error:a};return Op(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(e,r){var o=this;return v(function*(i,s,a=!0){const l=`#_notifyAllSubscribers(${i})`;o._debug(l,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const c=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=v(function*(h){try{yield h.callback(i,s)}catch(f){c.push(f)}});return function(h){return d.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(e){var r=this;return v(function*(){r._debug("#_saveSession()",e),r.suppressGetSessionWarning=!0;const o=Object.assign({},e);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield zi(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=FD(s);yield zi(r.storage,r.storageKey,a)}else{const s=FD(o);yield zi(r.storage,r.storageKey,s)}})()}_removeSession(){var e=this;return v(function*(){e._debug("#_removeSession()"),yield so(e.storage,e.storageKey),yield so(e.storage,e.storageKey+"-code-verifier"),yield so(e.storage,e.storageKey+"-user"),e.userStorage&&(yield so(e.userStorage,e.storageKey+"-user")),yield e._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var e=this;return v(function*(){yield e._stopAutoRefresh(),e._debug("#_startAutoRefresh()");const r=setInterval(()=>e._autoRefreshTokenTick(),Ui);e.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(v(function*(){yield e.initializePromise,yield e._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var e=this;return v(function*(){e._debug("#_stopAutoRefresh()");const r=e.autoRefreshTicker;e.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var e=this;return v(function*(){e._removeVisibilityChangedCallback(),yield e._startAutoRefresh()})()}stopAutoRefresh(){var e=this;return v(function*(){e._removeVisibilityChangedCallback(),yield e._stopAutoRefresh()})()}_autoRefreshTokenTick(){var e=this;return v(function*(){e._debug("#_autoRefreshTokenTick()","begin");try{yield e._acquireLock(0,v(function*(){try{const r=Date.now();try{return yield e._useSession(function(){var o=v(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void e._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/Ui);e._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield e._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{e._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof UD))throw r;e._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var e=this;return v(function*(){if(e._debug("#_handleVisibilityChange()"),!vn()||!window?.addEventListener)return e.autoRefreshToken&&e.startAutoRefresh(),!1;try{e.visibilityChangedCallback=v(function*(){return yield e._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",e.visibilityChangedCallback),yield e._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(e){var r=this;return v(function*(){const o=`#_onVisibilityChanged(${e})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),e||(yield r.initializePromise,yield r._acquireLock(-1,v(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(e,r,o){var i=this;return v(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,l]=yield Gi(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${s.join("&")}`})()}_unenroll(e){var r=this;return v(function*(){try{return yield r._useSession(function(){var o=v(function*(i){var s;const{data:a,error:l}=i;return l?{data:null,error:l}:yield ge(r.fetch,"DELETE",`${r.url}/factors/${e.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}})()}_enroll(e){var r=this;return v(function*(){try{return yield r._useSession(function(){var o=v(function*(i){var s,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:d,error:h}=yield ge(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=l?.session)||void 0===s?void 0:s.access_token});return h?{data:null,error:h}:("totp"===e.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}})()}_verify(e){var r=this;return v(function*(){return r._acquireLock(-1,v(function*(){try{return yield r._useSession(function(){var o=v(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?lV(e.webauthn.credential_response):cV(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=yield ge(r.fetch,"POST",`${r.url}/factors/${e.factorId}/verify`,{body:c,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?{data:null,error:d}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}}))})()}_challenge(e){var r=this;return v(function*(){return r._acquireLock(-1,v(function*(){try{return yield r._useSession(function(){var o=v(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=yield ge(r.fetch,"POST",`${r.url}/factors/${e.factorId}/challenge`,{body:e,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:sV(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:aV(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(e){var r=this;return v(function*(){const{data:o,error:i}=yield r._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield r._verify({factorId:e.factorId,challengeId:o.id,code:e.code})})()}_listFactors(){var e=this;return v(function*(){var r;const{data:{user:o},error:i}=yield e.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var e=this;return v(function*(){return e._acquireLock(-1,v(function*(){return yield e._useSession(function(){var r=v(function*(o){var i,s;const{data:{session:a},error:l}=o;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Pp(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;return(null!==(s=null===(i=a.user.factors)||void 0===i?void 0:i.filter(p=>"verified"===p.status))&&void 0!==s?s:[]).length>0&&(d="aal2"),{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:c.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(e){var r=this;return v(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:l,error:c}=yield ge(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=a,s=l.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(e){var r=this;return v(function*(o,i={}){try{let s=o;if(!s){const{data:g,error:C}=yield r.getSession();if(C||!g.session)return{data:null,error:C};s=g.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:d}}=Pp(s);i?.allowExpired||function Vj(n){if(!n)throw new Error("Missing exp claim");if(n<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const h=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!h){const{error:g}=yield r.getUser(s);if(g)throw g;return{data:{claims:l,header:a,signature:c},error:null}}const f=function $j(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),p=yield crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!(yield crypto.subtle.verify(f,p,c,function xj(n){const t=[];return function kD(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(n.charCodeAt(e+1)-56320&65535|o),e+=1}Sj(r,t)}}(n,e=>t.push(e)),new Uint8Array(t)}(`${u}.${d}`))))throw new Ap("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}}).apply(this,arguments)}}return n.nextInstanceID=0,n})();class CV extends vV{constructor(t){super(t)}}class bV{constructor(t,e,r){var o,i,s;this.supabaseUrl=t,this.supabaseKey=e;const a=function fj(n){const t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function dj(n){return n.endsWith("/")?n:n+"/"}(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function hj(n,t){var e,r;const{db:o,auth:i,realtime:s,global:a}=n,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(e=d?.headers)&&void 0!==e?e:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(f=v(function*(){return""}),function(){return f.apply(this,arguments)})};var f;return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}(r??{},{db:ij,realtime:aj,auth:Object.assign(Object.assign({},sj),{storageKey:l}),global:oj});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=uj(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new pD(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new nj(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new cL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t=this;return v(function*(){var e,r;if(t.accessToken)return yield t.accessToken();const{data:o}=yield t.auth.getSession();return null!==(r=null===(e=o.session)||void 0===e?void 0:e.access_token)&&void 0!==r?r:t.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c},u,d){return new CV({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>"authorization"===f.toLowerCase())})}_initRealtimeClient(t){return new PL(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){"TOKEN_REFRESHED"!==t&&"SIGNED_IN"!==t||this.changedAccessToken===r?"SIGNED_OUT"===t&&(this.realtime.setAuth(),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function DV(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(null==n)return!1;const t=n.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const WD_supabase_url="https://hpqwzclyjrfivcmkzwpo.supabase.co",WD_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwcXd6Y2x5anJmaXZjbWt6d3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2ODMzMjUsImV4cCI6MjA3NjI1OTMyNX0.pN-NPncmQCJoiBlYnFk77bAdxXEu5NAn3Fi8bk_c4wI";let Sa=(()=>{const t=class{constructor(){this.currentUserSubject=new kn(null),this.currentUser$=this.currentUserSubject.asObservable(),this.isInitialized=!1,this.initializeClient()}initializeClient(){var r=this;return v(function*(){try{r.supabase=((n,t,e)=>new bV(n,t,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))(WD_supabase_url,WD_supabase_anonKey),r.isInitialized=!0,yield r.checkExistingSession()}catch(o){console.error("Error initializing Supabase client:",o)}})()}checkExistingSession(){var r=this;return v(function*(){const o=localStorage.getItem("currentUser");if(o)try{const i=JSON.parse(o);r.currentUserSubject.next(i)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("currentUser")}})()}signInFallback(r,o){var i=this;return v(function*(){try{const a=[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r&&l.password===o);return a?(localStorage.setItem("currentUser",JSON.stringify(a)),i.currentUserSubject.next(a),{user:a,error:null}):{user:null,error:"Invalid username or password"}}catch(s){return console.error("Fallback sign in error:",s),{user:null,error:"Sign in failed. Please try again."}}})()}signIn(r,o){var i=this;return v(function*(){try{i.isInitialized||(yield new Promise(l=>{const c=()=>{i.isInitialized?l(void 0):setTimeout(c,50)};c()})),yield new Promise(l=>setTimeout(l,100));const{data:s,error:a}=yield i.supabase.from("profiles").select("*").eq("username",r).eq("password",o).single();return a?(console.error("Database query error:",a),console.log("Trying fallback authentication..."),yield i.signInFallback(r,o)):s?(localStorage.setItem("currentUser",JSON.stringify(s)),i.currentUserSubject.next(s),{user:s,error:null}):{user:null,error:"User not found"}}catch(s){if(console.error("Sign in error:",s),s&&"object"==typeof s&&"message"in s){const a=s.message;if(a.includes("NavigatorLockAcquireTimeoutError")||a.includes("lock"))return console.log("Lock error detected, using fallback authentication..."),yield i.signInFallback(r,o)}return console.log("Error occurred, trying fallback authentication..."),yield i.signInFallback(r,o)}})()}signOut(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getCurrentUser(){return this.currentUserSubject.value}isSignedIn(){return null!==this.currentUserSubject.value}getProfileByUsername(r){var o=this;return v(function*(){try{o.isInitialized||(yield new Promise(a=>{const l=()=>{o.isInitialized?a():setTimeout(l,50)};l()}));const{data:i,error:s}=yield o.supabase.from("profiles").select("*").eq("username",r).maybeSingle();return s?(console.warn("getProfileByUsername fallback due to error:",s.message),[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r)||null):i||null}catch(i){return console.error("Error in getProfileByUsername:",i),null}})()}getUserCards(r,o){var i=this;return v(function*(){try{const s=parseInt(r);if(isNaN(s))return{cards:[],error:"Invalid user ID format"};const a=1e3;let l=0,c=[],u=!0;for(;u;){const{data:d,error:h}=yield i.supabase.from("user_cards").select("*").eq("user_id",s).range(l,l+a-1);if(h)return{cards:[],error:h.message};d&&d.length>0?(c=c.concat(d),l+=a,u=d.length===a,o&&o(c.length)):u=!1}return{cards:c,error:null}}catch(s){return console.error("Error fetching user cards:",s),{cards:[],error:"Failed to fetch user cards"}}})()}updateCardQuantity(r,o,i){var s=this;return v(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};if(i<=0){const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a).eq("card_def_key",o);if(l)return{success:!1,error:l.message}}else{const{data:l,error:c}=yield s.supabase.from("user_cards").select("*").eq("user_id",a).eq("card_def_key",o).maybeSingle();if(c)return console.error("Error checking existing card:",c),{success:!1,error:c.message};if(l){const{error:u}=yield s.supabase.from("user_cards").update({quantity:i}).eq("user_id",a).eq("card_def_key",o);if(u)return{success:!1,error:u.message}}else{const{error:u}=yield s.supabase.from("user_cards").insert({user_id:a,card_def_key:o,quantity:i});if(u)return{success:!1,error:u.message}}}return{success:!0,error:null}}catch(a){return console.error("Error updating card quantity:",a),{success:!1,error:"Failed to update card quantity"}}})()}getCardQuantity(r,o){var i=this;return v(function*(){try{const{data:s,error:a}=yield i.supabase.from("user_cards").select("quantity").eq("user_id",r).eq("card_def_key",o).single();return a||!s?0:s.quantity||0}catch(s){return console.error("Error fetching card quantity:",s),0}})()}syncUserCollection(r,o){var i=this;return v(function*(){try{const{cards:s,error:a}=yield i.getUserCards(r,o);if(a)return console.error("Error syncing user collection:",a),{};const l={};return s.forEach(c=>{l[c.card_def_key]=c.quantity}),l}catch(s){return console.error("Error syncing user collection:",s),{}}})()}bulkReplaceUserCollection(r,o){var i=this;return v(function*(){try{const s=parseInt(r);if(isNaN(s))return{success:!1,error:"Invalid user ID format"};const{error:a}=yield i.supabase.from("user_cards").delete().eq("user_id",s);if(a)return console.error("Error deleting existing cards:",a),{success:!1,error:a.message};const l=Object.entries(o).filter(([c,u])=>u>0).map(([c,u])=>({user_id:s,card_def_key:c,quantity:u}));if(l.length>0){const{error:c}=yield i.supabase.from("user_cards").insert(l);if(c)return console.error("Error inserting new cards:",c),{success:!1,error:c.message};console.log(`\u2705 Bulk sync completed: ${l.length} cards inserted`)}else console.log("\u2705 Bulk sync completed: No cards to insert (collection is empty)");return{success:!0,error:null}}catch(s){return console.error("Error in bulk replace user collection:",s),{success:!1,error:"Failed to bulk replace user collection"}}})()}};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),SV=(()=>{const t=class{constructor(){this.rarityMap=new Map([["C",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["U",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["R",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["RR",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["AR",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["SR",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["SAR",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["IM",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["UR",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["CR",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["S",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["SSR",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}],["Common",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["Uncommon",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["Rare",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["Double Rare",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["Art Rare",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["Super Rare",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Special Art Rare",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Immersive Rare",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["Ultimate Rare",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["Crown Rare",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["Shiny",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["Shiny Super Rare",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}]])}getRarityInfo(r){return this.rarityMap.get(r)}getDisplayName(r){const o=this.getRarityInfo(r);return o?o.displayName:r}getSymbol(r){const o=this.getRarityInfo(r);return o?o.symbol:r}getAllRarities(){return Array.from(this.rarityMap.values()).filter(r=>!r.code.includes(" ")).sort((r,o)=>r.order-o.order)}getRarityOrder(r){const o=this.getRarityInfo(r);return o?o.order:999}sortRarities(r){return r.sort((o,i)=>this.getRarityOrder(o)-this.getRarityOrder(i))}isRare(r){return["IM","UR","SSR"].includes(r)}isSuperRare(r){return["SR","SAR","IM","UR","SSR"].includes(r)}getNormalizedCode(r){const o=this.getRarityInfo(r);return o?"SAR"===o.code||"Special Art Rare"===r?"SR":o.code:r}getStandardizedDisplayName(r){const o=this.getNormalizedCode(r),i=this.getRarityInfo(o);return i?i.displayName:r}getUnifiedRarities(){return this.getAllRarities().filter(o=>"SAR"!==o.code)}getCodeFromSymbol(r){for(const[,o]of this.rarityMap)if(o.symbol===r)return o.code;return r}groupCardsByNormalizedRarity(r){const o=new Map;return r.forEach(i=>{if(!i.rarity)return;const s=this.getCodeFromSymbol(i.rarity),a=this.getNormalizedCode(s);o.has(a)||o.set(a,[]),o.get(a).push(i)}),o}};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function EV(n,t){if(1&n){const e=tt();y(0,"div",64)(1,"div",65),E(2,"Viewing "),y(3,"strong"),E(4),_(),E(5,"'s collection (read-only)"),_(),y(6,"button",66),B("click",function(){return ee(e),te(j().backToMyCollection())}),E(7,"Back to my collection"),_()()}if(2&n){const e=j();D(4),St(null==e.viewingUser?null:e.viewingUser.username)}}function xV(n,t){if(1&n&&(y(0,"option",67),E(1),_()),2&n){const e=t.$implicit;L("value",e),D(1),St(e)}}function MV(n,t){if(1&n&&(y(0,"option",67),E(1),_()),2&n){const e=t.$implicit,r=j();L("value",e),D(1),St(r.getSetName(e))}}function TV(n,t){if(1&n&&(y(0,"option",67),E(1),_()),2&n){const e=t.$implicit;L("value",e),D(1),St(e)}}function IV(n,t){if(1&n){const e=tt();y(0,"button",68),B("click",function(){const i=ee(e).$implicit;return te(j().toggleRarity(i.symbol))}),E(1),_()}if(2&n){const e=t.$implicit;nt("active",j().isRaritySelected(e.symbol)),L("title",e.displayName),D(1),ke(" ",e.symbol," ")}}const OV=function(n,t,e){return{"trainer-item":n,"trainer-tool":t,"trainer-supporter":e}};function AV(n,t){if(1&n&&(Is(0),y(1,"span",72),E(2),_(),Os()),2&n){const e=j().$implicit;D(1),L("ngClass",Zd(2,OV,"Item"===e,"Tool"===e,"Supporter"===e)),D(1),ke(" ",e," ")}}function PV(n,t){if(1&n&&et(0,"img",73),2&n){const e=j().$implicit;L("src","assets/energy/"+e.toLowerCase()+".webp",bs)("alt",e)}}const kV=function(){return["Item","Tool","Supporter"]};function RV(n,t){if(1&n){const e=tt();y(0,"button",69),B("click",function(){const i=ee(e).$implicit;return te(j().toggleType(i))}),Q(1,AV,3,6,"ng-container",70),Q(2,PV,1,2,"ng-template",null,71,ah),_()}if(2&n){const e=t.$implicit,r=Dl(3);nt("active",j().isTypeSelected(e)),L("title",e),D(1),L("ngIf",vi(5,kV).includes(e))("ngIfElse",r)}}function NV(n,t){if(1&n){const e=tt();y(0,"div",12)(1,"label",74),E(2,"Group By"),_(),y(3,"select",75),B("ngModelChange",function(o){return ee(e),te(j().groupBy=o)})("change",function(){return ee(e),te(j().onGroupByChange())}),y(4,"option",76),E(5,"No Grouping"),_(),y(6,"option",77),E(7,"Rarity"),_(),y(8,"option",78),E(9,"Pack"),_(),y(10,"option",79),E(11,"Type"),_()()()}if(2&n){const e=j();D(3),L("ngModel",e.groupBy)}}function FV(n,t){1&n&&(y(0,"div",80),et(1,"div",81),y(2,"p"),E(3,"Loading Pokemon cards..."),_()())}function LV(n,t){if(1&n){const e=tt();y(0,"div",82)(1,"p"),E(2),_(),y(3,"button",83),B("click",function(){return ee(e),te(j().loadAllData())}),E(4,"Retry"),_()()}if(2&n){const e=j();D(2),St(e.error)}}function jV(n,t){if(1&n&&(y(0,"div",90),E(1),_()),2&n){const e=j(2);D(1),ke("",e.syncProgress," cards loaded")}}function VV(n,t){if(1&n&&(y(0,"div",84)(1,"div",85)(2,"div",86),E(3,"\u23f3"),_(),y(4,"div",87)(5,"div",88),E(6),_(),Q(7,jV,2,1,"div",89),_()()()),2&n){const e=j();D(6),St(e.syncMessage),D(1),L("ngIf",e.syncProgress>0)}}function $V(n,t){if(1&n&&(y(0,"span",104),E(1),_()),2&n){const e=j().$implicit,r=j(2);D(1),ke(" \u25ca ",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)," ")}}function UV(n,t){if(1&n&&(y(0,"span",105),E(1),_()),2&n){const e=j().$implicit,r=j(2);D(1),ke(" \u2606 ",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)," ")}}function BV(n,t){if(1&n&&(y(0,"span",106),E(1),_()),2&n){const e=j().$implicit,r=j(2);D(1),ke(" \u2735 ",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)," ")}}function HV(n,t){if(1&n&&(y(0,"span",107),E(1),_()),2&n){const e=j().$implicit,r=j(2);D(1),ke(" \u{1f451} ",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)," ")}}function zV(n,t){if(1&n){const e=tt();Is(0),y(1,"input",117),B("ngModelChange",function(o){return ee(e),te(j(4).editingCountValue=o)})("keydown.enter",function(){ee(e);const o=j().$implicit;return te(j(3).commitCount(o))})("keydown",function(o){ee(e);const i=j().$implicit;return te(j(3).onCountInputKeydown(o,i))})("keydown.escape",function(){return ee(e),te(j(4).cancelEditingCount())})("blur",function(){ee(e);const o=j().$implicit;return te(j(3).commitCount(o))}),_(),Os()}if(2&n){const e=j(4);D(1),L("ngModel",e.editingCountValue)}}function GV(n,t){if(1&n){const e=tt();y(0,"button",118),B("click",function(){ee(e);const o=j().$implicit,i=j(3);return te(i.isViewingOther?null:i.startEditingCount(o))}),E(1),_()}if(2&n){const e=j().$implicit,r=j(3);L("disabled",r.isViewingOther),D(1),ke(" ",r.getOwnedCount(e)," ")}}function qV(n,t){if(1&n){const e=tt();y(0,"div",108)(1,"div",109)(2,"img",110),B("error",function(o){const s=ee(e).$implicit;return te(j(3).onImageError(o,s))})("click",function(){const i=ee(e).$implicit;return te(j(3).openCardModal(i))}),_()(),y(3,"div",111)(4,"div",112),E(5),_(),y(6,"div",113)(7,"button",114),B("click",function(){const i=ee(e).$implicit;return te(j(3).decreaseOwned(i))}),E(8," \u2212 "),_(),Q(9,zV,2,1,"ng-container",70),Q(10,GV,2,2,"ng-template",null,115,ah),y(12,"button",116),B("click",function(){const i=ee(e).$implicit;return te(j(3).increaseOwned(i))}),E(13," + "),_()()()()}if(2&n){const e=t.$implicit,r=Dl(11),o=j(3);nt("no-quantity",0===o.getOwnedCount(e)),Bt("data-cardid",o.getCardId(e)),D(1),nt("no-quantity",0===o.getOwnedCount(e)),D(1),nt("no-quantity",0===o.getOwnedCount(e)),L("src",o.getCardImageUrl(e.imageName),bs)("alt",e.label.eng+" Pokemon Card"),D(3),St(o.getCardDisplayName(e)),D(2),L("disabled",o.isViewingOther||0===o.getOwnedCount(e)),D(2),L("ngIf",o.editingCardId===o.getCardId(e))("ngIfElse",r),D(3),L("disabled",o.isViewingOther)}}function WV(n,t){if(1&n&&(y(0,"div",93)(1,"div",94)(2,"h3",95),E(3),_(),y(4,"div",96),Q(5,$V,2,1,"span",97),Q(6,UV,2,1,"span",98),Q(7,BV,2,1,"span",99),Q(8,HV,2,1,"span",100),y(9,"span",101),E(10),_()()(),y(11,"div",102),Q(12,qV,14,14,"div",103),_()()),2&n){const e=t.$implicit,r=j(2);Bt("id","set-"+e.groupTitle),D(3),St(r.getGroupDisplayName(e.groupTitle,e.cards)),D(2),L("ngIf",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle).endsWith("/0")),D(1),L("ngIf",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle).endsWith("/0")),D(1),L("ngIf",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle).endsWith("/0")),D(1),L("ngIf",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle).endsWith("/0")),D(2),ke("",r.getGroupCollectedCount(e.cards)," cards"),D(2),L("ngForOf",e.cards)("ngForTrackBy",r.trackByCardInGroup)}}function KV(n,t){if(1&n&&(y(0,"div",91),Q(1,WV,13,9,"div",92),_()),2&n){const e=j();D(1),L("ngForOf",e.getGroupedCards())("ngForTrackBy",e.trackByGroupTitle)}}function JV(n,t){if(1&n){const e=tt();y(0,"div",119)(1,"div",120),E(2,"\u{1f50d}"),_(),y(3,"h3"),E(4,"No cards found"),_(),y(5,"p"),E(6,"Try adjusting your search or filter criteria"),_(),y(7,"button",83),B("click",function(){return ee(e),te(j().clearFilters())}),E(8,"Clear All Filters"),_()()}}function QV(n,t){if(1&n){const e=tt();y(0,"div",121),B("click",function(){return ee(e),te(j().closeViewOthersModal())}),y(1,"div",122),B("click",function(o){return o.stopPropagation()}),y(2,"div",123)(3,"h3"),E(4,"View Others Collection"),_(),y(5,"button",124),B("click",function(){return ee(e),te(j().closeViewOthersModal())}),E(6,"\xd7"),_()(),y(7,"div",125)(8,"div",126)(9,"div",127)(10,"label",128),E(11,"Username:"),_(),y(12,"input",129),B("ngModelChange",function(o){return ee(e),te(j().otherUsername=o)})("keydown.enter",function(){return ee(e),te(j().viewOtherCollectionFromModal())}),_(),y(13,"span",130),E(14,"Enter the username of the collection you want to view"),_()()()(),y(15,"div",131)(16,"button",66),B("click",function(){return ee(e),te(j().closeViewOthersModal())}),E(17,"Cancel"),_(),y(18,"button",132),B("click",function(){return ee(e),te(j().viewOtherCollectionFromModal())}),E(19," \u{1f464} View Collection "),_()()()()}if(2&n){const e=j();D(12),L("ngModel",e.otherUsername),D(6),L("disabled",!e.otherUsername.trim())}}function YV(n,t){if(1&n&&(y(0,"span"),E(1),_()),2&n){const e=j(2);D(1),ke("All Sets Selected (",e.availableTradeSets.length,")")}}function ZV(n,t){1&n&&(y(0,"span"),E(1,"No Sets Selected"),_())}function XV(n,t){1&n&&(y(0,"span"),E(1,"1 Set Selected"),_())}function e$(n,t){if(1&n&&(y(0,"span"),E(1),_()),2&n){const e=j(2);D(1),ke("",e.selectedLFsets.length," Sets Selected")}}const KD=function(){return{background:"var(--header-gradient)",color:"#fff"}},JD=function(){return{background:"transparent",color:"var(--text)"}};function t$(n,t){if(1&n){const e=tt();y(0,"button",162),B("click",function(){const i=ee(e).$implicit;return te(j(3).toggleLFSet(i))}),y(1,"span",163),E(2),_(),y(3,"span"),E(4),_()()}if(2&n){const e=t.$implicit,r=j(3);L("ngStyle",r.isLFSetSelected(e)?vi(5,KD):vi(6,JD)),Bt("aria-selected",r.isLFSetSelected(e)),D(2),St(r.isLFSetSelected(e)?"\u2714":""),D(2),Co("",e," \u2013 ",r.getSetName(e),"")}}function n$(n,t){1&n&&(y(0,"div",164),E(1,"No sets available"),_())}function r$(n,t){if(1&n){const e=tt();y(0,"div",156)(1,"div",157)(2,"button",158),B("click",function(){return ee(e),te(j(2).clearLFsets())}),E(3,"Clear"),_(),y(4,"button",158),B("click",function(){return ee(e),te(j(2).selectAllLFsets())}),E(5,"All"),_()(),y(6,"div",159),Q(7,t$,5,7,"button",160),Q(8,n$,2,0,"div",161),_()()}if(2&n){const e=j(2);D(7),L("ngForOf",e.availableTradeSets),D(1),L("ngIf",0===e.availableTradeSets.length)}}function o$(n,t){if(1&n&&(y(0,"span"),E(1),_()),2&n){const e=j(2);D(1),ke("All Sets Selected (",e.availableTradeSets.length,")")}}function i$(n,t){1&n&&(y(0,"span"),E(1,"No Sets Selected"),_())}function s$(n,t){1&n&&(y(0,"span"),E(1,"1 Set Selected"),_())}function a$(n,t){if(1&n&&(y(0,"span"),E(1),_()),2&n){const e=j(2);D(1),ke("",e.selectedFTsets.length," Sets Selected")}}function l$(n,t){if(1&n){const e=tt();y(0,"button",162),B("click",function(){const i=ee(e).$implicit;return te(j(3).toggleFTSet(i))}),y(1,"span",163),E(2),_(),y(3,"span"),E(4),_()()}if(2&n){const e=t.$implicit,r=j(3);L("ngStyle",r.isFTSetSelected(e)?vi(5,KD):vi(6,JD)),Bt("aria-selected",r.isFTSetSelected(e)),D(2),St(r.isFTSetSelected(e)?"\u2714":""),D(2),Co("",e," \u2013 ",r.getSetName(e),"")}}function c$(n,t){1&n&&(y(0,"div",164),E(1,"No sets available"),_())}function u$(n,t){if(1&n){const e=tt();y(0,"div",156)(1,"div",157)(2,"button",158),B("click",function(){return ee(e),te(j(2).clearFTsets())}),E(3,"Clear"),_(),y(4,"button",158),B("click",function(){return ee(e),te(j(2).selectAllFTsets())}),E(5,"All"),_()(),y(6,"div",159),Q(7,l$,5,7,"button",160),Q(8,c$,2,0,"div",161),_()()}if(2&n){const e=j(2);D(7),L("ngForOf",e.availableTradeSets),D(1),L("ngIf",0===e.availableTradeSets.length)}}function d$(n,t){if(1&n){const e=tt();y(0,"button",68),B("click",function(){const i=ee(e).$implicit;return te(j(2).toggleTradeRarity(i.symbol))}),E(1),_()}if(2&n){const e=t.$implicit;nt("active",j(2).isTradeRaritySelected(e.symbol)),L("title",e.displayName),D(1),ke(" ",e.symbol," ")}}const QD=function(n,t){return{"fa-chevron-down":n,"fa-chevron-up":t}};function h$(n,t){if(1&n){const e=tt();y(0,"div",121),B("click",function(){return ee(e),te(j().closeTradeModal())}),y(1,"div",133),B("click",function(o){return o.stopPropagation()}),y(2,"div",123)(3,"h3"),E(4,"Copy For Trade"),_(),y(5,"button",124),B("click",function(){return ee(e),te(j().closeTradeModal())}),E(6,"\xd7"),_()(),y(7,"div",125)(8,"div",134)(9,"div",127)(10,"label",135)(11,"input",136),B("ngModelChange",function(o){return ee(e),te(j().excludeSpecialPacks=o)})("ngModelChange",function(){return ee(e),te(j().onExcludeSpecialPacksToggle())}),_(),E(12,' Exclude "PROMO" and "Deluxe packs" '),_()(),y(13,"div",127)(14,"label",137),E(15,"Include sets (Looking For):"),_(),y(16,"div",138)(17,"button",139),B("click",function(){ee(e);const o=j();return te(o.lfSetDropdownOpen=!o.lfSetDropdownOpen)}),Q(18,YV,2,1,"span",140),Q(19,ZV,2,0,"span",140),Q(20,XV,2,0,"span",140),Q(21,e$,2,1,"span",140),et(22,"i",141),_(),Q(23,r$,9,2,"div",142),_()(),y(24,"div",127)(25,"label",143),E(26,"Include sets (For Trade):"),_(),y(27,"div",144)(28,"button",139),B("click",function(){ee(e);const o=j();return te(o.ftSetDropdownOpen=!o.ftSetDropdownOpen)}),Q(29,o$,2,1,"span",140),Q(30,i$,2,0,"span",140),Q(31,s$,2,0,"span",140),Q(32,a$,2,1,"span",140),et(33,"i",141),_(),Q(34,u$,9,2,"div",142),_()(),y(35,"div",127)(36,"label",145),E(37,"Include rarities:"),_(),y(38,"div",146)(39,"button",147),B("click",function(){return ee(e),te(j().clearTradeRarities())}),E(40,"ALL"),_(),Q(41,d$,2,4,"button",25),_()(),y(42,"div",127)(43,"label",145),E(44,"Output format:"),_(),y(45,"div",148)(46,"button",149),B("click",function(){return ee(e),te(j().outputFormat="discord")}),E(47,"DISCORD"),_(),y(48,"button",149),B("click",function(){return ee(e),te(j().outputFormat="details")}),E(49,"DETAILS"),_()()(),y(50,"div",127)(51,"label",150),E(52,"Trade cards (quantity \u2265):"),_(),y(53,"input",151),B("ngModelChange",function(o){return ee(e),te(j().tradeQuantityMin=o)}),_()(),y(54,"div",127)(55,"label",152),E(56,"Friend Code:"),_(),y(57,"input",153),B("ngModelChange",function(o){return ee(e),te(j().tradeFriendCode=o)}),_()(),y(58,"div",127)(59,"label",154),E(60,"Template text:"),_(),y(61,"textarea",155),B("ngModelChange",function(o){return ee(e),te(j().tradeTemplateText=o)}),_()()()(),y(62,"div",131)(63,"button",66),B("click",function(){return ee(e),te(j().closeTradeModal())}),E(64,"Cancel"),_(),y(65,"button",83),B("click",function(){return ee(e),te(j().generateAndCopyTradeText())}),E(66,"\u{1f4cb} Copy Trade Text"),_()()()()}if(2&n){const e=j();D(11),L("ngModel",e.excludeSpecialPacks),D(7),L("ngIf",e.selectedLFsets.length===e.availableTradeSets.length),D(1),L("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&0===e.selectedLFsets.length),D(1),L("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&1===e.selectedLFsets.length),D(1),L("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&e.selectedLFsets.length>1),D(1),L("ngClass",Al(23,QD,!e.lfSetDropdownOpen,e.lfSetDropdownOpen)),D(1),L("ngIf",e.lfSetDropdownOpen),D(6),L("ngIf",e.selectedFTsets.length===e.availableTradeSets.length),D(1),L("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&0===e.selectedFTsets.length),D(1),L("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&1===e.selectedFTsets.length),D(1),L("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&e.selectedFTsets.length>1),D(1),L("ngClass",Al(26,QD,!e.ftSetDropdownOpen,e.ftSetDropdownOpen)),D(1),L("ngIf",e.ftSetDropdownOpen),D(5),nt("active",0===e.selectedTradeRarities.length),D(2),L("ngForOf",e.getAvailableTradeRaritySymbols()),D(5),nt("active","discord"===e.outputFormat),D(2),nt("active","details"===e.outputFormat),D(5),L("ngModel",e.tradeQuantityMin),D(4),L("ngModel",e.tradeFriendCode),D(4),L("ngModel",e.tradeTemplateText)}}function f$(n,t){if(1&n&&(y(0,"span",178),E(1),_()),2&n){const e=t.$implicit;D(1),St(e)}}function p$(n,t){if(1&n&&(y(0,"div",176),Q(1,f$,2,1,"span",177),_()),2&n){const e=j(2);D(1),L("ngForOf",e.selectedCardForModal.packs)}}function g$(n,t){if(1&n){const e=tt();y(0,"div",165),B("click",function(){return ee(e),te(j().closeCardModal())}),y(1,"div",166),B("click",function(o){return o.stopPropagation()}),y(2,"button",167),B("click",function(){return ee(e),te(j().closeCardModal())}),E(3,"\xd7"),_(),y(4,"div",168)(5,"button",169),B("click",function(o){return ee(e),te(j().showPrevCardInModal(o))}),et(6,"i",170),_(),et(7,"img",171),y(8,"button",172),B("click",function(o){return ee(e),te(j().showNextCardInModal(o))}),et(9,"i",173),_()(),y(10,"div",174)(11,"h3"),E(12),_(),Q(13,p$,2,1,"div",175),_()()()}if(2&n){const e=j();D(7),L("src",e.getCardImageUrl(e.selectedCardForModal.imageName),bs)("alt",e.getCardDisplayName(e.selectedCardForModal)),D(5),St(e.getCardDisplayName(e.selectedCardForModal)),D(1),L("ngIf",e.selectedCardForModal.packs&&e.selectedCardForModal.packs.length>0)}}let m$=(()=>{const t=class{constructor(r,o,i,s,a,l,c,u){this.pokemonDataService=r,this.dataManager=o,this.imageService=i,this.supabaseService=s,this.router=a,this.route=l,this.cdr=c,this.rarityService=u,this.touchStartX=null,this.touchEndX=null,this.handleModalTouchStart=d=>{1===d.touches.length&&(this.touchStartX=d.touches[0].clientX)},this.handleModalTouchEnd=d=>{if(null===this.touchStartX)return;this.touchEndX=d.changedTouches[0].clientX;const h=this.touchEndX-this.touchStartX;Math.abs(h)>50&&(h<0?this.showNextCardInModal():this.showPrevCardInModal()),this.touchStartX=null,this.touchEndX=null},this.cards=[],this.filteredCards=[],this.sets=[],this.rarityMapping={},this.ownedCards={},this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.groupBy="none",this.availableSets=[],this.availableSeries=[],this.availableRarities=[],this.availableRaritySymbols=[],this.availableTypes=[],this.availablePacks=[],this.loading=!0,this.loadingOwnedCards=!1,this.syncingCards=!1,this.syncProgress=0,this.syncMessage="",this.error=null,this.viewMode="grid",this.editingCardId=null,this.editingCountValue=0,this.lastFlatOrder=[],this.selectedCardForModal=null,this.isViewingOther=!1,this.otherUsername="",this.viewingUser=null,this.totalCards=0,this.ownedCount=0,this.uniqueOwned=0,this.completionPercentage=0,this.currentUser=null,this.filtersOpen=!1,this.showTradeModal=!1,this.selectedTradeRarities=[],this.availableTradeSets=[],this.selectedLFsets=[],this.selectedFTsets=[],this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.tradeQuantityMin=2,this.tradeFriendCode="",this.tradeTemplateText="Please ping me if there is any possible trades. \nENGLISH cards only please.",this.excludedTradeSymbols=new Set(["\u2606\u2606\u2606","\u{1f451}"]),this.excludeSpecialPacks=!0,this.outputFormat="discord",this.showViewOthersModal=!1,this.handleModalKeydown=d=>{"Escape"===d.key&&this.selectedCardForModal&&this.closeCardModal()},this.trackByCardId=(d,h)=>this.getCardId(h),this.trackByGroupTitle=(d,h)=>h.groupTitle,this.trackByCardInGroup=(d,h)=>this.getCardId(h)}getOwnedRarityCount(r,o,i){if(!r)return"0/0";const a=i.split(" - ")[0].trim().toUpperCase(),l={"\u25ca":["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca"],"\u2606":["\u2606","\u2606\u2606","\u2606\u2606\u2606"],"\u2735":["\u2735","\u2735\u2735"]}[o]||[o],c=r.filter(d=>{if(!d)return!1;const h=l.includes(d.rarity),f="all"===i||d.set&&d.set.toUpperCase()===a;return h&&f});return`${c.filter(d=>this.getOwnedCount(d)>0).length}/${c.length}`}openCardModal(r){this.selectedCardForModal=r,document.body.style.overflow="hidden",document.addEventListener("keydown",this.handleModalKeydown),setTimeout(()=>{const o=document.querySelector(".modal-content.card-modal");o&&(o.addEventListener("touchstart",i=>this.handleModalTouchStart(i),{passive:!0}),o.addEventListener("touchend",i=>this.handleModalTouchEnd(i),{passive:!0}))},0)}closeCardModal(){this.selectedCardForModal=null,document.body.style.overflow="auto",document.removeEventListener("keydown",this.handleModalKeydown);const r=document.querySelector(".modal-content.card-modal");if(r){const o=r.cloneNode(!0);r.parentNode?.replaceChild(o,r)}}showPrevCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s>0?o[s-1]:o[o.length-1],this.cdr.markForCheck()}showNextCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s<o.length-1?o[s+1]:o[0],this.cdr.markForCheck()}getAllModalCards(){const r=this.getGroupedCards();return Array.isArray(r)?r.flatMap(o=>o.cards):[]}ngOnInit(){if(this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser){try{typeof window<"u"&&window?.innerWidth<=768&&(this.filtersOpen=!1)}catch{}this.loadAllData()}else this.router.navigate(["/signin"])}loadAllData(){this.loading=!0,this.error=null,this.pokemonDataService.loadAllData().subscribe({next:r=>{this.cards=r.cards,this.filteredCards=[...this.cards],this.sets=r.sets,this.rarityMapping=r.rarities,this.extractFilterOptions(),this.calculateStatistics(),this.loading=!1,this.cdr.detectChanges(),this.applyQueryParamsIfAny().then(()=>{this.isViewingOther||this.loadOwnedCards()})},error:r=>{this.error="Failed to load card collection",this.loading=!1,this.cdr.detectChanges(),console.error("Error loading card collection:",r)}})}applyQueryParamsIfAny(){var r=this;return v(function*(){const o=r.route.snapshot.queryParams||{},i=o.series,s=o.set,a=o.pack,l=o.rarity,c=o.otherUser;let u=!1;"string"==typeof i&&i.trim()&&(r.selectedSeries=i,u=!0),r.extractAvailableSets(),"string"==typeof s&&s.trim()&&(r.selectedSet=s,u=!0),r.extractAvailablePacks(),"string"==typeof a&&a.trim()&&(r.selectedPack=a,u=!0),"string"==typeof l&&l.trim()&&(r.selectedRarities=[l],u=!0),u&&(r.applyFilters(),r.cdr.detectChanges()),"string"==typeof c&&c.trim()&&(r.otherUsername=c.trim(),yield r.viewOtherCollection())})()}extractFilterOptions(){this.availableSeries=[...new Set(this.cards.map(l=>l.series).filter(l=>!!l))];const r=[...new Set(this.cards.map(l=>l.rarity).filter(l=>l))],o=this.createRaritySymbolToCodeMap();this.availableRarities=r.map(l=>o.get(l)||l),this.availableRaritySymbols=[];const i=new Set;this.cards.forEach(l=>{if(l.rarity){const c=o.get(l.rarity);if(c){const u=this.rarityService.getNormalizedCode(c);i.add(u)}}});const s=new Map;this.rarityService.getUnifiedRarities().forEach(l=>{i.has(l.code)&&s.set(l.symbol,{symbol:l.symbol,rarities:[l.code],displayName:l.displayName})}),this.availableRaritySymbols=Array.from(s.values()).sort((l,c)=>this.rarityService.getRarityOrder(l.rarities[0])-this.rarityService.getRarityOrder(c.rarities[0])),this.extractAvailablePacks(),this.extractAvailableTypes(),this.extractAvailableSets()}extractAvailableSets(){this.availableSets="all"===this.selectedSeries?[...new Set(this.cards.map(r=>r.set))]:[...new Set(this.cards.filter(r=>r.series===this.selectedSeries).map(r=>r.set))]}createRaritySymbolToCodeMap(){const r=new Map,o=this.rarityService.getUnifiedRarities();for(const i of o)r.set(i.symbol,i.code);return r}getCardRarityCode(r){return this.createRaritySymbolToCodeMap().get(r.rarity)||r.rarity}convertRarityNameToCode(r){return{Common:"C",Uncommon:"U",Rare:"R","Double Rare":"RR","Art Rare":"AR","Super Rare":"SR","Special Art Rare":"SAR","Immersive Rare":"IM","Crown Rare":"UR",Shiny:"S","Shiny Super Rare":"SSR"}[r]||r}extractAvailablePacks(){let r=this.cards;"all"!==this.selectedSeries&&(r=r.filter(i=>i.series===this.selectedSeries)),"all"!==this.selectedSet&&(r=r.filter(i=>i.set===this.selectedSet));const o=r.flatMap(i=>Array.isArray(i.packs)?i.packs:[]).filter(i=>"string"==typeof i&&i.trim());this.availablePacks=[...new Set(o)],"all"!==this.selectedPack&&!this.availablePacks.includes(this.selectedPack)&&(this.selectedPack="all")}extractAvailableTypes(){const r=this.cards.flatMap(i=>Array.isArray(i.types)?i.types:[]).filter(i=>"string"==typeof i&&i.trim()),o=["Item","Tool","Supporter"];this.availableTypes=[...new Set(r)].sort((i,s)=>{const a=o.includes(i),l=o.includes(s);return a&&!l?1:!a&&l?-1:i.localeCompare(s)})}applyFilters(){this.filteredCards=this.cards.filter(i=>{if("all"!==this.selectedSet&&i.set!==this.selectedSet||"all"!==this.selectedSeries&&i.series!==this.selectedSeries)return!1;if(this.selectedRarities.length>0){const s=this.getCardRarityCode(i),a=s?this.rarityService.getSymbol(s):"";if(!a||!this.selectedRarities.includes(a))return!1}return!(this.selectedTypes.length>0&&!(Array.isArray(i.types)?i.types:[]).some(l=>this.selectedTypes.includes(l))||"all"!==this.selectedSet&&"all"!==this.selectedPack&&!(Array.isArray(i.packs)?i.packs:[]).includes(this.selectedPack)||this.searchTerm&&!i.label.eng.toLowerCase().includes(this.searchTerm.toLowerCase())||"missing"===this.ownershipFilter&&this.getOwnedCount(i)>0||"owned"===this.ownershipFilter&&0===this.getOwnedCount(i))});const r=i=>this.isSpecialSet(i),o=(i,s)=>{const a=/^([A-Z]+)(\d+)([a-z]*)$/,l=(i||"").match(a),c=(s||"").match(a);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return(i||"").localeCompare(s||"")};this.filteredCards.sort("oldest"===this.sortBy?(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(i.set,s.set);return 0!==c?c:i.number-s.number}:(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(s.set,i.set);return 0!==c?c:s.number-i.number})}onFilterChange(){this.extractAvailablePacks(),this.applyFilters()}onSetChange(){this.extractAvailablePacks(),"all"===this.selectedSet&&(this.selectedPack="all",this.groupBy="none"),this.applyFilters()}onSeriesChange(){this.extractAvailableSets(),this.selectedSet="all",this.selectedPack="all",this.groupBy="none",this.extractAvailablePacks(),this.applyFilters()}onSearchChange(){this.applyFilters()}onGroupByChange(){this.applyFilters()}clearFilters(){this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.groupBy="none",this.extractAvailableSets(),this.extractAvailablePacks(),this.applyFilters()}toggleFilters(){this.filtersOpen=!this.filtersOpen,this.cdr.detectChanges(),this.filtersOpen&&setTimeout(()=>{const r=document.querySelector(".filters-panel");if(r){const o=r.getBoundingClientRect().top+window.scrollY-8;window.scrollTo({top:o,behavior:"smooth"})}})}isSpecialSet(r){const o=(r||"").toUpperCase();return o.startsWith("P-")||o.endsWith("-P")||"P-A"===o||o.startsWith("PROMO")||o.startsWith("A4B")}openTradeModal(){this.isViewingOther||(this.tradeFriendCode=this.currentUser?.friend_code||"",this.selectedTradeRarities=this.selectedTradeRarities.filter(r=>!this.isTradeRarityDisabled(r)),this.refreshAvailableTradeSets(),this.selectedLFsets=this.selectedLFsets&&0!==this.selectedLFsets.length&&this.selectedLFsets.length===this.availableTradeSets.length?this.selectedLFsets.filter(r=>this.availableTradeSets.includes(r)):[...this.availableTradeSets],this.selectedFTsets=this.selectedFTsets&&0!==this.selectedFTsets.length&&this.selectedFTsets.length===this.availableTradeSets.length?this.selectedFTsets.filter(r=>this.availableTradeSets.includes(r)):[...this.availableTradeSets],this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.showTradeModal=!0,this.cdr.detectChanges())}closeTradeModal(){this.showTradeModal=!1,this.cdr.detectChanges()}isTradeRaritySelected(r){return this.selectedTradeRarities.includes(r)}toggleTradeRarity(r){if(this.isTradeRarityDisabled(r))return;const o=this.selectedTradeRarities.indexOf(r);o>=0?this.selectedTradeRarities.splice(o,1):this.selectedTradeRarities.push(r),this.cdr.detectChanges()}isTradeRarityDisabled(r){return this.excludedTradeSymbols.has(r)}getAvailableTradeRaritySymbols(){return(this.availableRaritySymbols||[]).filter(r=>!this.excludedTradeSymbols.has(r.symbol))}clearTradeRarities(){this.selectedTradeRarities=[],this.cdr.detectChanges()}refreshAvailableTradeSets(){const o=(this.sets||[]).map(s=>s.code).filter(s=>!(!s||this.excludeSpecialPacks&&this.isSpecialSet(s))),i=/^([A-Z]+)(\d+)([a-z]*)$/;o.sort((s,a)=>{const l=s.match(i),c=a.match(i);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return s.localeCompare(a)}),this.availableTradeSets=o}onExcludeSpecialPacksToggle(){this.refreshAvailableTradeSets();const r=this.selectedLFsets&&this.selectedLFsets.length===this.availableTradeSets.length,o=this.selectedFTsets&&this.selectedFTsets.length===this.availableTradeSets.length;this.selectedLFsets=(this.selectedLFsets||[]).filter(i=>this.availableTradeSets.includes(i)),this.selectedFTsets=(this.selectedFTsets||[]).filter(i=>this.availableTradeSets.includes(i)),r&&(this.selectedLFsets=[...this.availableTradeSets]),o&&(this.selectedFTsets=[...this.availableTradeSets]),this.cdr.detectChanges()}isLFSetSelected(r){return this.selectedLFsets.includes(r)}toggleLFSet(r){const o=this.selectedLFsets.indexOf(r);o>=0?this.selectedLFsets.splice(o,1):this.selectedLFsets.push(r),this.cdr.detectChanges()}clearLFsets(){this.selectedLFsets=[],this.cdr.detectChanges()}selectAllLFsets(){this.selectedLFsets=[...this.availableTradeSets],this.cdr.detectChanges()}isFTSetSelected(r){return this.selectedFTsets.includes(r)}toggleFTSet(r){const o=this.selectedFTsets.indexOf(r);o>=0?this.selectedFTsets.splice(o,1):this.selectedFTsets.push(r),this.cdr.detectChanges()}clearFTsets(){this.selectedFTsets=[],this.cdr.detectChanges()}selectAllFTsets(){this.selectedFTsets=[...this.availableTradeSets],this.cdr.detectChanges()}openViewOthersModal(){this.isViewingOther||(this.showViewOthersModal=!0,this.cdr.detectChanges())}closeViewOthersModal(){this.showViewOthersModal=!1,this.cdr.detectChanges()}viewOtherCollectionFromModal(){var r=this;return v(function*(){r.openOtherCollectionInNewTab(),r.closeViewOthersModal()})()}openOtherCollectionInNewTab(){const r=(this.otherUsername||"").trim();if(!r)return void alert("Please enter a username");const o=this.router.createUrlTree(["/collection"],{queryParams:{otherUser:r}}),i=this.router.serializeUrl(o),a=(document.querySelector("base")?.getAttribute("href")||"/").trim();let l;/^https?:\/\//i.test(a),l=a.replace(/\/$/,"")+i,window.open(l,"_blank","noopener")}onDocumentClickCloseTradeDropdowns(r){if(!this.showTradeModal)return;const o=r.target,i=document.getElementById("lf-set-multiselect"),s=document.getElementById("ft-set-multiselect"),a=!!(i&&o&&i.contains(o)),l=!!(s&&o&&s.contains(o));!a&&this.lfSetDropdownOpen&&(this.lfSetDropdownOpen=!1,this.cdr.detectChanges()),!l&&this.ftSetDropdownOpen&&(this.ftSetDropdownOpen=!1,this.cdr.detectChanges())}generateAndCopyTradeText(){var r=this;return v(function*(){try{const o=r.generateTradeText();yield navigator.clipboard.writeText(o)}catch(o){console.error("Failed to copy to clipboard:",o),alert("Failed to copy to clipboard. Please try again.")}})()}generateTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],s=this.cards.filter(g=>{if(this.excludeSpecialPacks&&this.isSpecialSet(g.set))return!1;const C=this.getCardRarityCode(g),x=C?this.rarityService.getSymbol(C):"";return!(x&&!o.includes(x)||this.selectedLFsets.length>0&&!this.selectedLFsets.includes(g.set))&&0===this.getOwnedCount(g)}).reduce((g,C)=>((g[C.set]||=[]).push(C),g),{});let a="";if("details"===this.outputFormat)return this.generateDetailsTradeText();const l=g=>{const C=g.map(x=>x.label?.eng||"");return 0===C.length?"":1===C.length?C[0]:2===C.length?`${C[0]} & ${C[1]}`:C.join(", ")};a+="LF:\n";const c=Object.entries(s).filter(([,g])=>g.length>0).sort((g,C)=>this.compareSetCodesAsc(g[0],C[0]));for(const[g,C]of c){const x=this.getSetShortName(g);C.sort((A,R)=>A.number-R.number||A.label.eng.localeCompare(R.label.eng));const b=l(C);b&&(a+=`[${x}] ${b}\n`)}a+="\nFT:\n";const d=this.cards.filter(g=>{if(this.excludeSpecialPacks&&this.isSpecialSet(g.set))return!1;const C=this.getCardRarityCode(g),x=C?this.rarityService.getSymbol(C):"";return!(x&&!o.includes(x)||x&&this.excludedTradeSymbols.has(x)||this.selectedFTsets.length>0&&!this.selectedFTsets.includes(g.set))&&this.getOwnedCount(g)>=this.tradeQuantityMin}).reduce((g,C)=>((g[C.set]||=[]).push(C),g),{}),h=Object.entries(d).filter(([,g])=>g.length>0).sort((g,C)=>this.compareSetCodesAsc(g[0],C[0]));for(const[g,C]of h){const x=this.getSetShortName(g);C.sort((A,R)=>A.number-R.number||A.label.eng.localeCompare(R.label.eng));const b=l(C);b&&(a+=`[${x}] ${b}\n`)}const f=(this.tradeTemplateText||"").trim(),p=(this.tradeFriendCode||"").trim(),m=(this.currentUser?.username||"").trim();return a+="\n=============================================================================",f&&(a+=`\n${f}\n`),(p||m)&&(m&&(a+=`\nIGN: ${m}`),p&&(a+=`\nFriend code: ${p}`)),a.trim()}compareSetCodesAsc(r,o){const i=/^([A-Z]+)(\d+)([a-z]*)$/,s=(r||"").match(i),a=(o||"").match(i);if(s&&a){if(s[1]!==a[1])return s[1].localeCompare(a[1]);const l=parseInt(s[2],10),c=parseInt(a[2],10);return l!==c?l-c:(s[3]||"").localeCompare(a[3]||"")}return(r||"").localeCompare(o||"")}generateDetailsTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],i=this.cards.filter(d=>{if(this.excludeSpecialPacks&&this.isSpecialSet(d.set)||this.selectedLFsets.length>0&&!this.selectedLFsets.includes(d.set))return!1;const h=this.getCardRarityCode(d),f=h?this.rarityService.getSymbol(h):"";return!(f&&!o.includes(f))&&0===this.getOwnedCount(d)}),s={};for(const d of i){const h=d.set,f=this.getCardRarityCode(d),p=f?this.rarityService.getSymbol(f):"Unknown";s[h]||(s[h]={}),s[h][p]||(s[h][p]=[]),s[h][p].push(d)}const a=d=>{const f=["\u25ca\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca","\u25ca","\u2606\u2606","\u2606","\u2735\u2735","\u2735"].indexOf(d);return f>=0?f:999},l=[],c=Object.keys(s).sort((d,h)=>this.compareSetCodesAsc(d,h)),u=(d,h)=>`${(d||h).toLowerCase().replace(/\s+/g,"")}(${h.toLowerCase()}):`;for(const d of c){const h=this.getSetShortName(d),f=s[d],p=Object.keys(f).sort((m,g)=>a(m)-a(g));for(const m of p){const g=u(h,d);l.push(g);const C=f[m].sort((x,b)=>x.number-b.number||x.label.eng.localeCompare(b.label.eng));for(const x of C)l.push(`${m} ${x.set}-${x.number} - ${x.label.eng}`);l.push("")}}return l.join("\n").trim()}loadOwnedCards(){var r=this;return v(function*(){r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}loadOwnedCardsForUser(r,o){var i=this;return v(function*(){i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage=o?`Loading ${o}'s collection...`:"Starting sync...",i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage="Starting sync...";try{const s=yield i.supabaseService.syncUserCollection(r,a=>{i.syncProgress=a,i.syncMessage=`Syncing cards... ${a} loaded`,i.cdr.detectChanges()});i.ownedCards=s,i.calculateStatistics(),i.syncMessage=`Sync completed! ${Object.keys(s).length} cards loaded`,i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},1500)}catch(s){console.error("Error loading owned cards:",s),i.syncMessage="Sync failed, using local data...";const a=localStorage.getItem("ownedPokemonCards");a&&(i.ownedCards=JSON.parse(a),i.calculateStatistics()),i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},2e3)}finally{i.loadingOwnedCards=!1}})()}saveOwnedCards(){var r=this;return v(function*(){localStorage.setItem("ownedPokemonCards",JSON.stringify(r.ownedCards)),r.calculateStatistics()})()}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}increaseOwned(r){var o=this;return v(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r),a=s+1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}decreaseOwned(r){var o=this;return v(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r);if(0===s)return;const a=s-1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}startEditingCount(r){this.isViewingOther||(this.editingCardId=this.getCardId(r),this.editingCountValue=this.getOwnedCount(r),this.cdr.detectChanges(),this.focusEditingInput())}cancelEditingCount(){this.editingCardId=null,this.editingCountValue=0,this.cdr.detectChanges()}commitCount(r){var o=this;return v(function*(){if(o.isViewingOther)return void o.cancelEditingCount();if(!o.currentUser)return;const i=o.getCardId(r);if(o.editingCardId!==i)return;const s=Math.max(0,Math.floor(Number(o.editingCountValue)||0)),a=o.getOwnedCount(r);s!==a?(o.updateLocalQuantity(i,s),yield o.persistQuantity(i,s,a),o.cancelEditingCount()):o.cancelEditingCount()})()}onCountInputKeydown(r,o){if("Tab"!==r.key)return;r.preventDefault();const i=this.getFlatOrderedCards(),s=this.getCardId(o),a=i.findIndex(c=>this.getCardId(c)===s);if(-1===a)return;const l=r.shiftKey?a-1:a+1;this.commitCount(o).then(()=>{const c=i[l];c&&this.startEditingCount(c)})}focusEditingInput(){const r=this.editingCardId;r&&setTimeout(()=>{const o=document.querySelector(`.card-item[data-cardid="${r}"] .count-input`);o&&(o.focus(),o.select())})}getFlatOrderedCards(){const r=this.getGroupedCards();return this.lastFlatOrder=r.flatMap(o=>o.cards),this.lastFlatOrder}updateLocalQuantity(r,o){o<=0?delete this.ownedCards[r]:this.ownedCards[r]=o,this.saveOwnedCards(),this.cdr.detectChanges()}persistQuantity(r,o,i){var s=this;return v(function*(){if(s.currentUser)try{yield s.supabaseService.updateCardQuantity(s.currentUser.id,r,o)}catch(a){console.error("Error updating card quantity in database:",a),i<=0?delete s.ownedCards[r]:s.ownedCards[r]=i,s.saveOwnedCards(),s.cdr.detectChanges()}})()}calculateStatistics(){this.totalCards=this.cards.length,this.ownedCount=Object.values(this.ownedCards).reduce((r,o)=>r+o,0),this.uniqueOwned=Object.keys(this.ownedCards).length,this.completionPercentage=this.totalCards>0?Math.round(this.uniqueOwned/this.totalCards*100):0}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.name:r}getSetShortName(r){const o=this.sets.find(i=>i.code===r);return o?o.shortName:r}getFullRarityName(r){return this.rarityService.getStandardizedDisplayName(r)}getRarityClass(r){return{Common:"rarity-common",Uncommon:"rarity-uncommon",Rare:"rarity-rare","Double Rare":"rarity-double-rare","Art Rare":"rarity-art-rare","Super Rare":"rarity-super-rare","Special Art Rare":"rarity-special-art-rare","Immersive Rare":"rarity-immersive-rare","Crown Rare":"rarity-crown-rare",Shiny:"rarity-shiny","Shiny Super Rare":"rarity-shiny-super-rare"}[r]||"rarity-default"}toggleViewMode(){this.viewMode="grid"===this.viewMode?"list":"grid"}exportCollection(){if(this.isViewingOther)return void alert("Export is disabled when viewing another user's collection");let r="\ufeff";r+="Id,CardName,NumberOwn,Expansion,Pack,Rarity\n",this.cards.forEach(s=>{const a=this.getCardId(s),l=this.getOwnedCount(s),c=this.getCardRarityCode(s),u=c?this.rarityService.getSymbol(c):"Unknown",d=s.packs&&s.packs.length>0?s.packs[0]:"",h=s.label.eng.replace(/,/g,'""');r+=`${a},"${h}",${l},${s.set},"${d}",${u}\n`});const o=new Blob([r],{type:"text/csv;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="pokemon-tcg-collection.csv",i.click()}importCollection(r){var o=this;if(this.isViewingOther)return void alert("Import is disabled when viewing another user's collection");const i=r.target.files[0];if(i){const s=new FileReader;s.onload=function(){var a=v(function*(l){try{const d=(l.target?.result||"").split(/\r?\n/).filter(R=>R.trim().length>0);if(0===d.length)return void alert("CSV file appears to be empty.");const h=new Map;o.cards.forEach(R=>{const W=o.getCardId(R);h.set(o.normalizeId(W),W)});const f=o.parseCSVLine(d[0]),p=/(id|card|name|expansion|set|rarity|qty|quantity|owned|count|number|no)/i,m=f.some(R=>p.test(R)),g=m?1:0,C=m?o.buildHeaderMap(f):null;let x=0,b=0,A=0;for(let R=g;R<d.length;R++){const W=d[R];try{const Zt=o.parseCSVLine(W),{cardId:Ae,quantity:ht}=o.resolveCsvRow(Zt,C);if(!Ae){b++;continue}const Yn=Math.max(0,Math.floor(Number(ht))||0),Cn=h.get(o.normalizeId(Ae))||null;Cn?(Yn>0?o.ownedCards[Cn]=Yn:delete o.ownedCards[Cn],x++):(console.log(Ae),A++)}catch(Zt){console.error(`Error parsing line: ${W}`,Zt),b++}}if(o.saveOwnedCards(),o.currentUser)try{const R=yield o.supabaseService.bulkReplaceUserCollection(o.currentUser.id,o.ownedCards);if(R.success){let W=`Import completed!\n${x} cards updated`;W+="\nCollection synced to database successfully",A>0&&(W+=`\n${A} rows referenced unknown cards (skipped)`),b>0&&(W+=`\n${b} parse errors encountered`),yield o.loadOwnedCards(),alert(W)}else{console.error("\u274c Failed to sync collection to database:",R.error);let W=`Import completed!\n${x} cards updated locally`;W+=`\nDatabase sync failed: ${R.error}`,A>0&&(W+=`\n${A} unknown cards (skipped)`),b>0&&(W+=`\n${b} parse errors encountered`),alert(W)}}catch(R){console.error("\u274c Error during bulk sync:",R);let W=`Import completed!\n${x} cards updated locally`;W+="\nDatabase sync failed - please try again",A>0&&(W+=`\n${A} unknown cards (skipped)`),b>0&&(W+=`\n${b} parse errors encountered`),alert(W)}else{let R=`Import completed!\n${x} cards updated`;A>0&&(R+=`\n${A} unknown cards (skipped)`),b>0&&(R+=`\n${b} parse errors encountered`),alert(R)}}catch(c){console.error("Failed to import collection:",c),alert("Failed to import collection. Please check the CSV file format.")}});return function(l){return a.apply(this,arguments)}}(),s.readAsText(i)}}viewOtherCollection(){var r=this;return v(function*(){const o=(r.otherUsername||"").trim();if(!o)return void alert("Please enter a username");if(r.currentUser&&o===r.currentUser.username)return void r.backToMyCollection();const i=yield r.supabaseService.getProfileByUsername(o);i?(r.isViewingOther=!0,r.viewingUser=i,yield r.loadOwnedCardsForUser(i.id,i.username)):alert(`User '${o}' not found`)})()}backToMyCollection(){var r=this;return v(function*(){r.isViewingOther=!1,r.viewingUser=null,r.otherUsername="",r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}buildHeaderMap(r){const o={};return r.forEach((i,s)=>{const a=i.trim().toLowerCase();o[a]=s}),o}resolveCsvRow(r,o){const i=c=>{if(o)for(const u of c){const d=o[u];if(void 0!==d&&d>=0&&d<r.length){const h=(r[d]||"").trim();if(h)return h}}},s=i(["numberown","quantity","qty","owned","count","number own","number_owned"]);let a=0;void 0!==s?a=Math.max(0,Math.floor(Number(s)||0)):r.length>=3&&(a=Math.max(0,Math.floor(Number(r[2])||0)));let l=i(["id","cardid","card id"]);if(!l){let c=i(["set","expansion"]),u=i(["number","no","card number","card no","card#"]);if(!c&&r.length>=4&&(c=(r[3]||"").trim()),!u&&r.length>=1){const d=(r[1]||"").trim();/^\d+/.test(d)&&(u=d)}if(c&&u){const d=this.mapToSetCode(c),h=this.extractLeadingInt(u);d&&null!==h&&(l=`${d}-${h}`)}}if(!l&&r.length>0){const c=(r[0]||"").trim();c&&(l=c)}return{cardId:l||null,quantity:a}}extractLeadingInt(r){const o=(r||"").match(/\d+/);return o?parseInt(o[0],10):null}mapToSetCode(r){const i=(r||"").trim().toUpperCase();if("PROMO-A"===i)return"P-A";const s=this.sets.find(l=>(l.code||"").toUpperCase()===i);if(s)return s.code;const a=this.sets.find(l=>(l.name||"").toUpperCase()===i);return a?a.code:null}normalizeId(r){let o=(r||"").trim().toUpperCase();return o=o.replace(/^PROMO-A(?=-)/,"P-A"),o}parseCSVLine(r){const o=[];let i="",s=!1;for(let a=0;a<r.length;a++){const l=r[a];'"'===l?s=!s:","!==l||s?i+=l:(o.push(i),i="")}return o.push(i),o}getCardImageUrl(r){return this.imageService.getCardImageUrl(r)}getCardDisplayName(r){return`${r.set}-${r.number} \u2013 ${r.label.eng}`}onImageError(r,o){console.error("\u274c Image failed to load:",o.imageName),r.target.src=this.imageService.getPlaceholderImageUrl()}getGroupedCards(){if("all"!==this.selectedSet&&"none"!==this.groupBy)return this.getGroupedCardsByCategory();const r={};this.filteredCards.forEach(a=>{const l=a.set;r[l]||(r[l]=[]),r[l].push(a)});const o=(a,l)=>{const c=a.match(/^([A-Z]+)(\d+)([a-z]*)$/),u=l.match(/^([A-Z]+)(\d+)([a-z]*)$/);if(c&&u){if(c[1]!==u[1])return c[1].localeCompare(u[1]);const d=parseInt(c[2],10),h=parseInt(u[2],10);return d!==h?d-h:(c[3]||"").localeCompare(u[3]||"")}return a.localeCompare(l)},s=(a,l)=>a.number!==l.number?a.number-l.number:a.label.eng.localeCompare(l.label.eng);return Object.keys(r).sort((a,l)=>{const c=h=>this.isSpecialSet(h),u=c(a),d=c(l);return u&&!d?1:!u&&d?-1:"latest"===this.sortBy?o(l,a):o(a,l)}).map(a=>({groupTitle:a,cards:r[a].sort(s)}))}getGroupedCardsByCategory(){const r={};this.filteredCards.forEach(s=>{let a;switch(this.groupBy){case"rarity":const l=this.getCardRarityCode(s);a=`${l?this.rarityService.getSymbol(l):"Unknown"} ${l?this.rarityService.getDisplayName(l):"Unknown"}`;break;case"pack":a=s.packs&&s.packs.length>0?s.packs[0]:"No Pack";break;case"type":a=s.types&&s.types.length>0?s.types[0]:"No Type";break;default:a="All Cards"}r[a]||(r[a]=[]),r[a].push(s)});const o=Object.keys(r).sort((s,a)=>{if("rarity"===this.groupBy){const l=c=>{const u=c.split(" ")[0];return this.rarityService.getRarityOrder(u)||999};return l(s)-l(a)}return s.localeCompare(a)}),i=(s,a)=>s.number!==a.number?s.number-a.number:s.label.eng.localeCompare(a.label.eng);return o.map(s=>({groupTitle:s,cards:r[s].sort(i)}))}getGroupDisplayName(r,o){const i=this.getSetName(r);return i&&i!==r?`${r} - ${i}`:`Set ${r}`}getGroupCollectedCount(r){return`${r.filter(s=>this.getOwnedCount(s)>0).length}/${r.length}`}setOwnership(r){this.ownershipFilter!==r&&(this.ownershipFilter=r,this.applyFilters(),this.cdr.detectChanges())}isRaritySelected(r){return this.selectedRarities.includes(r)}toggleRarity(r){const o=this.selectedRarities.indexOf(r);o>=0?this.selectedRarities.splice(o,1):this.selectedRarities.push(r),this.applyFilters(),this.cdr.detectChanges()}clearRarity(){this.selectedRarities.length>0&&(this.selectedRarities=[],this.applyFilters(),this.cdr.detectChanges())}isTypeSelected(r){return this.selectedTypes.includes(r)}toggleType(r){const o=this.selectedTypes.indexOf(r);o>=0?this.selectedTypes.splice(o,1):this.selectedTypes.push(r),this.applyFilters(),this.cdr.detectChanges()}clearTypes(){this.selectedTypes.length>0&&(this.selectedTypes=[],this.applyFilters(),this.cdr.detectChanges())}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){const r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);window.scrollTo({top:r,behavior:"smooth"})}getSetElements(){return Array.from(document.querySelectorAll(".cards-container .card-group"))}getCurrentSetIndex(r=80){const o=window.scrollY||window.pageYOffset||0,i=this.getSetElements();let s=-1;for(let a=0;a<i.length&&i[a].getBoundingClientRect().top+window.scrollY-r<=o;a++)s=a;return s}scrollToNextSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),i=Math.min(o+1,r.length-1);if(i>=0){const a=r[i].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}}scrollToPrevSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),a=r[Math.max(o-1,0)].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}ngOnDestroy(){this.selectedCardForModal&&(document.removeEventListener("keydown",this.handleModalKeydown),document.body.style.overflow="auto")}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(cp),P(uD),P(aL),P(Sa),P(xt),P(to),P(wi),P(SV))},t.\u0275cmp=co({type:t,selectors:[["app-card-collection"]],hostBindings:function(o,i){1&o&&B("click",function(a){return i.onDocumentClickCloseTradeDropdowns(a)},0,ry)},decls:96,vars:42,consts:[[1,"collection-container"],[1,"collection-actions"],[1,"actions-left"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","import-btn"],["type","file","accept",".csv","hidden","",3,"change"],[1,"btn","btn-secondary",3,"disabled","click"],["class","view-other-banner","style","margin-bottom:12px; padding:10px 14px; border-radius:12px; background:rgba(46,204,113,0.12); border:1px solid rgba(46,204,113,0.35); display:flex; align-items:center; justify-content:space-between; gap:12px;",4,"ngIf"],["role","region","aria-label","Collection filters",1,"filters-panel"],[1,"filters-row"],["type","text","placeholder","Search cards\u2026","aria-label","Search cards",1,"filter-input",3,"ngModel","ngModelChange","input"],[1,"filters-row","wrap","sets-row"],[1,"sort-group"],["for","series-select"],["id","series-select","aria-label","Select series",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["for","set-select"],["id","set-select","aria-label","Select set",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["for","pack-select"],["id","pack-select","aria-label","Select pack",1,"filter-select","compact",3,"disabled","ngModel","ngModelChange","change"],[1,"filters-row","rarity-row"],["for","rarity-chips",1,"filter-label"],["id","rarity-chips","aria-label","Rarity filter",1,"segmented","multi","chips-scroll"],["type","button","title","All rarities",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","types-row"],["for","types-chips",1,"filter-label"],["id","types-chips","aria-label","Types filter",1,"segmented","multi","chips-scroll"],["type","button","title","All types",1,"chip",3,"click"],["type","button","class","chip type-chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","wrap"],["for","sort-select"],["id","sort-select","aria-label","Sort order",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","latest"],["value","oldest"],["class","sort-group",4,"ngIf"],["role","tablist","aria-label","Ownership filter",1,"segmented","ownership"],["type","button",3,"click"],[1,"row-spacer"],["type","button","aria-label","Reset filters",1,"btn","btn-outline","reset-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","sync-progress",4,"ngIf"],["class","cards-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["aria-label","Collection navigation controls",1,"fab-stack"],["type","button","title","Top",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-up"],["type","button","title","Previous set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-up"],["type","button","title","Next set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-down"],["type","button","title","Bottom",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-down"],["aria-label","Filter controls",1,"fab-stack-left"],["type","button","title","Filters",1,"fab","mobile-only",3,"click"],["aria-hidden","true",1,"fa","fa-filter"],["type","button","title","Copy For Trade",1,"fab","mobile-only",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-exchange-alt"],["type","button","title","View Others Collection",1,"fab","mobile-only",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-user"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"view-other-banner",2,"margin-bottom","12px","padding","10px 14px","border-radius","12px","background","rgba(46,204,113,0.12)","border","1px solid rgba(46,204,113,0.35)","display","flex","align-items","center","justify-content","space-between","gap","12px"],[2,"background-color","transparent"],[1,"btn","btn-outline",3,"click"],[3,"value"],["type","button",1,"chip",3,"title","click"],["type","button",1,"chip","type-chip",3,"title","click"],[4,"ngIf","ngIfElse"],["normalType",""],[1,"trainer-label",3,"ngClass"],[1,"type-icon",3,"src","alt"],["for","group-select"],["id","group-select","aria-label","Group by",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","none"],["value","rarity"],["value","pack"],["value","type"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"btn","btn-primary",3,"click"],[1,"sync-progress"],[1,"sync-message"],[1,"sync-icon"],[1,"sync-text"],[1,"sync-title"],["class","sync-count",4,"ngIf"],[1,"sync-count"],[1,"cards-container"],["class","card-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-group"],[1,"group-header"],[1,"group-title"],[1,"group-stats"],["class","group-count","style","margin-left:10px; color:#b9eaff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffe066;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#f7a6ff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffd700;",4,"ngIf"],[1,"group-count"],[1,"cards-grid"],["class","card-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group-count",2,"margin-left","10px","color","#b9eaff"],[1,"group-count",2,"margin-left","10px","color","#ffe066"],[1,"group-count",2,"margin-left","10px","color","#f7a6ff"],[1,"group-count",2,"margin-left","10px","color","#ffd700"],[1,"card-item"],[1,"card-image"],["loading","lazy",1,"pokemon-card-img",2,"cursor","pointer",3,"src","alt","error","click"],[1,"card-info"],[1,"card-title"],[1,"ownership-controls"],[1,"count-btn","decrease",3,"disabled","click"],["displayCount",""],[1,"count-btn","increase",3,"disabled","click"],["type","number","min","0",1,"count-input",3,"ngModel","ngModelChange","keydown.enter","keydown","keydown.escape","blur"],["type","button",1,"count-display",3,"disabled","click"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-backdrop",3,"click"],[1,"modal-content","view-others-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"view-others-config"],[1,"config-section"],["for","other-username-input",1,"config-label"],["type","text","id","other-username-input","placeholder","Enter username to view their collection\u2026",1,"config-input-wide",3,"ngModel","ngModelChange","keydown.enter"],[1,"config-hint"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],[1,"modal-content","trade-modal",3,"click"],[1,"trade-config"],["for","exclude-special-toggle",1,"config-label"],["type","checkbox","id","exclude-special-toggle",3,"ngModel","ngModelChange"],["for","lf-set-multiselect",1,"config-label"],["id","lf-set-multiselect",2,"position","relative","display","inline-block","width","100%"],["type","button",2,"width","100%","background","rgba(255,255,255,0.08)","border","1px solid rgba(255,255,255,0.18)","color","var(--text)","padding","6px 10px","border-radius","8px","display","flex","align-items","center","justify-content","space-between","cursor","pointer","font-size","14px",3,"click"],[4,"ngIf"],[1,"fa",3,"ngClass"],["style","position:absolute; left:0; right:0; top: calc(100% + 4px); background: #1e2533; border:1px solid rgba(255,255,255,0.18); border-radius:10px; padding:8px 8px 10px; box-shadow:0 6px 16px rgba(0,0,0,0.45); z-index:50; max-height:260px; overflow-y:auto;",4,"ngIf"],["for","ft-set-multiselect",1,"config-label"],["id","ft-set-multiselect",2,"position","relative","display","inline-block","width","100%"],[1,"config-label"],[1,"rarity-chips"],["type","button",1,"chip",3,"click"],["role","tablist","aria-label","Output format",1,"segmented"],["type","button","role","tab",3,"click"],["for","trade-qty-min",1,"config-label"],["type","number","id","trade-qty-min","min","1","max","10",1,"config-input",3,"ngModel","ngModelChange"],["for","friend-code-input",1,"config-label"],["type","text","id","friend-code-input","placeholder","Enter your friend code to include in the copy\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],["for","trade-template-text",1,"config-label"],["id","trade-template-text","rows","2","placeholder","Add an extra note to include in the copied text\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],[2,"position","absolute","left","0","right","0","top","calc(100% + 4px)","background","#1e2533","border","1px solid rgba(255,255,255,0.18)","border-radius","10px","padding","8px 8px 10px","box-shadow","0 6px 16px rgba(0,0,0,0.45)","z-index","50","max-height","260px","overflow-y","auto"],[2,"display","flex","gap","8px","margin-bottom","6px"],["type","button",1,"btn","btn-outline",2,"padding","4px 8px","font-size","11px","line-height","1",3,"click"],["role","listbox",2,"display","flex","flex-direction","column","gap","2px"],["type","button","style","border:none; text-align:left; padding:4px 6px; border-radius:6px; font-size:12px; cursor:pointer; display:flex; align-items:center; gap:6px;",3,"ngStyle","click",4,"ngFor","ngForOf"],["style","font-size:12px; opacity:0.7; padding:4px;",4,"ngIf"],["type","button",2,"border","none","text-align","left","padding","4px 6px","border-radius","6px","font-size","12px","cursor","pointer","display","flex","align-items","center","gap","6px",3,"ngStyle","click"],[2,"width","16px","display","inline-block"],[2,"font-size","12px","opacity","0.7","padding","4px"],[1,"modal-overlay",3,"click"],[1,"modal-content","card-modal",3,"click"],["aria-label","Close modal",1,"modal-close",3,"click"],[1,"card-modal-image",2,"display","flex","align-items","center","justify-content","center","gap","16px"],["aria-label","Previous card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"modal-card-image",3,"src","alt"],["aria-label","Next card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"card-modal-info"],["class","modal-pack-badges",4,"ngIf"],[1,"modal-pack-badges"],["class","pack-badge",4,"ngFor","ngForOf"],[1,"pack-badge"]],template:function(o,i){1&o&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),B("click",function(){return i.exportCollection()}),E(4," \u{1f4e4} Export Collection "),_(),y(5,"label",4),E(6," \u{1f4e5} Import Collection "),y(7,"input",5),B("change",function(a){return i.importCollection(a)}),_()(),y(8,"button",6),B("click",function(){return i.openTradeModal()}),E(9," \u{1f4cb} Copy For Trade "),_(),y(10,"button",6),B("click",function(){return i.openViewOthersModal()}),E(11," \u{1f464} View Others Collection "),_()()(),Q(12,EV,8,1,"div",7),y(13,"div",8)(14,"div",9)(15,"input",10),B("ngModelChange",function(a){return i.searchTerm=a})("input",function(){return i.onSearchChange()}),_()(),y(16,"div",11)(17,"div",12)(18,"label",13),E(19,"Series"),_(),y(20,"select",14),B("ngModelChange",function(a){return i.selectedSeries=a})("change",function(){return i.onSeriesChange()}),y(21,"option",15),E(22,"All Series"),_(),Q(23,xV,2,2,"option",16),_()(),y(24,"div",12)(25,"label",17),E(26),_(),y(27,"select",18),B("ngModelChange",function(a){return i.selectedSet=a})("change",function(){return i.onSetChange()}),y(28,"option",15),E(29),_(),Q(30,MV,2,2,"option",16),_()(),y(31,"div",12)(32,"label",19),E(33),_(),y(34,"select",20),B("ngModelChange",function(a){return i.selectedPack=a})("change",function(){return i.applyFilters()}),y(35,"option",15),E(36),_(),Q(37,TV,2,2,"option",16),_()()(),y(38,"div",21)(39,"label",22),E(40,"Rarity"),_(),y(41,"div",23)(42,"button",24),B("click",function(){return i.clearRarity()}),E(43,"ALL"),_(),Q(44,IV,2,4,"button",25),_()(),y(45,"div",26)(46,"label",27),E(47,"Types"),_(),y(48,"div",28)(49,"button",29),B("click",function(){return i.clearTypes()}),E(50," ALL "),_(),Q(51,RV,4,6,"button",30),_()(),y(52,"div",31)(53,"div",12)(54,"label",32),E(55,"Sort By"),_(),y(56,"select",33),B("ngModelChange",function(a){return i.sortBy=a})("change",function(){return i.applyFilters()}),y(57,"option",34),E(58,"Latest Set"),_(),y(59,"option",35),E(60,"Oldest Set"),_()()(),Q(61,NV,12,1,"div",36),y(62,"div",37)(63,"button",38),B("click",function(){return i.setOwnership("all")}),E(64,"ALL"),_(),y(65,"button",38),B("click",function(){return i.setOwnership("missing")}),E(66,"MISSING"),_(),y(67,"button",38),B("click",function(){return i.setOwnership("owned")}),E(68,"OWNED"),_()(),et(69,"div",39),y(70,"button",40),B("click",function(){return i.clearFilters()}),E(71,"Reset"),_()()(),Q(72,FV,4,0,"div",41),Q(73,LV,5,1,"div",42),Q(74,VV,8,2,"div",43),Q(75,KV,2,2,"div",44),Q(76,JV,9,0,"div",45),y(77,"div",46)(78,"button",47),B("click",function(){return i.scrollToTop()}),et(79,"i",48),_(),y(80,"button",49),B("click",function(){return i.scrollToPrevSet()}),et(81,"i",50),_(),y(82,"button",51),B("click",function(){return i.scrollToNextSet()}),et(83,"i",52),_(),y(84,"button",53),B("click",function(){return i.scrollToBottom()}),et(85,"i",54),_()(),y(86,"div",55)(87,"button",56),B("click",function(){return i.toggleFilters()}),et(88,"i",57),_(),y(89,"button",58),B("click",function(){return i.openTradeModal()}),et(90,"i",59),_(),y(91,"button",60),B("click",function(){return i.openViewOthersModal()}),et(92,"i",61),_()(),Q(93,QV,20,2,"div",62),Q(94,h$,67,29,"div",62),Q(95,g$,14,4,"div",63),_()),2&o&&(D(8),L("disabled",i.isViewingOther),D(2),L("disabled",i.isViewingOther),D(2),L("ngIf",i.isViewingOther),D(1),nt("collapsed",!i.filtersOpen),D(2),L("ngModel",i.searchTerm),D(5),L("ngModel",i.selectedSeries),D(3),L("ngForOf",i.availableSeries),D(3),ke("Set ","all"!==i.selectedSeries?"(in "+i.selectedSeries+")":"",""),D(1),L("ngModel",i.selectedSet),D(2),St("all"!==i.selectedSeries?"All Sets in "+i.selectedSeries:"All Sets"),D(1),L("ngForOf",i.availableSets),D(3),ke("Pack ","all"!==i.selectedSet?"(in "+i.getSetName(i.selectedSet)+")":"(select a set first)",""),D(1),L("disabled","all"===i.selectedSet)("ngModel",i.selectedPack),D(2),St("all"!==i.selectedSet?"All Packs in "+i.getSetName(i.selectedSet):"Select a set first"),D(1),L("ngForOf",i.availablePacks),D(5),nt("active",0===i.selectedRarities.length),D(2),L("ngForOf",i.availableRaritySymbols),D(5),nt("active",0===i.selectedTypes.length),D(2),L("ngForOf",i.availableTypes),D(5),L("ngModel",i.sortBy),D(5),L("ngIf","all"!==i.selectedSet),D(2),nt("active","all"===i.ownershipFilter),D(2),nt("active","missing"===i.ownershipFilter),D(2),nt("active","owned"===i.ownershipFilter),D(5),L("ngIf",i.loading),D(1),L("ngIf",i.error),D(1),L("ngIf",i.syncingCards),D(1),L("ngIf",!i.loading&&!i.error),D(1),L("ngIf",!i.loading&&!i.error&&0===i.getGroupedCards().length),D(11),Bt("aria-pressed",i.filtersOpen),D(2),L("disabled",i.isViewingOther),D(2),L("disabled",i.isViewingOther),D(2),L("ngIf",i.showViewOthersModal),D(1),L("ngIf",i.showTradeModal),D(1),L("ngIf",i.selectedCardForModal))},dependencies:[Uh,Bh,Gs,nb,Tf,Of,Ys,Sf,uf,ra,lc,Pf,Af,na],styles:['.group-header[_ngcontent-%COMP%]{flex-wrap:wrap}.group-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.group-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1rem;padding:2px 8px;border-radius:6px;background:rgba(255,255,255,.04);margin-bottom:2px}@media (max-width: 600px){.group-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.group-stats[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:6px;font-size:.95rem;margin-top:4px}.group-count[_ngcontent-%COMP%]{font-size:.95rem;padding:2px 6px;margin-bottom:2px}}.chip.active[_ngcontent-%COMP%]   .trainer-item[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-tool[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-supporter[_ngcontent-%COMP%]{color:#fff!important}.trainer-item[_ngcontent-%COMP%], .trainer-tool[_ngcontent-%COMP%], .trainer-supporter[_ngcontent-%COMP%]{font-family:Roboto Condensed,Arial Narrow,sans-serif;font-weight:1000;font-style:italic;font-size:13px;text-transform:uppercase;letter-spacing:1px;-webkit-font-smoothing:antialiased;display:inline-block;margin:0 2px;-webkit-user-select:none;user-select:none;transition:filter .15s ease-in-out;filter:brightness(1.12)}.trainer-item[_ngcontent-%COMP%]{color:#2596be}.trainer-tool[_ngcontent-%COMP%]{color:#78619a}.trainer-supporter[_ngcontent-%COMP%]{color:#dc6c40}.collection-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:transparent;min-height:100vh;color:#fff}.sync-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,#1a4d3a 0%,#0f2d1f 100%);border:1px solid #28a745;border-radius:10px;padding:16px 22px;margin-bottom:20px;box-shadow:0 4px 18px #28a74540}.sync-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.sync-icon[_ngcontent-%COMP%]{font-size:22px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.sync-text[_ngcontent-%COMP%]{flex:1}.sync-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#28a745;margin-bottom:2px}.sync-count[_ngcontent-%COMP%]{font-size:12px;color:#9fb8aa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.collection-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:30px;flex-wrap:wrap}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.view-other-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.view-other-controls[_ngcontent-%COMP%]   .search-input.compact[_ngcontent-%COMP%]{width:auto;max-width:240px;min-width:200px;padding:8px 12px;border-radius:8px}@media (max-width: 768px){.collection-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{justify-content:space-between}}.import-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d;border:1px solid #404040}.filters-panel[_ngcontent-%COMP%]{border:1px solid #666;border-radius:10px;padding:14px;margin-bottom:20px;background-color:#12151c;background:#12151c;box-shadow:0 8px 18px #00000059}.filters-header[_ngcontent-%COMP%]{color:#ddd;font-weight:600;margin-bottom:10px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.filters-row.wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.rarity-row[_ngcontent-%COMP%]{align-items:flex-start;gap:10px}.filters-row.rarity-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filters-row.footer[_ngcontent-%COMP%]{justify-content:space-between}.filter-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.filter-select.compact[_ngcontent-%COMP%]{width:240px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.sort-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#cfcfcf;margin-right:8px}.segmented[_ngcontent-%COMP%]{display:inline-flex;background:#1b1e24;border:1px solid #4a4f5a;border-radius:6px;overflow:hidden}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;background:transparent;color:#cfd6e4;border:none;cursor:pointer}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-left:1px solid #4a4f5a}.segmented[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff}.segmented.multi[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;background:transparent;border:none;overflow-x:auto;padding:4px 2px 2px;-webkit-overflow-scrolling:touch}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#3a3f48;border-radius:4px}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{border:1px solid #3d4350;background:#171a20;color:#cfd6e4;border-radius:999px;padding:6px 10px;font-size:12px;line-height:1}.segmented.multi[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);border-color:#7056b1;color:#fff}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4b90ff;outline-offset:2px}.type-chip[_ngcontent-%COMP%]{padding:6px 8px!important;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.type-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:contain}.ownership[_ngcontent-%COMP%]{margin-left:4px}.row-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.reset-btn[_ngcontent-%COMP%]{white-space:nowrap}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;align-items:center;justify-content:center;padding:16px}.modal-content[_ngcontent-%COMP%]{width:min(520px,92vw);max-height:85vh;overflow:auto;background:#121317;border:1px solid #3e4654;border-radius:10px;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #2c3240}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#eaeaea}.modal-close[_ngcontent-%COMP%]{background:transparent;border:none;color:#aaa;font-size:18px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #2c3240}.trade-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.trade-config[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.config-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.config-label[_ngcontent-%COMP%]{font-weight:600;color:#ddd;font-size:14px}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #4a4f5a;border-radius:6px;background:#1b1e24;color:#cfd6e4;cursor:pointer;transition:all .2s ease}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.rarity-chips[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:var(--header-gradient);border-color:#6f79d9;color:#fff}.config-input[_ngcontent-%COMP%]{width:80px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-input-wide[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-hint[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:420px;margin:0 auto}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #444;border-radius:25px;background-color:#333;color:#fff;font-size:16px;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 10px #007bff4d}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ccc;letter-spacing:.5px}.filter-dependency[_ngcontent-%COMP%]{font-size:11px;color:#007bff;font-weight:400;text-transform:none;font-style:italic}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #444;border-radius:8px;background-color:#333;color:#fff;font-size:14px;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:hover{border-color:#555;background-color:#3a3a3a}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff33}.filter-select[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background-color:#2a2a2a;border-color:#333;color:#888}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.results-info[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:12px 20px;border-radius:8px;text-align:center;border:1px solid #333}.results-text[_ngcontent-%COMP%]{color:#ccc;font-size:14px;font-weight:500}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #333;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.cards-container[_ngcontent-%COMP%]{width:100%}.card-group[_ngcontent-%COMP%]{margin-bottom:40px}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:2px solid #333;flex-wrap:wrap;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin:0;text-shadow:1px 1px 2px rgba(0,0,0,.5);flex:1;min-width:280px;position:relative;line-height:1.3}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-shrink:0}.group-count[_ngcontent-%COMP%]{color:#ccc;font-size:14px;padding:4px 8px;background-color:#333;border-radius:4px;white-space:nowrap}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:18px}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;overflow:hidden;transition:transform .2s ease}.card-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2 / 3;overflow:hidden;padding:10px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.pokemon-card-img[_ngcontent-%COMP%]{width:90%;object-fit:cover;object-position:center;border-radius:10px;transition:transform .3s ease,opacity .3s ease;background-color:#222}.card-item[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{transform:scale(1.05)}.pokemon-card-img[_ngcontent-%COMP%]:not([src]), .pokemon-card-img[src=""][_ngcontent-%COMP%]{opacity:.5;background:linear-gradient(45deg,#333,#555,#333);background-size:200% 200%;animation:_ngcontent-%COMP%_loading-shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loading-shimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.card-item.no-quantity[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.9}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(0%) opacity(.8)}.card-item.no-quantity[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{color:#888}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]:hover   .count-display[_ngcontent-%COMP%]{color:#bbb}.card-info[_ngcontent-%COMP%]{padding:10px 0;text-align:center}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pack-badges[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.pack-badge[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff;padding:2px 6px;border-radius:10px;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.ownership-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.count-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #555;border-radius:4px;background-color:#444;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;transition:all .2s ease}.count-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#555;border-color:#666}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.count-btn.decrease[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;border-color:#dc3545}.count-btn.increase[_ngcontent-%COMP%]:hover{background-color:#28a745;border-color:#28a745}.count-display[_ngcontent-%COMP%]{min-width:32px;padding:4px 10px;border-radius:6px;border:1px dashed #666;background:rgba(51,51,51,.65);color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.count-display[_ngcontent-%COMP%]:hover, .count-display[_ngcontent-%COMP%]:focus-visible{border-color:#007bff;background:rgba(0,123,255,.2);outline:none}.count-input[_ngcontent-%COMP%]{width:56px;padding:4px 8px;border-radius:6px;border:1px solid #777;background:rgba(24,24,24,.95);color:#fff;font-size:14px;font-weight:600;text-align:center;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.count-input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 6px #007bff4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.pokemon-card-img.lazy-loading[_ngcontent-%COMP%]{opacity:.6;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.pokemon-card-img.lazy-loaded[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}.pokemon-card-img.lazy-error[_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 1200px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (max-width: 768px){.collection-container[_ngcontent-%COMP%]{padding:15px}.filters-panel[_ngcontent-%COMP%]{border-radius:10px;padding:12px}.filters-header[_ngcontent-%COMP%]{margin-bottom:8px}.filters-row[_ngcontent-%COMP%]{gap:10px}.filter-select.compact[_ngcontent-%COMP%]{width:100%}.filter-input[_ngcontent-%COMP%]{min-width:0}.rarity-row[_ngcontent-%COMP%], .types-row[_ngcontent-%COMP%]{flex-direction:column}.chips-scroll[_ngcontent-%COMP%]{width:100%}.ownership[_ngcontent-%COMP%]{width:100%;justify-content:space-between;display:flex}.collection-actions[_ngcontent-%COMP%]   .actions-left[_ngcontent-%COMP%], .filters-panel.collapsed[_ngcontent-%COMP%]{display:none}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}.ownership-controls[_ngcontent-%COMP%]{gap:8px}.filters-section[_ngcontent-%COMP%]{padding:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-box[_ngcontent-%COMP%]{max-width:100%}.group-header[_ngcontent-%COMP%]{padding:10px 0}.group-title[_ngcontent-%COMP%]{font-size:1.3rem;padding-left:24px}.group-title[_ngcontent-%COMP%]:before{font-size:1rem}}@media (max-width: 540px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.filters-row[_ngcontent-%COMP%]{margin-bottom:8px}.reset-btn[_ngcontent-%COMP%]{width:100%}.count-display[_ngcontent-%COMP%], .count-input[_ngcontent-%COMP%]{width:48px}.filters-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.filter-label[_ngcontent-%COMP%]{font-size:12px}.group-title[_ngcontent-%COMP%]{font-size:1.15rem}.group-title[_ngcontent-%COMP%]:before{font-size:.9rem}}.fab-stack[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:24px;display:flex;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}.fab[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:1px solid rgba(255,255,255,.18);background:var(--header-gradient);color:#fff;font-size:18px;cursor:pointer;box-shadow:0 10px 24px #070c1859;display:inline-flex;align-items:center;justify-content:center;transition:transform .14s ease,box-shadow .14s ease,border-color .14s ease,filter .14s ease}.fab[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 14px 28px #070c1873;filter:brightness(1.05)}.fab-stack-left[_ngcontent-%COMP%]{position:fixed;left:24px;bottom:24px;display:none;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{right:16px;bottom:16px;gap:8px}.fab[_ngcontent-%COMP%]{width:44px;height:44px}.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.fab-stack-left[_ngcontent-%COMP%]{display:flex;left:16px;bottom:16px}}.fab.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex!important}.fab-stack-left[_ngcontent-%COMP%]{display:flex!important}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px}.modal-content.card-modal[_ngcontent-%COMP%]{background:#2a2d3a;border-radius:12px;max-width:500px;max-height:90vh;width:100%;position:relative;overflow:hidden;box-shadow:0 20px 40px #00000080}.modal-close[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:rgba(0,0,0,.7);border:none;border-radius:50%;width:32px;height:32px;color:#fff;font-size:18px;cursor:pointer;z-index:10001;display:flex;align-items:center;justify-content:center;transition:background .2s ease}.modal-close[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.9)}.card-modal-image[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px 20px 10px}.modal-card-image[_ngcontent-%COMP%]{max-width:100%;height:auto;max-height:60vh;border-radius:8px;box-shadow:0 8px 16px #0000004d}.card-modal-info[_ngcontent-%COMP%]{padding:10px 20px 20px;text-align:center}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px;font-weight:600}.modal-pack-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}.modal-pack-badges[_ngcontent-%COMP%]   .pack-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content.card-modal[_ngcontent-%COMP%]{max-width:100%;max-height:95vh}.modal-card-image[_ngcontent-%COMP%]{max-height:70vh}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}'],changeDetection:0}),n})();function y$(n,t){1&n&&(y(0,"div",9),et(1,"div",10),y(2,"p"),E(3,"Calculating pack suggestions..."),_()())}function _$(n,t){1&n&&(y(0,"div",11)(1,"p"),E(2,"Please sign in to get personalized pack suggestions."),_()())}function v$(n,t){if(1&n&&(y(0,"option",19),E(1),_()),2&n){const e=t.$implicit;L("value",e),D(1),St(e)}}function C$(n,t){if(1&n){const e=tt();y(0,"div",38),B("click",function(){const i=ee(e).$implicit,s=j(2).$implicit;return te(j(2).onRarityClick(s,i))}),y(1,"span",39),E(2),_(),y(3,"span",40),E(4),_(),y(5,"span",41),E(6),_()()}if(2&n){const e=t.$implicit,r=j(4);nt("complete",100===e.percentage),D(1),L("title",r.getRarityDisplayName(e.rarity)),D(1),ke(" ",e.rarity," "),D(2),Co(" ",e.owned,"/",e.total," "),D(1),nt("complete",100===e.percentage),D(1),ke(" ",e.percentage.toFixed(0),"% ")}}function b$(n,t){if(1&n&&(y(0,"div",35)(1,"h5"),E(2,"Rarity Breakdown:"),_(),y(3,"div",36),Q(4,C$,7,9,"div",37),_()()),2&n){const e=j().$implicit;D(4),L("ngForOf",e.rarityBreakdown)}}function w$(n,t){if(1&n&&(y(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"h4",24),E(5),_()(),y(6,"div",25)(7,"span",26),E(8),_(),y(9,"span",27),E(10),_()()(),y(11,"div",28)(12,"div",29)(13,"span",30),E(14,"New Card Chance"),_(),y(15,"span",31),E(16),_()(),y(17,"div",29)(18,"span",30),E(19,"Missing Cards"),_(),y(20,"span",32),E(21),_()(),y(22,"div",29)(23,"span",30),E(24,"Collection"),_(),y(25,"span",33),E(26),_()()(),Q(27,b$,5,1,"div",34),_()()),2&n){const e=t.$implicit,r=t.index;D(5),Co("",r+1,". ",e.packName,""),D(3),St(e.setCode),D(2),St(e.setName),D(6),ke("",e.newCardChance.toFixed(1),"%"),D(5),Co("",e.missingCards,"/",e.totalCards,""),D(5),ke("",e.percentage.toFixed(1),"% complete"),D(1),L("ngIf",e.rarityBreakdown.length>0)}}function D$(n,t){if(1&n){const e=tt();y(0,"div",12)(1,"div",13)(2,"h3"),E(3),_(),y(4,"select",14),B("ngModelChange",function(o){return ee(e),te(j().selectedSeriesFilter=o)})("change",function(){return ee(e),te(j().onSeriesFilterChange())}),y(5,"option",15),E(6,"Top 3 Suggestions"),_(),y(7,"optgroup",16),Q(8,v$,2,2,"option",17),_()()(),Q(9,w$,28,9,"div",18),_()}if(2&n){const e=j();D(3),ke("Recommended Packs (",e.packSuggestions.length," available)"),D(1),L("ngModel",e.selectedSeriesFilter),D(4),L("ngForOf",e.seriesList),D(1),L("ngForOf",e.packSuggestions)}}function S$(n,t){1&n&&(y(0,"div",42)(1,"p"),E(2,"\u{1f389} Congratulations! You have completed your collection according to the selected algorithm."),_(),y(3,"p"),E(4,"Try a different algorithm to find more cards to collect."),_()())}function E$(n,t){1&n&&(y(0,"span"),E(1,"\u{1f6ab}"),_())}function x$(n,t){1&n&&(y(0,"span"),E(1,"\u{1f4e6}"),_())}function M$(n,t){1&n&&(y(0,"span"),E(1,"\u2b50"),_())}function T$(n,t){1&n&&(y(0,"span"),E(1,"\u{1f48e}"),_())}function I$(n,t){1&n&&(y(0,"span"),E(1,"\u{1f451}"),_())}const O$=function(n,t){return{"fab-excluding":n,"fab-including":t}},A$=function(n,t,e){return{"fab-tradable":n,"fab-common":t,"fab-all":e}};let P$=(()=>{const t=class{constructor(r,o,i,s,a){this.pokemonDataService=r,this.dataManager=o,this.supabaseService=i,this.cdr=s,this.router=a,this.cards=[],this.sets=[],this.rarityMapping={},this.currentUser=null,this.ownedCards={},this.selectedAlgorithm="new-card-chance",this.excludeSpecialPacks=!0,this.rarityFilterMode="tradable",this.selectedSeriesFilter="top-3",this.seriesList=[],this.packSuggestions=[],this.isLoading=!0}ngOnInit(){this.loadData()}onRarityClick(r,o){const s=this.sets.find(a=>a.code===r.setCode)?.series||"all";this.router.navigate(["/collection"],{queryParams:{series:s,set:r.setCode,pack:r.packName,rarity:o.rarity}})}loadData(){var r=this;return v(function*(){r.isLoading=!0;try{r.currentUser=yield r.supabaseService.getCurrentUser();const o=yield r.pokemonDataService.loadAllData().toPromise();o&&(r.cards=o.cards,r.sets=o.sets,r.rarityMapping=o.rarities),r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id)),r.seriesList=Array.from(new Set(r.sets.map(i=>i.series))).sort(),r.calculateSuggestions()}catch(o){console.error("Error loading data:",o)}finally{r.isLoading=!1,r.cdr.markForCheck()}})()}onExcludeSpecialPacksChange(){this.calculateSuggestions(),this.cdr.markForCheck()}onRarityFilterChange(){this.rarityFilterMode="tradable"===this.rarityFilterMode?"common":"common"===this.rarityFilterMode?"all":"tradable",this.calculateSuggestions(),this.cdr.markForCheck()}onSeriesFilterChange(){this.calculateSuggestions(),this.cdr.markForCheck()}calculateSuggestions(){if(!this.cards.length||!this.sets.length)return;const r=[],o="top-3"===this.selectedSeriesFilter?this.sets:this.sets.filter(a=>a.series===this.selectedSeriesFilter),i=new Set;o.forEach(a=>{a.packs?.forEach(l=>{this.excludeSpecialPacks&&this.isSpecialPack(l)||i.add(l)})}),i.forEach(a=>{const l=this.calculatePackSuggestion(a);l&&r.push(l)});const s=r.sort((a,l)=>l.newCardChance-a.newCardChance);this.packSuggestions="top-3"===this.selectedSeriesFilter?s.slice(0,3):s}calculatePackSuggestion(r){let o=this.cards.filter(f=>f.packs&&f.packs.includes(r));if(0===o.length)return null;const i=this.sets.find(f=>f.packs&&f.packs.includes(r));if(!i)return null;if("tradable"===this.rarityFilterMode){const f=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606"];o=o.filter(p=>f.includes(p.rarity))}else if("common"===this.rarityFilterMode){const f=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606"];o=o.filter(p=>f.includes(p.rarity))}const s=o,l=s.filter(f=>0===this.getOwnedCount(f)).length,c=s.length,u=c>0?(c-l)/c*100:0,d=c>0?l/c*100:0,h=this.calculateRarityBreakdown(s);return{setCode:i.code,setName:i.name,packName:r,missingCards:l,totalCards:c,percentage:u,newCardChance:d,rarityBreakdown:h}}calculateRarityBreakdown(r){const o=[...new Set(r.map(s=>s.rarity))],i=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2606\u2606\u2606","\u{1f451}","\u2735","\u2735\u2735"];return o.sort((s,a)=>{const l=i.indexOf(s),c=i.indexOf(a);return(-1===l?999:l)-(-1===c?999:c)}),o.map(s=>{const a=r.filter(d=>d.rarity===s),l=a.filter(d=>this.getOwnedCount(d)>0).length,c=a.length;return{rarity:s,owned:l,total:c,percentage:c>0?l/c*100:0}})}getOwnedCount(r){return this.currentUser&&this.ownedCards[this.getCardId(r)]||0}loadOwnedCardsForUser(r){var o=this;return v(function*(){try{const i=yield o.supabaseService.syncUserCollection(r);o.ownedCards=i}catch(i){console.error("Error loading owned cards:",i),o.ownedCards={}}})()}getCardId(r){return`${r.set}-${r.number}`}isSpecialPack(r){return[/Deluxe/i,/vol/i].some(i=>i.test(r))}getRarityDisplayName(r){for(const[o,i]of Object.entries(this.rarityMapping))if(i.split(" - ")[0]===r)return i;return r}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(cp),P(uD),P(Sa),P(wi),P(xt))},t.\u0275cmp=co({type:t,selectors:[["app-suggestion"]],decls:13,vars:20,consts:[[1,"suggestion-container"],[1,"filter-section"],["class","loading-state",4,"ngIf"],["class","no-user-state",4,"ngIf"],["class","suggestions-list",4,"ngIf"],["class","no-suggestions",4,"ngIf"],[1,"fab","fab-special",3,"ngClass","title","click"],[4,"ngIf"],[1,"fab","fab-rarity",3,"ngClass","title","click"],[1,"loading-state"],[1,"spinner"],[1,"no-user-state"],[1,"suggestions-list"],[1,"suggestions-header-row"],[1,"set-filter",3,"ngModel","ngModelChange","change"],["value","top-3"],["label","Series"],[3,"value",4,"ngFor","ngForOf"],["class","suggestion-item",4,"ngFor","ngForOf"],[3,"value"],[1,"suggestion-item"],[1,"suggestion-content"],[1,"suggestion-header"],[1,"header-left"],[1,"pack-name"],[1,"header-right"],[1,"set-code"],[1,"set-name"],[1,"suggestion-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","chance"],[1,"stat-value","missing"],[1,"stat-value","percentage"],["class","rarity-breakdown",4,"ngIf"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-item clickable","tabindex","0",3,"complete","click",4,"ngFor","ngForOf"],["tabindex","0",1,"rarity-item","clickable",3,"click"],[1,"rarity-symbol",3,"title"],[1,"rarity-count"],[1,"rarity-percentage"],[1,"no-suggestions"]],template:function(o,i){1&o&&(y(0,"div",0)(1,"div",1),Q(2,y$,4,0,"div",2),Q(3,_$,3,0,"div",3),Q(4,D$,10,4,"div",4),_(),Q(5,S$,5,0,"div",5),y(6,"button",6),B("click",function(){return i.excludeSpecialPacks=!i.excludeSpecialPacks,i.onExcludeSpecialPacksChange()}),Q(7,E$,2,0,"span",7),Q(8,x$,2,0,"span",7),_(),y(9,"button",8),B("click",function(){return i.onRarityFilterChange()}),Q(10,M$,2,0,"span",7),Q(11,T$,2,0,"span",7),Q(12,I$,2,0,"span",7),_()()),2&o&&(D(2),L("ngIf",i.isLoading),D(1),L("ngIf",!i.isLoading&&!i.currentUser),D(1),L("ngIf",!i.isLoading&&i.currentUser&&i.packSuggestions.length>0),D(1),L("ngIf",!i.isLoading&&i.currentUser&&0===i.packSuggestions.length),D(1),L("ngClass",Al(13,O$,i.excludeSpecialPacks,!i.excludeSpecialPacks))("title",i.excludeSpecialPacks?"Excluding Special Packs":"Including Special Packs"),D(1),L("ngIf",i.excludeSpecialPacks),D(1),L("ngIf",!i.excludeSpecialPacks),D(1),L("ngClass",Zd(16,A$,"tradable"===i.rarityFilterMode,"common"===i.rarityFilterMode,"all"===i.rarityFilterMode))("title","tradable"===i.rarityFilterMode?"Tradable cards: \u25ca-\u25ca\u25ca\u25ca\u25ca, \u2606, \u2606\u2606":"common"===i.rarityFilterMode?"Common only: \u25ca-\u25ca\u25ca\u25ca\u25ca, \u2606":"All rarities"),D(1),L("ngIf","tradable"===i.rarityFilterMode),D(1),L("ngIf","common"===i.rarityFilterMode),D(1),L("ngIf","all"===i.rarityFilterMode))},dependencies:[Uh,Bh,Gs,Tf,Of,ra,lc,na],styles:['.suggestion-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:var(--text)}.suggestion-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:8px;font-size:2.2rem}.suggestion-header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem;margin:0}.filter-section[_ngcontent-%COMP%]{background:var(--surface);border-radius:12px;padding:15px;margin-bottom:20px;border:1px solid var(--border)}.filter-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;flex-wrap:wrap}.checkbox-option.compact[_ngcontent-%COMP%]{padding:6px 8px;gap:8px}.checkbox-option.compact[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{transform:scale(.9)}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.9rem}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.set-filter[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;background:var(--surface) url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%236c757d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>\') no-repeat right 8px center;border:1px solid var(--border);border-radius:8px;padding:8px 32px 8px 12px;font-size:.9rem;color:var(--text);cursor:pointer}.set-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px #5ba8ff26}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:15px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.radio-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-label[_ngcontent-%COMP%]{color:var(--text)}.radio-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.radio-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.radio-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.radio-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.filter-options[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid var(--border)}.checkbox-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:12px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.checkbox-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkbox-label[_ngcontent-%COMP%]{color:var(--text)}.checkbox-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.checkbox-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.loading-state[_ngcontent-%COMP%], .no-user-state[_ngcontent-%COMP%], .no-suggestions[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background:var(--surface);border:1px solid var(--border);border-radius:12px;margin:20px 0}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.08);border-top:4px solid var(--accent);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.suggestions-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text);margin-bottom:20px;font-size:1.4rem}.suggestions-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}.suggestion-item[_ngcontent-%COMP%]{display:block;background:rgb(14 21 37 / 85%);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:20px;transition:all .2s ease;box-shadow:0 2px 6px #00000040}.suggestion-content[_ngcontent-%COMP%]{width:100%}.suggestion-header[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;text-align:right}.pack-name[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text);margin:0;font-weight:1000;text-align:left}.set-code[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:2px 8px;border-radius:4px;font-size:.8rem;font-weight:500}.set-name[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem}.suggestion-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:15px}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-muted);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.stat-value.score[_ngcontent-%COMP%]{color:#3498db}.stat-value.chance[_ngcontent-%COMP%]{color:#e74c3c}.stat-value.missing[_ngcontent-%COMP%]{color:#f39c12}.stat-value.percentage[_ngcontent-%COMP%]{color:#27ae60}.rarity-breakdown[_ngcontent-%COMP%]{margin-top:15px;padding-top:15px;border-top:1px solid var(--border)}.rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 10px;color:var(--text);font-size:.9rem;font-weight:600}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px}.rarity-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:8px;background:rgba(255,255,255,.03);border-radius:6px;border:1px solid var(--border);gap:4px}.rarity-item.complete[_ngcontent-%COMP%]{background:rgba(39,174,96,.15);border-color:#27ae60}.rarity-item.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:transform .15s ease,box-shadow .15s ease}.rarity-item.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-1px)}.rarity-symbol[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--text)}.rarity-count[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);font-weight:500}.rarity-percentage[_ngcontent-%COMP%]{font-size:.75rem;color:#f39c12;font-weight:600}.rarity-percentage.complete[_ngcontent-%COMP%]{color:#27ae60}.exclude-toggle-fixed[_ngcontent-%COMP%]{position:fixed;top:16px;right:16px;z-index:1500;background:var(--surface);border-color:var(--border);box-shadow:0 4px 12px #0003}@media (max-width: 768px){.exclude-toggle-fixed[_ngcontent-%COMP%]{top:12px;right:12px;transform:scale(.95)}}@media (max-width: 768px){.suggestion-container[_ngcontent-%COMP%]{padding:15px}.suggestion-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.header-left[_ngcontent-%COMP%]{width:100%}.header-right[_ngcontent-%COMP%]{width:100%;text-align:left}.set-name[_ngcontent-%COMP%]{text-align:left;margin-left:0;width:100%}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.algorithm-selector[_ngcontent-%COMP%]{gap:8px}.radio-option[_ngcontent-%COMP%]{padding:12px}.filter-toolbar[_ngcontent-%COMP%]{justify-content:space-between}.rarity-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:6px}.rarity-item[_ngcontent-%COMP%]{padding:6px}}@media (max-width: 480px){.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.pack-name[_ngcontent-%COMP%]{font-size:1.1rem}}.fab[_ngcontent-%COMP%]{position:fixed;right:20px;width:56px;height:56px;border-radius:50%;color:#fff;border:none;font-size:1.5rem;cursor:pointer;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;z-index:1000;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.fab-special[_ngcontent-%COMP%]{bottom:20px}.fab-rarity[_ngcontent-%COMP%]{bottom:90px}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 16px #0006}.fab.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c 0%,#c0392b 100%)}.fab-tradable[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12 0%,#e67e22 100%)}.fab-common[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db 0%,#2980b9 100%)}.fab-all[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6 0%,#8e44ad 100%)}.fab-excluding[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c 0%,#c0392b 100%)}.fab-including[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60 0%,#229954 100%)}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:2000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:var(--surface-strong);color:var(--text);border:1px solid var(--border);border-radius:12px;max-width:800px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0006}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text);font-size:1.5rem}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8rem;color:#7f8c8d;cursor:pointer;padding:0;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.close-button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.06);color:var(--text)}.modal-body[_ngcontent-%COMP%]{padding:24px}.modal-filter[_ngcontent-%COMP%]{margin-top:12px}.algorithm-detail[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:20px;border-bottom:1px solid var(--border)}.algorithm-detail[_ngcontent-%COMP%]:last-child, .scoring-detail[_ngcontent-%COMP%]:last-child, .filter-detail[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.algorithm-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1.2rem}.algorithm-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text-muted);line-height:1.6}.algorithm-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:8px 0 0;padding-left:20px;color:#495057}.algorithm-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;line-height:1.5}.rarity-points[_ngcontent-%COMP%]{background:rgba(255,255,255,.05);padding:16px;border-radius:8px;margin-top:12px}.rarity-points[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1rem}.points-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px}.points-grid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--surface);padding:6px 10px;border-radius:4px;font-size:.85rem;color:var(--text);border:1px solid var(--border)}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end}.modal-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:10px 20px;border-radius:6px;font-size:1rem;cursor:pointer;transition:background .2s ease}.modal-button[_ngcontent-%COMP%]:hover{filter:brightness(.9)}.algorithm-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{max-height:95vh}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:16px}.points-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fab[_ngcontent-%COMP%]{bottom:16px;right:16px;width:48px;height:48px;font-size:1.3rem}}'],changeDetection:0}),n})();function k$(n,t){if(1&n&&(y(0,"div",19),E(1),_()),2&n){const e=j();D(1),ke(" ",e.error," ")}}function R$(n,t){1&n&&et(0,"span",20)}function L$(n,t){if(1&n){const e=tt();y(0,"div",17)(1,"span",18),E(2),_(),y(3,"button",19),B("click",function(){return ee(e),te(j().signOut())}),E(4,"Sign Out"),_()()}if(2&n){const e=j();D(2),ke("\u{1f464} ",e.currentUser.username,"")}}function j$(n,t){if(1&n&&(y(0,"div",20)(1,"span",18),E(2),_()()),2&n){const e=j();D(2),ke("\u{1f464} ",e.currentUser.username,"")}}function V$(n,t){if(1&n){const e=tt();y(0,"button",21),B("click",function(){ee(e);const o=j();return o.signOut(),te(o.closeMobileMenu())}),E(1," \u{1f6aa} Sign Out "),_()}}const $$=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:(()=>{const t=class{constructor(r,o,i){this.supabaseService=r,this.router=o,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/collection"}ngOnInit(){this.supabaseService.isSignedIn()?this.router.navigate([this.returnUrl]):this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/collection"}get isFormValid(){return this.username.trim().length>0&&this.password.trim().length>0}onSubmit(){var r=this;return v(function*(){if(r.isFormValid){r.loading=!0,r.error="";try{const{user:o,error:i}=yield r.supabaseService.signIn(r.username.trim(),r.password.trim());i?(r.error=i,i.includes("Please wait a moment")&&(r.error+=" This usually resolves itself quickly.")):o&&r.router.navigate([r.returnUrl])}catch(o){if(console.error("Sign in error:",o),o&&"object"==typeof o&&"message"in o){const i=o.message;r.error=i.includes("NavigatorLockAcquireTimeoutError")||i.includes("lock")?"Please wait a moment and try signing in again.":"An unexpected error occurred"}else r.error="An unexpected error occurred"}finally{r.loading=!1}}else r.error="Please enter both username and password"})()}onUsernameChange(){this.error=""}onPasswordChange(){this.error=""}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(Sa),P(xt),P(to))},t.\u0275cmp=co({type:t,selectors:[["app-signin"]],decls:26,vars:8,consts:[[1,"signin-container"],[1,"signin-card"],[1,"signin-header"],[1,"signin-title"],[1,"signin-subtitle"],[1,"signin-form",3,"ngSubmit"],["signinForm","ngForm"],[1,"form-group"],["for","username"],["id","username","name","username","type","text","placeholder","Enter your username","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["usernameInput","ngModel"],["for","password"],["id","password","name","password","type","password","placeholder","Enter your password","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["passwordInput","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"signin-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"signin-footer"],[1,"invite-note"],[1,"error-message"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),E(4,"\u{1f0cf} Pokemon TCG Pocket"),_(),y(5,"p",4),E(6,"Collection Manager"),_()(),y(7,"form",5,6),B("ngSubmit",function(){return i.onSubmit()}),y(9,"div",7)(10,"label",8),E(11,"Username"),_(),y(12,"input",9,10),B("ngModelChange",function(a){return i.username=a})("input",function(){return i.onUsernameChange()}),_()(),y(14,"div",7)(15,"label",11),E(16,"Password"),_(),y(17,"input",12,13),B("ngModelChange",function(a){return i.password=a})("input",function(){return i.onPasswordChange()}),_()(),Q(19,k$,2,1,"div",14),y(20,"button",15),Q(21,R$,1,0,"span",16),E(22),_()(),y(23,"div",17)(24,"p",18),E(25," \u{1f4e7} This is an invite-only system. Contact your administrator if you need access. "),_()()()()),2&o){const s=Dl(8);D(12),L("ngModel",i.username)("disabled",i.loading),D(5),L("ngModel",i.password)("disabled",i.loading),D(2),L("ngIf",i.error),D(1),L("disabled",i.loading||!s.valid),D(1),L("ngIf",i.loading),D(1),ke(" ",i.loading?"Signing In...":"Sign In"," ")}},dependencies:[Gs,Pw,Ys,lc,_w,_c,na,yc],styles:[".signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px}.signin-card[_ngcontent-%COMP%]{background:#333;border-radius:12px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 30px #0000004d;border:1px solid #444}.signin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signin-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.signin-subtitle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin:0;opacity:.8}.signin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #555;border-radius:6px;background-color:#444;color:#fff;font-size:16px;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;background-color:#555}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:#888}.error-message[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:10px 12px;border-radius:6px;font-size:14px;text-align:center;margin-top:-10px}.signin-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}.signin-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px)}.signin-btn[_ngcontent-%COMP%]:disabled{background-color:#666;cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signin-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.invite-note[_ngcontent-%COMP%]{color:#888;font-size:12px;line-height:1.4;margin:0;padding:15px;background-color:#2a2a2a;border-radius:6px;border-left:3px solid #007bff}@media (max-width: 480px){.signin-container[_ngcontent-%COMP%]{padding:10px}.signin-card[_ngcontent-%COMP%]{padding:30px 20px}.signin-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),n})()},{path:"",component:(()=>{const t=class{constructor(r,o){this.supabaseService=r,this.router=o,this.currentUser=null,this.appVersion="1.4.0",this.isMobileMenuOpen=!1}ngOnInit(){this.supabaseService.currentUser$.subscribe(r=>{this.currentUser=r}),this.router.events.subscribe(()=>{this.isMobileMenuOpen=!1})}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(Sa),P(xt))},t.\u0275cmp=co({type:t,selectors:[["app-main-layout"]],decls:28,vars:7,consts:[[1,"app-layout"],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],[1,"nav-center","desktop-only"],[1,"nav-links"],["routerLink","/suggestion","routerLinkActive","active",1,"nav-link"],["routerLink","/collection","routerLinkActive","active",1,"nav-link"],["class","nav-user desktop-only",4,"ngIf"],["type","button","aria-controls","mobileMenu","aria-label","Menu",1,"hamburger","mobile-only",3,"click"],["id","mobileMenu",1,"mobile-menu","mobile-only"],["class","mobile-menu-header",4,"ngIf"],["routerLink","/dashboard","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/collection","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/suggestion","routerLinkActive","active",1,"mobile-link",3,"click"],["class","mobile-link signout",3,"click",4,"ngIf"],[1,"main-content"],[1,"nav-user","desktop-only"],[1,"username"],[1,"btn-signout",3,"click"],[1,"mobile-menu-header"],[1,"mobile-link","signout",3,"click"]],template:function(o,i){1&o&&(y(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"h2"),E(5,"Pokemon TCGP Collector"),_(),y(6,"p"),E(7),_()(),y(8,"div",4)(9,"div",5)(10,"a",6),E(11," \u{1f4ca} Suggestion "),_(),y(12,"a",7),E(13," \u{1f5c2}\ufe0f Collection "),_()()(),Q(14,L$,5,1,"div",8),y(15,"button",9),B("click",function(){return i.toggleMobileMenu()}),E(16," \u2630 "),_()(),y(17,"div",10),Q(18,j$,3,1,"div",11),y(19,"a",12),B("click",function(){return i.closeMobileMenu()}),E(20," \u{1f4ca} Dashboard "),_(),y(21,"a",13),B("click",function(){return i.closeMobileMenu()}),E(22," \u{1f5c2}\ufe0f Collection "),_(),y(23,"a",14),B("click",function(){return i.closeMobileMenu()}),E(24," \u{1f4e6} Suggestion "),_(),Q(25,V$,2,0,"button",15),_()(),y(26,"main",16),et(27,"router-outlet"),_()()),2&o&&(D(7),ke("v",i.appVersion,""),D(7),L("ngIf",i.currentUser),D(1),Bt("aria-expanded",i.isMobileMenuOpen),D(2),nt("open",i.isMobileMenuOpen),D(1),L("ngIf",i.currentUser),D(7),L("ngIf",i.currentUser))},dependencies:[Gs,Pc,Bc,X0],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#1d1b1b}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:0 20px;box-shadow:0 2px 10px #0000001a;position:relative}.nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff}.nav-brand[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f0f0f0;opacity:.9;font-size:.95rem}.nav-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;border-radius:5px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:0 2px 5px #0003}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.username[_ngcontent-%COMP%]{color:#f0f0f0;font-size:14px;font-weight:500}.btn-signout[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background-color:transparent;color:#fff;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-signout[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#1d1b1b}.desktop-only[_ngcontent-%COMP%]{display:flex}.mobile-only[_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.35);color:#fff;border-radius:6px;padding:6px 10px;font-size:18px;cursor:pointer}.mobile-menu[_ngcontent-%COMP%]{display:none!important;position:absolute;right:12px;top:100%;margin-top:8px;width:220px;z-index:100;flex-direction:column;gap:8px;padding:10px 12px 12px;border:1px solid rgba(255,255,255,.16);border-radius:10px;background:#1b1f2a;box-shadow:0 10px 28px #00000059}.mobile-menu.open[_ngcontent-%COMP%]{display:flex!important}.mobile-menu[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin-bottom:4px;display:inline-block;opacity:.9}.mobile-link[_ngcontent-%COMP%]{text-align:left;color:#fff;text-decoration:none;padding:10px 12px;border:1px solid rgba(255,255,255,.12);border-radius:6px;background:rgba(255,255,255,.05);font-size:14px}.mobile-link.signout[_ngcontent-%COMP%]{border-color:#dc3545;background:rgba(220,53,69,.15)}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.nav-container[_ngcontent-%COMP%]{padding:8px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}"]}),n})(),canActivate:[(()=>{const t=class{constructor(r,o){this.supabaseService=r,this.router=o}canActivate(r,o){const i=this.supabaseService.isSignedIn(),s=this.supabaseService.getCurrentUser();return!(!i||!s)||(this.router.navigate(["/signin"],{queryParams:{returnUrl:o.url}}),!1)}};let n=t;return t.\u0275fac=function(o){return new(o||t)(G(Sa),G(xt))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})()],children:[{path:"collection",component:m$},{path:"suggestion",component:P$}]},{path:"**",redirectTo:"/signin"}];let U$=(()=>{const t=class{};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Ln({type:t}),t.\u0275inj=En({imports:[aD.forRoot($$),aD]}),n})(),B$=(()=>{const t=class{};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Ln({type:t,bootstrap:[rL]}),t.\u0275inj=En({imports:[Jk,ob,ER,ON,U$]}),n})();Kk().bootstrapModule(B$).catch(n=>console.error(n))},397:(It,de,X)=>{"use strict";X.r(de),X.d(de,{Headers:()=>I,Request:()=>O,Response:()=>H,default:()=>He,fetch:()=>Ne});var ve=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const Ne=ve.fetch,He=ve.fetch.bind(ve),I=ve.Headers,O=ve.Request,H=ve.Response},369:(It,de,X)=>{"use strict";var oe=X(156).default;Object.defineProperty(de,"__esModule",{value:!0});const ve=X(582),Ne=ve.__importDefault(X(397)),He=ve.__importDefault(X(839));de.default=class I{constructor(H){var K,ne;this.shouldThrowOnError=!1,this.method=H.method,this.url=H.url,this.headers=new Headers(H.headers),this.schema=H.schema,this.body=H.body,this.shouldThrowOnError=null!==(K=H.shouldThrowOnError)&&void 0!==K&&K,this.signal=H.signal,this.isMaybeSingle=null!==(ne=H.isMaybeSingle)&&void 0!==ne&&ne,this.fetch=H.fetch?H.fetch:typeof fetch>"u"?Ne.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(H,K){return this.headers=new Headers(this.headers),this.headers.set(H,K),this}then(H,K){var ne=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Re=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var De=oe(function*(Fe){var it,zt,Ot,Je;let st=null,Mt=null,Zn=null,Xt=Fe.status,bn=Fe.statusText;if(Fe.ok){if("HEAD"!==ne.method){const jr=yield Fe.text();""===jr||(Mt="text/csv"===ne.headers.get("Accept")||ne.headers.get("Accept")&&null!==(it=ne.headers.get("Accept"))&&void 0!==it&&it.includes("application/vnd.pgrst.plan+text")?jr:JSON.parse(jr))}const en=null===(zt=ne.headers.get("Prefer"))||void 0===zt?void 0:zt.match(/count=(exact|planned|estimated)/),wn=null===(Ot=Fe.headers.get("content-range"))||void 0===Ot?void 0:Ot.split("/");en&&wn&&wn.length>1&&(Zn=parseInt(wn[1])),ne.isMaybeSingle&&"GET"===ne.method&&Array.isArray(Mt)&&(Mt.length>1?(st={code:"PGRST116",details:`Results contain ${Mt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Mt=null,Zn=null,Xt=406,bn="Not Acceptable"):Mt=1===Mt.length?Mt[0]:null)}else{const en=yield Fe.text();try{st=JSON.parse(en),Array.isArray(st)&&404===Fe.status&&(Mt=[],st=null,Xt=200,bn="OK")}catch{404===Fe.status&&""===en?(Xt=204,bn="No Content"):st={message:en}}if(st&&ne.isMaybeSingle&&!(null===(Je=st?.details)||void 0===Je)&&Je.includes("0 rows")&&(st=null,Xt=200,bn="OK"),st&&ne.shouldThrowOnError)throw new He.default(st)}return{error:st,data:Mt,count:Zn,status:Xt,statusText:bn}});return function(Fe){return De.apply(this,arguments)}}());return this.shouldThrowOnError||(Re=Re.catch(De=>{var Fe,it,zt;return{error:{message:`${null!==(Fe=De?.name)&&void 0!==Fe?Fe:"FetchError"}: ${De?.message}`,details:`${null!==(it=De?.stack)&&void 0!==it?it:""}`,hint:"",code:`${null!==(zt=De?.code)&&void 0!==zt?zt:""}`},data:null,count:null,status:0,statusText:""}})),Re.then(H,K)}returns(){return this}overrideTypes(){return this}}},851:(It,de,X)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const oe=X(582),ve=oe.__importDefault(X(241)),Ne=oe.__importDefault(X(105));class He{constructor(O,{headers:H={},schema:K,fetch:ne}={}){this.url=O,this.headers=new Headers(H),this.schemaName=K,this.fetch=ne}from(O){const H=new URL(`${this.url}/${O}`);return new ve.default(H,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(O){return new He(this.url,{headers:this.headers,schema:O,fetch:this.fetch})}rpc(O,H={},{head:K=!1,get:ne=!1,count:Ee}={}){var Re;let De;const Fe=new URL(`${this.url}/rpc/${O}`);let it;K||ne?(De=K?"HEAD":"GET",Object.entries(H).filter(([Ot,Je])=>void 0!==Je).map(([Ot,Je])=>[Ot,Array.isArray(Je)?`{${Je.join(",")}}`:`${Je}`]).forEach(([Ot,Je])=>{Fe.searchParams.append(Ot,Je)})):(De="POST",it=H);const zt=new Headers(this.headers);return Ee&&zt.set("Prefer",`count=${Ee}`),new Ne.default({method:De,url:Fe,headers:zt,schema:this.schemaName,body:it,fetch:null!==(Re=this.fetch)&&void 0!==Re?Re:fetch})}}de.default=He},839:(It,de)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});class X extends Error{constructor(ve){super(ve.message),this.name="PostgrestError",this.details=ve.details,this.hint=ve.hint,this.code=ve.code}}de.default=X},105:(It,de,X)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const ve=X(582).__importDefault(X(594));de.default=class Ne extends ve.default{eq(I,O){return this.url.searchParams.append(I,`eq.${O}`),this}neq(I,O){return this.url.searchParams.append(I,`neq.${O}`),this}gt(I,O){return this.url.searchParams.append(I,`gt.${O}`),this}gte(I,O){return this.url.searchParams.append(I,`gte.${O}`),this}lt(I,O){return this.url.searchParams.append(I,`lt.${O}`),this}lte(I,O){return this.url.searchParams.append(I,`lte.${O}`),this}like(I,O){return this.url.searchParams.append(I,`like.${O}`),this}likeAllOf(I,O){return this.url.searchParams.append(I,`like(all).{${O.join(",")}}`),this}likeAnyOf(I,O){return this.url.searchParams.append(I,`like(any).{${O.join(",")}}`),this}ilike(I,O){return this.url.searchParams.append(I,`ilike.${O}`),this}ilikeAllOf(I,O){return this.url.searchParams.append(I,`ilike(all).{${O.join(",")}}`),this}ilikeAnyOf(I,O){return this.url.searchParams.append(I,`ilike(any).{${O.join(",")}}`),this}is(I,O){return this.url.searchParams.append(I,`is.${O}`),this}in(I,O){const H=Array.from(new Set(O)).map(K=>"string"==typeof K&&new RegExp("[,()]").test(K)?`"${K}"`:`${K}`).join(",");return this.url.searchParams.append(I,`in.(${H})`),this}contains(I,O){return"string"==typeof O?this.url.searchParams.append(I,`cs.${O}`):Array.isArray(O)?this.url.searchParams.append(I,`cs.{${O.join(",")}}`):this.url.searchParams.append(I,`cs.${JSON.stringify(O)}`),this}containedBy(I,O){return"string"==typeof O?this.url.searchParams.append(I,`cd.${O}`):Array.isArray(O)?this.url.searchParams.append(I,`cd.{${O.join(",")}}`):this.url.searchParams.append(I,`cd.${JSON.stringify(O)}`),this}rangeGt(I,O){return this.url.searchParams.append(I,`sr.${O}`),this}rangeGte(I,O){return this.url.searchParams.append(I,`nxl.${O}`),this}rangeLt(I,O){return this.url.searchParams.append(I,`sl.${O}`),this}rangeLte(I,O){return this.url.searchParams.append(I,`nxr.${O}`),this}rangeAdjacent(I,O){return this.url.searchParams.append(I,`adj.${O}`),this}overlaps(I,O){return this.url.searchParams.append(I,"string"==typeof O?`ov.${O}`:`ov.{${O.join(",")}}`),this}textSearch(I,O,{config:H,type:K}={}){let ne="";return"plain"===K?ne="pl":"phrase"===K?ne="ph":"websearch"===K&&(ne="w"),this.url.searchParams.append(I,`${ne}fts${void 0===H?"":`(${H})`}.${O}`),this}match(I){return Object.entries(I).forEach(([O,H])=>{this.url.searchParams.append(O,`eq.${H}`)}),this}not(I,O,H){return this.url.searchParams.append(I,`not.${O}.${H}`),this}or(I,{foreignTable:O,referencedTable:H=O}={}){return this.url.searchParams.append(H?`${H}.or`:"or",`(${I})`),this}filter(I,O,H){return this.url.searchParams.append(I,`${O}.${H}`),this}}},241:(It,de,X)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const ve=X(582).__importDefault(X(105));de.default=class Ne{constructor(I,{headers:O={},schema:H,fetch:K}){this.url=I,this.headers=new Headers(O),this.schema=H,this.fetch=K}select(I,O){const{head:H=!1,count:K}=O??{},ne=H?"HEAD":"GET";let Ee=!1;const Re=(I??"*").split("").map(De=>/\s/.test(De)&&!Ee?"":('"'===De&&(Ee=!Ee),De)).join("");return this.url.searchParams.set("select",Re),K&&this.headers.append("Prefer",`count=${K}`),new ve.default({method:ne,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(I,{count:O,defaultToNull:H=!0}={}){var K;if(O&&this.headers.append("Prefer",`count=${O}`),H||this.headers.append("Prefer","missing=default"),Array.isArray(I)){const Ee=I.reduce((Re,De)=>Re.concat(Object.keys(De)),[]);if(Ee.length>0){const Re=[...new Set(Ee)].map(De=>`"${De}"`);this.url.searchParams.set("columns",Re.join(","))}}return new ve.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(K=this.fetch)&&void 0!==K?K:fetch})}upsert(I,{onConflict:O,ignoreDuplicates:H=!1,count:K,defaultToNull:ne=!0}={}){var Ee;if(this.headers.append("Prefer",`resolution=${H?"ignore":"merge"}-duplicates`),void 0!==O&&this.url.searchParams.set("on_conflict",O),K&&this.headers.append("Prefer",`count=${K}`),ne||this.headers.append("Prefer","missing=default"),Array.isArray(I)){const De=I.reduce((Fe,it)=>Fe.concat(Object.keys(it)),[]);if(De.length>0){const Fe=[...new Set(De)].map(it=>`"${it}"`);this.url.searchParams.set("columns",Fe.join(","))}}return new ve.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(Ee=this.fetch)&&void 0!==Ee?Ee:fetch})}update(I,{count:O}={}){var H;return O&&this.headers.append("Prefer",`count=${O}`),new ve.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(H=this.fetch)&&void 0!==H?H:fetch})}delete({count:I}={}){var O;return I&&this.headers.append("Prefer",`count=${I}`),new ve.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(O=this.fetch)&&void 0!==O?O:fetch})}}},594:(It,de,X)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const ve=X(582).__importDefault(X(369));de.default=class Ne extends ve.default{select(I){let O=!1;const H=(I??"*").split("").map(K=>/\s/.test(K)&&!O?"":('"'===K&&(O=!O),K)).join("");return this.url.searchParams.set("select",H),this.headers.append("Prefer","return=representation"),this}order(I,{ascending:O=!0,nullsFirst:H,foreignTable:K,referencedTable:ne=K}={}){const Ee=ne?`${ne}.order`:"order",Re=this.url.searchParams.get(Ee);return this.url.searchParams.set(Ee,`${Re?`${Re},`:""}${I}.${O?"asc":"desc"}${void 0===H?"":H?".nullsfirst":".nullslast"}`),this}limit(I,{foreignTable:O,referencedTable:H=O}={}){return this.url.searchParams.set(typeof H>"u"?"limit":`${H}.limit`,`${I}`),this}range(I,O,{foreignTable:H,referencedTable:K=H}={}){const Ee=typeof K>"u"?"limit":`${K}.limit`;return this.url.searchParams.set(typeof K>"u"?"offset":`${K}.offset`,`${I}`),this.url.searchParams.set(Ee,""+(O-I+1)),this}abortSignal(I){return this.signal=I,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:I=!1,verbose:O=!1,settings:H=!1,buffers:K=!1,wal:ne=!1,format:Ee="text"}={}){var Re;const De=[I?"analyze":null,O?"verbose":null,H?"settings":null,K?"buffers":null,ne?"wal":null].filter(Boolean).join("|"),Fe=null!==(Re=this.headers.get("Accept"))&&void 0!==Re?Re:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${Ee}; for="${Fe}"; options=${De};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(I){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${I}`),this}}},358:(It,de,X)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0}),de.PostgrestError=de.PostgrestBuilder=de.PostgrestTransformBuilder=de.PostgrestFilterBuilder=de.PostgrestQueryBuilder=de.PostgrestClient=void 0;const oe=X(582),ve=oe.__importDefault(X(851));de.PostgrestClient=ve.default;const Ne=oe.__importDefault(X(241));de.PostgrestQueryBuilder=Ne.default;const He=oe.__importDefault(X(105));de.PostgrestFilterBuilder=He.default;const I=oe.__importDefault(X(594));de.PostgrestTransformBuilder=I.default;const O=oe.__importDefault(X(369));de.PostgrestBuilder=O.default;const H=oe.__importDefault(X(839));de.PostgrestError=H.default,de.default={PostgrestClient:ve.default,PostgrestQueryBuilder:Ne.default,PostgrestFilterBuilder:He.default,PostgrestTransformBuilder:I.default,PostgrestBuilder:O.default,PostgrestError:H.default}},156:It=>{function de(oe,ve,Ne,He,I,O,H){try{var K=oe[O](H),ne=K.value}catch(Ee){return void Ne(Ee)}K.done?ve(ne):Promise.resolve(ne).then(He,I)}It.exports=function X(oe){return function(){var ve=this,Ne=arguments;return new Promise(function(He,I){var O=oe.apply(ve,Ne);function H(ne){de(O,He,I,H,K,"next",ne)}function K(ne){de(O,He,I,H,K,"throw",ne)}H(void 0)})}},It.exports.__esModule=!0,It.exports.default=It.exports},582:(It,de,X)=>{"use strict";X.r(de),X.d(de,{__addDisposableResource:()=>ze,__assign:()=>Ne,__asyncDelegator:()=>Ji,__asyncGenerator:()=>bn,__asyncValues:()=>en,__await:()=>Xt,__awaiter:()=>De,__classPrivateFieldGet:()=>Xn,__classPrivateFieldIn:()=>Qi,__classPrivateFieldSet:()=>xa,__createBinding:()=>it,__decorate:()=>I,__disposeResources:()=>Ta,__esDecorate:()=>H,__exportStar:()=>zt,__extends:()=>ve,__generator:()=>Fe,__importDefault:()=>Ro,__importStar:()=>Ea,__makeTemplateObject:()=>wn,__metadata:()=>Re,__param:()=>O,__propKey:()=>ne,__read:()=>Je,__rest:()=>He,__rewriteRelativeImportExtension:()=>Ia,__runInitializers:()=>K,__setFunctionName:()=>Ee,__spread:()=>st,__spreadArray:()=>Zn,__spreadArrays:()=>Mt,__values:()=>Ot,default:()=>eu});var oe=function(w,M){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var N in S)Object.prototype.hasOwnProperty.call(S,N)&&(T[N]=S[N])})(w,M)};function ve(w,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function T(){this.constructor=w}oe(w,M),w.prototype=null===M?Object.create(M):(T.prototype=M.prototype,new T)}var Ne=function(){return Ne=Object.assign||function(M){for(var T,S=1,N=arguments.length;S<N;S++)for(var U in T=arguments[S])Object.prototype.hasOwnProperty.call(T,U)&&(M[U]=T[U]);return M},Ne.apply(this,arguments)};function He(w,M){var T={};for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&M.indexOf(S)<0&&(T[S]=w[S]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(S=Object.getOwnPropertySymbols(w);N<S.length;N++)M.indexOf(S[N])<0&&Object.prototype.propertyIsEnumerable.call(w,S[N])&&(T[S[N]]=w[S[N]])}return T}function I(w,M,T,S){var k,N=arguments.length,U=N<3?M:null===S?S=Object.getOwnPropertyDescriptor(M,T):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)U=Reflect.decorate(w,M,T,S);else for(var V=w.length-1;V>=0;V--)(k=w[V])&&(U=(N<3?k(U):N>3?k(M,T,U):k(M,T))||U);return N>3&&U&&Object.defineProperty(M,T,U),U}function O(w,M){return function(T,S){M(T,S,w)}}function H(w,M,T,S,N,U){function k(er){if(void 0!==er&&"function"!=typeof er)throw new TypeError("Function expected");return er}for(var bt,V=S.kind,Tt="getter"===V?"get":"setter"===V?"set":"value",ue=!M&&w?S.static?w:w.prototype:null,We=M||(ue?Object.getOwnPropertyDescriptor(ue,S.name):{}),Vr=!1,Ve=T.length-1;Ve>=0;Ve--){var Ft={};for(var tn in S)Ft[tn]="access"===tn?{}:S[tn];for(var tn in S.access)Ft.access[tn]=S.access[tn];Ft.addInitializer=function(er){if(Vr)throw new TypeError("Cannot add initializers after decoration has completed");U.push(k(er||null))};var Dn=(0,T[Ve])("accessor"===V?{get:We.get,set:We.set}:We[Tt],Ft);if("accessor"===V){if(void 0===Dn)continue;if(null===Dn||"object"!=typeof Dn)throw new TypeError("Object expected");(bt=k(Dn.get))&&(We.get=bt),(bt=k(Dn.set))&&(We.set=bt),(bt=k(Dn.init))&&N.unshift(bt)}else(bt=k(Dn))&&("field"===V?N.unshift(bt):We[Tt]=bt)}ue&&Object.defineProperty(ue,S.name,We),Vr=!0}function K(w,M,T){for(var S=arguments.length>2,N=0;N<M.length;N++)T=S?M[N].call(w,T):M[N].call(w);return S?T:void 0}function ne(w){return"symbol"==typeof w?w:"".concat(w)}function Ee(w,M,T){return"symbol"==typeof M&&(M=M.description?"[".concat(M.description,"]"):""),Object.defineProperty(w,"name",{configurable:!0,value:T?"".concat(T," ",M):M})}function Re(w,M){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(w,M)}function De(w,M,T,S){return new(T||(T=Promise))(function(U,k){function V(We){try{ue(S.next(We))}catch(bt){k(bt)}}function Tt(We){try{ue(S.throw(We))}catch(bt){k(bt)}}function ue(We){We.done?U(We.value):function N(U){return U instanceof T?U:new T(function(k){k(U)})}(We.value).then(V,Tt)}ue((S=S.apply(w,M||[])).next())})}function Fe(w,M){var S,N,U,T={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]},k=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return k.next=V(0),k.throw=V(1),k.return=V(2),"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k;function V(ue){return function(We){return function Tt(ue){if(S)throw new TypeError("Generator is already executing.");for(;k&&(k=0,ue[0]&&(T=0)),T;)try{if(S=1,N&&(U=2&ue[0]?N.return:ue[0]?N.throw||((U=N.return)&&U.call(N),0):N.next)&&!(U=U.call(N,ue[1])).done)return U;switch(N=0,U&&(ue=[2&ue[0],U.value]),ue[0]){case 0:case 1:U=ue;break;case 4:return T.label++,{value:ue[1],done:!1};case 5:T.label++,N=ue[1],ue=[0];continue;case 7:ue=T.ops.pop(),T.trys.pop();continue;default:if(!(U=(U=T.trys).length>0&&U[U.length-1])&&(6===ue[0]||2===ue[0])){T=0;continue}if(3===ue[0]&&(!U||ue[1]>U[0]&&ue[1]<U[3])){T.label=ue[1];break}if(6===ue[0]&&T.label<U[1]){T.label=U[1],U=ue;break}if(U&&T.label<U[2]){T.label=U[2],T.ops.push(ue);break}U[2]&&T.ops.pop(),T.trys.pop();continue}ue=M.call(w,T)}catch(We){ue=[6,We],N=0}finally{S=U=0}if(5&ue[0])throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}([ue,We])}}}var it=Object.create?function(w,M,T,S){void 0===S&&(S=T);var N=Object.getOwnPropertyDescriptor(M,T);(!N||("get"in N?!M.__esModule:N.writable||N.configurable))&&(N={enumerable:!0,get:function(){return M[T]}}),Object.defineProperty(w,S,N)}:function(w,M,T,S){void 0===S&&(S=T),w[S]=M[T]};function zt(w,M){for(var T in w)"default"!==T&&!Object.prototype.hasOwnProperty.call(M,T)&&it(M,w,T)}function Ot(w){var M="function"==typeof Symbol&&Symbol.iterator,T=M&&w[M],S=0;if(T)return T.call(w);if(w&&"number"==typeof w.length)return{next:function(){return w&&S>=w.length&&(w=void 0),{value:w&&w[S++],done:!w}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je(w,M){var T="function"==typeof Symbol&&w[Symbol.iterator];if(!T)return w;var N,k,S=T.call(w),U=[];try{for(;(void 0===M||M-- >0)&&!(N=S.next()).done;)U.push(N.value)}catch(V){k={error:V}}finally{try{N&&!N.done&&(T=S.return)&&T.call(S)}finally{if(k)throw k.error}}return U}function st(){for(var w=[],M=0;M<arguments.length;M++)w=w.concat(Je(arguments[M]));return w}function Mt(){for(var w=0,M=0,T=arguments.length;M<T;M++)w+=arguments[M].length;var S=Array(w),N=0;for(M=0;M<T;M++)for(var U=arguments[M],k=0,V=U.length;k<V;k++,N++)S[N]=U[k];return S}function Zn(w,M,T){if(T||2===arguments.length)for(var U,S=0,N=M.length;S<N;S++)(U||!(S in M))&&(U||(U=Array.prototype.slice.call(M,0,S)),U[S]=M[S]);return w.concat(U||Array.prototype.slice.call(M))}function Xt(w){return this instanceof Xt?(this.v=w,this):new Xt(w)}function bn(w,M,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,S=T.apply(w,M||[]),U=[];return N=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),V("next"),V("throw"),V("return",function k(Ve){return function(Ft){return Promise.resolve(Ft).then(Ve,bt)}}),N[Symbol.asyncIterator]=function(){return this},N;function V(Ve,Ft){S[Ve]&&(N[Ve]=function(tn){return new Promise(function(Dn,er){U.push([Ve,tn,Dn,er])>1||Tt(Ve,tn)})},Ft&&(N[Ve]=Ft(N[Ve])))}function Tt(Ve,Ft){try{!function ue(Ve){Ve.value instanceof Xt?Promise.resolve(Ve.value.v).then(We,bt):Vr(U[0][2],Ve)}(S[Ve](Ft))}catch(tn){Vr(U[0][3],tn)}}function We(Ve){Tt("next",Ve)}function bt(Ve){Tt("throw",Ve)}function Vr(Ve,Ft){Ve(Ft),U.shift(),U.length&&Tt(U[0][0],U[0][1])}}function Ji(w){var M,T;return M={},S("next"),S("throw",function(N){throw N}),S("return"),M[Symbol.iterator]=function(){return this},M;function S(N,U){M[N]=w[N]?function(k){return(T=!T)?{value:Xt(w[N](k)),done:!1}:U?U(k):k}:U}}function en(w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,M=w[Symbol.asyncIterator];return M?M.call(w):(w=Ot(w),T={},S("next"),S("throw"),S("return"),T[Symbol.asyncIterator]=function(){return this},T);function S(U){T[U]=w[U]&&function(k){return new Promise(function(V,Tt){!function N(U,k,V,Tt){Promise.resolve(Tt).then(function(ue){U({value:ue,done:V})},k)}(V,Tt,(k=w[U](k)).done,k.value)})}}}function wn(w,M){return Object.defineProperty?Object.defineProperty(w,"raw",{value:M}):w.raw=M,w}var jr=Object.create?function(w,M){Object.defineProperty(w,"default",{enumerable:!0,value:M})}:function(w,M){w.default=M},lo=function(w){return(lo=Object.getOwnPropertyNames||function(M){var T=[];for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&(T[T.length]=S);return T})(w)};function Ea(w){if(w&&w.__esModule)return w;var M={};if(null!=w)for(var T=lo(w),S=0;S<T.length;S++)"default"!==T[S]&&it(M,w,T[S]);return jr(M,w),M}function Ro(w){return w&&w.__esModule?w:{default:w}}function Xn(w,M,T,S){if("a"===T&&!S)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof M?w!==M||!S:!M.has(w))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===T?S:"a"===T?S.call(w):S?S.value:M.get(w)}function xa(w,M,T,S,N){if("m"===S)throw new TypeError("Private method is not writable");if("a"===S&&!N)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof M?w!==M||!N:!M.has(w))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===S?N.call(w,T):N?N.value=T:M.set(w,T),T}function Qi(w,M){if(null===M||"object"!=typeof M&&"function"!=typeof M)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof w?M===w:w.has(M)}function ze(w,M,T){if(null!=M){if("object"!=typeof M&&"function"!=typeof M)throw new TypeError("Object expected.");var S,N;if(T){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");S=M[Symbol.asyncDispose]}if(void 0===S){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");S=M[Symbol.dispose],T&&(N=S)}if("function"!=typeof S)throw new TypeError("Object not disposable.");N&&(S=function(){try{N.call(this)}catch(U){return Promise.reject(U)}}),w.stack.push({value:M,dispose:S,async:T})}else T&&w.stack.push({async:!0});return M}var Ma="function"==typeof SuppressedError?SuppressedError:function(w,M,T){var S=new Error(T);return S.name="SuppressedError",S.error=w,S.suppressed=M,S};function Ta(w){function M(U){w.error=w.hasError?new Ma(U,w.error,"An error was suppressed during disposal."):U,w.hasError=!0}var T,S=0;return function N(){for(;T=w.stack.pop();)try{if(!T.async&&1===S)return S=0,w.stack.push(T),Promise.resolve().then(N);if(T.dispose){var U=T.dispose.call(T.value);if(T.async)return S|=2,Promise.resolve(U).then(N,function(k){return M(k),N()})}else S|=1}catch(k){M(k)}if(1===S)return w.hasError?Promise.reject(w.error):Promise.resolve();if(w.hasError)throw w.error}()}function Ia(w,M){return"string"==typeof w&&/^\.\.?\//.test(w)?w.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(T,S,N,U,k){return S?M?".jsx":".js":!N||U&&k?N+U+"."+k.toLowerCase()+"js":T}):w}const eu={__extends:ve,__assign:Ne,__rest:He,__decorate:I,__param:O,__esDecorate:H,__runInitializers:K,__propKey:ne,__setFunctionName:Ee,__metadata:Re,__awaiter:De,__generator:Fe,__createBinding:it,__exportStar:zt,__values:Ot,__read:Je,__spread:st,__spreadArrays:Mt,__spreadArray:Zn,__await:Xt,__asyncGenerator:bn,__asyncDelegator:Ji,__asyncValues:en,__makeTemplateObject:wn,__importStar:Ea,__importDefault:Ro,__classPrivateFieldGet:Xn,__classPrivateFieldSet:xa,__classPrivateFieldIn:Qi,__addDisposableResource:ze,__disposeResources:Ta,__rewriteRelativeImportExtension:Ia}}},It=>{It(It.s=337)}]);