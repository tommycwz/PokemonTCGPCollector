(self.webpackChunkPokemonTCGPCollector=self.webpackChunkPokemonTCGPCollector||[]).push([[179],{71:(It,he,ee)=>{"use strict";function re(n){return"function"==typeof n}function Ce(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const je=Ce(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function qe(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class I{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const i of e)i.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(re(r))try{r()}catch(i){t=i instanceof je?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{K(i)}catch(s){t=t??[],s instanceof je?t=[...t,...s.errors]:t.push(s)}}if(t)throw new je(t)}}add(t){var e;if(t&&t!==this)if(this.closed)K(t);else{if(t instanceof I){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&qe(e,t)}remove(t){const{_finalizers:e}=this;e&&qe(e,t),t instanceof I&&t._removeParent(this)}}I.EMPTY=(()=>{const n=new I;return n.closed=!0,n})();const A=I.EMPTY;function H(n){return n instanceof I||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function K(n){re(n)?n():n.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Me={setTimeout(n,t,...e){const{delegate:r}=Me;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=Me;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Fe(n){Me.setTimeout(()=>{const{onUnhandledError:t}=te;if(!t)throw n;t(n)})}function Se(){}const Ve=Ot("C",void 0,void 0);function Ot(n,t,e){return{kind:n,value:t,error:e}}let Ze=null;function st(n){if(te.useDeprecatedSynchronousErrorHandling){const t=!Ze;if(t&&(Ze={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=Ze;if(Ze=null,e)throw r}}else n()}class Xn extends I{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,H(t)&&t.add(this)):this.destination=Oa}static create(t,e,r){return new en(t,e,r)}next(t){this.isStopped?fo(function zt(n){return Ot("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?fo(function it(n){return Ot("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?fo(Ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xt=Function.prototype.bind;function wn(n,t){return Xt.call(n,t)}class os{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Dn(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Dn(r)}else Dn(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Dn(e)}}}class en extends Xn{constructor(t,e,r){let o;if(super(),re(t)||!t)o={next:t??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&te.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&wn(t.next,i),error:t.error&&wn(t.error,i),complete:t.complete&&wn(t.complete,i)}):o=t}this.destination=new os(o)}}function Dn(n){te.useDeprecatedSynchronousErrorHandling?function Mt(n){te.useDeprecatedSynchronousErrorHandling&&Ze&&(Ze.errorThrown=!0,Ze.error=n)}(n):Fe(n)}function fo(n,t){const{onStoppedNotification:e}=te;e&&Me.setTimeout(()=>e(n,t))}const Oa={closed:!0,next:Se,error:function Ur(n){throw n},complete:Se},Fo="function"==typeof Symbol&&Symbol.observable||"@@observable";function er(n){return n}function is(n){return 0===n.length?er:1===n.length?n[0]:function(e){return n.reduce((r,o)=>o(r),e)}}let We=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,o){const i=function Ra(n){return n&&n instanceof Xn||function ka(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}(n)&&H(n)}(e)?e:new en(e,r,o);return st(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=Pa(r))((o,i)=>{const s=new en({next:a=>{try{e(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[Fo](){return this}pipe(...e){return is(e)(this)}toPromise(e){return new(e=Pa(e))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=t=>new n(t),n})();function Pa(n){var t;return null!==(t=n??te.Promise)&&void 0!==t?t:Promise}const du=Ce(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let D=(()=>{class n extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new x(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new du}next(e){st(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){st(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){st(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:o,observers:i}=this;return r||o?A:(this.currentObservers=null,i.push(e),new I(()=>{this.currentObservers=null,qe(i,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:o,isStopped:i}=this;r?e.error(o):i&&e.complete()}asObservable(){const e=new We;return e.source=this,e}}return n.create=(t,e)=>new x(t,e),n})();class x extends D{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:A}}function M(n){return re(n?.lift)}function S(n){return t=>{if(M(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function F(n,t,e,r,o){return new U(n,t,e,r,o)}class U extends Xn{constructor(t,e,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function R(n,t){return S((e,r)=>{let o=0;e.subscribe(F(r,i=>{r.next(n.call(t,i,o++))}))})}var V=ee(582);const Tt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function de(n){return re(n?.then)}function Ye(n){return re(n[Fo])}function wt(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Br(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ft=function Be(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tn(n){return re(n?.[Ft])}function En(n){return(0,V.__asyncGenerator)(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:o}=yield(0,V.__await)(e.read());if(o)return yield(0,V.__await)(void 0);yield yield(0,V.__await)(r)}}finally{e.releaseLock()}})}function tr(n){return re(n?.getReader)}function jn(n){if(n instanceof We)return n;if(null!=n){if(Ye(n))return function sE(n){return new We(t=>{const e=n[Fo]();if(re(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Tt(n))return function aE(n){return new We(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(de(n))return function lE(n){return new We(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Fe)})}(n);if(wt(n))return Xp(n);if(tn(n))return function cE(n){return new We(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(tr(n))return function uE(n){return Xp(En(n))}(n)}throw Br(n)}function Xp(n){return new We(t=>{(function dE(n,t){var e,r,o,i;return(0,V.__awaiter)(this,void 0,void 0,function*(){try{for(e=(0,V.__asyncValues)(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(o)throw o.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function vr(n,t,e,r=0,o=!1){const i=t.schedule(function(){e(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function At(n,t,e=1/0){return re(t)?At((r,o)=>R((i,s)=>t(r,i,o,s))(jn(n(r,o))),e):("number"==typeof t&&(e=t),S((r,o)=>function hE(n,t,e,r,o,i,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&t.complete()},f=_=>c<r?p(_):l.push(_),p=_=>{i&&t.next(_),c++;let v=!1;jn(e(_,u++)).subscribe(F(t,w=>{o?.(w),i?f(w):t.next(w)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<r;){const w=l.shift();s?vr(t,s,()=>p(w)):p(w)}h()}catch(w){t.error(w)}}))};return n.subscribe(F(t,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,n,e)))}function Lo(n=1/0){return At(er,n)}const nr=new We(n=>n.complete());function hu(n){return n[n.length-1]}function eg(n){return re(hu(n))?n.pop():void 0}function ss(n){return function pE(n){return n&&re(n.schedule)}(hu(n))?n.pop():void 0}function tg(n,t=0){return S((e,r)=>{e.subscribe(F(r,o=>vr(r,n,()=>r.next(o),t),()=>vr(r,n,()=>r.complete(),t),o=>vr(r,n,()=>r.error(o),t)))})}function ng(n,t=0){return S((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function rg(n,t){if(!n)throw new Error("Iterable cannot be null");return new We(e=>{vr(e,t,()=>{const r=n[Symbol.asyncIterator]();vr(e,t,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function ft(n,t){return t?function bE(n,t){if(null!=n){if(Ye(n))return function mE(n,t){return jn(n).pipe(ng(t),tg(t))}(n,t);if(Tt(n))return function yE(n,t){return new We(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(de(n))return function _E(n,t){return jn(n).pipe(ng(t),tg(t))}(n,t);if(wt(n))return rg(n,t);if(tn(n))return function vE(n,t){return new We(e=>{let r;return vr(e,t,()=>{r=n[Ft](),vr(e,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void e.error(s)}i?e.complete():e.next(o)},0,!0)}),()=>re(r?.return)&&r.return()})}(n,t);if(tr(n))return function CE(n,t){return rg(En(n),t)}(n,t)}throw Br(n)}(n,t):jn(n)}function fu(n,t,...e){if(!0===t)return void n();if(!1===t)return;const r=new en({next:()=>{r.unsubscribe(),n()}});return t(...e).subscribe(r)}function $e(n){for(let t in n)if(n[t]===$e)return t;throw Error("Could not find renamed property on target object.")}function pu(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function He(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(He).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function gu(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const EE=$e({__forward_ref__:$e});function ze(n){return n.__forward_ref__=ze,n.toString=function(){return He(this())},n}function ie(n){return mu(n)?n():n}function mu(n){return"function"==typeof n&&n.hasOwnProperty(EE)&&n.__forward_ref__===ze}function _u(n){return n&&!!n.\u0275providers}const og="https://g.co/ng/security#xss";class $ extends Error{constructor(t,e){super(Na(t,e)),this.code=t}}function Na(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}function fe(n){return"string"==typeof n?n:null==n?"":String(n)}function Fa(n,t){throw new $(-201,!1)}function Sn(n,t){null==n&&function Ae(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function J(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xn(n){return{providers:n.providers||[],imports:n.imports||[]}}function La(n){return ig(n,ja)||ig(n,ag)}function ig(n,t){return n.hasOwnProperty(t)?n[t]:null}function sg(n){return n&&(n.hasOwnProperty(yu)||n.hasOwnProperty(PE))?n[yu]:null}const ja=$e({\u0275prov:$e}),yu=$e({\u0275inj:$e}),ag=$e({ngInjectableDef:$e}),PE=$e({ngInjectorDef:$e});var se=(()=>((se=se||{})[se.Default=0]="Default",se[se.Host=1]="Host",se[se.Self=2]="Self",se[se.SkipSelf=4]="SkipSelf",se[se.Optional=8]="Optional",se))();let vu;function Mn(n){const t=vu;return vu=n,t}function lg(n,t,e){const r=La(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&se.Optional?null:void 0!==t?t:void Fa(He(n))}const Ke=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),as={},Cu="__NG_DI_FLAG__",Va="ngTempTokenPath",RE="ngTokenPath",NE=/\n/gm,FE="\u0275",cg="__source";let ls;function jo(n){const t=ls;return ls=n,t}function LE(n,t=se.Default){if(void 0===ls)throw new $(-203,!1);return null===ls?lg(n,void 0,t):ls.get(n,t&se.Optional?null:void 0,t)}function q(n,t=se.Default){return(function kE(){return vu}()||LE)(ie(n),t)}function be(n,t=se.Default){return q(n,$a(t))}function $a(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bu(n){const t=[];for(let e=0;e<n.length;e++){const r=ie(n[e]);if(Array.isArray(r)){if(0===r.length)throw new $(900,!1);let o,i=se.Default;for(let s=0;s<r.length;s++){const a=r[s],l=jE(a);"number"==typeof l?-1===l?o=a.token:i|=l:o=a}t.push(q(o,i))}else t.push(q(r))}return t}function cs(n,t){return n[Cu]=t,n.prototype[Cu]=t,n}function jE(n){return n[Cu]}function Cr(n){return{toString:n}.toString()}var rr=(()=>((rr=rr||{})[rr.OnPush=0]="OnPush",rr[rr.Default=1]="Default",rr))(),or=(()=>{return(n=or||(or={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",or;var n})();const br={},Ie=[],Ua=$e({\u0275cmp:$e}),wu=$e({\u0275dir:$e}),Du=$e({\u0275pipe:$e}),dg=$e({\u0275mod:$e}),wr=$e({\u0275fac:$e}),us=$e({__NG_ELEMENT_ID__:$e});let UE=0;function Dr(n){return Cr(()=>{const t=fg(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||or.Emulated,id:"c"+UE++,styles:n.styles||Ie,_:null,schemas:n.schemas||null,tView:null};pg(e);const r=n.dependencies;return e.directiveDefs=Ba(r,!1),e.pipeDefs=Ba(r,!0),e})}function HE(n){return Pe(n)||Lt(n)}function zE(n){return null!==n}function Vn(n){return Cr(()=>({type:n.type,bootstrap:n.bootstrap||Ie,declarations:n.declarations||Ie,imports:n.imports||Ie,exports:n.exports||Ie,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function hg(n,t){if(null==n)return br;const e={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),e[o]=r,t&&(t[o]=i)}return e}function ce(n){return Cr(()=>{const t=fg(n);return pg(t),t})}function Pe(n){return n[Ua]||null}function Lt(n){return n[wu]||null}function rn(n){return n[Du]||null}function un(n,t){const e=n[dg]||null;if(!e&&!0===t)throw new Error(`Type ${He(n)} does not have '\u0275mod' property.`);return e}function fg(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Ie,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hg(n.inputs,t),outputs:hg(n.outputs)}}function pg(n){n.features?.forEach(t=>t(n))}function Ba(n,t){if(!n)return null;const e=t?rn:HE;return()=>("function"==typeof n?n():n).map(r=>e(r)).filter(zE)}const Er=0,W=1,ye=2,nt=3,$n=4,po=5,jt=6,$o=7,at=8,Ha=9,za=10,we=11,Eu=12,ds=13,gg=14,Uo=15,Vt=16,hs=17,Bo=18,ir=19,fs=20,mg=21,Je=22,Su=1,_g=2,Ga=7,qa=8,Ho=9,Gt=10;function dn(n){return Array.isArray(n)&&"object"==typeof n[Su]}function Un(n){return Array.isArray(n)&&!0===n[Su]}function xu(n){return 0!=(4&n.flags)}function ps(n){return n.componentOffset>-1}function Wa(n){return 1==(1&n.flags)}function Bn(n){return!!n.template}function qE(n){return 0!=(256&n[ye])}function go(n,t){return n.hasOwnProperty(wr)?n[wr]:null}class JE{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Tn(){return Cg}function Cg(n){return n.type.prototype.ngOnChanges&&(n.setInput=QE),YE}function YE(){const n=wg(this),t=n?.current;if(t){const e=n.previous;if(e===br)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function QE(n,t,e,r){const o=this.declaredInputs[e],i=wg(n)||function ZE(n,t){return n[bg]=t}(n,{previous:br,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[o];s[o]=new JE(l&&l.currentValue,t,a===br),n[r]=t}Tn.ngInherit=!0;const bg="__ngSimpleChanges__";function wg(n){return n[bg]||null}const In=function(n,t,e){};function Pt(n){for(;Array.isArray(n);)n=n[Er];return n}function Ka(n,t){return Pt(t[n])}function hn(n,t){return Pt(t[n.index])}function Sg(n,t){return n.data[t]}function on(n,t){const e=t[n];return dn(e)?e:e[Er]}function Ja(n){return 64==(64&n[ye])}function zr(n,t){return null==t?null:n[t]}function xg(n){n[Bo]=0}function Tu(n,t){n[po]+=t;let e=n,r=n[nt];for(;null!==r&&(1===t&&1===e[po]||-1===t&&0===e[po]);)r[po]+=t,e=r,r=r[nt]}const pe={lFrame:Fg(null),bindingsEnabled:!0};function Tg(){return pe.bindingsEnabled}function L(){return pe.lFrame.lView}function Te(){return pe.lFrame.tView}function Q(n){return pe.lFrame.contextLView=n,n[at]}function Z(n){return pe.lFrame.contextLView=null,n}function kt(){let n=Ig();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ig(){return pe.lFrame.currentTNode}function sr(n,t){const e=pe.lFrame;e.currentTNode=n,e.isParent=t}function Iu(){return pe.lFrame.isParent}function Ou(){pe.lFrame.isParent=!1}function qt(){const n=pe.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Go(){return pe.lFrame.bindingIndex++}function xr(n){const t=pe.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function dS(n,t){const e=pe.lFrame;e.bindingIndex=e.bindingRootIndex=n,Au(t)}function Au(n){pe.lFrame.currentDirectiveIndex=n}function kg(){return pe.lFrame.currentQueryIndex}function ku(n){pe.lFrame.currentQueryIndex=n}function fS(n){const t=n[W];return 2===t.type?t.declTNode:1===t.type?n[jt]:null}function Rg(n,t,e){if(e&se.SkipSelf){let o=t,i=n;for(;!(o=o.parent,null!==o||e&se.Host||(o=fS(i),null===o||(i=i[Uo],10&o.type))););if(null===o)return!1;t=o,n=i}const r=pe.lFrame=Ng();return r.currentTNode=t,r.lView=n,!0}function Ru(n){const t=Ng(),e=n[W];pe.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Ng(){const n=pe.lFrame,t=null===n?null:n.child;return null===t?Fg(n):t}function Fg(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Lg(){const n=pe.lFrame;return pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const jg=Lg;function Nu(){const n=Lg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Wt(){return pe.lFrame.selectedIndex}function mo(n){pe.lFrame.selectedIndex=n}function Xe(){const n=pe.lFrame;return Sg(n.tView,n.selectedIndex)}function Ya(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const i=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(n.contentHooks??(n.contentHooks=[])).push(-e,s),a&&((n.contentHooks??(n.contentHooks=[])).push(e,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks??(n.viewHooks=[])).push(-e,l),c&&((n.viewHooks??(n.viewHooks=[])).push(e,c),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(e,c)),null!=u&&(n.destroyHooks??(n.destroyHooks=[])).push(e,u)}}function Qa(n,t,e){Vg(n,t,3,e)}function Za(n,t,e,r){(3&n[ye])===e&&Vg(n,t,e,r)}function Fu(n,t){let e=n[ye];(3&e)===t&&(e&=2047,e+=1,n[ye]=e)}function Vg(n,t,e,r){const i=r??-1,s=t.length-1;let a=0;for(let l=void 0!==r?65535&n[Bo]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(n[Bo]+=65536),(a<i||-1==i)&&(wS(n,e,t,l),n[Bo]=(4294901760&n[Bo])+l+2),l++}function wS(n,t,e,r){const o=e[r]<0,i=e[r+1],a=n[o?-e[r]:e[r]];if(o){if(n[ye]>>11<n[Bo]>>16&&(3&n[ye])===t){n[ye]+=2048,In(4,a,i);try{i.call(a)}finally{In(5,a,i)}}}else{In(4,a,i);try{i.call(a)}finally{In(5,a,i)}}}const qo=-1;class ms{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function ju(n,t,e){let r=0;for(;r<e.length;){const o=e[r];if("number"==typeof o){if(0!==o)break;r++;const i=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,i)}else{const i=o,s=e[++r];Ug(i)?n.setProperty(t,i,s):n.setAttribute(t,i,s),r++}}return r}function $g(n){return 3===n||4===n||6===n}function Ug(n){return 64===n.charCodeAt(0)}function _s(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?e=o:0===e||Bg(n,e,o,null,-1===e||2===e?t[++r]:null)}}return n}function Bg(n,t,e,r,o){let i=0,s=n.length;if(-1===t)s=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==o&&(n[i+1]=o));if(r===n[i+1])return void(n[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(n.splice(s,0,t),i=s+1),n.splice(i++,0,e),null!==r&&n.splice(i++,0,r),null!==o&&n.splice(i++,0,o)}function Hg(n){return n!==qo}function Xa(n){return 32767&n}function el(n,t){let e=function xS(n){return n>>16}(n),r=t;for(;e>0;)r=r[Uo],e--;return r}let Vu=!0;function tl(n){const t=Vu;return Vu=n,t}const zg=255,Gg=5;let MS=0;const ar={};function nl(n,t){const e=qg(n,t);if(-1!==e)return e;const r=t[W];r.firstCreatePass&&(n.injectorIndex=t.length,$u(r.data,n),$u(t,null),$u(r.blueprint,null));const o=Uu(n,t),i=n.injectorIndex;if(Hg(o)){const s=Xa(o),a=el(o,t),l=a[W].data;for(let c=0;c<8;c++)t[i+c]=a[s+c]|l[s+c]}return t[i+8]=o,i}function $u(n,t){n.push(0,0,0,0,0,0,0,0,t)}function qg(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Uu(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,o=t;for(;null!==o;){if(r=Xg(o),null===r)return qo;if(e++,o=o[Uo],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return qo}function Bu(n,t,e){!function TS(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(us)&&(r=e[us]),null==r&&(r=e[us]=MS++);const o=r&zg;t.data[n+(o>>Gg)]|=1<<o}(n,t,e)}function Wg(n,t,e){if(e&se.Optional||void 0!==n)return n;Fa()}function Kg(n,t,e,r){if(e&se.Optional&&void 0===r&&(r=null),!(e&(se.Self|se.Host))){const o=n[Ha],i=Mn(void 0);try{return o?o.get(t,r,e&se.Optional):lg(t,r,e&se.Optional)}finally{Mn(i)}}return Wg(r,0,e)}function Jg(n,t,e,r=se.Default,o){if(null!==n){if(1024&t[ye]){const s=function kS(n,t,e,r,o){let i=n,s=t;for(;null!==i&&null!==s&&1024&s[ye]&&!(256&s[ye]);){const a=Yg(i,s,e,r|se.Self,ar);if(a!==ar)return a;let l=i.parent;if(!l){const c=s[mg];if(c){const u=c.get(e,ar,r);if(u!==ar)return u}l=Xg(s),s=s[Uo]}i=l}return o}(n,t,e,r,ar);if(s!==ar)return s}const i=Yg(n,t,e,r,ar);if(i!==ar)return i}return Kg(t,e,r,o)}function Yg(n,t,e,r,o){const i=function AS(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(us)?n[us]:void 0;return"number"==typeof t?t>=0?t&zg:PS:t}(e);if("function"==typeof i){if(!Rg(t,n,r))return r&se.Host?Wg(o,0,r):Kg(t,e,r,o);try{const s=i(r);if(null!=s||r&se.Optional)return s;Fa()}finally{jg()}}else if("number"==typeof i){let s=null,a=qg(n,t),l=qo,c=r&se.Host?t[Vt][jt]:null;for((-1===a||r&se.SkipSelf)&&(l=-1===a?Uu(n,t):t[a+8],l!==qo&&Zg(r,!1)?(s=t[W],a=Xa(l),t=el(l,t)):a=-1);-1!==a;){const u=t[W];if(Qg(i,a,u.data)){const d=OS(a,t,e,s,r,c);if(d!==ar)return d}l=t[a+8],l!==qo&&Zg(r,t[W].data[a+8]===c)&&Qg(i,a,t)?(s=u,a=Xa(l),t=el(l,t)):a=-1}}return o}function OS(n,t,e,r,o,i){const s=t[W],a=s.data[n+8],u=rl(a,s,e,null==r?ps(a)&&Vu:r!=s&&0!=(3&a.type),o&se.Host&&i===a);return null!==u?_o(t,s,u,a):ar}function rl(n,t,e,r,o){const i=n.providerIndexes,s=t.data,a=1048575&i,l=n.directiveStart,u=i>>20,h=o?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(o){const f=s[l];if(f&&Bn(f)&&f.type===e)return l}return null}function _o(n,t,e,r){let o=n[e];const i=t.data;if(function DS(n){return n instanceof ms}(o)){const s=o;s.resolving&&function SE(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new $(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Oe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():fe(n)}(i[e]));const a=tl(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Mn(s.injectImpl):null;Rg(n,r,se.Default);try{o=n[e]=s.factory(void 0,i,n,r),t.firstCreatePass&&e>=r.directiveStart&&function bS(n,t,e){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){const s=Cg(t);(e.preOrderHooks??(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,s)}o&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-n,o),i&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n,i),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,i))}(e,i[e],t)}finally{null!==l&&Mn(l),tl(a),s.resolving=!1,jg()}}return o}function Qg(n,t,e){return!!(e[t+(n>>Gg)]&1<<n)}function Zg(n,t){return!(n&se.Self||n&se.Host&&t)}class Wo{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return Jg(this._tNode,this._lView,t,$a(r),e)}}function PS(){return new Wo(kt(),L())}function Rt(n){return Cr(()=>{const t=n.prototype.constructor,e=t[wr]||Hu(t),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const i=o[wr]||Hu(o);if(i&&i!==e)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Hu(n){return mu(n)?()=>{const t=Hu(ie(n));return t&&t()}:go(n)}function Xg(n){const t=n[W],e=t.type;return 2===e?t.declTNode:1===e?n[jt]:null}const Jo="__parameters__";function Qo(n,t,e){return Cr(()=>{const r=function zu(n){return function(...e){if(n){const r=n(...e);for(const o in r)this[o]=r[o]}}}(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Jo)?l[Jo]:Object.defineProperty(l,Jo,{value:[]})[Jo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}class Y{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=J({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function yo(n,t){n.forEach(e=>Array.isArray(e)?yo(e,t):t(e))}function tm(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function il(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function fn(n,t,e){let r=Zo(n,t);return r>=0?n[1|r]=e:(r=~r,function LS(n,t,e,r){let o=n.length;if(o==t)n.push(e,r);else if(1===o)n.push(r,n[0]),n[0]=e;else{for(o--,n.push(n[o-1],n[o]);o>t;)n[o]=n[o-2],o--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function qu(n,t){const e=Zo(n,t);if(e>=0)return n[1|e]}function Zo(n,t){return function nm(n,t,e){let r=0,o=n.length>>e;for(;o!==r;){const i=r+(o-r>>1),s=n[i<<e];if(t===s)return i<<e;s>t?o=i:r=i+1}return~(o<<e)}(n,t,1)}const bs=cs(Qo("Optional"),8),ws=cs(Qo("SkipSelf"),4);var sn=(()=>((sn=sn||{})[sn.Important=1]="Important",sn[sn.DashCase=2]="DashCase",sn))();const Zu=new Map;let i1=0;const ed="__ngContext__";function $t(n,t){dn(t)?(n[ed]=t[fs],function a1(n){Zu.set(n[fs],n)}(t)):n[ed]=t}let td;function nd(n,t){return td(n,t)}function xs(n){const t=n[nt];return Un(t)?t[nt]:t}function rd(n){return wm(n[ds])}function od(n){return wm(n[$n])}function wm(n){for(;null!==n&&!Un(n);)n=n[$n];return n}function ei(n,t,e,r,o){if(null!=r){let i,s=!1;Un(r)?i=r:dn(r)&&(s=!0,r=r[Er]);const a=Pt(r);0===n&&null!==e?null==o?Tm(t,e,a):vo(t,e,a,o||null,!0):1===n&&null!==e?vo(t,e,a,o||null,!0):2===n?function dd(n,t,e){const r=cl(n,t);r&&function M1(n,t,e,r){n.removeChild(t,e,r)}(n,r,t,e)}(t,a,s):3===n&&t.destroyNode(a),null!=i&&function O1(n,t,e,r,o){const i=e[Ga];i!==Pt(e)&&ei(t,n,r,i,o);for(let a=Gt;a<e.length;a++){const l=e[a];Ms(l[W],l,n,t,r,i)}}(t,n,i,e,o)}}function sd(n,t,e){return n.createElement(t,e)}function Em(n,t){const e=n[Ho],r=e.indexOf(t),o=t[nt];512&t[ye]&&(t[ye]&=-513,Tu(o,-1)),e.splice(r,1)}function ad(n,t){if(n.length<=Gt)return;const e=Gt+t,r=n[e];if(r){const o=r[hs];null!==o&&o!==n&&Em(o,r),t>0&&(n[e-1][$n]=r[$n]);const i=il(n,Gt+t);!function v1(n,t){Ms(n,t,t[we],2,null,null),t[Er]=null,t[jt]=null}(r[W],r);const s=i[ir];null!==s&&s.detachView(i[W]),r[nt]=null,r[$n]=null,r[ye]&=-65}return r}function Sm(n,t){if(!(128&t[ye])){const e=t[we];e.destroyNode&&Ms(n,t,e,3,null,null),function w1(n){let t=n[ds];if(!t)return ld(n[W],n);for(;t;){let e=null;if(dn(t))e=t[ds];else{const r=t[Gt];r&&(e=r)}if(!e){for(;t&&!t[$n]&&t!==n;)dn(t)&&ld(t[W],t),t=t[nt];null===t&&(t=n),dn(t)&&ld(t[W],t),e=t&&t[$n]}t=e}}(t)}}function ld(n,t){if(!(128&t[ye])){t[ye]&=-65,t[ye]|=128,function x1(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const o=t[e[r]];if(!(o instanceof ms)){const i=e[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],l=i[s+1];In(4,a,l);try{l.call(a)}finally{In(5,a,l)}}else{In(4,o,i);try{i.call(o)}finally{In(5,o,i)}}}}}(n,t),function S1(n,t){const e=n.cleanup,r=t[$o];let o=-1;if(null!==e)for(let i=0;i<e.length-1;i+=2)if("string"==typeof e[i]){const s=e[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=e[i+1]];e[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();t[$o]=null}}(n,t),1===t[W].type&&t[we].destroy();const e=t[hs];if(null!==e&&Un(t[nt])){e!==t[nt]&&Em(e,t);const r=t[ir];null!==r&&r.detachView(n)}!function l1(n){Zu.delete(n[fs])}(t)}}function xm(n,t,e){return function Mm(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[Er];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=n.data[r.directiveStart+o];if(i===or.None||i===or.Emulated)return null}return hn(r,e)}}(n,t.parent,e)}function vo(n,t,e,r,o){n.insertBefore(t,e,r,o)}function Tm(n,t,e){n.appendChild(t,e)}function Im(n,t,e,r,o){null!==r?vo(n,t,e,r,o):Tm(n,t,e)}function cl(n,t){return n.parentNode(t)}let cd,pd,fl,Pm=function Am(n,t,e){return 40&n.type?hn(n,e):null};function ul(n,t,e,r){const o=xm(n,r,t),i=t[we],a=function Om(n,t,e){return Pm(n,t,e)}(r.parent||t[jt],r,t);if(null!=o)if(Array.isArray(e))for(let l=0;l<e.length;l++)Im(i,o,e[l],a,!1);else Im(i,o,e,a,!1);void 0!==cd&&cd(i,r,t,e,o)}function dl(n,t){if(null!==t){const e=t.type;if(3&e)return hn(t,n);if(4&e)return ud(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return dl(n,r);{const o=n[t.index];return Un(o)?ud(-1,o):Pt(o)}}if(32&e)return nd(t,n)()||Pt(n[t.index]);{const r=Rm(n,t);return null!==r?Array.isArray(r)?r[0]:dl(xs(n[Vt]),r):dl(n,t.next)}}return null}function Rm(n,t){return null!==t?n[Vt][jt].projection[t.projection]:null}function ud(n,t){const e=Gt+n+1;if(e<t.length){const r=t[e],o=r[W].firstChild;if(null!==o)return dl(r,o)}return t[Ga]}function hd(n,t,e,r,o,i,s){for(;null!=e;){const a=r[e.index],l=e.type;if(s&&0===t&&(a&&$t(Pt(a),r),e.flags|=2),32!=(32&e.flags))if(8&l)hd(n,t,e.child,r,o,i,!1),ei(t,n,o,a,i);else if(32&l){const c=nd(e,r);let u;for(;u=c();)ei(t,n,o,u,i);ei(t,n,o,a,i)}else 16&l?Nm(n,t,r,e,o,i):ei(t,n,o,a,i);e=s?e.projectionNext:e.next}}function Ms(n,t,e,r,o,i){hd(e,r,n.firstChild,t,o,i,!1)}function Nm(n,t,e,r,o,i){const s=e[Vt],l=s[jt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ei(t,n,o,l[c],i);else hd(n,t,l,s[nt],o,i,!0)}function Fm(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Lm(n,t,e){const{mergedAttrs:r,classes:o,styles:i}=e;null!==r&&ju(n,t,r),null!==o&&Fm(n,t,o),null!==i&&function P1(n,t,e){n.setAttribute(t,"style",e)}(n,t,i)}function Um(n){return function gd(){if(void 0===fl&&(fl=null,Ke.trustedTypes))try{fl=Ke.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return fl}()?.createScriptURL(n)||n}class Bm{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${og})`}}function Gr(n){return n instanceof Bm?n.changingThisBreaksApplicationSecurity:n}function Ts(n,t){const e=function B1(n){return n instanceof Bm&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${og})`)}return e===t}const q1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var pt=(()=>((pt=pt||{})[pt.NONE=0]="NONE",pt[pt.HTML=1]="HTML",pt[pt.STYLE=2]="STYLE",pt[pt.SCRIPT=3]="SCRIPT",pt[pt.URL=4]="URL",pt[pt.RESOURCE_URL=5]="RESOURCE_URL",pt))();function ni(n){const t=Os();return t?t.sanitize(pt.URL,n)||"":Ts(n,"URL")?Gr(n):function md(n){return(n=String(n)).match(q1)?n:"unsafe:"+n}(fe(n))}function Jm(n){const t=Os();if(t)return Um(t.sanitize(pt.RESOURCE_URL,n)||"");if(Ts(n,"ResourceURL"))return Um(Gr(n));throw new $(904,!1)}function Os(){const n=L();return n&&n[Eu]}const gl=new Y("ENVIRONMENT_INITIALIZER"),Qm=new Y("INJECTOR",-1),Zm=new Y("INJECTOR_DEF_TYPES");class Xm{get(t,e=as){if(e===as){const r=new Error(`NullInjectorError: No provider for ${He(t)}!`);throw r.name="NullInjectorError",r}return e}}function sx(...n){return{\u0275providers:e_(0,n),\u0275fromNgModule:!0}}function e_(n,...t){const e=[],r=new Set;let o;return yo(t,i=>{const s=i;Cd(s,e,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&t_(o,e),e}function t_(n,t){for(let e=0;e<n.length;e++){const{providers:o}=n[e];bd(o,i=>{t.push(i)})}}function Cd(n,t,e,r){if(!(n=ie(n)))return!1;let o=null,i=sg(n);const s=!i&&Pe(n);if(i||s){if(s&&!s.standalone)return!1;o=n}else{const l=n.ngModule;if(i=sg(l),!i)return!1;o=l}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)Cd(c,t,e,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{yo(i.imports,u=>{Cd(u,t,e,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&t_(c,t)}if(!a){const c=go(o)||(()=>new o);t.push({provide:o,useFactory:c,deps:Ie},{provide:Zm,useValue:o,multi:!0},{provide:gl,useValue:()=>q(o),multi:!0})}const l=i.providers;null==l||a||bd(l,u=>{t.push(u)})}}return o!==n&&void 0!==n.providers}function bd(n,t){for(let e of n)_u(e)&&(e=e.\u0275providers),Array.isArray(e)?bd(e,t):t(e)}const ax=$e({provide:String,useValue:$e});function wd(n){return null!==n&&"object"==typeof n&&ax in n}function Co(n){return"function"==typeof n}const Dd=new Y("Set Injector scope."),ml={},cx={};let Ed;function _l(){return void 0===Ed&&(Ed=new Xm),Ed}class lr{}class o_ extends lr{get destroyed(){return this._destroyed}constructor(t,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xd(t,s=>this.processProvider(s)),this.records.set(Qm,ri(void 0,this)),o.has("environment")&&this.records.set(lr,ri(void 0,this));const i=this.records.get(Dd);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Zm.multi,Ie,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=jo(this),r=Mn(void 0);try{return t()}finally{jo(e),Mn(r)}}get(t,e=as,r=se.Default){this.assertNotDestroyed(),r=$a(r);const o=jo(this),i=Mn(void 0);try{if(!(r&se.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function px(n){return"function"==typeof n||"object"==typeof n&&n instanceof Y}(t)&&La(t);a=l&&this.injectableDefInScope(l)?ri(Sd(t),ml):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&se.Self?_l():this.parent).get(t,e=r&se.Optional&&e===as?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[Va]=s[Va]||[]).unshift(He(t)),o)throw s;return function VE(n,t,e,r){const o=n[Va];throw t[cg]&&o.unshift(t[cg]),n.message=function $E(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==FE?n.slice(2):n;let o=He(t);if(Array.isArray(t))o=t.map(He).join(" -> ");else if("object"==typeof t){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):He(a)))}o=`{${i.join(", ")}}`}return`${e}${r?"("+r+")":""}[${o}]: ${n.replace(NE,"\n  ")}`}("\n"+n.message,o,e,r),n[RE]=o,n[Va]=null,n}(s,t,"R3InjectorError",this.source)}throw s}finally{Mn(i),jo(o)}}resolveInjectorInitializers(){const t=jo(this),e=Mn(void 0);try{const r=this.get(gl.multi,Ie,se.Self);for(const o of r)o()}finally{jo(t),Mn(e)}}toString(){const t=[],e=this.records;for(const r of e.keys())t.push(He(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(t){let e=Co(t=ie(t))?t:ie(t&&t.provide);const r=function dx(n){return wd(n)?ri(void 0,n.useValue):ri(i_(n),ml)}(t);if(Co(t)||!0!==t.multi)this.records.get(e);else{let o=this.records.get(e);o||(o=ri(void 0,ml,!0),o.factory=()=>bu(o.multi),this.records.set(e,o)),e=t,o.multi.push(t)}this.records.set(e,r)}hydrate(t,e){return e.value===ml&&(e.value=cx,e.value=e.factory()),"object"==typeof e.value&&e.value&&function fx(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ie(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Sd(n){const t=La(n),e=null!==t?t.factory:go(n);if(null!==e)return e;if(n instanceof Y)throw new $(204,!1);if(n instanceof Function)return function ux(n){const t=n.length;if(t>0)throw function Cs(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}(t,"?"),new $(204,!1);const e=function AE(n){return n&&(n[ja]||n[ag])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new $(204,!1)}function i_(n,t,e){let r;if(Co(n)){const o=ie(n);return go(o)||Sd(o)}if(wd(n))r=()=>ie(n.useValue);else if(function r_(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...bu(n.deps||[]));else if(function n_(n){return!(!n||!n.useExisting)}(n))r=()=>q(ie(n.useExisting));else{const o=ie(n&&(n.useClass||n.provide));if(!function hx(n){return!!n.deps}(n))return go(o)||Sd(o);r=()=>new o(...bu(n.deps))}return r}function ri(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function xd(n,t){for(const e of n)Array.isArray(e)?xd(e,t):e&&_u(e)?xd(e.\u0275providers,t):t(e)}class gx{}class s_{}class _x{resolveComponentFactory(t){throw function mx(n){const t=Error(`No component factory found for ${He(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let As=(()=>{class n{}return n.NULL=new _x,n})();function yx(){return oi(kt(),L())}function oi(n,t){return new pn(hn(n,t))}let pn=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=yx,n})();function vx(n){return n instanceof pn?n.nativeElement:n}class l_{}let Tr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Cx(){const n=L(),e=on(kt().index,n);return(dn(e)?e:n)[we]}(),n})(),bx=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>null}),n})();class Ps{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const wx=new Ps("15.2.10"),Md={},Td="ngOriginalError";function Id(n){return n[Td]}class ii{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Id(t);for(;e&&Id(e);)e=Id(e);return e||null}}function Ir(n){return n instanceof Function?n():n}function u_(n,t,e){let r=n.length;for(;;){const o=n.indexOf(t,e);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const i=t.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}e=o+1}}const d_="ng-template";function kx(n,t,e){let r=0,o=!0;for(;r<n.length;){let i=n[r++];if("string"==typeof i&&o){const s=n[r++];if(e&&"class"===i&&-1!==u_(s.toLowerCase(),t,0))return!0}else{if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===t)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function h_(n){return 4===n.type&&n.value!==d_}function Rx(n,t,e){return t===(4!==n.type||e?n.value:d_)}function Nx(n,t,e){let r=4;const o=n.attrs||[],i=function jx(n){for(let t=0;t<n.length;t++)if($g(n[t]))return t;return n.length}(o);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!Rx(n,l,e)||""===l&&1===t.length){if(Hn(r))return!1;s=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==n.attrs){if(!kx(n.attrs,c,e)){if(Hn(r))return!1;s=!0}continue}const d=Fx(8&r?"class":l,o,h_(n),e);if(-1===d){if(Hn(r))return!1;s=!0;continue}if(""!==c){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==u_(f,c,0)||2&r&&c!==h){if(Hn(r))return!1;s=!0}}}}else{if(!s&&!Hn(r)&&!Hn(l))return!1;if(s&&Hn(l))continue;s=!1,r=l|1&r}}return Hn(r)||s}function Hn(n){return 0==(1&n)}function Fx(n,t,e,r){if(null===t)return-1;let o=0;if(r||!e){let i=!1;for(;o<t.length;){const s=t[o];if(s===n)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=t[++o];for(;"string"==typeof a;)a=t[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function Vx(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function f_(n,t,e=!1){for(let r=0;r<t.length;r++)if(Nx(n,t[r],e))return!0;return!1}function p_(n,t){return n?":not("+t.trim()+")":t}function Ux(n){let t=n[0],e=1,r=2,o="",i=!1;for(;e<n.length;){let s=n[e];if("string"==typeof s)if(2&r){const a=n[++e];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Hn(s)&&(t+=p_(i,o),o=""),r=s,i=i||!Hn(r);e++}return""!==o&&(t+=p_(i,o)),t}const ge={};function C(n){g_(Te(),L(),Wt()+n,!1)}function g_(n,t,e,r){if(!r)if(3==(3&t[ye])){const i=n.preOrderCheckHooks;null!==i&&Qa(t,i,e)}else{const i=n.preOrderHooks;null!==i&&Za(t,i,0,e)}mo(e)}function v_(n,t=null,e=null,r){const o=C_(n,t,e,r);return o.resolveInjectorInitializers(),o}function C_(n,t=null,e=null,r,o=new Set){const i=[e||Ie,sx(n)];return r=r||("object"==typeof n?void 0:He(n)),new o_(i,t||_l(),r||null,o)}let cr=(()=>{class n{static create(e,r){if(Array.isArray(e))return v_({name:""},r,e,"");{const o=e.name??"";return v_({name:o},e.parent,e.providers,o)}}}return n.THROW_IF_NOT_FOUND=as,n.NULL=new Xm,n.\u0275prov=J({token:n,providedIn:"any",factory:()=>q(Qm)}),n.__NG_ELEMENT_ID__=-1,n})();function P(n,t=se.Default){const e=L();return null===e?q(n,t):Jg(kt(),e,ie(n),t)}function T_(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const i=e[r+1];if(-1!==i){const s=n.data[i];ku(e[r]),s.contentQueries(2,t[i],i)}}}function vl(n,t,e,r,o,i,s,a,l,c,u){const d=t.blueprint.slice();return d[Er]=o,d[ye]=76|r,(null!==u||n&&1024&n[ye])&&(d[ye]|=1024),xg(d),d[nt]=d[Uo]=n,d[at]=e,d[za]=s||n&&n[za],d[we]=a||n&&n[we],d[Eu]=l||n&&n[Eu]||null,d[Ha]=c||n&&n[Ha]||null,d[jt]=i,d[fs]=function s1(){return i1++}(),d[mg]=u,d[Vt]=2==t.type?n[Vt]:d,d}function li(n,t,e,r,o){let i=n.data[t];if(null===i)i=function Rd(n,t,e,r,o){const i=Ig(),s=Iu(),l=n.data[t]=function fM(n,t,e,r,o,i){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,e,t,r,o);return null===n.firstChild&&(n.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(n,t,e,r,o),function uS(){return pe.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=e,i.value=r,i.attrs=o;const s=function gs(){const n=pe.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return sr(i,!0),i}function ks(n,t,e,r){if(0===e)return-1;const o=t.length;for(let i=0;i<e;i++)t.push(r),n.blueprint.push(r),n.data.push(null);return o}function Nd(n,t,e){Ru(t);try{const r=n.viewQuery;null!==r&&zd(1,r,e);const o=n.template;null!==o&&I_(n,t,o,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&T_(n,t),n.staticViewQueries&&zd(2,n.viewQuery,e);const i=n.components;null!==i&&function uM(n,t){for(let e=0;e<t.length;e++)kM(n,t[e])}(t,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[ye]&=-5,Nu()}}function Cl(n,t,e,r){const o=t[ye];if(128!=(128&o)){Ru(t);try{xg(t),function Ag(n){return pe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&I_(n,t,e,2,r);const s=3==(3&o);if(s){const c=n.preOrderCheckHooks;null!==c&&Qa(t,c,null)}else{const c=n.preOrderHooks;null!==c&&Za(t,c,0,null),Fu(t,0)}if(function AM(n){for(let t=rd(n);null!==t;t=od(t)){if(!t[_g])continue;const e=t[Ho];for(let r=0;r<e.length;r++){const o=e[r];512&o[ye]||Tu(o[nt],1),o[ye]|=512}}}(t),function OM(n){for(let t=rd(n);null!==t;t=od(t))for(let e=Gt;e<t.length;e++){const r=t[e],o=r[W];Ja(r)&&Cl(o,r,o.template,r[at])}}(t),null!==n.contentQueries&&T_(n,t),s){const c=n.contentCheckHooks;null!==c&&Qa(t,c)}else{const c=n.contentHooks;null!==c&&Za(t,c,1),Fu(t,1)}!function lM(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const o=e[r];if(o<0)mo(~o);else{const i=o,s=e[++r],a=e[++r];dS(s,i),a(2,t[i])}}}finally{mo(-1)}}(n,t);const a=n.components;null!==a&&function cM(n,t){for(let e=0;e<t.length;e++)PM(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&zd(2,l,r),s){const c=n.viewCheckHooks;null!==c&&Qa(t,c)}else{const c=n.viewHooks;null!==c&&Za(t,c,2),Fu(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[ye]&=-41,512&t[ye]&&(t[ye]&=-513,Tu(t[nt],-1))}finally{Nu()}}}function I_(n,t,e,r,o){const i=Wt(),s=2&r;try{mo(-1),s&&t.length>Je&&g_(n,t,Je,!1),In(s?2:0,o),e(r,o)}finally{mo(i),In(s?3:1,o)}}function Fd(n,t,e){if(xu(t)){const o=t.directiveEnd;for(let i=t.directiveStart;i<o;i++){const s=n.data[i];s.contentQueries&&s.contentQueries(1,e[i],i)}}}function Ld(n,t,e){Tg()&&(function CM(n,t,e,r){const o=e.directiveStart,i=e.directiveEnd;ps(e)&&function MM(n,t,e){const r=hn(t,n),o=O_(e),i=n[za],s=bl(n,vl(n,o,null,e.onPush?32:16,r,t,i,i.createRenderer(r,e),null,null,null));n[t.index]=s}(t,e,n.data[o+e.componentOffset]),n.firstCreatePass||nl(e,t),$t(r,t);const s=e.initialInputs;for(let a=o;a<i;a++){const l=n.data[a],c=_o(t,n,a,e);$t(c,t),null!==s&&TM(0,a-o,c,l,0,s),Bn(l)&&(on(e.index,t)[at]=_o(t,n,a,e))}}(n,t,e,hn(e,t)),64==(64&e.flags)&&N_(n,t,e))}function jd(n,t,e=hn){const r=t.localNames;if(null!==r){let o=t.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?e(t,n):n[s];n[o++]=a}}}function O_(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Vd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Vd(n,t,e,r,o,i,s,a,l,c){const u=Je+r,d=u+o,h=function dM(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:ge);return e}(u,d),f="function"==typeof c?c():c;return h[W]={type:n,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function A_(n,t,e,r){const o=L_(t);null===e?o.push(r):(o.push(e),n.firstCreatePass&&j_(n).push(r,o.length-1))}function P_(n,t,e,r){for(let o in n)if(n.hasOwnProperty(o)){e=null===e?{}:e;const i=n[o];null===r?k_(e,t,o,i):r.hasOwnProperty(o)&&k_(e,t,r[o],i)}return e}function k_(n,t,e,r){n.hasOwnProperty(e)?n[e].push(t,r):n[e]=[t,r]}function $d(n,t,e,r){if(Tg()){const o=null===r?null:{"":-1},i=function wM(n,t){const e=n.directiveRegistry;let r=null,o=null;if(e)for(let i=0;i<e.length;i++){const s=e[i];if(f_(t,s.selectors,!1))if(r||(r=[]),Bn(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Ud(n,t,a.length)}else r.unshift(s),Ud(n,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(n,e);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&R_(n,t,e,s,o,a),o&&function DM(n,t,e){if(t){const r=n.localNames=[];for(let o=0;o<t.length;o+=2){const i=e[t[o+1]];if(null==i)throw new $(-301,!1);r.push(t[o],i)}}}(e,r,o)}e.mergedAttrs=_s(e.mergedAttrs,e.attrs)}function R_(n,t,e,r,o,i){for(let c=0;c<r.length;c++)Bu(nl(e,t),n,r[c].type);!function SM(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=ks(n,t,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];e.mergedAttrs=_s(e.mergedAttrs,u.hostAttrs),xM(n,e,t,l,u),EM(l,u,o),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function pM(n,t,e){const o=t.directiveEnd,i=n.data,s=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<o;u++){const d=i[u],h=e?e.get(d):null,p=h?h.outputs:null;l=P_(d.inputs,u,l,h?h.inputs:null),c=P_(d.outputs,u,c,p);const _=null===l||null===s||h_(t)?null:IM(l,u,s);a.push(_)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(n,e,i)}function N_(n,t,e){const r=e.directiveStart,o=e.directiveEnd,i=e.index,s=function hS(){return pe.lFrame.currentDirectiveIndex}();try{mo(i);for(let a=r;a<o;a++){const l=n.data[a],c=t[a];Au(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&bM(l,c)}}finally{mo(-1),Au(s)}}function bM(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function Ud(n,t,e){t.componentOffset=e,(n.components??(n.components=[])).push(t.index)}function EM(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;Bn(t)&&(e[""]=n)}}function xM(n,t,e,r,o){n.data[r]=o;const i=o.factory||(o.factory=go(o.type)),s=new ms(i,Bn(o),P);n.blueprint[r]=s,e[r]=s,function yM(n,t,e,r,o){const i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~t.index;(function vM(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,r,i)}}(n,t,r,ks(n,e,o.hostVars,ge),o)}function ur(n,t,e,r,o,i){const s=hn(n,t);!function Bd(n,t,e,r,o,i,s){if(null==i)n.removeAttribute(t,o,e);else{const a=null==s?fe(i):s(i,r||"",o);n.setAttribute(t,o,a,e)}}(t[we],s,i,n.value,e,r,o)}function TM(n,t,e,r,o,i){const s=i[t];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(e,d,c,u):e[u]=d}}}function IM(n,t,e){let r=null,o=0;for(;o<e.length;){const i=e[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const s=n[i];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(i,s[a+1],e[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function F_(n,t,e,r){return[n,!0,!1,t,null,0,r,e,null,null]}function PM(n,t){const e=on(t,n);if(Ja(e)){const r=e[W];48&e[ye]?Cl(r,e,r.template,e[at]):e[po]>0&&Hd(e)}}function Hd(n){for(let r=rd(n);null!==r;r=od(r))for(let o=Gt;o<r.length;o++){const i=r[o];if(Ja(i))if(512&i[ye]){const s=i[W];Cl(s,i,s.template,i[at])}else i[po]>0&&Hd(i)}const e=n[W].components;if(null!==e)for(let r=0;r<e.length;r++){const o=on(e[r],n);Ja(o)&&o[po]>0&&Hd(o)}}function kM(n,t){const e=on(t,n),r=e[W];(function RM(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),Nd(r,e,e[at])}function bl(n,t){return n[ds]?n[gg][$n]=t:n[ds]=t,n[gg]=t,t}function wl(n){for(;n;){n[ye]|=32;const t=xs(n);if(qE(n)&&!t)return n;n=t}return null}function Dl(n,t,e,r=!0){const o=t[za];o.begin&&o.begin();try{Cl(n,t,n.template,e)}catch(s){throw r&&$_(t,s),s}finally{o.end&&o.end()}}function zd(n,t,e){ku(0),t(n,e)}function L_(n){return n[$o]||(n[$o]=[])}function j_(n){return n.cleanup||(n.cleanup=[])}function $_(n,t){const e=n[Ha],r=e?e.get(ii,null):null;r&&r.handleError(t)}function Gd(n,t,e,r,o){for(let i=0;i<e.length;){const s=e[i++],a=e[i++],l=t[s],c=n.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function Or(n,t,e){const r=Ka(t,n);!function Dm(n,t,e){n.setValue(t,e)}(n[we],r,e)}function El(n,t,e){let r=e?n.styles:null,o=e?n.classes:null,i=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?i=a:1==i?o=gu(o,a):2==i&&(r=gu(r,a+": "+t[++s]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=o:n.classesWithoutHost=o}function Sl(n,t,e,r,o=!1){for(;null!==e;){const i=t[e.index];if(null!==i&&r.push(Pt(i)),Un(i))for(let a=Gt;a<i.length;a++){const l=i[a],c=l[W].firstChild;null!==c&&Sl(l[W],l,c,r)}const s=e.type;if(8&s)Sl(n,t,e.child,r);else if(32&s){const a=nd(e,t);let l;for(;l=a();)r.push(l)}else if(16&s){const a=Rm(t,e);if(Array.isArray(a))r.push(...a);else{const l=xs(t[Vt]);Sl(l[W],l,a,r,!0)}}e=o?e.projectionNext:e.next}return r}class Rs{get rootNodes(){const t=this._lView,e=t[W];return Sl(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[at]}set context(t){this._lView[at]=t}get destroyed(){return 128==(128&this._lView[ye])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[nt];if(Un(t)){const e=t[qa],r=e?e.indexOf(this):-1;r>-1&&(ad(t,r),il(e,r))}this._attachedToViewContainer=!1}Sm(this._lView[W],this._lView)}onDestroy(t){A_(this._lView[W],this._lView,null,t)}markForCheck(){wl(this._cdRefInjectingView||this._lView)}detach(){this._lView[ye]&=-65}reattach(){this._lView[ye]|=64}detectChanges(){Dl(this._lView[W],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function b1(n,t){Ms(n,t,t[we],2,null,null)}(this._lView[W],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=t}}class NM extends Rs{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Dl(t[W],t,t[at],!1)}checkNoChanges(){}get context(){return null}}class U_ extends As{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Pe(t);return new Ns(e,this.ngModule)}}function B_(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class LM{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=$a(r);const o=this.injector.get(t,Md,r);return o!==Md||e===Md?o:this.parentInjector.get(t,e,r)}}class Ns extends s_{get inputs(){return B_(this.componentDef.inputs)}get outputs(){return B_(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function Bx(n){return n.map(Ux).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,o){let i=(o=o||this.ngModule)instanceof lr?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new LM(t,i):t,a=s.get(l_,null);if(null===a)throw new $(407,!1);const l=s.get(bx,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function hM(n,t,e){return n.selectRootElement(t,e===or.ShadowDom)}(c,r,this.componentDef.encapsulation):sd(c,u,function FM(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Vd(0,null,null,1,0,null,null,null,null,null),p=vl(null,f,null,h,null,null,a,c,l,s,null);let _,v;Ru(p);try{const w=this.componentDef;let k,E=null;w.findHostDirectiveDefs?(k=[],E=new Map,w.findHostDirectiveDefs(w,k,E),k.push(w)):k=[w];const N=function VM(n,t){const e=n[W],r=Je;return n[r]=t,li(e,r,2,"#host",null)}(p,d),B=function $M(n,t,e,r,o,i,s,a){const l=o[W];!function UM(n,t,e,r){for(const o of n)t.mergedAttrs=_s(t.mergedAttrs,o.hostAttrs);null!==t.mergedAttrs&&(El(t,t.mergedAttrs,!0),null!==e&&Lm(r,e,t))}(r,n,t,s);const c=i.createRenderer(t,e),u=vl(o,O_(e),null,e.onPush?32:16,o[n.index],n,i,c,a||null,null,null);return l.firstCreatePass&&Ud(l,n,r.length-1),bl(o,u),o[n.index]=u}(N,d,w,k,p,a,c);v=Sg(f,Je),d&&function HM(n,t,e,r){if(r)ju(n,e,["ng-version",wx.full]);else{const{attrs:o,classes:i}=function Hx(n){const t=[],e=[];let r=1,o=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===o?""!==i&&t.push(i,n[++r]):8===o&&e.push(i);else{if(!Hn(o))break;o=i}r++}return{attrs:t,classes:e}}(t.selectors[0]);o&&ju(n,e,o),i&&i.length>0&&Fm(n,e,i.join(" "))}}(c,w,d,r),void 0!==e&&function zM(n,t,e){const r=n.projection=[];for(let o=0;o<t.length;o++){const i=e[o];r.push(null!=i?Array.from(i):null)}}(v,this.ngContentSelectors,e),_=function BM(n,t,e,r,o,i){const s=kt(),a=o[W],l=hn(s,o);R_(a,o,s,e,null,r);for(let u=0;u<e.length;u++)$t(_o(o,a,s.directiveStart+u,s),o);N_(a,o,s),l&&$t(l,o);const c=_o(o,a,s.directiveStart+s.componentOffset,s);if(n[at]=o[at]=c,null!==i)for(const u of i)u(c,t);return Fd(a,s,n),c}(B,w,k,E,p,[GM]),Nd(f,p,null)}finally{Nu()}return new jM(this.componentType,_,oi(v,p),p,v)}}class jM extends gx{constructor(t,e,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new NM(o),this.componentType=t}setInput(t,e){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[t])){const i=this._rootLView;Gd(i[W],i,o,t,e),wl(on(this._tNode.index,i))}}get injector(){return new Wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function GM(){const n=kt();Ya(L()[W],n)}function Re(n){let t=function H_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let o;if(Bn(n))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new $(903,!1);o=t.\u0275dir}if(o){if(e){r.push(o);const s=n;s.inputs=qd(n.inputs),s.declaredInputs=qd(n.declaredInputs),s.outputs=qd(n.outputs);const a=o.hostBindings;a&&JM(n,a);const l=o.viewQuery,c=o.contentQueries;if(l&&WM(n,l),c&&KM(n,c),pu(n.inputs,o.inputs),pu(n.declaredInputs,o.declaredInputs),pu(n.outputs,o.outputs),Bn(o)&&o.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(n),a===Re&&(e=!1)}}t=Object.getPrototypeOf(t)}!function qM(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const o=n[r];o.hostVars=t+=o.hostVars,o.hostAttrs=_s(o.hostAttrs,e=_s(e,o.hostAttrs))}}(r)}function qd(n){return n===br?{}:n===Ie?[]:n}function WM(n,t){const e=n.viewQuery;n.viewQuery=e?(r,o)=>{t(r,o),e(r,o)}:t}function KM(n,t){const e=n.contentQueries;n.contentQueries=e?(r,o,i)=>{t(r,o,i),e(r,o,i)}:t}function JM(n,t){const e=n.hostBindings;n.hostBindings=e?(r,o)=>{t(r,o),e(r,o)}:t}function xl(n){return!!Wd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Wd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function dr(n,t,e){return n[t]=e}function Ut(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function bo(n,t,e,r){const o=Ut(n,t,e);return Ut(n,t+1,r)||o}function Kt(n,t,e,r){const o=L();return Ut(o,Go(),t)&&(Te(),ur(Xe(),o,n,t,e,r)),Kt}function di(n,t,e,r,o,i){const a=bo(n,function Sr(){return pe.lFrame.bindingIndex}(),e,o);return xr(2),a?t+fe(e)+r+fe(o)+i:ge}function G(n,t,e,r,o,i,s,a){const l=L(),c=Te(),u=n+Je,d=c.firstCreatePass?function iT(n,t,e,r,o,i,s,a,l){const c=t.consts,u=li(t,n,4,s||null,zr(c,a));$d(t,e,u,zr(c,l)),Ya(t,u);const d=u.tView=Vd(2,u,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,r,o,i,s):c.data[u];sr(d,!1);const h=l[we].createComment("");ul(c,l,h,d),$t(h,l),bl(l,l[u]=F_(h,l,h,d)),Wa(d)&&Ld(c,l,d),null!=s&&jd(l,d,a)}function Ls(n){return function zo(n,t){return n[t]}(function cS(){return pe.lFrame.contextLView}(),Je+n)}function O(n,t,e){const r=L();return Ut(r,Go(),t)&&function gn(n,t,e,r,o,i,s,a){const l=hn(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[r])?(Gd(n,e,u,r,o),ps(t)&&function mM(n,t){const e=on(t,n);16&e[ye]||(e[ye]|=32)}(e,t.index)):3&t.type&&(r=function gM(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=s?s(o,t.value||"",r):o,i.setProperty(l,r,o))}(Te(),Xe(),r,n,t,r[we],e,!1),O}function Kd(n,t,e,r,o){const s=o?"class":"style";Gd(n,e,t.inputs[s],s,r)}function g(n,t,e,r){const o=L(),i=Te(),s=Je+n,a=o[we],l=i.firstCreatePass?function aT(n,t,e,r,o,i){const s=t.consts,l=li(t,n,2,r,zr(s,o));return $d(t,e,l,zr(s,i)),null!==l.attrs&&El(l,l.attrs,!1),null!==l.mergedAttrs&&El(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,i,o,t,e,r):i.data[s],c=o[s]=sd(a,t,function CS(){return pe.lFrame.currentNamespace}()),u=Wa(l);return sr(l,!0),Lm(a,c,l),32!=(32&l.flags)&&ul(i,o,c,l),0===function oS(){return pe.lFrame.elementDepthCount}()&&$t(c,o),function iS(){pe.lFrame.elementDepthCount++}(),u&&(Ld(i,o,l),Fd(i,l,o)),null!==r&&jd(o,l),g}function m(){let n=kt();Iu()?Ou():(n=n.parent,sr(n,!1));const t=n;!function sS(){pe.lFrame.elementDepthCount--}();const e=Te();return e.firstCreatePass&&(Ya(e,n),xu(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function ES(n){return 0!=(8&n.flags)}(t)&&Kd(e,t,L(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function SS(n){return 0!=(16&n.flags)}(t)&&Kd(e,t,L(),t.stylesWithoutHost,!1),m}function lt(n,t,e,r){return g(n,t,e,r),m(),lt}function yi(n,t,e){const r=L(),o=Te(),i=n+Je,s=o.firstCreatePass?function lT(n,t,e,r,o){const i=t.consts,s=zr(i,r),a=li(t,n,8,"ng-container",s);return null!==s&&El(a,s,!0),$d(t,e,a,zr(i,o)),null!==t.queries&&t.queries.elementStart(t,a),a}(i,o,r,t,e):o.data[i];sr(s,!0);const a=r[i]=r[we].createComment("");return ul(o,r,a,s),$t(a,r),Wa(s)&&(Ld(o,r,s),Fd(o,s,r)),null!=e&&jd(r,s),yi}function vi(){let n=kt();const t=Te();return Iu()?Ou():(n=n.parent,sr(n,!1)),t.firstCreatePass&&(Ya(t,n),xu(n)&&t.queries.elementEnd(n)),vi}function Ne(){return L()}function js(n){return!!n&&"function"==typeof n.then}const Jd=function ry(n){return!!n&&"function"==typeof n.subscribe};function j(n,t,e,r){const o=L(),i=Te(),s=kt();return function iy(n,t,e,r,o,i,s){const a=Wa(r),c=n.firstCreatePass&&j_(n),u=t[at],d=L_(t);let h=!0;if(3&r.type||s){const _=hn(r,t),v=s?s(_):_,w=d.length,k=s?N=>s(Pt(N[r.index])):r.index;let E=null;if(!s&&a&&(E=function cT(n,t,e,r){const o=n.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===e&&o[i+1]===r){const a=t[$o],l=o[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(n,t,o,r.index)),null!==E)(E.__ngLastListenerFn__||E).__ngNextListenerFn__=i,E.__ngLastListenerFn__=i,h=!1;else{i=ay(r,t,u,i,!1);const N=e.listen(v,o,i);d.push(i,N),c&&c.push(o,k,w,w+1)}}else i=ay(r,t,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const _=p.length;if(_)for(let v=0;v<_;v+=2){const B=t[p[v]][p[v+1]].subscribe(i),le=d.length;d.push(i,B),c&&c.push(o,r.index,le,-(le+1))}}}(i,o,o[we],s,n,t,r),j}function sy(n,t,e,r){try{return In(6,t,e),!1!==e(r)}catch(o){return $_(n,o),!1}finally{In(7,t,e)}}function ay(n,t,e,r,o){return function i(s){if(s===Function)return r;wl(n.componentOffset>-1?on(n.index,t):t);let l=sy(t,e,r,s),c=i.__ngNextListenerFn__;for(;c;)l=sy(t,e,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function T(n=1){return function pS(n){return(pe.lFrame.contextLView=function gS(n,t){for(;n>0;)t=t[Uo],n--;return t}(n,pe.lFrame.contextLView))[at]}(n)}function Tl(n,t){return n<<17|t<<2}function qr(n){return n>>17&32767}function Qd(n){return 2|n}function wo(n){return(131068&n)>>2}function Zd(n,t){return-131069&n|t<<2}function Xd(n){return 1|n}function _y(n,t,e,r,o){const i=n[e+1],s=null===t;let a=r?qr(i):wo(i),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];yT(n[a],t)&&(l=!0,n[a+1]=r?Xd(u):Qd(u)),a=r?qr(u):wo(u)}l&&(n[e+1]=r?Qd(i):Xd(i))}function yT(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Zo(n,t)>=0}function Le(n,t){return function zn(n,t,e,r){const o=L(),i=Te(),s=xr(2);i.firstUpdatePass&&function xy(n,t,e,r){const o=n.data;if(null===o[e+1]){const i=o[Wt()],s=function Sy(n,t){return t>=n.expandoStartIndex}(n,e);(function Oy(n,t){return 0!=(n.flags&(t?8:16))})(i,r)&&null===t&&!s&&(t=!1),t=function MT(n,t,e,r){const o=function Pu(n){const t=pe.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let i=r?t.residualClasses:t.residualStyles;if(null===o)0===(r?t.classBindings:t.styleBindings)&&(e=Vs(e=eh(null,n,t,e,r),t.attrs,r),i=null);else{const s=t.directiveStylingLast;if(-1===s||n[s]!==o)if(e=eh(o,n,t,e,r),null===i){let l=function TT(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==wo(r))return n[qr(r)]}(n,t,r);void 0!==l&&Array.isArray(l)&&(l=eh(null,n,t,l[1],r),l=Vs(l,t.attrs,r),function IT(n,t,e,r){n[qr(e?t.classBindings:t.styleBindings)]=r}(n,t,r,l))}else i=function OT(n,t,e){let r;const o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++)r=Vs(r,n[i].hostAttrs,e);return Vs(r,t.attrs,e)}(n,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),e}(o,i,t,r),function mT(n,t,e,r,o,i){let s=i?t.classBindings:t.styleBindings,a=qr(s),l=wo(s);n[r]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Zo(e,u)>0)&&(c=!0)):u=e,o)if(0!==l){const h=qr(n[a+1]);n[r+1]=Tl(h,a),0!==h&&(n[h+1]=Zd(n[h+1],r)),n[a+1]=function pT(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=Tl(a,0),0!==a&&(n[a+1]=Zd(n[a+1],r)),a=r;else n[r+1]=Tl(l,0),0===a?a=r:n[l+1]=Zd(n[l+1],r),l=r;c&&(n[r+1]=Qd(n[r+1])),_y(n,u,r,!0),_y(n,u,r,!1),function _T(n,t,e,r,o){const i=o?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof t&&Zo(i,t)>=0&&(e[r+1]=Xd(e[r+1]))}(t,u,n,r,i),s=Tl(a,l),i?t.classBindings=s:t.styleBindings=s}(o,i,t,e,s,r)}}(i,n,s,r),t!==ge&&Ut(o,s,t)&&function Ty(n,t,e,r,o,i,s,a){if(!(3&t.type))return;const l=n.data,c=l[a+1],u=function gT(n){return 1==(1&n)}(c)?Iy(l,t,e,o,wo(c),s):void 0;Il(u)||(Il(i)||function fT(n){return 2==(2&n)}(c)&&(i=Iy(l,null,e,o,a,s)),function A1(n,t,e,r,o){if(t)o?n.addClass(e,r):n.removeClass(e,r);else{let i=-1===r.indexOf("-")?void 0:sn.DashCase;null==o?n.removeStyle(e,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=sn.Important),n.setStyle(e,r,o,i))}}(r,s,Ka(Wt(),e),o,i))}(i,i.data[Wt()],o,o[we],n,o[s+1]=function RT(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=He(Gr(n)))),n}(t,e),r,s)}(n,t,null,!0),Le}function eh(n,t,e,r,o){let i=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(i=t[a],r=Vs(r,i.hostAttrs,o),i!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function Vs(n,t,e){const r=e?1:2;let o=-1;if(null!==t)for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?o=s:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),fn(n,s,!!e||t[++i]))}return void 0===n?null:n}function Iy(n,t,e,r,o,i){const s=null===t;let a;for(;o>0;){const l=n[o],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[o+1];h===ge&&(h=d?Ie:void 0);let f=d?qu(h,r):u===r?h:void 0;if(c&&!Il(f)&&(f=qu(l,r)),Il(f)&&(a=f,s))return a;const p=n[o+1];o=s?qr(p):wo(p)}if(null!==t){let l=i?t.residualClasses:t.residualStyles;null!=l&&(a=qu(l,r))}return a}function Il(n){return void 0!==n}function b(n,t=""){const e=L(),r=Te(),o=n+Je,i=r.firstCreatePass?li(r,o,1,t,null):r.data[o],s=e[o]=function id(n,t){return n.createText(t)}(e[we],t);ul(r,e,s,i),sr(i,!1)}function gt(n){return ke("",n,""),gt}function ke(n,t,e){const r=L(),o=function ui(n,t,e,r){return Ut(n,Go(),e)?t+fe(e)+r:ge}(r,n,t,e);return o!==ge&&Or(r,Wt(),o),ke}function Wr(n,t,e,r,o){const i=L(),s=di(i,n,t,e,r,o);return s!==ge&&Or(i,Wt(),s),Wr}const wi="en-US";let Qy=wi;function rh(n,t,e,r,o){if(n=ie(n),Array.isArray(n))for(let i=0;i<n.length;i++)rh(n[i],t,e,r,o);else{const i=Te(),s=L();let a=Co(n)?n:ie(n.provide),l=i_(n);const c=kt(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Co(n)||!n.multi){const f=new ms(l,o,P),p=ih(a,t,o?u:u+h,d);-1===p?(Bu(nl(c,s),i,a),oh(i,n,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(f),s.push(f)):(e[p]=f,s[p]=f)}else{const f=ih(a,t,u+h,d),p=ih(a,t,u,u+h),v=p>=0&&e[p];if(o&&!v||!o&&!(f>=0&&e[f])){Bu(nl(c,s),i,a);const w=function ZI(n,t,e,r,o){const i=new ms(n,e,P);return i.multi=[],i.index=t,i.componentProviders=0,wv(i,o,r&&!e),i}(o?QI:YI,e.length,o,r,l);!o&&v&&(e[p].providerFactory=w),oh(i,n,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(w),s.push(w)}else oh(i,n,f>-1?f:p,wv(e[o?p:f],l,!o&&r));!o&&r&&v&&e[p].componentProviders++}}}function oh(n,t,e,r){const o=Co(t),i=function lx(n){return!!n.useClass}(t);if(o||i){const l=(i?ie(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!o&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function wv(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function ih(n,t,e,r){for(let o=e;o<r;o++)if(t[o]===n)return o;return-1}function YI(n,t,e,r){return sh(this.multi,[])}function QI(n,t,e,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=_o(e,e[W],this.providerFactory.index,r);i=a.slice(0,s),sh(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],sh(o,i);return i}function sh(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Qe(n,t=[]){return e=>{e.providersResolver=(r,o)=>function JI(n,t,e){const r=Te();if(r.firstCreatePass){const o=Bn(n);rh(e,r.data,r.blueprint,o,!0),rh(t,r.data,r.blueprint,o,!1)}}(r,o?o(n):n,t)}}class Di{}class Dv{}class Ev extends Di{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new U_(this);const r=un(t);this._bootstrapComponents=Ir(r.bootstrap),this._r3Injector=C_(t,e,[{provide:Di,useValue:this},{provide:As,useValue:this.componentFactoryResolver}],He(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ah extends Dv{constructor(t){super(),this.moduleType=t}create(t){return new Ev(this.moduleType,t)}}class eO extends Di{constructor(t,e,r){super(),this.componentFactoryResolver=new U_(this),this.instance=null;const o=new o_([...t,{provide:Di,useValue:this},{provide:As,useValue:this.componentFactoryResolver}],e||_l(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Rl(n,t,e=null){return new eO(n,t,e).injector}let tO=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const r=e_(0,e.type),o=r.length>0?Rl([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,o)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=J({token:n,providedIn:"environment",factory:()=>new n(q(lr))}),n})();function Sv(n){n.getStandaloneInjector=t=>t.get(tO).getOrCreateStandaloneInjector(n)}function Nl(n,t,e,r,o){return function Rv(n,t,e,r,o,i,s){const a=t+e;return bo(n,a,o,i)?dr(n,a+2,s?r.call(s,o,i):r(o,i)):Gs(n,a+2)}(L(),qt(),n,t,e,r,o)}function ch(n,t,e,r,o,i){return function Nv(n,t,e,r,o,i,s,a){const l=t+e;return function Ml(n,t,e,r,o){const i=bo(n,t,e,r);return Ut(n,t+2,o)||i}(n,l,o,i,s)?dr(n,l+3,a?r.call(a,o,i,s):r(o,i,s)):Gs(n,l+3)}(L(),qt(),n,t,e,r,o,i)}function Gs(n,t){const e=n[t];return e===ge?void 0:e}function uh(n){return t=>{setTimeout(n,void 0,t)}}const ot=class EO extends D{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){let o=t,i=e||(()=>null),s=r;if(t&&"object"==typeof t){const l=t;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=uh(i),o&&(o=uh(o)),s&&(s=uh(s)));const a=super.subscribe({next:o,error:i,complete:s});return t instanceof I&&t.add(a),a}};function SO(){return this._results[Symbol.iterator]()}class dh{get changes(){return this._changes||(this._changes=new ot)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=dh.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=SO)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const o=function On(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function NS(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],i=t[r];if(e&&(o=e(o),i=e(i)),i!==o)return!1}return!0}(r._results,o,e))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ar=(()=>{class n{}return n.__NG_ELEMENT_ID__=TO,n})();const xO=Ar,MO=class extends xO{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t,e){const r=this._declarationTContainer.tView,o=vl(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,e||null);o[hs]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[ir];return null!==s&&(o[ir]=s.createEmbeddedView(r)),Nd(r,o,t),new Rs(o)}};function TO(){return Fl(kt(),L())}function Fl(n,t){return 4&n.type?new MO(t,n,oi(n,t)):null}let qn=(()=>{class n{}return n.__NG_ELEMENT_ID__=IO,n})();function IO(){return $v(kt(),L())}const OO=qn,jv=class extends OO{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return oi(this._hostTNode,this._hostLView)}get injector(){return new Wo(this._hostTNode,this._hostLView)}get parentInjector(){const t=Uu(this._hostTNode,this._hostLView);if(Hg(t)){const e=el(t,this._hostLView),r=Xa(t);return new Wo(e[W].data[r+8],e)}return new Wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Vv(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(t,e,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=t.createEmbeddedView(e||{},i);return this.insert(s,o),s}createComponent(t,e,r,o,i){const s=t&&!function vs(n){return"function"==typeof n}(t);let a;if(s)a=e;else{const d=e||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const l=s?t:new Ns(Pe(t)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const h=(s?c:this.parentInjector).get(lr,null);h&&(i=h)}const u=l.create(c,o,void 0,i);return this.insert(u.hostView,a),u}insert(t,e){const r=t._lView,o=r[W];if(function rS(n){return Un(n[nt])}(r)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const d=r[nt],h=new jv(d,d[jt],d[nt]);h.detach(h.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function D1(n,t,e,r){const o=Gt+r,i=e.length;r>0&&(e[o-1][$n]=t),r<i-Gt?(t[$n]=e[o],tm(e,Gt+r,t)):(e.push(t),t[$n]=null),t[nt]=e;const s=t[hs];null!==s&&e!==s&&function E1(n,t){const e=n[Ho];t[Vt]!==t[nt][nt][Vt]&&(n[_g]=!0),null===e?n[Ho]=[t]:e.push(t)}(s,t);const a=t[ir];null!==a&&a.insertView(n),t[ye]|=64}(o,r,s,i);const a=ud(i,s),l=r[we],c=cl(l,s[Ga]);return null!==c&&function C1(n,t,e,r,o,i){r[Er]=o,r[jt]=t,Ms(n,r,e,1,o,i)}(o,s[jt],l,r,c,a),t.attachToViewContainerRef(),tm(hh(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Vv(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=ad(this._lContainer,e);r&&(il(hh(this._lContainer),e),Sm(r[W],r))}detach(t){const e=this._adjustIndex(t,-1),r=ad(this._lContainer,e);return r&&null!=il(hh(this._lContainer),e)?new Rs(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Vv(n){return n[qa]}function hh(n){return n[qa]||(n[qa]=[])}function $v(n,t){let e;const r=t[n.index];if(Un(r))e=r;else{let o;if(8&n.type)o=Pt(r);else{const i=t[we];o=i.createComment("");const s=hn(n,t);vo(i,cl(i,s),o,function T1(n,t){return n.nextSibling(t)}(i,s),!1)}t[n.index]=e=F_(r,t,o,n),bl(t,e)}return new jv(e,n,t)}class fh{constructor(t){this.queryList=t,this.matches=null}clone(){return new fh(this.queryList)}setDirty(){this.queryList.setDirty()}}class ph{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,o=[];for(let i=0;i<r;i++){const s=e.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new ph(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Kv(t,e).matches&&this.queries[e].setDirty()}}class Uv{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class gh{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const o=null!==e?e.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,null!==e?e.push(i):e=[i])}return null!==e?new gh(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class mh{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new mh(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(t,e,AO(e,i)),this.matchTNodeWithReadOption(t,e,rl(e,t,i,!1,!1))}else r===Ar?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,rl(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===pn||o===qn||o===Ar&&4&e.type)this.addMatch(e.index,-2);else{const i=rl(e,t,o,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function AO(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function kO(n,t,e,r){return-1===e?function PO(n,t){return 11&n.type?oi(n,t):4&n.type?Fl(n,t):null}(t,n):-2===e?function RO(n,t,e){return e===pn?oi(t,n):e===Ar?Fl(t,n):e===qn?$v(t,n):void 0}(n,t,r):_o(n,n[W],e,t)}function Bv(n,t,e,r){const o=t[ir].queries[r];if(null===o.matches){const i=n.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:kO(t,i[c],s[l+1],e.metadata.read))}o.matches=a}return o.matches}function _h(n,t,e,r){const o=n.queries.getByIndex(e),i=o.matches;if(null!==i){const s=Bv(n,t,o,e);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(s[a/2]);else{const c=i[a+1],u=t[-l];for(let d=Gt;d<u.length;d++){const h=u[d];h[hs]===h[nt]&&_h(h[W],h,c,r)}if(null!==u[Ho]){const d=u[Ho];for(let h=0;h<d.length;h++){const f=d[h];_h(f[W],f,c,r)}}}}}return r}function Hv(n){const t=L(),e=Te(),r=kg();ku(r+1);const o=Kv(e,r);if(n.dirty&&function nS(n){return 4==(4&n[ye])}(t)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{const i=o.crossesNgTemplate?_h(e,t,r,[]):Bv(e,t,o,r);n.reset(i,vx),n.notifyOnChanges()}return!0}return!1}function zv(n,t,e,r){const o=Te();if(o.firstCreatePass){const i=kt();(function Wv(n,t,e){null===n.queries&&(n.queries=new gh),n.queries.track(new mh(t,e))})(o,new Uv(t,e,r),i.index),function LO(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(o,n),2==(2&e)&&(o.staticContentQueries=!0)}!function qv(n,t,e){const r=new dh(4==(4&e));A_(n,t,r,r.destroy),null===t[ir]&&(t[ir]=new ph),t[ir].queries.push(new fh(r))}(o,L(),e)}function Kv(n,t){return n.queries.getByIndex(t)}function Ll(n,t){return Fl(n,t)}function Vl(...n){}const $l=new Y("Application Initializer");let Ul=(()=>{class n{constructor(e){this.appInits=e,this.resolve=Vl,this.reject=Vl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(js(i))e.push(i);else if(Jd(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});e.push(s)}}Promise.all(e).then(()=>{r()}).catch(o=>{this.reject(o)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(q($l,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ks=new Y("AppId",{providedIn:"root",factory:function hC(){return`${Dh()}${Dh()}${Dh()}`}});function Dh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fC=new Y("Platform Initializer"),Eh=new Y("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let rA=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Pr=new Y("LocaleId",{providedIn:"root",factory:()=>be(Pr,se.Optional|se.SkipSelf)||function oA(){return typeof $localize<"u"&&$localize.locale||wi}()});class sA{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let pC=(()=>{class n{compileModuleSync(e){return new ah(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),i=Ir(un(e).declarations).reduce((s,a)=>{const l=Pe(a);return l&&s.push(new Ns(l)),s},[]);return new sA(r,i)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cA=(()=>Promise.resolve(0))();function Sh(n){typeof Zone>"u"?cA.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ct{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&e,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function uA(){let n=Ke.requestAnimationFrame,t=Ke.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function fA(n){const t=()=>{!function hA(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ke,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Mh(n),n.isCheckStableRunning=!0,xh(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Mh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,o,i,s,a)=>{try{return _C(n),e.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&t(),yC(n)}},onInvoke:(e,r,o,i,s,a,l)=>{try{return _C(n),e.invoke(o,i,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),yC(n)}},onHasTask:(e,r,o,i)=>{e.hasTask(o,i),r===o&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Mh(n),xh(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,r,o,i)=>(e.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ct.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(ct.isInAngularZone())throw new $(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,dA,Vl,Vl);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const dA={};function xh(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Mh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function _C(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function yC(n){n._nesting--,xh(n)}class pA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,o){return t.apply(e,r)}}const vC=new Y(""),Bl=new Y("");let Oh,Th=(()=>{class n{constructor(e,r,o){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Oh||(function gA(n){Oh=n}(o),o.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ct.assertNotInAngularZone(),Sh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Sh(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:o})}whenStable(e,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,o){return[]}}return n.\u0275fac=function(e){return new(e||n)(q(ct),q(Ih),q(Bl))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),Ih=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return Oh?.findTestabilityInTree(this,e,r)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const kr=!1;let Kr=null;const CC=new Y("AllowMultipleToken"),Ah=new Y("PlatformDestroyListeners"),bC=new Y("appBootstrapListener");class wC{constructor(t,e){this.name=t,this.token=e}}function EC(n,t,e=[]){const r=`Platform: ${t}`,o=new Y(r);return(i=[])=>{let s=Ph();if(!s||s.injector.get(CC,!1)){const a=[...e,...i,{provide:o,useValue:!0}];n?n(a):function yA(n){if(Kr&&!Kr.get(CC,!1))throw new $(400,!1);Kr=n;const t=n.get(xC);(function DC(n){const t=n.get(fC,null);t&&t.forEach(e=>e())})(n)}(function SC(n=[],t){return cr.create({name:t,providers:[{provide:Dd,useValue:"platform"},{provide:Ah,useValue:new Set([()=>Kr=null])},...n]})}(a,r))}return function CA(n){const t=Ph();if(!t)throw new $(401,!1);return t}()}}function Ph(){return Kr?.get(xC)??null}let xC=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const o=function TC(n,t){let e;return e="noop"===n?new pA:("zone.js"===n?void 0:n)||new ct(t),e}(r?.ngZone,function MC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:ct,useValue:o}];return o.run(()=>{const s=cr.create({providers:i,parent:this.injector,name:e.moduleType.name}),a=e.create(s),l=a.injector.get(ii,null);if(!l)throw new $(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{zl(this._modules,a),c.unsubscribe()})}),function IC(n,t,e){try{const r=e();return js(r)?r.catch(o=>{throw t.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(l,o,()=>{const c=a.injector.get(Ul);return c.runInitializers(),c.donePromise.then(()=>(function Zy(n){Sn(n,"Expected localeId to be defined"),"string"==typeof n&&(Qy=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Pr,wi)||wi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,r=[]){const o=OC({},r);return function mA(n,t,e){const r=new ah(e);return Promise.resolve(r)}(0,0,e).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(e){const r=e.injector.get(Hl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!e.instance.ngDoBootstrap)throw new $(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(Ah,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(q(cr))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function OC(n,t){return Array.isArray(t)?t.reduce(OC,n):{...n,...t}}let Hl=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,r,o){this._zone=e,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new We(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new We(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{ct.assertNotInAngularZone(),Sh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{ct.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function wE(...n){const t=ss(n),e=function gE(n,t){return"number"==typeof hu(n)?n.pop():t}(n,1/0),r=n;return r.length?1===r.length?jn(r[0]):Lo(e)(ft(r,t)):nr}(i,s.pipe(function DE(n={}){const{connector:t=(()=>new D),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=n;return i=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const _=s;f(),_?.unsubscribe()};return S((_,v)=>{c++,!d&&!u&&h();const w=l=l??t();v.add(()=>{c--,0===c&&!d&&!u&&(a=fu(p,o))}),w.subscribe(v),!s&&c>0&&(s=new en({next:k=>w.next(k),error:k=>{d=!0,h(),a=fu(f,e,k),w.error(k)},complete:()=>{u=!0,h(),a=fu(f,r),w.complete()}}),jn(_).subscribe(s))})(i)}}()))}bootstrap(e,r){const o=e instanceof s_;if(!this._injector.get(Ul).done){!o&&function Vo(n){const t=Pe(n)||Lt(n)||rn(n);return null!==t&&t.standalone}(e);throw new $(405,kr)}let s;s=o?e:this._injector.get(As).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function _A(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Di),c=s.create(cr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(vC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),zl(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new $(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;zl(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(bC,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>zl(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new $(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(q(ct),q(lr),q(ii))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zl(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let xi=(()=>{class n{}return n.__NG_ELEMENT_ID__=wA,n})();function wA(n){return function DA(n,t,e){if(ps(n)&&!e){const r=on(n.index,t);return new Rs(r,r)}return 47&n.type?new Rs(t[Vt],t):null}(kt(),L(),16==(16&n))}class NC{constructor(){}supports(t){return xl(t)}create(t){return new IA(t)}}const TA=(n,t)=>t;class IA{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||TA}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,o=0,i=null;for(;e||r;){const s=!r||e&&e.currentIndex<LC(r,o,i)?e:r,a=LC(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,u=l-o;if(c!=u){for(let h=0;h<c;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<c&&(i[h]=f+1)}i[s.previousIndex]=u-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!xl(t))throw new $(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,i,s,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,i,s,a)),Object.is(e.item,i)||this._addIdentityChange(e,i)):(e=this._mismatch(e,i,s,a),r=!0),e=e._next}else o=0,function nT(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(o,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,o),r=!0),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,o){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,o)):t=this._addAfter(new OA(e,r),i,o),t}_verifyReinsertion(t,e,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,i=t._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const o=null===e?this._itHead:e._next;return t._next=o,t._prev=e,null===o?this._itTail=t:o._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new FC),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FC),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class OA{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AA{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class FC{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new AA,this.map.set(e,r)),r.add(t)}get(t,e){const o=this.map.get(t);return o?o.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LC(n,t,e){const r=n.previousIndex;if(null===r)return r;let o=0;return e&&r<e.length&&(o=e[r]),r+t+o}class jC{constructor(){}supports(t){return t instanceof Map||Wd(t)}create(){return new PA}}class PA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Wd(t)))throw new $(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(o,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const o=this._records.get(t);this._maybeAddToChanges(o,e);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new kA(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class kA{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VC(){return new Wl([new NC])}let Wl=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const o=r.factories.slice();e=e.concat(o)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||VC()),deps:[[n,new ws,new bs]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(null!=r)return r;throw new $(901,!1)}}return n.\u0275prov=J({token:n,providedIn:"root",factory:VC}),n})();function $C(){return new Js([new jC])}let Js=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(r){const o=r.factories.slice();e=e.concat(o)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||$C()),deps:[[n,new ws,new bs]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(r)return r;throw new $(901,!1)}}return n.\u0275prov=J({token:n,providedIn:"root",factory:$C}),n})();const FA=EC(null,"core",[]);let LA=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(q(Hl))},n.\u0275mod=Vn({type:n}),n.\u0275inj=xn({}),n})();function Mi(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Lh=null;function Rr(){return Lh}class $A{}const Qt=new Y("DocumentToken");let jh=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return function UA(){return q(UC)}()},providedIn:"platform"}),n})();const BA=new Y("Location Initialized");let UC=(()=>{class n extends jh{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(e){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){BC()?this._history.pushState(e,r,o):this._location.hash=o}replaceState(e,r,o){BC()?this._history.replaceState(e,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(q(Qt))},n.\u0275prov=J({token:n,factory:function(){return function HA(){return new UC(q(Qt))}()},providedIn:"platform"}),n})();function BC(){return!!window.history.pushState}function Vh(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function HC(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Nr(n){return n&&"?"!==n[0]?"?"+n:n}let So=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return be(GC)},providedIn:"root"}),n})();const zC=new Y("appBaseHref");let GC=(()=>{class n extends So{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??be(Qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Vh(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Nr(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,i){const s=this.prepareExternalUrl(o+Nr(i));this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){const s=this.prepareExternalUrl(o+Nr(i));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(q(jh),q(zC,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zA=(()=>{class n extends So{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Vh(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+Nr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+Nr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(q(jh),q(zC,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),$h=(()=>{class n{constructor(e){this._subject=new ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function WA(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(HC(qC(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Nr(r))}normalize(e){return n.stripTrailingSlash(function qA(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,qC(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Nr(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Nr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r,complete:o})}}return n.normalizeQueryParams=Nr,n.joinWithSlash=Vh,n.stripTrailingSlash=HC,n.\u0275fac=function(e){return new(e||n)(q(So))},n.\u0275prov=J({token:n,factory:function(){return function GA(){return new $h(q(So))}()},providedIn:"root"}),n})();function qC(n){return n.replace(/\/index.html$/,"")}function tb(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[o,i]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}const Yh=/\s+/,nb=[];let rc=(()=>{class n{constructor(e,r,o,i){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this.initialClasses=nb,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Yh):nb}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Yh):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Yh).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(e){return new(e||n)(P(Wl),P(Js),P(pn),P(Tr))},n.\u0275dir=ce({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class AP{constructor(t,e,r,o){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let oc=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,o){this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new AP(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),ib(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{ib(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(P(qn),P(Ar),P(Wl))},n.\u0275dir=ce({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ib(n,t){n.context.$implicit=t.item}let Ti=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new kP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){sb("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){sb("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(P(qn),P(Ar))},n.\u0275dir=ce({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class kP{constructor(){this.$implicit=null,this.ngIf=null}}function sb(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${He(t)}'.`)}let cb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Vn({type:n}),n.\u0275inj=xn({}),n})();let ak=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>new lk(q(Qt),window)}),n})();class lk{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function ck(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(t)||i.querySelector(`[name="${t}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=db(this.window.history)||db(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function db(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class hb{}class Fk extends $A{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rf extends Fk{static makeCurrent(){!function VA(n){Lh||(Lh=n)}(new rf)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Lk(){return Xs=Xs||document.querySelector("base"),Xs?Xs.getAttribute("href"):null}();return null==e?null:function jk(n){ac=ac||document.createElement("a"),ac.setAttribute("href",n);const t=ac.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return tb(document.cookie,t)}}let ac,Xs=null;const _b=new Y("TRANSITION_ID"),$k=[{provide:$l,useFactory:function Vk(n,t,e){return()=>{e.get(Ul).donePromise.then(()=>{const r=Rr(),o=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[_b,Qt,cr],multi:!0}];let Bk=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const lc=new Y("EventManagerPlugins");let cc=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o){return this._findPluginFor(r).addEventListener(e,r,o)}addGlobalEventListener(e,r,o){return this._findPluginFor(r).addGlobalEventListener(e,r,o)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(q(lc),q(ct))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class yb{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const o=Rr().getGlobalEventTarget(this._doc,t);if(!o)throw new Error(`Unsupported event target ${o} for event ${e}`);return this.addEventListener(o,e,r)}}let vb=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const o=this.usageCount;let i=o.get(e)??0;return i+=r,i>0?o.set(e,i):o.delete(e),i}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),ea=(()=>{class n extends vb{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(i=>i.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const o=this.doc.createElement("style");o.textContent=r,e.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(q(Qt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const sf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},af=/%COMP%/g,wb=new Y("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Db(n,t){return t.flat(100).map(e=>e.replace(af,n))}function Eb(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let lf=(()=>{class n{constructor(e,r,o,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new cf(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(e,r);return o instanceof Mb?o.applyToHost(e):o instanceof uf&&o.applyStyles(),o}getOrCreateRenderer(e,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case or.Emulated:i=new Mb(s,a,r,this.appId,l);break;case or.ShadowDom:return new Jk(s,a,e,r);default:i=new uf(s,a,r,l)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(q(cc),q(ea),q(Ks),q(wb))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class cf{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(sf[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(xb(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(xb(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,o){if(o){e=o+":"+e;const i=sf[o];i?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const o=sf[r];o?t.removeAttributeNS(o,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,o){o&(sn.DashCase|sn.Important)?t.style.setProperty(e,r,o&sn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&sn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Eb(r)):this.eventManager.addEventListener(t,e,Eb(r))}}function xb(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Jk extends cf{constructor(t,e,r,o){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Db(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class uf extends cf{constructor(t,e,r,o,i=r.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=Db(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Mb extends uf{constructor(t,e,r,o,i){const s=o+"-"+r.id;super(t,e,r,i,s),this.contentAttr=function qk(n){return"_ngcontent-%COMP%".replace(af,n)}(s),this.hostAttr=function Wk(n){return"_nghost-%COMP%".replace(af,n)}(s)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let Yk=(()=>{class n extends yb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o){return e.addEventListener(r,o,!1),()=>this.removeEventListener(e,r,o)}removeEventListener(e,r,o){return e.removeEventListener(r,o)}}return n.\u0275fac=function(e){return new(e||n)(q(Qt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const Tb=["alt","control","meta","shift"],Qk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xk=(()=>{class n extends yb{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,o){const i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Tb.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let o=Qk[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(o=e.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Tb.forEach(s=>{s!==o&&(0,Zk[s])(e)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(e,r,o){return i=>{n.matchEventFullKeyCode(i,e)&&o.runGuarded(()=>r(i))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(q(Qt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const rR=EC(FA,"browser",[{provide:Eh,useValue:"browser"},{provide:fC,useValue:function eR(){rf.makeCurrent()},multi:!0},{provide:Qt,useFactory:function nR(){return function F1(n){pd=n}(document),document},deps:[]}]),Ab=new Y(""),Pb=[{provide:Bl,useClass:class Uk{addToWindow(t){Ke.getAngularTestability=(r,o=!0)=>{const i=t.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},Ke.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ke.getAllAngularRootElements=()=>t.getAllRootElements(),Ke.frameworkStabilizers||(Ke.frameworkStabilizers=[]),Ke.frameworkStabilizers.push(r=>{const o=Ke.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(l){s=s||l,i--,0==i&&r(s)};o.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?Rr().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:vC,useClass:Th,deps:[ct,Ih,Bl]},{provide:Th,useClass:Th,deps:[ct,Ih,Bl]}],kb=[{provide:Dd,useValue:"root"},{provide:ii,useFactory:function tR(){return new ii},deps:[]},{provide:lc,useClass:Yk,multi:!0,deps:[Qt,ct,Eh]},{provide:lc,useClass:Xk,multi:!0,deps:[Qt]},{provide:lf,useClass:lf,deps:[cc,ea,Ks,wb]},{provide:l_,useExisting:lf},{provide:vb,useExisting:ea},{provide:ea,useClass:ea,deps:[Qt]},{provide:cc,useClass:cc,deps:[lc,ct]},{provide:hb,useClass:Bk,deps:[]},[]];let oR=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Ks,useValue:e.appId},{provide:_b,useExisting:Ks},$k]}}}return n.\u0275fac=function(e){return new(e||n)(q(Ab,12))},n.\u0275mod=Vn({type:n}),n.\u0275inj=xn({providers:[...kb,...Pb],imports:[cb,LA]}),n})(),Rb=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(q(Qt))},n.\u0275prov=J({token:n,factory:function(e){let r=null;return r=e?new e:function sR(){return new Rb(q(Qt))}(),r},providedIn:"root"}),n})();function X(...n){return ft(n,ss(n))}function Yr(n,t){return re(t)?At(n,t,1):At(n,1)}function Lr(n,t){return S((e,r)=>{let o=0;e.subscribe(F(r,i=>n.call(t,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class uc{}class ff{}class jr{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const o=e.slice(0,r),i=o.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=e.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(e,i)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof jr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new jr;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof jr?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const o=("a"===t.op?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":const i=t.value;if(i){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class hR{encodeKey(t){return Lb(t)}encodeValue(t){return Lb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const pR=/%(\d[a-f0-9])/gi,gR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Lb(n){return encodeURIComponent(n).replace(pR,(t,e)=>gR[e]??t)}function dc(n){return`${n}`}class Qr{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new hR,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function fR(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,i)),t.decodeValue(o.slice(i+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],o=Array.isArray(r)?r.map(dc):[dc(r)];this.map.set(e,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const o=t[r];Array.isArray(o)?o.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Qr({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(dc(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const o=r.indexOf(dc(t.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class mR{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function jb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Vb(n){return typeof Blob<"u"&&n instanceof Blob}function $b(n){return typeof FormData<"u"&&n instanceof FormData}class ta{constructor(t,e,r,o){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function _R(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new jr),this.context||(this.context=new mR),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Qr,this.urlWithParams=e}serializeBody(){return null===this.body?null:jb(this.body)||Vb(this.body)||$b(this.body)||function yR(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$b(this.body)?null:Vb(this.body)?this.body.type||null:jb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((d,h)=>d.set(h,t.setHeaders[h]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((d,h)=>d.set(h,t.setParams[h]),c)),new ta(e,r,i,{params:c,headers:l,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var yt=(()=>((yt=yt||{})[yt.Sent=0]="Sent",yt[yt.UploadProgress=1]="UploadProgress",yt[yt.ResponseHeader=2]="ResponseHeader",yt[yt.DownloadProgress=3]="DownloadProgress",yt[yt.Response=4]="Response",yt[yt.User=5]="User",yt))();class pf{constructor(t,e=200,r="OK"){this.headers=t.headers||new jr,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class gf extends pf{constructor(t={}){super(t),this.type=yt.ResponseHeader}clone(t={}){return new gf({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class hc extends pf{constructor(t={}){super(t),this.type=yt.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new hc({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ub extends pf{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function mf(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ii=(()=>{class n{constructor(e){this.handler=e}request(e,r,o={}){let i;if(e instanceof ta)i=e;else{let l,c;l=o.headers instanceof jr?o.headers:new jr(o.headers),o.params&&(c=o.params instanceof Qr?o.params:new Qr({fromObject:o.params})),i=new ta(e,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=X(i).pipe(Yr(l=>this.handler.handle(l)));if(e instanceof ta||"events"===o.observe)return s;const a=s.pipe(Lr(l=>l instanceof hc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(R(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(R(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(R(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(R(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Qr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,mf(o,r))}post(e,r,o={}){return this.request("POST",e,mf(o,r))}put(e,r,o={}){return this.request("PUT",e,mf(o,r))}}return n.\u0275fac=function(e){return new(e||n)(q(uc))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function Bb(n,t){return t(n)}function vR(n,t){return(e,r)=>t.intercept(e,{handle:o=>n(o,r)})}const bR=new Y("HTTP_INTERCEPTORS"),na=new Y("HTTP_INTERCEPTOR_FNS");function wR(){let n=null;return(t,e)=>(null===n&&(n=(be(bR,{optional:!0})??[]).reduceRight(vR,Bb)),n(t,e))}let Hb=(()=>{class n extends uc{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(na)));this.chain=r.reduceRight((o,i)=>function CR(n,t,e){return(r,o)=>e.runInContext(()=>t(r,i=>n(i,o)))}(o,i,this.injector),Bb)}return this.chain(e,r=>this.backend.handle(r))}}return n.\u0275fac=function(e){return new(e||n)(q(ff),q(lr))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const xR=/^\)\]\}',?\n/;let Gb=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new We(r=>{const o=this.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((f,p)=>o.setRequestHeader(f,p.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=e.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",p=new jr(o.getAllResponseHeaders()),_=function MR(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||e.url;return s=new gf({headers:p,status:o.status,statusText:f,url:_}),s},l=()=>{let{headers:f,status:p,statusText:_,url:v}=a(),w=null;204!==p&&(w=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=w?200:0);let k=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof w){const E=w;w=w.replace(xR,"");try{w=""!==w?JSON.parse(w):null}catch(N){w=E,k&&(k=!1,w={error:N,text:w})}}k?(r.next(new hc({body:w,headers:f,status:p,statusText:_,url:v||void 0})),r.complete()):r.error(new Ub({error:w,headers:f,status:p,statusText:_,url:v||void 0}))},c=f=>{const{url:p}=a(),_=new Ub({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});r.error(_)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:yt.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===e.responseType&&o.responseText&&(p.partialText=o.responseText),r.next(p)},h=f=>{let p={type:yt.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return o.addEventListener("load",l),o.addEventListener("error",c),o.addEventListener("timeout",c),o.addEventListener("abort",c),e.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:yt.Sent}),()=>{o.removeEventListener("error",c),o.removeEventListener("abort",c),o.removeEventListener("load",l),o.removeEventListener("timeout",c),e.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(q(hb))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const _f=new Y("XSRF_ENABLED"),qb=new Y("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Wb=new Y("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Kb{}let OR=(()=>{class n{constructor(e,r,o){this.doc=e,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=tb(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(q(Qt),q(Eh),q(qb))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function AR(n,t){const e=n.url.toLowerCase();if(!be(_f)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=be(Kb).getToken(),o=be(Wb);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),t(n)}var ht=(()=>((ht=ht||{})[ht.Interceptors=0]="Interceptors",ht[ht.LegacyInterceptors=1]="LegacyInterceptors",ht[ht.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ht[ht.NoXsrfProtection=3]="NoXsrfProtection",ht[ht.JsonpSupport=4]="JsonpSupport",ht[ht.RequestsMadeViaParent=5]="RequestsMadeViaParent",ht))();function Oi(n,t){return{\u0275kind:n,\u0275providers:t}}function PR(...n){const t=[Ii,Gb,Hb,{provide:uc,useExisting:Hb},{provide:ff,useExisting:Gb},{provide:na,useValue:AR,multi:!0},{provide:_f,useValue:!0},{provide:Kb,useClass:OR}];for(const e of n)t.push(...e.\u0275providers);return function ix(n){return{\u0275providers:n}}(t)}const Jb=new Y("LEGACY_INTERCEPTOR_FN");let RR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Vn({type:n}),n.\u0275inj=xn({providers:[PR(Oi(ht.LegacyInterceptors,[{provide:Jb,useFactory:wR},{provide:na,useExisting:Jb,multi:!0}]))]}),n})();const{isArray:NR}=Array,{getPrototypeOf:FR,prototype:LR,keys:jR}=Object;function Yb(n){if(1===n.length){const t=n[0];if(NR(t))return{args:t,keys:null};if(function VR(n){return n&&"object"==typeof n&&FR(n)===LR}(t)){const e=jR(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}const{isArray:$R}=Array;function Qb(n){return R(t=>function UR(n,t){return $R(t)?n(...t):n(t)}(n,t))}function Zb(n,t){return n.reduce((e,r,o)=>(e[r]=t[o],e),{})}function xo(...n){const t=eg(n),{args:e,keys:r}=Yb(n),o=new We(i=>{const{length:s}=e;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;jn(e[u]).subscribe(F(i,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?Zb(r,a):a),i.complete())}))}});return t?o.pipe(Qb(t)):o}let Xb=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(P(Tr),P(pn))},n.\u0275dir=ce({type:n}),n})(),Mo=(()=>{class n extends Xb{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,features:[Re]}),n})();const pr=new Y("NgValueAccessor"),BR={provide:pr,useExisting:ze(()=>yf),multi:!0};let yf=(()=>{class n extends Mo{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&j("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[Qe([BR]),Re]}),n})();const HR={provide:pr,useExisting:ze(()=>Ai),multi:!0},GR=new Y("CompositionEventMode");let Ai=(()=>{class n extends Xb{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function zR(){const n=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(P(Tr),P(pn),P(GR,8))},n.\u0275dir=ce({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&j("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[Qe([HR]),Re]}),n})();const qR=!1;function Zr(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Bt=new Y("NgValidators"),Xr=new Y("NgAsyncValidators");function r0(n){return Zr(n.value)?{required:!0}:null}function fc(n){return null}function u0(n){return null!=n}function d0(n){const t=js(n)?ft(n):n;if(qR&&!Jd(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new $(-1101,e)}return t}function h0(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function f0(n,t){return t.map(e=>e(n))}function p0(n){return n.map(t=>function KR(n){return!n.validate}(t)?t:e=>t.validate(e))}function vf(n){return null!=n?function g0(n){if(!n)return null;const t=n.filter(u0);return 0==t.length?null:function(e){return h0(f0(e,t))}}(p0(n)):null}function Cf(n){return null!=n?function m0(n){if(!n)return null;const t=n.filter(u0);return 0==t.length?null:function(e){return xo(f0(e,t).map(d0)).pipe(R(h0))}}(p0(n)):null}function _0(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function bf(n){return n?Array.isArray(n)?n:[n]:[]}function pc(n,t){return Array.isArray(n)?n.includes(t):n===t}function C0(n,t){const e=bf(t);return bf(n).forEach(o=>{pc(e,o)||e.push(o)}),e}function b0(n,t){return bf(t).filter(e=>!pc(n,e))}class w0{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=vf(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Cf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Zt extends w0{get formDirective(){return null}get path(){return null}}class eo extends w0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class D0{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ra=(()=>{class n extends D0{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(P(eo,2))},n.\u0275dir=ce({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&Le("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Re]}),n})(),E0=(()=>{class n extends D0{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(P(Zt,10))},n.\u0275dir=ce({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&Le("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Re]}),n})();function S0(n,t){return n?`with name: '${t}'`:`at index: ${t}`}const Ef=!1,oa="VALID",mc="INVALID",Pi="PENDING",ia="DISABLED";function Sf(n){return(_c(n)?n.validators:n)||null}function xf(n,t){return(_c(t)?t.asyncValidators:n)||null}function _c(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class T0{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===oa}get invalid(){return this.status===mc}get pending(){return this.status==Pi}get disabled(){return this.status===ia}get enabled(){return this.status!==ia}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(C0(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(C0(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(b0(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(b0(t,this._rawAsyncValidators))}hasValidator(t){return pc(this._rawValidators,t)}hasAsyncValidator(t){return pc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Pi,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ia,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=oa,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oa||this.status===Pi)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ia:oa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Pi,this._hasOwnPendingAsyncValidator=!0;const e=d0(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?ia:this.errors?mc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pi)?Pi:this._anyControlsHaveStatus(mc)?mc:oa}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){_c(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function tN(n){return Array.isArray(n)?vf(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function nN(n){return Array.isArray(n)?Cf(n):n||null}(this._rawAsyncValidators)}}class Mf extends T0{constructor(t,e,r){super(Sf(e),xf(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function M0(n,t,e){n._forEachChild((r,o)=>{if(void 0===e[o])throw new $(1002,Ef?function eN(n,t){return`Must supply a value for form control ${S0(n,t)}`}(t,o):"")})})(this,!0,t),Object.keys(t).forEach(r=>{(function x0(n,t,e){const r=n.controls;if(!(t?Object.keys(r):r).length)throw new $(1e3,Ef?function ZR(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!r[e])throw new $(1001,Ef?function XR(n,t){return`Cannot find form control ${S0(n,t)}`}(t,e):"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{const o=this.controls[r];o&&o.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,o)=>{r.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((o,i)=>{r=e(r,o,i)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const ki=new Y("CallSetDisabledState",{providedIn:"root",factory:()=>yc}),yc="always";function sa(n,t,e=yc){Tf(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function iN(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&I0(n,t)})}(n,t),function aN(n,t){const e=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function sN(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&I0(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function oN(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function bc(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Tf(n,t){const e=function y0(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(_0(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function v0(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(_0(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();bc(t._rawValidators,o),bc(t._rawAsyncValidators,o)}function I0(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const hN={provide:Zt,useExisting:ze(()=>Dc)},aa=(()=>Promise.resolve())();let Dc=(()=>{class n extends Zt{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ot,this.form=new Mf({},vf(e),Cf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){aa.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),sa(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){aa.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){aa.then(()=>{const r=this._findContainer(e.path),o=new Mf({});(function O0(n,t){Tf(n,t)})(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){aa.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){aa.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function A0(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(P(Bt,10),P(Xr,10),P(ki,8))},n.\u0275dir=ce({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&j("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qe([hN]),Re]}),n})();function P0(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function k0(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const R0=class extends T0{constructor(t=null,e,r){super(Sf(e),xf(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_c(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=k0(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){P0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){P0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){k0(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},gN={provide:eo,useExisting:ze(()=>Ri)},L0=(()=>Promise.resolve())();let Ri=(()=>{class n extends eo{constructor(e,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new R0,this._registered=!1,this.update=new ot,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Af(n,t){if(!t)return null;let e,r,o;return Array.isArray(t),t.forEach(i=>{i.constructor===Ai?e=i:function uN(n){return Object.getPrototypeOf(n.constructor)===Mo}(i)?r=i:o=i}),o||r||e||null}(0,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Of(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sa(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){L0.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,o=0!==r&&Mi(r);L0.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function vc(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(P(Zt,9),P(Bt,10),P(Xr,10),P(pr,10),P(xi,8),P(ki,8))},n.\u0275dir=ce({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qe([gN]),Re,Tn]}),n})(),j0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ce({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const mN={provide:pr,useExisting:ze(()=>Ec),multi:!0};let Ec=(()=>{class n extends Mo{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,r){1&e&&j("input",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},features:[Qe([mN]),Re]}),n})(),V0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Vn({type:n}),n.\u0275inj=xn({}),n})();const SN={provide:pr,useExisting:ze(()=>Ni),multi:!0};function q0(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Ni=(()=>{class n extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=q0(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function xN(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&j("change",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qe([SN]),Re]}),n})(),Sc=(()=>{class n{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(q0(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(P(pn),P(Tr),P(Ni,9))},n.\u0275dir=ce({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const MN={provide:pr,useExisting:ze(()=>Nf),multi:!0};function W0(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Nf=(()=>{class n extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const o=e.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);o.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,e(o)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function TN(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&j("change",function(i){return r.onChange(i.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qe([MN]),Re]}),n})(),xc=(()=>{class n{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(W0(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(W0(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(P(pn),P(Tr),P(Nf,9))},n.\u0275dir=ce({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let To=(()=>{class n{constructor(){this._validator=fc}ngOnChanges(e){if(this.inputName in e){const r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fc,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ce({type:n,features:[Tn]}),n})();const ON={provide:Bt,useExisting:ze(()=>Mc),multi:!0};let Mc=(()=>{class n extends To{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>function J0(n){return"number"==typeof n?n:parseFloat(n)}(e),this.createValidator=e=>function t0(n){return t=>{if(Zr(t.value)||Zr(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&Kt("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Qe([ON]),Re]}),n})();const AN={provide:Bt,useExisting:ze(()=>Tc),multi:!0};let Tc=(()=>{class n extends To{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Mi,this.createValidator=e=>r0}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&Kt("required",r._enabled?"":null)},inputs:{required:"required"},features:[Qe([AN]),Re]}),n})(),LN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Vn({type:n}),n.\u0275inj=xn({imports:[V0]}),n})(),VN=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:ki,useValue:e.callSetDisabledState??yc}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Vn({type:n}),n.\u0275inj=xn({imports:[LN]}),n})();class Rn extends D{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const Ic=Ce(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function nw(...n){const t=ss(n),e=eg(n),{args:r,keys:o}=Yb(n);if(0===r.length)return ft([],t);const i=new We(function $N(n,t,e=er){return r=>{rw(t,()=>{const{length:o}=n,i=new Array(o);let s=o,a=o;for(let l=0;l<o;l++)rw(t,()=>{const c=ft(n[l],t);let u=!1;c.subscribe(F(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(e(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,o?s=>Zb(o,s):er));return e?i.pipe(Qb(e)):i}function rw(n,t,e){n?vr(e,n,t):t()}function Ff(...n){return function UN(){return Lo(1)}()(ft(n,ss(n)))}function ow(n){return new We(t=>{jn(n()).subscribe(t)})}function Fi(n,t){const e=re(n)?n:()=>n,r=o=>o.error(e());return new We(t?o=>t.schedule(r,0,o):r)}function Lf(){return S((n,t)=>{let e=null;n._refCount++;const r=F(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const o=n._connection,i=e;e=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class iw extends We{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,M(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new I;const e=this.getSubject();t.add(this.source.subscribe(F(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=I.EMPTY)}return t}refCount(){return Lf()(this)}}function gr(n,t){return S((e,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();e.subscribe(F(r,l=>{o?.unsubscribe();let c=0;const u=i++;jn(n(l,u)).subscribe(o=F(r,d=>r.next(t?t(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Li(n){return n<=0?()=>nr:S((t,e)=>{let r=0;t.subscribe(F(e,o=>{++r<=n&&(e.next(o),n<=r&&e.complete())}))})}function Oc(n){return S((t,e)=>{let r=!1;t.subscribe(F(e,o=>{r=!0,e.next(o)},()=>{r||e.next(n),e.complete()}))})}function sw(n=HN){return S((t,e)=>{let r=!1;t.subscribe(F(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(n())))})}function HN(){return new Ic}function to(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Lr((o,i)=>n(o,i,r)):er,Li(1),e?Oc(t):sw(()=>new Ic))}function vt(n,t,e){const r=re(n)||t||e?{next:n,error:t,complete:e}:n;return r?S((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(F(i,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),i.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),i.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),i.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):er}function Yn(n){return S((t,e)=>{let i,r=null,o=!1;r=t.subscribe(F(e,void 0,void 0,s=>{i=jn(n(s,Yn(n)(t))),r?(r.unsubscribe(),r=null,i.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(e))})}function aw(n,t){return S(function zN(n,t,e,r,o){return(i,s)=>{let a=e,l=t,c=0;i.subscribe(F(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}(n,t,arguments.length>=2,!0))}function jf(n){return n<=0?()=>nr:S((t,e)=>{let r=[];t.subscribe(F(e,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function lw(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Lr((o,i)=>n(o,i,r)):er,jf(1),e?Oc(t):sw(()=>new Ic))}function Vf(n){return S((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const _e="primary",la=Symbol("RouteTitle");class WN{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ji(n){return new WN(n)}function KN(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function mr(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let i=0;i<e.length;i++)if(o=e[i],!cw(n[o],t[o]))return!1;return!0}function cw(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((o,i)=>r[i]===o)}return n===t}function uw(n){return Array.prototype.concat.apply([],n)}function dw(n){return n.length>0?n[n.length-1]:null}function Nt(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function no(n){return Jd(n)?n:js(n)?ft(Promise.resolve(n)):X(n)}const Ac=!1,YN={exact:function pw(n,t,e){if(!Io(n.segments,t.segments)||!Pc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!pw(n.children[r],t.children[r],e))return!1;return!0},subset:gw},hw={exact:function QN(n,t){return mr(n,t)},subset:function ZN(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>cw(n[e],t[e]))},ignored:()=>!0};function fw(n,t,e){return YN[e.paths](n.root,t.root,e.matrixParams)&&hw[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function gw(n,t,e){return mw(n,t,t.segments,e)}function mw(n,t,e,r){if(n.segments.length>e.length){const o=n.segments.slice(0,e.length);return!(!Io(o,e)||t.hasChildren()||!Pc(o,e,r))}if(n.segments.length===e.length){if(!Io(n.segments,e)||!Pc(n.segments,e,r))return!1;for(const o in t.children)if(!n.children[o]||!gw(n.children[o],t.children[o],r))return!1;return!0}{const o=e.slice(0,n.segments.length),i=e.slice(n.segments.length);return!!(Io(n.segments,o)&&Pc(n.segments,o,r)&&n.children[_e])&&mw(n.children[_e],t,i,r)}}function Pc(n,t,e){return t.every((r,o)=>hw[e](n[o].parameters,r.parameters))}class ro{constructor(t=new Ee([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return tF.serialize(this)}}class Ee{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Nt(e,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kc(this)}}class ca{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ji(this.parameters)),this._parameterMap}toString(){return vw(this)}}function Io(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let ua=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return new $f},providedIn:"root"}),n})();class $f{parse(t){const e=new uF(t);return new ro(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${da(t.root,!0)}`,r=function oF(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(o=>`${Rc(e)}=${Rc(o)}`).join("&"):`${Rc(e)}=${Rc(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function nF(n){return encodeURI(n)}(t.fragment)}`:""}`}}const tF=new $f;function kc(n){return n.segments.map(t=>vw(t)).join("/")}function da(n,t){if(!n.hasChildren())return kc(n);if(t){const e=n.children[_e]?da(n.children[_e],!1):"",r=[];return Nt(n.children,(o,i)=>{i!==_e&&r.push(`${i}:${da(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function eF(n,t){let e=[];return Nt(n.children,(r,o)=>{o===_e&&(e=e.concat(t(r,o)))}),Nt(n.children,(r,o)=>{o!==_e&&(e=e.concat(t(r,o)))}),e}(n,(r,o)=>o===_e?[da(n.children[_e],!1)]:[`${o}:${da(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[_e]?`${kc(n)}/${e[0]}`:`${kc(n)}/(${e.join("//")})`}}function _w(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rc(n){return _w(n).replace(/%3B/gi,";")}function Uf(n){return _w(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nc(n){return decodeURIComponent(n)}function yw(n){return Nc(n.replace(/\+/g,"%20"))}function vw(n){return`${Uf(n.path)}${function rF(n){return Object.keys(n).map(t=>`;${Uf(t)}=${Uf(n[t])}`).join("")}(n.parameters)}`}const iF=/^[^\/()?;=#]+/;function Fc(n){const t=n.match(iF);return t?t[0]:""}const sF=/^[^=?&#]+/,lF=/^[^&#]+/;class uF{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[_e]=new Ee(t,e)),r}parseSegment(){const t=Fc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new $(4009,Ac);return this.capture(t),new ca(Nc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Fc(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=Fc(this.remaining);o&&(r=o,this.capture(r))}t[Nc(e)]=Nc(r)}parseQueryParam(t){const e=function aF(n){const t=n.match(sF);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const s=function cF(n){const t=n.match(lF);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=yw(e),i=yw(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Fc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new $(4010,Ac);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=_e);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s[_e]:new Ee([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new $(4011,Ac)}}function Bf(n){return n.segments.length>0?new Ee([],{[_e]:n}):n}function Lc(n){const t={};for(const r of Object.keys(n.children)){const i=Lc(n.children[r]);(i.segments.length>0||i.hasChildren())&&(t[r]=i)}return function dF(n){if(1===n.numberOfChildren&&n.children[_e]){const t=n.children[_e];return new Ee(n.segments.concat(t.segments),t.children)}return n}(new Ee(n.segments,t))}function Oo(n){return n instanceof ro}const Hf=!1;function hF(n,t,e,r,o){if(0===e.length)return Vi(t.root,t.root,t.root,r,o);const i=function Ew(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Dw(!0,0,n);let t=0,e=!1;const r=n.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Nt(i.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new Dw(e,t,r)}(e);return i.toRoot()?Vi(t.root,t.root,new Ee([],{}),r,o):function s(l){const c=function pF(n,t,e,r){if(n.isAbsolute)return new $i(t.root,!0,0);if(-1===r)return new $i(e,e===t.root,0);return function Sw(n,t,e){let r=n,o=t,i=e;for(;i>o;){if(i-=o,r=r.parent,!r)throw new $(4005,Hf&&"Invalid number of '../'");o=r.segments.length}return new $i(r,!1,o-i)}(e,r+(ha(n.commands[0])?0:1),n.numberOfDoubleDots)}(i,t,n.snapshot?._urlSegment,l),u=c.processChildren?Ui(c.segmentGroup,c.index,i.commands):zf(c.segmentGroup,c.index,i.commands);return Vi(t.root,c.segmentGroup,u,r,o)}(n.snapshot?._lastPathIndex)}function ha(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fa(n){return"object"==typeof n&&null!=n&&n.outlets}function Vi(n,t,e,r,o){let s,i={};r&&Nt(r,(l,c)=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===t?e:ww(n,t,e);const a=Bf(Lc(s));return new ro(a,i,o)}function ww(n,t,e){const r={};return Nt(n.children,(o,i)=>{r[i]=o===t?e:ww(o,t,e)}),new Ee(n.segments,r)}class Dw{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ha(r[0]))throw new $(4003,Hf&&"Root segment cannot have matrix parameters");const o=r.find(fa);if(o&&o!==dw(r))throw new $(4004,Hf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $i{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function zf(n,t,e){if(n||(n=new Ee([],{})),0===n.segments.length&&n.hasChildren())return Ui(n,t,e);const r=function mF(n,t,e){let r=0,o=t;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=e.length)return i;const s=n.segments[o],a=e[r];if(fa(a))break;const l=`${a}`,c=r<e.length-1?e[r+1]:null;if(o>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!Mw(l,c,s))return i;r+=2}else{if(!Mw(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,t,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new Ee(n.segments.slice(0,r.pathIndex),{});return i.children[_e]=new Ee(n.segments.slice(r.pathIndex),n.children),Ui(i,0,o)}return r.match&&0===o.length?new Ee(n.segments,{}):r.match&&!n.hasChildren()?Gf(n,t,e):r.match?Ui(n,0,o):Gf(n,t,e)}function Ui(n,t,e){if(0===e.length)return new Ee(n.segments,{});{const r=function gF(n){return fa(n[0])?n[0].outlets:{[_e]:n}}(e),o={};if(!r[_e]&&n.children[_e]&&1===n.numberOfChildren&&0===n.children[_e].segments.length){const i=Ui(n.children[_e],t,e);return new Ee(n.segments,i.children)}return Nt(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=zf(n.children[s],t,i))}),Nt(n.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new Ee(n.segments,o)}}function Gf(n,t,e){const r=n.segments.slice(0,t);let o=0;for(;o<e.length;){const i=e[o];if(fa(i)){const l=_F(i.outlets);return new Ee(r,l)}if(0===o&&ha(e[0])){r.push(new ca(n.segments[t].path,xw(e[0]))),o++;continue}const s=fa(i)?i.outlets[_e]:`${i}`,a=o<e.length-1?e[o+1]:null;s&&a&&ha(a)?(r.push(new ca(s,xw(a))),o+=2):(r.push(new ca(s,{})),o++)}return new Ee(r,{})}function _F(n){const t={};return Nt(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Gf(new Ee([],{}),0,e))}),t}function xw(n){const t={};return Nt(n,(e,r)=>t[r]=`${e}`),t}function Mw(n,t,e){return n==e.path&&mr(t,e.parameters)}const pa="imperative";class _r{constructor(t,e){this.id=t,this.url=e}}class qf extends _r{constructor(t,e,r="imperative",o=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oo extends _r{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jc extends _r{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vc extends _r{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=16}}class Wf extends _r{constructor(t,e,r,o){super(t,e),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yF extends _r{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vF extends _r{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CF extends _r{constructor(t,e,r,o,i){super(t,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bF extends _r{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wF extends _r{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DF{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class EF{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class SF{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xF{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MF{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TF{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tw{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let AF=(()=>{class n{createUrlTree(e,r,o,i,s,a){return hF(e||r.root,o,i,s,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),kF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(t){return AF.\u0275fac(t)},providedIn:"root"}),n})();class Iw{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Kf(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Kf(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Jf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Jf(t,this._root).map(e=>e.value)}}function Kf(n,t){if(n===t.value)return t;for(const e of t.children){const r=Kf(n,e);if(r)return r}return null}function Jf(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Jf(n,e);if(r.length)return r.unshift(t),r}return[]}class Vr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Bi(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Ow extends Iw{constructor(t,e){super(t),this.snapshot=e,Yf(this,t)}toString(){return this.snapshot.toString()}}function Aw(n,t){const e=function RF(n,t){const s=new $c([],{},{},"",{},_e,t,null,n.root,-1,{});return new kw("",new Vr(s,[]))}(n,t),r=new Rn([new ca("",{})]),o=new Rn({}),i=new Rn({}),s=new Rn({}),a=new Rn(""),l=new io(r,o,s,a,i,_e,t,e.root);return l.snapshot=e.root,new Ow(new Vr(l,[]),e)}class io{constructor(t,e,r,o,i,s,a,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(R(c=>c[la]))??X(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(R(t=>ji(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(R(t=>ji(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pw(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const o=e[r],i=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function NF(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class $c{get title(){return this.data?.[la]}constructor(t,e,r,o,i,s,a,l,c,u,d){this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ji(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kw extends Iw{constructor(t,e){super(e),this.url=t,Yf(this,e)}toString(){return Rw(this._root)}}function Yf(n,t){t.value._routerState=n,t.children.forEach(e=>Yf(n,e))}function Rw(n){const t=n.children.length>0?` { ${n.children.map(Rw).join(", ")} } `:"";return`${n.value}${t}`}function Qf(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,mr(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),mr(t.params,e.params)||n.params.next(e.params),function JN(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!mr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),mr(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Zf(n,t){const e=mr(n.params,t.params)&&function XN(n,t){return Io(n,t)&&n.every((e,r)=>mr(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Zf(n.parent,t.parent))}function ga(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const o=function LF(n,t,e){return t.children.map(r=>{for(const o of e.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ga(n,r,o);return ga(n,r)})}(n,t,e);return new Vr(r,o)}{if(n.shouldAttach(t.value)){const i=n.retrieve(t.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ga(n,a)),s}}const r=function jF(n){return new io(new Rn(n.url),new Rn(n.params),new Rn(n.queryParams),new Rn(n.fragment),new Rn(n.data),n.outlet,n.component,n)}(t.value),o=t.children.map(i=>ga(n,i));return new Vr(r,o)}}const Xf="ngNavigationCancelingError";function Nw(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=Oo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=Fw(!1,0,t);return o.url=e,o.navigationBehaviorOptions=r,o}function Fw(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[Xf]=!0,r.cancellationCode=t,e&&(r.url=e),r}function Lw(n){return jw(n)&&Oo(n.url)}function jw(n){return n&&n[Xf]}class VF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ma,this.attachRef=null}}let ma=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new VF,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Uc=!1;let Bc=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=_e,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=be(ma),this.location=be(qn),this.changeDetector=be(xi),this.environmentInjector=be(lr)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,Uc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,Uc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,Uc);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new $(4013,Uc);this._activatedRoute=e;const o=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new $F(e,a,o.injector);if(r&&function UF(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=o.createComponent(c,o.length,l)}else this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ce({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Tn]}),n})();class $F{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===io?this.route:t===ma?this.childContexts:this.parent.get(t,e)}}let ep=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Dr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Sv],decls:1,vars:0,template:function(e,r){1&e&&lt(0,"router-outlet")},dependencies:[Bc],encapsulation:2}),n})();function Vw(n,t){return n.providers&&!n._injector&&(n._injector=Rl(n.providers,t,`Route: ${n.path}`)),n._injector??t}function np(n){const t=n.children&&n.children.map(np),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==_e&&(e.component=ep),e}function Nn(n){return n.outlet||_e}function $w(n,t){const e=n.filter(r=>Nn(r)===t);return e.push(...n.filter(r=>Nn(r)!==t)),e}function _a(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class qF{constructor(t,e,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=o}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Qf(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const o=Bi(e);t.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Nt(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,e,r){const o=t.value,i=e?e.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,i=Bi(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,i=Bi(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const o=Bi(e);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new TF(i.value.snapshot))}),t.children.length&&this.forwardEvent(new xF(t.value.snapshot))}activateRoutes(t,e,r){const o=t.value,i=e?e.value:null;if(Qf(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Qf(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=_a(o.snapshot),l=a?.get(As)??null;s.attachRef=null,s.route=o,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class Uw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Hc{constructor(t,e){this.component=t,this.route=e}}function WF(n,t,e){const r=n._root;return ya(r,t?t._root:null,e,[r.value])}function Hi(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||function OE(n){return null!==La(n)}(n)?t.get(n):n:r}function ya(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Bi(t);return n.children.forEach(s=>{(function JF(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function YF(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Io(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,t.url)||!mr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zf(n,t)||!mr(n.queryParams,t.queryParams);default:return!Zf(n,t)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Uw(r)):(i.data=s.data,i._resolvedData=s._resolvedData),ya(n,t,i.component?a?a.children:null:e,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Hc(a.outlet.component,s))}else s&&va(t,a,o),o.canActivateChecks.push(new Uw(r)),ya(n,null,i.component?a?a.children:null:e,r,o)})(s,i[s.value.outlet],e,r.concat([s.value]),o),delete i[s.value.outlet]}),Nt(i,(s,a)=>va(s,e.getContext(a),o)),o}function va(n,t,e){const r=Bi(n),o=n.value;Nt(r,(i,s)=>{va(i,o.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new Hc(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}function Ca(n){return"function"==typeof n}function rp(n){return n instanceof Ic||"EmptyError"===n?.name}const zc=Symbol("INITIAL_VALUE");function zi(){return gr(n=>nw(n.map(t=>t.pipe(Li(1),function BN(...n){const t=ss(n);return S((e,r)=>{(t?Ff(n,e,t):Ff(n,e)).subscribe(r)})}(zc)))).pipe(R(t=>{for(const e of t)if(!0!==e){if(e===zc)return zc;if(!1===e||e instanceof ro)return e}return!0}),Lr(t=>t!==zc),Li(1)))}function Bw(n){return function Aa(...n){return is(n)}(vt(t=>{if(Oo(t))throw Nw(0,t)}),R(t=>!0===t))}const op={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hw(n,t,e,r,o){const i=ip(n,t,e);return i.matched?function f2(n,t,e,r){const o=t.canMatch;return o&&0!==o.length?X(o.map(s=>{const a=Hi(s,n);return no(function n2(n){return n&&Ca(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(zi(),Bw()):X(!0)}(r=Vw(t,r),t,e).pipe(R(s=>!0===s?i:{...op})):X(i)}function ip(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...op}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||KN)(e,n,t);if(!o)return{...op};const i={};Nt(o.posParams,(a,l)=>{i[l]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Gc(n,t,e,r){if(e.length>0&&function m2(n,t,e){return e.some(r=>qc(n,t,r)&&Nn(r)!==_e)}(n,e,r)){const i=new Ee(t,function g2(n,t,e,r){const o={};o[_e]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const i of e)if(""===i.path&&Nn(i)!==_e){const s=new Ee([],{});s._sourceSegment=n,s._segmentIndexShift=t.length,o[Nn(i)]=s}return o}(n,t,r,new Ee(e,n.children)));return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===e.length&&function _2(n,t,e){return e.some(r=>qc(n,t,r))}(n,e,r)){const i=new Ee(n.segments,function p2(n,t,e,r,o){const i={};for(const s of r)if(qc(n,e,s)&&!o[Nn(s)]){const a=new Ee([],{});a._sourceSegment=n,a._segmentIndexShift=t.length,i[Nn(s)]=a}return{...o,...i}}(n,t,e,r,n.children));return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:e}}const o=new Ee(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}function qc(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function zw(n,t,e,r){return!!(Nn(n)===r||r!==_e&&qc(t,e,n))&&("**"===n.path||ip(t,n,e).matched)}function Gw(n,t,e){return 0===t.length&&!n.children[e]}const Wc=!1;class Kc{constructor(t){this.segmentGroup=t||null}}class qw{constructor(t){this.urlTree=t}}function ba(n){return Fi(new Kc(n))}function Ww(n){return Fi(new qw(n))}class b2{constructor(t,e,r,o,i){this.injector=t,this.configLoader=e,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const t=Gc(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ee(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,_e).pipe(R(i=>this.createUrlTree(Lc(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yn(i=>{if(i instanceof qw)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof Kc?this.noMatchError(i):i}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,_e).pipe(R(o=>this.createUrlTree(Lc(o),t.queryParams,t.fragment))).pipe(Yn(o=>{throw o instanceof Kc?this.noMatchError(o):o}))}noMatchError(t){return new $(4002,Wc)}createUrlTree(t,e,r){const o=Bf(t);return new ro(o,e,r)}expandSegmentGroup(t,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(R(i=>new Ee([],i))):this.expandSegment(t,r,e,r.segments,o,!0)}expandChildren(t,e,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return ft(o).pipe(Yr(i=>{const s=r.children[i],a=$w(e,i);return this.expandSegmentGroup(t,a,s,i).pipe(R(l=>({segment:l,outlet:i})))}),aw((i,s)=>(i[s.outlet]=s.segment,i),{}),lw())}expandSegment(t,e,r,o,i,s){return ft(r).pipe(Yr(a=>this.expandSegmentAgainstRoute(t,e,r,a,o,i,s).pipe(Yn(c=>{if(c instanceof Kc)return X(null);throw c}))),to(a=>!!a),Yn((a,l)=>{if(rp(a))return Gw(e,o,i)?X(new Ee([],{})):ba(e);throw a}))}expandSegmentAgainstRoute(t,e,r,o,i,s,a){return zw(o,e,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(t,e,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s):ba(e):ba(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ww(i):this.lineralizeSegments(r,i).pipe(At(s=>{const a=new Ee(s,{});return this.expandSegment(t,a,e,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=ip(e,o,i);if(!a)return ba(e);const d=this.applyRedirectCommands(l,o.redirectTo,u);return o.redirectTo.startsWith("/")?Ww(d):this.lineralizeSegments(o,d).pipe(At(h=>this.expandSegment(t,e,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(t,e,r,o,i){return"**"===r.path?(t=Vw(r,t),r.loadChildren?(r._loadedRoutes?X({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(R(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new Ee(o,{})))):X(new Ee(o,{}))):Hw(e,r,o,t).pipe(gr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(t=r._injector??t,r,o).pipe(At(u=>{const d=u.injector??t,h=u.routes,{segmentGroup:f,slicedSegments:p}=Gc(e,a,l,h),_=new Ee(f.segments,f.children);if(0===p.length&&_.hasChildren())return this.expandChildren(d,h,_).pipe(R(E=>new Ee(a,E)));if(0===h.length&&0===p.length)return X(new Ee(a,{}));const v=Nn(r)===i;return this.expandSegment(d,_,h,p,v?_e:i,!0).pipe(R(k=>new Ee(a.concat(k.segments),k.children)))})):ba(e)))}getChildConfig(t,e,r){return e.children?X({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?X({routes:e._loadedRoutes,injector:e._loadedInjector}):function h2(n,t,e,r){const o=t.canLoad;return void 0===o||0===o.length?X(!0):X(o.map(s=>{const a=Hi(s,n);return no(function ZF(n){return n&&Ca(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(zi(),Bw())}(t,e,r).pipe(At(o=>o?this.configLoader.loadChildren(t,e).pipe(vt(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):function v2(n){return Fi(Fw(Wc,3))}())):X({routes:[],injector:t})}lineralizeSegments(t,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return X(r);if(o.numberOfChildren>1||!o.children[_e])return t.redirectTo,Fi(new $(4e3,Wc));o=o.children[_e]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,o){const i=this.createSegmentGroup(t,e.root,r,o);return new ro(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Nt(t,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,o){const i=this.createSegments(t,e.segments,r,o);let s={};return Nt(e.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,r,o)}),new Ee(i,s)}createSegments(t,e,r,o){return e.map(i=>i.path.startsWith(":")?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,e,r){const o=r[e.path.substring(1)];if(!o)throw new $(4001,Wc);return o}findOrReturn(t,e){let r=0;for(const o of e){if(o.path===t.path)return e.splice(r),o;r++}return t}}class D2{}class x2{constructor(t,e,r,o,i,s,a){this.injector=t,this.rootComponentType=e,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const t=Gc(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,_e).pipe(R(e=>{if(null===e)return null;const r=new $c([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_e,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Vr(r,e),i=new kw(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(t){const e=t.value,r=Pw(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,o)}processChildren(t,e,r){return ft(Object.keys(r.children)).pipe(Yr(o=>{const i=r.children[o],s=$w(e,o);return this.processSegmentGroup(t,s,i,o)}),aw((o,i)=>o&&i?(o.push(...i),o):null),function GN(n,t=!1){return S((e,r)=>{let o=0;e.subscribe(F(r,i=>{const s=n(i,o++);(s||t)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),Oc(null),lw(),R(o=>{if(null===o)return null;const i=Jw(o);return function M2(n){n.sort((t,e)=>t.value.outlet===_e?-1:e.value.outlet===_e?1:t.value.outlet.localeCompare(e.value.outlet))}(i),i}))}processSegment(t,e,r,o,i){return ft(e).pipe(Yr(s=>this.processSegmentAgainstRoute(s._injector??t,s,r,o,i)),to(s=>!!s),Yn(s=>{if(rp(s))return Gw(r,o,i)?X([]):X(null);throw s}))}processSegmentAgainstRoute(t,e,r,o,i){if(e.redirectTo||!zw(e,r,o,i))return X(null);let s;if("**"===e.path){const a=o.length>0?dw(o).parameters:{},l=Qw(r)+o.length;s=X({snapshot:new $c(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Zw(e),Nn(e),e.component??e._loadedComponent??null,e,Yw(r),l,Xw(e)),consumedSegments:[],remainingSegments:[]})}else s=Hw(r,e,o,t).pipe(R(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=Qw(r)+l.length;return{snapshot:new $c(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Zw(e),Nn(e),e.component??e._loadedComponent??null,e,Yw(r),d,Xw(e)),consumedSegments:l,remainingSegments:c}}));return s.pipe(gr(a=>{if(null===a)return X(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;t=e._injector??t;const d=e._loadedInjector??t,h=function T2(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:f,slicedSegments:p}=Gc(r,c,u,h.filter(v=>void 0===v.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(R(v=>null===v?null:[new Vr(l,v)]));if(0===h.length&&0===p.length)return X([new Vr(l,[])]);const _=Nn(e)===i;return this.processSegment(d,h,f,p,_?_e:i).pipe(R(v=>null===v?null:[new Vr(l,v)]))}))}}function I2(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Jw(n){const t=[],e=new Set;for(const r of n){if(!I2(r)){t.push(r);continue}const o=t.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),e.add(o)):t.push(r)}for(const r of e){const o=Jw(r.children);t.push(new Vr(r.value,o))}return t.filter(r=>!e.has(r))}function Yw(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Qw(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function Zw(n){return n.data||{}}function Xw(n){return n.resolve||{}}function eD(n){return"string"==typeof n.title||null===n.title}function sp(n){return gr(t=>{const e=n(t);return e?ft(e).pipe(R(()=>t)):X(t)})}const Gi=new Y("ROUTES");let ap=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=be(pC)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return X(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=no(e.loadComponent()).pipe(R(nD),vt(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),Vf(()=>{this.componentLoaders.delete(e)})),o=new iw(r,()=>new D).pipe(Lf());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(R(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(e).injector,c=uw(l.get(Gi,[],se.Self|se.Optional)));return{routes:c.map(np),injector:l}}),Vf(()=>{this.childrenLoaders.delete(r)})),s=new iw(i,()=>new D).pipe(Lf());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(e){return no(e()).pipe(R(nD),At(r=>r instanceof Dv||Array.isArray(r)?X(r):ft(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nD(n){return function L2(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Yc=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new D,this.configLoader=be(ap),this.environmentInjector=be(lr),this.urlSerializer=be(ua),this.rootContexts=be(ma),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new EF(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new DF(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new Rn({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pa,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Lr(r=>0!==r.id),R(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),gr(r=>{let o=!1,i=!1;return X(r).pipe(vt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gr(s=>{const a=e.browserUrlTree.toString(),l=!e.navigated||s.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const u="";return this.events.next(new Vc(s.id,e.serializeUrl(r.rawUrl),u,0)),e.rawUrlTree=s.rawUrl,s.resolve(null),nr}if(e.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return rD(s.source)&&(e.browserUrlTree=s.extractedUrl),X(s).pipe(gr(u=>{const d=this.transitions?.getValue();return this.events.next(new qf(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?nr:Promise.resolve(u)}),function w2(n,t,e,r){return gr(o=>function C2(n,t,e,r,o){return new b2(n,t,e,r,o).apply()}(n,t,e,o.extractedUrl,r).pipe(R(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),vt(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function A2(n,t,e,r,o){return At(i=>function S2(n,t,e,r,o,i,s="emptyOnly"){return new x2(n,t,e,r,o,s,i).recognize().pipe(gr(a=>null===a?function E2(n){return new We(t=>t.error(n))}(new D2):X(a)))}(n,t,e,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(R(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),vt(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=e.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);e.setBrowserUrl(h,u)}e.browserUrlTree=u.urlAfterRedirects}const d=new yF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,_=new qf(u,this.urlSerializer.serialize(d),h,f);this.events.next(_);const v=Aw(d,this.rootComponentType).snapshot;return X(r={...s,targetSnapshot:v,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Vc(s.id,e.serializeUrl(r.extractedUrl),u,1)),e.rawUrlTree=s.rawUrl,s.resolve(null),nr}}),vt(s=>{const a=new vF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),R(s=>r={...s,guards:WF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function o2(n,t){return At(e=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return 0===s.length&&0===i.length?X({...e,guardsResult:!0}):function i2(n,t,e,r){return ft(n).pipe(At(o=>function d2(n,t,e,r,o){const i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return i&&0!==i.length?X(i.map(a=>{const l=_a(t)??o,c=Hi(a,l);return no(function t2(n){return n&&Ca(n.canDeactivate)}(c)?c.canDeactivate(n,t,e,r):l.runInContext(()=>c(n,t,e,r))).pipe(to())})).pipe(zi()):X(!0)}(o.component,o.route,e,t,r)),to(o=>!0!==o,!0))}(s,r,o,n).pipe(At(a=>a&&function QF(n){return"boolean"==typeof n}(a)?function s2(n,t,e,r){return ft(t).pipe(Yr(o=>Ff(function l2(n,t){return null!==n&&t&&t(new SF(n)),X(!0)}(o.route.parent,r),function a2(n,t){return null!==n&&t&&t(new MF(n)),X(!0)}(o.route,r),function u2(n,t,e){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(s=>function KF(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(s)).filter(s=>null!==s).map(s=>ow(()=>X(s.guards.map(l=>{const c=_a(s.node)??e,u=Hi(l,c);return no(function e2(n){return n&&Ca(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(to())})).pipe(zi())));return X(i).pipe(zi())}(n,o.path,e),function c2(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return X(!0);const o=r.map(i=>ow(()=>{const s=_a(t)??e,a=Hi(i,s);return no(function XF(n){return n&&Ca(n.canActivate)}(a)?a.canActivate(t,n):s.runInContext(()=>a(t,n))).pipe(to())}));return X(o).pipe(zi())}(n,o.route,e))),to(o=>!0!==o,!0))}(r,i,n,t):X(a)),R(a=>({...e,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),vt(s=>{if(r.guardsResult=s.guardsResult,Oo(s.guardsResult))throw Nw(0,s.guardsResult);const a=new CF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Lr(s=>!!s.guardsResult||(e.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),sp(s=>{if(s.guards.canActivateChecks.length)return X(s).pipe(vt(a=>{const l=new bF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),gr(a=>{let l=!1;return X(a).pipe(function P2(n,t){return At(e=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return X(e);let i=0;return ft(o).pipe(Yr(s=>function k2(n,t,e,r){const o=n.routeConfig,i=n._resolve;return void 0!==o?.title&&!eD(o)&&(i[la]=o.title),function R2(n,t,e,r){const o=function N2(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return X({});const i={};return ft(o).pipe(At(s=>function F2(n,t,e,r){const o=_a(t)??r,i=Hi(n,o);return no(i.resolve?i.resolve(t,e):o.runInContext(()=>i(t,e)))}(n[s],t,e,r).pipe(to(),vt(a=>{i[s]=a}))),jf(1),function qN(n){return R(()=>n)}(i),Yn(s=>rp(s)?nr:Fi(s)))}(i,n,t,r).pipe(R(s=>(n._resolvedData=s,n.data=Pw(n,e).resolve,o&&eD(o)&&(n.data[la]=o.title),null)))}(s.route,r,n,t)),vt(()=>i++),jf(1),At(s=>i===o.length?X(e):nr))})}(e.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),vt(a=>{const l=new wF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),sp(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(vt(u=>{l.component=u}),R(()=>{})));for(const u of l.children)c.push(...a(u));return c};return nw(a(s.targetSnapshot.root)).pipe(Oc(),Li(1))}),sp(()=>this.afterPreactivation()),R(s=>{const a=function FF(n,t,e){const r=ga(n,t._root,e?e._root:void 0);return new Ow(r,t)}(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),vt(s=>{e.currentUrlTree=s.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),e.routerState=s.targetRouterState,"deferred"===e.urlUpdateStrategy&&(s.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,s),e.browserUrlTree=s.urlAfterRedirects)}),((n,t,e)=>R(r=>(new qF(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s)),Li(1),vt({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new oo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Vf(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Yn(s=>{if(i=!0,jw(s)){Lw(s)||(e.navigated=!0,e.restoreHistory(r,!0));const a=new jc(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),Lw(s)){const l=e.urlHandlingStrategy.merge(s.url,e.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||rD(r.source)};e.scheduleNavigation(l,pa,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const a=new Wf(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(e.errorHandler(s))}catch(l){r.reject(l)}}return nr}))}))}cancelNavigationTransition(e,r,o){const i=new jc(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(i),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rD(n){return n!==pa}let oD=(()=>{class n{buildTitle(e){let r,o=e.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===_e);return r}getResolvedTitleForRoute(e){return e.data[la]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return be(j2)},providedIn:"root"}),n})(),j2=(()=>{class n extends oD{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(q(Rb))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return be(U2)},providedIn:"root"}),n})();class $2{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let U2=(()=>{class n extends $2{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Rt(n)))(r||n)}}(),n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qc=new Y("",{providedIn:"root",factory:()=>({})});let H2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:function(){return be(z2)},providedIn:"root"}),n})(),z2=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function G2(n){throw n}function q2(n,t,e){return t.parse("/")}const W2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},K2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xt=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=be(rA),this.isNgZoneEnabled=!1,this.options=be(Qc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||G2,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||q2,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=be(H2),this.routeReuseStrategy=be(V2),this.urlCreationStrategy=be(kF),this.titleStrategy=be(oD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=uw(be(Gi,{optional:!0})??[]),this.navigationTransitions=be(Yc),this.urlSerializer=be(ua),this.location=be($h),this.isNgZoneEnabled=be(ct)instanceof ct&&ct.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ro,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Aw(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),pa,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(np),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){const o=Oo(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,pa,null,r)}navigate(e,r={skipLocationChange:!1}){return function J2(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new $(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return r}isActive(e,r){let o;if(o=!0===r?{...W2}:!1===r?{...K2}:r,Oo(e))return fw(this.currentUrlTree,e,o);const i=this.parseUrl(e);return fw(this.currentUrlTree,i,o)}removeEmptyProps(e){return Object.keys(e).reduce((r,o)=>{const i=e[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(e,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(e,r){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zc=(()=>{class n{constructor(e,r,o,i,s,a){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new D;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof oo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=Mi(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=Mi(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=Mi(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function Ym(n,t,e){return function ox(n,t){return"src"===t&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===t&&("base"===n||"link"===n)?Jm:ni}(t,e)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,e,r):o.removeAttribute(i,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(P(xt),P(io),function ol(n){return function IS(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let o=0;for(;o<r;){const i=e[o];if($g(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof e[o];)o++;else{if(i===t)return e[o+1];o+=2}}}return null}(kt(),n)}("tabindex"),P(Tr),P(pn),P(So))},n.\u0275dir=ce({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,r){1&e&&j("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&e&&Kt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Tn]}),n})(),iD=(()=>{class n{get isActive(){return this._isActive}constructor(e,r,o,i,s){this.router=e,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ot,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof oo&&this.update()})}ngAfterContentInit(){X(this.links.changes,X(null)).pipe(Lo()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ft(e).pipe(Lo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const r=function Y2(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&e.isActive(o.urlTree,r)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}}return n.\u0275fac=function(e){return new(e||n)(P(xt),P(pn),P(Tr),P(xi),P(Zc,8))},n.\u0275dir=ce({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,r,o){if(1&e&&zv(o,Zc,5),2&e){let i;Hv(i=function Gv(){return function FO(n,t){return n[ir].queries[t].queryList}(L(),kg())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Tn]}),n})();class sD{}let Q2=(()=>{class n{constructor(e,r,o,i,s){this.router=e,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Lr(e=>e instanceof oo),Yr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=Rl(i.providers,e,`Route: ${i.path}`));const s=i._injector??e,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return ft(o).pipe(Lo())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):X(null);const i=o.pipe(At(s=>null===s?X(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return r.loadComponent&&!r._loadedComponent?ft([i,this.loader.loadComponent(r)]).pipe(Lo()):i})}}return n.\u0275fac=function(e){return new(e||n)(q(xt),q(pC),q(lr),q(sD),q(ap))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cp=new Y("");let aD=(()=>{class n{constructor(e,r,o,i,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof qf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof oo&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Tw&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Tw(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){!function M_(){throw new Error("invalid")}()},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();var mn=(()=>((mn=mn||{})[mn.COMPLETE=0]="COMPLETE",mn[mn.FAILED=1]="FAILED",mn[mn.REDIRECTING=2]="REDIRECTING",mn))();const qi=!1;function so(n,t){return{\u0275kind:n,\u0275providers:t}}const up=new Y("",{providedIn:"root",factory:()=>!1});function cD(){const n=be(cr);return t=>{const e=n.get(Hl);if(t!==e.components[0])return;const r=n.get(xt),o=n.get(uD);1===n.get(dp)&&r.initialNavigation(),n.get(dD,null,se.Optional)?.setUpPreloading(),n.get(cp,null,se.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const uD=new Y(qi?"bootstrap done indicator":"",{factory:()=>new D}),dp=new Y(qi?"initial navigation":"",{providedIn:"root",factory:()=>1});function nL(){let n=[];return n=qi?[{provide:gl,multi:!0,useFactory:()=>{const t=be(xt);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function IF(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],so(1,n)}const dD=new Y(qi?"router preloader":"");function rL(n){return so(0,[{provide:dD,useExisting:Q2},{provide:sD,useExisting:n}])}const wa=!1,hD=new Y(wa?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),oL=[$h,{provide:ua,useClass:$f},xt,ma,{provide:io,useFactory:function lD(n){return n.routerState.root},deps:[xt]},ap,wa?{provide:up,useValue:!0}:[]];function iL(){return new wC("Router",xt)}let fD=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[oL,wa&&r?.enableTracing?nL().\u0275providers:[],{provide:Gi,multi:!0,useValue:e},{provide:hD,useFactory:cL,deps:[[xt,new bs,new ws]]},{provide:Qc,useValue:r||{}},r?.useHash?{provide:So,useClass:zA}:{provide:So,useClass:GC},{provide:cp,useFactory:()=>{const n=be(ak),t=be(ct),e=be(Qc),r=be(Yc),o=be(ua);return e.scrollOffset&&n.setOffset(e.scrollOffset),new aD(o,r,n,t,e)}},r?.preloadingStrategy?rL(r.preloadingStrategy).\u0275providers:[],{provide:wC,multi:!0,useFactory:iL},r?.initialNavigation?uL(r):[],[{provide:pD,useFactory:cD},{provide:bC,multi:!0,useExisting:pD}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Gi,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(q(hD,8))},n.\u0275mod=Vn({type:n}),n.\u0275inj=xn({imports:[ep]}),n})();function cL(n){if(wa&&n)throw new $(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function uL(n){return["disabled"===n.initialNavigation?so(3,[{provide:$l,multi:!0,useFactory:()=>{const t=be(xt);return()=>{t.setUpLocationChangeListener()}}},{provide:dp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?so(2,[{provide:dp,useValue:0},{provide:$l,multi:!0,deps:[cr],useFactory:t=>{const e=t.get(BA,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=t.get(xt),i=t.get(uD);(function Z2(n,t){n.events.pipe(Lr(e=>e instanceof oo||e instanceof jc||e instanceof Wf||e instanceof Vc),R(e=>e instanceof oo||e instanceof Vc?mn.COMPLETE:e instanceof jc&&(0===e.code||1===e.code)?mn.REDIRECTING:mn.FAILED),Lr(e=>e!==mn.REDIRECTING),Li(1)).subscribe(()=>{t()})})(o,()=>{r(!0)}),t.get(Yc).afterPreactivation=()=>(r(!0),i.closed?X(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const pD=new Y(wa?"Router Initializer":"");let hL=(()=>{const t=class{constructor(r){this.router=r,this.title="Pokemon TCG Pocket Collector"}ngOnInit(){const r=()=>{const o=this.router.url.startsWith("/signin");document.body.classList.toggle("signin-page",o)};r(),this.routerSub=this.router.events.subscribe(o=>{o instanceof oo&&r()})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe?.(),document.body.classList.remove("signin-page")}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(xt))},t.\u0275cmp=Dr({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){1&o&&lt(0,"router-outlet")},dependencies:[Bc],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background-color:#000;min-height:100vh}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.data-overview[_ngcontent-%COMP%]{margin-top:30px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 6px #0000001a}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;opacity:.9}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0}.section[_ngcontent-%COMP%]{margin:40px 0;padding:20px 0;border-top:2px solid #e9ecef}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:20px}.sets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.set-card[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.set-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px}.rarity-stats[_ngcontent-%COMP%], .pack-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.rarity-item[_ngcontent-%COMP%], .pack-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#000;border-radius:5px;border-left:4px solid #007bff}.rarity-name[_ngcontent-%COMP%], .pack-name[_ngcontent-%COMP%]{font-weight:600;color:#fff}.rarity-count[_ngcontent-%COMP%], .pack-count[_ngcontent-%COMP%]{color:#ccc}.rarity-percentage[_ngcontent-%COMP%], .pack-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0}.feature[_ngcontent-%COMP%]{background-color:#000;padding:20px;border-radius:8px;border-left:4px solid #17a2b8}.feature[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0;font-size:14px}.api-info[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:20px}.api-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0}.api-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;margin:0}.api-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;color:#ff6b6b}.error[_ngcontent-%COMP%]{background-color:#000;color:#ff6b6b;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center;border:1px solid #ff6b6b}.card-info[_ngcontent-%COMP%]{margin-top:30px}.card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}.card-item[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.card-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin:0 0 10px;font-size:16px}.card-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#ccc}.note[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#ccc;margin-top:20px}.instructions[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:30px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:#fff}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace}.data-info[_ngcontent-%COMP%]{background-color:#000;border-left:4px solid #007bff;padding:15px;margin-top:20px}.data-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:200px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),n})();function gD(n,t,e,r,o,i,s){try{var a=n[i](s),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function y(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function s(l){gD(i,r,o,s,a,"next",l)}function a(l){gD(i,r,o,s,a,"throw",l)}s(void 0)})}}let Xc=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_URL="https://raw.githubusercontent.com/tommycwz/PokemonTCGPDatabase/refs/heads/main/release/cards.json",this.RARITY_URL="https://raw.githubusercontent.com/tommycwz/PokemonTCGPDatabase/refs/heads/main/release/rarity.json",this.SETS_URL="https://raw.githubusercontent.com/tommycwz/PokemonTCGPDatabase/refs/heads/main/release/sets.json"}getCardRarityCode(r,o){for(const[i,s]of Object.entries(o))if(s.split(" - ")[0]===r.rarity)return i;return r.rarity||"Unknown"}loadSets(){return this.http.get(this.SETS_URL)}loadRarities(){return this.http.get(this.RARITY_URL)}loadCards(){return this.http.get(this.CARDS_URL)}loadAllData(){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(vt(r=>{}))}getSetByCode(r){return this.loadSets().pipe(R(o=>o.find(i=>i.code===r)))}getRarityName(r){return this.loadRarities().pipe(R(o=>o[r]))}getCardsBySetWithInfo(r){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(R(({cards:o,sets:i,rarities:s})=>{const a=i.find(l=>l.code===r);return o.filter(l=>l.set===r).map(l=>({...l,setInfo:a,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}))}))}getSetsWithCardCounts(){return xo({cards:this.loadCards(),sets:this.loadSets()}).pipe(R(({cards:r,sets:o})=>o.map(i=>{const s=r.filter(a=>a.set===i.code).length;return{...i,actualCardCount:s}})))}getRarityDistribution(){return xo({cards:this.loadCards(),rarities:this.loadRarities()}).pipe(R(({cards:r,rarities:o})=>{const i={};r.forEach(a=>{const l=this.getCardRarityCode(a,o);i[l]=(i[l]||0)+1});const s=r.length;return Object.entries(i).map(([a,l])=>({code:a,name:o[a]||a,count:l,percentage:Math.round(l/s*100*100)/100})).sort((a,l)=>l.count-a.count)}))}getPackDistribution(){return this.loadCards().pipe(R(r=>{const o={};r.forEach(s=>{(Array.isArray(s.packs)?s.packs:[]).forEach(l=>{l&&l.trim()&&(o[l]=(o[l]||0)+1)})});const i=Object.values(o).reduce((s,a)=>s+a,0);return Object.entries(o).map(([s,a])=>({pack:s,count:a,percentage:i>0?Math.round(a/i*100*100)/100:0})).sort((s,a)=>a.count-s.count)}))}searchCardsEnhanced(r){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(R(({cards:o,sets:i,rarities:s})=>o.filter(l=>l.label.eng.toLowerCase().includes(r.toLowerCase())).map(l=>{const c=i.find(u=>u.code===l.set);return{...l,setInfo:c,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}})))}getComprehensiveStats(){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(R(({cards:r,sets:o,rarities:i})=>({totalCards:r.length,totalSets:o.length,totalRarities:Object.keys(i).length,setBreakdown:o.map(a=>({...a,actualCardCount:r.filter(l=>l.set===a.code).length})),rarityBreakdown:Object.entries(i).map(([a,l])=>({code:a,name:l,count:r.filter(c=>this.getCardRarityCode(c,i)===a).length})),packBreakdown:this.calculatePackDistribution(r),dateRange:{earliest:o.reduce((a,l)=>new Date(l.releaseDate)<new Date(a)?l.releaseDate:a,o[0]?.releaseDate||""),latest:o.reduce((a,l)=>new Date(l.releaseDate)>new Date(a)?l.releaseDate:a,o[0]?.releaseDate||"")}})))}calculatePackDistribution(r){const o={};return r.forEach(i=>{(Array.isArray(i.packs)?i.packs:[]).forEach(a=>{a&&a.trim()&&(o[a]=(o[a]||0)+1)})}),Object.entries(o).map(([i,s])=>({pack:i,count:s})).sort((i,s)=>s.count-i.count)}};let n=t;return t.\u0275fac=function(o){return new(o||t)(q(Ii))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),fL=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/tommycwz/PokemonTCGPDatabase/refs/heads/main/release/cards.json"}fetchCardsFromAPI(){return this.http.get(this.CARDS_API_URL)}downloadAndStoreCards(){return this.fetchCardsFromAPI().pipe(vt(r=>{localStorage.setItem("pokemonCards",JSON.stringify(r))}))}getStoredCards(){const r=localStorage.getItem("pokemonCards");return r?JSON.parse(r):null}loadCards(){return this.fetchCardsFromAPI().pipe(R(r=>r||[]))}getCardsBySet(r){return this.loadCards().pipe(R(o=>o.filter(i=>i.set===r)))}getCardsByType(r){return this.loadCards().pipe(R(o=>o.filter(i=>i.types&&i.types.includes(r))))}getCardsByRarity(r){return this.loadCards().pipe(R(o=>o.filter(i=>i.rarity===r)))}searchCardsByName(r){return this.loadCards().pipe(R(o=>o.filter(i=>i.label.eng.toLowerCase().includes(r.toLowerCase()))))}getUniqueSets(){return this.loadCards().pipe(R(r=>[...new Set(r.map(o=>o.set))]))}getAvailableTypes(){return this.loadCards().pipe(R(r=>[...new Set(r.flatMap(o=>o.types||[]).filter(o=>!!o))]))}getUniqueRarities(){return this.loadCards().pipe(R(r=>[...new Set(r.map(o=>o.rarity))]))}getUniquePacks(){return this.loadCards().pipe(R(r=>[...new Set(r.flatMap(o=>o.packs))]))}};let n=t;return t.\u0275fac=function(o){return new(o||t)(q(Ii))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),pL=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/tommycwz/PokemonTCGPDatabase/refs/heads/main/release/cards.json"}downloadCardsData(){return this.http.get(this.CARDS_API_URL).pipe(Yn(r=>(console.error("Error downloading cards data:",r),Fi(()=>new Error("Failed to download cards data")))))}downloadCardsAsBlob(){return this.downloadCardsData().pipe(R(r=>{const o=JSON.stringify(r,null,2);return new Blob([o],{type:"application/json"})}))}triggerDownload(){this.downloadCardsAsBlob().subscribe({next:r=>{const o=window.URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download="cards.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},error:r=>{console.error("Failed to download cards data:",r)}})}getStorageInstructions(){return"\nTo store the cards data locally:\n\n1. Create a 'cards' folder in src/assets/\n2. Use the downloadCardsAsBlob() method to get the data\n3. Save the file as 'cards.json' in src/assets/cards/\n\nAlternative: Use triggerDownload() to download the file and manually move it to the assets folder.\n\nNote: In a production environment, you would typically have a backend service \nto handle file storage and serving.\n    "}};let n=t;return t.\u0275fac=function(o){return new(o||t)(q(Ii))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),gL=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/tommycwz/PokemonTCGPDatabase/refs/heads/main/release/cards.json"}downloadCardsJson(){this.http.get(this.CARDS_API_URL).subscribe({next:r=>{const o=JSON.stringify(r,null,2),i=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="cards.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`Downloaded ${r.length} cards to cards.json\n\nPlease move the file to: src/assets/cards/cards.json`)},error:r=>{console.error("Failed to download cards data:",r),alert("Failed to download cards data. Please check your internet connection.")}})}showSetupInstructions(){return`\n=== Pokemon TCG Pocket Collector Setup Instructions ===\n\n1. AUTOMATIC DOWNLOAD (Recommended):\n   - Click "Download cards.json" button\n   - Move the downloaded file to: src/assets/cards/cards.json\n   - Restart the development server\n\n2. MANUAL DOWNLOAD:\n   - Go to: ${this.CARDS_API_URL}\n   - Right-click and "Save As" to src/assets/cards/cards.json\n   - Restart the development server\n\n3. VERIFY SETUP:\n   - Click "Load Cards Data" to test the service\n   - Check browser console for detailed information\n   - Data will be cached in localStorage for offline use\n\n=== Service Features ===\n- \u2705 Fetch cards from Pokemon TCG Pocket database\n- \u2705 Store data locally for offline access\n- \u2705 Filter by set, type, rarity\n- \u2705 Search cards by name\n- \u2705 Get unique values for filters\n- \u2705 Automatic fallback to localStorage\n\nFor more information, check the browser console when using the services.\n    `}};let n=t;return t.\u0275fac=function(o){return new(o||t)(q(Ii))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),mD=(()=>{const t=class{constructor(r,o,i,s){this.cardDataService=r,this.fileStorageService=o,this.assetsHelper=i,this.pokemonDataService=s}initializeCardData(){return this.cardDataService.downloadAndStoreCards().pipe(vt(r=>{this.logDataSummary(r)}),Yn(r=>(console.error("Failed to initialize card data:",r),X(this.cardDataService.getStoredCards()||[]))))}downloadCardsFile(){this.assetsHelper.downloadCardsJson()}getStorageInstructions(){return this.assetsHelper.showSetupInstructions()}logDataSummary(r){new Set(r.map(a=>a.set)),new Set(r.map(a=>a.rarity)),new Set(r.flatMap(a=>a.packs))}getAllCards(){return this.cardDataService.loadCards()}getCardsBySet(r){return this.cardDataService.getCardsBySet(r)}getCardsByType(r){return this.cardDataService.getCardsByType(r)}getCardsByPack(r){return this.cardDataService.loadCards().pipe(R(o=>o.filter(i=>i.packs.includes(r))))}searchCards(r){return this.cardDataService.searchCardsByName(r)}getFilterOptions(){return new We(r=>{Promise.all([this.cardDataService.getUniqueSets().toPromise(),this.cardDataService.getAvailableTypes().toPromise(),this.cardDataService.getUniqueRarities().toPromise(),this.cardDataService.getUniquePacks().toPromise()]).then(([o,i,s,a])=>{r.next({sets:o||[],types:i||[],rarities:s||[],packs:a||[]}),r.complete()}).catch(o=>{r.error(o)})})}loadAllPokemonData(){return this.pokemonDataService.loadAllData().pipe(vt(r=>{this.logEnhancedDataSummary(r)}))}getAllSets(){return this.pokemonDataService.loadSets()}getSetsWithCounts(){return this.pokemonDataService.getSetsWithCardCounts()}getRarityMapping(){return this.pokemonDataService.loadRarities()}getSetInfo(r){return this.pokemonDataService.getSetByCode(r)}getCardsBySetEnhanced(r){return this.pokemonDataService.getCardsBySetWithInfo(r)}searchCardsEnhanced(r){return this.pokemonDataService.searchCardsEnhanced(r)}getRarityStats(){return this.pokemonDataService.getRarityDistribution()}getPackStats(){return this.pokemonDataService.getPackDistribution()}getComprehensiveStats(){return this.pokemonDataService.getComprehensiveStats()}logEnhancedDataSummary(r){}};let n=t;return t.\u0275fac=function(o){return new(o||t)(q(fL),q(pL),q(gL),q(Xc))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),mL=(()=>{const t=class{constructor(r){this.http=r,this.BASE_IMAGE_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-exchange/main/public/images/cards",this.imageCache=new Map}getCardImageUrl(r){return`${this.BASE_IMAGE_URL}/${r}`}checkImageExists(r){if(this.imageCache.has(r))return X(this.imageCache.get(r));const o=this.getCardImageUrl(r);return this.http.head(o,{observe:"response"}).pipe(R(i=>{const s=200===i.status;return this.imageCache.set(r,s),s}),Yn(()=>(this.imageCache.set(r,!1),X(!1))))}preloadImage(r){return new Promise(o=>{const i=new Image;i.onload=()=>{this.imageCache.set(r,!0),o(!0)},i.onerror=()=>{this.imageCache.set(r,!1),o(!1)},i.src=this.getCardImageUrl(r)})}getPlaceholderImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDIwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExNi41NjkgMTQwIDEzMCAxMjYuNTY5IDEzMCAxMTBDMTMwIDkzLjQzMTUgMTE2LjU2OSA4MCAxMDAgODBDODMuNDMxNSA4MCA3MCA5My40MzE1IDcwIDExMEM3MCAxMjYuNTY5IDgzLjQzMTUgMTQwIDEwMCAxNDBaIiBmaWxsPSIjOUI5QkE4Ii8+CjxwYXRoIGQ9Ik0xMDAgMTAwQzEwNS41MjMgMTAwIDExMCAxMDQuNDc3IDExMCAxMTBDMTEwIDExNS41MjMgMTA1LjUyMyAxMjAgMTAwIDEyMEM5NC40NzcgMTIwIDkwIDExNS41MjMgOTAgMTEwQzkwIDEwNC40NzcgOTQuNDc3IDEwMCAxMDAgMTAwWiIgZmlsbD0iI0Y5RkFGQiIvPgo8L3N2Zz4K"}};let n=t;return t.\u0275fac=function(o){return new(o||t)(q(Ii))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();class hp extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}}class _D extends hp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class yD extends hp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class vD extends hp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var eu=(()=>{return(n=eu||(eu={})).Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",eu;var n})();class yL{constructor(t,{headers:e={},customFetch:r,region:o=eu.Any}={}){this.url=t,this.headers=e,this.region=o,this.fetch=(n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return(0,V.__awaiter)(this,arguments,void 0,function*(e,r={}){var o;try{const{headers:i,method:s,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${e}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):"string"==typeof a?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(w=>{throw"AbortError"===w.name?w:new _D(w)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new yD(f);if(!f.ok)throw new vD(f);let v,_=(null!==(o=f.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return v="application/json"===_?yield f.json():"application/octet-stream"===_||"application/pdf"===_?yield f.blob():"text/event-stream"===_?f:"multipart/form-data"===_?yield f.formData():yield f.text(),{data:v,error:null,response:f}}catch(i){return i instanceof Error&&"AbortError"===i.name?{data:null,error:new _D(i)}:{data:null,error:i,response:i instanceof vD||i instanceof yD?i.context:void 0}}})}}var vL=ee(358);const{PostgrestClient:CD}=vL,xL=class SL{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(t=navigator.userAgent)&&void 0!==t&&t.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const o=parseInt(e.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`\n\nSuggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){return new(this.getWebSocketConstructor())(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return"native"===t.type||"ws"===t.type}catch{return!1}}};var Wi=(()=>{return(n=Wi||(Wi={}))[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",Wi;var n})(),Ct=(()=>{return(n=Ct||(Ct={})).closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",Ct;var n})(),Fn=(()=>{return(n=Fn||(Fn={})).close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",Fn;var n})(),tu=(()=>((tu||(tu={})).websocket="websocket",tu))(),ao=(()=>{return(n=ao||(ao={})).Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",ao;var n})();class AL{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e("string"==typeof t?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){const o=e.getUint8(1),i=e.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(t.slice(s,s+o));s+=o;const l=r.decode(t.slice(s,s+i));return s+=i,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(t.slice(s,t.byteLength)))}}}class bD{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue=(()=>{return(n=Ue||(Ue={})).abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",Ue;var n})();const wD=(n,t,e={})=>{var r;const o=null!==(r=e.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=PL(s,n,t,o),i),{}):{}},PL=(n,t,e,r)=>{const i=t.find(a=>a.name===n)?.type,s=e[n];return i&&!r.includes(i)?DD(i,s):pp(s)},DD=(n,t)=>{if("_"===n.charAt(0)){const e=n.slice(1,n.length);return FL(t,e)}switch(n){case Ue.bool:return kL(t);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return RL(t);case Ue.json:case Ue.jsonb:return NL(t);case Ue.timestamp:return LL(t);default:return pp(t)}},pp=n=>n,kL=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},RL=n=>{if("string"==typeof n){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},NL=n=>{if("string"==typeof n)try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},FL=(n,t)=>{if("string"!=typeof n)return n;const e=n.length-1;if("{"===n[0]&&"}"===n[e]){let i;const s=n.slice(1,e);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>DD(t,a))}return n},LL=n=>"string"==typeof n?n.replace(" ","T"):n,ED=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname=""===t.pathname||"/"===t.pathname?"/api/broadcast":t.pathname+"/api/broadcast",t.href};class gp{constructor(t,e,r={},o=1e4){this.channel=t,this.event=e,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}class Da{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Da.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=Da.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Da.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,o){const i=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(v=>v.presence_ref),f=d.map(v=>v.presence_ref),p=u.filter(v=>f.indexOf(v.presence_ref)<0),_=d.filter(v=>h.indexOf(v.presence_ref)<0);p.length>0&&(a[c]=p),_.length>0&&(l[c]=_)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(t,e,r,o){const{joins:i,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=t[a])&&void 0!==c?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,o(a,c,l),0===c.length&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{const o=t[r];return e[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ki=(()=>{return(n=Ki||(Ki={})).BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",Ki;var n})(),yr=(()=>{return(n=yr||(yr={})).SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",yr;var n})();class mp{constructor(t,e={config:{}},r){var o,i;if(this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=Ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new gp(this,Fn.join,this.params,this.timeout),this.rejoinTimer=new bD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ct.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fn.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Da(this),this.broadcastEndpointURL=ED(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==Ct.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(p=>p.filter))&&void 0!==i?i:[],d=!!this.bindings[Ki.PRESENCE]&&this.bindings[Ki.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t?.(yr.CHANNEL_ERROR,p)),this._onClose(()=>t?.(yr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",function(){var p=y(function*({postgres_changes:_}){var v;if(r.socket.setAuth(),void 0!==_){const w=r.bindings.postgres_changes,k=null!==(v=w?.length)&&void 0!==v?v:0,E=[];for(let N=0;N<k;N++){const B=w[N],{filter:{event:le,schema:Cn,table:ue,filter:De}}=B,Ht=_&&_[N];if(!Ht||Ht.event!==le||Ht.schema!==Cn||Ht.table!==ue||Ht.filter!==De)return r.unsubscribe(),r.state=Ct.errored,void t?.(yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));E.push(Object.assign(Object.assign({},B),{id:Ht.id}))}return r.bindings.postgres_changes=E,void(t&&t(yr.SUBSCRIBED))}t?.(yr.SUBSCRIBED)});return function(_){return p.apply(this,arguments)}}()).receive("error",p=>{this.state=Ct.errored,t?.(yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t?.(yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(t){var e=this;return y(function*(r,o={}){return yield e.send({type:"presence",event:"track",payload:r},o.timeout||e.timeout)}).apply(this,arguments)}untrack(){var t=this;return y(function*(e={}){return yield t.send({type:"presence",event:"untrack"},e)}).apply(this,arguments)}on(t,e,r){return this.state===Ct.joined&&t===Ki.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}httpSend(t,e){var r=this;return y(function*(o,i,s={}){var a;const l=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,c,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const h=yield u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(t){var e=this;return y(function*(r,o={}){var i,s;if(e._canPush()||"broadcast"!==r.type)return new Promise(a=>{var l,c,u;const d=e._push(r.type,r,o.timeout||e.timeout);"broadcast"===r.type&&!(null!==(u=null===(c=null===(l=e.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=r,u={method:"POST",headers:{Authorization:e.socket.accessTokenValue?`Bearer ${e.socket.accessTokenValue}`:"",apikey:e.socket.apiKey?e.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:e.subTopic,event:a,payload:l,private:e.private}]})};try{const d=yield e._fetchWithTimeout(e.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:e.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ct.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new gp(this,Fn.leave,{},t),r.receive("ok",()=>{e(),o("ok")}).receive("timeout",()=>{e(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ct.closed,this.bindings={}}_fetchWithTimeout(t,e,r){var o=this;return y(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(s),a})()}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new gp(this,t,e,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var o,i;const s=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Fn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(f=>{var p,_,v;return"*"===(null===(p=f.filter)||void 0===p?void 0:p.event)||(null===(v=null===(_=f.filter)||void 0===_?void 0:_.event)||void 0===v?void 0:v.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):null===(i=this.bindings[s])||void 0===i||i.filter(f=>{var p,_,v,w,k,E;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in f){const N=f.id,B=null===(p=f.filter)||void 0===p?void 0:p.event;return N&&(null===(_=e.ids)||void 0===_?void 0:_.includes(N))&&("*"===B||B?.toLocaleLowerCase()===(null===(v=e.data)||void 0===v?void 0:v.type.toLocaleLowerCase()))}{const N=null===(k=null===(w=f?.filter)||void 0===w?void 0:w.event)||void 0===k?void 0:k.toLocaleLowerCase();return"*"===N||N===(null===(E=e?.event)||void 0===E?void 0:E.toLocaleLowerCase())}}return f.type.toLocaleLowerCase()===s}).map(f=>{if("object"==typeof h&&"ids"in h){const p=h.data,{schema:_,table:v,commit_timestamp:w,type:k,errors:E}=p;h=Object.assign(Object.assign({},{schema:_,table:v,commit_timestamp:w,eventType:k,new:{},old:{},errors:E}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Ct.closed}_isJoined(){return this.state===Ct.joined}_isJoining(){return this.state===Ct.joining}_isLeaving(){return this.state===Ct.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){const o=t.toLocaleLowerCase(),i={type:o,filter:e,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(t,e){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&mp.isEqual(o.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fn.close,{},t)}_onError(t){this._on(Fn.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ct.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return("INSERT"===t.type||"UPDATE"===t.type)&&(e.new=wD(t.columns,t.record)),("UPDATE"===t.type||"DELETE"===t.type)&&(e.old=wD(t.columns,t.old_record)),e}}const _p=()=>{},jL=[1e3,2e3,5e3,1e4];class UL{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_p,this.ref=0,this.reconnectTimer=null,this.logger=_p,this.conn=null,this.sendBuffer=[],this.serializer=new AL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return i=o||(typeof fetch>"u"?(...s)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...s)=>i(...s)},null===(r=e?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${tu.websocket}`,this.httpEndpoint=ED(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xL.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){var e=this;return y(function*(){const r=yield t.unsubscribe();return 0===e.channels.length&&e.disconnect(),r})()}removeAllChannels(){var t=this;return y(function*(){const e=yield Promise.all(t.channels.map(r=>r.unsubscribe()));return t.channels=[],t.disconnect(),e})()}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wi.connecting:return ao.Connecting;case Wi.open:return ao.Open;case Wi.closing:return ao.Closing;default:return ao.Closed}}isConnected(){return this.connectionState()===ao.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(t,e={config:{}}){const r=`realtime:${t}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new mp(`realtime:${t}`,e,this);return this.channels.push(i),i}}push(t){const{topic:e,event:r,payload:o,ref:i}=t,s=()=>{this.encode(t,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${e} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var t=this;return y(function*(e=null){t._authPromise=t._performAuth(e);try{yield t._authPromise}finally{t._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var t=this;return y(function*(){var e;if(t.isConnected()){if(t.pendingHeartbeatRef){t.pendingHeartbeatRef=null,t.log("transport","heartbeat timeout. Attempting to re-establish connection");try{t.heartbeatCallback("timeout")}catch(r){t.log("error","error in heartbeat callback",r)}return t._wasManualDisconnect=!1,null===(e=t.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;t.isConnected()||null===(r=t.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}t.pendingHeartbeatRef=t._makeRef(),t.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t.pendingHeartbeatRef});try{t.heartbeatCallback("sent")}catch(r){t.log("error","error in heartbeat callback",r)}t._setAuthSafely("heartbeat")}else try{t.heartbeatCallback("disconnected")}catch(r){t.log("error","error in heartbeat callback",r)}})()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return this.ref=t===this.ref?0:t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=e;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;"heartbeat"===t&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===t&&(null===(e=this.reconnectTimer)||void 0===e||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Fn.error))}_appendParams(t,e){if(0===Object.keys(e).length)return t;const r=t.match(/\?/)?"&":"?";return`${t}${r}${new URLSearchParams(e)}`}_workerObjectUrl(t){let e;if(t)e=t;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,"connecting"===t?this._wasManualDisconnect=!1:"disconnecting"===t&&(this._wasManualDisconnect=e)}_performAuth(){var t=this;return y(function*(e=null){let r;r=e||(t.accessToken?yield t.accessToken():t.accessTokenValue),t.accessTokenValue!=r&&(t.accessTokenValue=r,t.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.76.1"}),o.joinedOnce&&o._isJoined()&&o._push(Fn.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var t=this;return y(function*(){t._authPromise&&(yield t._authPromise)})()}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){var t=this;this.reconnectTimer=new bD(y(function*(){setTimeout(y(function*(){yield t._waitForAuthIfNeeded(),t.isConnected()||t.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(t){var e,r,o,i,s,a,l,c,u;if(this.transport=null!==(e=t?.transport)&&void 0!==e?e:null,this.timeout=null!==(r=t?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=t?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=t?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=t?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=t?.heartbeatCallback)&&void 0!==a?a:_p,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=t?.reconnectAfterMs)&&void 0!==l?l:d=>jL[d-1]||1e4,this.encode=null!==(c=t?.encode)&&void 0!==c?c:(d,h)=>h(JSON.stringify(d)),this.decode=null!==(u=t?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class yp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function tt(n){return"object"==typeof n&&null!==n&&"__isStorageError"in n}class BL extends yp{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vp extends yp{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}const Cp=n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)},bp=n=>{if(Array.isArray(n))return n.map(e=>bp(e));if("function"==typeof n||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([e,r])=>{const o=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[o]=bp(r)}),t},wp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),GL=(n,t,e)=>(0,V.__awaiter)(void 0,void 0,void 0,function*(){const r=yield(0,V.__awaiter)(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(ee.bind(ee,397))).Response:Response});n instanceof r&&!e?.noResolveJson?n.json().then(o=>{const i=n.status||500,s=o?.statusCode||i+"";t(new BL(wp(o),i,s))}).catch(o=>{t(new vp(wp(o),o))}):t(new vp(wp(n),n))}),qL=(n,t,e,r)=>{const o={method:n,headers:t?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const t=Object.getPrototypeOf(n);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),e)):o};function Ea(n,t,e,r,o,i){return(0,V.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,qL(t,r,o,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>GL(l,a,r))})})}function Sa(n,t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ea(n,"GET",t,e,r)})}function Qn(n,t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ea(n,"POST",t,r,o,e)})}function Dp(n,t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ea(n,"PUT",t,r,o,e)})}function Ep(n,t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ea(n,"DELETE",t,r,o,e)})}class KL{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}}var SD;SD=Symbol.toStringTag;const QL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ZL{constructor(t,e={},r,o){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Cp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},xD),o);let a=Object.assign(Object.assign({},this.headers),"POST"===t&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield("PUT"==t?Dp:Qn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}upload(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:xD.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(yield Dp(this.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(tt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const o=Object.assign({},this.headers);e?.upsert&&(o["x-upsert"]="true");const i=yield Qn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new yp("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}update(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}copy(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}createSignedUrl(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),i=yield Qn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}createSignedUrls(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const o=yield Qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}download(t,e){const o=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(t);return new class JL{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[SD]="BlobDownloadBuilder",this.promise=null}asStream(){return new KL(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}}(()=>Sa(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{const r=yield Sa(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:bp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}exists(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{return yield function WL(n,t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return Ea(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r)&&r instanceof vp&&[400,404].includes(r.originalError?.status))return{data:!1,error:r};throw r}})}getPublicUrl(t,e){const r=this._getFinalPath(t),o=[],i=e?.download?`download=${!0===e.download?"":e.download}`:"";""!==i&&o.push(i);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});""!==l&&o.push(l);let c=o.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}list(t,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},QL),e),{prefix:t||""});return{data:yield Qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}listV2(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Qn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const TD={"X-Client-Info":"storage-js/2.76.1"};class XL{constructor(t,e={},r,o){this.shouldThrowOnError=!1;const i=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},TD),e),this.fetch=Cp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Sa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}getBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Sa(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}createBucket(t){return(0,V.__awaiter)(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}updateBucket(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Dp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}deleteBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}}class ej{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},TD),e),this.fetch=Cp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}listBuckets(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const e=new URLSearchParams;void 0!==t?.limit&&e.set("limit",t.limit.toString()),void 0!==t?.offset&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);const r=e.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield Sa(this.fetch,o,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}deleteBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}}const Sp={"X-Client-Info":"storage-js/2.76.1","Content-Type":"application/json"};class ID extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _n(n){return"object"==typeof n&&null!==n&&"__isStorageVectorsError"in n}class xp extends ID{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tj extends ID{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}}const Mp=n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)},OD=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),rj=(n,t,e)=>(0,V.__awaiter)(void 0,void 0,void 0,function*(){if(n&&"object"==typeof n&&"status"in n&&"ok"in n&&"number"==typeof n.status&&!e?.noResolveJson){const o=n.status||500,i=n;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";t(new xp(OD(s),o,a))}).catch(()=>{t(new xp(i.statusText||`HTTP ${o} error`,o,o+""))}):t(new xp(i.statusText||`HTTP ${o} error`,o,o+""))}else t(new tj(OD(n),n))}),oj=(n,t,e,r)=>{const o={method:n,headers:t?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const t=Object.getPrototypeOf(n);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),e)):o};function yn(n,t,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return function ru(n,t,e,r,o,i){return(0,V.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,oj(t,r,o,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return c&&c.includes("application/json")?l.json():{}}).then(l=>s(l)).catch(l=>rj(l,a,r))})})}(n,"POST",t,r,o,e)})}class ij{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Sp),e),this.fetch=Mp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getIndex(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}})}listIndexes(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}})}}class sj{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Sp),e),this.fetch=Mp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield yn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}listVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==t.segmentCount){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==t.segmentIndex&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error("segmentIndex must be between 0 and "+(t.segmentCount-1))}return{data:yield yn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}queryVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteVectors(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield yn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}}class aj{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Sp),e),this.fetch=Mp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,V.__awaiter)(this,arguments,void 0,function*(t={}){try{return{data:yield yn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteBucket(t){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}}class lj extends aj{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new cj(this.url,this.headers,t,this.fetch)}}class cj extends ij{constructor(t,e,r,o){super(t,e,o),this.vectorBucketName=r}createIndex(t){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,V.__awaiter)(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new uj(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class uj extends sj{constructor(t,e,r,o,i){super(t,e,i),this.vectorBucketName=r,this.indexName=o}putVectors(t){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,V.__awaiter)(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class dj extends XL{constructor(t,e={},r,o){super(t,e,r,o)}from(t){return new ZL(this.url,this.headers,t,this.fetch)}get vectors(){return new lj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ej(this.url+"/iceberg",this.headers,this.fetch)}}let xa="";xa=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const fj={headers:{"X-Client-Info":`supabase-js-${xa}/2.76.1`}},pj={schema:"public"},gj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mj={};var AD=ee(397);const vj=(n,t,e)=>{const r=(n=>{let t;return t=n||(typeof fetch>"u"?AD.default:fetch),(...e)=>t(...e)})(e),o=typeof Headers>"u"?AD.Headers:Headers;return function(){var i=y(function*(s,a){var l;const c=null!==(l=yield t())&&void 0!==l?l:n;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},Ji=3e4,Op="X-Supabase-Api-Version",kD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ma extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}}function ne(n){return"object"==typeof n&&null!==n&&"__isAuthError"in n}class Tj extends Ma{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}}class Ao extends Ma{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class lo extends Ma{constructor(t,e,r,o){super(t,r,o),this.name=e,this.status=r}}class co extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Yi extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ou extends lo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class iu extends lo{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class RD extends lo{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ap extends lo{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function Pp(n){return ne(n)&&"AuthRetryableFetchError"===n.name}class ND extends lo{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}}class kp extends lo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const su="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),FD=" \t\n\r=".split(""),Pj=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<FD.length;t+=1)n[FD[t].charCodeAt(0)]=-2;for(let t=0;t<su.length;t+=1)n[su[t].charCodeAt(0)]=t;return n})();function au(n,t,e){if(null!==n)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;)e(su[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)e(su[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function LD(n,t,e){const r=Pj[n];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function jD(n){const t=[],e=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function Rj(n,t,e){if(0===t.utf8seq){if(n<=127)return void e(n);for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&n;else if(3===t.utf8seq)t.codepoint=15&n;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&n}t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&n,t.utf8seq-=1,0===t.utf8seq&&e(t.codepoint)}}(s,r,e)};for(let s=0;s<n.length;s+=1)LD(n.charCodeAt(s),o,i);return t.join("")}function kj(n,t){if(!(n<=127)){if(n<=2047)return t(192|n>>6),void t(128|63&n);if(n<=65535)return t(224|n>>12),t(128|n>>6&63),void t(128|63&n);if(n<=1114111)return t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),void t(128|63&n);throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}t(n)}function Qi(n){const t=[],e={queue:0,queuedBits:0},r=o=>{t.push(o)};for(let o=0;o<n.length;o+=1)LD(n.charCodeAt(o),e,r);return new Uint8Array(t)}function Po(n){const t=[],e={queue:0,queuedBits:0},r=o=>{t.push(o)};return n.forEach(o=>au(o,e,r)),au(null,e,r),t.join("")}const vn=()=>typeof window<"u"&&typeof document<"u",ko={tested:!1,writable:!1},$D=()=>{if(!vn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(ko.tested)return ko.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ko.tested=!0,ko.writable=!0}catch{ko.tested=!0,ko.writable=!1}return ko.writable},UD=n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)},Vj=n=>"object"==typeof n&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json,Zi=function(){var n=y(function*(t,e,r){yield t.setItem(e,JSON.stringify(r))});return function(e,r,o){return n.apply(this,arguments)}}(),Ro=function(){var n=y(function*(t,e){const r=yield t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(e,r){return n.apply(this,arguments)}}(),uo=function(){var n=y(function*(t,e){yield t.removeItem(e)});return function(e,r){return n.apply(this,arguments)}}();class lu{constructor(){this.promise=new lu.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}function Rp(n){const t=n.split(".");if(3!==t.length)throw new kp("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!xj.test(t[r]))throw new kp("JWT not in base64url format");return{header:JSON.parse(jD(t[0])),payload:JSON.parse(jD(t[1])),signature:Qi(t[2]),raw:{header:t[0],payload:t[1]}}}function Np(){return(Np=y(function*(n){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})).apply(this,arguments)}function Bj(n){return("0"+n.toString(16)).substr(-2)}function Fp(){return(Fp=y(function*(n){const e=(new TextEncoder).encode(n),r=yield crypto.subtle.digest("SHA-256",e),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function Lp(){return Lp=y(function*(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=yield function zj(n){return Fp.apply(this,arguments)}(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Lp.apply(this,arguments)}function Xi(n,t){return jp.apply(this,arguments)}function jp(){return jp=y(function*(n,t,e=!1){const r=function Hj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length;let o="";for(let i=0;i<56;i++)o+=e.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(t),Array.from(t,Bj).join("")}();let o=r;e&&(o+="/PASSWORD_RECOVERY"),yield Zi(n,`${t}-code-verifier`,o);const i=yield function Gj(n){return Lp.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),jp.apply(this,arguments)}lu.promiseConstructor=Promise;const qj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Yj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function es(n){if(!Yj.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vp(){return new Proxy({},{get:(t,e)=>{if("__isUserNotAvailableProxy"===e)return!0;if("symbol"==typeof e){const r=e.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function BD(n){return JSON.parse(JSON.stringify(n))}const No=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Qj=[502,503,504];function HD(n){return $p.apply(this,arguments)}function $p(){return($p=y(function*(n){var t;if(!Vj(n))throw new Ap(No(n),0);if(Qj.includes(n.status))throw new Ap(No(n),n.status);let e,r;try{e=yield n.json()}catch(i){throw new Ao(No(i),i)}const o=function Wj(n){const t=n.headers.get(Op);if(!t||!t.match(qj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}(n);if(o&&o.getTime()>=kD["2024-01-01"].timestamp&&"object"==typeof e&&e&&"string"==typeof e.code?r=e.code:"object"==typeof e&&e&&"string"==typeof e.error_code&&(r=e.error_code),r){if("weak_password"===r)throw new ND(No(e),n.status,(null===(t=e.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new co}else if("object"==typeof e&&e&&"object"==typeof e.weak_password&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new ND(No(e),n.status,e.weak_password.reasons);throw new Tj(No(e),n.status||500,r)})).apply(this,arguments)}const Zj=(n,t,e,r)=>{const o={method:n,headers:t?.headers||{}};return"GET"===n?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),e))};function me(n,t,e,r){return Up.apply(this,arguments)}function Up(){return Up=y(function*(n,t,e,r){var o;const i=Object.assign({},r?.headers);i[Op]||(i[Op]=kD["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield function Xj(n,t,e,r,o,i){return Bp.apply(this,arguments)}(n,t,e+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),Up.apply(this,arguments)}function Bp(){return(Bp=y(function*(n,t,e,r,o,i){const s=Zj(t,r,o,i);let a;try{a=yield n(e,Object.assign({},s))}catch(l){throw console.error(l),new Ap(No(l),0)}if(a.ok||(yield HD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield HD(l)}})).apply(this,arguments)}function Zn(n){var t;let e=null;return function nV(n){return n.access_token&&n.refresh_token&&n.expires_in}(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=function Fj(n){return Math.round(Date.now()/1e3)+n}(n.expires_in))),{data:{session:e,user:null!==(t=n.user)&&void 0!==t?t:n},error:null}}function zD(n){const t=Zn(n);return!t.error&&n.weak_password&&"object"==typeof n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&"string"==typeof n.weak_password.message&&n.weak_password.reasons.reduce((e,r)=>e&&"string"==typeof r,!0)&&(t.data.weak_password=n.weak_password),t}function ho(n){var t;return{data:{user:null!==(t=n.user)&&void 0!==t?t:n},error:null}}function eV(n){return{data:n,error:null}}function tV(n){const{action_link:t,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i}=n,s=(0,V.__rest)(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function GD(n){return n}const Hp=["global","local","others"];class rV{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=UD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(t){var e=this;return y(function*(r,o=Hp[0]){if(Hp.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hp.join(", ")}`);try{return yield me(e.fetch,"POST",`${e.url}/logout?scope=${o}`,{headers:e.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(t){var e=this;return y(function*(r,o={}){try{return yield me(e.fetch,"POST",`${e.url}/invite`,{body:{email:r,data:o.data},headers:e.headers,redirectTo:o.redirectTo,xform:ho})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(t){var e=this;return y(function*(){try{const{options:r}=t,o=(0,V.__rest)(t,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield me(e.fetch,"POST",`${e.url}/admin/generate_link`,{body:i,headers:e.headers,xform:tV,redirectTo:r?.redirectTo})}catch(r){if(ne(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(t){var e=this;return y(function*(){try{return yield me(e.fetch,"POST",`${e.url}/admin/users`,{body:t,headers:e.headers,xform:ho})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}})()}listUsers(t){var e=this;return y(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield me(e.fetch,"GET",`${e.url}/admin/users`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=t?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=t?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:GD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ne(u))return{data:{users:[]},error:u};throw u}})()}getUserById(t){var e=this;return y(function*(){es(t);try{return yield me(e.fetch,"GET",`${e.url}/admin/users/${t}`,{headers:e.headers,xform:ho})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}})()}updateUserById(t,e){var r=this;return y(function*(){es(t);try{return yield me(r.fetch,"PUT",`${r.url}/admin/users/${t}`,{body:e,headers:r.headers,xform:ho})}catch(o){if(ne(o))return{data:{user:null},error:o};throw o}})()}deleteUser(t){var e=this;return y(function*(r,o=!1){es(r);try{return yield me(e.fetch,"DELETE",`${e.url}/admin/users/${r}`,{headers:e.headers,body:{should_soft_delete:o},xform:ho})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(t){var e=this;return y(function*(){es(t.userId);try{const{data:r,error:o}=yield me(e.fetch,"GET",`${e.url}/admin/users/${t.userId}/factors`,{headers:e.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_deleteFactor(t){var e=this;return y(function*(){es(t.userId),es(t.id);try{return{data:yield me(e.fetch,"DELETE",`${e.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:e.headers}),error:null}}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_listOAuthClients(t){var e=this;return y(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield me(e.fetch,"GET",`${e.url}/admin/oauth/clients`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=t?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=t?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:GD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ne(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(t){var e=this;return y(function*(){try{return yield me(e.fetch,"POST",`${e.url}/admin/oauth/clients`,{body:t,headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_getOAuthClient(t){var e=this;return y(function*(){try{return yield me(e.fetch,"GET",`${e.url}/admin/oauth/clients/${t}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_deleteOAuthClient(t){var e=this;return y(function*(){try{return yield me(e.fetch,"DELETE",`${e.url}/admin/oauth/clients/${t}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(t){var e=this;return y(function*(){try{return yield me(e.fetch,"POST",`${e.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}}function qD(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}const ts={debug:!!(globalThis&&$D()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class WD extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class oV extends WD{}function sV(n,t,e){return zp.apply(this,arguments)}function zp(){return zp=y(function*(n,t,e){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=y(function*(i){if(!i){if(0===t)throw ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new oV(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ts.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield e()}finally{ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),zp.apply(this,arguments)}function JD(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function cV(n){const t=(new TextEncoder).encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}class bt extends Error{constructor({message:t,code:e,cause:r,name:o}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=e}}class cu extends bt{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}}function dV({error:n,options:t}){var e,r,o;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(t.signal instanceof AbortSignal)return new bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if("ConstraintError"===n.name){if(!0===(null===(e=i.authenticatorSelection)||void 0===e?void 0:e.requireResidentKey))return new bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if("conditional"===t.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if("InvalidStateError"===n.name)return new bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if("NotAllowedError"===n.name)return new bt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("NotSupportedError"===n.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if("SecurityError"===n.name){const s=window.location.hostname;if(!YD(s))return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(i.rp.id!==s)return new bt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("TypeError"===n.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if("UnknownError"===n.name)return new bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function hV({error:n,options:t}){const{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(t.signal instanceof AbortSignal)return new bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if("NotAllowedError"===n.name)return new bt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("SecurityError"===n.name){const r=window.location.hostname;if(!YD(r))return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(e.rpId!==r)return new bt({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("UnknownError"===n.name)return new bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}const pV=new class fV{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}};function gV(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:e,excludeCredentials:r}=n,o=(0,V.__rest)(n,["challenge","user","excludeCredentials"]),i=Qi(t).buffer,s=Object.assign(Object.assign({},e),{id:Qi(e.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Qi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function mV(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:e}=n,r=(0,V.__rest)(n,["challenge","allowCredentials"]),o=Qi(t).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(e&&e.length>0){i.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){const a=e[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Qi(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function _V(n){var t;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const e=n;return{id:n.id,rawId:n.id,response:{attestationObject:Po(new Uint8Array(n.response.attestationObject)),clientDataJSON:Po(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:null!==(t=e.authenticatorAttachment)&&void 0!==t?t:void 0}}function yV(n){var t;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const e=n,r=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Po(new Uint8Array(o.authenticatorData)),clientDataJSON:Po(new Uint8Array(o.clientDataJSON)),signature:Po(new Uint8Array(o.signature)),userHandle:o.userHandle?Po(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=e.authenticatorAttachment)&&void 0!==t?t:void 0}}function YD(n){return"localhost"===n||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function QD(){var n,t;return!!(vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(n=navigator?.credentials)||void 0===n?void 0:n.create)&&"function"==typeof(null===(t=navigator?.credentials)||void 0===t?void 0:t.get))}function qp(){return(qp=y(function*(n){try{const t=yield navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new cu("Browser returned unexpected credential type",t)}:{data:null,error:new cu("Empty credential response",t)}}catch(t){return{data:null,error:dV({error:t,options:n})}}})).apply(this,arguments)}function Wp(){return(Wp=y(function*(n){try{const t=yield navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new cu("Browser returned unexpected credential type",t)}:{data:null,error:new cu("Empty credential response",t)}}catch(t){return{data:null,error:hV({error:t,options:n})}}})).apply(this,arguments)}const bV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},wV={userVerification:"preferred",hints:["security-key"]};function uu(...n){const t=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),e=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of n)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(e(s))r[i]=s;else if(t(s)){const a=r[i];r[i]=t(a)?uu(a,s):uu(s)}else r[i]=s}return r}class SV{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){var e=this;return y(function*(){return e.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})()}_challenge(t,e){var r=this;return y(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!c)return{data:null,error:u};const d=a??pV.createNewAbortSignal();if("create"===c.webauthn.type){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=function DV(n,t){return uu(bV,n,t||{})}(c.webauthn.credential_options.publicKey,l?.create),{data:f,error:p}=yield function vV(n){return qp.apply(this,arguments)}({publicKey:h,signal:d});return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=function EV(n,t){return uu(wV,n,t||{})}(c.webauthn.credential_options.publicKey,l?.request),{data:f,error:p}=yield function CV(n){return Wp.apply(this,arguments)}(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in challenge",c)}}}).apply(this,arguments)}_verify(t){var e=this;return y(function*({challengeId:r,factorId:o,webauthn:i}){return e.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(t,e){var r=this;return y(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}},l){if(!i)return{data:null,error:new Ma("rpId is required for WebAuthn authentication")};try{if(!QD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:u};const{webauthn:d}=c;return r._verify({factorId:o,challengeId:c.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in authenticate",c)}}}).apply(this,arguments)}_register(t,e){var r=this;return y(function*({friendlyName:o,rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a},l){if(!i)return{data:null,error:new Ma("rpId is required for WebAuthn registration")};try{if(!QD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r._enroll({friendlyName:o});if(!c)return yield r.client.mfa.listFactors().then(f=>{var p;return null===(p=f.data)||void 0===p?void 0:p.all.find(_=>"webauthn"===_.factor_type&&_.friendly_name===o&&"unverified"!==_.status)}).then(f=>f?r.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:d,error:h}=yield r._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return d?r._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in register",c)}}}).apply(this,arguments)}}!function aV(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const xV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.76.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function ZD(n,t,e){return Kp.apply(this,arguments)}function Kp(){return(Kp=y(function*(n,t,e){return yield e()})).apply(this,arguments)}const ns={},TV=(()=>{class n{get jwks(){var e,r;return null!==(r=null===(e=ns[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==r?r:{keys:[]}}set jwks(e){ns[this.storageKey]=Object.assign(Object.assign({},ns[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return null!==(r=null===(e=ns[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ns[this.storageKey]=Object.assign(Object.assign({},ns[this.storageKey]),{cachedAt:e})}constructor(e){var o,i,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},xV),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new rV({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=UD(s.fetch),this.lock=s.lock||ZD,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.lock=s.lock?s.lock:vn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?sV:ZD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new SV(this)},this.persistSession?(s.storage?this.storage=s.storage:$D()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qD(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=qD(this.memoryStorage)),vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=y(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.76.1) ${(new Date).toISOString()}`,...e),this}initialize(){var e=this;return y(function*(){return e.initializePromise||(e.initializePromise=y(function*(){return yield e._acquireLock(-1,y(function*(){return yield e._initialize()}))})()),yield e.initializePromise})()}_initialize(){var e=this;return y(function*(){var r;try{const o=function jj(n){const t={},e=new URL(n);if(e.hash&&"#"===e.hash[0])try{new URLSearchParams(e.hash.substring(1)).forEach((o,i)=>{t[i]=o})}catch{}return e.searchParams.forEach((r,o)=>{t[o]=r}),t}(window.location.href);let i="none";if(e._isImplicitGrantCallback(o)?i="implicit":(yield e._isPKCECallback(o))&&(i="pkce"),vn()&&e.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield e._getSessionFromURL(o,i);if(a){if(e._debug("#_initialize()","error detecting session from URL",a),function Aj(n){return ne(n)&&"AuthImplicitGrantRedirectError"===n.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield e._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return e._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield e._saveSession(l),setTimeout(y(function*(){"recovery"===c?yield e._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield e._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield e._recoverAndRefresh(),{error:null}}catch(o){return ne(o)?{error:o}:{error:new Ao("Unexpected error during initialization",o)}}finally{yield e._handleVisibilityChange(),e._debug("#_initialize()","end")}})()}signInAnonymously(e){var r=this;return y(function*(){var o,i,s;try{const a=yield me(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=e?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=e?.options)||void 0===s?void 0:s.captchaToken}},xform:Zn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(e){var r=this;return y(function*(){var o,i,s;try{let a;if("email"in e){const{email:h,password:f,options:p}=e;let _=null,v=null;"pkce"===r.flowType&&([_,v]=yield Xi(r.storage,r.storageKey)),a=yield me(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:null!==(o=p?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:_,code_challenge_method:v},xform:Zn})}else{if(!("phone"in e))throw new ou("You must provide either an email or phone number and a password");{const{phone:h,password:f,options:p}=e;a=yield me(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:h,password:f,data:null!==(i=p?.data)&&void 0!==i?i:{},channel:null!==(s=p?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Zn})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(e){var r=this;return y(function*(){try{let o;if("email"in e){const{email:a,password:l,options:c}=e;o=yield me(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:zD})}else{if(!("phone"in e))throw new ou("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=e;o=yield me(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:zD})}}const{data:i,error:s}=o;return s?{data:{user:null,session:null},error:s}:i&&i.session&&i.user?(i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Yi}}catch(o){if(ne(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(e){var r=this;return y(function*(){var o,i,s,a;return yield r._handleProviderSignIn(e.provider,{redirectTo:null===(o=e.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=e.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(e){var r=this;return y(function*(){return yield r.initializePromise,r._acquireLock(-1,y(function*(){return r._exchangeCodeForSession(e)}))})()}signInWithWeb3(e){var r=this;return y(function*(){const{chain:o}=e;switch(o){case"ethereum":return yield r.signInWithEthereum(e);case"solana":return yield r.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(e){var r=this;return y(function*(){var o,i,s,a,l,c,u,d,h,f,p;let _,v;if("message"in e)_=e.message,v=e.signature;else{const{wallet:k,statement:E,options:N}=e;let B;if(vn())if("object"==typeof k)B=k;else{const bn=window;if(!("ethereum"in bn)||"object"!=typeof bn.ethereum||!("request"in bn.ethereum)||"function"!=typeof bn.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");B=bn.ethereum}else{if("object"!=typeof k||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=k}const le=new URL(null!==(o=N?.url)&&void 0!==o?o:window.location.href),Cn=yield B.request({method:"eth_requestAccounts"}).then(bn=>bn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Cn||0===Cn.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ue=JD(Cn[0]);let De=null===(i=N?.signInWithEthereum)||void 0===i?void 0:i.chainId;De||(De=function lV(n){return parseInt(n,16)}(yield B.request({method:"eth_chainId"}))),_=function uV(n){var t;const{chainId:e,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=n;if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null!==(t=n.statement)&&void 0!==t&&t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`);const v=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${JD(n.address)}\n\n${n.statement?`${n.statement}\n`:""}`;let w=`URI: ${d}\nVersion: ${h}\nChain ID: ${e}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(w+=`\nExpiration Time: ${o.toISOString()}`),a&&(w+=`\nNot Before: ${a.toISOString()}`),l&&(w+=`\nRequest ID: ${l}`),c){let k="\nResources:";for(const E of c){if(!E||"string"!=typeof E)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);k+=`\n- ${E}`}w+=k}return`${v}\n${w}`}({domain:le.host,address:ue,statement:E,uri:le.href,version:"1",chainId:De,nonce:null===(s=N?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(l=null===(a=N?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==l?l:new Date,expirationTime:null===(c=N?.signInWithEthereum)||void 0===c?void 0:c.expirationTime,notBefore:null===(u=N?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=N?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(h=N?.signInWithEthereum)||void 0===h?void 0:h.resources}),v=yield B.request({method:"personal_sign",params:[cV(_),ue]})}try{const{data:w,error:k}=yield me(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:_,signature:v},null!==(f=e.options)&&void 0!==f&&f.captchaToken?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Zn});if(k)throw k;return w&&w.session&&w.user?(w.session&&(yield r._saveSession(w.session),yield r._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:k}):{data:{user:null,session:null},error:new Yi}}catch(w){if(ne(w))return{data:{user:null,session:null},error:w};throw w}})()}signInWithSolana(e){var r=this;return y(function*(){var o,i,s,a,l,c,u,d,h,f,p,_;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{wallet:E,statement:N,options:B}=e;let le;if(vn())if("object"==typeof E)le=E;else{const ue=window;if(!("solana"in ue)||"object"!=typeof ue.solana||!("signIn"in ue.solana&&"function"==typeof ue.solana.signIn||"signMessage"in ue.solana&&"function"==typeof ue.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");le=ue.solana}else{if("object"!=typeof E||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");le=E}const Cn=new URL(null!==(o=B?.url)&&void 0!==o?o:window.location.href);if("signIn"in le&&le.signIn){const ue=yield le.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},B?.signInWithSolana),{version:"1",domain:Cn.host,uri:Cn.href}),N?{statement:N}:null));let De;if(Array.isArray(ue)&&ue[0]&&"object"==typeof ue[0])De=ue[0];else{if(!(ue&&"object"==typeof ue&&"signedMessage"in ue&&"signature"in ue))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");De=ue}if(!("signedMessage"in De&&"signature"in De&&("string"==typeof De.signedMessage||De.signedMessage instanceof Uint8Array)&&De.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");v="string"==typeof De.signedMessage?De.signedMessage:(new TextDecoder).decode(De.signedMessage),w=De.signature}else{if(!("signMessage"in le&&"function"==typeof le.signMessage&&"publicKey"in le&&"object"==typeof le&&le.publicKey&&"toBase58"in le.publicKey&&"function"==typeof le.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${Cn.host} wants you to sign in with your Solana account:`,le.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${Cn.href}`,`Issued At: ${null!==(s=null===(i=B?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=B?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...null!==(l=B?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...null!==(c=B?.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...null!==(u=B?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...null!==(d=B?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...null!==(f=null===(h=B?.signInWithSolana)||void 0===h?void 0:h.resources)&&void 0!==f&&f.length?["Resources",...B.signInWithSolana.resources.map(De=>`- ${De}`)]:[]].join("\n");const ue=yield le.signMessage((new TextEncoder).encode(v),"utf8");if(!(ue&&ue instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=ue}}try{const{data:k,error:E}=yield me(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:v,signature:Po(w)},null!==(p=e.options)&&void 0!==p&&p.captchaToken?{gotrue_meta_security:{captcha_token:null===(_=e.options)||void 0===_?void 0:_.captchaToken}}:null),xform:Zn});if(E)throw E;return k&&k.session&&k.user?(k.session&&(yield r._saveSession(k.session),yield r._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:E}):{data:{user:null,session:null},error:new Yi}}catch(k){if(ne(k))return{data:{user:null,session:null},error:k};throw k}})()}_exchangeCodeForSession(e){var r=this;return y(function*(){const o=yield Ro(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:l}=yield me(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:e,code_verifier:i},xform:Zn});if(yield uo(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Yi}}catch(a){if(ne(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(e){var r=this;return y(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:l}=e,c=yield me(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Zn}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new Yi}}catch(o){if(ne(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(e){var r=this;return y(function*(){var o,i,s,a,l;try{if("email"in e){const{email:c,options:u}=e;let d=null,h=null;"pkce"===r.flowType&&([d,h]=yield Xi(r.storage,r.storageKey));const{error:f}=yield me(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:c,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:c,options:u}=e,{data:d,error:h}=yield me(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:c,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(l=u?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new ou("You must provide either an email or phone number.")}catch(c){if(ne(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(e){var r=this;return y(function*(){var o,i;try{let s,a;"options"in e&&(s=null===(o=e.options)||void 0===o?void 0:o.redirectTo,a=null===(i=e.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield me(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Zn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,d=l.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithSSO(e){var r=this;return y(function*(){var o,i,s;try{let a=null,l=null;return"pkce"===r.flowType&&([a,l]=yield Xi(r.storage,r.storageKey)),yield me(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(i=null===(o=e.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=e?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:eV})}catch(a){if(ne(a))return{data:null,error:a};throw a}})()}reauthenticate(){var e=this;return y(function*(){return yield e.initializePromise,yield e._acquireLock(-1,y(function*(){return yield e._reauthenticate()}))})()}_reauthenticate(){var e=this;return y(function*(){try{return yield e._useSession(function(){var r=y(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new co;const{error:a}=yield me(e.fetch,"GET",`${e.url}/reauthenticate`,{headers:e.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(e){var r=this;return y(function*(){try{const o=`${r.url}/resend`;if("email"in e){const{email:i,type:s,options:a}=e,{error:l}=yield me(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in e){const{phone:i,type:s,options:a}=e,{data:l,error:c}=yield me(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new ou("You must provide either an email or phone number and a type")}catch(o){if(ne(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var e=this;return y(function*(){return yield e.initializePromise,yield e._acquireLock(-1,y(function*(){return e._useSession(function(){var o=y(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(e,r){var o=this;return y(function*(){o._debug("#_acquireLock","begin",e);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=y(function*(){return yield i,yield r()})();return o.pendingInLock.push(y(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,e,y(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(y(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(e){var r=this;return y(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield e(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var e=this;return y(function*(){e._debug("#__loadSession()","begin"),e.lockAcquired||e._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield Ro(e.storage,e.storageKey);if(e._debug("#getSession()","session from storage",o),null!==o&&(e._isValidSession(o)?r=o:(e._debug("#getSession()","session from storage is not valid"),yield e._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(e._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(e.userStorage){const l=yield Ro(e.userStorage,e.storageKey+"-user");r.user=l?.user?l.user:Vp()}if(e.storage.isServer&&r.user){let l=e.suppressGetSessionWarning;r=new Proxy(r,{get:(u,d,h)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,e.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:r},error:null}}const{data:s,error:a}=yield e._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{e._debug("#__loadSession()","end")}})()}getUser(e){var r=this;return y(function*(){return e?yield r._getUser(e):(yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._getUser()})))})()}_getUser(e){var r=this;return y(function*(){try{return e?yield me(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:e,xform:ho}):yield r._useSession(function(){var o=y(function*(i){var s,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(s=c.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield me(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:ho}):{data:{user:null},error:new co}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return function Oj(n){return ne(n)&&"AuthSessionMissingError"===n.name}(o)&&(yield r._removeSession(),yield uo(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(e){var r=this;return y(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(e){var r=this;return y(function*(o,i={}){try{return yield r._useSession(function(){var s=y(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new co;const u=l.session;let d=null,h=null;"pkce"===r.flowType&&null!=o.email&&([d,h]=yield Xi(r.storage,r.storageKey));const{data:f,error:p}=yield me(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:ho});if(p)throw p;return u.user=f.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return s.apply(this,arguments)}}())}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}).apply(this,arguments)}setSession(e){var r=this;return y(function*(){return yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._setSession(e)}))})()}_setSession(e){var r=this;return y(function*(){try{if(!e.access_token||!e.refresh_token)throw new co;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:l}=Rp(e.access_token);if(l.exp&&(i=l.exp,s=i<=o),s){const{data:c,error:u}=yield r._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield r._getUser(e.access_token);if(u)throw u;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(o){if(ne(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(e){var r=this;return y(function*(){return yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._refreshSession(e)}))})()}_refreshSession(e){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;if(!e){const{data:c,error:u}=i;if(u)throw u;e=null!==(s=c.session)&&void 0!==s?s:void 0}if(!e?.refresh_token)throw new co;const{data:a,error:l}=yield r._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(e,r){var o=this;return y(function*(){try{if(!vn())throw new iu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new iu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new RD("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new iu("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new RD("No code detected.");const{data:N,error:B}=yield o._exchangeCodeForSession(e.code);if(B)throw B;const le=new URL(window.location.href);return le.searchParams.delete("code"),window.history.replaceState(window.history.state,"",le.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:d}=e;if(!(a&&c&&l&&d))throw new iu("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let p=h+f;u&&(p=parseInt(u));const _=p-h;1e3*_<=Ji&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${f}s`);const v=p-f;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,h);const{data:w,error:k}=yield o._getUser(a);if(k)throw k;const E={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:d,user:w.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(i){if(ne(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}_isPKCECallback(e){var r=this;return y(function*(){const o=yield Ro(r.storage,`${r.storageKey}-code-verifier`);return!(!e.code||!o)})()}signOut(){var e=this;return y(function*(r={scope:"global"}){return yield e.initializePromise,yield e._acquireLock(-1,y(function*(){return yield e._signOut(r)}))}).apply(this,arguments)}_signOut(){var e=this;return y(function*({scope:r}={scope:"global"}){return yield e._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(s=a.session)||void 0===s?void 0:s.access_token;if(c){const{error:u}=yield e.admin.signOut(c,r);if(u&&(!function Ij(n){return ne(n)&&"AuthApiError"===n.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==r&&(yield e._removeSession(),yield uo(e.storage,`${e.storageKey}-code-verifier`)),{error:null}});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(e){var r=this;const o=function Lj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)})}(),i={id:o,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),y(function*(){yield r.initializePromise,yield r._acquireLock(-1,y(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(e){var r=this;return y(function*(){return yield r._useSession(function(){var o=y(function*(i){var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(s=r.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(e){var r=this;return y(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield Xi(r.storage,r.storageKey,!0));try{return yield me(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(l){if(ne(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var e=this;return y(function*(){var r;try{const{data:o,error:i}=yield e.getUser();if(i)throw i;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(ne(o))return{data:null,error:o};throw o}})()}linkIdentity(e){var r=this;return y(function*(){return"token"in e?r.linkIdentityIdToken(e):r.linkIdentityOAuth(e)})()}linkIdentityOAuth(e){var r=this;return y(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=y(function*(l){var c,u,d,h,f;const{data:p,error:_}=l;if(_)throw _;const v=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,e.provider,{redirectTo:null===(c=e.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=e.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=e.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield me(r.fetch,"GET",v,{headers:r.headers,jwt:null!==(f=null===(h=p.session)||void 0===h?void 0:h.access_token)&&void 0!==f?f:void 0})});return function(l){return a.apply(this,arguments)}}());if(s)throw s;return vn()&&!(null!==(o=e.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(ne(i))return{data:{provider:e.provider,url:null},error:i};throw i}})()}linkIdentityIdToken(e){var r=this;return y(function*(){return yield r._useSession(function(){var o=y(function*(i){var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:u,token:d,access_token:h,nonce:f}=e,p=yield me(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=l?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Zn}),{data:_,error:v}=p;return v?{data:{user:null,session:null},error:v}:_&&_.session&&_.user?(_.session&&(yield r._saveSession(_.session),yield r._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:v}):{data:{user:null,session:null},error:new Yi}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(e){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s,a;const{data:l,error:c}=i;if(c)throw c;return yield me(r.fetch,"DELETE",`${r.url}/user/identities/${e.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=l.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(e){var r=this;return y(function*(){const o=`#_refreshAccessToken(${e.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function Uj(n,t){return new Promise((r,o)=>{y(function*(){for(let i=0;i<1/0;i++)try{const s=yield n(i);if(!t(i,null,s))return void r(s)}catch(s){if(!t(i,s))return void o(s)}})()})}(function(){var s=y(function*(a){return a>0&&(yield function $j(n){return Np.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield me(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:r.headers,xform:Zn})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const l=200*Math.pow(2,s);return a&&Pp(a)&&Date.now()+l-i<Ji})}catch(i){if(r._debug(o,"error",i),ne(i))return{data:{session:null,user:null},error:i};throw i}finally{r._debug(o,"end")}})()}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){var o=this;return y(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),vn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})()}_recoverAndRefresh(){var e=this;return y(function*(){var r,o;const i="#_recoverAndRefresh()";e._debug(i,"begin");try{const s=yield Ro(e.storage,e.storageKey);if(s&&e.userStorage){let l=yield Ro(e.userStorage,e.storageKey+"-user");!e.storage.isServer&&Object.is(e.storage,e.userStorage)&&!l&&(l={user:s.user},yield Zi(e.userStorage,e.storageKey+"-user",l)),s.user=null!==(r=l?.user)&&void 0!==r?r:Vp()}else if(s&&!s.user&&!s.user){const l=yield Ro(e.storage,e.storageKey+"-user");l&&l?.user?(s.user=l.user,yield uo(e.storage,e.storageKey+"-user"),yield Zi(e.storage,e.storageKey,s)):s.user=Vp()}if(e._debug(i,"session from storage",s),!e._isValidSession(s))return e._debug(i,"session is not valid"),void(null!==s&&(yield e._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(e._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(e.autoRefreshToken&&s.refresh_token){const{error:l}=yield e._callRefreshToken(s.refresh_token);l&&(console.error(l),Pp(l)||(e._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield e._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield e._getUser(s.access_token);!c&&l?.user?(s.user=l.user,yield e._saveSession(s),yield e._notifyAllSubscribers("SIGNED_IN",s)):e._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),e._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield e._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return e._debug(i,"error",s),void console.error(s)}finally{e._debug(i,"end")}})()}_callRefreshToken(e){var r=this;return y(function*(){var o,i;if(!e)throw new co;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new lu;const{data:a,error:l}=yield r._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new co;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return r.refreshingDeferred.resolve(c),c}catch(a){if(r._debug(s,"error",a),ne(a)){const l={data:null,error:a};return Pp(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(e,r){var o=this;return y(function*(i,s,a=!0){const l=`#_notifyAllSubscribers(${i})`;o._debug(l,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const c=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=y(function*(h){try{yield h.callback(i,s)}catch(f){c.push(f)}});return function(h){return d.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(e){var r=this;return y(function*(){r._debug("#_saveSession()",e),r.suppressGetSessionWarning=!0;const o=Object.assign({},e);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield Zi(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=BD(s);yield Zi(r.storage,r.storageKey,a)}else{const s=BD(o);yield Zi(r.storage,r.storageKey,s)}})()}_removeSession(){var e=this;return y(function*(){e._debug("#_removeSession()"),yield uo(e.storage,e.storageKey),yield uo(e.storage,e.storageKey+"-code-verifier"),yield uo(e.storage,e.storageKey+"-user"),e.userStorage&&(yield uo(e.userStorage,e.storageKey+"-user")),yield e._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var e=this;return y(function*(){yield e._stopAutoRefresh(),e._debug("#_startAutoRefresh()");const r=setInterval(()=>e._autoRefreshTokenTick(),Ji);e.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(y(function*(){yield e.initializePromise,yield e._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var e=this;return y(function*(){e._debug("#_stopAutoRefresh()");const r=e.autoRefreshTicker;e.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var e=this;return y(function*(){e._removeVisibilityChangedCallback(),yield e._startAutoRefresh()})()}stopAutoRefresh(){var e=this;return y(function*(){e._removeVisibilityChangedCallback(),yield e._stopAutoRefresh()})()}_autoRefreshTokenTick(){var e=this;return y(function*(){e._debug("#_autoRefreshTokenTick()","begin");try{yield e._acquireLock(0,y(function*(){try{const r=Date.now();try{return yield e._useSession(function(){var o=y(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void e._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/Ji);e._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield e._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{e._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof WD))throw r;e._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var e=this;return y(function*(){if(e._debug("#_handleVisibilityChange()"),!vn()||!window?.addEventListener)return e.autoRefreshToken&&e.startAutoRefresh(),!1;try{e.visibilityChangedCallback=y(function*(){return yield e._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",e.visibilityChangedCallback),yield e._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(e){var r=this;return y(function*(){const o=`#_onVisibilityChanged(${e})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),e||(yield r.initializePromise,yield r._acquireLock(-1,y(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(e,r,o){var i=this;return y(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,l]=yield Xi(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${s.join("&")}`})()}_unenroll(e){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;return l?{data:null,error:l}:yield me(r.fetch,"DELETE",`${r.url}/factors/${e.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}})()}_enroll(e){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:d,error:h}=yield me(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=l?.session)||void 0===s?void 0:s.access_token});return h?{data:null,error:h}:("totp"===e.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}})()}_verify(e){var r=this;return y(function*(){return r._acquireLock(-1,y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?_V(e.webauthn.credential_response):yV(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=yield me(r.fetch,"POST",`${r.url}/factors/${e.factorId}/verify`,{body:c,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?{data:null,error:d}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}}))})()}_challenge(e){var r=this;return y(function*(){return r._acquireLock(-1,y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=yield me(r.fetch,"POST",`${r.url}/factors/${e.factorId}/challenge`,{body:e,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:gV(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:mV(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(e){var r=this;return y(function*(){const{data:o,error:i}=yield r._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield r._verify({factorId:e.factorId,challengeId:o.id,code:e.code})})()}_listFactors(){var e=this;return y(function*(){var r;const{data:{user:o},error:i}=yield e.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var e=this;return y(function*(){return e._acquireLock(-1,y(function*(){return yield e._useSession(function(){var r=y(function*(o){var i,s;const{data:{session:a},error:l}=o;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Rp(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;return(null!==(s=null===(i=a.user.factors)||void 0===i?void 0:i.filter(p=>"verified"===p.status))&&void 0!==s?s:[]).length>0&&(d="aal2"),{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:c.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(e){var r=this;return y(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:l,error:c}=yield me(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=a,s=l.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(e){var r=this;return y(function*(o,i={}){try{let s=o;if(!s){const{data:v,error:w}=yield r.getSession();if(w||!v.session)return{data:null,error:w};s=v.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:d}}=Rp(s);i?.allowExpired||function Kj(n){if(!n)throw new Error("Missing exp claim");if(n<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const h=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!h){const{error:v}=yield r.getUser(s);if(v)throw v;return{data:{claims:l,header:a,signature:c},error:null}}const f=function Jj(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),p=yield crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!(yield crypto.subtle.verify(f,p,c,function Nj(n){const t=[];return function VD(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(n.charCodeAt(e+1)-56320&65535|o),e+=1}kj(r,t)}}(n,e=>t.push(e)),new Uint8Array(t)}(`${u}.${d}`))))throw new kp("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}).apply(this,arguments)}}return n.nextInstanceID=0,n})();class IV extends TV{constructor(t){super(t)}}class OV{constructor(t,e,r){var o,i,s;this.supabaseUrl=t,this.supabaseKey=e;const a=function wj(n){const t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function Cj(n){return n.endsWith("/")?n:n+"/"}(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function bj(n,t){var e,r;const{db:o,auth:i,realtime:s,global:a}=n,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(e=d?.headers)&&void 0!==e?e:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(f=y(function*(){return""}),function(){return f.apply(this,arguments)})};var f;return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}(r??{},{db:pj,realtime:mj,auth:Object.assign(Object.assign({},gj),{storageKey:l}),global:fj});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=vj(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new CD(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new dj(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new yL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t=this;return y(function*(){var e,r;if(t.accessToken)return yield t.accessToken();const{data:o}=yield t.auth.getSession();return null!==(r=null===(e=o.session)||void 0===e?void 0:e.access_token)&&void 0!==r?r:t.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c},u,d){return new IV({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>"authorization"===f.toLowerCase())})}_initRealtimeClient(t){return new UL(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){"TOKEN_REFRESHED"!==t&&"SIGNED_IN"!==t||this.changedAccessToken===r?"SIGNED_OUT"===t&&(this.realtime.setAuth(),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function PV(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(null==n)return!1;const t=n.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const XD_supabase_url="https://hpqwzclyjrfivcmkzwpo.supabase.co",XD_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwcXd6Y2x5anJmaXZjbWt6d3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2ODMzMjUsImV4cCI6MjA3NjI1OTMyNX0.pN-NPncmQCJoiBlYnFk77bAdxXEu5NAn3Fi8bk_c4wI";let rs=(()=>{const t=class{constructor(){this.currentUserSubject=new Rn(null),this.currentUser$=this.currentUserSubject.asObservable(),this.isInitialized=!1,this.initializeClient()}initializeClient(){var r=this;return y(function*(){try{r.supabase=((n,t,e)=>new OV(n,t,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))(XD_supabase_url,XD_supabase_anonKey),r.isInitialized=!0,yield r.checkExistingSession()}catch(o){console.error("Error initializing Supabase client:",o)}})()}checkExistingSession(){var r=this;return y(function*(){const o=localStorage.getItem("currentUser");if(o)try{const i=JSON.parse(o);r.currentUserSubject.next(i)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("currentUser")}})()}signInFallback(r,o){var i=this;return y(function*(){try{const a=[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r&&l.password===o);return a?(localStorage.setItem("currentUser",JSON.stringify(a)),i.currentUserSubject.next(a),{user:a,error:null}):{user:null,error:"Invalid username or password"}}catch(s){return console.error("Fallback sign in error:",s),{user:null,error:"Sign in failed. Please try again."}}})()}signIn(r,o){var i=this;return y(function*(){try{i.isInitialized||(yield new Promise(l=>{const c=()=>{i.isInitialized?l(void 0):setTimeout(c,50)};c()})),yield new Promise(l=>setTimeout(l,100));const{data:s,error:a}=yield i.supabase.from("profiles").select("*").eq("username",r).eq("password",o).single();return a?(console.error("Database query error:",a),console.log("Trying fallback authentication..."),yield i.signInFallback(r,o)):s?(localStorage.setItem("currentUser",JSON.stringify(s)),i.currentUserSubject.next(s),{user:s,error:null}):{user:null,error:"User not found"}}catch(s){if(console.error("Sign in error:",s),s&&"object"==typeof s&&"message"in s){const a=s.message;if(a.includes("NavigatorLockAcquireTimeoutError")||a.includes("lock"))return console.log("Lock error detected, using fallback authentication..."),yield i.signInFallback(r,o)}return console.log("Error occurred, trying fallback authentication..."),yield i.signInFallback(r,o)}})()}signOut(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getCurrentUser(){return this.currentUserSubject.value}isSignedIn(){return null!==this.currentUserSubject.value}getProfileByUsername(r){var o=this;return y(function*(){try{o.isInitialized||(yield new Promise(a=>{const l=()=>{o.isInitialized?a():setTimeout(l,50)};l()}));const{data:i,error:s}=yield o.supabase.from("profiles").select("*").eq("username",r).maybeSingle();return s?(console.warn("getProfileByUsername fallback due to error:",s.message),[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r)||null):i||null}catch(i){return console.error("Error in getProfileByUsername:",i),null}})()}getUserCards(r,o){var i=this;return y(function*(){try{const s=parseInt(r);if(isNaN(s))return{cards:[],error:"Invalid user ID format"};const a=1e3;let l=0,c=[],u=!0;for(;u;){const{data:d,error:h}=yield i.supabase.from("user_cards").select("*").eq("user_id",s).range(l,l+a-1);if(h)return{cards:[],error:h.message};d&&d.length>0?(c=c.concat(d),l+=a,u=d.length===a,o&&o(c.length)):u=!1}return{cards:c,error:null}}catch(s){return console.error("Error fetching user cards:",s),{cards:[],error:"Failed to fetch user cards"}}})()}updateCardQuantity(r,o,i){var s=this;return y(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};if(i<=0){const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a).eq("card_def_key",o);if(l)return{success:!1,error:l.message}}else{const{data:l,error:c}=yield s.supabase.from("user_cards").select("*").eq("user_id",a).eq("card_def_key",o).maybeSingle();if(c)return console.error("Error checking existing card:",c),{success:!1,error:c.message};if(l){const{error:u}=yield s.supabase.from("user_cards").update({quantity:i}).eq("user_id",a).eq("card_def_key",o);if(u)return{success:!1,error:u.message}}else{const{error:u}=yield s.supabase.from("user_cards").insert({user_id:a,card_def_key:o,quantity:i,minimum_keep_card:2,allow_trade:!0});if(u)return{success:!1,error:u.message}}}return{success:!0,error:null}}catch(a){return console.error("Error updating card quantity:",a),{success:!1,error:"Failed to update card quantity"}}})()}getCardQuantity(r,o){var i=this;return y(function*(){try{const{data:s,error:a}=yield i.supabase.from("user_cards").select("quantity").eq("user_id",r).eq("card_def_key",o).single();return a||!s?0:s.quantity||0}catch(s){return console.error("Error fetching card quantity:",s),0}})()}syncUserCollection(r,o){var i=this;return y(function*(){try{const{cards:s,error:a}=yield i.getUserCards(r,o);if(a)return console.error("Error syncing user collection:",a),{quantities:{},minimumKeepCounts:{},allowTrade:{}};const l={},c={},u={};return s.forEach(d=>{l[d.card_def_key]=d.quantity,c[d.card_def_key]=d.minimum_keep_card||0,u[d.card_def_key]=!1!==d.allow_trade}),{quantities:l,minimumKeepCounts:c,allowTrade:u}}catch(s){return console.error("Error syncing user collection:",s),{quantities:{},minimumKeepCounts:{},allowTrade:{}}}})()}updateCardMinimumKeepCount(r,o,i){var s=this;return y(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};const{error:l}=yield s.supabase.from("user_cards").update({minimum_keep_card:i}).eq("user_id",a).eq("card_def_key",o);return l?{success:!1,error:l.message}:{success:!0,error:null}}catch(a){return console.error("Error updating minimum keep count:",a),{success:!1,error:"Failed to update minimum keep count"}}})()}toggleAllowTrade(r,o,i){var s=this;return y(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};const{error:l}=yield s.supabase.from("user_cards").update({allow_trade:i}).eq("user_id",a).eq("card_def_key",o);return l?{success:!1,error:l.message}:{success:!0,error:null}}catch(a){return console.error("Error toggling allow trade:",a),{success:!1,error:"Failed to toggle allow trade"}}})()}bulkReplaceUserCollection(r,o,i){var s=this;return y(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a);if(l)return console.error("Error deleting existing cards:",l),{success:!1,error:l.message};const c=Object.entries(o).filter(([u,d])=>d>0).map(([u,d])=>({user_id:a,card_def_key:u,quantity:d,minimum_keep_card:i?.minKeep?.[u]??0,allow_trade:i?.allowTrade?.[u]??!0}));if(c.length>0){const{error:u}=yield s.supabase.from("user_cards").insert(c);if(u)return console.error("Error inserting new cards:",u),{success:!1,error:u.message};console.log(`\u2705 Bulk sync completed: ${c.length} cards inserted`)}else console.log("\u2705 Bulk sync completed: No cards to insert (collection is empty)");return{success:!0,error:null}}catch(a){return console.error("Error in bulk replace user collection:",a),{success:!1,error:"Failed to bulk replace user collection"}}})()}};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),eE=(()=>{const t=class{constructor(){this.rarityMap=new Map([["C",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["U",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["R",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["RR",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["AR",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["SR",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare",order:6}],["SAR",{code:"SAR",symbol:"\u{1f308}",name:"Special Art Rare",displayName:"\u{1f308} - Special Art Rare",order:6}],["IM",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["UR",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["CR",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["S",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["SSR",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}],["Common",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["Uncommon",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["Rare",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["Double Rare",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["Art Rare",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["Super Rare",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare",order:6}],["Special Art Rare",{code:"SAR",symbol:"\u{1f308}",name:"Special Art Rare",displayName:"\u{1f308} - Special Art Rare",order:6}],["Immersive Rare",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["Ultimate Rare",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["Crown Rare",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["Shiny",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["Shiny Super Rare",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}]])}getRarityInfo(r){return this.rarityMap.get(r)}getDisplayName(r){const o=this.getRarityInfo(r);return o?o.displayName:r}getSymbol(r){const o=this.getRarityInfo(r);return o?o.symbol:r}getAllRarities(){return Array.from(this.rarityMap.values()).filter(r=>!r.code.includes(" ")).sort((r,o)=>r.order-o.order)}getRarityOrder(r){const o=this.getRarityInfo(r);return o?o.order:999}sortRarities(r){return r.sort((o,i)=>this.getRarityOrder(o)-this.getRarityOrder(i))}isRare(r){return["IM","UR","SSR"].includes(r)}isSuperRare(r){return["SR","SAR","IM","UR","SSR"].includes(r)}getNormalizedCode(r){const o=this.getRarityInfo(r);return o?o.code:r}getStandardizedDisplayName(r){const o=this.getNormalizedCode(r),i=this.getRarityInfo(o);return i?i.displayName:r}getUnifiedRarities(){const o=this.getAllRarities(),i=new Set;return o.filter(s=>!i.has(s.symbol)&&(i.add(s.symbol),!0))}getCodeFromSymbol(r){for(const[,o]of this.rarityMap)if(o.symbol===r)return o.code;return r}groupCardsByNormalizedRarity(r){const o=new Map;return r.forEach(i=>{if(!i.rarity)return;const s=this.getCodeFromSymbol(i.rarity),a=this.getNormalizedCode(s);o.has(a)||o.set(a,[]),o.get(a).push(i)}),o}};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function kV(n,t){if(1&n){const e=Ne();g(0,"div",66)(1,"div",67),b(2,"Viewing "),g(3,"strong"),b(4),m(),b(5,"'s collection (read-only)"),m(),g(6,"button",68),j("click",function(){return Q(e),Z(T().backToMyCollection())}),b(7,"Back to my collection"),m()()}if(2&n){const e=T();C(4),gt(null==e.viewingUser?null:e.viewingUser.username)}}function RV(n,t){if(1&n&&(g(0,"option",69),b(1),m()),2&n){const e=t.$implicit;O("value",e),C(1),gt(e)}}function NV(n,t){if(1&n&&(g(0,"option",69),b(1),m()),2&n){const e=t.$implicit,r=T();O("value",e),C(1),gt(r.getSetName(e))}}function FV(n,t){if(1&n&&(g(0,"option",69),b(1),m()),2&n){const e=t.$implicit;O("value",e),C(1),gt(e)}}function LV(n,t){if(1&n){const e=Ne();g(0,"button",70),j("click",function(){return Q(e),Z(T().toggleRarity("\u{1f308}"))}),b(1," \u{1f308} "),m()}2&n&&(Le("active",T().isRaritySelected("\u{1f308}")),O("title","\u{1f308} - Special Art Rare"))}function jV(n,t){if(1&n){const e=Ne();g(0,"button",70),j("click",function(){const i=Q(e).$implicit;return Z(T().toggleRarity(i.symbol))}),b(1),m()}if(2&n){const e=t.$implicit;Le("active",T().isRaritySelected(e.symbol)),O("title",e.displayName),C(1),ke(" ",e.symbol," ")}}const VV=function(n,t,e){return{"trainer-item":n,"trainer-tool":t,"trainer-supporter":e}};function $V(n,t){if(1&n&&(yi(0),g(1,"span",74),b(2),m(),vi()),2&n){const e=T().$implicit;C(1),O("ngClass",ch(2,VV,"Item"===e,"Tool"===e,"Supporter"===e)),C(1),ke(" ",e," ")}}function UV(n,t){if(1&n&&lt(0,"img",75),2&n){const e=T().$implicit;O("src","assets/energy/"+e.toLowerCase()+".webp",ni)("alt",e)}}const BV=function(){return["Item","Tool","Supporter"]};function HV(n,t){if(1&n){const e=Ne();g(0,"button",71),j("click",function(){const i=Q(e).$implicit;return Z(T().toggleType(i))}),G(1,$V,3,6,"ng-container",72),G(2,UV,1,2,"ng-template",null,73,Ll),m()}if(2&n){const e=t.$implicit,r=Ls(3);Le("active",T().isTypeSelected(e)),O("title",e),C(1),O("ngIf",function Pv(n,t,e){const r=qt()+n,o=L();return o[r]===ge?dr(o,r,e?t.call(e):t()):function Fs(n,t){return n[t]}(o,r)}(5,BV).includes(e))("ngIfElse",r)}}function zV(n,t){if(1&n){const e=Ne();g(0,"div",14)(1,"label",76),b(2,"Group By"),m(),g(3,"select",77),j("ngModelChange",function(o){return Q(e),Z(T().groupBy=o)})("change",function(){return Q(e),Z(T().onGroupByChange())}),g(4,"option",78),b(5,"No Grouping"),m(),g(6,"option",79),b(7,"Rarity"),m(),g(8,"option",80),b(9,"Pack"),m(),g(10,"option",81),b(11,"Type"),m()()()}if(2&n){const e=T();C(3),O("ngModel",e.groupBy)}}function GV(n,t){1&n&&(g(0,"div",82),lt(1,"div",83),g(2,"p"),b(3,"Loading Pokemon cards..."),m()())}function qV(n,t){if(1&n){const e=Ne();g(0,"div",84)(1,"p"),b(2),m(),g(3,"button",85),j("click",function(){return Q(e),Z(T().loadAllData())}),b(4,"Retry"),m()()}if(2&n){const e=T();C(2),gt(e.error)}}function WV(n,t){if(1&n&&(g(0,"div",92),b(1),m()),2&n){const e=T(2);C(1),ke("",e.syncProgress," cards loaded")}}function KV(n,t){if(1&n&&(g(0,"div",86)(1,"div",87)(2,"div",88),b(3,"\u23f3"),m(),g(4,"div",89)(5,"div",90),b(6),m(),G(7,WV,2,1,"div",91),m()()()),2&n){const e=T();C(6),gt(e.syncMessage),C(1),O("ngIf",e.syncProgress>0)}}function JV(n,t){if(1&n&&(g(0,"span",106),b(1),m()),2&n){const e=T().$implicit,r=T(2);C(1),ke(" \u25ca ",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)," ")}}function YV(n,t){if(1&n&&(g(0,"span",107),b(1),m()),2&n){const e=T().$implicit,r=T(2);C(1),ke(" \u2606 ",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)," ")}}function QV(n,t){if(1&n&&(g(0,"span",108),b(1),m()),2&n){const e=T().$implicit,r=T(2);C(1),ke(" \u2735 ",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)," ")}}function ZV(n,t){if(1&n&&(g(0,"span",109),b(1),m()),2&n){const e=T().$implicit,r=T(2);C(1),ke(" \u{1f451} ",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)," ")}}function XV(n,t){if(1&n){const e=Ne();yi(0),g(1,"input",122),j("ngModelChange",function(o){return Q(e),Z(T(5).editingCountValue=o)})("keydown.enter",function(){Q(e);const o=T().$implicit;return Z(T(4).commitCount(o))})("keydown",function(o){Q(e);const i=T().$implicit;return Z(T(4).onCountInputKeydown(o,i))})("keydown.escape",function(){return Q(e),Z(T(5).cancelEditingCount())})("blur",function(){Q(e);const o=T().$implicit;return Z(T(4).commitCount(o))}),m(),vi()}if(2&n){const e=T(5);C(1),O("ngModel",e.editingCountValue)}}function e$(n,t){if(1&n){const e=Ne();g(0,"button",123),j("click",function(){Q(e);const o=T().$implicit,i=T(4);return Z(i.isViewingOther?null:i.startEditingCount(o))}),b(1),m()}if(2&n){const e=T().$implicit,r=T(4);O("disabled",r.isViewingOther),C(1),ke(" ",r.getOwnedCount(e)," ")}}function t$(n,t){if(1&n){const e=Ne();g(0,"div",124)(1,"button",125),j("click",function(){Q(e);const o=T().$implicit;return Z(T(4).toggleCardAllowTrade(o))}),b(2),m(),g(3,"input",126),j("change",function(o){Q(e);const i=T().$implicit;return Z(T(4).updateCardMinimumKeepCount(i,+o.target.value))}),m()()}if(2&n){const e=T().$implicit,r=T(4);C(1),O("title",r.isCardAllowTrade(e)?"Click to lock (prevent trade)":"Click to unlock (allow trade)"),C(1),ke(" ",r.isCardAllowTrade(e)?"\u{1f513}":"\u{1f512}"," "),C(1),O("value",r.getCardMinimumKeepCount(e))("max",r.getOwnedCount(e))("disabled",r.isViewingOther||!r.isCardAllowTrade(e))}}function n$(n,t){if(1&n){const e=Ne();g(0,"div",112)(1,"div",113)(2,"img",114),j("error",function(o){const s=Q(e).$implicit;return Z(T(4).onImageError(o,s))})("click",function(){const i=Q(e).$implicit;return Z(T(4).openCardModal(i))}),m()(),g(3,"div",115)(4,"div",116),b(5),m(),g(6,"div",117)(7,"button",118),j("click",function(){const i=Q(e).$implicit;return Z(T(4).decreaseOwned(i))}),b(8," \u2212 "),m(),G(9,XV,2,1,"ng-container",72),G(10,e$,2,2,"ng-template",null,119,Ll),g(12,"button",120),j("click",function(){const i=Q(e).$implicit;return Z(T(4).increaseOwned(i))}),b(13," + "),m()(),G(14,t$,4,5,"div",121),m()()}if(2&n){const e=t.$implicit,r=Ls(11),o=T(4);Le("no-quantity",0===o.getOwnedCount(e)),Kt("data-cardid",o.getCardId(e)),C(1),Le("no-quantity",0===o.getOwnedCount(e)),C(1),Le("no-quantity",0===o.getOwnedCount(e)),O("src",o.getCardImageUrl(o.getCardImageName(e)),ni)("alt",o.getCardName(e)+" Pokemon Card"),C(3),gt(o.getCardDisplayName(e)),C(2),O("disabled",o.isViewingOther||0===o.getOwnedCount(e)),C(2),O("ngIf",o.editingCardId===o.getCardId(e))("ngIfElse",r),C(3),O("disabled",o.isViewingOther),C(2),O("ngIf",o.getOwnedCount(e)>0&&!o.isViewingOther)}}function r$(n,t){if(1&n&&(g(0,"div",110),G(1,n$,15,15,"div",111),m()),2&n){const e=T().$implicit,r=T(2);C(1),O("ngForOf",e.cards)("ngForTrackBy",r.trackByCardInGroup)}}function o$(n,t){if(1&n&&(g(0,"span",141),b(1),m()),2&n){const e=T().$implicit;C(1),ke(" ",e.packs.join(", ")," ")}}function i$(n,t){if(1&n){const e=Ne();yi(0),g(1,"input",122),j("ngModelChange",function(o){return Q(e),Z(T(5).editingCountValue=o)})("keydown.enter",function(){Q(e);const o=T().$implicit;return Z(T(4).commitCount(o))})("keydown",function(o){Q(e);const i=T().$implicit;return Z(T(4).onCountInputKeydown(o,i))})("keydown.escape",function(){return Q(e),Z(T(5).cancelEditingCount())})("blur",function(){Q(e);const o=T().$implicit;return Z(T(4).commitCount(o))}),m(),vi()}if(2&n){const e=T(5);C(1),O("ngModel",e.editingCountValue)}}function s$(n,t){if(1&n){const e=Ne();g(0,"button",123),j("click",function(){Q(e);const o=T().$implicit,i=T(4);return Z(i.isViewingOther?null:i.startEditingCount(o))}),b(1),m()}if(2&n){const e=T().$implicit,r=T(4);O("disabled",r.isViewingOther),C(1),ke(" ",r.getOwnedCount(e)," ")}}function a$(n,t){if(1&n){const e=Ne();g(0,"div",142)(1,"button",125),j("click",function(){Q(e);const o=T().$implicit;return Z(T(4).toggleCardAllowTrade(o))}),b(2),m(),g(3,"input",143),j("change",function(o){Q(e);const i=T().$implicit;return Z(T(4).updateCardMinimumKeepCount(i,+o.target.value))}),m()()}if(2&n){const e=T().$implicit,r=T(4);C(1),O("title",r.isCardAllowTrade(e)?"Click to lock (prevent trade)":"Click to unlock (allow trade)"),C(1),ke(" ",r.isCardAllowTrade(e)?"\u{1f513}":"\u{1f512}"," "),C(1),O("value",r.getCardMinimumKeepCount(e))("max",r.getOwnedCount(e))("disabled",r.isViewingOther||!r.isCardAllowTrade(e))}}function l$(n,t){if(1&n){const e=Ne();g(0,"div",129)(1,"div",130),j("click",function(){const i=Q(e).$implicit;return Z(T(4).openCardModal(i))}),g(2,"img",131),j("error",function(o){const s=Q(e).$implicit;return Z(T(4).onImageError(o,s))}),m()(),g(3,"div",132)(4,"div",133),b(5),m(),g(6,"div",134)(7,"span",135),b(8),m(),G(9,o$,2,1,"span",136),m()(),g(10,"div",137)(11,"div",138)(12,"button",118),j("click",function(){const i=Q(e).$implicit;return Z(T(4).decreaseOwned(i))}),b(13,"\u2212"),m(),G(14,i$,2,1,"ng-container",72),G(15,s$,2,2,"ng-template",null,139,Ll),g(17,"button",120),j("click",function(){const i=Q(e).$implicit;return Z(T(4).increaseOwned(i))}),b(18,"+"),m()(),G(19,a$,4,5,"div",140),m()()}if(2&n){const e=t.$implicit,r=Ls(16),o=T(4);Le("no-quantity",0===o.getOwnedCount(e)),Kt("data-cardid",o.getCardId(e)),C(2),Le("no-quantity",0===o.getOwnedCount(e)),O("src",o.getCardImageUrl(o.getCardImageName(e)),ni)("alt",o.getCardName(e)+" Pokemon Card"),C(3),gt(o.getCardDisplayName(e)),C(3),Wr("",e.set,"-",e.number,""),C(1),O("ngIf",e.packs&&e.packs.length>0),C(3),O("disabled",o.isViewingOther||0===o.getOwnedCount(e)),C(2),O("ngIf",o.editingCardId===o.getCardId(e))("ngIfElse",r),C(3),O("disabled",o.isViewingOther),C(2),O("ngIf",o.getOwnedCount(e)>0&&!o.isViewingOther)}}function c$(n,t){if(1&n&&(g(0,"div",127),G(1,l$,20,16,"div",128),m()),2&n){const e=T().$implicit,r=T(2);C(1),O("ngForOf",e.cards)("ngForTrackBy",r.trackByCardInGroup)}}function u$(n,t){if(1&n&&(g(0,"div",95)(1,"div",96)(2,"h3",97),b(3),m(),g(4,"div",98),G(5,JV,2,1,"span",99),G(6,YV,2,1,"span",100),G(7,QV,2,1,"span",101),G(8,ZV,2,1,"span",102),g(9,"span",103),b(10),m()()(),G(11,r$,2,2,"div",104),G(12,c$,2,2,"div",105),m()),2&n){const e=t.$implicit,r=T(2);Kt("id","set-"+e.groupTitle),C(3),gt(r.getGroupDisplayName(e.groupTitle,e.cards)),C(2),O("ngIf",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle).endsWith("/0")),C(1),O("ngIf",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle).endsWith("/0")),C(1),O("ngIf",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle).endsWith("/0")),C(1),O("ngIf",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle).endsWith("/0")),C(2),ke("",r.getGroupCollectedCount(e.cards)," cards"),C(1),O("ngIf","grid"===r.viewMode),C(1),O("ngIf","list"===r.viewMode)}}function d$(n,t){if(1&n&&(g(0,"div",93),G(1,u$,13,9,"div",94),m()),2&n){const e=T();C(1),O("ngForOf",e.getGroupedCards())("ngForTrackBy",e.trackByGroupTitle)}}function h$(n,t){if(1&n){const e=Ne();g(0,"div",144)(1,"div",145),b(2,"\u{1f50d}"),m(),g(3,"h3"),b(4,"No cards found"),m(),g(5,"p"),b(6,"Try adjusting your search or filter criteria"),m(),g(7,"button",85),j("click",function(){return Q(e),Z(T().clearFilters())}),b(8,"Clear All Filters"),m()()}}function f$(n,t){if(1&n){const e=Ne();g(0,"div",146),j("click",function(){return Q(e),Z(T().closeViewOthersModal())}),g(1,"div",147),j("click",function(o){return o.stopPropagation()}),g(2,"div",148)(3,"h3"),b(4,"View Others Collection"),m(),g(5,"button",149),j("click",function(){return Q(e),Z(T().closeViewOthersModal())}),b(6,"\xd7"),m()(),g(7,"div",150)(8,"div",151)(9,"div",152)(10,"label",153),b(11,"Username:"),m(),g(12,"input",154),j("ngModelChange",function(o){return Q(e),Z(T().otherUsername=o)})("keydown.enter",function(){return Q(e),Z(T().viewOtherCollectionFromModal())}),m(),g(13,"span",155),b(14,"Enter the username of the collection you want to view"),m()()()(),g(15,"div",156)(16,"button",68),j("click",function(){return Q(e),Z(T().closeViewOthersModal())}),b(17,"Cancel"),m(),g(18,"button",157),j("click",function(){return Q(e),Z(T().viewOtherCollectionFromModal())}),b(19," \u{1f464} View Collection "),m()()()()}if(2&n){const e=T();C(12),O("ngModel",e.otherUsername),C(6),O("disabled",!e.otherUsername.trim())}}function p$(n,t){if(1&n&&(g(0,"span",171),b(1),m()),2&n){const e=t.$implicit;C(1),gt(e)}}function g$(n,t){if(1&n&&(g(0,"div",169),G(1,p$,2,1,"span",170),m()),2&n){const e=T(2);C(1),O("ngForOf",e.selectedCardForModal.packs)}}function m$(n,t){if(1&n){const e=Ne();g(0,"div",158),j("click",function(){return Q(e),Z(T().closeCardModal())}),g(1,"div",159),j("click",function(o){return o.stopPropagation()}),g(2,"button",160),j("click",function(){return Q(e),Z(T().closeCardModal())}),b(3,"\xd7"),m(),g(4,"div",161)(5,"button",162),j("click",function(o){return Q(e),Z(T().showPrevCardInModal(o))}),lt(6,"i",163),m(),lt(7,"img",164),g(8,"button",165),j("click",function(o){return Q(e),Z(T().showNextCardInModal(o))}),lt(9,"i",166),m()(),g(10,"div",167)(11,"h3"),b(12),m(),G(13,g$,2,1,"div",168),m()()()}if(2&n){const e=T();C(7),O("src",e.getCardImageUrl(e.getCardImageName(e.selectedCardForModal)),ni)("alt",e.getCardDisplayName(e.selectedCardForModal)),C(5),gt(e.getCardDisplayName(e.selectedCardForModal)),C(1),O("ngIf",e.selectedCardForModal.packs&&e.selectedCardForModal.packs.length>0)}}let _$=(()=>{const t=class{constructor(r,o,i,s,a,l,c,u){this.pokemonDataService=r,this.dataManager=o,this.imageService=i,this.supabaseService=s,this.router=a,this.route=l,this.cdr=c,this.rarityService=u,this.touchStartX=null,this.touchEndX=null,this.handleModalTouchStart=d=>{1===d.touches.length&&(this.touchStartX=d.touches[0].clientX)},this.handleModalTouchEnd=d=>{if(null===this.touchStartX)return;this.touchEndX=d.changedTouches[0].clientX;const h=this.touchEndX-this.touchStartX;Math.abs(h)>50&&(h<0?this.showNextCardInModal():this.showPrevCardInModal()),this.touchStartX=null,this.touchEndX=null},this.cards=[],this.filteredCards=[],this.sets=[],this.rarityMapping={},this.ownedCards={},this.cardMinimumKeepCount={},this.cardAllowTrade={},this.Math=Math,this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.foilFilter="all",this.groupBy="none",this.availableSets=[],this.availableSeries=[],this.availableRarities=[],this.availableRaritySymbols=[],this.availableTypes=[],this.availablePacks=[],this.loading=!0,this.loadingOwnedCards=!1,this.syncingCards=!1,this.syncProgress=0,this.syncMessage="",this.error=null,this.viewMode="grid",this.editingCardId=null,this.editingCountValue=0,this.lastFlatOrder=[],this.selectedCardForModal=null,this.isViewingOther=!1,this.otherUsername="",this.viewingUser=null,this.totalCards=0,this.ownedCount=0,this.uniqueOwned=0,this.completionPercentage=0,this.currentUser=null,this.filtersOpen=!1,this.showViewOthersModal=!1,this.handleModalKeydown=d=>{"Escape"===d.key&&this.selectedCardForModal&&this.closeCardModal()},this.trackByCardId=(d,h)=>this.getCardId(h),this.trackByGroupTitle=(d,h)=>h.groupTitle,this.trackByCardInGroup=(d,h)=>this.getCardId(h)}getOwnedRarityCount(r,o,i){if(!r)return"0/0";const a=i.split(" - ")[0].trim().toUpperCase(),l={"\u25ca":["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca"],"\u2606":["\u2606","\u2606\u2606","\u2606\u2606\u2606","\u{1f308}"],"\u2735":["\u2735","\u2735\u2735"]}[o]||[o],c=r.filter(d=>{if(!d)return!1;const h=this.getCardRarityCode(d),f=h?this.rarityService.getSymbol(h):"",p=l.includes(f),_="all"===i||d.set&&d.set.toUpperCase()===a;return p&&_});return`${c.filter(d=>this.getOwnedCount(d)>0).length}/${c.length}`}openCardModal(r){this.selectedCardForModal=r,document.body.style.overflow="hidden",document.addEventListener("keydown",this.handleModalKeydown),setTimeout(()=>{const o=document.querySelector(".modal-content.card-modal");o&&(o.addEventListener("touchstart",i=>this.handleModalTouchStart(i),{passive:!0}),o.addEventListener("touchend",i=>this.handleModalTouchEnd(i),{passive:!0}))},0)}closeCardModal(){this.selectedCardForModal=null,document.body.style.overflow="auto",document.removeEventListener("keydown",this.handleModalKeydown);const r=document.querySelector(".modal-content.card-modal");if(r){const o=r.cloneNode(!0);r.parentNode?.replaceChild(o,r)}}showPrevCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s>0?o[s-1]:o[o.length-1],this.cdr.markForCheck()}showNextCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s<o.length-1?o[s+1]:o[0],this.cdr.markForCheck()}getAllModalCards(){const r=this.getGroupedCards();return Array.isArray(r)?r.flatMap(o=>o.cards):[]}getCardName(r){return r.name&&"string"==typeof r.name?r.name:r.label?.eng||""}getCardImageName(r){return r.image&&"string"==typeof r.image?r.image:r.imageName||""}hasRaritySymbol(r){return(this.availableRaritySymbols||[]).some(o=>o.symbol===r)}ngOnInit(){if(this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser){try{typeof window<"u"&&window?.innerWidth<=768&&(this.filtersOpen=!1)}catch{}this.loadAllData()}else this.router.navigate(["/signin"])}loadAllData(){this.loading=!0,this.error=null,this.pokemonDataService.loadAllData().subscribe({next:r=>{this.cards=r.cards,this.filteredCards=[...this.cards],this.sets=r.sets,this.rarityMapping=r.rarities,this.extractFilterOptions(),this.calculateStatistics(),this.loading=!1,this.cdr.detectChanges(),this.applyQueryParamsIfAny().then(()=>{this.isViewingOther||this.loadOwnedCards()})},error:r=>{this.error="Failed to load card collection",this.loading=!1,this.cdr.detectChanges(),console.error("Error loading card collection:",r)}})}applyQueryParamsIfAny(){var r=this;return y(function*(){const o=r.route.snapshot.queryParams||{},i=o.series,s=o.set,a=o.pack,l=o.rarity,c=o.otherUser;let u=!1;"string"==typeof i&&i.trim()&&(r.selectedSeries=i,u=!0),r.extractAvailableSets(),"string"==typeof s&&s.trim()&&(r.selectedSet=s,u=!0),r.extractAvailablePacks(),"string"==typeof a&&a.trim()&&(r.selectedPack=a,u=!0),"string"==typeof l&&l.trim()&&(r.selectedRarities=[l],u=!0),u&&(r.applyFilters(),r.cdr.detectChanges()),"string"==typeof c&&c.trim()&&(r.otherUsername=c.trim(),yield r.viewOtherCollection())})()}extractFilterOptions(){this.availableSeries=[...new Set(this.cards.map(s=>s.series).filter(s=>!!s))];const r=[...new Set(this.cards.map(s=>s.rarity).filter(s=>s))],o=this.createRaritySymbolToCodeMap();this.availableRarities=r.map(s=>o.get(s)||s);const i=this.rarityService.getUnifiedRarities();this.availableRaritySymbols=i.map(s=>({symbol:s.symbol,rarities:[s.code],displayName:s.displayName})).sort((s,a)=>this.rarityService.getRarityOrder(s.rarities[0])-this.rarityService.getRarityOrder(a.rarities[0])),this.extractAvailablePacks(),this.extractAvailableTypes(),this.extractAvailableSets()}extractAvailableSets(){this.availableSets="all"===this.selectedSeries?[...new Set(this.cards.map(r=>r.set))]:[...new Set(this.cards.filter(r=>r.series===this.selectedSeries).map(r=>r.set))]}createRaritySymbolToCodeMap(){const r=new Map,o=this.rarityService.getUnifiedRarities();for(const i of o)r.set(i.symbol,i.code);return r}getCardRarityCode(r){const o=r.rarityCode;return"string"==typeof o&&o.trim()?o.trim():this.createRaritySymbolToCodeMap().get(r.rarity)||r.rarity}convertRarityNameToCode(r){return{Common:"C",Uncommon:"U",Rare:"R","Double Rare":"RR","Art Rare":"AR","Super Rare":"SR","Special Art Rare":"SAR","Immersive Rare":"IM","Crown Rare":"UR",Shiny:"S","Shiny Super Rare":"SSR"}[r]||r}extractAvailablePacks(){let r=this.cards;"all"!==this.selectedSeries&&(r=r.filter(i=>i.series===this.selectedSeries)),"all"!==this.selectedSet&&(r=r.filter(i=>i.set===this.selectedSet));const o=r.flatMap(i=>Array.isArray(i.packs)?i.packs:[]).filter(i=>"string"==typeof i&&i.trim());this.availablePacks=[...new Set(o)],"all"!==this.selectedPack&&!this.availablePacks.includes(this.selectedPack)&&(this.selectedPack="all")}extractAvailableTypes(){const r=this.cards.map(o=>o.element?.toLowerCase().trim()).filter(o=>!!o);this.availableTypes=[...new Set(r)].sort((o,i)=>o.localeCompare(i))}applyFilters(){this.filteredCards=this.cards.filter(i=>{if("all"!==this.selectedSet&&i.set!==this.selectedSet||"all"!==this.selectedSeries&&i.series!==this.selectedSeries)return!1;if(this.selectedRarities.length>0){const l=new Set;for(const u of this.selectedRarities){if("\u{1f308}"===u){l.add("SAR");continue}const d=this.rarityService.getCodeFromSymbol(u);d&&(l.add(d),"SR"===d&&l.add("SAR"),"UR"===d&&l.add("CR"))}const c=this.getCardRarityCode(i);if(!l.has(c))return!1}if(this.selectedTypes.length>0){const l=i.element?.toLowerCase().trim();if(!l||!this.selectedTypes.includes(l))return!1}if("all"!==this.selectedSet&&"all"!==this.selectedPack&&!(Array.isArray(i.packs)?i.packs:[]).includes(this.selectedPack))return!1;const s=this.getCardName(i);if(this.searchTerm&&!s.toLowerCase().includes(this.searchTerm.toLowerCase())||"missing"===this.ownershipFilter&&this.getOwnedCount(i)>0||"owned"===this.ownershipFilter&&0===this.getOwnedCount(i))return!1;const a=!0===i.isFoil;return!("no-foil"===this.foilFilter&&a||"foil-only"===this.foilFilter&&!a)});const r=i=>this.isSpecialSet(i),o=(i,s)=>{const a=/^([A-Z]+)(\d+)([a-z]*)$/,l=(i||"").match(a),c=(s||"").match(a);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return(i||"").localeCompare(s||"")};this.filteredCards.sort("oldest"===this.sortBy?(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(i.set,s.set);return 0!==c?c:i.number!==s.number?i.number-s.number:this.getCardName(i).localeCompare(this.getCardName(s))}:(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(s.set,i.set);return 0!==c?c:i.number!==s.number?s.number-i.number:this.getCardName(i).localeCompare(this.getCardName(s))})}onFilterChange(){this.extractAvailablePacks(),this.applyFilters()}onSetChange(){this.extractAvailablePacks(),"all"===this.selectedSet&&(this.selectedPack="all",this.groupBy="none"),this.applyFilters()}onSeriesChange(){this.extractAvailableSets(),this.selectedSet="all",this.selectedPack="all",this.groupBy="none",this.extractAvailablePacks(),this.applyFilters()}onSearchChange(){this.applyFilters()}onGroupByChange(){this.applyFilters()}clearFilters(){this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.foilFilter="all",this.groupBy="none",this.extractAvailableSets(),this.extractAvailablePacks(),this.applyFilters()}toggleFilters(){this.filtersOpen=!this.filtersOpen,this.cdr.detectChanges(),this.filtersOpen&&setTimeout(()=>{const r=document.querySelector(".filters-panel");if(r){const o=r.getBoundingClientRect().top+window.scrollY-8;window.scrollTo({top:o,behavior:"smooth"})}})}isSpecialSet(r){const o=(r||"").toUpperCase();return o.startsWith("P-")||o.endsWith("-P")||"P-A"===o||o.startsWith("PROMO")||o.startsWith("A4B")}openViewOthersModal(){this.isViewingOther||(this.showViewOthersModal=!0,this.cdr.detectChanges())}closeViewOthersModal(){this.showViewOthersModal=!1,this.cdr.detectChanges()}viewOtherCollectionFromModal(){var r=this;return y(function*(){r.openOtherCollectionInNewTab(),r.closeViewOthersModal()})()}openOtherCollectionInNewTab(){const r=(this.otherUsername||"").trim();if(!r)return void alert("Please enter a username");const o=this.router.createUrlTree(["/collection"],{queryParams:{otherUser:r}}),i=this.router.serializeUrl(o),a=(document.querySelector("base")?.getAttribute("href")||"/").trim();let l;/^https?:\/\//i.test(a),l=a.replace(/\/$/,"")+i,window.open(l,"_blank","noopener")}loadOwnedCards(){var r=this;return y(function*(){r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}loadOwnedCardsForUser(r,o){var i=this;return y(function*(){i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage=o?`Loading ${o}'s collection...`:"Starting sync...",i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage="Starting sync...";try{const{quantities:s,minimumKeepCounts:a,allowTrade:l}=yield i.supabaseService.syncUserCollection(r,c=>{i.syncProgress=c,i.syncMessage=`Syncing cards... ${c} loaded`,i.cdr.detectChanges()});i.ownedCards=s,i.cardMinimumKeepCount=a,i.cardAllowTrade=l,i.calculateStatistics(),i.syncMessage=`Sync completed! ${Object.keys(s).length} cards loaded`,i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},1500)}catch(s){console.error("Error loading owned cards:",s),i.syncMessage="Sync failed, using local data...";const a=localStorage.getItem("ownedPokemonCards");a&&(i.ownedCards=JSON.parse(a),i.calculateStatistics()),i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},2e3)}finally{i.loadingOwnedCards=!1}})()}saveOwnedCards(){var r=this;return y(function*(){localStorage.setItem("ownedPokemonCards",JSON.stringify(r.ownedCards)),r.calculateStatistics()})()}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}getCardMinimumKeepCount(r){const o=this.getCardId(r);return this.cardMinimumKeepCount[o]||0}isCardAllowTrade(r){const o=this.getCardId(r);return!1!==this.cardAllowTrade[o]}toggleCardAllowTrade(r){var o=this;return y(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.isCardAllowTrade(r),a=!s,l=o.cardMinimumKeepCount[i]||0;if(o.cardAllowTrade[i]=a,a){if(0===l){const d=o.getCardRarityCode(r),h=o.rarityService.getRarityOrder(d);console.log(h),o.cardMinimumKeepCount[i]=h>=5?1:2}}else o.cardMinimumKeepCount[i]=0;o.cdr.detectChanges();const c=yield o.supabaseService.toggleAllowTrade(o.currentUser.id,i,a);if(!c.success)return console.error("Error toggling allow trade:",c.error),o.cardAllowTrade[i]=s,o.cardMinimumKeepCount[i]=l,void o.cdr.detectChanges();const u=yield o.supabaseService.updateCardMinimumKeepCount(o.currentUser.id,i,o.cardMinimumKeepCount[i]);u.success||console.error("Error updating minimum keep count:",u.error)})()}updateCardMinimumKeepCount(r,o){var i=this;return y(function*(){if(i.isViewingOther||!i.currentUser||o<0)return;const s=i.getCardId(r),a=i.getCardMinimumKeepCount(r);i.cardMinimumKeepCount[s]=o,i.cdr.detectChanges();const l=yield i.supabaseService.updateCardMinimumKeepCount(i.currentUser.id,s,o);l.success||(console.error("Failed to update minimum keep count:",l.error),i.cardMinimumKeepCount[s]=a,i.cdr.detectChanges())})()}increaseOwned(r){var o=this;return y(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r),a=s+1;o.updateLocalQuantity(i,a,r),yield o.persistQuantity(i,a,s,r)})()}decreaseOwned(r){var o=this;return y(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r);if(0===s)return;const a=s-1;o.updateLocalQuantity(i,a,r),yield o.persistQuantity(i,a,s,r)})()}startEditingCount(r){this.isViewingOther||(this.editingCardId=this.getCardId(r),this.editingCountValue=this.getOwnedCount(r),this.cdr.detectChanges(),this.focusEditingInput())}cancelEditingCount(){this.editingCardId=null,this.editingCountValue=0,this.cdr.detectChanges()}commitCount(r){var o=this;return y(function*(){if(o.isViewingOther)return void o.cancelEditingCount();if(!o.currentUser)return;const i=o.getCardId(r);if(o.editingCardId!==i)return;const s=Math.max(0,Math.floor(Number(o.editingCountValue)||0)),a=o.getOwnedCount(r);s!==a?(o.updateLocalQuantity(i,s,r),yield o.persistQuantity(i,s,a,r),o.cancelEditingCount()):o.cancelEditingCount()})()}onCountInputKeydown(r,o){if("Tab"!==r.key)return;r.preventDefault();const i=this.getFlatOrderedCards(),s=this.getCardId(o),a=i.findIndex(c=>this.getCardId(c)===s);if(-1===a)return;const l=r.shiftKey?a-1:a+1;this.commitCount(o).then(()=>{const c=i[l];c&&this.startEditingCount(c)})}focusEditingInput(){const r=this.editingCardId;r&&setTimeout(()=>{const o=document.querySelector(`.card-item[data-cardid="${r}"] .count-input`);o&&(o.focus(),o.select())})}getFlatOrderedCards(){const r=this.getGroupedCards();return this.lastFlatOrder=r.flatMap(o=>o.cards),this.lastFlatOrder}updateLocalQuantity(r,o,i){if(o<=0)delete this.ownedCards[r],delete this.cardMinimumKeepCount[r],delete this.cardAllowTrade[r];else{if(this.ownedCards[r]=o,void 0===this.cardMinimumKeepCount[r]){const s=this.getCardRarityCode(i),a=this.rarityService.getRarityOrder(s);this.cardMinimumKeepCount[r]=a>=5?1:2}void 0===this.cardAllowTrade[r]&&(this.cardAllowTrade[r]=!0)}this.saveOwnedCards(),this.cdr.detectChanges()}persistQuantity(r,o,i,s){var a=this;return y(function*(){if(a.currentUser)try{if(yield a.supabaseService.updateCardQuantity(a.currentUser.id,r,o),0===i&&o>0){const l=a.getCardRarityCode(s),u=a.rarityService.getRarityOrder(l)>=5?1:2;yield a.supabaseService.updateCardMinimumKeepCount(a.currentUser.id,r,u)}}catch(l){console.error("Error updating card quantity in database:",l),i<=0?delete a.ownedCards[r]:a.ownedCards[r]=i,a.saveOwnedCards(),a.cdr.detectChanges()}})()}calculateStatistics(){this.totalCards=this.cards.length,this.ownedCount=Object.values(this.ownedCards).reduce((r,o)=>r+o,0),this.uniqueOwned=Object.keys(this.ownedCards).length,this.completionPercentage=this.totalCards>0?Math.round(this.uniqueOwned/this.totalCards*100):0}getSetName(r){const o=this.sets.find(i=>(i.code||"").toUpperCase()===(r||"").toUpperCase());return o?o.name:r}getSetShortName(r){const o=this.sets.find(i=>(i.code||"").toUpperCase()===(r||"").toUpperCase());return o?o.shortName:r}getFullRarityName(r){return this.rarityService.getStandardizedDisplayName(r)}getRarityClass(r){return{Common:"rarity-common",Uncommon:"rarity-uncommon",Rare:"rarity-rare","Double Rare":"rarity-double-rare","Art Rare":"rarity-art-rare","Super Rare":"rarity-super-rare","Special Art Rare":"rarity-special-art-rare","Immersive Rare":"rarity-immersive-rare","Crown Rare":"rarity-crown-rare",Shiny:"rarity-shiny","Shiny Super Rare":"rarity-shiny-super-rare"}[r]||"rarity-default"}toggleViewMode(){this.viewMode="grid"===this.viewMode?"list":"grid",console.log("View mode toggled to:",this.viewMode),this.cdr.detectChanges()}exportCollection(){if(this.isViewingOther)return void alert("Export is disabled when viewing another user's collection");let r="\ufeff";r+="Id,CardName,NumberOwn,Expansion,Pack,Rarity\n",this.cards.forEach(s=>{const a=this.getCardId(s),l=this.getOwnedCount(s),c=this.getCardRarityCode(s),u=c?this.rarityService.getSymbol(c):"Unknown",d=s.packs&&s.packs.length>0?s.packs[0]:"",h=this.getCardName(s).replace(/,/g,'""');r+=`${a},"${h}",${l},${s.set},"${d}",${u}\n`});const o=new Blob([r],{type:"text/csv;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="pokemon-tcg-collection.csv",i.click()}importCollection(r){var o=this;if(this.isViewingOther)return void alert("Import is disabled when viewing another user's collection");const i=r.target.files[0];if(i){const s=new FileReader;s.onload=function(){var a=y(function*(l){try{const d=(l.target?.result||"").split(/\r?\n/).filter(ue=>ue.trim().length>0);if(0===d.length)return void alert("CSV file appears to be empty.");const h=new Map;o.cards.forEach(ue=>{const De=o.getCardId(ue);h.set(o.normalizeId(De),De)});const f=o.parseCSVLine(d[0]),p=/(id|card|name|expansion|set|rarity|qty|quantity|owned|count|number|no)/i,_=f.some(ue=>p.test(ue)),v=_?1:0,w=_?o.buildHeaderMap(f):null;let k=0,E=0,N=0;const B={},le={},Cn=[];for(let ue=v;ue<d.length;ue++){const De=d[ue];try{const Ht=o.parseCSVLine(De),{cardId:bn,quantity:iU}=o.resolveCsvRow(Ht,w);if(!bn){E++;continue}const Jp=Math.max(0,Math.floor(Number(iU))||0),Ln=h.get(o.normalizeId(bn))||null;if(Ln){const nE=w?(()=>{const Ta=["allowtrade","allow_trade","trade","allow"];for(const Zp of Ta){const $r=w[Zp];if(void 0!==$r&&$r>=0&&$r<Ht.length){const Ia=(Ht[$r]||"").trim();if(Ia)return Ia}}})():void 0,Yp=void 0===nE||(o.parseBooleanLike(nE)??!0),rE=w?(()=>{const Ta=["minimumkeepcard","minimum_keep_card","min_keep","min_keep_count","minimum"];for(const Zp of Ta){const $r=w[Zp];if(void 0!==$r&&$r>=0&&$r<Ht.length){const Ia=(Ht[$r]||"").trim();if(Ia)return Ia}}})():void 0,oE=o.cards.find(Ta=>o.getCardId(Ta)===Ln)||null,sU=oE?o.getDefaultMinKeepForCard(oE):1,iE=void 0!==rE?Math.max(0,Math.floor(Number(rE)||0)):void 0,Qp=void 0!==iE?iE:sU;console.log(`Importing ${Ln}: owned=${Jp}, allow_trade=${Yp}, min_keep=${Qp}`),Jp>0?(o.ownedCards[Ln]=Jp,o.cardAllowTrade[Ln]=Yp,o.cardMinimumKeepCount[Ln]=Qp,B[Ln]=Yp,le[Ln]=Qp,Cn.push(Ln)):(delete o.ownedCards[Ln],delete o.cardAllowTrade[Ln],delete o.cardMinimumKeepCount[Ln]),k++}else console.log(bn),N++}catch(Ht){console.error(`Error parsing line: ${De}`,Ht),E++}}if(o.saveOwnedCards(),o.currentUser)try{const ue=yield o.supabaseService.bulkReplaceUserCollection(o.currentUser.id,o.ownedCards,{minKeep:le,allowTrade:B});if(ue.success){let De=`Import completed!\n${k} cards updated`;De+="\nCollection synced to database successfully",N>0&&(De+=`\n${N} rows referenced unknown cards (skipped)`),E>0&&(De+=`\n${E} parse errors encountered`),yield o.loadOwnedCards(),alert(De)}else{console.error("\u274c Failed to sync collection to database:",ue.error);let De=`Import completed!\n${k} cards updated locally`;De+=`\nDatabase sync failed: ${ue.error}`,N>0&&(De+=`\n${N} unknown cards (skipped)`),E>0&&(De+=`\n${E} parse errors encountered`),alert(De)}}catch(ue){console.error("\u274c Error during bulk sync:",ue);let De=`Import completed!\n${k} cards updated locally`;De+="\nDatabase sync failed - please try again",N>0&&(De+=`\n${N} unknown cards (skipped)`),E>0&&(De+=`\n${E} parse errors encountered`),alert(De)}else{let ue=`Import completed!\n${k} cards updated`;N>0&&(ue+=`\n${N} unknown cards (skipped)`),E>0&&(ue+=`\n${E} parse errors encountered`),alert(ue)}}catch(c){console.error("Failed to import collection:",c),alert("Failed to import collection. Please check the CSV file format.")}});return function(l){return a.apply(this,arguments)}}(),s.readAsText(i)}}viewOtherCollection(){var r=this;return y(function*(){const o=(r.otherUsername||"").trim();if(!o)return void alert("Please enter a username");if(r.currentUser&&o===r.currentUser.username)return void r.backToMyCollection();const i=yield r.supabaseService.getProfileByUsername(o);i?(r.isViewingOther=!0,r.viewingUser=i,yield r.loadOwnedCardsForUser(i.id,i.username)):alert(`User '${o}' not found`)})()}backToMyCollection(){var r=this;return y(function*(){r.isViewingOther=!1,r.viewingUser=null,r.otherUsername="",r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}buildHeaderMap(r){const o={};return r.forEach((i,s)=>{const a=i.trim().toLowerCase();o[a]=s}),o}resolveCsvRow(r,o){const i=c=>{if(o)for(const u of c){const d=o[u];if(void 0!==d&&d>=0&&d<r.length){const h=(r[d]||"").trim();if(h)return h}}},s=i(["numberown","quantity","qty","owned","count","number own","number_owned"]);let a=0;void 0!==s?a=Math.max(0,Math.floor(Number(s)||0)):r.length>=3&&(a=Math.max(0,Math.floor(Number(r[2])||0)));let l=i(["id","cardid","card id"]);if(!l){let c=i(["set","expansion"]),u=i(["number","no","card number","card no","card#"]);if(!c&&r.length>=4&&(c=(r[3]||"").trim()),!u&&r.length>=1){const d=(r[1]||"").trim();/^\d+/.test(d)&&(u=d)}if(c&&u){const d=this.mapToSetCode(c),h=this.extractLeadingInt(u);d&&null!==h&&(l=`${d}-${h}`)}}if(!l&&r.length>0){const c=(r[0]||"").trim();c&&(l=c)}return{cardId:l||null,quantity:a}}extractLeadingInt(r){const o=(r||"").match(/\d+/);return o?parseInt(o[0],10):null}mapToSetCode(r){const i=(r||"").trim().toUpperCase();if("PROMO-A"===i)return"P-A";const s=this.sets.find(l=>(l.code||"").toUpperCase()===i);if(s)return s.code;const a=this.sets.find(l=>(l.name||"").toUpperCase()===i);return a?a.code:null}normalizeId(r){let o=(r||"").trim().toUpperCase();return o=o.replace(/^PROMO-A(?=-)/,"P-A"),o}parseBooleanLike(r){const o=(r||"").trim().toLowerCase();return!!["true","1","yes","y"].includes(o)||!["false","0","no","n"].includes(o)&&null}getDefaultMinKeepForCard(r){const o=this.getCardRarityCode(r),i=o?this.rarityService.getSymbol(o):"";return new Set(["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca"]).has(i)?2:1}parseCSVLine(r){const o=[];let i="",s=!1;for(let a=0;a<r.length;a++){const l=r[a];'"'===l?s=!s:","!==l||s?i+=l:(o.push(i),i="")}return o.push(i),o}getCardImageUrl(r){return r}getCardDisplayName(r){return`${r.set}-${r.number} \u2013 ${this.getCardName(r)}`}onImageError(r,o){console.error("\u274c Image failed to load:",this.getCardImageName(o)),r.target.src=this.imageService.getPlaceholderImageUrl()}getGroupedCards(){if("all"!==this.selectedSet&&"none"!==this.groupBy)return this.getGroupedCardsByCategory();const r={};this.filteredCards.forEach(a=>{const l=a.set;r[l]||(r[l]=[]),r[l].push(a)});const o=(a,l)=>{const c=a.match(/^([A-Z]+)(\d+)([a-z]*)$/),u=l.match(/^([A-Z]+)(\d+)([a-z]*)$/);if(c&&u){if(c[1]!==u[1])return c[1].localeCompare(u[1]);const d=parseInt(c[2],10),h=parseInt(u[2],10);return d!==h?d-h:(c[3]||"").localeCompare(u[3]||"")}return a.localeCompare(l)},s=(a,l)=>a.number!==l.number?a.number-l.number:this.getCardName(a).localeCompare(this.getCardName(l));return Object.keys(r).sort((a,l)=>{const c=h=>this.isSpecialSet(h),u=c(a),d=c(l);return u&&!d?1:!u&&d?-1:"latest"===this.sortBy?o(l,a):o(a,l)}).map(a=>({groupTitle:a,cards:r[a].sort(s)}))}getGroupedCardsByCategory(){const r={};this.filteredCards.forEach(s=>{let a;switch(this.groupBy){case"rarity":const l=this.getCardRarityCode(s);a=`${l?this.rarityService.getSymbol(l):"Unknown"} ${l?this.rarityService.getDisplayName(l):"Unknown"}`;break;case"pack":a=s.packs&&s.packs.length>0?s.packs[0]:"No Pack";break;case"type":a=s.element?.toLowerCase().trim()||"No Type";break;default:a="All Cards"}r[a]||(r[a]=[]),r[a].push(s)});const o=Object.keys(r).sort((s,a)=>{if("rarity"===this.groupBy){const l=c=>{const u=c.split(" ")[0];return this.rarityService.getRarityOrder(u)||999};return l(s)-l(a)}return s.localeCompare(a)}),i=(s,a)=>s.number!==a.number?s.number-a.number:this.getCardName(s).localeCompare(this.getCardName(a));return o.map(s=>({groupTitle:s,cards:r[s].sort(i)}))}getGroupDisplayName(r,o){const i=this.getSetName(r);return i&&i!==r?`${r} - ${i}`:`Set ${r}`}getGroupCollectedCount(r){return`${r.filter(s=>this.getOwnedCount(s)>0).length}/${r.length}`}setOwnership(r){this.ownershipFilter!==r&&(this.ownershipFilter=r,this.applyFilters(),this.cdr.detectChanges())}setFoilFilter(r){this.foilFilter!==r&&(this.foilFilter=r,this.applyFilters(),this.cdr.detectChanges())}isRaritySelected(r){return this.selectedRarities.includes(r)}toggleRarity(r){const o=this.selectedRarities.indexOf(r);o>=0?this.selectedRarities.splice(o,1):this.selectedRarities.push(r),this.applyFilters(),this.cdr.detectChanges()}clearRarity(){this.selectedRarities.length>0&&(this.selectedRarities=[],this.applyFilters(),this.cdr.detectChanges())}isTypeSelected(r){return this.selectedTypes.includes(r)}toggleType(r){const o=this.selectedTypes.indexOf(r);o>=0?this.selectedTypes.splice(o,1):this.selectedTypes.push(r),this.applyFilters(),this.cdr.detectChanges()}clearTypes(){this.selectedTypes.length>0&&(this.selectedTypes=[],this.applyFilters(),this.cdr.detectChanges())}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){const r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);window.scrollTo({top:r,behavior:"smooth"})}getSetElements(){return Array.from(document.querySelectorAll(".cards-container .card-group"))}getCurrentSetIndex(r=80){const o=window.scrollY||window.pageYOffset||0,i=this.getSetElements();let s=-1;for(let a=0;a<i.length&&i[a].getBoundingClientRect().top+window.scrollY-r<=o;a++)s=a;return s}scrollToNextSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),i=Math.min(o+1,r.length-1);if(i>=0){const a=r[i].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}}scrollToPrevSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),a=r[Math.max(o-1,0)].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}ngOnDestroy(){this.selectedCardForModal&&(document.removeEventListener("keydown",this.handleModalKeydown),document.body.style.overflow="auto")}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(Xc),P(mD),P(mL),P(rs),P(xt),P(io),P(xi),P(eE))},t.\u0275cmp=Dr({type:t,selectors:[["app-card-collection"]],decls:102,vars:47,consts:[[1,"collection-container"],[1,"collection-actions"],[1,"actions-left"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","import-btn"],["type","file","accept",".csv","hidden","",3,"change"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"actions-right"],["title","Toggle view mode",1,"btn","btn-secondary",3,"click"],["class","view-other-banner","style","margin-bottom:12px; padding:10px 14px; border-radius:12px; background:rgba(46,204,113,0.12); border:1px solid rgba(46,204,113,0.35); display:flex; align-items:center; justify-content:space-between; gap:12px;",4,"ngIf"],["role","region","aria-label","Collection filters",1,"filters-panel"],[1,"filters-row"],["type","text","placeholder","Search cards\u2026","aria-label","Search cards",1,"filter-input",3,"ngModel","ngModelChange","input"],[1,"filters-row","wrap","sets-row"],[1,"sort-group"],["for","series-select"],["id","series-select","aria-label","Select series",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["for","set-select"],["id","set-select","aria-label","Select set",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["for","pack-select"],["id","pack-select","aria-label","Select pack",1,"filter-select","compact",3,"disabled","ngModel","ngModelChange","change"],[1,"filters-row","rarity-row"],["for","rarity-chips",1,"filter-label"],["id","rarity-chips","aria-label","Rarity filter",1,"segmented","multi","chips-scroll"],["type","button","title","All rarities",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngIf"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","types-row"],["for","types-chips",1,"filter-label"],["id","types-chips","aria-label","Types filter",1,"segmented","multi","chips-scroll"],["type","button","title","All types",1,"chip",3,"click"],["type","button","class","chip type-chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","wrap"],["for","sort-select"],["id","sort-select","aria-label","Sort order",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","latest"],["value","oldest"],["class","sort-group",4,"ngIf"],["role","tablist","aria-label","Ownership filter",1,"segmented","ownership"],["type","button",3,"click"],["role","tablist","aria-label","Foil filter",1,"segmented","foil"],[1,"row-spacer"],["type","button","aria-label","Reset filters",1,"btn","btn-outline","reset-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","sync-progress",4,"ngIf"],["class","cards-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["aria-label","Collection navigation controls",1,"fab-stack"],["type","button","title","Top",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-up"],["type","button","title","Previous set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-up"],["type","button","title","Next set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-down"],["type","button","title","Bottom",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-down"],["aria-label","Filter controls",1,"fab-stack-left"],["type","button","title","Filters",1,"fab","mobile-only",3,"click"],["aria-hidden","true",1,"fa","fa-filter"],["type","button","title","View Others Collection",1,"fab","mobile-only",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-user"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"view-other-banner",2,"margin-bottom","12px","padding","10px 14px","border-radius","12px","background","rgba(46,204,113,0.12)","border","1px solid rgba(46,204,113,0.35)","display","flex","align-items","center","justify-content","space-between","gap","12px"],[2,"background-color","transparent"],[1,"btn","btn-outline",3,"click"],[3,"value"],["type","button",1,"chip",3,"title","click"],["type","button",1,"chip","type-chip",3,"title","click"],[4,"ngIf","ngIfElse"],["normalType",""],[1,"trainer-label",3,"ngClass"],[1,"type-icon",3,"src","alt"],["for","group-select"],["id","group-select","aria-label","Group by",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","none"],["value","rarity"],["value","pack"],["value","type"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"btn","btn-primary",3,"click"],[1,"sync-progress"],[1,"sync-message"],[1,"sync-icon"],[1,"sync-text"],[1,"sync-title"],["class","sync-count",4,"ngIf"],[1,"sync-count"],[1,"cards-container"],["class","card-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-group"],[1,"group-header"],[1,"group-title"],[1,"group-stats"],["class","group-count","style","margin-left:10px; color:#b9eaff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffe066;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#f7a6ff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffd700;",4,"ngIf"],[1,"group-count"],["class","cards-grid",4,"ngIf"],["class","cards-list",4,"ngIf"],[1,"group-count",2,"margin-left","10px","color","#b9eaff"],[1,"group-count",2,"margin-left","10px","color","#ffe066"],[1,"group-count",2,"margin-left","10px","color","#f7a6ff"],[1,"group-count",2,"margin-left","10px","color","#ffd700"],[1,"cards-grid"],["class","card-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-item"],[1,"card-image"],["loading","lazy",1,"pokemon-card-img",2,"cursor","pointer",3,"src","alt","error","click"],[1,"card-info"],[1,"card-title"],[1,"ownership-controls"],[1,"count-btn","decrease",3,"disabled","click"],["displayCount",""],[1,"count-btn","increase",3,"disabled","click"],["class","minimum-keep-controls",4,"ngIf"],["type","number","min","0",1,"count-input",3,"ngModel","ngModelChange","keydown.enter","keydown","keydown.escape","blur"],["type","button",1,"count-display",3,"disabled","click"],[1,"minimum-keep-controls"],["type","button",1,"lock-toggle-btn",3,"title","click"],["type","number","min","0","placeholder","0",1,"minimum-keep-input",3,"value","max","disabled","change"],[1,"cards-list"],["class","card-list-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-list-item"],[1,"card-list-image",3,"click"],["loading","lazy",1,"card-list-img",3,"src","alt","error"],[1,"card-list-details"],[1,"card-list-name"],[1,"card-list-meta"],[1,"card-list-set"],["class","card-list-packs",4,"ngIf"],[1,"card-list-controls"],[1,"card-list-quantity"],["displayCountList",""],["class","card-list-keep",4,"ngIf"],[1,"card-list-packs"],[1,"card-list-keep"],["type","number","min","0","placeholder","0",1,"minimum-keep-input-list",3,"value","max","disabled","change"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-backdrop",3,"click"],[1,"modal-content","view-others-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"view-others-config"],[1,"config-section"],["for","other-username-input",1,"config-label"],["type","text","id","other-username-input","placeholder","Enter username to view their collection\u2026",1,"config-input-wide",3,"ngModel","ngModelChange","keydown.enter"],[1,"config-hint"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],[1,"modal-overlay",3,"click"],[1,"modal-content","card-modal",3,"click"],["aria-label","Close modal",1,"modal-close",3,"click"],[1,"card-modal-image",2,"display","flex","align-items","center","justify-content","center","gap","16px"],["aria-label","Previous card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"modal-card-image",3,"src","alt"],["aria-label","Next card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"card-modal-info"],["class","modal-pack-badges",4,"ngIf"],[1,"modal-pack-badges"],["class","pack-badge",4,"ngFor","ngForOf"],[1,"pack-badge"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),j("click",function(){return i.exportCollection()}),b(4," \u{1f4e4} Export Collection "),m(),g(5,"label",4),b(6," \u{1f4e5} Import Collection "),g(7,"input",5),j("change",function(a){return i.importCollection(a)}),m()(),g(8,"button",6),j("click",function(){return i.openViewOthersModal()}),b(9," \u{1f464} View Others Collection "),m()(),g(10,"div",7)(11,"button",8),j("click",function(){return i.toggleViewMode()}),b(12),m()()(),G(13,kV,8,1,"div",9),g(14,"div",10)(15,"div",11)(16,"input",12),j("ngModelChange",function(a){return i.searchTerm=a})("input",function(){return i.onSearchChange()}),m()(),g(17,"div",13)(18,"div",14)(19,"label",15),b(20,"Series"),m(),g(21,"select",16),j("ngModelChange",function(a){return i.selectedSeries=a})("change",function(){return i.onSeriesChange()}),g(22,"option",17),b(23,"All Series"),m(),G(24,RV,2,2,"option",18),m()(),g(25,"div",14)(26,"label",19),b(27),m(),g(28,"select",20),j("ngModelChange",function(a){return i.selectedSet=a})("change",function(){return i.onSetChange()}),g(29,"option",17),b(30),m(),G(31,NV,2,2,"option",18),m()(),g(32,"div",14)(33,"label",21),b(34),m(),g(35,"select",22),j("ngModelChange",function(a){return i.selectedPack=a})("change",function(){return i.applyFilters()}),g(36,"option",17),b(37),m(),G(38,FV,2,2,"option",18),m()()(),g(39,"div",23)(40,"label",24),b(41,"Rarity"),m(),g(42,"div",25)(43,"button",26),j("click",function(){return i.clearRarity()}),b(44,"ALL"),m(),G(45,LV,2,3,"button",27),G(46,jV,2,4,"button",28),m()(),g(47,"div",29)(48,"label",30),b(49,"Types"),m(),g(50,"div",31)(51,"button",32),j("click",function(){return i.clearTypes()}),b(52," ALL "),m(),G(53,HV,4,6,"button",33),m()(),g(54,"div",34)(55,"div",14)(56,"label",35),b(57,"Sort By"),m(),g(58,"select",36),j("ngModelChange",function(a){return i.sortBy=a})("change",function(){return i.applyFilters()}),g(59,"option",37),b(60,"Latest Set"),m(),g(61,"option",38),b(62,"Oldest Set"),m()()(),G(63,zV,12,1,"div",39),g(64,"div",40)(65,"button",41),j("click",function(){return i.setOwnership("all")}),b(66,"ALL"),m(),g(67,"button",41),j("click",function(){return i.setOwnership("missing")}),b(68,"MISSING"),m(),g(69,"button",41),j("click",function(){return i.setOwnership("owned")}),b(70,"OWNED"),m()(),g(71,"div",42)(72,"button",41),j("click",function(){return i.setFoilFilter("all")}),b(73,"ALL"),m(),g(74,"button",41),j("click",function(){return i.setFoilFilter("no-foil")}),b(75,"NO FOIL"),m(),g(76,"button",41),j("click",function(){return i.setFoilFilter("foil-only")}),b(77,"FOIL ONLY"),m()(),lt(78,"div",43),g(79,"button",44),j("click",function(){return i.clearFilters()}),b(80,"Reset"),m()()(),G(81,GV,4,0,"div",45),G(82,qV,5,1,"div",46),G(83,KV,8,2,"div",47),G(84,d$,2,2,"div",48),G(85,h$,9,0,"div",49),g(86,"div",50)(87,"button",51),j("click",function(){return i.scrollToTop()}),lt(88,"i",52),m(),g(89,"button",53),j("click",function(){return i.scrollToPrevSet()}),lt(90,"i",54),m(),g(91,"button",55),j("click",function(){return i.scrollToNextSet()}),lt(92,"i",56),m(),g(93,"button",57),j("click",function(){return i.scrollToBottom()}),lt(94,"i",58),m()(),g(95,"div",59)(96,"button",60),j("click",function(){return i.toggleFilters()}),lt(97,"i",61),m(),g(98,"button",62),j("click",function(){return i.openViewOthersModal()}),lt(99,"i",63),m()(),G(100,f$,20,2,"div",64),G(101,m$,14,4,"div",65),m()),2&o&&(C(8),O("disabled",i.isViewingOther),C(4),ke(" ","grid"===i.viewMode?"\u{1f4cb} List View":"\u{1f5bc}\ufe0f Grid View"," "),C(1),O("ngIf",i.isViewingOther),C(1),Le("collapsed",!i.filtersOpen),C(2),O("ngModel",i.searchTerm),C(5),O("ngModel",i.selectedSeries),C(3),O("ngForOf",i.availableSeries),C(3),ke("Set ","all"!==i.selectedSeries?"(in "+i.selectedSeries+")":"",""),C(1),O("ngModel",i.selectedSet),C(2),gt("all"!==i.selectedSeries?"All Sets in "+i.selectedSeries:"All Sets"),C(1),O("ngForOf",i.availableSets),C(3),ke("Pack ","all"!==i.selectedSet?"(in "+i.getSetName(i.selectedSet)+")":"(select a set first)",""),C(1),O("disabled","all"===i.selectedSet)("ngModel",i.selectedPack),C(2),gt("all"!==i.selectedSet?"All Packs in "+i.getSetName(i.selectedSet):"Select a set first"),C(1),O("ngForOf",i.availablePacks),C(5),Le("active",0===i.selectedRarities.length),C(2),O("ngIf",!i.hasRaritySymbol("\u{1f308}")),C(1),O("ngForOf",i.availableRaritySymbols),C(5),Le("active",0===i.selectedTypes.length),C(2),O("ngForOf",i.availableTypes),C(5),O("ngModel",i.sortBy),C(5),O("ngIf","all"!==i.selectedSet),C(2),Le("active","all"===i.ownershipFilter),C(2),Le("active","missing"===i.ownershipFilter),C(2),Le("active","owned"===i.ownershipFilter),C(3),Le("active","all"===i.foilFilter),C(2),Le("active","no-foil"===i.foilFilter),C(2),Le("active","foil-only"===i.foilFilter),C(5),O("ngIf",i.loading),C(1),O("ngIf",i.error),C(1),O("ngIf",i.syncingCards),C(1),O("ngIf",!i.loading&&!i.error),C(1),O("ngIf",!i.loading&&!i.error&&0===i.getGroupedCards().length),C(11),Kt("aria-pressed",i.filtersOpen),C(2),O("disabled",i.isViewingOther),C(2),O("ngIf",i.showViewOthersModal),C(1),O("ngIf",i.selectedCardForModal))},dependencies:[rc,oc,Ti,Sc,xc,Ai,Ec,Ni,ra,Mc,Ri],styles:['.group-header[_ngcontent-%COMP%]{flex-wrap:wrap}.group-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.group-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1rem;padding:2px 8px;border-radius:6px;background:rgba(255,255,255,.04);margin-bottom:2px}@media (max-width:600px){.group-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.group-stats[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:6px;font-size:.95rem;margin-top:4px}.group-count[_ngcontent-%COMP%]{font-size:.95rem;padding:2px 6px;margin-bottom:2px}}.chip.active[_ngcontent-%COMP%]   .trainer-item[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-tool[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-supporter[_ngcontent-%COMP%]{color:#fff!important}.trainer-item[_ngcontent-%COMP%], .trainer-tool[_ngcontent-%COMP%], .trainer-supporter[_ngcontent-%COMP%]{font-family:Roboto Condensed,Arial Narrow,sans-serif;font-weight:1000;font-style:italic;font-size:13px;text-transform:uppercase;letter-spacing:1px;-webkit-font-smoothing:antialiased;display:inline-block;margin:0 2px;-webkit-user-select:none;user-select:none;transition:filter .15s ease-in-out;filter:brightness(1.12)}.trainer-item[_ngcontent-%COMP%]{color:#2596be}.trainer-tool[_ngcontent-%COMP%]{color:#78619a}.trainer-supporter[_ngcontent-%COMP%]{color:#dc6c40}.collection-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:transparent;min-height:100vh;color:#fff}.sync-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,#1a4d3a 0%,#0f2d1f 100%);border:1px solid #28a745;border-radius:10px;padding:16px 22px;margin-bottom:20px;box-shadow:0 4px 18px #28a74540}.sync-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.sync-icon[_ngcontent-%COMP%]{font-size:22px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.sync-text[_ngcontent-%COMP%]{flex:1}.sync-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#28a745;margin-bottom:2px}.sync-count[_ngcontent-%COMP%]{font-size:12px;color:#9fb8aa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.collection-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:30px;flex-wrap:wrap}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.view-other-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.view-other-controls[_ngcontent-%COMP%]   .search-input.compact[_ngcontent-%COMP%]{width:auto;max-width:240px;min-width:200px;padding:8px 12px;border-radius:8px}@media (max-width: 768px){.collection-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{justify-content:space-between}}.import-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d;border:1px solid #404040}.filters-panel[_ngcontent-%COMP%]{border:1px solid #666;border-radius:10px;padding:14px;margin-bottom:20px;background-color:#12151c;background:#12151c;box-shadow:0 8px 18px #00000059}.filters-header[_ngcontent-%COMP%]{color:#ddd;font-weight:600;margin-bottom:10px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.filters-row.wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.rarity-row[_ngcontent-%COMP%]{align-items:flex-start;gap:10px}.filters-row.rarity-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filters-row.footer[_ngcontent-%COMP%]{justify-content:space-between}.filter-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.filter-select.compact[_ngcontent-%COMP%]{width:240px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.sort-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#cfcfcf;margin-right:8px}.segmented[_ngcontent-%COMP%]{display:inline-flex;background:#1b1e24;border:1px solid #4a4f5a;border-radius:6px;overflow:hidden}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;background:transparent;color:#cfd6e4;border:none;cursor:pointer}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-left:1px solid #4a4f5a}.segmented[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff}.segmented.multi[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;background:transparent;border:none;overflow-x:auto;padding:4px 2px 2px;-webkit-overflow-scrolling:touch}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#3a3f48;border-radius:4px}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{border:1px solid #3d4350;background:#171a20;color:#cfd6e4;border-radius:999px;padding:6px 10px;font-size:12px;line-height:1}.segmented.multi[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);border-color:#7056b1;color:#fff}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4b90ff;outline-offset:2px}.type-chip[_ngcontent-%COMP%]{padding:6px 8px!important;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.type-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:contain}.ownership[_ngcontent-%COMP%]{margin-left:4px}.row-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.reset-btn[_ngcontent-%COMP%]{white-space:nowrap}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;align-items:center;justify-content:center;padding:16px}.modal-content[_ngcontent-%COMP%]{width:min(520px,92vw);max-height:85vh;overflow:auto;background:#121317;border:1px solid #3e4654;border-radius:10px;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #2c3240}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#eaeaea}.modal-close[_ngcontent-%COMP%]{background:transparent;border:none;color:#aaa;font-size:18px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #2c3240}.trade-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.trade-config[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.config-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.config-label[_ngcontent-%COMP%]{font-weight:600;color:#ddd;font-size:14px}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #4a4f5a;border-radius:6px;background:#1b1e24;color:#cfd6e4;cursor:pointer;transition:all .2s ease}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.rarity-chips[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:var(--header-gradient);border-color:#6f79d9;color:#fff}.config-input[_ngcontent-%COMP%]{width:80px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-input-wide[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-hint[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:420px;margin:0 auto}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #444;border-radius:25px;background-color:#333;color:#fff;font-size:16px;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 10px #007bff4d}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ccc;letter-spacing:.5px}.filter-dependency[_ngcontent-%COMP%]{font-size:11px;color:#007bff;font-weight:400;text-transform:none;font-style:italic}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #444;border-radius:8px;background-color:#333;color:#fff;font-size:14px;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:hover{border-color:#555;background-color:#3a3a3a}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff33}.filter-select[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background-color:#2a2a2a;border-color:#333;color:#888}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.results-info[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:12px 20px;border-radius:8px;text-align:center;border:1px solid #333}.results-text[_ngcontent-%COMP%]{color:#ccc;font-size:14px;font-weight:500}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #333;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.cards-container[_ngcontent-%COMP%]{width:100%}.card-group[_ngcontent-%COMP%]{margin-bottom:40px}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:2px solid #333;flex-wrap:wrap;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin:0;text-shadow:1px 1px 2px rgba(0,0,0,.5);flex:1;min-width:280px;position:relative;line-height:1.3}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-shrink:0}.group-count[_ngcontent-%COMP%]{color:#ccc;font-size:14px;padding:4px 8px;background-color:#333;border-radius:4px;white-space:nowrap}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:18px}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;overflow:hidden;transition:transform .2s ease}.card-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.cards-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.card-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px 16px;background:linear-gradient(135deg,rgba(30,30,40,.6) 0%,rgba(20,20,30,.6) 100%);border:1px solid rgba(100,100,120,.3);border-radius:10px;transition:all .2s ease}.card-list-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,rgba(40,40,50,.7) 0%,rgba(30,30,40,.7) 100%);border-color:#78789680;transform:translate(4px)}.card-list-item.no-quantity[_ngcontent-%COMP%]{opacity:.5}.card-list-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.7}.card-list-image[_ngcontent-%COMP%]{flex-shrink:0;width:60px;height:84px;border-radius:6px;overflow:hidden;cursor:pointer;transition:transform .2s ease}.card-list-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-list-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:6px}.card-list-img.no-quantity[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-list-details[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}.card-list-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-list-meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:12px;color:#aaa}.card-list-set[_ngcontent-%COMP%]{font-weight:500;color:#7a9bff}.card-list-packs[_ngcontent-%COMP%]{color:#999}.card-list-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:flex-end}.card-list-quantity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.card-list-keep[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:4px 8px;background:rgba(30,30,40,.8);border:1px solid rgba(100,100,120,.3);border-radius:6px}.card-list-keep[_ngcontent-%COMP%]   .keep-icon[_ngcontent-%COMP%]{font-size:11px;opacity:.7}.minimum-keep-input-list[_ngcontent-%COMP%]{width:45px;padding:3px 6px;border-radius:4px;border:1px solid rgba(100,120,150,.4);background:rgba(40,40,50,.9);color:#fff;font-size:12px;font-weight:600;text-align:center;outline:none;transition:all .2s ease}.minimum-keep-input-list[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.minimum-keep-input-list[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.card-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2 / 3;overflow:hidden;padding:10px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.pokemon-card-img[_ngcontent-%COMP%]{width:90%;object-fit:cover;object-position:center;border-radius:10px;transition:transform .3s ease,opacity .3s ease;background-color:#222}.card-item[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{transform:scale(1.05)}.pokemon-card-img[_ngcontent-%COMP%]:not([src]), .pokemon-card-img[src=""][_ngcontent-%COMP%]{opacity:.5;background:linear-gradient(45deg,#333,#555,#333);background-size:200% 200%;animation:_ngcontent-%COMP%_loading-shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loading-shimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.card-item.no-quantity[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.9}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(0%) opacity(.8)}.card-item.no-quantity[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{color:#888}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]:hover   .count-display[_ngcontent-%COMP%]{color:#bbb}.card-info[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pack-badges[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.pack-badge[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff;padding:2px 6px;border-radius:10px;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.ownership-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.count-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #555;border-radius:4px;background-color:#444;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;transition:all .2s ease}.count-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#555;border-color:#666}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.count-btn.decrease[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;border-color:#dc3545}.count-btn.increase[_ngcontent-%COMP%]:hover{background-color:#28a745;border-color:#28a745}.count-display[_ngcontent-%COMP%]{min-width:32px;padding:4px 10px;border-radius:6px;border:1px dashed #666;background:rgba(51,51,51,.65);color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.count-display[_ngcontent-%COMP%]:hover, .count-display[_ngcontent-%COMP%]:focus-visible{border-color:#007bff;background:rgba(0,123,255,.2);outline:none}.count-input[_ngcontent-%COMP%]{width:56px;padding:4px 8px;border-radius:6px;border:1px solid #777;background:rgba(24,24,24,.95);color:#fff;font-size:14px;font-weight:600;text-align:center;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.minimum-keep-controls[_ngcontent-%COMP%]{margin-top:8px;width:100%;background:linear-gradient(135deg,rgba(30,30,40,.95) 0%,rgba(20,20,30,.95) 100%);border:1px solid rgba(100,100,120,.4);border-radius:8px;padding:8px 10px;display:flex;flex-direction:row;align-items:center;gap:8px;box-shadow:0 2px 6px #0000004d}.keep-icon[_ngcontent-%COMP%]{font-size:13px;opacity:.8;flex-shrink:0}.lock-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:16px;padding:0;margin:0 4px 0 0;display:flex;align-items:center;justify-content:center;flex-shrink:0;opacity:.8;transition:opacity .2s,transform .1s}.lock-toggle-btn[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.lock-toggle-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.minimum-keep-label[_ngcontent-%COMP%]{font-size:11px;color:#b8b8c8;font-weight:600;text-transform:uppercase;letter-spacing:.5px;flex-shrink:0}.minimum-keep-input[_ngcontent-%COMP%]{flex:1;padding:6px 10px;border-radius:6px;border:1px solid rgba(100,120,150,.5);background:rgba(40,40,50,.9);color:#fff;font-size:14px;font-weight:700;text-align:center;outline:none;transition:all .2s ease;box-shadow:inset 0 1px 3px #0006}.minimum-keep-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;background:rgba(45,45,60,1);box-shadow:0 0 0 2px #4a9eff33,inset 0 1px 3px #0006}.minimum-keep-input[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#788caab3;background:rgba(45,45,55,.95)}.minimum-keep-input[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;background:rgba(30,30,35,.7)}.count-input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 6px #007bff4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.pokemon-card-img.lazy-loading[_ngcontent-%COMP%]{opacity:.6;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.pokemon-card-img.lazy-loaded[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}.pokemon-card-img.lazy-error[_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 1200px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (max-width: 768px){.collection-container[_ngcontent-%COMP%]{padding:15px}.filters-panel[_ngcontent-%COMP%]{border-radius:10px;padding:12px}.filters-header[_ngcontent-%COMP%]{margin-bottom:8px}.filters-row[_ngcontent-%COMP%]{gap:10px}.filter-select.compact[_ngcontent-%COMP%]{width:100%}.filter-input[_ngcontent-%COMP%]{min-width:0}.rarity-row[_ngcontent-%COMP%], .types-row[_ngcontent-%COMP%]{flex-direction:column}.chips-scroll[_ngcontent-%COMP%]{width:100%}.ownership[_ngcontent-%COMP%]{width:100%;justify-content:space-between;display:flex}.collection-actions[_ngcontent-%COMP%]   .actions-left[_ngcontent-%COMP%], .filters-panel.collapsed[_ngcontent-%COMP%]{display:none}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}.card-list-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.card-list-image[_ngcontent-%COMP%]{width:80px;height:112px}.card-list-details[_ngcontent-%COMP%]{width:100%}.card-list-controls[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;align-items:center}.ownership-controls[_ngcontent-%COMP%]{gap:8px}.filters-section[_ngcontent-%COMP%]{padding:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-box[_ngcontent-%COMP%]{max-width:100%}.group-header[_ngcontent-%COMP%]{padding:10px 0}.group-title[_ngcontent-%COMP%]{font-size:1.3rem;padding-left:24px}.group-title[_ngcontent-%COMP%]:before{font-size:1rem}}@media (max-width: 540px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.card-list-item[_ngcontent-%COMP%]{padding:10px 12px}.card-list-name[_ngcontent-%COMP%]{font-size:14px}.card-list-meta[_ngcontent-%COMP%]{font-size:11px}.filters-row[_ngcontent-%COMP%]{margin-bottom:8px}.reset-btn[_ngcontent-%COMP%]{width:100%}.count-display[_ngcontent-%COMP%], .count-input[_ngcontent-%COMP%]{width:48px}.filters-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.filter-label[_ngcontent-%COMP%]{font-size:12px}.group-title[_ngcontent-%COMP%]{font-size:1.15rem}.group-title[_ngcontent-%COMP%]:before{font-size:.9rem}}.fab-stack[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:24px;display:flex;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}.fab[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:1px solid rgba(255,255,255,.18);background:var(--header-gradient);color:#fff;font-size:18px;cursor:pointer;box-shadow:0 10px 24px #070c1859;display:inline-flex;align-items:center;justify-content:center;transition:transform .14s ease,box-shadow .14s ease,border-color .14s ease,filter .14s ease}.fab[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 14px 28px #070c1873;filter:brightness(1.05)}.fab-stack-left[_ngcontent-%COMP%]{position:fixed;left:24px;bottom:24px;display:none;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{right:16px;bottom:16px;gap:8px}.fab[_ngcontent-%COMP%]{width:44px;height:44px}.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.fab-stack-left[_ngcontent-%COMP%]{display:flex;left:16px;bottom:16px}}.fab.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex!important}.fab-stack-left[_ngcontent-%COMP%]{display:flex!important}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px}.modal-content.card-modal[_ngcontent-%COMP%]{background:#2a2d3a;border-radius:12px;max-width:500px;max-height:90vh;width:100%;position:relative;overflow:hidden;box-shadow:0 20px 40px #00000080}.modal-close[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:rgba(0,0,0,.7);border:none;border-radius:50%;width:32px;height:32px;color:#fff;font-size:18px;cursor:pointer;z-index:10001;display:flex;align-items:center;justify-content:center;transition:background .2s ease}.modal-close[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.9)}.card-modal-image[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px 20px 10px}.modal-card-image[_ngcontent-%COMP%]{max-width:100%;height:auto;max-height:60vh;border-radius:8px;box-shadow:0 8px 16px #0000004d}.card-modal-info[_ngcontent-%COMP%]{padding:10px 20px 20px;text-align:center}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px;font-weight:600}.modal-pack-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}.modal-pack-badges[_ngcontent-%COMP%]   .pack-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content.card-modal[_ngcontent-%COMP%]{max-width:100%;max-height:95vh}.modal-card-image[_ngcontent-%COMP%]{max-height:70vh}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}'],changeDetection:0}),n})();function y$(n,t){1&n&&(g(0,"div",9),lt(1,"div",10),g(2,"p"),b(3,"Calculating pack suggestions..."),m()())}function v$(n,t){1&n&&(g(0,"div",11)(1,"p"),b(2,"Please sign in to get personalized pack suggestions."),m()())}function C$(n,t){if(1&n&&(g(0,"option",19),b(1),m()),2&n){const e=t.$implicit;O("value",e),C(1),gt(e)}}function b$(n,t){if(1&n){const e=Ne();g(0,"div",38),j("click",function(){const i=Q(e).$implicit,s=T(2).$implicit;return Z(T(2).onRarityClick(s,i))}),g(1,"span",39),b(2),m(),g(3,"span",40),b(4),m(),g(5,"span",41),b(6),m()()}if(2&n){const e=t.$implicit,r=T(4);Le("complete",100===e.percentage),C(1),O("title",r.getRarityDisplayName(e.rarity)),C(1),ke(" ",e.rarity," "),C(2),Wr(" ",e.owned,"/",e.total," "),C(1),Le("complete",100===e.percentage),C(1),ke(" ",e.percentage.toFixed(0),"% ")}}function w$(n,t){if(1&n&&(g(0,"div",35)(1,"h5"),b(2,"Rarity Breakdown:"),m(),g(3,"div",36),G(4,b$,7,9,"div",37),m()()),2&n){const e=T().$implicit;C(4),O("ngForOf",e.rarityBreakdown)}}function D$(n,t){if(1&n&&(g(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"h4",24),b(5),m()(),g(6,"div",25)(7,"span",26),b(8),m(),g(9,"span",27),b(10),m()()(),g(11,"div",28)(12,"div",29)(13,"span",30),b(14,"New Card Chance"),m(),g(15,"span",31),b(16),m()(),g(17,"div",29)(18,"span",30),b(19,"Missing Cards"),m(),g(20,"span",32),b(21),m()(),g(22,"div",29)(23,"span",30),b(24,"Collection"),m(),g(25,"span",33),b(26),m()()(),G(27,w$,5,1,"div",34),m()()),2&n){const e=t.$implicit,r=t.index;C(5),Wr("",r+1,". ",e.packName,""),C(3),gt(e.setCode),C(2),gt(e.setName),C(6),ke("",e.newCardChance.toFixed(1),"%"),C(5),Wr("",e.missingCards,"/",e.totalCards,""),C(5),ke("",e.percentage.toFixed(1),"% complete"),C(1),O("ngIf",e.rarityBreakdown.length>0)}}function E$(n,t){if(1&n){const e=Ne();g(0,"div",12)(1,"div",13)(2,"h3"),b(3),m(),g(4,"select",14),j("ngModelChange",function(o){return Q(e),Z(T().selectedSeriesFilter=o)})("change",function(){return Q(e),Z(T().onSeriesFilterChange())}),g(5,"option",15),b(6,"Top 3 Suggestions"),m(),g(7,"optgroup",16),G(8,C$,2,2,"option",17),m()()(),G(9,D$,28,9,"div",18),m()}if(2&n){const e=T();C(3),ke("Recommended Packs (",e.packSuggestions.length," available)"),C(1),O("ngModel",e.selectedSeriesFilter),C(4),O("ngForOf",e.seriesList),C(1),O("ngForOf",e.packSuggestions)}}function S$(n,t){1&n&&(g(0,"div",42)(1,"p"),b(2,"\u{1f389} Congratulations! You have completed your collection according to the selected algorithm."),m(),g(3,"p"),b(4,"Try a different algorithm to find more cards to collect."),m()())}function x$(n,t){1&n&&(g(0,"span"),b(1,"\u{1f6ab}"),m())}function M$(n,t){1&n&&(g(0,"span"),b(1,"\u{1f4e6}"),m())}function T$(n,t){1&n&&(g(0,"span"),b(1,"\u2b50"),m())}function I$(n,t){1&n&&(g(0,"span"),b(1,"\u{1f48e}"),m())}function O$(n,t){1&n&&(g(0,"span"),b(1,"\u{1f451}"),m())}const A$=function(n,t){return{"fab-excluding":n,"fab-including":t}},P$=function(n,t,e){return{"fab-tradable":n,"fab-common":t,"fab-all":e}};let k$=(()=>{const t=class{constructor(r,o,i,s,a){this.pokemonDataService=r,this.dataManager=o,this.supabaseService=i,this.cdr=s,this.router=a,this.cards=[],this.sets=[],this.rarityMapping={},this.currentUser=null,this.ownedCards={},this.selectedAlgorithm="new-card-chance",this.excludeSpecialPacks=!0,this.rarityFilterMode="tradable",this.selectedSeriesFilter="top-3",this.seriesList=[],this.packSuggestions=[],this.isLoading=!0}ngOnInit(){this.loadData()}onRarityClick(r,o){const s=this.sets.find(a=>a.code===r.setCode)?.series||"all";this.router.navigate(["/collection"],{queryParams:{series:s,set:r.setCode,pack:r.packName,rarity:o.rarity}})}loadData(){var r=this;return y(function*(){r.isLoading=!0;try{r.currentUser=yield r.supabaseService.getCurrentUser();const o=yield r.pokemonDataService.loadAllData().toPromise();o&&(r.cards=o.cards,r.sets=o.sets,r.rarityMapping=o.rarities),r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id)),r.seriesList=Array.from(new Set(r.sets.map(i=>i.series))).sort(),r.calculateSuggestions()}catch(o){console.error("Error loading data:",o)}finally{r.isLoading=!1,r.cdr.markForCheck()}})()}onExcludeSpecialPacksChange(){this.calculateSuggestions(),this.cdr.markForCheck()}onRarityFilterChange(){this.rarityFilterMode="tradable"===this.rarityFilterMode?"common":"common"===this.rarityFilterMode?"all":"tradable",this.calculateSuggestions(),this.cdr.markForCheck()}onSeriesFilterChange(){this.calculateSuggestions(),this.cdr.markForCheck()}calculateSuggestions(){if(!this.cards.length||!this.sets.length)return;const r=[],o="top-3"===this.selectedSeriesFilter?this.sets:this.sets.filter(a=>a.series===this.selectedSeriesFilter),i=new Set;o.forEach(a=>{a.packs?.forEach(l=>{this.excludeSpecialPacks&&this.isSpecialPack(l)||i.add(l)})}),i.forEach(a=>{const l=this.calculatePackSuggestion(a);l&&r.push(l)});const s=r.sort((a,l)=>l.newCardChance-a.newCardChance);this.packSuggestions="top-3"===this.selectedSeriesFilter?s.slice(0,3):s}calculatePackSuggestion(r){let o=this.cards.filter(f=>f.packs&&f.packs.includes(r));if(0===o.length)return null;const i=this.sets.find(f=>f.packs&&f.packs.includes(r));if(!i)return null;if("tradable"===this.rarityFilterMode){const f=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606"];o=o.filter(p=>f.includes(p.rarity))}else if("common"===this.rarityFilterMode){const f=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606"];o=o.filter(p=>f.includes(p.rarity))}const s=o,l=s.filter(f=>0===this.getOwnedCount(f)).length,c=s.length,u=c>0?(c-l)/c*100:0,d=c>0?l/c*100:0,h=this.calculateRarityBreakdown(s);return{setCode:i.code,setName:i.name,packName:r,missingCards:l,totalCards:c,percentage:u,newCardChance:d,rarityBreakdown:h}}calculateRarityBreakdown(r){const o=[...new Set(r.map(s=>s.rarity))],i=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2606\u2606\u2606","\u{1f451}","\u2735","\u2735\u2735"];return o.sort((s,a)=>{const l=i.indexOf(s),c=i.indexOf(a);return(-1===l?999:l)-(-1===c?999:c)}),o.map(s=>{const a=r.filter(d=>d.rarity===s),l=a.filter(d=>this.getOwnedCount(d)>0).length,c=a.length;return{rarity:s,owned:l,total:c,percentage:c>0?l/c*100:0}})}getOwnedCount(r){return this.currentUser&&this.ownedCards[this.getCardId(r)]||0}loadOwnedCardsForUser(r){var o=this;return y(function*(){try{const{quantities:i}=yield o.supabaseService.syncUserCollection(r);o.ownedCards=i}catch(i){console.error("Error loading owned cards:",i),o.ownedCards={}}})()}getCardId(r){return`${r.set}-${r.number}`}isSpecialPack(r){return[/Deluxe/i,/vol/i].some(i=>i.test(r))}getRarityDisplayName(r){for(const[o,i]of Object.entries(this.rarityMapping))if(i.split(" - ")[0]===r)return i;return r}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(Xc),P(mD),P(rs),P(xi),P(xt))},t.\u0275cmp=Dr({type:t,selectors:[["app-suggestion"]],decls:13,vars:20,consts:[[1,"suggestion-container"],[1,"filter-section"],["class","loading-state",4,"ngIf"],["class","no-user-state",4,"ngIf"],["class","suggestions-list",4,"ngIf"],["class","no-suggestions",4,"ngIf"],[1,"fab","fab-special",3,"ngClass","title","click"],[4,"ngIf"],[1,"fab","fab-rarity",3,"ngClass","title","click"],[1,"loading-state"],[1,"spinner"],[1,"no-user-state"],[1,"suggestions-list"],[1,"suggestions-header-row"],[1,"set-filter",3,"ngModel","ngModelChange","change"],["value","top-3"],["label","Series"],[3,"value",4,"ngFor","ngForOf"],["class","suggestion-item",4,"ngFor","ngForOf"],[3,"value"],[1,"suggestion-item"],[1,"suggestion-content"],[1,"suggestion-header"],[1,"header-left"],[1,"pack-name"],[1,"header-right"],[1,"set-code"],[1,"set-name"],[1,"suggestion-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","chance"],[1,"stat-value","missing"],[1,"stat-value","percentage"],["class","rarity-breakdown",4,"ngIf"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-item clickable","tabindex","0",3,"complete","click",4,"ngFor","ngForOf"],["tabindex","0",1,"rarity-item","clickable",3,"click"],[1,"rarity-symbol",3,"title"],[1,"rarity-count"],[1,"rarity-percentage"],[1,"no-suggestions"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"div",1),G(2,y$,4,0,"div",2),G(3,v$,3,0,"div",3),G(4,E$,10,4,"div",4),m(),G(5,S$,5,0,"div",5),g(6,"button",6),j("click",function(){return i.excludeSpecialPacks=!i.excludeSpecialPacks,i.onExcludeSpecialPacksChange()}),G(7,x$,2,0,"span",7),G(8,M$,2,0,"span",7),m(),g(9,"button",8),j("click",function(){return i.onRarityFilterChange()}),G(10,T$,2,0,"span",7),G(11,I$,2,0,"span",7),G(12,O$,2,0,"span",7),m()()),2&o&&(C(2),O("ngIf",i.isLoading),C(1),O("ngIf",!i.isLoading&&!i.currentUser),C(1),O("ngIf",!i.isLoading&&i.currentUser&&i.packSuggestions.length>0),C(1),O("ngIf",!i.isLoading&&i.currentUser&&0===i.packSuggestions.length),C(1),O("ngClass",Nl(13,A$,i.excludeSpecialPacks,!i.excludeSpecialPacks))("title",i.excludeSpecialPacks?"Excluding Special Packs":"Including Special Packs"),C(1),O("ngIf",i.excludeSpecialPacks),C(1),O("ngIf",!i.excludeSpecialPacks),C(1),O("ngClass",ch(16,P$,"tradable"===i.rarityFilterMode,"common"===i.rarityFilterMode,"all"===i.rarityFilterMode))("title","tradable"===i.rarityFilterMode?"Tradable cards: \u25ca-\u25ca\u25ca\u25ca\u25ca, \u2606, \u2606\u2606":"common"===i.rarityFilterMode?"Common only: \u25ca-\u25ca\u25ca\u25ca\u25ca, \u2606":"All rarities"),C(1),O("ngIf","tradable"===i.rarityFilterMode),C(1),O("ngIf","common"===i.rarityFilterMode),C(1),O("ngIf","all"===i.rarityFilterMode))},dependencies:[rc,oc,Ti,Sc,xc,Ni,ra,Ri],styles:['.suggestion-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:var(--text)}.suggestion-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:8px;font-size:2.2rem}.suggestion-header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem;margin:0}.filter-section[_ngcontent-%COMP%]{background:var(--surface);border-radius:12px;padding:15px;margin-bottom:20px;border:1px solid var(--border)}.filter-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;flex-wrap:wrap}.checkbox-option.compact[_ngcontent-%COMP%]{padding:6px 8px;gap:8px}.checkbox-option.compact[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{transform:scale(.9)}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.9rem}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.set-filter[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;background:var(--surface) url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%236c757d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>\') no-repeat right 8px center;border:1px solid var(--border);border-radius:8px;padding:8px 32px 8px 12px;font-size:.9rem;color:var(--text);cursor:pointer}.set-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px #5ba8ff26}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:15px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.radio-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-label[_ngcontent-%COMP%]{color:var(--text)}.radio-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.radio-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.radio-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.radio-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.filter-options[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid var(--border)}.checkbox-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:12px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.checkbox-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkbox-label[_ngcontent-%COMP%]{color:var(--text)}.checkbox-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.checkbox-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.loading-state[_ngcontent-%COMP%], .no-user-state[_ngcontent-%COMP%], .no-suggestions[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background:var(--surface);border:1px solid var(--border);border-radius:12px;margin:20px 0}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.08);border-top:4px solid var(--accent);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.suggestions-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text);margin-bottom:20px;font-size:1.4rem}.suggestions-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}.suggestion-item[_ngcontent-%COMP%]{display:block;background:rgb(14 21 37 / 85%);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:20px;transition:all .2s ease;box-shadow:0 2px 6px #00000040}.suggestion-content[_ngcontent-%COMP%]{width:100%}.suggestion-header[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;text-align:right}.pack-name[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text);margin:0;font-weight:1000;text-align:left}.set-code[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:2px 8px;border-radius:4px;font-size:.8rem;font-weight:500}.set-name[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem}.suggestion-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:15px}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-muted);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.stat-value.score[_ngcontent-%COMP%]{color:#3498db}.stat-value.chance[_ngcontent-%COMP%]{color:#e74c3c}.stat-value.missing[_ngcontent-%COMP%]{color:#f39c12}.stat-value.percentage[_ngcontent-%COMP%]{color:#27ae60}.rarity-breakdown[_ngcontent-%COMP%]{margin-top:15px;padding-top:15px;border-top:1px solid var(--border)}.rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 10px;color:var(--text);font-size:.9rem;font-weight:600}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px}.rarity-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:8px;background:rgba(255,255,255,.03);border-radius:6px;border:1px solid var(--border);gap:4px}.rarity-item.complete[_ngcontent-%COMP%]{background:rgba(39,174,96,.15);border-color:#27ae60}.rarity-item.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:transform .15s ease,box-shadow .15s ease}.rarity-item.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-1px)}.rarity-symbol[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--text)}.rarity-count[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);font-weight:500}.rarity-percentage[_ngcontent-%COMP%]{font-size:.75rem;color:#f39c12;font-weight:600}.rarity-percentage.complete[_ngcontent-%COMP%]{color:#27ae60}.exclude-toggle-fixed[_ngcontent-%COMP%]{position:fixed;top:16px;right:16px;z-index:1500;background:var(--surface);border-color:var(--border);box-shadow:0 4px 12px #0003}@media (max-width: 768px){.exclude-toggle-fixed[_ngcontent-%COMP%]{top:12px;right:12px;transform:scale(.95)}}@media (max-width: 768px){.suggestion-container[_ngcontent-%COMP%]{padding:15px}.suggestion-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.header-left[_ngcontent-%COMP%]{width:100%}.header-right[_ngcontent-%COMP%]{width:100%;text-align:left}.set-name[_ngcontent-%COMP%]{text-align:left;margin-left:0;width:100%}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.algorithm-selector[_ngcontent-%COMP%]{gap:8px}.radio-option[_ngcontent-%COMP%]{padding:12px}.filter-toolbar[_ngcontent-%COMP%]{justify-content:space-between}.rarity-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:6px}.rarity-item[_ngcontent-%COMP%]{padding:6px}}@media (max-width: 480px){.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.pack-name[_ngcontent-%COMP%]{font-size:1.1rem}}.fab[_ngcontent-%COMP%]{position:fixed;right:20px;width:56px;height:56px;border-radius:50%;color:#fff;border:none;font-size:1.5rem;cursor:pointer;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;z-index:1000;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.fab-special[_ngcontent-%COMP%]{bottom:20px}.fab-rarity[_ngcontent-%COMP%]{bottom:90px}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 16px #0006}.fab.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c 0%,#c0392b 100%)}.fab-tradable[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12 0%,#e67e22 100%)}.fab-common[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db 0%,#2980b9 100%)}.fab-all[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6 0%,#8e44ad 100%)}.fab-excluding[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c 0%,#c0392b 100%)}.fab-including[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60 0%,#229954 100%)}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:2000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:var(--surface-strong);color:var(--text);border:1px solid var(--border);border-radius:12px;max-width:800px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0006}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text);font-size:1.5rem}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8rem;color:#7f8c8d;cursor:pointer;padding:0;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.close-button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.06);color:var(--text)}.modal-body[_ngcontent-%COMP%]{padding:24px}.modal-filter[_ngcontent-%COMP%]{margin-top:12px}.algorithm-detail[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:20px;border-bottom:1px solid var(--border)}.algorithm-detail[_ngcontent-%COMP%]:last-child, .scoring-detail[_ngcontent-%COMP%]:last-child, .filter-detail[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.algorithm-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1.2rem}.algorithm-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text-muted);line-height:1.6}.algorithm-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:8px 0 0;padding-left:20px;color:#495057}.algorithm-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;line-height:1.5}.rarity-points[_ngcontent-%COMP%]{background:rgba(255,255,255,.05);padding:16px;border-radius:8px;margin-top:12px}.rarity-points[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1rem}.points-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px}.points-grid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--surface);padding:6px 10px;border-radius:4px;font-size:.85rem;color:var(--text);border:1px solid var(--border)}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end}.modal-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:10px 20px;border-radius:6px;font-size:1rem;cursor:pointer;transition:background .2s ease}.modal-button[_ngcontent-%COMP%]:hover{filter:brightness(.9)}.algorithm-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{max-height:95vh}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:16px}.points-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fab[_ngcontent-%COMP%]{bottom:16px;right:16px;width:48px;height:48px;font-size:1.3rem}}'],changeDetection:0}),n})();function R$(n,t){1&n&&(g(0,"span"),b(1,"No sets selected"),m())}function N$(n,t){1&n&&(g(0,"span"),b(1,"(Multiple select)"),m())}function F$(n,t){if(1&n){const e=Ne();g(0,"button",39),j("click",function(){const i=Q(e).$implicit;return Z(T(2).toggleLFSet(i))}),g(1,"span",40),b(2),m(),g(3,"span"),b(4),m()()}if(2&n){const e=t.$implicit,r=T(2);Le("selected",r.isLFSetSelected(e)),C(2),gt(r.isLFSetSelected(e)?"\u2714":""),C(2),Wr("",e," \u2013 ",r.getSetName(e),"")}}function L$(n,t){if(1&n){const e=Ne();g(0,"div",34)(1,"div",35)(2,"button",36),j("click",function(){return Q(e),Z(T().clearLFsets())}),b(3,"Clear"),m(),g(4,"button",36),j("click",function(){return Q(e),Z(T().selectAllLFsets())}),b(5,"All"),m()(),g(6,"div",37),G(7,F$,5,5,"button",38),m()()}if(2&n){const e=T();C(7),O("ngForOf",e.availableTradeSets)}}function j$(n,t){1&n&&(g(0,"span"),b(1,"No sets selected"),m())}function V$(n,t){1&n&&(g(0,"span"),b(1,"(Multiple select)"),m())}function $$(n,t){if(1&n){const e=Ne();g(0,"button",39),j("click",function(){const i=Q(e).$implicit;return Z(T(2).toggleFTSet(i))}),g(1,"span",40),b(2),m(),g(3,"span"),b(4),m()()}if(2&n){const e=t.$implicit,r=T(2);Le("selected",r.isFTSetSelected(e)),C(2),gt(r.isFTSetSelected(e)?"\u2714":""),C(2),Wr("",e," \u2013 ",r.getSetName(e),"")}}function U$(n,t){if(1&n){const e=Ne();g(0,"div",34)(1,"div",35)(2,"button",36),j("click",function(){return Q(e),Z(T().clearFTsets())}),b(3,"Clear"),m(),g(4,"button",36),j("click",function(){return Q(e),Z(T().selectAllFTsets())}),b(5,"All"),m()(),g(6,"div",37),G(7,$$,5,5,"button",38),m()()}if(2&n){const e=T();C(7),O("ngForOf",e.availableTradeSets)}}function B$(n,t){if(1&n){const e=Ne();g(0,"button",41),j("click",function(){const i=Q(e).$implicit;return Z(T().toggleTradeRarity(i.symbol))}),b(1),m()}if(2&n){const e=t.$implicit;Le("active",T().isTradeRaritySelected(e.symbol)),O("title",e.displayName),C(1),ke(" ",e.symbol," ")}}function H$(n,t){if(1&n){const e=Ne();g(0,"div",42)(1,"label",43),b(2,"Minimum Keep Count (>)"),m(),g(3,"input",44),j("ngModelChange",function(o){return Q(e),Z(T().overrideMinKeepValue=o)}),m()()}if(2&n){const e=T();C(3),O("ngModel",e.overrideMinKeepValue)}}function z$(n,t){1&n&&(g(0,"div",45),b(1,"\u26a0\ufe0f For discord, please choose only 1 rarity."),m())}function G$(n,t){1&n&&(g(0,"div",45),b(1,"\u26a0\ufe0f For foil trade, please choose only 1 rarity. It will ignore the pack selection."),m())}function q$(n,t){if(1&n){const e=Ne();g(0,"textarea",46),j("ngModelChange",function(o){return Q(e),Z(T().generatedText=o)}),m()}2&n&&O("ngModel",T().generatedText)}function W$(n,t){1&n&&(g(0,"div",47),b(1,' Click "Generate" to create trade text '),m())}const tE=function(n,t){return{"fa-chevron-down":n,"fa-chevron-up":t}};let K$=(()=>{const t=class{constructor(r,o,i){this.supabaseService=r,this.pokemonDataService=o,this.rarityService=i,this.currentUser=null,this.cards=[],this.sets=[],this.ownedCards={},this.cardMinimumKeepCount={},this.cardAllowTrade={},this.selectedLFsets=[],this.selectedFTsets=[],this.availableTradeSets=[],this.selectedTradeRarities=[],this.outputFormat="details",this.tradeFriendCode="",this.tradeTemplateText="Please ping me if there is any possible trades. \nENGLISH cards only please.",this.excludePromo=!0,this.excludeDeluxe=!0,this.overrideMinKeepEnabled=!1,this.overrideMinKeepValue=3,this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.generatedText="",this.loading=!0}ngOnInit(){var r=this;return y(function*(){yield r.loadData()})()}loadData(){var r=this;return y(function*(){r.loading=!0;try{if(r.currentUser=yield r.supabaseService.getCurrentUser(),r.currentUser){r.tradeFriendCode=r.currentUser.friend_code||"";const{quantities:i,minimumKeepCounts:s,allowTrade:a}=yield r.supabaseService.syncUserCollection(r.currentUser.id);r.ownedCards=i,r.cardMinimumKeepCount=s,r.cardAllowTrade=a}const o=yield r.pokemonDataService.loadAllData().toPromise();o&&(r.cards=o.cards,r.sets=o.sets),r.updateAvailableTradeSets(),r.selectedLFsets=[...r.availableTradeSets],r.selectedFTsets=[...r.availableTradeSets]}catch(o){console.error("Error loading data:",o)}r.loading=!1})()}updateAvailableTradeSets(){let r=Array.from(new Set(this.cards.map(o=>o.set))).sort();this.excludePromo&&(r=r.filter(o=>!o.startsWith("P-"))),this.excludeDeluxe&&(r=r.filter(o=>"A4B"!==o)),this.availableTradeSets=r,this.selectedLFsets=this.selectedLFsets.filter(o=>this.availableTradeSets.includes(o)),this.selectedFTsets=this.selectedFTsets.filter(o=>this.availableTradeSets.includes(o))}isSpecialSet(r){return"PROMO"===r||r.startsWith("A")}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.name:r}getSetShortName(r){const o=this.sets.find(i=>i.code===r);return o?o.shortName:r}getAvailableTradeRaritySymbols(){return this.rarityService.getUnifiedRarities()}isTradeRaritySelected(r){return this.selectedTradeRarities.includes(r)}toggleTradeRarity(r){const o=this.selectedTradeRarities.indexOf(r);o>-1?this.selectedTradeRarities.splice(o,1):this.selectedTradeRarities.push(r)}clearTradeRarities(){this.selectedTradeRarities=[]}isLFSetSelected(r){return this.selectedLFsets.includes(r)}toggleLFSet(r){const o=this.selectedLFsets.indexOf(r);o>-1?this.selectedLFsets.splice(o,1):this.selectedLFsets.push(r)}selectAllLFsets(){this.selectedLFsets=[...this.availableTradeSets]}clearLFsets(){this.selectedLFsets=[]}isFTSetSelected(r){return this.selectedFTsets.includes(r)}toggleFTSet(r){const o=this.selectedFTsets.indexOf(r);o>-1?this.selectedFTsets.splice(o,1):this.selectedFTsets.push(r)}selectAllFTsets(){this.selectedFTsets=[...this.availableTradeSets]}clearFTsets(){this.selectedFTsets=[]}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}getCardMinimumKeepCount(r){return this.cardMinimumKeepCount[this.getCardId(r)]||0}isCardAllowTrade(r){const o=this.getCardId(r);return!1!==this.cardAllowTrade[o]}generateTradeText(){const r=this.selectedTradeRarities.length>0?this.selectedTradeRarities:[],o="foil-trade"===this.outputFormat,i=this.cards.filter(a=>{if(o){if(!a.isFoil)return!1}else if(this.selectedLFsets.length>0&&!this.selectedLFsets.includes(a.set))return!1;const l=a.rarity,c=l?this.rarityService.getSymbol(l):"";return!(r.length>0&&(!c||!r.includes(c)))&&0===this.getOwnedCount(a)}),s=this.cards.filter(a=>{if(!o&&this.selectedFTsets.length>0&&!this.selectedFTsets.includes(a.set))return!1;const l=a.rarity,c=l?this.rarityService.getSymbol(l):"";return!(r.length>0&&(!c||!r.includes(c)))&&this.getOwnedCount(a)>(this.overrideMinKeepEnabled?this.overrideMinKeepValue:this.getCardMinimumKeepCount(a))});this.generatedText=this.formatTradeText(i,s)}formatTradeText(r,o){let i="";return i+="foil-trade"===this.outputFormat?this.formatFoilTrade(r,o):"discord"===this.outputFormat?this.formatDiscord(r,o):this.formatDetails(r,o),i+="\n",this.tradeTemplateText&&(i+=this.tradeTemplateText+"\n\n"),this.currentUser?.username&&(i+=`IGN: ${this.currentUser.username}\n`),this.tradeFriendCode&&(i+=`Friend code: ${this.tradeFriendCode}`),i}formatFoilTrade(r,o){let i="**Looking For (Foil Only)**\n";if(r.length>0){const s=this.groupBySet(r);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(d=>`${d.label.eng} (foil)`).join(", ")}\n`}else i+="None\n";if(i+="\n**For Trade**\n",o.length>0){const s=this.groupBySet(o);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(d=>{const h=d.label.eng;return d.isFoil?`${h} (foil)`:h}).join(", ")}\n`}else i+="None\n";return i}formatDiscord(r,o){let i="**Looking For**\n";if(r.length>0){const s=this.groupBySet(r);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(u=>u.label.eng).join(", ")}\n`}else i+="None\n";if(i+="\n**For Trade**\n",o.length>0){const s=this.groupBySet(o);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(u=>u.label.eng).join(", ")}\n`}else i+="None\n";return i}formatDetails(r,o){let i="**Looking For**\n";if(r.length>0){const s=this.groupBySet(r);for(const[a,l]of Object.entries(s)){const c=this.getSetShortName(a);i+=`\n[${c}]\n`,l.forEach(u=>{const d=this.rarityService.getSymbol(u.rarity);i+=`${d} ${a}-${u.number} - ${u.label.eng}\n`})}}else i+="None\n";if(i+="\n**For Trade**\n",o.length>0){const s=this.groupBySet(o);for(const[a,l]of Object.entries(s)){const c=this.getSetShortName(a);i+=`\n[${c}]\n`,l.forEach(u=>{const d=this.rarityService.getSymbol(u.rarity);i+=`${d} ${a}-${u.number} - ${u.label.eng}\n`})}}else i+="None\n";return i}groupBySet(r){return r.reduce((o,i)=>(o[i.set]||(o[i.set]=[]),o[i.set].push(i),o),{})}copyToClipboard(){navigator.clipboard.writeText(this.generatedText).then(()=>{}).catch(r=>{console.error("Failed to copy:",r),alert("Failed to copy to clipboard")})}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(rs),P(Xc),P(eE))},t.\u0275cmp=Dr({type:t,selectors:[["app-trade-gen"]],decls:80,vars:30,consts:[[1,"trade-gen-container"],[1,"trade-gen-content"],[1,"config-panel"],[1,"config-section"],[1,"section-label"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"multiselect-dropdown"],["type","button",1,"dropdown-trigger",3,"click"],[4,"ngIf"],[1,"fa",3,"ngClass"],["class","dropdown-menu",4,"ngIf"],[1,"rarity-chips"],["type","button",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelChange"],["class","override-input-group",4,"ngIf"],["for","friend-code",1,"section-label"],["type","text","id","friend-code","placeholder","Friend code from your profile",1,"text-input",3,"ngModel","ngModelChange"],["for","template-text",1,"section-label"],["id","template-text","rows","3","placeholder","Add an extra note...",1,"textarea-input",3,"ngModel","ngModelChange"],[1,"select-input",3,"ngModel","ngModelChange"],["value","details"],["value","discord"],["value","foil-trade"],["class","warning-text",4,"ngIf"],["type","button",1,"btn-primary",3,"disabled","click"],[1,"output-panel"],[1,"output-header"],["type","button",1,"btn-copy",3,"disabled","click"],[1,"output-content"],["class","output-text",3,"ngModel","ngModelChange",4,"ngIf"],["class","output-placeholder",4,"ngIf"],[1,"dropdown-menu"],[1,"dropdown-actions"],["type","button",1,"btn-small",3,"click"],[1,"dropdown-options"],["type","button","class","dropdown-option",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"dropdown-option",3,"click"],[1,"checkmark"],["type","button",1,"chip",3,"title","click"],[1,"override-input-group"],["for","override-min-keep",1,"section-label"],["type","number","id","override-min-keep","min","0","placeholder","0",1,"text-input",3,"ngModel","ngModelChange"],[1,"warning-text"],[1,"output-text",3,"ngModel","ngModelChange"],[1,"output-placeholder"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),b(4,"Trade Generator"),m(),g(5,"div",3)(6,"label",4),b(7,"Pack Filters"),m(),g(8,"div",5)(9,"label",6)(10,"input",7),j("ngModelChange",function(a){return i.excludePromo=a})("change",function(){return i.updateAvailableTradeSets()}),m(),g(11,"span"),b(12,"Exclude Promo"),m()(),g(13,"label",6)(14,"input",7),j("ngModelChange",function(a){return i.excludeDeluxe=a})("change",function(){return i.updateAvailableTradeSets()}),m(),g(15,"span"),b(16,"Exclude Deluxe Pack"),m()()()(),g(17,"div",3)(18,"label",4),b(19,"Include sets (Looking For)"),m(),g(20,"div",8)(21,"button",9),j("click",function(){return i.lfSetDropdownOpen=!i.lfSetDropdownOpen}),G(22,R$,2,0,"span",10),G(23,N$,2,0,"span",10),lt(24,"i",11),m(),G(25,L$,8,1,"div",12),m()(),g(26,"div",3)(27,"label",4),b(28,"Include sets (For Trade)"),m(),g(29,"div",8)(30,"button",9),j("click",function(){return i.ftSetDropdownOpen=!i.ftSetDropdownOpen}),G(31,j$,2,0,"span",10),G(32,V$,2,0,"span",10),lt(33,"i",11),m(),G(34,U$,8,1,"div",12),m()(),g(35,"div",3)(36,"label",4),b(37,"Include rarities:"),m(),g(38,"div",13)(39,"button",14),j("click",function(){return i.clearTradeRarities()}),b(40,"ALL"),m(),G(41,B$,2,4,"button",15),m()(),g(42,"div",3)(43,"label",6)(44,"input",16),j("ngModelChange",function(a){return i.overrideMinKeepEnabled=a}),m(),g(45,"span"),b(46,"Override minimum keep count"),m()(),G(47,H$,4,1,"div",17),m(),g(48,"div",3)(49,"label",18),b(50,"Friend Code"),m(),g(51,"input",19),j("ngModelChange",function(a){return i.tradeFriendCode=a}),m()(),g(52,"div",3)(53,"label",20),b(54,"Template text:"),m(),g(55,"textarea",21),j("ngModelChange",function(a){return i.tradeTemplateText=a}),m()(),g(56,"div",3)(57,"label",4),b(58,"Output Format"),m(),g(59,"select",22),j("ngModelChange",function(a){return i.outputFormat=a}),g(60,"option",23),b(61,"Details Trade"),m(),g(62,"option",24),b(63,"Discord Trade"),m(),g(64,"option",25),b(65,"Foil Trade"),m()(),G(66,z$,2,0,"div",26),G(67,G$,2,0,"div",26),m(),g(68,"div",3)(69,"button",27),j("click",function(){return i.generateTradeText()}),b(70," Generate "),m()()(),g(71,"div",28)(72,"div",29)(73,"h3"),b(74,"Generated Trade Text"),m(),g(75,"button",30),j("click",function(){return i.copyToClipboard()}),b(76," Copy to clipboard "),m()(),g(77,"div",31),G(78,q$,1,1,"textarea",32),G(79,W$,2,0,"div",33),m()()()()),2&o&&(C(10),O("ngModel",i.excludePromo),C(4),O("ngModel",i.excludeDeluxe),C(8),O("ngIf",0===i.selectedLFsets.length),C(1),O("ngIf",i.selectedLFsets.length>0),C(1),O("ngClass",Nl(24,tE,!i.lfSetDropdownOpen,i.lfSetDropdownOpen)),C(1),O("ngIf",i.lfSetDropdownOpen),C(6),O("ngIf",0===i.selectedFTsets.length),C(1),O("ngIf",i.selectedFTsets.length>0),C(1),O("ngClass",Nl(27,tE,!i.ftSetDropdownOpen,i.ftSetDropdownOpen)),C(1),O("ngIf",i.ftSetDropdownOpen),C(5),Le("active",0===i.selectedTradeRarities.length),C(2),O("ngForOf",i.getAvailableTradeRaritySymbols()),C(3),O("ngModel",i.overrideMinKeepEnabled),C(3),O("ngIf",i.overrideMinKeepEnabled),C(4),O("ngModel",i.tradeFriendCode),C(4),O("ngModel",i.tradeTemplateText),C(4),O("ngModel",i.outputFormat),C(7),O("ngIf","discord"==i.outputFormat),C(1),O("ngIf","foil-trade"==i.outputFormat),C(2),O("disabled",i.loading),C(6),O("disabled",!i.generatedText),C(3),O("ngIf",i.generatedText),C(1),O("ngIf",!i.generatedText))},dependencies:[rc,oc,Ti,Sc,xc,Ai,Ec,yf,Ni,ra,Mc,Ri],styles:[".trade-gen-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;min-height:100vh;color:#fff}.trade-gen-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:400px 1fr;gap:20px;height:calc(100vh - 100px)}.config-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,30,40,.95) 0%,rgba(20,20,30,.95) 100%);border:1px solid rgba(100,100,120,.4);border-radius:12px;padding:24px;overflow-y:auto;box-shadow:0 4px 12px #0000004d}.config-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 24px;font-size:24px;font-weight:600;color:#fff}.config-section[_ngcontent-%COMP%]{margin-bottom:20px}.section-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#b8b8c8;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#ddd;cursor:pointer;-webkit-user-select:none;user-select:none}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#4a9eff}.checkbox-label[_ngcontent-%COMP%]:hover{color:#fff}.override-input-group[_ngcontent-%COMP%]{margin-top:12px}.multiselect-dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-trigger[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:all .2s ease}.dropdown-trigger[_ngcontent-%COMP%]:hover{border-color:#788caab3;background:rgba(45,45,55,.95)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 4px);background:#1e2533;border:1px solid rgba(255,255,255,.18);border-radius:10px;padding:8px;box-shadow:0 6px 16px #00000073;z-index:50;max-height:300px;overflow-y:auto}.dropdown-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,.1)}.btn-small[_ngcontent-%COMP%]{padding:4px 12px;background:rgba(60,60,70,.8);border:1px solid rgba(100,120,150,.4);border-radius:6px;color:#ddd;font-size:12px;cursor:pointer;transition:all .2s ease}.btn-small[_ngcontent-%COMP%]:hover{background:rgba(70,70,80,.9);border-color:#788caa99}.dropdown-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.dropdown-option[_ngcontent-%COMP%]{width:100%;padding:8px 12px;background:transparent;border:none;border-radius:6px;color:#ddd;font-size:13px;text-align:left;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s ease}.dropdown-option[_ngcontent-%COMP%]:hover{background:rgba(60,60,70,.6)}.dropdown-option.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);color:#fff}.checkmark[_ngcontent-%COMP%]{width:20px;font-size:12px;font-weight:700}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(100,120,150,.4);border-radius:6px;background:rgba(40,40,50,.8);color:#cfd6e4;font-size:13px;cursor:pointer;transition:all .2s ease}.chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);border-color:#7056b1;color:#fff}.warning-text[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#fa0;display:flex;align-items:center;gap:4px}.text-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;outline:none;transition:all .2s ease}.text-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.textarea-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;font-family:inherit;resize:vertical;outline:none;transition:all .2s ease}.textarea-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.select-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;cursor:pointer;outline:none;transition:all .2s ease}.select-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:12px 20px;background:linear-gradient(135deg,#7056B1,#6C80EA);border:1px solid #7056B1;border-radius:8px;color:#fff;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s ease;text-transform:uppercase;letter-spacing:.5px}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#6046A1,#5C70DA);transform:translateY(-1px);box-shadow:0 4px 12px #7056b166}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.output-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,30,40,.95) 0%,rgba(20,20,30,.95) 100%);border:1px solid rgba(100,100,120,.4);border-radius:12px;display:flex;flex-direction:column;box-shadow:0 4px 12px #0000004d;overflow:hidden}.output-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid rgba(100,100,120,.3)}.output-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#fff}.btn-copy[_ngcontent-%COMP%]{padding:8px 16px;background:rgba(40,167,69,.2);border:1px solid #28a745;border-radius:6px;color:#28a745;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}.btn-copy[_ngcontent-%COMP%]:hover:not(:disabled){background:rgba(40,167,69,.3);transform:translateY(-1px)}.btn-copy[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.output-content[_ngcontent-%COMP%]{flex:1;padding:24px;overflow:hidden;display:flex;flex-direction:column}.output-text[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:20px;background:rgba(20,20,30,.8);border:1px solid rgba(100,100,120,.3);border-radius:8px;color:#e0e0e0;font-family:Consolas,Monaco,Courier New,monospace;font-size:13px;line-height:1.6;white-space:pre-wrap;word-wrap:break-word;resize:none;outline:none;box-sizing:border-box}.output-text[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.output-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;color:#666;font-size:16px;font-style:italic}@media (max-width: 1024px){.trade-gen-content[_ngcontent-%COMP%]{grid-template-columns:1fr;height:auto}.config-panel[_ngcontent-%COMP%]{max-height:none}.output-panel[_ngcontent-%COMP%]{min-height:400px}}@media (max-width: 768px){.trade-gen-container[_ngcontent-%COMP%]{padding:15px}.config-panel[_ngcontent-%COMP%], .output-panel[_ngcontent-%COMP%]{padding:16px}.output-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.btn-copy[_ngcontent-%COMP%]{width:100%}}"]}),n})();function J$(n,t){if(1&n&&(g(0,"div",19),b(1),m()),2&n){const e=T();C(1),ke(" ",e.error," ")}}function Y$(n,t){1&n&&lt(0,"span",20)}function X$(n,t){if(1&n){const e=Ne();g(0,"div",20)(1,"span",21),b(2),m(),g(3,"button",22),j("click",function(){return Q(e),Z(T().signOut())}),b(4,"Sign Out"),m()()}if(2&n){const e=T();C(2),ke("\u{1f464} ",e.currentUser.username,"")}}function eU(n,t){if(1&n&&(g(0,"div",23)(1,"span",21),b(2),m()()),2&n){const e=T();C(2),ke("\u{1f464} ",e.currentUser.username,"")}}function tU(n,t){if(1&n){const e=Ne();g(0,"button",24),j("click",function(){Q(e);const o=T();return o.signOut(),Z(o.closeMobileMenu())}),b(1," \u{1f6aa} Sign Out "),m()}}const nU=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:(()=>{const t=class{constructor(r,o,i){this.supabaseService=r,this.router=o,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/collection"}ngOnInit(){this.supabaseService.isSignedIn()?this.router.navigate([this.returnUrl]):this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/collection"}get isFormValid(){return this.username.trim().length>0&&this.password.trim().length>0}onSubmit(){var r=this;return y(function*(){if(r.isFormValid){r.loading=!0,r.error="";try{const{user:o,error:i}=yield r.supabaseService.signIn(r.username.trim(),r.password.trim());i?(r.error=i,i.includes("Please wait a moment")&&(r.error+=" This usually resolves itself quickly.")):o&&r.router.navigate([r.returnUrl])}catch(o){if(console.error("Sign in error:",o),o&&"object"==typeof o&&"message"in o){const i=o.message;r.error=i.includes("NavigatorLockAcquireTimeoutError")||i.includes("lock")?"Please wait a moment and try signing in again.":"An unexpected error occurred"}else r.error="An unexpected error occurred"}finally{r.loading=!1}}else r.error="Please enter both username and password"})()}onUsernameChange(){this.error=""}onPasswordChange(){this.error=""}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(rs),P(xt),P(io))},t.\u0275cmp=Dr({type:t,selectors:[["app-signin"]],decls:26,vars:8,consts:[[1,"signin-container"],[1,"signin-card"],[1,"signin-header"],[1,"signin-title"],[1,"signin-subtitle"],[1,"signin-form",3,"ngSubmit"],["signinForm","ngForm"],[1,"form-group"],["for","username"],["id","username","name","username","type","text","placeholder","Enter your username","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["usernameInput","ngModel"],["for","password"],["id","password","name","password","type","password","placeholder","Enter your password","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["passwordInput","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"signin-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"signin-footer"],[1,"invite-note"],[1,"error-message"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),b(4,"\u{1f0cf} Pokemon TCG Pocket"),m(),g(5,"p",4),b(6,"Collection Manager"),m()(),g(7,"form",5,6),j("ngSubmit",function(){return i.onSubmit()}),g(9,"div",7)(10,"label",8),b(11,"Username"),m(),g(12,"input",9,10),j("ngModelChange",function(a){return i.username=a})("input",function(){return i.onUsernameChange()}),m()(),g(14,"div",7)(15,"label",11),b(16,"Password"),m(),g(17,"input",12,13),j("ngModelChange",function(a){return i.password=a})("input",function(){return i.onPasswordChange()}),m()(),G(19,J$,2,1,"div",14),g(20,"button",15),G(21,Y$,1,0,"span",16),b(22),m()(),g(23,"div",17)(24,"p",18),b(25," \u{1f4e7} This is an invite-only system. Contact your administrator if you need access. "),m()()()()),2&o){const s=Ls(8);C(12),O("ngModel",i.username)("disabled",i.loading),C(5),O("ngModel",i.password)("disabled",i.loading),C(2),O("ngIf",i.error),C(1),O("disabled",i.loading||!s.valid),C(1),O("ngIf",i.loading),C(1),ke(" ",i.loading?"Signing In...":"Sign In"," ")}},dependencies:[Ti,j0,Ai,ra,E0,Tc,Ri,Dc],styles:[".signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px}.signin-card[_ngcontent-%COMP%]{background:#333;border-radius:12px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 30px #0000004d;border:1px solid #444}.signin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signin-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.signin-subtitle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin:0;opacity:.8}.signin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #555;border-radius:6px;background-color:#444;color:#fff;font-size:16px;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;background-color:#555}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:#888}.error-message[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:10px 12px;border-radius:6px;font-size:14px;text-align:center;margin-top:-10px}.signin-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}.signin-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px)}.signin-btn[_ngcontent-%COMP%]:disabled{background-color:#666;cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signin-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.invite-note[_ngcontent-%COMP%]{color:#888;font-size:12px;line-height:1.4;margin:0;padding:15px;background-color:#2a2a2a;border-radius:6px;border-left:3px solid #007bff}@media (max-width: 480px){.signin-container[_ngcontent-%COMP%]{padding:10px}.signin-card[_ngcontent-%COMP%]{padding:30px 20px}.signin-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),n})()},{path:"",component:(()=>{const t=class{constructor(r,o){this.supabaseService=r,this.router=o,this.currentUser=null,this.appVersion="1.9.0",this.isMobileMenuOpen=!1}ngOnInit(){this.supabaseService.currentUser$.subscribe(r=>{this.currentUser=r}),this.router.events.subscribe(()=>{this.isMobileMenuOpen=!1})}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}};let n=t;return t.\u0275fac=function(o){return new(o||t)(P(rs),P(xt))},t.\u0275cmp=Dr({type:t,selectors:[["app-main-layout"]],decls:34,vars:7,consts:[[1,"app-layout"],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],[1,"nav-center","desktop-only"],[1,"nav-links"],["routerLink","/suggestion","routerLinkActive","active",1,"nav-link"],["routerLink","/collection","routerLinkActive","active",1,"nav-link"],["routerLink","/trade","routerLinkActive","active",1,"nav-link"],["routerLink","/sync","routerLinkActive","active",1,"nav-link"],["class","nav-user desktop-only",4,"ngIf"],["type","button","aria-controls","mobileMenu","aria-label","Menu",1,"hamburger","mobile-only",3,"click"],["id","mobileMenu",1,"mobile-menu","mobile-only"],["class","mobile-menu-header",4,"ngIf"],["routerLink","/collection","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/suggestion","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/trade","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/sync","routerLinkActive","active",1,"mobile-link",3,"click"],["class","mobile-link signout",3,"click",4,"ngIf"],[1,"main-content"],[1,"nav-user","desktop-only"],[1,"username"],[1,"btn-signout",3,"click"],[1,"mobile-menu-header"],[1,"mobile-link","signout",3,"click"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"h2"),b(5,"Pokemon TCGP Collector"),m(),g(6,"p"),b(7),m()(),g(8,"div",4)(9,"div",5)(10,"a",6),b(11," \u{1f4ca} Suggestion "),m(),g(12,"a",7),b(13," \u{1f5c2}\ufe0f Collection "),m(),g(14,"a",8),b(15," \u{1f504} Trade "),m(),g(16,"a",9),b(17," \u{1f504} Sync (Coming Soon) "),m()()(),G(18,X$,5,1,"div",10),g(19,"button",11),j("click",function(){return i.toggleMobileMenu()}),b(20," \u2630 "),m()(),g(21,"div",12),G(22,eU,3,1,"div",13),g(23,"a",14),j("click",function(){return i.closeMobileMenu()}),b(24," \u{1f5c2}\ufe0f Collection "),m(),g(25,"a",15),j("click",function(){return i.closeMobileMenu()}),b(26," \u{1f4e6} Suggestion "),m(),g(27,"a",16),j("click",function(){return i.closeMobileMenu()}),b(28," \u{1f504} Trade "),m(),g(29,"a",17),j("click",function(){return i.closeMobileMenu()}),b(30," \u{1f504} Sync (Coming Soon) "),m(),G(31,tU,2,0,"button",18),m()(),g(32,"main",19),lt(33,"router-outlet"),m()()),2&o&&(C(7),ke("v",i.appVersion,""),C(11),O("ngIf",i.currentUser),C(1),Kt("aria-expanded",i.isMobileMenuOpen),C(2),Le("open",i.isMobileMenuOpen),C(1),O("ngIf",i.currentUser),C(9),O("ngIf",i.currentUser))},dependencies:[Ti,Bc,Zc,iD],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#1d1b1b}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:0 20px;box-shadow:0 2px 10px #0000001a;position:relative}.nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff}.nav-brand[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f0f0f0;opacity:.9;font-size:.95rem}.nav-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;border-radius:5px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:0 2px 5px #0003}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.username[_ngcontent-%COMP%]{color:#f0f0f0;font-size:14px;font-weight:500}.btn-signout[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background-color:transparent;color:#fff;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-signout[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#1d1b1b}.desktop-only[_ngcontent-%COMP%]{display:flex}.mobile-only[_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.35);color:#fff;border-radius:6px;padding:6px 10px;font-size:18px;cursor:pointer}.mobile-menu[_ngcontent-%COMP%]{display:none!important;position:absolute;right:12px;top:100%;margin-top:8px;width:220px;z-index:100;flex-direction:column;gap:8px;padding:10px 12px 12px;border:1px solid rgba(255,255,255,.16);border-radius:10px;background:#1b1f2a;box-shadow:0 10px 28px #00000059}.mobile-menu.open[_ngcontent-%COMP%]{display:flex!important}.mobile-menu[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin-bottom:4px;display:inline-block;opacity:.9}.mobile-link[_ngcontent-%COMP%]{text-align:left;color:#fff;text-decoration:none;padding:10px 12px;border:1px solid rgba(255,255,255,.12);border-radius:6px;background:rgba(255,255,255,.05);font-size:14px}.mobile-link.signout[_ngcontent-%COMP%]{border-color:#dc3545;background:rgba(220,53,69,.15)}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.nav-container[_ngcontent-%COMP%]{padding:8px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}"]}),n})(),canActivate:[(()=>{const t=class{constructor(r,o){this.supabaseService=r,this.router=o}canActivate(r,o){const i=this.supabaseService.isSignedIn(),s=this.supabaseService.getCurrentUser();return!(!i||!s)||(this.router.navigate(["/signin"],{queryParams:{returnUrl:o.url}}),!1)}};let n=t;return t.\u0275fac=function(o){return new(o||t)(q(rs),q(xt))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),n})()],children:[{path:"collection",component:_$},{path:"suggestion",component:k$},{path:"trade",component:K$},{path:"sync",component:(()=>{const t=class{};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=Dr({type:t,selectors:[["app-sync"]],decls:2,vars:0,template:function(o,i){1&o&&(g(0,"p"),b(1,"sync works!"),m())}}),n})()}]},{path:"**",redirectTo:"/signin"}];let rU=(()=>{const t=class{};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Vn({type:t}),t.\u0275inj=xn({imports:[fD.forRoot(nU),fD]}),n})(),oU=(()=>{const t=class{};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Vn({type:t,bootstrap:[hL]}),t.\u0275inj=xn({imports:[oR,cb,RR,VN,rU]}),n})();rR().bootstrapModule(oU).catch(n=>console.error(n))},397:(It,he,ee)=>{"use strict";ee.r(he),ee.d(he,{Headers:()=>I,Request:()=>A,Response:()=>H,default:()=>qe,fetch:()=>je});var Ce=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const je=Ce.fetch,qe=Ce.fetch.bind(Ce),I=Ce.Headers,A=Ce.Request,H=Ce.Response},369:(It,he,ee)=>{"use strict";var re=ee(156).default;Object.defineProperty(he,"__esModule",{value:!0});const Ce=ee(582),je=Ce.__importDefault(ee(397)),qe=Ce.__importDefault(ee(839));he.default=class I{constructor(H){var K,te;this.shouldThrowOnError=!1,this.method=H.method,this.url=H.url,this.headers=new Headers(H.headers),this.schema=H.schema,this.body=H.body,this.shouldThrowOnError=null!==(K=H.shouldThrowOnError)&&void 0!==K&&K,this.signal=H.signal,this.isMaybeSingle=null!==(te=H.isMaybeSingle)&&void 0!==te&&te,this.fetch=H.fetch?H.fetch:typeof fetch>"u"?je.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(H,K){return this.headers=new Headers(this.headers),this.headers.set(H,K),this}then(H,K){var te=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Fe=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var Se=re(function*(Ve){var it,zt,Ot,Ze;let st=null,Mt=null,Xn=null,Xt=Ve.status,wn=Ve.statusText;if(Ve.ok){if("HEAD"!==te.method){const Ur=yield Ve.text();""===Ur||(Mt="text/csv"===te.headers.get("Accept")||te.headers.get("Accept")&&null!==(it=te.headers.get("Accept"))&&void 0!==it&&it.includes("application/vnd.pgrst.plan+text")?Ur:JSON.parse(Ur))}const en=null===(zt=te.headers.get("Prefer"))||void 0===zt?void 0:zt.match(/count=(exact|planned|estimated)/),Dn=null===(Ot=Ve.headers.get("content-range"))||void 0===Ot?void 0:Ot.split("/");en&&Dn&&Dn.length>1&&(Xn=parseInt(Dn[1])),te.isMaybeSingle&&"GET"===te.method&&Array.isArray(Mt)&&(Mt.length>1?(st={code:"PGRST116",details:`Results contain ${Mt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Mt=null,Xn=null,Xt=406,wn="Not Acceptable"):Mt=1===Mt.length?Mt[0]:null)}else{const en=yield Ve.text();try{st=JSON.parse(en),Array.isArray(st)&&404===Ve.status&&(Mt=[],st=null,Xt=200,wn="OK")}catch{404===Ve.status&&""===en?(Xt=204,wn="No Content"):st={message:en}}if(st&&te.isMaybeSingle&&!(null===(Ze=st?.details)||void 0===Ze)&&Ze.includes("0 rows")&&(st=null,Xt=200,wn="OK"),st&&te.shouldThrowOnError)throw new qe.default(st)}return{error:st,data:Mt,count:Xn,status:Xt,statusText:wn}});return function(Ve){return Se.apply(this,arguments)}}());return this.shouldThrowOnError||(Fe=Fe.catch(Se=>{var Ve,it,zt;return{error:{message:`${null!==(Ve=Se?.name)&&void 0!==Ve?Ve:"FetchError"}: ${Se?.message}`,details:`${null!==(it=Se?.stack)&&void 0!==it?it:""}`,hint:"",code:`${null!==(zt=Se?.code)&&void 0!==zt?zt:""}`},data:null,count:null,status:0,statusText:""}})),Fe.then(H,K)}returns(){return this}overrideTypes(){return this}}},851:(It,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});const re=ee(582),Ce=re.__importDefault(ee(241)),je=re.__importDefault(ee(105));class qe{constructor(A,{headers:H={},schema:K,fetch:te}={}){this.url=A,this.headers=new Headers(H),this.schemaName=K,this.fetch=te}from(A){const H=new URL(`${this.url}/${A}`);return new Ce.default(H,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(A){return new qe(this.url,{headers:this.headers,schema:A,fetch:this.fetch})}rpc(A,H={},{head:K=!1,get:te=!1,count:Me}={}){var Fe;let Se;const Ve=new URL(`${this.url}/rpc/${A}`);let it;K||te?(Se=K?"HEAD":"GET",Object.entries(H).filter(([Ot,Ze])=>void 0!==Ze).map(([Ot,Ze])=>[Ot,Array.isArray(Ze)?`{${Ze.join(",")}}`:`${Ze}`]).forEach(([Ot,Ze])=>{Ve.searchParams.append(Ot,Ze)})):(Se="POST",it=H);const zt=new Headers(this.headers);return Me&&zt.set("Prefer",`count=${Me}`),new je.default({method:Se,url:Ve,headers:zt,schema:this.schemaName,body:it,fetch:null!==(Fe=this.fetch)&&void 0!==Fe?Fe:fetch})}}he.default=qe},839:(It,he)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});class ee extends Error{constructor(Ce){super(Ce.message),this.name="PostgrestError",this.details=Ce.details,this.hint=Ce.hint,this.code=Ce.code}}he.default=ee},105:(It,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});const Ce=ee(582).__importDefault(ee(594));he.default=class je extends Ce.default{eq(I,A){return this.url.searchParams.append(I,`eq.${A}`),this}neq(I,A){return this.url.searchParams.append(I,`neq.${A}`),this}gt(I,A){return this.url.searchParams.append(I,`gt.${A}`),this}gte(I,A){return this.url.searchParams.append(I,`gte.${A}`),this}lt(I,A){return this.url.searchParams.append(I,`lt.${A}`),this}lte(I,A){return this.url.searchParams.append(I,`lte.${A}`),this}like(I,A){return this.url.searchParams.append(I,`like.${A}`),this}likeAllOf(I,A){return this.url.searchParams.append(I,`like(all).{${A.join(",")}}`),this}likeAnyOf(I,A){return this.url.searchParams.append(I,`like(any).{${A.join(",")}}`),this}ilike(I,A){return this.url.searchParams.append(I,`ilike.${A}`),this}ilikeAllOf(I,A){return this.url.searchParams.append(I,`ilike(all).{${A.join(",")}}`),this}ilikeAnyOf(I,A){return this.url.searchParams.append(I,`ilike(any).{${A.join(",")}}`),this}is(I,A){return this.url.searchParams.append(I,`is.${A}`),this}in(I,A){const H=Array.from(new Set(A)).map(K=>"string"==typeof K&&new RegExp("[,()]").test(K)?`"${K}"`:`${K}`).join(",");return this.url.searchParams.append(I,`in.(${H})`),this}contains(I,A){return"string"==typeof A?this.url.searchParams.append(I,`cs.${A}`):Array.isArray(A)?this.url.searchParams.append(I,`cs.{${A.join(",")}}`):this.url.searchParams.append(I,`cs.${JSON.stringify(A)}`),this}containedBy(I,A){return"string"==typeof A?this.url.searchParams.append(I,`cd.${A}`):Array.isArray(A)?this.url.searchParams.append(I,`cd.{${A.join(",")}}`):this.url.searchParams.append(I,`cd.${JSON.stringify(A)}`),this}rangeGt(I,A){return this.url.searchParams.append(I,`sr.${A}`),this}rangeGte(I,A){return this.url.searchParams.append(I,`nxl.${A}`),this}rangeLt(I,A){return this.url.searchParams.append(I,`sl.${A}`),this}rangeLte(I,A){return this.url.searchParams.append(I,`nxr.${A}`),this}rangeAdjacent(I,A){return this.url.searchParams.append(I,`adj.${A}`),this}overlaps(I,A){return this.url.searchParams.append(I,"string"==typeof A?`ov.${A}`:`ov.{${A.join(",")}}`),this}textSearch(I,A,{config:H,type:K}={}){let te="";return"plain"===K?te="pl":"phrase"===K?te="ph":"websearch"===K&&(te="w"),this.url.searchParams.append(I,`${te}fts${void 0===H?"":`(${H})`}.${A}`),this}match(I){return Object.entries(I).forEach(([A,H])=>{this.url.searchParams.append(A,`eq.${H}`)}),this}not(I,A,H){return this.url.searchParams.append(I,`not.${A}.${H}`),this}or(I,{foreignTable:A,referencedTable:H=A}={}){return this.url.searchParams.append(H?`${H}.or`:"or",`(${I})`),this}filter(I,A,H){return this.url.searchParams.append(I,`${A}.${H}`),this}}},241:(It,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});const Ce=ee(582).__importDefault(ee(105));he.default=class je{constructor(I,{headers:A={},schema:H,fetch:K}){this.url=I,this.headers=new Headers(A),this.schema=H,this.fetch=K}select(I,A){const{head:H=!1,count:K}=A??{},te=H?"HEAD":"GET";let Me=!1;const Fe=(I??"*").split("").map(Se=>/\s/.test(Se)&&!Me?"":('"'===Se&&(Me=!Me),Se)).join("");return this.url.searchParams.set("select",Fe),K&&this.headers.append("Prefer",`count=${K}`),new Ce.default({method:te,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(I,{count:A,defaultToNull:H=!0}={}){var K;if(A&&this.headers.append("Prefer",`count=${A}`),H||this.headers.append("Prefer","missing=default"),Array.isArray(I)){const Me=I.reduce((Fe,Se)=>Fe.concat(Object.keys(Se)),[]);if(Me.length>0){const Fe=[...new Set(Me)].map(Se=>`"${Se}"`);this.url.searchParams.set("columns",Fe.join(","))}}return new Ce.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(K=this.fetch)&&void 0!==K?K:fetch})}upsert(I,{onConflict:A,ignoreDuplicates:H=!1,count:K,defaultToNull:te=!0}={}){var Me;if(this.headers.append("Prefer",`resolution=${H?"ignore":"merge"}-duplicates`),void 0!==A&&this.url.searchParams.set("on_conflict",A),K&&this.headers.append("Prefer",`count=${K}`),te||this.headers.append("Prefer","missing=default"),Array.isArray(I)){const Se=I.reduce((Ve,it)=>Ve.concat(Object.keys(it)),[]);if(Se.length>0){const Ve=[...new Set(Se)].map(it=>`"${it}"`);this.url.searchParams.set("columns",Ve.join(","))}}return new Ce.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(Me=this.fetch)&&void 0!==Me?Me:fetch})}update(I,{count:A}={}){var H;return A&&this.headers.append("Prefer",`count=${A}`),new Ce.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(H=this.fetch)&&void 0!==H?H:fetch})}delete({count:I}={}){var A;return I&&this.headers.append("Prefer",`count=${I}`),new Ce.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(A=this.fetch)&&void 0!==A?A:fetch})}}},594:(It,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});const Ce=ee(582).__importDefault(ee(369));he.default=class je extends Ce.default{select(I){let A=!1;const H=(I??"*").split("").map(K=>/\s/.test(K)&&!A?"":('"'===K&&(A=!A),K)).join("");return this.url.searchParams.set("select",H),this.headers.append("Prefer","return=representation"),this}order(I,{ascending:A=!0,nullsFirst:H,foreignTable:K,referencedTable:te=K}={}){const Me=te?`${te}.order`:"order",Fe=this.url.searchParams.get(Me);return this.url.searchParams.set(Me,`${Fe?`${Fe},`:""}${I}.${A?"asc":"desc"}${void 0===H?"":H?".nullsfirst":".nullslast"}`),this}limit(I,{foreignTable:A,referencedTable:H=A}={}){return this.url.searchParams.set(typeof H>"u"?"limit":`${H}.limit`,`${I}`),this}range(I,A,{foreignTable:H,referencedTable:K=H}={}){const Me=typeof K>"u"?"limit":`${K}.limit`;return this.url.searchParams.set(typeof K>"u"?"offset":`${K}.offset`,`${I}`),this.url.searchParams.set(Me,""+(A-I+1)),this}abortSignal(I){return this.signal=I,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:I=!1,verbose:A=!1,settings:H=!1,buffers:K=!1,wal:te=!1,format:Me="text"}={}){var Fe;const Se=[I?"analyze":null,A?"verbose":null,H?"settings":null,K?"buffers":null,te?"wal":null].filter(Boolean).join("|"),Ve=null!==(Fe=this.headers.get("Accept"))&&void 0!==Fe?Fe:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${Me}; for="${Ve}"; options=${Se};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(I){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${I}`),this}}},358:(It,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.PostgrestError=he.PostgrestBuilder=he.PostgrestTransformBuilder=he.PostgrestFilterBuilder=he.PostgrestQueryBuilder=he.PostgrestClient=void 0;const re=ee(582),Ce=re.__importDefault(ee(851));he.PostgrestClient=Ce.default;const je=re.__importDefault(ee(241));he.PostgrestQueryBuilder=je.default;const qe=re.__importDefault(ee(105));he.PostgrestFilterBuilder=qe.default;const I=re.__importDefault(ee(594));he.PostgrestTransformBuilder=I.default;const A=re.__importDefault(ee(369));he.PostgrestBuilder=A.default;const H=re.__importDefault(ee(839));he.PostgrestError=H.default,he.default={PostgrestClient:Ce.default,PostgrestQueryBuilder:je.default,PostgrestFilterBuilder:qe.default,PostgrestTransformBuilder:I.default,PostgrestBuilder:A.default,PostgrestError:H.default}},156:It=>{function he(re,Ce,je,qe,I,A,H){try{var K=re[A](H),te=K.value}catch(Me){return void je(Me)}K.done?Ce(te):Promise.resolve(te).then(qe,I)}It.exports=function ee(re){return function(){var Ce=this,je=arguments;return new Promise(function(qe,I){var A=re.apply(Ce,je);function H(te){he(A,qe,I,H,K,"next",te)}function K(te){he(A,qe,I,H,K,"throw",te)}H(void 0)})}},It.exports.__esModule=!0,It.exports.default=It.exports},582:(It,he,ee)=>{"use strict";ee.r(he),ee.d(he,{__addDisposableResource:()=>We,__assign:()=>je,__asyncDelegator:()=>os,__asyncGenerator:()=>wn,__asyncValues:()=>en,__await:()=>Xt,__awaiter:()=>Se,__classPrivateFieldGet:()=>er,__classPrivateFieldIn:()=>is,__classPrivateFieldSet:()=>Aa,__createBinding:()=>it,__decorate:()=>I,__disposeResources:()=>ka,__esDecorate:()=>H,__exportStar:()=>zt,__extends:()=>Ce,__generator:()=>Ve,__importDefault:()=>Fo,__importStar:()=>Oa,__makeTemplateObject:()=>Dn,__metadata:()=>Fe,__param:()=>A,__propKey:()=>te,__read:()=>Ze,__rest:()=>qe,__rewriteRelativeImportExtension:()=>Ra,__runInitializers:()=>K,__setFunctionName:()=>Me,__spread:()=>st,__spreadArray:()=>Xn,__spreadArrays:()=>Mt,__values:()=>Ot,default:()=>du});var re=function(D,x){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,S){M.__proto__=S}||function(M,S){for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&(M[F]=S[F])})(D,x)};function Ce(D,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function M(){this.constructor=D}re(D,x),D.prototype=null===x?Object.create(x):(M.prototype=x.prototype,new M)}var je=function(){return je=Object.assign||function(x){for(var M,S=1,F=arguments.length;S<F;S++)for(var U in M=arguments[S])Object.prototype.hasOwnProperty.call(M,U)&&(x[U]=M[U]);return x},je.apply(this,arguments)};function qe(D,x){var M={};for(var S in D)Object.prototype.hasOwnProperty.call(D,S)&&x.indexOf(S)<0&&(M[S]=D[S]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var F=0;for(S=Object.getOwnPropertySymbols(D);F<S.length;F++)x.indexOf(S[F])<0&&Object.prototype.propertyIsEnumerable.call(D,S[F])&&(M[S[F]]=D[S[F]])}return M}function I(D,x,M,S){var R,F=arguments.length,U=F<3?x:null===S?S=Object.getOwnPropertyDescriptor(x,M):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)U=Reflect.decorate(D,x,M,S);else for(var V=D.length-1;V>=0;V--)(R=D[V])&&(U=(F<3?R(U):F>3?R(x,M,U):R(x,M))||U);return F>3&&U&&Object.defineProperty(x,M,U),U}function A(D,x){return function(M,S){x(M,S,D)}}function H(D,x,M,S,F,U){function R(tr){if(void 0!==tr&&"function"!=typeof tr)throw new TypeError("Function expected");return tr}for(var wt,V=S.kind,Tt="getter"===V?"get":"setter"===V?"set":"value",de=!x&&D?S.static?D:D.prototype:null,Ye=x||(de?Object.getOwnPropertyDescriptor(de,S.name):{}),Br=!1,Be=M.length-1;Be>=0;Be--){var Ft={};for(var tn in S)Ft[tn]="access"===tn?{}:S[tn];for(var tn in S.access)Ft.access[tn]=S.access[tn];Ft.addInitializer=function(tr){if(Br)throw new TypeError("Cannot add initializers after decoration has completed");U.push(R(tr||null))};var En=(0,M[Be])("accessor"===V?{get:Ye.get,set:Ye.set}:Ye[Tt],Ft);if("accessor"===V){if(void 0===En)continue;if(null===En||"object"!=typeof En)throw new TypeError("Object expected");(wt=R(En.get))&&(Ye.get=wt),(wt=R(En.set))&&(Ye.set=wt),(wt=R(En.init))&&F.unshift(wt)}else(wt=R(En))&&("field"===V?F.unshift(wt):Ye[Tt]=wt)}de&&Object.defineProperty(de,S.name,Ye),Br=!0}function K(D,x,M){for(var S=arguments.length>2,F=0;F<x.length;F++)M=S?x[F].call(D,M):x[F].call(D);return S?M:void 0}function te(D){return"symbol"==typeof D?D:"".concat(D)}function Me(D,x,M){return"symbol"==typeof x&&(x=x.description?"[".concat(x.description,"]"):""),Object.defineProperty(D,"name",{configurable:!0,value:M?"".concat(M," ",x):x})}function Fe(D,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,x)}function Se(D,x,M,S){return new(M||(M=Promise))(function(U,R){function V(Ye){try{de(S.next(Ye))}catch(wt){R(wt)}}function Tt(Ye){try{de(S.throw(Ye))}catch(wt){R(wt)}}function de(Ye){Ye.done?U(Ye.value):function F(U){return U instanceof M?U:new M(function(R){R(U)})}(Ye.value).then(V,Tt)}de((S=S.apply(D,x||[])).next())})}function Ve(D,x){var S,F,U,M={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]},R=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return R.next=V(0),R.throw=V(1),R.return=V(2),"function"==typeof Symbol&&(R[Symbol.iterator]=function(){return this}),R;function V(de){return function(Ye){return function Tt(de){if(S)throw new TypeError("Generator is already executing.");for(;R&&(R=0,de[0]&&(M=0)),M;)try{if(S=1,F&&(U=2&de[0]?F.return:de[0]?F.throw||((U=F.return)&&U.call(F),0):F.next)&&!(U=U.call(F,de[1])).done)return U;switch(F=0,U&&(de=[2&de[0],U.value]),de[0]){case 0:case 1:U=de;break;case 4:return M.label++,{value:de[1],done:!1};case 5:M.label++,F=de[1],de=[0];continue;case 7:de=M.ops.pop(),M.trys.pop();continue;default:if(!(U=(U=M.trys).length>0&&U[U.length-1])&&(6===de[0]||2===de[0])){M=0;continue}if(3===de[0]&&(!U||de[1]>U[0]&&de[1]<U[3])){M.label=de[1];break}if(6===de[0]&&M.label<U[1]){M.label=U[1],U=de;break}if(U&&M.label<U[2]){M.label=U[2],M.ops.push(de);break}U[2]&&M.ops.pop(),M.trys.pop();continue}de=x.call(D,M)}catch(Ye){de=[6,Ye],F=0}finally{S=U=0}if(5&de[0])throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}([de,Ye])}}}var it=Object.create?function(D,x,M,S){void 0===S&&(S=M);var F=Object.getOwnPropertyDescriptor(x,M);(!F||("get"in F?!x.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return x[M]}}),Object.defineProperty(D,S,F)}:function(D,x,M,S){void 0===S&&(S=M),D[S]=x[M]};function zt(D,x){for(var M in D)"default"!==M&&!Object.prototype.hasOwnProperty.call(x,M)&&it(x,D,M)}function Ot(D){var x="function"==typeof Symbol&&Symbol.iterator,M=x&&D[x],S=0;if(M)return M.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&S>=D.length&&(D=void 0),{value:D&&D[S++],done:!D}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ze(D,x){var M="function"==typeof Symbol&&D[Symbol.iterator];if(!M)return D;var F,R,S=M.call(D),U=[];try{for(;(void 0===x||x-- >0)&&!(F=S.next()).done;)U.push(F.value)}catch(V){R={error:V}}finally{try{F&&!F.done&&(M=S.return)&&M.call(S)}finally{if(R)throw R.error}}return U}function st(){for(var D=[],x=0;x<arguments.length;x++)D=D.concat(Ze(arguments[x]));return D}function Mt(){for(var D=0,x=0,M=arguments.length;x<M;x++)D+=arguments[x].length;var S=Array(D),F=0;for(x=0;x<M;x++)for(var U=arguments[x],R=0,V=U.length;R<V;R++,F++)S[F]=U[R];return S}function Xn(D,x,M){if(M||2===arguments.length)for(var U,S=0,F=x.length;S<F;S++)(U||!(S in x))&&(U||(U=Array.prototype.slice.call(x,0,S)),U[S]=x[S]);return D.concat(U||Array.prototype.slice.call(x))}function Xt(D){return this instanceof Xt?(this.v=D,this):new Xt(D)}function wn(D,x,M){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,S=M.apply(D,x||[]),U=[];return F=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),V("next"),V("throw"),V("return",function R(Be){return function(Ft){return Promise.resolve(Ft).then(Be,wt)}}),F[Symbol.asyncIterator]=function(){return this},F;function V(Be,Ft){S[Be]&&(F[Be]=function(tn){return new Promise(function(En,tr){U.push([Be,tn,En,tr])>1||Tt(Be,tn)})},Ft&&(F[Be]=Ft(F[Be])))}function Tt(Be,Ft){try{!function de(Be){Be.value instanceof Xt?Promise.resolve(Be.value.v).then(Ye,wt):Br(U[0][2],Be)}(S[Be](Ft))}catch(tn){Br(U[0][3],tn)}}function Ye(Be){Tt("next",Be)}function wt(Be){Tt("throw",Be)}function Br(Be,Ft){Be(Ft),U.shift(),U.length&&Tt(U[0][0],U[0][1])}}function os(D){var x,M;return x={},S("next"),S("throw",function(F){throw F}),S("return"),x[Symbol.iterator]=function(){return this},x;function S(F,U){x[F]=D[F]?function(R){return(M=!M)?{value:Xt(D[F](R)),done:!1}:U?U(R):R}:U}}function en(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M,x=D[Symbol.asyncIterator];return x?x.call(D):(D=Ot(D),M={},S("next"),S("throw"),S("return"),M[Symbol.asyncIterator]=function(){return this},M);function S(U){M[U]=D[U]&&function(R){return new Promise(function(V,Tt){!function F(U,R,V,Tt){Promise.resolve(Tt).then(function(de){U({value:de,done:V})},R)}(V,Tt,(R=D[U](R)).done,R.value)})}}}function Dn(D,x){return Object.defineProperty?Object.defineProperty(D,"raw",{value:x}):D.raw=x,D}var Ur=Object.create?function(D,x){Object.defineProperty(D,"default",{enumerable:!0,value:x})}:function(D,x){D.default=x},fo=function(D){return(fo=Object.getOwnPropertyNames||function(x){var M=[];for(var S in x)Object.prototype.hasOwnProperty.call(x,S)&&(M[M.length]=S);return M})(D)};function Oa(D){if(D&&D.__esModule)return D;var x={};if(null!=D)for(var M=fo(D),S=0;S<M.length;S++)"default"!==M[S]&&it(x,D,M[S]);return Ur(x,D),x}function Fo(D){return D&&D.__esModule?D:{default:D}}function er(D,x,M,S){if("a"===M&&!S)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof x?D!==x||!S:!x.has(D))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===M?S:"a"===M?S.call(D):S?S.value:x.get(D)}function Aa(D,x,M,S,F){if("m"===S)throw new TypeError("Private method is not writable");if("a"===S&&!F)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof x?D!==x||!F:!x.has(D))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===S?F.call(D,M):F?F.value=M:x.set(D,M),M}function is(D,x){if(null===x||"object"!=typeof x&&"function"!=typeof x)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof D?x===D:D.has(x)}function We(D,x,M){if(null!=x){if("object"!=typeof x&&"function"!=typeof x)throw new TypeError("Object expected.");var S,F;if(M){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");S=x[Symbol.asyncDispose]}if(void 0===S){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");S=x[Symbol.dispose],M&&(F=S)}if("function"!=typeof S)throw new TypeError("Object not disposable.");F&&(S=function(){try{F.call(this)}catch(U){return Promise.reject(U)}}),D.stack.push({value:x,dispose:S,async:M})}else M&&D.stack.push({async:!0});return x}var Pa="function"==typeof SuppressedError?SuppressedError:function(D,x,M){var S=new Error(M);return S.name="SuppressedError",S.error=D,S.suppressed=x,S};function ka(D){function x(U){D.error=D.hasError?new Pa(U,D.error,"An error was suppressed during disposal."):U,D.hasError=!0}var M,S=0;return function F(){for(;M=D.stack.pop();)try{if(!M.async&&1===S)return S=0,D.stack.push(M),Promise.resolve().then(F);if(M.dispose){var U=M.dispose.call(M.value);if(M.async)return S|=2,Promise.resolve(U).then(F,function(R){return x(R),F()})}else S|=1}catch(R){x(R)}if(1===S)return D.hasError?Promise.reject(D.error):Promise.resolve();if(D.hasError)throw D.error}()}function Ra(D,x){return"string"==typeof D&&/^\.\.?\//.test(D)?D.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(M,S,F,U,R){return S?x?".jsx":".js":!F||U&&R?F+U+"."+R.toLowerCase()+"js":M}):D}const du={__extends:Ce,__assign:je,__rest:qe,__decorate:I,__param:A,__esDecorate:H,__runInitializers:K,__propKey:te,__setFunctionName:Me,__metadata:Fe,__awaiter:Se,__generator:Ve,__createBinding:it,__exportStar:zt,__values:Ot,__read:Ze,__spread:st,__spreadArrays:Mt,__spreadArray:Xn,__await:Xt,__asyncGenerator:wn,__asyncDelegator:os,__asyncValues:en,__makeTemplateObject:Dn,__importStar:Oa,__importDefault:Fo,__classPrivateFieldGet:er,__classPrivateFieldSet:Aa,__classPrivateFieldIn:is,__addDisposableResource:We,__disposeResources:ka,__rewriteRelativeImportExtension:Ra}}},It=>{It(It.s=71)}]);