(self.webpackChunkPokemonTCGPCollector=self.webpackChunkPokemonTCGPCollector||[]).push([[179],{734:(Ot,de,te)=>{"use strict";function oe(t){return"function"==typeof t}function ve(t){const e=t(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Le=ve(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Ge(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class k{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const i of e)i.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(oe(r))try{r()}catch(i){n=i instanceof Le?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{Q(i)}catch(s){n=n??[],s instanceof Le?n=[...n,...s.errors]:n.push(s)}}if(n)throw new Le(n)}}add(n){var e;if(n&&n!==this)if(this.closed)Q(n);else{if(n instanceof k){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&Ge(e,n)}remove(n){const{_finalizers:e}=this;e&&Ge(e,n),n instanceof k&&n._removeParent(this)}}k.EMPTY=(()=>{const t=new k;return t.closed=!0,t})();const R=k.EMPTY;function q(t){return t instanceof k||t&&"closed"in t&&oe(t.remove)&&oe(t.add)&&oe(t.unsubscribe)}function Q(t){oe(t)?t():t.unsubscribe()}const ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ee={setTimeout(t,n,...e){const{delegate:r}=Ee;return r?.setTimeout?r.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=Ee;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Fe(t){Ee.setTimeout(()=>{const{onUnhandledError:n}=ne;if(!n)throw t;n(t)})}function De(){}const je=It("C",void 0,void 0);function It(t,n,e){return{kind:t,value:n,error:e}}let Ze=null;function at(t){if(ne.useDeprecatedSynchronousErrorHandling){const n=!Ze;if(n&&(Ze={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:r}=Ze;if(Ze=null,e)throw r}}else t()}class Zn extends k{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,q(n)&&n.add(this)):this.destination=Ta}static create(n,e,r){return new en(n,e,r)}next(n){this.isStopped?uo(function zt(t){return It("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?uo(function st(t){return It("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?uo(je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xt=Function.prototype.bind;function bn(t,n){return Xt.call(t,n)}class os{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(r){wn(r)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(r){wn(r)}else wn(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){wn(e)}}}class en extends Zn{constructor(n,e,r){let o;if(super(),oe(n)||!n)o={next:n??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&ne.useDeprecatedNextContext?(i=Object.create(n),i.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&bn(n.next,i),error:n.error&&bn(n.error,i),complete:n.complete&&bn(n.complete,i)}):o=n}this.destination=new os(o)}}function wn(t){ne.useDeprecatedSynchronousErrorHandling?function Mt(t){ne.useDeprecatedSynchronousErrorHandling&&Ze&&(Ze.errorThrown=!0,Ze.error=t)}(t):Fe(t)}function uo(t,n){const{onStoppedNotification:e}=ne;e&&Ee.setTimeout(()=>e(t,n))}const Ta={closed:!0,next:De,error:function Vr(t){throw t},complete:De},Ro="function"==typeof Symbol&&Symbol.observable||"@@observable";function Xn(t){return t}function is(t){return 0===t.length?Xn:1===t.length?t[0]:function(e){return t.reduce((r,o)=>o(r),e)}}let qe=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new t;return r.source=this,r.operator=e,r}subscribe(e,r,o){const i=function ka(t){return t&&t instanceof Zn||function Aa(t){return t&&oe(t.next)&&oe(t.error)&&oe(t.complete)}(t)&&q(t)}(e)?e:new en(e,r,o);return at(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=Ia(r))((o,i)=>{const s=new en({next:a=>{try{e(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[Ro](){return this}pipe(...e){return is(e)(this)}toPromise(e){return new(e=Ia(e))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=n=>new t(n),t})();function Ia(t){var n;return null!==(n=t??ne.Promise)&&void 0!==n?n:Promise}const cu=ve(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let E=(()=>{class t extends qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new O(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new cu}next(e){at(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){at(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){at(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:o,observers:i}=this;return r||o?R:(this.currentObservers=null,i.push(e),new k(()=>{this.currentObservers=null,Ge(i,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:o,isStopped:i}=this;r?e.error(o):i&&e.complete()}asObservable(){const e=new qe;return e.source=this,e}}return t.create=(n,e)=>new O(n,e),t})();class O extends E{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,n)}error(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==r?r:R}}function I(t){return oe(t?.lift)}function M(t){return n=>{if(I(n))return n.lift(function(e){try{return t(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(t,n,e,r,o){return new B(t,n,e,r,o)}class B extends Zn{constructor(n,e,r,o,i,s){super(n),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){n.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function L(t,n){return M((e,r)=>{let o=0;e.subscribe(j(r,i=>{r.next(t.call(n,i,o++))}))})}var $=te(582);const Tt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function ue(t){return oe(t?.then)}function Je(t){return oe(t[Ro])}function wt(t){return Symbol.asyncIterator&&oe(t?.[Symbol.asyncIterator])}function $r(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Lt=function Ue(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tn(t){return oe(t?.[Lt])}function Dn(t){return(0,$.__asyncGenerator)(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:r,done:o}=yield(0,$.__await)(e.read());if(o)return yield(0,$.__await)(void 0);yield yield(0,$.__await)(r)}}finally{e.releaseLock()}})}function er(t){return oe(t?.getReader)}function Fn(t){if(t instanceof qe)return t;if(null!=t){if(Je(t))return function XD(t){return new qe(n=>{const e=t[Ro]();if(oe(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Tt(t))return function eS(t){return new qe(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(ue(t))return function tS(t){return new qe(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,Fe)})}(t);if(wt(t))return Wp(t);if(tn(t))return function nS(t){return new qe(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(er(t))return function rS(t){return Wp(Dn(t))}(t)}throw $r(t)}function Wp(t){return new qe(n=>{(function oS(t,n){var e,r,o,i;return(0,$.__awaiter)(this,void 0,void 0,function*(){try{for(e=(0,$.__asyncValues)(t);!(r=yield e.next()).done;)if(n.next(r.value),n.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(o)throw o.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function vr(t,n,e,r=0,o=!1){const i=n.schedule(function(){e(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function At(t,n,e=1/0){return oe(n)?At((r,o)=>L((i,s)=>n(r,i,o,s))(Fn(t(r,o))),e):("number"==typeof n&&(e=n),M((r,o)=>function iS(t,n,e,r,o,i,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&n.complete()},f=v=>c<r?p(v):l.push(v),p=v=>{i&&n.next(v),c++;let _=!1;Fn(e(v,u++)).subscribe(j(n,w=>{o?.(w),i?f(w):n.next(w)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<r;){const w=l.shift();s?vr(n,s,()=>p(w)):p(w)}h()}catch(w){n.error(w)}}))};return t.subscribe(j(n,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,t,e)))}function No(t=1/0){return At(Xn,t)}const tr=new qe(t=>t.complete());function uu(t){return t[t.length-1]}function Kp(t){return oe(uu(t))?t.pop():void 0}function ss(t){return function aS(t){return t&&oe(t.schedule)}(uu(t))?t.pop():void 0}function Jp(t,n=0){return M((e,r)=>{e.subscribe(j(r,o=>vr(r,t,()=>r.next(o),n),()=>vr(r,t,()=>r.complete(),n),o=>vr(r,t,()=>r.error(o),n)))})}function Yp(t,n=0){return M((e,r)=>{r.add(t.schedule(()=>e.subscribe(r),n))})}function Qp(t,n){if(!t)throw new Error("Iterable cannot be null");return new qe(e=>{vr(e,n,()=>{const r=t[Symbol.asyncIterator]();vr(e,n,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function pt(t,n){return n?function pS(t,n){if(null!=t){if(Je(t))return function cS(t,n){return Fn(t).pipe(Yp(n),Jp(n))}(t,n);if(Tt(t))return function dS(t,n){return new qe(e=>{let r=0;return n.schedule(function(){r===t.length?e.complete():(e.next(t[r++]),e.closed||this.schedule())})})}(t,n);if(ue(t))return function uS(t,n){return Fn(t).pipe(Yp(n),Jp(n))}(t,n);if(wt(t))return Qp(t,n);if(tn(t))return function hS(t,n){return new qe(e=>{let r;return vr(e,n,()=>{r=t[Lt](),vr(e,n,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void e.error(s)}i?e.complete():e.next(o)},0,!0)}),()=>oe(r?.return)&&r.return()})}(t,n);if(er(t))return function fS(t,n){return Qp(Dn(t),n)}(t,n)}throw $r(t)}(t,n):Fn(t)}function du(t,n,...e){if(!0===n)return void t();if(!1===n)return;const r=new en({next:()=>{r.unsubscribe(),t()}});return n(...e).subscribe(r)}function Ve(t){for(let n in t)if(t[n]===Ve)return n;throw Error("Could not find renamed property on target object.")}function hu(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Be(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Be).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function fu(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const _S=Ve({__forward_ref__:Ve});function He(t){return t.__forward_ref__=He,t.toString=function(){return Be(this())},t}function se(t){return pu(t)?t():t}function pu(t){return"function"==typeof t&&t.hasOwnProperty(_S)&&t.__forward_ref__===He}function gu(t){return t&&!!t.\u0275providers}const Zp="https://g.co/ng/security#xss";class U extends Error{constructor(n,e){super(Pa(n,e)),this.code=n}}function Pa(t,n){return`NG0${Math.abs(t)}${n?": "+n.trim():""}`}function he(t){return"string"==typeof t?t:null==t?"":String(t)}function Ra(t,n){throw new U(-201,!1)}function Sn(t,n){null==t&&function ke(t,n,e,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${e} ${r} ${n} <=Actual]`))}(n,t,null,"!=")}function Z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function En(t){return{providers:t.providers||[],imports:t.imports||[]}}function Na(t){return Xp(t,Fa)||Xp(t,tg)}function Xp(t,n){return t.hasOwnProperty(n)?t[n]:null}function eg(t){return t&&(t.hasOwnProperty(mu)||t.hasOwnProperty(ES))?t[mu]:null}const Fa=Ve({\u0275prov:Ve}),mu=Ve({\u0275inj:Ve}),tg=Ve({ngInjectableDef:Ve}),ES=Ve({ngInjectorDef:Ve});var ae=(()=>((ae=ae||{})[ae.Default=0]="Default",ae[ae.Host=1]="Host",ae[ae.Self=2]="Self",ae[ae.SkipSelf=4]="SkipSelf",ae[ae.Optional=8]="Optional",ae))();let _u;function xn(t){const n=_u;return _u=t,n}function ng(t,n,e){const r=Na(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&ae.Optional?null:void 0!==n?n:void Ra(Be(t))}const We=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),as={},yu="__NG_DI_FLAG__",La="ngTempTokenPath",MS="ngTokenPath",TS=/\n/gm,OS="\u0275",rg="__source";let ls;function Fo(t){const n=ls;return ls=t,n}function IS(t,n=ae.Default){if(void 0===ls)throw new U(-203,!1);return null===ls?ng(t,void 0,n):ls.get(t,n&ae.Optional?null:void 0,n)}function K(t,n=ae.Default){return(function xS(){return _u}()||IS)(se(t),n)}function Ce(t,n=ae.Default){return K(t,ja(n))}function ja(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function vu(t){const n=[];for(let e=0;e<t.length;e++){const r=se(t[e]);if(Array.isArray(r)){if(0===r.length)throw new U(900,!1);let o,i=ae.Default;for(let s=0;s<r.length;s++){const a=r[s],l=AS(a);"number"==typeof l?-1===l?o=a.token:i|=l:o=a}n.push(K(o,i))}else n.push(K(r))}return n}function cs(t,n){return t[yu]=n,t.prototype[yu]=n,t}function AS(t){return t[yu]}function Cr(t){return{toString:t}.toString()}var nr=(()=>((nr=nr||{})[nr.OnPush=0]="OnPush",nr[nr.Default=1]="Default",nr))(),rr=(()=>{return(t=rr||(rr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",rr;var t})();const br={},Oe=[],Va=Ve({\u0275cmp:Ve}),Cu=Ve({\u0275dir:Ve}),bu=Ve({\u0275pipe:Ve}),ig=Ve({\u0275mod:Ve}),wr=Ve({\u0275fac:Ve}),us=Ve({__NG_ELEMENT_ID__:Ve});let RS=0;function Br(t){return Cr(()=>{const n=ag(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===nr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,data:t.data||{},encapsulation:t.encapsulation||rr.Emulated,id:"c"+RS++,styles:t.styles||Oe,_:null,schemas:t.schemas||null,tView:null};lg(e);const r=t.dependencies;return e.directiveDefs=$a(r,!1),e.pipeDefs=$a(r,!0),e})}function FS(t){return Pe(t)||jt(t)}function LS(t){return null!==t}function Ln(t){return Cr(()=>({type:t.type,bootstrap:t.bootstrap||Oe,declarations:t.declarations||Oe,imports:t.imports||Oe,exports:t.exports||Oe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function sg(t,n){if(null==t)return br;const e={};for(const r in t)if(t.hasOwnProperty(r)){let o=t[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),e[o]=r,n&&(n[o]=i)}return e}function ce(t){return Cr(()=>{const n=ag(t);return lg(n),n})}function Pe(t){return t[Va]||null}function jt(t){return t[Cu]||null}function rn(t){return t[bu]||null}function un(t,n){const e=t[ig]||null;if(!e&&!0===n)throw new Error(`Type ${Be(t)} does not have '\u0275mod' property.`);return e}function ag(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,exportAs:t.exportAs||null,standalone:!0===t.standalone,selectors:t.selectors||Oe,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sg(t.inputs,n),outputs:sg(t.outputs)}}function lg(t){t.features?.forEach(n=>n(t))}function $a(t,n){if(!t)return null;const e=n?rn:FS;return()=>("function"==typeof t?t():t).map(r=>e(r)).filter(LS)}const Dr=0,J=1,_e=2,nt=3,jn=4,ho=5,Vt=6,jo=7,lt=8,Ua=9,Ba=10,be=11,wu=12,ds=13,cg=14,Vo=15,$t=16,hs=17,$o=18,or=19,fs=20,ug=21,Ke=22,Du=1,dg=2,Ha=7,za=8,Uo=9,Gt=10;function dn(t){return Array.isArray(t)&&"object"==typeof t[Du]}function Vn(t){return Array.isArray(t)&&!0===t[Du]}function Su(t){return 0!=(4&t.flags)}function ps(t){return t.componentOffset>-1}function Ga(t){return 1==(1&t.flags)}function $n(t){return!!t.template}function VS(t){return 0!=(256&t[_e])}function fo(t,n){return t.hasOwnProperty(wr)?t[wr]:null}class BS{constructor(n,e,r){this.previousValue=n,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Mn(){return pg}function pg(t){return t.type.prototype.ngOnChanges&&(t.setInput=zS),HS}function HS(){const t=mg(this),n=t?.current;if(n){const e=t.previous;if(e===br)t.previous=n;else for(let r in n)e[r]=n[r];t.current=null,this.ngOnChanges(n)}}function zS(t,n,e,r){const o=this.declaredInputs[e],i=mg(t)||function GS(t,n){return t[gg]=n}(t,{previous:br,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[o];s[o]=new BS(l&&l.currentValue,n,a===br),t[r]=n}Mn.ngInherit=!0;const gg="__ngSimpleChanges__";function mg(t){return t[gg]||null}const Tn=function(t,n,e){};function kt(t){for(;Array.isArray(t);)t=t[Dr];return t}function qa(t,n){return kt(n[t])}function hn(t,n){return kt(n[t.index])}function vg(t,n){return t.data[n]}function on(t,n){const e=n[t];return dn(e)?e:e[Dr]}function Wa(t){return 64==(64&t[_e])}function Hr(t,n){return null==n?null:t[n]}function Cg(t){t[$o]=0}function xu(t,n){t[ho]+=n;let e=t,r=t[nt];for(;null!==r&&(1===n&&1===e[ho]||-1===n&&0===e[ho]);)r[ho]+=n,e=r,r=r[nt]}const fe={lFrame:Ig(null),bindingsEnabled:!0};function wg(){return fe.bindingsEnabled}function V(){return fe.lFrame.lView}function Te(){return fe.lFrame.tView}function z(t){return fe.lFrame.contextLView=t,t[lt]}function G(t){return fe.lFrame.contextLView=null,t}function Pt(){let t=Dg();for(;null!==t&&64===t.type;)t=t.parent;return t}function Dg(){return fe.lFrame.currentTNode}function ir(t,n){const e=fe.lFrame;e.currentTNode=t,e.isParent=n}function Mu(){return fe.lFrame.isParent}function Tu(){fe.lFrame.isParent=!1}function qt(){const t=fe.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Ho(){return fe.lFrame.bindingIndex++}function Er(t){const n=fe.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function o1(t,n){const e=fe.lFrame;e.bindingIndex=e.bindingRootIndex=t,Ou(n)}function Ou(t){fe.lFrame.currentDirectiveIndex=t}function Mg(){return fe.lFrame.currentQueryIndex}function Au(t){fe.lFrame.currentQueryIndex=t}function s1(t){const n=t[J];return 2===n.type?n.declTNode:1===n.type?t[Vt]:null}function Tg(t,n,e){if(e&ae.SkipSelf){let o=n,i=t;for(;!(o=o.parent,null!==o||e&ae.Host||(o=s1(i),null===o||(i=i[Vo],10&o.type))););if(null===o)return!1;n=o,t=i}const r=fe.lFrame=Og();return r.currentTNode=n,r.lView=t,!0}function ku(t){const n=Og(),e=t[J];fe.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Og(){const t=fe.lFrame,n=null===t?null:t.child;return null===n?Ig(t):n}function Ig(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Ag(){const t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const kg=Ag;function Pu(){const t=Ag();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Wt(){return fe.lFrame.selectedIndex}function po(t){fe.lFrame.selectedIndex=t}function Xe(){const t=fe.lFrame;return vg(t.tView,t.selectedIndex)}function Ka(t,n){for(let e=n.directiveStart,r=n.directiveEnd;e<r;e++){const i=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(t.contentHooks??(t.contentHooks=[])).push(-e,s),a&&((t.contentHooks??(t.contentHooks=[])).push(e,a),(t.contentCheckHooks??(t.contentCheckHooks=[])).push(e,a)),l&&(t.viewHooks??(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks??(t.viewHooks=[])).push(e,c),(t.viewCheckHooks??(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks??(t.destroyHooks=[])).push(e,u)}}function Ja(t,n,e){Pg(t,n,3,e)}function Ya(t,n,e,r){(3&t[_e])===e&&Pg(t,n,e,r)}function Ru(t,n){let e=t[_e];(3&e)===n&&(e&=2047,e+=1,t[_e]=e)}function Pg(t,n,e,r){const i=r??-1,s=n.length-1;let a=0;for(let l=void 0!==r?65535&t[$o]:0;l<s;l++)if("number"==typeof n[l+1]){if(a=n[l],null!=r&&a>=r)break}else n[l]<0&&(t[$o]+=65536),(a<i||-1==i)&&(g1(t,e,n,l),t[$o]=(4294901760&t[$o])+l+2),l++}function g1(t,n,e,r){const o=e[r]<0,i=e[r+1],a=t[o?-e[r]:e[r]];if(o){if(t[_e]>>11<t[$o]>>16&&(3&t[_e])===n){t[_e]+=2048,Tn(4,a,i);try{i.call(a)}finally{Tn(5,a,i)}}}else{Tn(4,a,i);try{i.call(a)}finally{Tn(5,a,i)}}}const zo=-1;class ms{constructor(n,e,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function Fu(t,n,e){let r=0;for(;r<e.length;){const o=e[r];if("number"==typeof o){if(0!==o)break;r++;const i=e[r++],s=e[r++],a=e[r++];t.setAttribute(n,s,a,i)}else{const i=o,s=e[++r];Ng(i)?t.setProperty(n,i,s):t.setAttribute(n,i,s),r++}}return r}function Rg(t){return 3===t||4===t||6===t}function Ng(t){return 64===t.charCodeAt(0)}function _s(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let r=0;r<n.length;r++){const o=n[r];"number"==typeof o?e=o:0===e||Fg(t,e,o,null,-1===e||2===e?n[++r]:null)}}return t}function Fg(t,n,e,r,o){let i=0,s=t.length;if(-1===n)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===n){s=-1;break}if(a>n){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==o&&(t[i+1]=o));if(r===t[i+1])return void(t[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(t.splice(s,0,n),i=s+1),t.splice(i++,0,e),null!==r&&t.splice(i++,0,r),null!==o&&t.splice(i++,0,o)}function Lg(t){return t!==zo}function Qa(t){return 32767&t}function Za(t,n){let e=function v1(t){return t>>16}(t),r=n;for(;e>0;)r=r[Vo],e--;return r}let Lu=!0;function Xa(t){const n=Lu;return Lu=t,n}const jg=255,Vg=5;let C1=0;const sr={};function el(t,n){const e=$g(t,n);if(-1!==e)return e;const r=n[J];r.firstCreatePass&&(t.injectorIndex=n.length,ju(r.data,t),ju(n,null),ju(r.blueprint,null));const o=Vu(t,n),i=t.injectorIndex;if(Lg(o)){const s=Qa(o),a=Za(o,n),l=a[J].data;for(let c=0;c<8;c++)n[i+c]=a[s+c]|l[s+c]}return n[i+8]=o,i}function ju(t,n){t.push(0,0,0,0,0,0,0,0,n)}function $g(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Vu(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,r=null,o=n;for(;null!==o;){if(r=Wg(o),null===r)return zo;if(e++,o=o[Vo],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return zo}function $u(t,n,e){!function b1(t,n,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(us)&&(r=e[us]),null==r&&(r=e[us]=C1++);const o=r&jg;n.data[t+(o>>Vg)]|=1<<o}(t,n,e)}function Ug(t,n,e){if(e&ae.Optional||void 0!==t)return t;Ra()}function Bg(t,n,e,r){if(e&ae.Optional&&void 0===r&&(r=null),!(e&(ae.Self|ae.Host))){const o=t[Ua],i=xn(void 0);try{return o?o.get(n,r,e&ae.Optional):ng(n,r,e&ae.Optional)}finally{xn(i)}}return Ug(r,0,e)}function Hg(t,n,e,r=ae.Default,o){if(null!==t){if(1024&n[_e]){const s=function x1(t,n,e,r,o){let i=t,s=n;for(;null!==i&&null!==s&&1024&s[_e]&&!(256&s[_e]);){const a=zg(i,s,e,r|ae.Self,sr);if(a!==sr)return a;let l=i.parent;if(!l){const c=s[ug];if(c){const u=c.get(e,sr,r);if(u!==sr)return u}l=Wg(s),s=s[Vo]}i=l}return o}(t,n,e,r,sr);if(s!==sr)return s}const i=zg(t,n,e,r,sr);if(i!==sr)return i}return Bg(n,e,r,o)}function zg(t,n,e,r,o){const i=function S1(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(us)?t[us]:void 0;return"number"==typeof n?n>=0?n&jg:E1:n}(e);if("function"==typeof i){if(!Tg(n,t,r))return r&ae.Host?Ug(o,0,r):Bg(n,e,r,o);try{const s=i(r);if(null!=s||r&ae.Optional)return s;Ra()}finally{kg()}}else if("number"==typeof i){let s=null,a=$g(t,n),l=zo,c=r&ae.Host?n[$t][Vt]:null;for((-1===a||r&ae.SkipSelf)&&(l=-1===a?Vu(t,n):n[a+8],l!==zo&&qg(r,!1)?(s=n[J],a=Qa(l),n=Za(l,n)):a=-1);-1!==a;){const u=n[J];if(Gg(i,a,u.data)){const d=D1(a,n,e,s,r,c);if(d!==sr)return d}l=n[a+8],l!==zo&&qg(r,n[J].data[a+8]===c)&&Gg(i,a,n)?(s=u,a=Qa(l),n=Za(l,n)):a=-1}}return o}function D1(t,n,e,r,o,i){const s=n[J],a=s.data[t+8],u=tl(a,s,e,null==r?ps(a)&&Lu:r!=s&&0!=(3&a.type),o&ae.Host&&i===a);return null!==u?go(n,s,u,a):sr}function tl(t,n,e,r,o){const i=t.providerIndexes,s=n.data,a=1048575&i,l=t.directiveStart,u=i>>20,h=o?a+u:t.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(o){const f=s[l];if(f&&$n(f)&&f.type===e)return l}return null}function go(t,n,e,r){let o=t[e];const i=n.data;if(function m1(t){return t instanceof ms}(o)){const s=o;s.resolving&&function yS(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new U(-200,`Circular dependency in DI detected for ${t}${e}`)}(function Ae(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():he(t)}(i[e]));const a=Xa(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?xn(s.injectImpl):null;Tg(t,r,ae.Default);try{o=t[e]=s.factory(void 0,i,t,r),n.firstCreatePass&&e>=r.directiveStart&&function p1(t,n,e){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=n.type.prototype;if(r){const s=pg(n);(e.preOrderHooks??(e.preOrderHooks=[])).push(t,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,s)}o&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-t,o),i&&((e.preOrderHooks??(e.preOrderHooks=[])).push(t,i),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,i))}(e,i[e],n)}finally{null!==l&&xn(l),Xa(a),s.resolving=!1,kg()}}return o}function Gg(t,n,e){return!!(e[n+(t>>Vg)]&1<<t)}function qg(t,n){return!(t&ae.Self||t&ae.Host&&n)}class Go{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,r){return Hg(this._tNode,this._lView,n,ja(r),e)}}function E1(){return new Go(Pt(),V())}function Rt(t){return Cr(()=>{const n=t.prototype.constructor,e=n[wr]||Uu(n),r=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){const i=o[wr]||Uu(o);if(i&&i!==e)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Uu(t){return pu(t)?()=>{const n=Uu(se(t));return n&&n()}:fo(t)}function Wg(t){const n=t[J],e=n.type;return 2===e?n.declTNode:1===e?t[Vt]:null}const Wo="__parameters__";function Jo(t,n,e){return Cr(()=>{const r=function Bu(t){return function(...e){if(t){const r=t(...e);for(const o in r)this[o]=r[o]}}}(n);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Wo)?l[Wo]:Object.defineProperty(l,Wo,{value:[]})[Wo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class X{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Z({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function mo(t,n){t.forEach(e=>Array.isArray(e)?mo(e,n):n(e))}function Jg(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function rl(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function fn(t,n,e){let r=Yo(t,n);return r>=0?t[1|r]=e:(r=~r,function I1(t,n,e,r){let o=t.length;if(o==n)t.push(e,r);else if(1===o)t.push(r,t[0]),t[0]=e;else{for(o--,t.push(t[o-1],t[o]);o>n;)t[o]=t[o-2],o--;t[n]=e,t[n+1]=r}}(t,r,n,e)),r}function zu(t,n){const e=Yo(t,n);if(e>=0)return t[1|e]}function Yo(t,n){return function Yg(t,n,e){let r=0,o=t.length>>e;for(;o!==r;){const i=r+(o-r>>1),s=t[i<<e];if(n===s)return i<<e;s>n?o=i:r=i+1}return~(o<<e)}(t,n,1)}const bs=cs(Jo("Optional"),8),ws=cs(Jo("SkipSelf"),4);var sn=(()=>((sn=sn||{})[sn.Important=1]="Important",sn[sn.DashCase=2]="DashCase",sn))();const Yu=new Map;let Z1=0;const Zu="__ngContext__";function Ut(t,n){dn(n)?(t[Zu]=n[fs],function eE(t){Yu.set(t[fs],t)}(n)):t[Zu]=n}let Xu;function ed(t,n){return Xu(t,n)}function xs(t){const n=t[nt];return Vn(n)?n[nt]:n}function td(t){return mm(t[ds])}function nd(t){return mm(t[jn])}function mm(t){for(;null!==t&&!Vn(t);)t=t[jn];return t}function Zo(t,n,e,r,o){if(null!=r){let i,s=!1;Vn(r)?i=r:dn(r)&&(s=!0,r=r[Dr]);const a=kt(r);0===t&&null!==e?null==o?wm(n,e,a):_o(n,e,a,o||null,!0):1===t&&null!==e?_o(n,e,a,o||null,!0):2===t?function cd(t,n,e){const r=al(t,n);r&&function CE(t,n,e,r){t.removeChild(n,e,r)}(t,r,n,e)}(n,a,s):3===t&&n.destroyNode(a),null!=i&&function DE(t,n,e,r,o){const i=e[Ha];i!==kt(e)&&Zo(n,t,r,i,o);for(let a=Gt;a<e.length;a++){const l=e[a];Ms(l[J],l,t,n,r,i)}}(n,t,i,e,o)}}function od(t,n,e){return t.createElement(n,e)}function ym(t,n){const e=t[Uo],r=e.indexOf(n),o=n[nt];512&n[_e]&&(n[_e]&=-513,xu(o,-1)),e.splice(r,1)}function id(t,n){if(t.length<=Gt)return;const e=Gt+n,r=t[e];if(r){const o=r[hs];null!==o&&o!==t&&ym(o,r),n>0&&(t[e-1][jn]=r[jn]);const i=rl(t,Gt+n);!function hE(t,n){Ms(t,n,n[be],2,null,null),n[Dr]=null,n[Vt]=null}(r[J],r);const s=i[or];null!==s&&s.detachView(i[J]),r[nt]=null,r[jn]=null,r[_e]&=-65}return r}function vm(t,n){if(!(128&n[_e])){const e=n[be];e.destroyNode&&Ms(t,n,e,3,null,null),function gE(t){let n=t[ds];if(!n)return sd(t[J],t);for(;n;){let e=null;if(dn(n))e=n[ds];else{const r=n[Gt];r&&(e=r)}if(!e){for(;n&&!n[jn]&&n!==t;)dn(n)&&sd(n[J],n),n=n[nt];null===n&&(n=t),dn(n)&&sd(n[J],n),e=n&&n[jn]}n=e}}(n)}}function sd(t,n){if(!(128&n[_e])){n[_e]&=-65,n[_e]|=128,function vE(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let r=0;r<e.length;r+=2){const o=n[e[r]];if(!(o instanceof ms)){const i=e[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],l=i[s+1];Tn(4,a,l);try{l.call(a)}finally{Tn(5,a,l)}}else{Tn(4,o,i);try{i.call(o)}finally{Tn(5,o,i)}}}}}(t,n),function yE(t,n){const e=t.cleanup,r=n[jo];let o=-1;if(null!==e)for(let i=0;i<e.length-1;i+=2)if("string"==typeof e[i]){const s=e[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=e[i+1]];e[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();n[jo]=null}}(t,n),1===n[J].type&&n[be].destroy();const e=n[hs];if(null!==e&&Vn(n[nt])){e!==n[nt]&&ym(e,n);const r=n[or];null!==r&&r.detachView(t)}!function tE(t){Yu.delete(t[fs])}(n)}}function Cm(t,n,e){return function bm(t,n,e){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return e[Dr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=t.data[r.directiveStart+o];if(i===rr.None||i===rr.Emulated)return null}return hn(r,e)}}(t,n.parent,e)}function _o(t,n,e,r,o){t.insertBefore(n,e,r,o)}function wm(t,n,e){t.appendChild(n,e)}function Dm(t,n,e,r,o){null!==r?_o(t,n,e,r,o):wm(t,n,e)}function al(t,n){return t.parentNode(n)}let ad,hd,dl,xm=function Em(t,n,e){return 40&t.type?hn(t,e):null};function ll(t,n,e,r){const o=Cm(t,r,n),i=n[be],a=function Sm(t,n,e){return xm(t,n,e)}(r.parent||n[Vt],r,n);if(null!=o)if(Array.isArray(e))for(let l=0;l<e.length;l++)Dm(i,o,e[l],a,!1);else Dm(i,o,e,a,!1);void 0!==ad&&ad(i,r,n,e,o)}function cl(t,n){if(null!==n){const e=n.type;if(3&e)return hn(n,t);if(4&e)return ld(-1,t[n.index]);if(8&e){const r=n.child;if(null!==r)return cl(t,r);{const o=t[n.index];return Vn(o)?ld(-1,o):kt(o)}}if(32&e)return ed(n,t)()||kt(t[n.index]);{const r=Tm(t,n);return null!==r?Array.isArray(r)?r[0]:cl(xs(t[$t]),r):cl(t,n.next)}}return null}function Tm(t,n){return null!==n?t[$t][Vt].projection[n.projection]:null}function ld(t,n){const e=Gt+t+1;if(e<n.length){const r=n[e],o=r[J].firstChild;if(null!==o)return cl(r,o)}return n[Ha]}function ud(t,n,e,r,o,i,s){for(;null!=e;){const a=r[e.index],l=e.type;if(s&&0===n&&(a&&Ut(kt(a),r),e.flags|=2),32!=(32&e.flags))if(8&l)ud(t,n,e.child,r,o,i,!1),Zo(n,t,o,a,i);else if(32&l){const c=ed(e,r);let u;for(;u=c();)Zo(n,t,o,u,i);Zo(n,t,o,a,i)}else 16&l?Om(t,n,r,e,o,i):Zo(n,t,o,a,i);e=s?e.projectionNext:e.next}}function Ms(t,n,e,r,o,i){ud(e,r,t.firstChild,n,o,i,!1)}function Om(t,n,e,r,o,i){const s=e[$t],l=s[Vt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Zo(n,t,o,l[c],i);else ud(t,n,l,s[nt],o,i,!0)}function Im(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function Am(t,n,e){const{mergedAttrs:r,classes:o,styles:i}=e;null!==r&&Fu(t,n,r),null!==o&&Im(t,n,o),null!==i&&function EE(t,n,e){t.setAttribute(n,"style",e)}(t,n,i)}function Nm(t){return function fd(){if(void 0===dl&&(dl=null,We.trustedTypes))try{dl=We.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return dl}()?.createScriptURL(t)||t}class Fm{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Zp})`}}function zr(t){return t instanceof Fm?t.changingThisBreaksApplicationSecurity:t}function Ts(t,n){const e=function NE(t){return t instanceof Fm&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${Zp})`)}return e===n}const VE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var gt=(()=>((gt=gt||{})[gt.NONE=0]="NONE",gt[gt.HTML=1]="HTML",gt[gt.STYLE=2]="STYLE",gt[gt.SCRIPT=3]="SCRIPT",gt[gt.URL=4]="URL",gt[gt.RESOURCE_URL=5]="RESOURCE_URL",gt))();function ei(t){const n=Is();return n?n.sanitize(gt.URL,t)||"":Ts(t,"URL")?zr(t):function pd(t){return(t=String(t)).match(VE)?t:"unsafe:"+t}(he(t))}function Hm(t){const n=Is();if(n)return Nm(n.sanitize(gt.RESOURCE_URL,t)||"");if(Ts(t,"ResourceURL"))return Nm(zr(t));throw new U(904,!1)}function Is(){const t=V();return t&&t[wu]}const fl=new X("ENVIRONMENT_INITIALIZER"),Gm=new X("INJECTOR",-1),qm=new X("INJECTOR_DEF_TYPES");class Wm{get(n,e=as){if(e===as){const r=new Error(`NullInjectorError: No provider for ${Be(n)}!`);throw r.name="NullInjectorError",r}return e}}function XE(...t){return{\u0275providers:Km(0,t),\u0275fromNgModule:!0}}function Km(t,...n){const e=[],r=new Set;let o;return mo(n,i=>{const s=i;yd(s,e,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&Jm(o,e),e}function Jm(t,n){for(let e=0;e<t.length;e++){const{providers:o}=t[e];vd(o,i=>{n.push(i)})}}function yd(t,n,e,r){if(!(t=se(t)))return!1;let o=null,i=eg(t);const s=!i&&Pe(t);if(i||s){if(s&&!s.standalone)return!1;o=t}else{const l=t.ngModule;if(i=eg(l),!i)return!1;o=l}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)yd(c,n,e,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{mo(i.imports,u=>{yd(u,n,e,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&Jm(c,n)}if(!a){const c=fo(o)||(()=>new o);n.push({provide:o,useFactory:c,deps:Oe},{provide:qm,useValue:o,multi:!0},{provide:fl,useValue:()=>K(o),multi:!0})}const l=i.providers;null==l||a||vd(l,u=>{n.push(u)})}}return o!==t&&void 0!==t.providers}function vd(t,n){for(let e of t)gu(e)&&(e=e.\u0275providers),Array.isArray(e)?vd(e,n):n(e)}const ex=Ve({provide:String,useValue:Ve});function Cd(t){return null!==t&&"object"==typeof t&&ex in t}function yo(t){return"function"==typeof t}const bd=new X("Set Injector scope."),pl={},nx={};let wd;function gl(){return void 0===wd&&(wd=new Wm),wd}class ar{}class Zm extends ar{get destroyed(){return this._destroyed}constructor(n,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sd(n,s=>this.processProvider(s)),this.records.set(Gm,ti(void 0,this)),o.has("environment")&&this.records.set(ar,ti(void 0,this));const i=this.records.get(bd);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(qm.multi,Oe,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const e=Fo(this),r=xn(void 0);try{return n()}finally{Fo(e),xn(r)}}get(n,e=as,r=ae.Default){this.assertNotDestroyed(),r=ja(r);const o=Fo(this),i=xn(void 0);try{if(!(r&ae.SkipSelf)){let a=this.records.get(n);if(void 0===a){const l=function ax(t){return"function"==typeof t||"object"==typeof t&&t instanceof X}(n)&&Na(n);a=l&&this.injectableDefInScope(l)?ti(Dd(n),pl):null,this.records.set(n,a)}if(null!=a)return this.hydrate(n,a)}return(r&ae.Self?gl():this.parent).get(n,e=r&ae.Optional&&e===as?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[La]=s[La]||[]).unshift(Be(n)),o)throw s;return function kS(t,n,e,r){const o=t[La];throw n[rg]&&o.unshift(n[rg]),t.message=function PS(t,n,e,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==OS?t.slice(2):t;let o=Be(n);if(Array.isArray(n))o=n.map(Be).join(" -> ");else if("object"==typeof n){let i=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Be(a)))}o=`{${i.join(", ")}}`}return`${e}${r?"("+r+")":""}[${o}]: ${t.replace(TS,"\n  ")}`}("\n"+t.message,o,e,r),t[MS]=o,t[La]=null,t}(s,n,"R3InjectorError",this.source)}throw s}finally{xn(i),Fo(o)}}resolveInjectorInitializers(){const n=Fo(this),e=xn(void 0);try{const r=this.get(fl.multi,Oe,ae.Self);for(const o of r)o()}finally{Fo(n),xn(e)}}toString(){const n=[],e=this.records;for(const r of e.keys())n.push(Be(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(n){let e=yo(n=se(n))?n:se(n&&n.provide);const r=function ox(t){return Cd(t)?ti(void 0,t.useValue):ti(Xm(t),pl)}(n);if(yo(n)||!0!==n.multi)this.records.get(e);else{let o=this.records.get(e);o||(o=ti(void 0,pl,!0),o.factory=()=>vu(o.multi),this.records.set(e,o)),e=n,o.multi.push(n)}this.records.set(e,r)}hydrate(n,e){return e.value===pl&&(e.value=nx,e.value=e.factory()),"object"==typeof e.value&&e.value&&function sx(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=se(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Dd(t){const n=Na(t),e=null!==n?n.factory:fo(t);if(null!==e)return e;if(t instanceof X)throw new U(204,!1);if(t instanceof Function)return function rx(t){const n=t.length;if(n>0)throw function Cs(t,n){const e=[];for(let r=0;r<t;r++)e.push(n);return e}(n,"?"),new U(204,!1);const e=function SS(t){return t&&(t[Fa]||t[tg])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new U(204,!1)}function Xm(t,n,e){let r;if(yo(t)){const o=se(t);return fo(o)||Dd(o)}if(Cd(t))r=()=>se(t.useValue);else if(function Qm(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...vu(t.deps||[]));else if(function Ym(t){return!(!t||!t.useExisting)}(t))r=()=>K(se(t.useExisting));else{const o=se(t&&(t.useClass||t.provide));if(!function ix(t){return!!t.deps}(t))return fo(o)||Dd(o);r=()=>new o(...vu(t.deps))}return r}function ti(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Sd(t,n){for(const e of t)Array.isArray(e)?Sd(e,n):e&&gu(e)?Sd(e.\u0275providers,n):n(e)}class lx{}class e_{}class ux{resolveComponentFactory(n){throw function cx(t){const n=Error(`No component factory found for ${Be(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let As=(()=>{class t{}return t.NULL=new ux,t})();function dx(){return ni(Pt(),V())}function ni(t,n){return new pn(hn(t,n))}let pn=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=dx,t})();function hx(t){return t instanceof pn?t.nativeElement:t}class n_{}let Mr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function fx(){const t=V(),e=on(Pt().index,t);return(dn(e)?e:t)[be]}(),t})(),px=(()=>{class t{}return t.\u0275prov=Z({token:t,providedIn:"root",factory:()=>null}),t})();class ks{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const gx=new ks("15.2.10"),Ed={},xd="ngOriginalError";function Md(t){return t[xd]}class ri{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&Md(n);for(;e&&Md(e);)e=Md(e);return e||null}}function r_(t){return t.ownerDocument}function Tr(t){return t instanceof Function?t():t}function i_(t,n,e){let r=t.length;for(;;){const o=t.indexOf(n,e);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=n.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}e=o+1}}const s_="ng-template";function Ex(t,n,e){let r=0,o=!0;for(;r<t.length;){let i=t[r++];if("string"==typeof i&&o){const s=t[r++];if(e&&"class"===i&&-1!==i_(s.toLowerCase(),n,0))return!0}else{if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===n)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function a_(t){return 4===t.type&&t.value!==s_}function xx(t,n,e){return n===(4!==t.type||e?t.value:s_)}function Mx(t,n,e){let r=4;const o=t.attrs||[],i=function Ix(t){for(let n=0;n<t.length;n++)if(Rg(t[n]))return n;return t.length}(o);let s=!1;for(let a=0;a<n.length;a++){const l=n[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!xx(t,l,e)||""===l&&1===n.length){if(Un(r))return!1;s=!0}}else{const c=8&r?l:n[++a];if(8&r&&null!==t.attrs){if(!Ex(t.attrs,c,e)){if(Un(r))return!1;s=!0}continue}const d=Tx(8&r?"class":l,o,a_(t),e);if(-1===d){if(Un(r))return!1;s=!0;continue}if(""!==c){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==i_(f,c,0)||2&r&&c!==h){if(Un(r))return!1;s=!0}}}}else{if(!s&&!Un(r)&&!Un(l))return!1;if(s&&Un(l))continue;s=!1,r=l|1&r}}return Un(r)||s}function Un(t){return 0==(1&t)}function Tx(t,n,e,r){if(null===n)return-1;let o=0;if(r||!e){let i=!1;for(;o<n.length;){const s=n[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=n[++o];for(;"string"==typeof a;)a=n[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function Ax(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const r=t[e];if("number"==typeof r)return-1;if(r===n)return e;e++}return-1}(n,t)}function l_(t,n,e=!1){for(let r=0;r<n.length;r++)if(Mx(t,n[r],e))return!0;return!1}function c_(t,n){return t?":not("+n.trim()+")":n}function Px(t){let n=t[0],e=1,r=2,o="",i=!1;for(;e<t.length;){let s=t[e];if("string"==typeof s)if(2&r){const a=t[++e];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Un(s)&&(n+=c_(i,o),o=""),r=s,i=i||!Un(r);e++}return""!==o&&(n+=c_(i,o)),n}const pe={};function y(t){u_(Te(),V(),Wt()+t,!1)}function u_(t,n,e,r){if(!r)if(3==(3&n[_e])){const i=t.preOrderCheckHooks;null!==i&&Ja(n,i,e)}else{const i=t.preOrderHooks;null!==i&&Ya(n,i,0,e)}po(e)}function p_(t,n=null,e=null,r){const o=g_(t,n,e,r);return o.resolveInjectorInitializers(),o}function g_(t,n=null,e=null,r,o=new Set){const i=[e||Oe,XE(t)];return r=r||("object"==typeof t?void 0:Be(t)),new Zm(i,n||gl(),r||null,o)}let lr=(()=>{class t{static create(e,r){if(Array.isArray(e))return p_({name:""},r,e,"");{const o=e.name??"";return p_({name:o},e.parent,e.providers,o)}}}return t.THROW_IF_NOT_FOUND=as,t.NULL=new Wm,t.\u0275prov=Z({token:t,providedIn:"any",factory:()=>K(Gm)}),t.__NG_ELEMENT_ID__=-1,t})();function N(t,n=ae.Default){const e=V();return null===e?K(t,n):Hg(Pt(),e,se(t),n)}function D_(t,n){const e=t.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const i=e[r+1];if(-1!==i){const s=t.data[i];Au(e[r]),s.contentQueries(2,n[i],i)}}}function _l(t,n,e,r,o,i,s,a,l,c,u){const d=n.blueprint.slice();return d[Dr]=o,d[_e]=76|r,(null!==u||t&&1024&t[_e])&&(d[_e]|=1024),Cg(d),d[nt]=d[Vo]=t,d[lt]=e,d[Ba]=s||t&&t[Ba],d[be]=a||t&&t[be],d[wu]=l||t&&t[wu]||null,d[Ua]=c||t&&t[Ua]||null,d[Vt]=i,d[fs]=function X1(){return Z1++}(),d[ug]=u,d[$t]=2==n.type?t[$t]:d,d}function si(t,n,e,r,o){let i=t.data[n];if(null===i)i=function kd(t,n,e,r,o){const i=Dg(),s=Mu(),l=t.data[n]=function iM(t,n,e,r,o,i){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,e,n,r,o);return null===t.firstChild&&(t.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(t,n,e,r,o),function r1(){return fe.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=e,i.value=r,i.attrs=o;const s=function gs(){const t=fe.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return ir(i,!0),i}function Ps(t,n,e,r){if(0===e)return-1;const o=n.length;for(let i=0;i<e;i++)n.push(r),t.blueprint.push(r),t.data.push(null);return o}function Pd(t,n,e){ku(n);try{const r=t.viewQuery;null!==r&&Bd(1,r,e);const o=t.template;null!==o&&S_(t,n,o,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&D_(t,n),t.staticViewQueries&&Bd(2,t.viewQuery,e);const i=t.components;null!==i&&function nM(t,n){for(let e=0;e<n.length;e++)EM(t,n[e])}(n,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[_e]&=-5,Pu()}}function yl(t,n,e,r){const o=n[_e];if(128!=(128&o)){ku(n);try{Cg(n),function Eg(t){return fe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&S_(t,n,e,2,r);const s=3==(3&o);if(s){const c=t.preOrderCheckHooks;null!==c&&Ja(n,c,null)}else{const c=t.preOrderHooks;null!==c&&Ya(n,c,0,null),Ru(n,0)}if(function DM(t){for(let n=td(t);null!==n;n=nd(n)){if(!n[dg])continue;const e=n[Uo];for(let r=0;r<e.length;r++){const o=e[r];512&o[_e]||xu(o[nt],1),o[_e]|=512}}}(n),function wM(t){for(let n=td(t);null!==n;n=nd(n))for(let e=Gt;e<n.length;e++){const r=n[e],o=r[J];Wa(r)&&yl(o,r,o.template,r[lt])}}(n),null!==t.contentQueries&&D_(t,n),s){const c=t.contentCheckHooks;null!==c&&Ja(n,c)}else{const c=t.contentHooks;null!==c&&Ya(n,c,1),Ru(n,1)}!function eM(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const o=e[r];if(o<0)po(~o);else{const i=o,s=e[++r],a=e[++r];o1(s,i),a(2,n[i])}}}finally{po(-1)}}(t,n);const a=t.components;null!==a&&function tM(t,n){for(let e=0;e<n.length;e++)SM(t,n[e])}(n,a);const l=t.viewQuery;if(null!==l&&Bd(2,l,r),s){const c=t.viewCheckHooks;null!==c&&Ja(n,c)}else{const c=t.viewHooks;null!==c&&Ya(n,c,2),Ru(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[_e]&=-41,512&n[_e]&&(n[_e]&=-513,xu(n[nt],-1))}finally{Pu()}}}function S_(t,n,e,r,o){const i=Wt(),s=2&r;try{po(-1),s&&n.length>Ke&&u_(t,n,Ke,!1),Tn(s?2:0,o),e(r,o)}finally{po(i),Tn(s?3:1,o)}}function Rd(t,n,e){if(Su(n)){const o=n.directiveEnd;for(let i=n.directiveStart;i<o;i++){const s=t.data[i];s.contentQueries&&s.contentQueries(1,e[i],i)}}}function Nd(t,n,e){wg()&&(function hM(t,n,e,r){const o=e.directiveStart,i=e.directiveEnd;ps(e)&&function vM(t,n,e){const r=hn(n,t),o=E_(e),i=t[Ba],s=vl(t,_l(t,o,null,e.onPush?32:16,r,n,i,i.createRenderer(r,e),null,null,null));t[n.index]=s}(n,e,t.data[o+e.componentOffset]),t.firstCreatePass||el(e,n),Ut(r,n);const s=e.initialInputs;for(let a=o;a<i;a++){const l=t.data[a],c=go(n,t,a,e);Ut(c,n),null!==s&&CM(0,a-o,c,l,0,s),$n(l)&&(on(e.index,n)[lt]=go(n,t,a,e))}}(t,n,e,hn(e,n)),64==(64&e.flags)&&I_(t,n,e))}function Fd(t,n,e=hn){const r=n.localNames;if(null!==r){let o=n.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?e(n,t):t[s];t[o++]=a}}}function E_(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Ld(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Ld(t,n,e,r,o,i,s,a,l,c){const u=Ke+r,d=u+o,h=function rM(t,n){const e=[];for(let r=0;r<n;r++)e.push(r<t?null:pe);return e}(u,d),f="function"==typeof c?c():c;return h[J]={type:t,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function x_(t,n,e,r){const o=k_(n);null===e?o.push(r):(o.push(e),t.firstCreatePass&&P_(t).push(r,o.length-1))}function M_(t,n,e,r){for(let o in t)if(t.hasOwnProperty(o)){e=null===e?{}:e;const i=t[o];null===r?T_(e,n,o,i):r.hasOwnProperty(o)&&T_(e,n,r[o],i)}return e}function T_(t,n,e,r){t.hasOwnProperty(e)?t[e].push(n,r):t[e]=[n,r]}function jd(t,n,e,r){if(wg()){const o=null===r?null:{"":-1},i=function pM(t,n){const e=t.directiveRegistry;let r=null,o=null;if(e)for(let i=0;i<e.length;i++){const s=e[i];if(l_(n,s.selectors,!1))if(r||(r=[]),$n(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Vd(t,n,a.length)}else r.unshift(s),Vd(t,n,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(t,e);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&O_(t,n,e,s,o,a),o&&function gM(t,n,e){if(n){const r=t.localNames=[];for(let o=0;o<n.length;o+=2){const i=e[n[o+1]];if(null==i)throw new U(-301,!1);r.push(n[o],i)}}}(e,r,o)}e.mergedAttrs=_s(e.mergedAttrs,e.attrs)}function O_(t,n,e,r,o,i){for(let c=0;c<r.length;c++)$u(el(e,n),t,r[c].type);!function _M(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Ps(t,n,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];e.mergedAttrs=_s(e.mergedAttrs,u.hostAttrs),yM(t,e,n,l,u),mM(l,u,o),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??(t.preOrderHooks=[])).push(e.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function sM(t,n,e){const o=n.directiveEnd,i=t.data,s=n.attrs,a=[];let l=null,c=null;for(let u=n.directiveStart;u<o;u++){const d=i[u],h=e?e.get(d):null,p=h?h.outputs:null;l=M_(d.inputs,u,l,h?h.inputs:null),c=M_(d.outputs,u,c,p);const v=null===l||null===s||a_(n)?null:bM(l,u,s);a.push(v)}null!==l&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=l,n.outputs=c}(t,e,i)}function I_(t,n,e){const r=e.directiveStart,o=e.directiveEnd,i=e.index,s=function i1(){return fe.lFrame.currentDirectiveIndex}();try{po(i);for(let a=r;a<o;a++){const l=t.data[a],c=n[a];Ou(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&fM(l,c)}}finally{po(-1),Ou(s)}}function fM(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Vd(t,n,e){n.componentOffset=e,(t.components??(t.components=[])).push(n.index)}function mM(t,n,e){if(e){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)e[n.exportAs[r]]=t;$n(n)&&(e[""]=t)}}function yM(t,n,e,r,o){t.data[r]=o;const i=o.factory||(o.factory=fo(o.type)),s=new ms(i,$n(o),N);t.blueprint[r]=s,e[r]=s,function uM(t,n,e,r,o){const i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~n.index;(function dM(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,r,i)}}(t,n,r,Ps(t,e,o.hostVars,pe),o)}function cr(t,n,e,r,o,i){const s=hn(t,n);!function $d(t,n,e,r,o,i,s){if(null==i)t.removeAttribute(n,o,e);else{const a=null==s?he(i):s(i,r||"",o);t.setAttribute(n,o,a,e)}}(n[be],s,i,t.value,e,r,o)}function CM(t,n,e,r,o,i){const s=i[n];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(e,d,c,u):e[u]=d}}}function bM(t,n,e){let r=null,o=0;for(;o<e.length;){const i=e[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(t.hasOwnProperty(i)){null===r&&(r=[]);const s=t[i];for(let a=0;a<s.length;a+=2)if(s[a]===n){r.push(i,s[a+1],e[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function A_(t,n,e,r){return[t,!0,!1,n,null,0,r,e,null,null]}function SM(t,n){const e=on(n,t);if(Wa(e)){const r=e[J];48&e[_e]?yl(r,e,r.template,e[lt]):e[ho]>0&&Ud(e)}}function Ud(t){for(let r=td(t);null!==r;r=nd(r))for(let o=Gt;o<r.length;o++){const i=r[o];if(Wa(i))if(512&i[_e]){const s=i[J];yl(s,i,s.template,i[lt])}else i[ho]>0&&Ud(i)}const e=t[J].components;if(null!==e)for(let r=0;r<e.length;r++){const o=on(e[r],t);Wa(o)&&o[ho]>0&&Ud(o)}}function EM(t,n){const e=on(n,t),r=e[J];(function xM(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(r,e),Pd(r,e,e[lt])}function vl(t,n){return t[ds]?t[cg][jn]=n:t[ds]=n,t[cg]=n,n}function Cl(t){for(;t;){t[_e]|=32;const n=xs(t);if(VS(t)&&!n)return t;t=n}return null}function bl(t,n,e,r=!0){const o=n[Ba];o.begin&&o.begin();try{yl(t,n,t.template,e)}catch(s){throw r&&N_(n,s),s}finally{o.end&&o.end()}}function Bd(t,n,e){Au(0),n(t,e)}function k_(t){return t[jo]||(t[jo]=[])}function P_(t){return t.cleanup||(t.cleanup=[])}function N_(t,n){const e=t[Ua],r=e?e.get(ri,null):null;r&&r.handleError(n)}function Hd(t,n,e,r,o){for(let i=0;i<e.length;){const s=e[i++],a=e[i++],l=n[s],c=t.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function Or(t,n,e){const r=qa(n,t);!function _m(t,n,e){t.setValue(n,e)}(t[be],r,e)}function wl(t,n,e){let r=e?t.styles:null,o=e?t.classes:null,i=0;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?i=a:1==i?o=fu(o,a):2==i&&(r=fu(r,a+": "+n[++s]+";"))}e?t.styles=r:t.stylesWithoutHost=r,e?t.classes=o:t.classesWithoutHost=o}function Dl(t,n,e,r,o=!1){for(;null!==e;){const i=n[e.index];if(null!==i&&r.push(kt(i)),Vn(i))for(let a=Gt;a<i.length;a++){const l=i[a],c=l[J].firstChild;null!==c&&Dl(l[J],l,c,r)}const s=e.type;if(8&s)Dl(t,n,e.child,r);else if(32&s){const a=ed(e,n);let l;for(;l=a();)r.push(l)}else if(16&s){const a=Tm(n,e);if(Array.isArray(a))r.push(...a);else{const l=xs(n[$t]);Dl(l[J],l,a,r,!0)}}e=o?e.projectionNext:e.next}return r}class Rs{get rootNodes(){const n=this._lView,e=n[J];return Dl(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[lt]}set context(n){this._lView[lt]=n}get destroyed(){return 128==(128&this._lView[_e])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[nt];if(Vn(n)){const e=n[za],r=e?e.indexOf(this):-1;r>-1&&(id(n,r),rl(e,r))}this._attachedToViewContainer=!1}vm(this._lView[J],this._lView)}onDestroy(n){x_(this._lView[J],this._lView,null,n)}markForCheck(){Cl(this._cdRefInjectingView||this._lView)}detach(){this._lView[_e]&=-65}reattach(){this._lView[_e]|=64}detectChanges(){bl(this._lView[J],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pE(t,n){Ms(t,n,n[be],2,null,null)}(this._lView[J],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=n}}class MM extends Rs{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;bl(n[J],n,n[lt],!1)}checkNoChanges(){}get context(){return null}}class F_ extends As{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Pe(n);return new Ns(e,this.ngModule)}}function L_(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class OM{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,r){r=ja(r);const o=this.injector.get(n,Ed,r);return o!==Ed||e===Ed?o:this.parentInjector.get(n,e,r)}}class Ns extends e_{get inputs(){return L_(this.componentDef.inputs)}get outputs(){return L_(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function Rx(t){return t.map(Px).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,r,o){let i=(o=o||this.ngModule)instanceof ar?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new OM(n,i):n,a=s.get(n_,null);if(null===a)throw new U(407,!1);const l=s.get(px,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function oM(t,n,e){return t.selectRootElement(n,e===rr.ShadowDom)}(c,r,this.componentDef.encapsulation):od(c,u,function TM(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Ld(0,null,null,1,0,null,null,null,null,null),p=_l(null,f,null,h,null,null,a,c,l,s,null);let v,_;ku(p);try{const w=this.componentDef;let T,D=null;w.findHostDirectiveDefs?(T=[],D=new Map,w.findHostDirectiveDefs(w,T,D),T.push(w)):T=[w];const P=function AM(t,n){const e=t[J],r=Ke;return t[r]=n,si(e,r,2,"#host",null)}(p,d),F=function kM(t,n,e,r,o,i,s,a){const l=o[J];!function PM(t,n,e,r){for(const o of t)n.mergedAttrs=_s(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(wl(n,n.mergedAttrs,!0),null!==e&&Am(r,e,n))}(r,t,n,s);const c=i.createRenderer(n,e),u=_l(o,E_(e),null,e.onPush?32:16,o[t.index],t,i,c,a||null,null,null);return l.firstCreatePass&&Vd(l,t,r.length-1),vl(o,u),o[t.index]=u}(P,d,w,T,p,a,c);_=vg(f,Ke),d&&function NM(t,n,e,r){if(r)Fu(t,e,["ng-version",gx.full]);else{const{attrs:o,classes:i}=function Nx(t){const n=[],e=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&n.push(i,t[++r]):8===o&&e.push(i);else{if(!Un(o))break;o=i}r++}return{attrs:n,classes:e}}(n.selectors[0]);o&&Fu(t,e,o),i&&i.length>0&&Im(t,e,i.join(" "))}}(c,w,d,r),void 0!==e&&function FM(t,n,e){const r=t.projection=[];for(let o=0;o<n.length;o++){const i=e[o];r.push(null!=i?Array.from(i):null)}}(_,this.ngContentSelectors,e),v=function RM(t,n,e,r,o,i){const s=Pt(),a=o[J],l=hn(s,o);O_(a,o,s,e,null,r);for(let u=0;u<e.length;u++)Ut(go(o,a,s.directiveStart+u,s),o);I_(a,o,s),l&&Ut(l,o);const c=go(o,a,s.directiveStart+s.componentOffset,s);if(t[lt]=o[lt]=c,null!==i)for(const u of i)u(c,n);return Rd(a,s,t),c}(F,w,T,D,p,[LM]),Pd(f,p,null)}finally{Pu()}return new IM(this.componentType,v,ni(_,p),p,_)}}class IM extends lx{constructor(n,e,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new MM(o),this.componentType=n}setInput(n,e){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[n])){const i=this._rootLView;Hd(i[J],i,o,n,e),Cl(on(this._tNode.index,i))}}get injector(){return new Go(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function LM(){const t=Pt();Ka(V()[J],t)}function Ne(t){let n=function j_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const r=[t];for(;n;){let o;if($n(t))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new U(903,!1);o=n.\u0275dir}if(o){if(e){r.push(o);const s=t;s.inputs=zd(t.inputs),s.declaredInputs=zd(t.declaredInputs),s.outputs=zd(t.outputs);const a=o.hostBindings;a&&UM(t,a);const l=o.viewQuery,c=o.contentQueries;if(l&&VM(t,l),c&&$M(t,c),hu(t.inputs,o.inputs),hu(t.declaredInputs,o.declaredInputs),hu(t.outputs,o.outputs),$n(o)&&o.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(t),a===Ne&&(e=!1)}}n=Object.getPrototypeOf(n)}!function jM(t){let n=0,e=null;for(let r=t.length-1;r>=0;r--){const o=t[r];o.hostVars=n+=o.hostVars,o.hostAttrs=_s(o.hostAttrs,e=_s(e,o.hostAttrs))}}(r)}function zd(t){return t===br?{}:t===Oe?[]:t}function VM(t,n){const e=t.viewQuery;t.viewQuery=e?(r,o)=>{n(r,o),e(r,o)}:n}function $M(t,n){const e=t.contentQueries;t.contentQueries=e?(r,o,i)=>{n(r,o,i),e(r,o,i)}:n}function UM(t,n){const e=t.hostBindings;t.hostBindings=e?(r,o)=>{n(r,o),e(r,o)}:n}function Sl(t){return!!Gd(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Gd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ur(t,n,e){return t[n]=e}function Bt(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function vo(t,n,e,r){const o=Bt(t,n,e);return Bt(t,n+1,r)||o}function Nt(t,n,e,r){const o=V();return Bt(o,Ho(),n)&&(Te(),cr(Xe(),o,t,n,e,r)),Nt}function ci(t,n,e,r,o,i){const a=vo(t,function Sr(){return fe.lFrame.bindingIndex}(),e,o);return Er(2),a?n+he(e)+r+he(o)+i:pe}function H(t,n,e,r,o,i,s,a){const l=V(),c=Te(),u=t+Ke,d=c.firstCreatePass?function QM(t,n,e,r,o,i,s,a,l){const c=n.consts,u=si(n,t,4,s||null,Hr(c,a));jd(n,e,u,Hr(c,l)),Ka(n,u);const d=u.tView=Ld(2,u,r,o,i,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,e,r,o,i,s):c.data[u];ir(d,!1);const h=l[be].createComment("");ll(c,l,h,d),Ut(h,l),vl(l,l[u]=A_(h,l,h,d)),Ga(d)&&Nd(c,l,d),null!=s&&Fd(l,d,a)}function Ls(t){return function Bo(t,n){return t[n]}(function n1(){return fe.lFrame.contextLView}(),Ke+t)}function x(t,n,e){const r=V();return Bt(r,Ho(),n)&&function gn(t,n,e,r,o,i,s,a){const l=hn(n,e);let u,c=n.inputs;!a&&null!=c&&(u=c[r])?(Hd(t,e,u,r,o),ps(n)&&function lM(t,n){const e=on(n,t);16&e[_e]||(e[_e]|=32)}(e,n.index)):3&n.type&&(r=function aM(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),o=null!=s?s(o,n.value||"",r):o,i.setProperty(l,r,o))}(Te(),Xe(),r,t,n,r[be],e,!1),x}function qd(t,n,e,r,o){const s=o?"class":"style";Hd(t,e,n.inputs[s],s,r)}function g(t,n,e,r){const o=V(),i=Te(),s=Ke+t,a=o[be],l=i.firstCreatePass?function XM(t,n,e,r,o,i){const s=n.consts,l=si(n,t,2,r,Hr(s,o));return jd(n,e,l,Hr(s,i)),null!==l.attrs&&wl(l,l.attrs,!1),null!==l.mergedAttrs&&wl(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(s,i,o,n,e,r):i.data[s],c=o[s]=od(a,n,function f1(){return fe.lFrame.currentNamespace}()),u=Ga(l);return ir(l,!0),Am(a,c,l),32!=(32&l.flags)&&ll(i,o,c,l),0===function QS(){return fe.lFrame.elementDepthCount}()&&Ut(c,o),function ZS(){fe.lFrame.elementDepthCount++}(),u&&(Nd(i,o,l),Rd(i,l,o)),null!==r&&Fd(o,l),g}function m(){let t=Pt();Mu()?Tu():(t=t.parent,ir(t,!1));const n=t;!function XS(){fe.lFrame.elementDepthCount--}();const e=Te();return e.firstCreatePass&&(Ka(e,t),Su(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function _1(t){return 0!=(8&t.flags)}(n)&&qd(e,n,V(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function y1(t){return 0!=(16&t.flags)}(n)&&qd(e,n,V(),n.stylesWithoutHost,!1),m}function Ye(t,n,e,r){return g(t,n,e,r),m(),Ye}function mi(t,n,e){const r=V(),o=Te(),i=t+Ke,s=o.firstCreatePass?function eT(t,n,e,r,o){const i=n.consts,s=Hr(i,r),a=si(n,t,8,"ng-container",s);return null!==s&&wl(a,s,!0),jd(n,e,a,Hr(i,o)),null!==n.queries&&n.queries.elementStart(n,a),a}(i,o,r,n,e):o.data[i];ir(s,!0);const a=r[i]=r[be].createComment("");return ll(o,r,a,s),Ut(a,r),Ga(s)&&(Nd(o,r,s),Rd(o,s,r)),null!=e&&Fd(r,s),mi}function _i(){let t=Pt();const n=Te();return Mu()?Tu():(t=t.parent,ir(t,!1)),n.firstCreatePass&&(Ka(n,t),Su(t)&&n.queries.elementEnd(t)),_i}function xe(){return V()}function js(t){return!!t&&"function"==typeof t.then}const Wd=function Z_(t){return!!t&&"function"==typeof t.subscribe};function A(t,n,e,r){const o=V(),i=Te(),s=Pt();return function ey(t,n,e,r,o,i,s){const a=Ga(r),c=t.firstCreatePass&&P_(t),u=n[lt],d=k_(n);let h=!0;if(3&r.type||s){const v=hn(r,n),_=s?s(v):v,w=d.length,T=s?P=>s(kt(P[r.index])):r.index;let D=null;if(!s&&a&&(D=function tT(t,n,e,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===e&&o[i+1]===r){const a=n[jo],l=o[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(t,n,o,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=i,D.__ngLastListenerFn__=i,h=!1;else{i=ny(r,n,u,i,!1);const P=e.listen(_,o,i);d.push(i,P),c&&c.push(o,T,w,w+1)}}else i=ny(r,n,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const v=p.length;if(v)for(let _=0;_<v;_+=2){const F=n[p[_]][p[_+1]].subscribe(i),Y=d.length;d.push(i,F),c&&c.push(o,r.index,Y,-(Y+1))}}}(i,o,o[be],s,t,n,r),A}function ty(t,n,e,r){try{return Tn(6,n,e),!1!==e(r)}catch(o){return N_(t,o),!1}finally{Tn(7,n,e)}}function ny(t,n,e,r,o){return function i(s){if(s===Function)return r;Cl(t.componentOffset>-1?on(t.index,n):n);let l=ty(n,e,r,s),c=i.__ngNextListenerFn__;for(;c;)l=ty(n,e,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function S(t=1){return function a1(t){return(fe.lFrame.contextLView=function l1(t,n){for(;t>0;)n=n[Vo],t--;return n}(t,fe.lFrame.contextLView))[lt]}(t)}function xl(t,n){return t<<17|n<<2}function Gr(t){return t>>17&32767}function Jd(t){return 2|t}function Co(t){return(131068&t)>>2}function Yd(t,n){return-131069&t|n<<2}function Qd(t){return 1|t}function hy(t,n,e,r,o){const i=t[e+1],s=null===n;let a=r?Gr(i):Co(i),l=!1;for(;0!==a&&(!1===l||s);){const u=t[a+1];uT(t[a],n)&&(l=!0,t[a+1]=r?Qd(u):Jd(u)),a=r?Gr(u):Co(u)}l&&(t[e+1]=r?Jd(i):Qd(i))}function uT(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Yo(t,n)>=0}function Ie(t,n){return function Bn(t,n,e,r){const o=V(),i=Te(),s=Er(2);i.firstUpdatePass&&function by(t,n,e,r){const o=t.data;if(null===o[e+1]){const i=o[Wt()],s=function Cy(t,n){return n>=t.expandoStartIndex}(t,e);(function Ey(t,n){return 0!=(t.flags&(n?8:16))})(i,r)&&null===n&&!s&&(n=!1),n=function vT(t,n,e,r){const o=function Iu(t){const n=fe.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let i=r?n.residualClasses:n.residualStyles;if(null===o)0===(r?n.classBindings:n.styleBindings)&&(e=Vs(e=Zd(null,t,n,e,r),n.attrs,r),i=null);else{const s=n.directiveStylingLast;if(-1===s||t[s]!==o)if(e=Zd(o,t,n,e,r),null===i){let l=function CT(t,n,e){const r=e?n.classBindings:n.styleBindings;if(0!==Co(r))return t[Gr(r)]}(t,n,r);void 0!==l&&Array.isArray(l)&&(l=Zd(null,t,n,l[1],r),l=Vs(l,n.attrs,r),function bT(t,n,e,r){t[Gr(e?n.classBindings:n.styleBindings)]=r}(t,n,r,l))}else i=function wT(t,n,e){let r;const o=n.directiveEnd;for(let i=1+n.directiveStylingLast;i<o;i++)r=Vs(r,t[i].hostAttrs,e);return Vs(r,n.attrs,e)}(t,n,r)}return void 0!==i&&(r?n.residualClasses=i:n.residualStyles=i),e}(o,i,n,r),function lT(t,n,e,r,o,i){let s=i?n.classBindings:n.styleBindings,a=Gr(s),l=Co(s);t[r]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Yo(e,u)>0)&&(c=!0)):u=e,o)if(0!==l){const h=Gr(t[a+1]);t[r+1]=xl(h,a),0!==h&&(t[h+1]=Yd(t[h+1],r)),t[a+1]=function sT(t,n){return 131071&t|n<<17}(t[a+1],r)}else t[r+1]=xl(a,0),0!==a&&(t[a+1]=Yd(t[a+1],r)),a=r;else t[r+1]=xl(l,0),0===a?a=r:t[l+1]=Yd(t[l+1],r),l=r;c&&(t[r+1]=Jd(t[r+1])),hy(t,u,r,!0),hy(t,u,r,!1),function cT(t,n,e,r,o){const i=o?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof n&&Yo(i,n)>=0&&(e[r+1]=Qd(e[r+1]))}(n,u,t,r,i),s=xl(a,l),i?n.classBindings=s:n.styleBindings=s}(o,i,n,e,s,r)}}(i,t,s,r),n!==pe&&Bt(o,s,n)&&function Dy(t,n,e,r,o,i,s,a){if(!(3&n.type))return;const l=t.data,c=l[a+1],u=function aT(t){return 1==(1&t)}(c)?Sy(l,n,e,o,Co(c),s):void 0;Ml(u)||(Ml(i)||function iT(t){return 2==(2&t)}(c)&&(i=Sy(l,null,e,o,a,s)),function SE(t,n,e,r,o){if(n)o?t.addClass(e,r):t.removeClass(e,r);else{let i=-1===r.indexOf("-")?void 0:sn.DashCase;null==o?t.removeStyle(e,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=sn.Important),t.setStyle(e,r,o,i))}}(r,s,qa(Wt(),e),o,i))}(i,i.data[Wt()],o,o[be],t,o[s+1]=function xT(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Be(zr(t)))),t}(n,e),r,s)}(t,n,null,!0),Ie}function Zd(t,n,e,r,o){let i=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(i=n[a],r=Vs(r,i.hostAttrs,o),i!==t);)a++;return null!==t&&(e.directiveStylingLast=a),r}function Vs(t,n,e){const r=e?1:2;let o=-1;if(null!==n)for(let i=0;i<n.length;i++){const s=n[i];"number"==typeof s?o=s:o===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),fn(t,s,!!e||n[++i]))}return void 0===t?null:t}function Sy(t,n,e,r,o,i){const s=null===n;let a;for(;o>0;){const l=t[o],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[o+1];h===pe&&(h=d?Oe:void 0);let f=d?zu(h,r):u===r?h:void 0;if(c&&!Ml(f)&&(f=zu(l,r)),Ml(f)&&(a=f,s))return a;const p=t[o+1];o=s?Gr(p):Co(p)}if(null!==n){let l=i?n.residualClasses:n.residualStyles;null!=l&&(a=zu(l,r))}return a}function Ml(t){return void 0!==t}function b(t,n=""){const e=V(),r=Te(),o=t+Ke,i=r.firstCreatePass?si(r,o,1,n,null):r.data[o],s=e[o]=function rd(t,n){return t.createText(n)}(e[be],n);ll(r,e,s,i),ir(i,!1)}function rt(t){return Me("",t,""),rt}function Me(t,n,e){const r=V(),o=function li(t,n,e,r){return Bt(t,Ho(),e)?n+he(e)+r:pe}(r,t,n,e);return o!==pe&&Or(r,Wt(),o),Me}function fr(t,n,e,r,o){const i=V(),s=ci(i,t,n,e,r,o);return s!==pe&&Or(i,Wt(),s),fr}const Ci="en-US";let qy=Ci;function th(t,n,e,r,o){if(t=se(t),Array.isArray(t))for(let i=0;i<t.length;i++)th(t[i],n,e,r,o);else{const i=Te(),s=V();let a=yo(t)?t:se(t.provide),l=Xm(t);const c=Pt(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(yo(t)||!t.multi){const f=new ms(l,o,N),p=rh(a,n,o?u:u+h,d);-1===p?($u(el(c,s),i,a),nh(i,t,n.length),n.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(f),s.push(f)):(e[p]=f,s[p]=f)}else{const f=rh(a,n,u+h,d),p=rh(a,n,u,u+h),_=p>=0&&e[p];if(o&&!_||!o&&!(f>=0&&e[f])){$u(el(c,s),i,a);const w=function zO(t,n,e,r,o){const i=new ms(t,e,N);return i.multi=[],i.index=n,i.componentProviders=0,_v(i,o,r&&!e),i}(o?HO:BO,e.length,o,r,l);!o&&_&&(e[p].providerFactory=w),nh(i,t,n.length,0),n.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(w),s.push(w)}else nh(i,t,f>-1?f:p,_v(e[o?p:f],l,!o&&r));!o&&r&&_&&e[p].componentProviders++}}}function nh(t,n,e,r){const o=yo(n),i=function tx(t){return!!t.useClass}(n);if(o||i){const l=(i?se(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function _v(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function rh(t,n,e,r){for(let o=e;o<r;o++)if(n[o]===t)return o;return-1}function BO(t,n,e,r){return oh(this.multi,[])}function HO(t,n,e,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=go(e,e[J],this.providerFactory.index,r);i=a.slice(0,s),oh(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],oh(o,i);return i}function oh(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function Qe(t,n=[]){return e=>{e.providersResolver=(r,o)=>function UO(t,n,e){const r=Te();if(r.firstCreatePass){const o=$n(t);th(e,r.data,r.blueprint,o,!0),th(n,r.data,r.blueprint,o,!1)}}(r,o?o(t):t,n)}}class bi{}class yv{}class vv extends bi{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new F_(this);const r=un(n);this._bootstrapComponents=Tr(r.bootstrap),this._r3Injector=g_(n,e,[{provide:bi,useValue:this},{provide:As,useValue:this.componentFactoryResolver}],Be(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class ih extends yv{constructor(n){super(),this.moduleType=n}create(n){return new vv(this.moduleType,n)}}class qO extends bi{constructor(n,e,r){super(),this.componentFactoryResolver=new F_(this),this.instance=null;const o=new Zm([...n,{provide:bi,useValue:this},{provide:As,useValue:this.componentFactoryResolver}],e||gl(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function kl(t,n,e=null){return new qO(t,n,e).injector}let WO=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const r=Km(0,e.type),o=r.length>0?kl([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,o)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=Z({token:t,providedIn:"environment",factory:()=>new t(K(ar))}),t})();function Cv(t){t.getStandaloneInjector=n=>n.get(WO).getOrCreateStandaloneInjector(t)}function wi(t,n,e){const r=qt()+t,o=V();return o[r]===pe?ur(o,r,e?n.call(e):n()):function Fs(t,n){return t[n]}(o,r)}function Di(t,n,e,r,o){return function Tv(t,n,e,r,o,i,s){const a=n+e;return vo(t,a,o,i)?ur(t,a+2,s?r.call(s,o,i):r(o,i)):Gs(t,a+2)}(V(),qt(),t,n,e,r,o)}function ah(t,n,e,r,o,i){return function Ov(t,n,e,r,o,i,s,a){const l=n+e;return function El(t,n,e,r,o){const i=vo(t,n,e,r);return Bt(t,n+2,o)||i}(t,l,o,i,s)?ur(t,l+3,a?r.call(a,o,i,s):r(o,i,s)):Gs(t,l+3)}(V(),qt(),t,n,e,r,o,i)}function Gs(t,n){const e=t[n];return e===pe?void 0:e}function lh(t){return n=>{setTimeout(t,void 0,n)}}const it=class mI extends E{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,r){let o=n,i=e||(()=>null),s=r;if(n&&"object"==typeof n){const l=n;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=lh(i),o&&(o=lh(o)),s&&(s=lh(s)));const a=super.subscribe({next:o,error:i,complete:s});return n instanceof k&&n.add(a),a}};function _I(){return this._results[Symbol.iterator]()}class ch{get changes(){return this._changes||(this._changes=new it)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=ch.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=_I)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const r=this;r.dirty=!1;const o=function On(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function T1(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=n[r];if(e&&(o=e(o),i=e(i)),i!==o)return!1}return!0}(r._results,o,e))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ir=(()=>{class t{}return t.__NG_ELEMENT_ID__=CI,t})();const yI=Ir,vI=class extends yI{constructor(n,e,r){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(n,e){const r=this._declarationTContainer.tView,o=_l(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,e||null);o[hs]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[or];return null!==s&&(o[or]=s.createEmbeddedView(r)),Pd(r,o,n),new Rs(o)}};function CI(){return Pl(Pt(),V())}function Pl(t,n){return 4&t.type?new vI(n,t,ni(t,n)):null}let zn=(()=>{class t{}return t.__NG_ELEMENT_ID__=bI,t})();function bI(){return Rv(Pt(),V())}const wI=zn,kv=class extends wI{constructor(n,e,r){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=r}get element(){return ni(this._hostTNode,this._hostLView)}get injector(){return new Go(this._hostTNode,this._hostLView)}get parentInjector(){const n=Vu(this._hostTNode,this._hostLView);if(Lg(n)){const e=Za(n,this._hostLView),r=Qa(n);return new Go(e[J].data[r+8],e)}return new Go(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=Pv(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(n,e,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=n.createEmbeddedView(e||{},i);return this.insert(s,o),s}createComponent(n,e,r,o,i){const s=n&&!function vs(t){return"function"==typeof t}(n);let a;if(s)a=e;else{const d=e||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const l=s?n:new Ns(Pe(n)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const h=(s?c:this.parentInjector).get(ar,null);h&&(i=h)}const u=l.create(c,o,void 0,i);return this.insert(u.hostView,a),u}insert(n,e){const r=n._lView,o=r[J];if(function YS(t){return Vn(t[nt])}(r)){const u=this.indexOf(n);if(-1!==u)this.detach(u);else{const d=r[nt],h=new kv(d,d[Vt],d[nt]);h.detach(h.indexOf(n))}}const i=this._adjustIndex(e),s=this._lContainer;!function mE(t,n,e,r){const o=Gt+r,i=e.length;r>0&&(e[o-1][jn]=n),r<i-Gt?(n[jn]=e[o],Jg(e,Gt+r,n)):(e.push(n),n[jn]=null),n[nt]=e;const s=n[hs];null!==s&&e!==s&&function _E(t,n){const e=t[Uo];n[$t]!==n[nt][nt][$t]&&(t[dg]=!0),null===e?t[Uo]=[n]:e.push(n)}(s,n);const a=n[or];null!==a&&a.insertView(t),n[_e]|=64}(o,r,s,i);const a=ld(i,s),l=r[be],c=al(l,s[Ha]);return null!==c&&function fE(t,n,e,r,o,i){r[Dr]=o,r[Vt]=n,Ms(t,r,e,1,o,i)}(o,s[Vt],l,r,c,a),n.attachToViewContainerRef(),Jg(uh(s),i,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=Pv(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),r=id(this._lContainer,e);r&&(rl(uh(this._lContainer),e),vm(r[J],r))}detach(n){const e=this._adjustIndex(n,-1),r=id(this._lContainer,e);return r&&null!=rl(uh(this._lContainer),e)?new Rs(r):null}_adjustIndex(n,e=0){return n??this.length+e}};function Pv(t){return t[za]}function uh(t){return t[za]||(t[za]=[])}function Rv(t,n){let e;const r=n[t.index];if(Vn(r))e=r;else{let o;if(8&t.type)o=kt(r);else{const i=n[be];o=i.createComment("");const s=hn(t,n);_o(i,al(i,s),o,function bE(t,n){return t.nextSibling(n)}(i,s),!1)}n[t.index]=e=A_(r,n,o,t),vl(n,e)}return new kv(e,t,n)}class dh{constructor(n){this.queryList=n,this.matches=null}clone(){return new dh(this.queryList)}setDirty(){this.queryList.setDirty()}}class hh{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const r=null!==n.contentQueries?n.contentQueries[0]:e.length,o=[];for(let i=0;i<r;i++){const s=e.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new hh(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==Bv(n,e).matches&&this.queries[e].setDirty()}}class Nv{constructor(n,e,r=null){this.predicate=n,this.flags=e,this.read=r}}class fh{constructor(n=[]){this.queries=n}elementStart(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let r=0;r<this.length;r++){const o=null!==e?e.length:0,i=this.getByIndex(r).embeddedTView(n,o);i&&(i.indexInDeclarationView=r,null!==e?e.push(i):e=[i])}return null!==e?new fh(e):null}template(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class ph{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new ph(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(n,e,DI(e,i)),this.matchTNodeWithReadOption(n,e,tl(e,n,i,!1,!1))}else r===Ir?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,tl(e,n,r,!1,!1))}matchTNodeWithReadOption(n,e,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===pn||o===zn||o===Ir&&4&e.type)this.addMatch(e.index,-2);else{const i=tl(e,n,o,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function DI(t,n){const e=t.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===n)return e[r+1];return null}function EI(t,n,e,r){return-1===e?function SI(t,n){return 11&t.type?ni(t,n):4&t.type?Pl(t,n):null}(n,t):-2===e?function xI(t,n,e){return e===pn?ni(n,t):e===Ir?Pl(n,t):e===zn?Rv(n,t):void 0}(t,n,r):go(t,t[J],e,n)}function Fv(t,n,e,r){const o=n[or].queries[r];if(null===o.matches){const i=t.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:EI(n,i[c],s[l+1],e.metadata.read))}o.matches=a}return o.matches}function gh(t,n,e,r){const o=t.queries.getByIndex(e),i=o.matches;if(null!==i){const s=Fv(t,n,o,e);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(s[a/2]);else{const c=i[a+1],u=n[-l];for(let d=Gt;d<u.length;d++){const h=u[d];h[hs]===h[nt]&&gh(h[J],h,c,r)}if(null!==u[Uo]){const d=u[Uo];for(let h=0;h<d.length;h++){const f=d[h];gh(f[J],f,c,r)}}}}}return r}function Lv(t){const n=V(),e=Te(),r=Mg();Au(r+1);const o=Bv(e,r);if(t.dirty&&function JS(t){return 4==(4&t[_e])}(n)===(2==(2&o.metadata.flags))){if(null===o.matches)t.reset([]);else{const i=o.crossesNgTemplate?gh(e,n,r,[]):Fv(e,n,o,r);t.reset(i,hx),t.notifyOnChanges()}return!0}return!1}function jv(t,n,e,r){const o=Te();if(o.firstCreatePass){const i=Pt();(function Uv(t,n,e){null===t.queries&&(t.queries=new fh),t.queries.track(new ph(n,e))})(o,new Nv(n,e,r),i.index),function OI(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(o,t),2==(2&e)&&(o.staticContentQueries=!0)}!function $v(t,n,e){const r=new ch(4==(4&e));x_(t,n,r,r.destroy),null===n[or]&&(n[or]=new hh),n[or].queries.push(new dh(r))}(o,V(),e)}function Bv(t,n){return t.queries.getByIndex(n)}function Rl(t,n){return Pl(t,n)}function Fl(...t){}const Ll=new X("Application Initializer");let jl=(()=>{class t{constructor(e){this.appInits=e,this.resolve=Fl,this.reject=Fl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(js(i))e.push(i);else if(Wd(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});e.push(s)}}Promise.all(e).then(()=>{r()}).catch(o=>{this.reject(o)}),0===e.length&&r(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(K(Ll,8))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ks=new X("AppId",{providedIn:"root",factory:function sC(){return`${bh()}${bh()}${bh()}`}});function bh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aC=new X("Platform Initializer"),wh=new X("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let JI=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Ar=new X("LocaleId",{providedIn:"root",factory:()=>Ce(Ar,ae.Optional|ae.SkipSelf)||function YI(){return typeof $localize<"u"&&$localize.locale||Ci}()});class ZI{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let lC=(()=>{class t{compileModuleSync(e){return new ih(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),i=Tr(un(e).declarations).reduce((s,a)=>{const l=Pe(a);return l&&s.push(new Ns(l)),s},[]);return new ZI(r,i)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const tA=(()=>Promise.resolve(0))();function Dh(t){typeof Zone>"u"?tA.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ct{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&e,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function nA(){let t=We.requestAnimationFrame,n=We.cancelAnimationFrame;if(typeof Zone<"u"&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function iA(t){const n=()=>{!function oA(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(We,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Eh(t),t.isCheckStableRunning=!0,Sh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Eh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,o,i,s,a)=>{try{return dC(t),e.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&n(),hC(t)}},onInvoke:(e,r,o,i,s,a,l)=>{try{return dC(t),e.invoke(o,i,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&n(),hC(t)}},onHasTask:(e,r,o,i)=>{e.hasTask(o,i),r===o&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Eh(t),Sh(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,r,o,i)=>(e.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ct.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(ct.isInAngularZone())throw new U(909,!1)}run(n,e,r){return this._inner.run(n,e,r)}runTask(n,e,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,n,rA,Fl,Fl);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(n,e,r){return this._inner.runGuarded(n,e,r)}runOutsideAngular(n){return this._outer.run(n)}}const rA={};function Sh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Eh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function dC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function hC(t){t._nesting--,Sh(t)}class sA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(n,e,r){return n.apply(e,r)}runGuarded(n,e,r){return n.apply(e,r)}runOutsideAngular(n){return n()}runTask(n,e,r,o){return n.apply(e,r)}}const fC=new X(""),Vl=new X("");let Th,xh=(()=>{class t{constructor(e,r,o){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Th||(function aA(t){Th=t}(o),o.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ct.assertNotInAngularZone(),Dh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Dh(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:o})}whenStable(e,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,o){return[]}}return t.\u0275fac=function(e){return new(e||t)(K(ct),K(Mh),K(Vl))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})(),Mh=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return Th?.findTestabilityInTree(this,e,r)??null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const kr=!1;let qr=null;const pC=new X("AllowMultipleToken"),Oh=new X("PlatformDestroyListeners"),gC=new X("appBootstrapListener");class mC{constructor(n,e){this.name=n,this.token=e}}function yC(t,n,e=[]){const r=`Platform: ${n}`,o=new X(r);return(i=[])=>{let s=Ih();if(!s||s.injector.get(pC,!1)){const a=[...e,...i,{provide:o,useValue:!0}];t?t(a):function uA(t){if(qr&&!qr.get(pC,!1))throw new U(400,!1);qr=t;const n=t.get(CC);(function _C(t){const n=t.get(aC,null);n&&n.forEach(e=>e())})(t)}(function vC(t=[],n){return lr.create({name:n,providers:[{provide:bd,useValue:"platform"},{provide:Oh,useValue:new Set([()=>qr=null])},...t]})}(a,r))}return function hA(t){const n=Ih();if(!n)throw new U(401,!1);return n}()}}function Ih(){return qr?.get(CC)??null}let CC=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const o=function wC(t,n){let e;return e="noop"===t?new sA:("zone.js"===t?void 0:t)||new ct(n),e}(r?.ngZone,function bC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:ct,useValue:o}];return o.run(()=>{const s=lr.create({providers:i,parent:this.injector,name:e.moduleType.name}),a=e.create(s),l=a.injector.get(ri,null);if(!l)throw new U(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Ul(this._modules,a),c.unsubscribe()})}),function DC(t,n,e){try{const r=e();return js(r)?r.catch(o=>{throw n.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw n.runOutsideAngular(()=>t.handleError(r)),r}}(l,o,()=>{const c=a.injector.get(jl);return c.runInitializers(),c.donePromise.then(()=>(function Wy(t){Sn(t,"Expected localeId to be defined"),"string"==typeof t&&(qy=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ar,Ci)||Ci),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,r=[]){const o=SC({},r);return function lA(t,n,e){const r=new ih(e);return Promise.resolve(r)}(0,0,e).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(e){const r=e.injector.get($l);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!e.instance.ngDoBootstrap)throw new U(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(Oh,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(K(lr))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function SC(t,n){return Array.isArray(n)?n.reduce(SC,t):{...t,...n}}let $l=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,r,o){this._zone=e,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new qe(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new qe(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{ct.assertNotInAngularZone(),Dh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{ct.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function gS(...t){const n=ss(t),e=function lS(t,n){return"number"==typeof uu(t)?t.pop():n}(t,1/0),r=t;return r.length?1===r.length?Fn(r[0]):No(e)(pt(r,n)):tr}(i,s.pipe(function mS(t={}){const{connector:n=(()=>new E),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const v=s;f(),v?.unsubscribe()};return M((v,_)=>{c++,!d&&!u&&h();const w=l=l??n();_.add(()=>{c--,0===c&&!d&&!u&&(a=du(p,o))}),w.subscribe(_),!s&&c>0&&(s=new en({next:T=>w.next(T),error:T=>{d=!0,h(),a=du(f,e,T),w.error(T)},complete:()=>{u=!0,h(),a=du(f,r),w.complete()}}),Fn(v).subscribe(s))})(i)}}()))}bootstrap(e,r){const o=e instanceof e_;if(!this._injector.get(jl).done){!o&&function Lo(t){const n=Pe(t)||jt(t)||rn(t);return null!==n&&n.standalone}(e);throw new U(405,kr)}let s;s=o?e:this._injector.get(As).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function cA(t){return t.isBoundToModule}(s)?void 0:this._injector.get(bi),c=s.create(lr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(fC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Ul(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new U(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;Ul(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(gC,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ul(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new U(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(e){return new(e||t)(K(ct),K(ar),K(ri))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ul(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let xi=(()=>{class t{}return t.__NG_ELEMENT_ID__=pA,t})();function pA(t){return function gA(t,n,e){if(ps(t)&&!e){const r=on(t.index,n);return new Rs(r,r)}return 47&t.type?new Rs(n[$t],n):null}(Pt(),V(),16==(16&t))}class OC{constructor(){}supports(n){return Sl(n)}create(n){return new bA(n)}}const CA=(t,n)=>n;class bA{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||CA}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,r=this._removalsHead,o=0,i=null;for(;e||r;){const s=!r||e&&e.currentIndex<AC(r,o,i)?e:r,a=AC(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,u=l-o;if(c!=u){for(let h=0;h<c;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<c&&(i[h]=f+1)}i[s.previousIndex]=u-c}}a!==l&&n(s,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Sl(n))throw new U(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,i,s,e=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)i=n[a],s=this._trackByFn(a,i),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,i,s,a)),Object.is(e.item,i)||this._addIdentityChange(e,i)):(e=this._mismatch(e,i,s,a),r=!0),e=e._next}else o=0,function KM(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let r;for(;!(r=e.next()).done;)n(r.value)}}(n,a=>{s=this._trackByFn(o,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,o),r=!0),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,r,o){let i;return null===n?i=this._itTail:(i=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,i,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,i,o)):n=this._addAfter(new wA(e,r),i,o),n}_verifyReinsertion(n,e,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?n=this._reinsertAfter(i,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,i=n._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(n,e,r),this._addToMoves(n,r),n}_moveAfter(n,e,r){return this._unlink(n),this._insertAfter(n,e,r),this._addToMoves(n,r),n}_addAfter(n,e,r){return this._insertAfter(n,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,r){const o=null===e?this._itHead:e._next;return n._next=o,n._prev=e,null===o?this._itTail=n:o._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new IC),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,r=n._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new IC),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class wA{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DA{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const e=n._prevDup,r=n._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class IC{constructor(){this.map=new Map}put(n){const e=n.trackById;let r=this.map.get(e);r||(r=new DA,this.map.set(e,r)),r.add(n)}get(n,e){const o=this.map.get(n);return o?o.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AC(t,n,e){const r=t.previousIndex;if(null===r)return r;let o=0;return e&&r<e.length&&(o=e[r]),r+n+o}class kC{constructor(){}supports(n){return n instanceof Map||Gd(n)}create(){return new SA}}class SA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||Gd(n)))throw new U(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(o,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const r=n._prev;return e._next=n,e._prev=r,n._prev=e,r&&(r._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const o=this._records.get(n);this._maybeAddToChanges(o,e);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new EA(n);return this._records.set(n,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(r=>e(n[r],r))}}class EA{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function PC(){return new zl([new OC])}let zl=(()=>{class t{constructor(e){this.factories=e}static create(e,r){if(null!=r){const o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||PC()),deps:[[t,new ws,new bs]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(null!=r)return r;throw new U(901,!1)}}return t.\u0275prov=Z({token:t,providedIn:"root",factory:PC}),t})();function RC(){return new Js([new kC])}let Js=(()=>{class t{constructor(e){this.factories=e}static create(e,r){if(r){const o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||RC()),deps:[[t,new ws,new bs]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(r)return r;throw new U(901,!1)}}return t.\u0275prov=Z({token:t,providedIn:"root",factory:RC}),t})();const TA=yC(null,"core",[]);let OA=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(K($l))},t.\u0275mod=Ln({type:t}),t.\u0275inj=En({}),t})();function Mi(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Nh=null;function Pr(){return Nh}class kA{}const Yt=new X("DocumentToken");let Fh=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:function(){return function PA(){return K(NC)}()},providedIn:"platform"}),t})();const RA=new X("Location Initialized");let NC=(()=>{class t extends Fh{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pr().getBaseHref(this._doc)}onPopState(e){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){FC()?this._history.pushState(e,r,o):this._location.hash=o}replaceState(e,r,o){FC()?this._history.replaceState(e,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(K(Yt))},t.\u0275prov=Z({token:t,factory:function(){return function NA(){return new NC(K(Yt))}()},providedIn:"platform"}),t})();function FC(){return!!window.history.pushState}function Lh(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function LC(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Rr(t){return t&&"?"!==t[0]?"?"+t:t}let Do=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:function(){return Ce(VC)},providedIn:"root"}),t})();const jC=new X("appBaseHref");let VC=(()=>{class t extends Do{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ce(Yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Lh(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Rr(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,i){const s=this.prepareExternalUrl(o+Rr(i));this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){const s=this.prepareExternalUrl(o+Rr(i));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(K(Fh),K(jC,8))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),FA=(()=>{class t extends Do{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Lh(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+Rr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+Rr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(K(Fh),K(jC,8))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})(),jh=(()=>{class t{constructor(e){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function VA(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(LC($C(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Rr(r))}normalize(e){return t.stripTrailingSlash(function jA(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,$C(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rr(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r,complete:o})}}return t.normalizeQueryParams=Rr,t.joinWithSlash=Lh,t.stripTrailingSlash=LC,t.\u0275fac=function(e){return new(e||t)(K(Do))},t.\u0275prov=Z({token:t,factory:function(){return function LA(){return new jh(K(Do))}()},providedIn:"root"}),t})();function $C(t){return t.replace(/\/index.html$/,"")}function JC(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const r=e.indexOf("="),[o,i]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===n)return decodeURIComponent(i)}return null}const Kh=/\s+/,YC=[];let ec=(()=>{class t{constructor(e,r,o,i){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this.initialClasses=YC,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Kh):YC}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Kh):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Kh).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return t.\u0275fac=function(e){return new(e||t)(N(zl),N(Js),N(pn),N(Mr))},t.\u0275dir=ce({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class Dk{constructor(n,e,r,o){this.$implicit=n,this.ngForOf=e,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tc=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,o){this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Dk(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),XC(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{XC(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,r){return!0}}return t.\u0275fac=function(e){return new(e||t)(N(zn),N(Ir),N(zl))},t.\u0275dir=ce({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function XC(t,n){t.context.$implicit=n.item}let Ti=(()=>{class t{constructor(e,r){this._viewContainer=e,this._context=new Ek,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){eb("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){eb("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return t.\u0275fac=function(e){return new(e||t)(N(zn),N(Ir))},t.\u0275dir=ce({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class Ek{constructor(){this.$implicit=null,this.ngIf=null}}function eb(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Be(n)}'.`)}let nb=(()=>{class t{constructor(e,r,o){this._ngEl=e,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[o,i]=e.split("."),s=-1===o.indexOf("-")?void 0:sn.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,o,i?`${r}${i}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,o,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(N(pn),N(Js),N(Mr))},t.\u0275dir=ce({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),t})(),ob=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ln({type:t}),t.\u0275inj=En({}),t})();let eP=(()=>{class t{}return t.\u0275prov=Z({token:t,providedIn:"root",factory:()=>new tP(K(Yt),window)}),t})();class tP{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function nP(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(n)||i.querySelector(`[name="${n}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=sb(this.window.history)||sb(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function sb(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class ab{}class OP extends kA{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class tf extends OP{static makeCurrent(){!function AA(t){Nh||(Nh=t)}(new tf)}onAndCancel(n,e,r){return n.addEventListener(e,r,!1),()=>{n.removeEventListener(e,r,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function IP(){return Xs=Xs||document.querySelector("base"),Xs?Xs.getAttribute("href"):null}();return null==e?null:function AP(t){oc=oc||document.createElement("a"),oc.setAttribute("href",t);const n=oc.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){Xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return JC(document.cookie,n)}}let oc,Xs=null;const hb=new X("TRANSITION_ID"),PP=[{provide:Ll,useFactory:function kP(t,n,e){return()=>{e.get(jl).donePromise.then(()=>{const r=Pr(),o=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[hb,Yt,lr],multi:!0}];let NP=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();const ic=new X("EventManagerPlugins");let sc=(()=>{class t{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o){return this._findPluginFor(r).addEventListener(e,r,o)}addGlobalEventListener(e,r,o){return this._findPluginFor(r).addGlobalEventListener(e,r,o)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(K(ic),K(ct))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();class fb{constructor(n){this._doc=n}addGlobalEventListener(n,e,r){const o=Pr().getGlobalEventTarget(this._doc,n);if(!o)throw new Error(`Unsupported event target ${o} for event ${e}`);return this.addEventListener(o,e,r)}}let pb=(()=>{class t{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const o=this.usageCount;let i=o.get(e)??0;return i+=r,i>0?o.set(e,i):o.delete(e),i}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})(),ea=(()=>{class t extends pb{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(i=>i.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const o=this.doc.createElement("style");o.textContent=r,e.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return t.\u0275fac=function(e){return new(e||t)(K(Yt))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();const nf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rf=/%COMP%/g,_b=new X("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function yb(t,n){return n.flat(100).map(e=>e.replace(rf,t))}function vb(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let sf=(()=>{class t{constructor(e,r,o,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new af(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(e,r);return o instanceof wb?o.applyToHost(e):o instanceof lf&&o.applyStyles(),o}getOrCreateRenderer(e,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case rr.Emulated:i=new wb(s,a,r,this.appId,l);break;case rr.ShadowDom:return new BP(s,a,e,r);default:i=new lf(s,a,r,l)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(K(sc),K(ea),K(Ks),K(_b))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();class af{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(nf[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){(bb(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(bb(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,o){if(o){e=o+":"+e;const i=nf[o];i?n.setAttributeNS(i,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){const o=nf[r];o?n.removeAttributeNS(o,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,o){o&(sn.DashCase|sn.Important)?n.style.setProperty(e,r,o&sn.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&sn.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n[e]=r}setValue(n,e){n.nodeValue=e}listen(n,e,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,vb(r)):this.eventManager.addEventListener(n,e,vb(r))}}function bb(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class BP extends af{constructor(n,e,r,o){super(n),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=yb(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lf extends af{constructor(n,e,r,o,i=r.id){super(n),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=yb(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class wb extends lf{constructor(n,e,r,o,i){const s=o+"-"+r.id;super(n,e,r,i,s),this.contentAttr=function VP(t){return"_ngcontent-%COMP%".replace(rf,t)}(s),this.hostAttr=function $P(t){return"_nghost-%COMP%".replace(rf,t)}(s)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}}let HP=(()=>{class t extends fb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o){return e.addEventListener(r,o,!1),()=>this.removeEventListener(e,r,o)}removeEventListener(e,r,o){return e.removeEventListener(r,o)}}return t.\u0275fac=function(e){return new(e||t)(K(Yt))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();const Db=["alt","control","meta","shift"],zP={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let qP=(()=>{class t extends fb{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,r,o){const i=t.parseEventName(r),s=t.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pr().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Db.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let o=zP[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(o=e.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Db.forEach(s=>{s!==o&&(0,GP[s])(e)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(e,r,o){return i=>{t.matchEventFullKeyCode(i,e)&&o.runGuarded(()=>r(i))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(K(Yt))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();const YP=yC(TA,"browser",[{provide:wh,useValue:"browser"},{provide:aC,useValue:function WP(){tf.makeCurrent()},multi:!0},{provide:Yt,useFactory:function JP(){return function OE(t){hd=t}(document),document},deps:[]}]),xb=new X(""),Mb=[{provide:Vl,useClass:class RP{addToWindow(n){We.getAngularTestability=(r,o=!0)=>{const i=n.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},We.getAllAngularTestabilities=()=>n.getAllTestabilities(),We.getAllAngularRootElements=()=>n.getAllRootElements(),We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(r=>{const o=We.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(l){s=s||l,i--,0==i&&r(s)};o.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(n,e,r){return null==e?null:n.getTestability(e)??(r?Pr().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:fC,useClass:xh,deps:[ct,Mh,Vl]},{provide:xh,useClass:xh,deps:[ct,Mh,Vl]}],Tb=[{provide:bd,useValue:"root"},{provide:ri,useFactory:function KP(){return new ri},deps:[]},{provide:ic,useClass:HP,multi:!0,deps:[Yt,ct,wh]},{provide:ic,useClass:qP,multi:!0,deps:[Yt]},{provide:sf,useClass:sf,deps:[sc,ea,Ks,_b]},{provide:n_,useExisting:sf},{provide:pb,useExisting:ea},{provide:ea,useClass:ea,deps:[Yt]},{provide:sc,useClass:sc,deps:[ic,ct]},{provide:ab,useClass:NP,deps:[]},[]];let QP=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:Ks,useValue:e.appId},{provide:hb,useExisting:Ks},PP]}}}return t.\u0275fac=function(e){return new(e||t)(K(xb,12))},t.\u0275mod=Ln({type:t}),t.\u0275inj=En({providers:[...Tb,...Mb],imports:[ob,OA]}),t})(),Ob=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)(K(Yt))},t.\u0275prov=Z({token:t,factory:function(e){let r=null;return r=e?new e:function XP(){return new Ob(K(Yt))}(),r},providedIn:"root"}),t})();function ee(...t){return pt(t,ss(t))}function Kr(t,n){return oe(n)?At(t,n,1):At(t,1)}function Fr(t,n){return M((e,r)=>{let o=0;e.subscribe(j(r,i=>t.call(n,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class ac{}class df{}class Lr{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const o=e.slice(0,r),i=o.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=e.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(e,i)}})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Lr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Lr;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Lr?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,e);const o=("a"===n.op?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":const i=n.value;if(i){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class iR{encodeKey(n){return kb(n)}encodeValue(n){return kb(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const aR=/%(\d[a-f0-9])/gi,lR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kb(t){return encodeURIComponent(t).replace(aR,(n,e)=>lR[e]??n)}function lc(t){return`${t}`}class Jr{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new iR,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function sR(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,i)),n.decodeValue(o.slice(i+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const r=n.fromObject[e],o=Array.isArray(r)?r.map(lc):[lc(r)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(r=>{const o=n[r];Array.isArray(o)?o.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Jr({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(lc(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const o=r.indexOf(lc(n.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class cR{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function Pb(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Rb(t){return typeof Blob<"u"&&t instanceof Blob}function Nb(t){return typeof FormData<"u"&&t instanceof FormData}class ta{constructor(n,e,r,o){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function uR(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Lr),this.context||(this.context=new cR),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Jr,this.urlWithParams=e}serializeBody(){return null===this.body?null:Pb(this.body)||Rb(this.body)||Nb(this.body)||function dR(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Jr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Nb(this.body)?null:Rb(this.body)?this.body.type||null:Pb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Jr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,i=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,a=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let l=n.headers||this.headers,c=n.params||this.params;const u=n.context??this.context;return void 0!==n.setHeaders&&(l=Object.keys(n.setHeaders).reduce((d,h)=>d.set(h,n.setHeaders[h]),l)),n.setParams&&(c=Object.keys(n.setParams).reduce((d,h)=>d.set(h,n.setParams[h]),c)),new ta(e,r,i,{params:c,headers:l,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var yt=(()=>((yt=yt||{})[yt.Sent=0]="Sent",yt[yt.UploadProgress=1]="UploadProgress",yt[yt.ResponseHeader=2]="ResponseHeader",yt[yt.DownloadProgress=3]="DownloadProgress",yt[yt.Response=4]="Response",yt[yt.User=5]="User",yt))();class hf{constructor(n,e=200,r="OK"){this.headers=n.headers||new Lr,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class ff extends hf{constructor(n={}){super(n),this.type=yt.ResponseHeader}clone(n={}){return new ff({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class cc extends hf{constructor(n={}){super(n),this.type=yt.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new cc({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Fb extends hf{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function pf(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Oi=(()=>{class t{constructor(e){this.handler=e}request(e,r,o={}){let i;if(e instanceof ta)i=e;else{let l,c;l=o.headers instanceof Lr?o.headers:new Lr(o.headers),o.params&&(c=o.params instanceof Jr?o.params:new Jr({fromObject:o.params})),i=new ta(e,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=ee(i).pipe(Kr(l=>this.handler.handle(l)));if(e instanceof ta||"events"===o.observe)return s;const a=s.pipe(Fr(l=>l instanceof cc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(L(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(L(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(L(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(L(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Jr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,pf(o,r))}post(e,r,o={}){return this.request("POST",e,pf(o,r))}put(e,r,o={}){return this.request("PUT",e,pf(o,r))}}return t.\u0275fac=function(e){return new(e||t)(K(ac))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();function Lb(t,n){return n(t)}function hR(t,n){return(e,r)=>n.intercept(e,{handle:o=>t(o,r)})}const pR=new X("HTTP_INTERCEPTORS"),na=new X("HTTP_INTERCEPTOR_FNS");function gR(){let t=null;return(n,e)=>(null===t&&(t=(Ce(pR,{optional:!0})??[]).reduceRight(hR,Lb)),t(n,e))}let jb=(()=>{class t extends ac{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(na)));this.chain=r.reduceRight((o,i)=>function fR(t,n,e){return(r,o)=>e.runInContext(()=>n(r,i=>t(i,o)))}(o,i,this.injector),Lb)}return this.chain(e,r=>this.backend.handle(r))}}return t.\u0275fac=function(e){return new(e||t)(K(df),K(ar))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();const vR=/^\)\]\}',?\n/;let $b=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new qe(r=>{const o=this.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((f,p)=>o.setRequestHeader(f,p.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=e.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",p=new Lr(o.getAllResponseHeaders()),v=function CR(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||e.url;return s=new ff({headers:p,status:o.status,statusText:f,url:v}),s},l=()=>{let{headers:f,status:p,statusText:v,url:_}=a(),w=null;204!==p&&(w=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=w?200:0);let T=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof w){const D=w;w=w.replace(vR,"");try{w=""!==w?JSON.parse(w):null}catch(P){w=D,T&&(T=!1,w={error:P,text:w})}}T?(r.next(new cc({body:w,headers:f,status:p,statusText:v,url:_||void 0})),r.complete()):r.error(new Fb({error:w,headers:f,status:p,statusText:v,url:_||void 0}))},c=f=>{const{url:p}=a(),v=new Fb({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});r.error(v)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:yt.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===e.responseType&&o.responseText&&(p.partialText=o.responseText),r.next(p)},h=f=>{let p={type:yt.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return o.addEventListener("load",l),o.addEventListener("error",c),o.addEventListener("timeout",c),o.addEventListener("abort",c),e.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:yt.Sent}),()=>{o.removeEventListener("error",c),o.removeEventListener("abort",c),o.removeEventListener("load",l),o.removeEventListener("timeout",c),e.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(K(ab))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();const gf=new X("XSRF_ENABLED"),Ub=new X("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Bb=new X("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Hb{}let DR=(()=>{class t{constructor(e,r,o){this.doc=e,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=JC(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(K(Yt),K(wh),K(Ub))},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();function SR(t,n){const e=t.url.toLowerCase();if(!Ce(gf)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const r=Ce(Hb).getToken(),o=Ce(Bb);return null!=r&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),n(t)}var ht=(()=>((ht=ht||{})[ht.Interceptors=0]="Interceptors",ht[ht.LegacyInterceptors=1]="LegacyInterceptors",ht[ht.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ht[ht.NoXsrfProtection=3]="NoXsrfProtection",ht[ht.JsonpSupport=4]="JsonpSupport",ht[ht.RequestsMadeViaParent=5]="RequestsMadeViaParent",ht))();function Ii(t,n){return{\u0275kind:t,\u0275providers:n}}function ER(...t){const n=[Oi,$b,jb,{provide:ac,useExisting:jb},{provide:df,useExisting:$b},{provide:na,useValue:SR,multi:!0},{provide:gf,useValue:!0},{provide:Hb,useClass:DR}];for(const e of t)n.push(...e.\u0275providers);return function ZE(t){return{\u0275providers:t}}(n)}const zb=new X("LEGACY_INTERCEPTOR_FN");let MR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ln({type:t}),t.\u0275inj=En({providers:[ER(Ii(ht.LegacyInterceptors,[{provide:zb,useFactory:gR},{provide:na,useExisting:zb,multi:!0}]))]}),t})();const{isArray:TR}=Array,{getPrototypeOf:OR,prototype:IR,keys:AR}=Object;function Gb(t){if(1===t.length){const n=t[0];if(TR(n))return{args:n,keys:null};if(function kR(t){return t&&"object"==typeof t&&OR(t)===IR}(n)){const e=AR(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:t,keys:null}}const{isArray:PR}=Array;function qb(t){return L(n=>function RR(t,n){return PR(n)?t(...n):t(n)}(t,n))}function Wb(t,n){return t.reduce((e,r,o)=>(e[r]=n[o],e),{})}function So(...t){const n=Kp(t),{args:e,keys:r}=Gb(t),o=new qe(i=>{const{length:s}=e;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Fn(e[u]).subscribe(j(i,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?Wb(r,a):a),i.complete())}))}});return n?o.pipe(qb(n)):o}let Kb=(()=>{class t{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(N(Mr),N(pn))},t.\u0275dir=ce({type:t}),t})(),Eo=(()=>{class t extends Kb{}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,features:[Ne]}),t})();const pr=new X("NgValueAccessor"),NR={provide:pr,useExisting:He(()=>uc),multi:!0};let uc=(()=>{class t extends Eo{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&A("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[Qe([NR]),Ne]}),t})();const FR={provide:pr,useExisting:He(()=>Ai),multi:!0},jR=new X("CompositionEventMode");let Ai=(()=>{class t extends Kb{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function LR(){const t=Pr()?Pr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(N(Mr),N(pn),N(jR,8))},t.\u0275dir=ce({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&A("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[Qe([FR]),Ne]}),t})();const VR=!1;function Yr(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const Ht=new X("NgValidators"),Qr=new X("NgAsyncValidators");function Zb(t){return Yr(t.value)?{required:!0}:null}function dc(t){return null}function o0(t){return null!=t}function s0(t){const n=js(t)?pt(t):t;if(VR&&!Wd(n)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof t&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new U(-1101,e)}return n}function a0(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function l0(t,n){return n.map(e=>e(t))}function c0(t){return t.map(n=>function UR(t){return!t.validate}(n)?n:e=>n.validate(e))}function mf(t){return null!=t?function u0(t){if(!t)return null;const n=t.filter(o0);return 0==n.length?null:function(e){return a0(l0(e,n))}}(c0(t)):null}function _f(t){return null!=t?function d0(t){if(!t)return null;const n=t.filter(o0);return 0==n.length?null:function(e){return So(l0(e,n).map(s0)).pipe(L(a0))}}(c0(t)):null}function h0(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function yf(t){return t?Array.isArray(t)?t:[t]:[]}function hc(t,n){return Array.isArray(t)?t.includes(n):t===n}function g0(t,n){const e=yf(n);return yf(t).forEach(o=>{hc(e,o)||e.push(o)}),e}function m0(t,n){return yf(n).filter(e=>!hc(t,e))}class _0{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=mf(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=_f(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Qt extends _0{get formDirective(){return null}get path(){return null}}class Zr extends _0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class y0{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ra=(()=>{class t extends y0{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(N(Zr,2))},t.\u0275dir=ce({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&Ie("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Ne]}),t})(),v0=(()=>{class t extends y0{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(N(Qt,10))},t.\u0275dir=ce({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&Ie("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Ne]}),t})();function C0(t,n){return t?`with name: '${n}'`:`at index: ${n}`}const bf=!1,oa="VALID",pc="INVALID",ki="PENDING",ia="DISABLED";function wf(t){return(gc(t)?t.validators:t)||null}function Df(t,n){return(gc(n)?n.asyncValidators:t)||null}function gc(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class D0{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===oa}get invalid(){return this.status===pc}get pending(){return this.status==ki}get disabled(){return this.status===ia}get enabled(){return this.status!==ia}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(g0(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(g0(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(m0(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(m0(n,this._rawAsyncValidators))}hasValidator(n){return hc(this._rawValidators,n)}hasAsyncValidator(n){return hc(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=ki,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=ia,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=oa,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oa||this.status===ki)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ia:oa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=ki,this._hasOwnPendingAsyncValidator=!0;const e=s0(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(n,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?ia:this.errors?pc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ki)?ki:this._anyControlsHaveStatus(pc)?pc:oa}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){gc(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function KR(t){return Array.isArray(t)?mf(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function JR(t){return Array.isArray(t)?_f(t):t||null}(this._rawAsyncValidators)}}class Sf extends D0{constructor(n,e,r){super(wf(e),Df(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function w0(t,n,e){t._forEachChild((r,o)=>{if(void 0===e[o])throw new U(1002,bf?function WR(t,n){return`Must supply a value for form control ${C0(t,n)}`}(n,o):"")})})(this,!0,n),Object.keys(n).forEach(r=>{(function b0(t,n,e){const r=t.controls;if(!(n?Object.keys(r):r).length)throw new U(1e3,bf?function GR(t){return`\n    There are no form controls registered with this ${t?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(n):"");if(!r[e])throw new U(1001,bf?function qR(t,n){return`Cannot find form control ${C0(t,n)}`}(n,e):"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(r=>{const o=this.controls[r];o&&o.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,o)=>{r.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((o,i)=>{r=e(r,o,i)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const Pi=new X("CallSetDisabledState",{providedIn:"root",factory:()=>mc}),mc="always";function sa(t,n,e=mc){Ef(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function ZR(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&S0(t,n)})}(t,n),function eN(t,n){const e=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function XR(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&S0(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function QR(t,n){if(n.valueAccessor.setDisabledState){const e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function vc(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Ef(t,n){const e=function f0(t){return t._rawValidators}(t);null!==n.validator?t.setValidators(h0(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const r=function p0(t){return t._rawAsyncValidators}(t);null!==n.asyncValidator?t.setAsyncValidators(h0(r,n.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const o=()=>t.updateValueAndValidity();vc(n._rawValidators,o),vc(n._rawAsyncValidators,o)}function S0(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const iN={provide:Qt,useExisting:He(()=>bc)},aa=(()=>Promise.resolve())();let bc=(()=>{class t extends Qt{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new it,this.form=new Sf({},mf(e),_f(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){aa.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),sa(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){aa.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){aa.then(()=>{const r=this._findContainer(e.path),o=new Sf({});(function E0(t,n){Ef(t,n)})(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){aa.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){aa.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function x0(t,n){t._syncPendingControls(),n.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(N(Ht,10),N(Qr,10),N(Pi,8))},t.\u0275dir=ce({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&A("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qe([iN]),Ne]}),t})();function M0(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function T0(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const O0=class extends D0{constructor(n=null,e,r){super(wf(e),Df(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gc(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=T0(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){M0(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){M0(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){T0(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},lN={provide:Zr,useExisting:He(()=>Ri)},k0=(()=>Promise.resolve())();let Ri=(()=>{class t extends Zr{constructor(e,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new O0,this._registered=!1,this.update=new it,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Tf(t,n){if(!n)return null;let e,r,o;return Array.isArray(n),n.forEach(i=>{i.constructor===Ai?e=i:function rN(t){return Object.getPrototypeOf(t.constructor)===Eo}(i)?r=i:o=i}),o||r||e||null}(0,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Mf(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sa(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){k0.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,o=0!==r&&Mi(r);k0.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function _c(t,n){return[...n.path,t]}(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(N(Qt,9),N(Ht,10),N(Qr,10),N(pr,10),N(xi,8),N(Pi,8))},t.\u0275dir=ce({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qe([lN]),Ne,Mn]}),t})(),P0=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ce({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const cN={provide:pr,useExisting:He(()=>wc),multi:!0};let wc=(()=>{class t extends Eo{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,r){1&e&&A("input",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},features:[Qe([cN]),Ne]}),t})(),R0=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ln({type:t}),t.\u0275inj=En({}),t})();const yN={provide:pr,useExisting:He(()=>Ni),multi:!0};function U0(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Ni=(()=>{class t extends Eo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=U0(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function vN(t){return t.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&A("change",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qe([yN]),Ne]}),t})(),Dc=(()=>{class t{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(U0(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(N(pn),N(Mr),N(Ni,9))},t.\u0275dir=ce({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const CN={provide:pr,useExisting:He(()=>kf),multi:!0};function B0(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let kf=(()=>{class t extends Eo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const o=e.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);o.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,e(o)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function bN(t){return t.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&A("change",function(i){return r.onChange(i.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qe([CN]),Ne]}),t})(),Sc=(()=>{class t{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(B0(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(B0(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(N(pn),N(Mr),N(kf,9))},t.\u0275dir=ce({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function z0(t){return"number"==typeof t?t:parseFloat(t)}let xo=(()=>{class t{constructor(){this._validator=dc}ngOnChanges(e){if(this.inputName in e){const r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):dc,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ce({type:t,features:[Mn]}),t})();const wN={provide:Ht,useExisting:He(()=>Pf),multi:!0};let Pf=(()=>{class t extends xo{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>z0(e),this.createValidator=e=>function Qb(t){return n=>{if(Yr(n.value)||Yr(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(e)}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&Nt("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Qe([wN]),Ne]}),t})();const DN={provide:Ht,useExisting:He(()=>Ec),multi:!0};let Ec=(()=>{class t extends xo{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>z0(e),this.createValidator=e=>function Yb(t){return n=>{if(Yr(n.value)||Yr(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(e)}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&Nt("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Qe([DN]),Ne]}),t})();const SN={provide:Ht,useExisting:He(()=>xc),multi:!0};let xc=(()=>{class t extends xo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Mi,this.createValidator=e=>Zb}enabled(e){return e}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&Nt("required",r._enabled?"":null)},inputs:{required:"required"},features:[Qe([SN]),Ne]}),t})(),IN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ln({type:t}),t.\u0275inj=En({imports:[R0]}),t})(),kN=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Pi,useValue:e.callSetDisabledState??mc}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ln({type:t}),t.\u0275inj=En({imports:[IN]}),t})();class Pn extends E{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:r}=this;if(n)throw e;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const Mc=ve(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Y0(...t){const n=ss(t),e=Kp(t),{args:r,keys:o}=Gb(t);if(0===r.length)return pt([],n);const i=new qe(function PN(t,n,e=Xn){return r=>{Q0(n,()=>{const{length:o}=t,i=new Array(o);let s=o,a=o;for(let l=0;l<o;l++)Q0(n,()=>{const c=pt(t[l],n);let u=!1;c.subscribe(j(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(e(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,n,o?s=>Wb(o,s):Xn));return e?i.pipe(qb(e)):i}function Q0(t,n,e){t?vr(e,t,n):n()}function Rf(...t){return function RN(){return No(1)}()(pt(t,ss(t)))}function Z0(t){return new qe(n=>{Fn(t()).subscribe(n)})}function Fi(t,n){const e=oe(t)?t:()=>t,r=o=>o.error(e());return new qe(n?o=>n.schedule(r,0,o):r)}function Nf(){return M((t,n)=>{let e=null;t._refCount++;const r=j(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const o=t._connection,i=e;e=null,o&&(!i||o===i)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(r),r.closed||(e=t.connect())})}class X0 extends qe{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,I(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new k;const e=this.getSubject();n.add(this.source.subscribe(j(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=k.EMPTY)}return n}refCount(){return Nf()(this)}}function gr(t,n){return M((e,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();e.subscribe(j(r,l=>{o?.unsubscribe();let c=0;const u=i++;Fn(t(l,u)).subscribe(o=j(r,d=>r.next(n?n(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Li(t){return t<=0?()=>tr:M((n,e)=>{let r=0;n.subscribe(j(e,o=>{++r<=t&&(e.next(o),t<=r&&e.complete())}))})}function Tc(t){return M((n,e)=>{let r=!1;n.subscribe(j(e,o=>{r=!0,e.next(o)},()=>{r||e.next(t),e.complete()}))})}function ew(t=FN){return M((n,e)=>{let r=!1;n.subscribe(j(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(t())))})}function FN(){return new Mc}function Xr(t,n){const e=arguments.length>=2;return r=>r.pipe(t?Fr((o,i)=>t(o,i,r)):Xn,Li(1),e?Tc(n):ew(()=>new Mc))}function vt(t,n,e){const r=oe(t)||n||e?{next:t,error:n,complete:e}:t;return r?M((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(j(i,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),i.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),i.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),i.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Xn}function Kn(t){return M((n,e)=>{let i,r=null,o=!1;r=n.subscribe(j(e,void 0,void 0,s=>{i=Fn(t(s,Kn(t)(n))),r?(r.unsubscribe(),r=null,i.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(e))})}function tw(t,n){return M(function LN(t,n,e,r,o){return(i,s)=>{let a=e,l=n,c=0;i.subscribe(j(s,u=>{const d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}(t,n,arguments.length>=2,!0))}function Ff(t){return t<=0?()=>tr:M((n,e)=>{let r=[];n.subscribe(j(e,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(const o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function nw(t,n){const e=arguments.length>=2;return r=>r.pipe(t?Fr((o,i)=>t(o,i,r)):Xn,Ff(1),e?Tc(n):ew(()=>new Mc))}function Lf(t){return M((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}const me="primary",la=Symbol("RouteTitle");class $N{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ji(t){return new $N(t)}function UN(t,n,e){const r=e.path.split("/");if(r.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||r.length<t.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=t[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function mr(t,n){const e=t?Object.keys(t):void 0,r=n?Object.keys(n):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let i=0;i<e.length;i++)if(o=e[i],!rw(t[o],n[o]))return!1;return!0}function rw(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),r=[...n].sort();return e.every((o,i)=>r[i]===o)}return t===n}function ow(t){return Array.prototype.concat.apply([],t)}function iw(t){return t.length>0?t[t.length-1]:null}function Ft(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function eo(t){return Wd(t)?t:js(t)?pt(Promise.resolve(t)):ee(t)}const Oc=!1,HN={exact:function lw(t,n,e){if(!Mo(t.segments,n.segments)||!Ic(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!t.children[r]||!lw(t.children[r],n.children[r],e))return!1;return!0},subset:cw},sw={exact:function zN(t,n){return mr(t,n)},subset:function GN(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>rw(t[e],n[e]))},ignored:()=>!0};function aw(t,n,e){return HN[e.paths](t.root,n.root,e.matrixParams)&&sw[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function cw(t,n,e){return uw(t,n,n.segments,e)}function uw(t,n,e,r){if(t.segments.length>e.length){const o=t.segments.slice(0,e.length);return!(!Mo(o,e)||n.hasChildren()||!Ic(o,e,r))}if(t.segments.length===e.length){if(!Mo(t.segments,e)||!Ic(t.segments,e,r))return!1;for(const o in n.children)if(!t.children[o]||!cw(t.children[o],n.children[o],r))return!1;return!0}{const o=e.slice(0,t.segments.length),i=e.slice(t.segments.length);return!!(Mo(t.segments,o)&&Ic(t.segments,o,r)&&t.children[me])&&uw(t.children[me],n,i,r)}}function Ic(t,n,e){return n.every((r,o)=>sw[e](t[o].parameters,r.parameters))}class to{constructor(n=new we([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return KN.serialize(this)}}class we{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Ft(e,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ac(this)}}class ca{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ji(this.parameters)),this._parameterMap}toString(){return fw(this)}}function Mo(t,n){return t.length===n.length&&t.every((e,r)=>e.path===n[r].path)}let ua=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:function(){return new jf},providedIn:"root"}),t})();class jf{parse(n){const e=new rF(n);return new to(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${da(n.root,!0)}`,r=function QN(t){const n=Object.keys(t).map(e=>{const r=t[e];return Array.isArray(r)?r.map(o=>`${kc(e)}=${kc(o)}`).join("&"):`${kc(e)}=${kc(r)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${r}${"string"==typeof n.fragment?`#${function JN(t){return encodeURI(t)}(n.fragment)}`:""}`}}const KN=new jf;function Ac(t){return t.segments.map(n=>fw(n)).join("/")}function da(t,n){if(!t.hasChildren())return Ac(t);if(n){const e=t.children[me]?da(t.children[me],!1):"",r=[];return Ft(t.children,(o,i)=>{i!==me&&r.push(`${i}:${da(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function WN(t,n){let e=[];return Ft(t.children,(r,o)=>{o===me&&(e=e.concat(n(r,o)))}),Ft(t.children,(r,o)=>{o!==me&&(e=e.concat(n(r,o)))}),e}(t,(r,o)=>o===me?[da(t.children[me],!1)]:[`${o}:${da(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[me]?`${Ac(t)}/${e[0]}`:`${Ac(t)}/(${e.join("//")})`}}function dw(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kc(t){return dw(t).replace(/%3B/gi,";")}function Vf(t){return dw(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pc(t){return decodeURIComponent(t)}function hw(t){return Pc(t.replace(/\+/g,"%20"))}function fw(t){return`${Vf(t.path)}${function YN(t){return Object.keys(t).map(n=>`;${Vf(n)}=${Vf(t[n])}`).join("")}(t.parameters)}`}const ZN=/^[^\/()?;=#]+/;function Rc(t){const n=t.match(ZN);return n?n[0]:""}const XN=/^[^=?&#]+/,tF=/^[^&#]+/;class rF{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[me]=new we(n,e)),r}parseSegment(){const n=Rc(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new U(4009,Oc);return this.capture(n),new ca(Pc(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=Rc(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=Rc(this.remaining);o&&(r=o,this.capture(r))}n[Pc(e)]=Pc(r)}parseQueryParam(n){const e=function eF(t){const n=t.match(XN);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const s=function nF(t){const n=t.match(tF);return n?n[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=hw(e),i=hw(r);if(n.hasOwnProperty(o)){let s=n[o];Array.isArray(s)||(s=[s],n[o]=s),s.push(i)}else n[o]=i}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new U(4010,Oc);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):n&&(i=me);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s[me]:new we([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new U(4011,Oc)}}function $f(t){return t.segments.length>0?new we([],{[me]:t}):t}function Nc(t){const n={};for(const r of Object.keys(t.children)){const i=Nc(t.children[r]);(i.segments.length>0||i.hasChildren())&&(n[r]=i)}return function oF(t){if(1===t.numberOfChildren&&t.children[me]){const n=t.children[me];return new we(t.segments.concat(n.segments),n.children)}return t}(new we(t.segments,n))}function To(t){return t instanceof to}const Uf=!1;function iF(t,n,e,r,o){if(0===e.length)return Vi(n.root,n.root,n.root,r,o);const i=function yw(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new _w(!0,0,t);let n=0,e=!1;const r=t.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Ft(i.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?n++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new _w(e,n,r)}(e);return i.toRoot()?Vi(n.root,n.root,new we([],{}),r,o):function s(l){const c=function aF(t,n,e,r){if(t.isAbsolute)return new $i(n.root,!0,0);if(-1===r)return new $i(e,e===n.root,0);return function vw(t,n,e){let r=t,o=n,i=e;for(;i>o;){if(i-=o,r=r.parent,!r)throw new U(4005,Uf&&"Invalid number of '../'");o=r.segments.length}return new $i(r,!1,o-i)}(e,r+(ha(t.commands[0])?0:1),t.numberOfDoubleDots)}(i,n,t.snapshot?._urlSegment,l),u=c.processChildren?Ui(c.segmentGroup,c.index,i.commands):Bf(c.segmentGroup,c.index,i.commands);return Vi(n.root,c.segmentGroup,u,r,o)}(t.snapshot?._lastPathIndex)}function ha(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function fa(t){return"object"==typeof t&&null!=t&&t.outlets}function Vi(t,n,e,r,o){let s,i={};r&&Ft(r,(l,c)=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=t===n?e:mw(t,n,e);const a=$f(Nc(s));return new to(a,i,o)}function mw(t,n,e){const r={};return Ft(t.children,(o,i)=>{r[i]=o===n?e:mw(o,n,e)}),new we(t.segments,r)}class _w{constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&ha(r[0]))throw new U(4003,Uf&&"Root segment cannot have matrix parameters");const o=r.find(fa);if(o&&o!==iw(r))throw new U(4004,Uf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $i{constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}}function Bf(t,n,e){if(t||(t=new we([],{})),0===t.segments.length&&t.hasChildren())return Ui(t,n,e);const r=function cF(t,n,e){let r=0,o=n;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=e.length)return i;const s=t.segments[o],a=e[r];if(fa(a))break;const l=`${a}`,c=r<e.length-1?e[r+1]:null;if(o>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!bw(l,c,s))return i;r+=2}else{if(!bw(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,n,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new we(t.segments.slice(0,r.pathIndex),{});return i.children[me]=new we(t.segments.slice(r.pathIndex),t.children),Ui(i,0,o)}return r.match&&0===o.length?new we(t.segments,{}):r.match&&!t.hasChildren()?Hf(t,n,e):r.match?Ui(t,0,o):Hf(t,n,e)}function Ui(t,n,e){if(0===e.length)return new we(t.segments,{});{const r=function lF(t){return fa(t[0])?t[0].outlets:{[me]:t}}(e),o={};if(!r[me]&&t.children[me]&&1===t.numberOfChildren&&0===t.children[me].segments.length){const i=Ui(t.children[me],n,e);return new we(t.segments,i.children)}return Ft(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=Bf(t.children[s],n,i))}),Ft(t.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new we(t.segments,o)}}function Hf(t,n,e){const r=t.segments.slice(0,n);let o=0;for(;o<e.length;){const i=e[o];if(fa(i)){const l=uF(i.outlets);return new we(r,l)}if(0===o&&ha(e[0])){r.push(new ca(t.segments[n].path,Cw(e[0]))),o++;continue}const s=fa(i)?i.outlets[me]:`${i}`,a=o<e.length-1?e[o+1]:null;s&&a&&ha(a)?(r.push(new ca(s,Cw(a))),o+=2):(r.push(new ca(s,{})),o++)}return new we(r,{})}function uF(t){const n={};return Ft(t,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[r]=Hf(new we([],{}),0,e))}),n}function Cw(t){const n={};return Ft(t,(e,r)=>n[r]=`${e}`),n}function bw(t,n,e){return t==e.path&&mr(n,e.parameters)}const pa="imperative";class _r{constructor(n,e){this.id=n,this.url=e}}class zf extends _r{constructor(n,e,r="imperative",o=null){super(n,e),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class no extends _r{constructor(n,e,r){super(n,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fc extends _r{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Lc extends _r{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=16}}class Gf extends _r{constructor(n,e,r,o){super(n,e),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dF extends _r{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hF extends _r{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fF extends _r{constructor(n,e,r,o,i){super(n,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pF extends _r{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gF extends _r{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mF{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _F{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yF{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vF{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CF{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bF{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ww{constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let SF=(()=>{class t{createUrlTree(e,r,o,i,s,a){return iF(e||r.root,o,i,s,a)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})(),xF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:function(n){return SF.\u0275fac(n)},providedIn:"root"}),t})();class Dw{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=qf(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){const e=qf(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Wf(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return Wf(n,this._root).map(e=>e.value)}}function qf(t,n){if(t===n.value)return n;for(const e of n.children){const r=qf(t,e);if(r)return r}return null}function Wf(t,n){if(t===n.value)return[n];for(const e of n.children){const r=Wf(t,e);if(r.length)return r.unshift(n),r}return[]}class jr{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Bi(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class Sw extends Dw{constructor(n,e){super(n),this.snapshot=e,Kf(this,n)}toString(){return this.snapshot.toString()}}function Ew(t,n){const e=function MF(t,n){const s=new jc([],{},{},"",{},me,n,null,t.root,-1,{});return new Mw("",new jr(s,[]))}(t,n),r=new Pn([new ca("",{})]),o=new Pn({}),i=new Pn({}),s=new Pn({}),a=new Pn(""),l=new ro(r,o,s,a,i,me,n,e.root);return l.snapshot=e.root,new Sw(new jr(l,[]),e)}class ro{constructor(n,e,r,o,i,s,a,l){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(L(c=>c[la]))??ee(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(L(n=>ji(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(L(n=>ji(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xw(t,n="emptyOnly"){const e=t.pathFromRoot;let r=0;if("always"!==n)for(r=e.length-1;r>=1;){const o=e[r],i=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function TF(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class jc{get title(){return this.data?.[la]}constructor(n,e,r,o,i,s,a,l,c,u,d){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ji(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Mw extends Dw{constructor(n,e){super(e),this.url=n,Kf(this,e)}toString(){return Tw(this._root)}}function Kf(t,n){n.value._routerState=t,n.children.forEach(e=>Kf(t,e))}function Tw(t){const n=t.children.length>0?` { ${t.children.map(Tw).join(", ")} } `:"";return`${t.value}${n}`}function Jf(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,mr(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),mr(n.params,e.params)||t.params.next(e.params),function BN(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!mr(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),mr(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Yf(t,n){const e=mr(t.params,n.params)&&function qN(t,n){return Mo(t,n)&&t.every((e,r)=>mr(e.parameters,n[r].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Yf(t.parent,n.parent))}function ga(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=n.value;const o=function IF(t,n,e){return n.children.map(r=>{for(const o of e.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return ga(t,r,o);return ga(t,r)})}(t,n,e);return new jr(r,o)}{if(t.shouldAttach(n.value)){const i=t.retrieve(n.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>ga(t,a)),s}}const r=function AF(t){return new ro(new Pn(t.url),new Pn(t.params),new Pn(t.queryParams),new Pn(t.fragment),new Pn(t.data),t.outlet,t.component,t)}(n.value),o=n.children.map(i=>ga(t,i));return new jr(r,o)}}const Qf="ngNavigationCancelingError";function Ow(t,n){const{redirectTo:e,navigationBehaviorOptions:r}=To(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=Iw(!1,0,n);return o.url=e,o.navigationBehaviorOptions=r,o}function Iw(t,n,e){const r=new Error("NavigationCancelingError: "+(t||""));return r[Qf]=!0,r.cancellationCode=n,e&&(r.url=e),r}function Aw(t){return kw(t)&&To(t.url)}function kw(t){return t&&t[Qf]}class kF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ma,this.attachRef=null}}let ma=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new kF,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Vc=!1;let $c=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=me,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=Ce(ma),this.location=Ce(zn),this.changeDetector=Ce(xi),this.environmentInjector=Ce(ar)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,Vc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,Vc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,Vc);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new U(4013,Vc);this._activatedRoute=e;const o=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new PF(e,a,o.injector);if(r&&function RF(t){return!!t.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=o.createComponent(c,o.length,l)}else this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ce({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mn]}),t})();class PF{constructor(n,e,r){this.route=n,this.childContexts=e,this.parent=r}get(n,e){return n===ro?this.route:n===ma?this.childContexts:this.parent.get(n,e)}}let Zf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Br({type:t,selectors:[["ng-component"]],standalone:!0,features:[Cv],decls:1,vars:0,template:function(e,r){1&e&&Ye(0,"router-outlet")},dependencies:[$c],encapsulation:2}),t})();function Pw(t,n){return t.providers&&!t._injector&&(t._injector=kl(t.providers,n,`Route: ${t.path}`)),t._injector??n}function ep(t){const n=t.children&&t.children.map(ep),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==me&&(e.component=Zf),e}function Rn(t){return t.outlet||me}function Rw(t,n){const e=t.filter(r=>Rn(r)===n);return e.push(...t.filter(r=>Rn(r)!==n)),e}function _a(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class VF{constructor(n,e,r,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=o}activate(n){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),Jf(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){const o=Bi(e);n.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Ft(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(n,e,r){const o=n.value,i=e?e.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=Bi(n);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=Bi(n);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,e,r){const o=Bi(e);n.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new bF(i.value.snapshot))}),n.children.length&&this.forwardEvent(new vF(n.value.snapshot))}activateRoutes(n,e,r){const o=n.value,i=e?e.value:null;if(Jf(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Jf(a.route.value),this.activateChildRoutes(n,null,s.children)}else{const a=_a(o.snapshot),l=a?.get(As)??null;s.attachRef=null,s.route=o,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,r)}}class Nw{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Uc{constructor(n,e){this.component=n,this.route=e}}function $F(t,n,e){const r=t._root;return ya(r,n?n._root:null,e,[r.value])}function Hi(t,n){const e=Symbol(),r=n.get(t,e);return r===e?"function"!=typeof t||function DS(t){return null!==Na(t)}(t)?n.get(t):t:r}function ya(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Bi(n);return t.children.forEach(s=>{(function BF(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function HF(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Mo(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Mo(t.url,n.url)||!mr(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yf(t,n)||!mr(t.queryParams,n.queryParams);default:return!Yf(t,n)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Nw(r)):(i.data=s.data,i._resolvedData=s._resolvedData),ya(t,n,i.component?a?a.children:null:e,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Uc(a.outlet.component,s))}else s&&va(n,a,o),o.canActivateChecks.push(new Nw(r)),ya(t,null,i.component?a?a.children:null:e,r,o)})(s,i[s.value.outlet],e,r.concat([s.value]),o),delete i[s.value.outlet]}),Ft(i,(s,a)=>va(s,e.getContext(a),o)),o}function va(t,n,e){const r=Bi(t),o=t.value;Ft(r,(i,s)=>{va(i,o.component?n?n.children.getContext(s):null:n,e)}),e.canDeactivateChecks.push(new Uc(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function Ca(t){return"function"==typeof t}function tp(t){return t instanceof Mc||"EmptyError"===t?.name}const Bc=Symbol("INITIAL_VALUE");function zi(){return gr(t=>Y0(t.map(n=>n.pipe(Li(1),function NN(...t){const n=ss(t);return M((e,r)=>{(n?Rf(t,e,n):Rf(t,e)).subscribe(r)})}(Bc)))).pipe(L(n=>{for(const e of n)if(!0!==e){if(e===Bc)return Bc;if(!1===e||e instanceof to)return e}return!0}),Fr(n=>n!==Bc),Li(1)))}function Fw(t){return function Oa(...t){return is(t)}(vt(n=>{if(To(n))throw Ow(0,n)}),L(n=>!0===n))}const np={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lw(t,n,e,r,o){const i=rp(t,n,e);return i.matched?function s2(t,n,e,r){const o=n.canMatch;return o&&0!==o.length?ee(o.map(s=>{const a=Hi(s,t);return eo(function JF(t){return t&&Ca(t.canMatch)}(a)?a.canMatch(n,e):t.runInContext(()=>a(n,e)))})).pipe(zi(),Fw()):ee(!0)}(r=Pw(n,r),n,e).pipe(L(s=>!0===s?i:{...np})):ee(i)}function rp(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...np}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(n.matcher||UN)(e,t,n);if(!o)return{...np};const i={};Ft(o.posParams,(a,l)=>{i[l]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Hc(t,n,e,r){if(e.length>0&&function c2(t,n,e){return e.some(r=>zc(t,n,r)&&Rn(r)!==me)}(t,e,r)){const i=new we(n,function l2(t,n,e,r){const o={};o[me]=r,r._sourceSegment=t,r._segmentIndexShift=n.length;for(const i of e)if(""===i.path&&Rn(i)!==me){const s=new we([],{});s._sourceSegment=t,s._segmentIndexShift=n.length,o[Rn(i)]=s}return o}(t,n,r,new we(e,t.children)));return i._sourceSegment=t,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:[]}}if(0===e.length&&function u2(t,n,e){return e.some(r=>zc(t,n,r))}(t,e,r)){const i=new we(t.segments,function a2(t,n,e,r,o){const i={};for(const s of r)if(zc(t,e,s)&&!o[Rn(s)]){const a=new we([],{});a._sourceSegment=t,a._segmentIndexShift=n.length,i[Rn(s)]=a}return{...o,...i}}(t,n,e,r,t.children));return i._sourceSegment=t,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:e}}const o=new we(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:e}}function zc(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function jw(t,n,e,r){return!!(Rn(t)===r||r!==me&&zc(n,e,t))&&("**"===t.path||rp(n,t,e).matched)}function Vw(t,n,e){return 0===n.length&&!t.children[e]}const Gc=!1;class qc{constructor(n){this.segmentGroup=n||null}}class $w{constructor(n){this.urlTree=n}}function ba(t){return Fi(new qc(t))}function Uw(t){return Fi(new $w(t))}class p2{constructor(n,e,r,o,i){this.injector=n,this.configLoader=e,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const n=Hc(this.urlTree.root,[],[],this.config).segmentGroup,e=new we(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,e,me).pipe(L(i=>this.createUrlTree(Nc(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Kn(i=>{if(i instanceof $w)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof qc?this.noMatchError(i):i}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,me).pipe(L(o=>this.createUrlTree(Nc(o),n.queryParams,n.fragment))).pipe(Kn(o=>{throw o instanceof qc?this.noMatchError(o):o}))}noMatchError(n){return new U(4002,Gc)}createUrlTree(n,e,r){const o=$f(n);return new to(o,e,r)}expandSegmentGroup(n,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,e,r).pipe(L(i=>new we([],i))):this.expandSegment(n,r,e,r.segments,o,!0)}expandChildren(n,e,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return pt(o).pipe(Kr(i=>{const s=r.children[i],a=Rw(e,i);return this.expandSegmentGroup(n,a,s,i).pipe(L(l=>({segment:l,outlet:i})))}),tw((i,s)=>(i[s.outlet]=s.segment,i),{}),nw())}expandSegment(n,e,r,o,i,s){return pt(r).pipe(Kr(a=>this.expandSegmentAgainstRoute(n,e,r,a,o,i,s).pipe(Kn(c=>{if(c instanceof qc)return ee(null);throw c}))),Xr(a=>!!a),Kn((a,l)=>{if(tp(a))return Vw(e,o,i)?ee(new we([],{})):ba(e);throw a}))}expandSegmentAgainstRoute(n,e,r,o,i,s,a){return jw(o,e,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(n,e,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s):ba(e):ba(e)}expandSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Uw(i):this.lineralizeSegments(r,i).pipe(At(s=>{const a=new we(s,{});return this.expandSegment(n,a,e,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=rp(e,o,i);if(!a)return ba(e);const d=this.applyRedirectCommands(l,o.redirectTo,u);return o.redirectTo.startsWith("/")?Uw(d):this.lineralizeSegments(o,d).pipe(At(h=>this.expandSegment(n,e,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(n,e,r,o,i){return"**"===r.path?(n=Pw(r,n),r.loadChildren?(r._loadedRoutes?ee({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(L(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new we(o,{})))):ee(new we(o,{}))):Lw(e,r,o,n).pipe(gr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(n=r._injector??n,r,o).pipe(At(u=>{const d=u.injector??n,h=u.routes,{segmentGroup:f,slicedSegments:p}=Hc(e,a,l,h),v=new we(f.segments,f.children);if(0===p.length&&v.hasChildren())return this.expandChildren(d,h,v).pipe(L(D=>new we(a,D)));if(0===h.length&&0===p.length)return ee(new we(a,{}));const _=Rn(r)===i;return this.expandSegment(d,v,h,p,_?me:i,!0).pipe(L(T=>new we(a.concat(T.segments),T.children)))})):ba(e)))}getChildConfig(n,e,r){return e.children?ee({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?ee({routes:e._loadedRoutes,injector:e._loadedInjector}):function i2(t,n,e,r){const o=n.canLoad;return void 0===o||0===o.length?ee(!0):ee(o.map(s=>{const a=Hi(s,t);return eo(function GF(t){return t&&Ca(t.canLoad)}(a)?a.canLoad(n,e):t.runInContext(()=>a(n,e)))})).pipe(zi(),Fw())}(n,e,r).pipe(At(o=>o?this.configLoader.loadChildren(n,e).pipe(vt(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):function h2(t){return Fi(Iw(Gc,3))}())):ee({routes:[],injector:n})}lineralizeSegments(n,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ee(r);if(o.numberOfChildren>1||!o.children[me])return n.redirectTo,Fi(new U(4e3,Gc));o=o.children[me]}}applyRedirectCommands(n,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r)}applyRedirectCreateUrlTree(n,e,r,o){const i=this.createSegmentGroup(n,e.root,r,o);return new to(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const r={};return Ft(n,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(n,e,r,o){const i=this.createSegments(n,e.segments,r,o);let s={};return Ft(e.children,(a,l)=>{s[l]=this.createSegmentGroup(n,a,r,o)}),new we(i,s)}createSegments(n,e,r,o){return e.map(i=>i.path.startsWith(":")?this.findPosParam(n,i,o):this.findOrReturn(i,r))}findPosParam(n,e,r){const o=r[e.path.substring(1)];if(!o)throw new U(4001,Gc);return o}findOrReturn(n,e){let r=0;for(const o of e){if(o.path===n.path)return e.splice(r),o;r++}return n}}class m2{}class v2{constructor(n,e,r,o,i,s,a){this.injector=n,this.rootComponentType=e,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const n=Hc(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,me).pipe(L(e=>{if(null===e)return null;const r=new jc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},me,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new jr(r,e),i=new Mw(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(n){const e=n.value,r=xw(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,e,r):this.processSegment(n,e,r,r.segments,o)}processChildren(n,e,r){return pt(Object.keys(r.children)).pipe(Kr(o=>{const i=r.children[o],s=Rw(e,o);return this.processSegmentGroup(n,s,i,o)}),tw((o,i)=>o&&i?(o.push(...i),o):null),function jN(t,n=!1){return M((e,r)=>{let o=0;e.subscribe(j(r,i=>{const s=t(i,o++);(s||n)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),Tc(null),nw(),L(o=>{if(null===o)return null;const i=Hw(o);return function C2(t){t.sort((n,e)=>n.value.outlet===me?-1:e.value.outlet===me?1:n.value.outlet.localeCompare(e.value.outlet))}(i),i}))}processSegment(n,e,r,o,i){return pt(e).pipe(Kr(s=>this.processSegmentAgainstRoute(s._injector??n,s,r,o,i)),Xr(s=>!!s),Kn(s=>{if(tp(s))return Vw(r,o,i)?ee([]):ee(null);throw s}))}processSegmentAgainstRoute(n,e,r,o,i){if(e.redirectTo||!jw(e,r,o,i))return ee(null);let s;if("**"===e.path){const a=o.length>0?iw(o).parameters:{},l=Gw(r)+o.length;s=ee({snapshot:new jc(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qw(e),Rn(e),e.component??e._loadedComponent??null,e,zw(r),l,Ww(e)),consumedSegments:[],remainingSegments:[]})}else s=Lw(r,e,o,n).pipe(L(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=Gw(r)+l.length;return{snapshot:new jc(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qw(e),Rn(e),e.component??e._loadedComponent??null,e,zw(r),d,Ww(e)),consumedSegments:l,remainingSegments:c}}));return s.pipe(gr(a=>{if(null===a)return ee(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;n=e._injector??n;const d=e._loadedInjector??n,h=function b2(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:f,slicedSegments:p}=Hc(r,c,u,h.filter(_=>void 0===_.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(L(_=>null===_?null:[new jr(l,_)]));if(0===h.length&&0===p.length)return ee([new jr(l,[])]);const v=Rn(e)===i;return this.processSegment(d,h,f,p,v?me:i).pipe(L(_=>null===_?null:[new jr(l,_)]))}))}}function w2(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function Hw(t){const n=[],e=new Set;for(const r of t){if(!w2(r)){n.push(r);continue}const o=n.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),e.add(o)):n.push(r)}for(const r of e){const o=Hw(r.children);n.push(new jr(r.value,o))}return n.filter(r=>!e.has(r))}function zw(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function Gw(t){let n=t,e=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift??0;return e-1}function qw(t){return t.data||{}}function Ww(t){return t.resolve||{}}function Kw(t){return"string"==typeof t.title||null===t.title}function op(t){return gr(n=>{const e=t(n);return e?pt(e).pipe(L(()=>n)):ee(n)})}const Gi=new X("ROUTES");let ip=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ce(lC)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ee(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=eo(e.loadComponent()).pipe(L(Yw),vt(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),Lf(()=>{this.componentLoaders.delete(e)})),o=new X0(r,()=>new E).pipe(Nf());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(L(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(e).injector,c=ow(l.get(Gi,[],ae.Self|ae.Optional)));return{routes:c.map(ep),injector:l}}),Lf(()=>{this.childrenLoaders.delete(r)})),s=new X0(i,()=>new E).pipe(Nf());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(e){return eo(e()).pipe(L(Yw),At(r=>r instanceof yv||Array.isArray(r)?ee(r):pt(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Yw(t){return function I2(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Kc=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new E,this.configLoader=Ce(ip),this.environmentInjector=Ce(ar),this.urlSerializer=Ce(ua),this.rootContexts=Ce(ma),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new _F(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new mF(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new Pn({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pa,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fr(r=>0!==r.id),L(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),gr(r=>{let o=!1,i=!1;return ee(r).pipe(vt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gr(s=>{const a=e.browserUrlTree.toString(),l=!e.navigated||s.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const u="";return this.events.next(new Lc(s.id,e.serializeUrl(r.rawUrl),u,0)),e.rawUrlTree=s.rawUrl,s.resolve(null),tr}if(e.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Qw(s.source)&&(e.browserUrlTree=s.extractedUrl),ee(s).pipe(gr(u=>{const d=this.transitions?.getValue();return this.events.next(new zf(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?tr:Promise.resolve(u)}),function g2(t,n,e,r){return gr(o=>function f2(t,n,e,r,o){return new p2(t,n,e,r,o).apply()}(t,n,e,o.extractedUrl,r).pipe(L(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),vt(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function S2(t,n,e,r,o){return At(i=>function y2(t,n,e,r,o,i,s="emptyOnly"){return new v2(t,n,e,r,o,s,i).recognize().pipe(gr(a=>null===a?function _2(t){return new qe(n=>n.error(t))}(new m2):ee(a)))}(t,n,e,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(L(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),vt(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=e.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);e.setBrowserUrl(h,u)}e.browserUrlTree=u.urlAfterRedirects}const d=new dF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,v=new zf(u,this.urlSerializer.serialize(d),h,f);this.events.next(v);const _=Ew(d,this.rootComponentType).snapshot;return ee(r={...s,targetSnapshot:_,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Lc(s.id,e.serializeUrl(r.extractedUrl),u,1)),e.rawUrlTree=s.rawUrl,s.resolve(null),tr}}),vt(s=>{const a=new hF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),L(s=>r={...s,guards:$F(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function QF(t,n){return At(e=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return 0===s.length&&0===i.length?ee({...e,guardsResult:!0}):function ZF(t,n,e,r){return pt(t).pipe(At(o=>function o2(t,n,e,r,o){const i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return i&&0!==i.length?ee(i.map(a=>{const l=_a(n)??o,c=Hi(a,l);return eo(function KF(t){return t&&Ca(t.canDeactivate)}(c)?c.canDeactivate(t,n,e,r):l.runInContext(()=>c(t,n,e,r))).pipe(Xr())})).pipe(zi()):ee(!0)}(o.component,o.route,e,n,r)),Xr(o=>!0!==o,!0))}(s,r,o,t).pipe(At(a=>a&&function zF(t){return"boolean"==typeof t}(a)?function XF(t,n,e,r){return pt(n).pipe(Kr(o=>Rf(function t2(t,n){return null!==t&&n&&n(new yF(t)),ee(!0)}(o.route.parent,r),function e2(t,n){return null!==t&&n&&n(new CF(t)),ee(!0)}(o.route,r),function r2(t,n,e){const r=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(s=>function UF(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(s)).filter(s=>null!==s).map(s=>Z0(()=>ee(s.guards.map(l=>{const c=_a(s.node)??e,u=Hi(l,c);return eo(function WF(t){return t&&Ca(t.canActivateChild)}(u)?u.canActivateChild(r,t):c.runInContext(()=>u(r,t))).pipe(Xr())})).pipe(zi())));return ee(i).pipe(zi())}(t,o.path,e),function n2(t,n,e){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return ee(!0);const o=r.map(i=>Z0(()=>{const s=_a(n)??e,a=Hi(i,s);return eo(function qF(t){return t&&Ca(t.canActivate)}(a)?a.canActivate(n,t):s.runInContext(()=>a(n,t))).pipe(Xr())}));return ee(o).pipe(zi())}(t,o.route,e))),Xr(o=>!0!==o,!0))}(r,i,t,n):ee(a)),L(a=>({...e,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),vt(s=>{if(r.guardsResult=s.guardsResult,To(s.guardsResult))throw Ow(0,s.guardsResult);const a=new fF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Fr(s=>!!s.guardsResult||(e.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),op(s=>{if(s.guards.canActivateChecks.length)return ee(s).pipe(vt(a=>{const l=new pF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),gr(a=>{let l=!1;return ee(a).pipe(function E2(t,n){return At(e=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return ee(e);let i=0;return pt(o).pipe(Kr(s=>function x2(t,n,e,r){const o=t.routeConfig,i=t._resolve;return void 0!==o?.title&&!Kw(o)&&(i[la]=o.title),function M2(t,n,e,r){const o=function T2(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===o.length)return ee({});const i={};return pt(o).pipe(At(s=>function O2(t,n,e,r){const o=_a(n)??r,i=Hi(t,o);return eo(i.resolve?i.resolve(n,e):o.runInContext(()=>i(n,e)))}(t[s],n,e,r).pipe(Xr(),vt(a=>{i[s]=a}))),Ff(1),function VN(t){return L(()=>t)}(i),Kn(s=>tp(s)?tr:Fi(s)))}(i,t,n,r).pipe(L(s=>(t._resolvedData=s,t.data=xw(t,e).resolve,o&&Kw(o)&&(t.data[la]=o.title),null)))}(s.route,r,t,n)),vt(()=>i++),Ff(1),At(s=>i===o.length?ee(e):tr))})}(e.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),vt(a=>{const l=new gF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),op(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(vt(u=>{l.component=u}),L(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Y0(a(s.targetSnapshot.root)).pipe(Tc(),Li(1))}),op(()=>this.afterPreactivation()),L(s=>{const a=function OF(t,n,e){const r=ga(t,n._root,e?e._root:void 0);return new Sw(r,n)}(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),vt(s=>{e.currentUrlTree=s.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),e.routerState=s.targetRouterState,"deferred"===e.urlUpdateStrategy&&(s.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,s),e.browserUrlTree=s.urlAfterRedirects)}),((t,n,e)=>L(r=>(new VF(n,r.targetRouterState,r.currentRouterState,e).activate(t),r)))(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s)),Li(1),vt({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new no(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Lf(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Kn(s=>{if(i=!0,kw(s)){Aw(s)||(e.navigated=!0,e.restoreHistory(r,!0));const a=new Fc(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),Aw(s)){const l=e.urlHandlingStrategy.merge(s.url,e.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||Qw(r.source)};e.scheduleNavigation(l,pa,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const a=new Gf(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(e.errorHandler(s))}catch(l){r.reject(l)}}return tr}))}))}cancelNavigationTransition(e,r,o){const i=new Fc(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(i),e.resolve(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Qw(t){return t!==pa}let Zw=(()=>{class t{buildTitle(e){let r,o=e.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===me);return r}getResolvedTitleForRoute(e){return e.data[la]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:function(){return Ce(A2)},providedIn:"root"}),t})(),A2=(()=>{class t extends Zw{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(e){return new(e||t)(K(Ob))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),k2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:function(){return Ce(R2)},providedIn:"root"}),t})();class P2{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let R2=(()=>{class t extends P2{}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Jc=new X("",{providedIn:"root",factory:()=>({})});let F2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:function(){return Ce(L2)},providedIn:"root"}),t})(),L2=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function j2(t){throw t}function V2(t,n,e){return n.parse("/")}const $2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},U2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xt=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ce(JI),this.isNgZoneEnabled=!1,this.options=Ce(Jc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||j2,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||V2,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ce(F2),this.routeReuseStrategy=Ce(k2),this.urlCreationStrategy=Ce(xF),this.titleStrategy=Ce(Zw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ow(Ce(Gi,{optional:!0})??[]),this.navigationTransitions=Ce(Kc),this.urlSerializer=Ce(ua),this.location=Ce(jh),this.isNgZoneEnabled=Ce(ct)instanceof ct&&ct.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new to,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ew(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),pa,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(ep),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){const o=To(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,pa,null,r)}navigate(e,r={skipLocationChange:!1}){return function B2(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new U(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return r}isActive(e,r){let o;if(o=!0===r?{...$2}:!1===r?{...U2}:r,To(e))return aw(this.currentUrlTree,e,o);const i=this.parseUrl(e);return aw(this.currentUrlTree,i,o)}removeEmptyProps(e){return Object.keys(e).reduce((r,o)=>{const i=e[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(e,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(e,r){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Yc=(()=>{class t{constructor(e,r,o,i,s,a){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new E;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof no&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=Mi(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=Mi(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=Mi(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function zm(t,n,e){return function QE(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?Hm:ei}(n,e)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,e,r):o.removeAttribute(i,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return t.\u0275fac=function(e){return new(e||t)(N(xt),N(ro),function nl(t){return function w1(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const r=e.length;let o=0;for(;o<r;){const i=e[o];if(Rg(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof e[o];)o++;else{if(i===n)return e[o+1];o+=2}}}return null}(Pt(),t)}("tabindex"),N(Mr),N(pn),N(Do))},t.\u0275dir=ce({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,r){1&e&&A("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&e&&Nt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Mn]}),t})(),Xw=(()=>{class t{get isActive(){return this._isActive}constructor(e,r,o,i,s){this.router=e,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new it,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof no&&this.update()})}ngAfterContentInit(){ee(this.links.changes,ee(null)).pipe(No()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=pt(e).pipe(No()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const r=function H2(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&e.isActive(o.urlTree,r)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}}return t.\u0275fac=function(e){return new(e||t)(N(xt),N(pn),N(Mr),N(xi),N(Yc,8))},t.\u0275dir=ce({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(e,r,o){if(1&e&&jv(o,Yc,5),2&e){let i;Lv(i=function Vv(){return function TI(t,n){return t[or].queries[n].queryList}(V(),Mg())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Mn]}),t})();class eD{}let z2=(()=>{class t{constructor(e,r,o,i,s){this.router=e,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Fr(e=>e instanceof no),Kr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=kl(i.providers,e,`Route: ${i.path}`));const s=i._injector??e,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return pt(o).pipe(No())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):ee(null);const i=o.pipe(At(s=>null===s?ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return r.loadComponent&&!r._loadedComponent?pt([i,this.loader.loadComponent(r)]).pipe(No()):i})}}return t.\u0275fac=function(e){return new(e||t)(K(xt),K(lC),K(ar),K(eD),K(ip))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ap=new X("");let tD=(()=>{class t{constructor(e,r,o,i,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof zf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof no&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ww&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ww(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(e){!function w_(){throw new Error("invalid")}()},t.\u0275prov=Z({token:t,factory:t.\u0275fac}),t})();var mn=(()=>((mn=mn||{})[mn.COMPLETE=0]="COMPLETE",mn[mn.FAILED=1]="FAILED",mn[mn.REDIRECTING=2]="REDIRECTING",mn))();const qi=!1;function oo(t,n){return{\u0275kind:t,\u0275providers:n}}const lp=new X("",{providedIn:"root",factory:()=>!1});function rD(){const t=Ce(lr);return n=>{const e=t.get($l);if(n!==e.components[0])return;const r=t.get(xt),o=t.get(oD);1===t.get(cp)&&r.initialNavigation(),t.get(iD,null,ae.Optional)?.setUpPreloading(),t.get(ap,null,ae.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const oD=new X(qi?"bootstrap done indicator":"",{factory:()=>new E}),cp=new X(qi?"initial navigation":"",{providedIn:"root",factory:()=>1});function J2(){let t=[];return t=qi?[{provide:fl,multi:!0,useFactory:()=>{const n=Ce(xt);return()=>n.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function wF(t){if(!("type"in t))return`Unknown Router Event: ${t.constructor.name}`;switch(t.type){case 14:return`ActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state}, shouldActivate: ${t.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 2:return`NavigationCancel(id: ${t.id}, url: '${t.url}')`;case 16:return`NavigationSkipped(id: ${t.id}, url: '${t.url}')`;case 1:return`NavigationEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${t.id}, url: '${t.url}', error: ${t.error})`;case 0:return`NavigationStart(id: ${t.id}, url: '${t.url}')`;case 6:return`ResolveEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 5:return`ResolveStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 10:return`RouteConfigLoadEnd(path: ${t.route.path})`;case 9:return`RouteConfigLoadStart(path: ${t.route.path})`;case 4:return`RoutesRecognized(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 15:return`Scroll(anchor: '${t.anchor}', position: '${t.position?`${t.position[0]}, ${t.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],oo(1,t)}const iD=new X(qi?"router preloader":"");function Y2(t){return oo(0,[{provide:iD,useExisting:z2},{provide:eD,useExisting:t}])}const wa=!1,sD=new X(wa?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Q2=[jh,{provide:ua,useClass:jf},xt,ma,{provide:ro,useFactory:function nD(t){return t.routerState.root},deps:[xt]},ip,wa?{provide:lp,useValue:!0}:[]];function Z2(){return new mC("Router",xt)}let aD=(()=>{class t{constructor(e){}static forRoot(e,r){return{ngModule:t,providers:[Q2,wa&&r?.enableTracing?J2().\u0275providers:[],{provide:Gi,multi:!0,useValue:e},{provide:sD,useFactory:nL,deps:[[xt,new bs,new ws]]},{provide:Jc,useValue:r||{}},r?.useHash?{provide:Do,useClass:FA}:{provide:Do,useClass:VC},{provide:ap,useFactory:()=>{const t=Ce(eP),n=Ce(ct),e=Ce(Jc),r=Ce(Kc),o=Ce(ua);return e.scrollOffset&&t.setOffset(e.scrollOffset),new tD(o,r,t,n,e)}},r?.preloadingStrategy?Y2(r.preloadingStrategy).\u0275providers:[],{provide:mC,multi:!0,useFactory:Z2},r?.initialNavigation?rL(r):[],[{provide:lD,useFactory:rD},{provide:gC,multi:!0,useExisting:lD}]]}}static forChild(e){return{ngModule:t,providers:[{provide:Gi,multi:!0,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)(K(sD,8))},t.\u0275mod=Ln({type:t}),t.\u0275inj=En({imports:[Zf]}),t})();function nL(t){if(wa&&t)throw new U(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function rL(t){return["disabled"===t.initialNavigation?oo(3,[{provide:Ll,multi:!0,useFactory:()=>{const n=Ce(xt);return()=>{n.setUpLocationChangeListener()}}},{provide:cp,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?oo(2,[{provide:cp,useValue:0},{provide:Ll,multi:!0,deps:[lr],useFactory:n=>{const e=n.get(RA,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=n.get(xt),i=n.get(oD);(function G2(t,n){t.events.pipe(Fr(e=>e instanceof no||e instanceof Fc||e instanceof Gf||e instanceof Lc),L(e=>e instanceof no||e instanceof Lc?mn.COMPLETE:e instanceof Fc&&(0===e.code||1===e.code)?mn.REDIRECTING:mn.FAILED),Fr(e=>e!==mn.REDIRECTING),Li(1)).subscribe(()=>{n()})})(o,()=>{r(!0)}),n.get(Kc).afterPreactivation=()=>(r(!0),i.closed?ee(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const lD=new X(wa?"Router Initializer":"");let iL=(()=>{const n=class{constructor(r){this.router=r,this.title="Pokemon TCG Pocket Collector"}ngOnInit(){const r=()=>{const o=this.router.url.startsWith("/signin");document.body.classList.toggle("signin-page",o)};r(),this.routerSub=this.router.events.subscribe(o=>{o instanceof no&&r()})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe?.(),document.body.classList.remove("signin-page")}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(xt))},n.\u0275cmp=Br({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){1&o&&Ye(0,"router-outlet")},dependencies:[$c],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background-color:#000;min-height:100vh}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.data-overview[_ngcontent-%COMP%]{margin-top:30px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 6px #0000001a}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;opacity:.9}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0}.section[_ngcontent-%COMP%]{margin:40px 0;padding:20px 0;border-top:2px solid #e9ecef}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:20px}.sets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.set-card[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.set-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px}.rarity-stats[_ngcontent-%COMP%], .pack-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.rarity-item[_ngcontent-%COMP%], .pack-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#000;border-radius:5px;border-left:4px solid #007bff}.rarity-name[_ngcontent-%COMP%], .pack-name[_ngcontent-%COMP%]{font-weight:600;color:#fff}.rarity-count[_ngcontent-%COMP%], .pack-count[_ngcontent-%COMP%]{color:#ccc}.rarity-percentage[_ngcontent-%COMP%], .pack-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0}.feature[_ngcontent-%COMP%]{background-color:#000;padding:20px;border-radius:8px;border-left:4px solid #17a2b8}.feature[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0;font-size:14px}.api-info[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:20px}.api-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0}.api-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;margin:0}.api-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;color:#ff6b6b}.error[_ngcontent-%COMP%]{background-color:#000;color:#ff6b6b;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center;border:1px solid #ff6b6b}.card-info[_ngcontent-%COMP%]{margin-top:30px}.card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}.card-item[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.card-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin:0 0 10px;font-size:16px}.card-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#ccc}.note[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#ccc;margin-top:20px}.instructions[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:30px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:#fff}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace}.data-info[_ngcontent-%COMP%]{background-color:#000;border-left:4px solid #007bff;padding:15px;margin-top:20px}.data-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:200px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),t})();function cD(t,n,e,r,o,i,s){try{var a=t[i](s),l=a.value}catch(c){return void e(c)}a.done?n(l):Promise.resolve(l).then(r,o)}function C(t){return function(){var n=this,e=arguments;return new Promise(function(r,o){var i=t.apply(n,e);function s(l){cD(i,r,o,s,a,"next",l)}function a(l){cD(i,r,o,s,a,"throw",l)}s(void 0)})}}let Qc=(()=>{const n=class{constructor(r){this.http=r,this.BASE_PATH="assets/cards/",this.API_BASE="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/"}getCardRarityCode(r,o){for(const[i,s]of Object.entries(o))if(s.split(" - ")[0]===r.rarity)return i;return r.rarity||"Unknown"}loadSets(){return this.http.get(`${this.BASE_PATH}sets2.json`)}loadRarities(){return this.http.get(`${this.BASE_PATH}rarity.json`)}loadCards(){return this.http.get(`${this.BASE_PATH}cards.json`)}loadAllData(){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(vt(r=>{}))}getSetByCode(r){return this.loadSets().pipe(L(o=>o.find(i=>i.code===r)))}getRarityName(r){return this.loadRarities().pipe(L(o=>o[r]))}getCardsBySetWithInfo(r){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(L(({cards:o,sets:i,rarities:s})=>{const a=i.find(l=>l.code===r);return o.filter(l=>l.set===r).map(l=>({...l,setInfo:a,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}))}))}getSetsWithCardCounts(){return So({cards:this.loadCards(),sets:this.loadSets()}).pipe(L(({cards:r,sets:o})=>o.map(i=>{const s=r.filter(a=>a.set===i.code).length;return{...i,actualCardCount:s}})))}getRarityDistribution(){return So({cards:this.loadCards(),rarities:this.loadRarities()}).pipe(L(({cards:r,rarities:o})=>{const i={};r.forEach(a=>{const l=this.getCardRarityCode(a,o);i[l]=(i[l]||0)+1});const s=r.length;return Object.entries(i).map(([a,l])=>({code:a,name:o[a]||a,count:l,percentage:Math.round(l/s*100*100)/100})).sort((a,l)=>l.count-a.count)}))}getPackDistribution(){return this.loadCards().pipe(L(r=>{const o={};r.forEach(s=>{(Array.isArray(s.packs)?s.packs:[]).forEach(l=>{l&&l.trim()&&(o[l]=(o[l]||0)+1)})});const i=Object.values(o).reduce((s,a)=>s+a,0);return Object.entries(o).map(([s,a])=>({pack:s,count:a,percentage:i>0?Math.round(a/i*100*100)/100:0})).sort((s,a)=>a.count-s.count)}))}searchCardsEnhanced(r){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(L(({cards:o,sets:i,rarities:s})=>o.filter(l=>l.label.eng.toLowerCase().includes(r.toLowerCase())).map(l=>{const c=i.find(u=>u.code===l.set);return{...l,setInfo:c,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}})))}getComprehensiveStats(){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(L(({cards:r,sets:o,rarities:i})=>({totalCards:r.length,totalSets:o.length,totalRarities:Object.keys(i).length,setBreakdown:o.map(a=>({...a,actualCardCount:r.filter(l=>l.set===a.code).length})),rarityBreakdown:Object.entries(i).map(([a,l])=>({code:a,name:l,count:r.filter(c=>this.getCardRarityCode(c,i)===a).length})),packBreakdown:this.calculatePackDistribution(r),dateRange:{earliest:o.reduce((a,l)=>new Date(l.releaseDate)<new Date(a)?l.releaseDate:a,o[0]?.releaseDate||""),latest:o.reduce((a,l)=>new Date(l.releaseDate)>new Date(a)?l.releaseDate:a,o[0]?.releaseDate||"")}})))}calculatePackDistribution(r){const o={};return r.forEach(i=>{(Array.isArray(i.packs)?i.packs:[]).forEach(a=>{a&&a.trim()&&(o[a]=(o[a]||0)+1)})}),Object.entries(o).map(([i,s])=>({pack:i,count:s})).sort((i,s)=>s.count-i.count)}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Oi))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),sL=(()=>{const n=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json",this.LOCAL_CARDS_PATH="assets/cards/cards.json"}fetchCardsFromAPI(){return this.http.get(this.CARDS_API_URL)}downloadAndStoreCards(){return this.fetchCardsFromAPI().pipe(vt(r=>{localStorage.setItem("pokemonCards",JSON.stringify(r))}))}getStoredCards(){const r=localStorage.getItem("pokemonCards");return r?JSON.parse(r):null}loadCards(){return this.http.get(this.LOCAL_CARDS_PATH).pipe(L(r=>r||[]))}getCardsBySet(r){return this.loadCards().pipe(L(o=>o.filter(i=>i.set===r)))}getCardsByType(r){return this.loadCards().pipe(L(o=>o.filter(i=>i.types&&i.types.includes(r))))}getCardsByRarity(r){return this.loadCards().pipe(L(o=>o.filter(i=>i.rarity===r)))}searchCardsByName(r){return this.loadCards().pipe(L(o=>o.filter(i=>i.label.eng.toLowerCase().includes(r.toLowerCase()))))}getUniqueSets(){return this.loadCards().pipe(L(r=>[...new Set(r.map(o=>o.set))]))}getAvailableTypes(){return this.loadCards().pipe(L(r=>[...new Set(r.flatMap(o=>o.types||[]).filter(o=>!!o))]))}getUniqueRarities(){return this.loadCards().pipe(L(r=>[...new Set(r.map(o=>o.rarity))]))}getUniquePacks(){return this.loadCards().pipe(L(r=>[...new Set(r.flatMap(o=>o.packs))]))}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Oi))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),aL=(()=>{const n=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsData(){return this.http.get(this.CARDS_API_URL).pipe(Kn(r=>(console.error("Error downloading cards data:",r),Fi(()=>new Error("Failed to download cards data")))))}downloadCardsAsBlob(){return this.downloadCardsData().pipe(L(r=>{const o=JSON.stringify(r,null,2);return new Blob([o],{type:"application/json"})}))}triggerDownload(){this.downloadCardsAsBlob().subscribe({next:r=>{const o=window.URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download="cards.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},error:r=>{console.error("Failed to download cards data:",r)}})}getStorageInstructions(){return"\nTo store the cards data locally:\n\n1. Create a 'cards' folder in src/assets/\n2. Use the downloadCardsAsBlob() method to get the data\n3. Save the file as 'cards.json' in src/assets/cards/\n\nAlternative: Use triggerDownload() to download the file and manually move it to the assets folder.\n\nNote: In a production environment, you would typically have a backend service \nto handle file storage and serving.\n    "}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Oi))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),lL=(()=>{const n=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsJson(){this.http.get(this.CARDS_API_URL).subscribe({next:r=>{const o=JSON.stringify(r,null,2),i=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="cards.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`Downloaded ${r.length} cards to cards.json\n\nPlease move the file to: src/assets/cards/cards.json`)},error:r=>{console.error("Failed to download cards data:",r),alert("Failed to download cards data. Please check your internet connection.")}})}showSetupInstructions(){return`\n=== Pokemon TCG Pocket Collector Setup Instructions ===\n\n1. AUTOMATIC DOWNLOAD (Recommended):\n   - Click "Download cards.json" button\n   - Move the downloaded file to: src/assets/cards/cards.json\n   - Restart the development server\n\n2. MANUAL DOWNLOAD:\n   - Go to: ${this.CARDS_API_URL}\n   - Right-click and "Save As" to src/assets/cards/cards.json\n   - Restart the development server\n\n3. VERIFY SETUP:\n   - Click "Load Cards Data" to test the service\n   - Check browser console for detailed information\n   - Data will be cached in localStorage for offline use\n\n=== Service Features ===\n- \u2705 Fetch cards from Pokemon TCG Pocket database\n- \u2705 Store data locally for offline access\n- \u2705 Filter by set, type, rarity\n- \u2705 Search cards by name\n- \u2705 Get unique values for filters\n- \u2705 Automatic fallback to localStorage\n\nFor more information, check the browser console when using the services.\n    `}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Oi))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),uD=(()=>{const n=class{constructor(r,o,i,s){this.cardDataService=r,this.fileStorageService=o,this.assetsHelper=i,this.pokemonDataService=s}initializeCardData(){return this.cardDataService.downloadAndStoreCards().pipe(vt(r=>{this.logDataSummary(r)}),Kn(r=>(console.error("Failed to initialize card data:",r),ee(this.cardDataService.getStoredCards()||[]))))}downloadCardsFile(){this.assetsHelper.downloadCardsJson()}getStorageInstructions(){return this.assetsHelper.showSetupInstructions()}logDataSummary(r){new Set(r.map(a=>a.set)),new Set(r.map(a=>a.rarity)),new Set(r.flatMap(a=>a.packs))}getAllCards(){return this.cardDataService.loadCards()}getCardsBySet(r){return this.cardDataService.getCardsBySet(r)}getCardsByType(r){return this.cardDataService.getCardsByType(r)}getCardsByPack(r){return this.cardDataService.loadCards().pipe(L(o=>o.filter(i=>i.packs.includes(r))))}searchCards(r){return this.cardDataService.searchCardsByName(r)}getFilterOptions(){return new qe(r=>{Promise.all([this.cardDataService.getUniqueSets().toPromise(),this.cardDataService.getAvailableTypes().toPromise(),this.cardDataService.getUniqueRarities().toPromise(),this.cardDataService.getUniquePacks().toPromise()]).then(([o,i,s,a])=>{r.next({sets:o||[],types:i||[],rarities:s||[],packs:a||[]}),r.complete()}).catch(o=>{r.error(o)})})}loadAllPokemonData(){return this.pokemonDataService.loadAllData().pipe(vt(r=>{this.logEnhancedDataSummary(r)}))}getAllSets(){return this.pokemonDataService.loadSets()}getSetsWithCounts(){return this.pokemonDataService.getSetsWithCardCounts()}getRarityMapping(){return this.pokemonDataService.loadRarities()}getSetInfo(r){return this.pokemonDataService.getSetByCode(r)}getCardsBySetEnhanced(r){return this.pokemonDataService.getCardsBySetWithInfo(r)}searchCardsEnhanced(r){return this.pokemonDataService.searchCardsEnhanced(r)}getRarityStats(){return this.pokemonDataService.getRarityDistribution()}getPackStats(){return this.pokemonDataService.getPackDistribution()}getComprehensiveStats(){return this.pokemonDataService.getComprehensiveStats()}logEnhancedDataSummary(r){}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(sL),K(aL),K(lL),K(Qc))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),cL=(()=>{const n=class{constructor(r){this.http=r,this.BASE_IMAGE_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-exchange/main/public/images/cards",this.imageCache=new Map}getCardImageUrl(r){return`${this.BASE_IMAGE_URL}/${r}`}checkImageExists(r){if(this.imageCache.has(r))return ee(this.imageCache.get(r));const o=this.getCardImageUrl(r);return this.http.head(o,{observe:"response"}).pipe(L(i=>{const s=200===i.status;return this.imageCache.set(r,s),s}),Kn(()=>(this.imageCache.set(r,!1),ee(!1))))}preloadImage(r){return new Promise(o=>{const i=new Image;i.onload=()=>{this.imageCache.set(r,!0),o(!0)},i.onerror=()=>{this.imageCache.set(r,!1),o(!1)},i.src=this.getCardImageUrl(r)})}getPlaceholderImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDIwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExNi41NjkgMTQwIDEzMCAxMjYuNTY5IDEzMCAxMTBDMTMwIDkzLjQzMTUgMTE2LjU2OSA4MCAxMDAgODBDODMuNDMxNSA4MCA3MCA5My40MzE1IDcwIDExMEM3MCAxMjYuNTY5IDgzLjQzMTUgMTQwIDEwMCAxNDBaIiBmaWxsPSIjOUI5QkE4Ii8+CjxwYXRoIGQ9Ik0xMDAgMTAwQzEwNS41MjMgMTAwIDExMCAxMDQuNDc3IDExMCAxMTBDMTEwIDExNS41MjMgMTA1LjUyMyAxMjAgMTAwIDEyMEM5NC40NzcgMTIwIDkwIDExNS41MjMgOTAgMTEwQzkwIDEwNC40NzcgOTQuNDc3IDEwMCAxMDAgMTAwWiIgZmlsbD0iI0Y5RkFGQiIvPgo8L3N2Zz4K"}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Oi))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),t})();class up extends Error{constructor(n,e="FunctionsError",r){super(n),this.name=e,this.context=r}}class dD extends up{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class hD extends up{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class fD extends up{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Zc=(()=>{return(t=Zc||(Zc={})).Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2",Zc;var t})();class dL{constructor(n,{headers:e={},customFetch:r,region:o=Zc.Any}={}){this.url=n,this.headers=e,this.region=o,this.fetch=(t=>{let n;return n=t||(typeof fetch>"u"?(...e)=>Promise.resolve().then(te.bind(te,397)).then(({default:r})=>r(...e)):fetch),(...e)=>n(...e)})(r)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return(0,$.__awaiter)(this,arguments,void 0,function*(e,r={}){var o;try{const{headers:i,method:s,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${e}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):"string"==typeof a?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(w=>{throw"AbortError"===w.name?w:new dD(w)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new hD(f);if(!f.ok)throw new fD(f);let _,v=(null!==(o=f.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return _="application/json"===v?yield f.json():"application/octet-stream"===v||"application/pdf"===v?yield f.blob():"text/event-stream"===v?f:"multipart/form-data"===v?yield f.formData():yield f.text(),{data:_,error:null,response:f}}catch(i){return i instanceof Error&&"AbortError"===i.name?{data:null,error:new dD(i)}:{data:null,error:i,response:i instanceof fD||i instanceof hD?i.context:void 0}}})}}var hL=te(358);const{PostgrestClient:pD}=hL,vL=class yL{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(n=navigator.userAgent)&&void 0!==n&&n.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const o=parseInt(e.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let e=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(e+=`\n\nSuggested solution: ${n.workaround}`),new Error(e)}static createWebSocket(n,e){return new(this.getWebSocketConstructor())(n,e)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return"native"===n.type||"ws"===n.type}catch{return!1}}};var Wi=(()=>{return(t=Wi||(Wi={}))[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",Wi;var t})(),Ct=(()=>{return(t=Ct||(Ct={})).closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving",Ct;var t})(),Nn=(()=>{return(t=Nn||(Nn={})).close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token",Nn;var t})(),Xc=(()=>((Xc||(Xc={})).websocket="websocket",Xc))(),io=(()=>{return(t=io||(io={})).Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed",io;var t})();class SL{constructor(){this.HEADER_LENGTH=1}decode(n,e){return n.constructor===ArrayBuffer?e(this._binaryDecode(n)):e("string"==typeof n?JSON.parse(n):{})}_binaryDecode(n){const e=new DataView(n),r=new TextDecoder;return this._decodeBroadcast(n,e,r)}_decodeBroadcast(n,e,r){const o=e.getUint8(1),i=e.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(n.slice(s,s+o));s+=o;const l=r.decode(n.slice(s,s+i));return s+=i,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(n.slice(s,n.byteLength)))}}}class gD{constructor(n,e){this.callback=n,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $e=(()=>{return(t=$e||($e={})).abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange",$e;var t})();const mD=(t,n,e={})=>{var r;const o=null!==(r=e.skipTypes)&&void 0!==r?r:[];return n?Object.keys(n).reduce((i,s)=>(i[s]=EL(s,t,n,o),i),{}):{}},EL=(t,n,e,r)=>{const i=n.find(a=>a.name===t)?.type,s=e[t];return i&&!r.includes(i)?_D(i,s):hp(s)},_D=(t,n)=>{if("_"===t.charAt(0)){const e=t.slice(1,t.length);return OL(n,e)}switch(t){case $e.bool:return xL(n);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return ML(n);case $e.json:case $e.jsonb:return TL(n);case $e.timestamp:return IL(n);default:return hp(n)}},hp=t=>t,xL=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ML=t=>{if("string"==typeof t){const n=parseFloat(t);if(!Number.isNaN(n))return n}return t},TL=t=>{if("string"==typeof t)try{return JSON.parse(t)}catch(n){return console.log(`JSON parse error: ${n}`),t}return t},OL=(t,n)=>{if("string"!=typeof t)return t;const e=t.length-1;if("{"===t[0]&&"}"===t[e]){let i;const s=t.slice(1,e);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>_D(n,a))}return t},IL=t=>"string"==typeof t?t.replace(" ","T"):t,yD=t=>{const n=new URL(t);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname=""===n.pathname||"/"===n.pathname?"/api/broadcast":n.pathname+"/api/broadcast",n.href};class fp{constructor(n,e,r={},o=1e4){this.channel=n,this.event=e,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,e){var r;return this._hasReceived(n)&&e(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:n,callback:e}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(n,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:e}){this.recHooks.filter(r=>r.status===n).forEach(r=>r.callback(e))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}class Da{constructor(n,e){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Da.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=Da.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Da.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,e,r,o){const i=this.cloneDeep(n),s=this.transformState(e),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(_=>_.presence_ref),f=d.map(_=>_.presence_ref),p=u.filter(_=>f.indexOf(_.presence_ref)<0),v=d.filter(_=>h.indexOf(_.presence_ref)<0);p.length>0&&(a[c]=p),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(n,e,r,o){const{joins:i,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=n[a])&&void 0!==c?c:[];if(n[a]=this.cloneDeep(l),u.length>0){const d=n[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);n[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=n[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),n[a]=c,o(a,c,l),0===c.length&&delete n[a]}),n}static map(n,e){return Object.getOwnPropertyNames(n).map(r=>e(r,n[r]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((e,r)=>{const o=n[r];return e[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,e},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ki=(()=>{return(t=Ki||(Ki={})).BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",Ki;var t})(),yr=(()=>{return(t=yr||(yr={})).SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR",yr;var t})();class pp{constructor(n,e={config:{}},r){var o,i;if(this.topic=n,this.params=e,this.socket=r,this.bindings={},this.state=Ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new fp(this,Nn.join,this.params,this.timeout),this.rejoinTimer=new gD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ct.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nn.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Da(this),this.broadcastEndpointURL=yD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,e=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==Ct.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(p=>p.filter))&&void 0!==i?i:[],d=!!this.bindings[Ki.PRESENCE]&&this.bindings[Ki.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>n?.(yr.CHANNEL_ERROR,p)),this._onClose(()=>n?.(yr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",function(){var p=C(function*({postgres_changes:v}){var _;if(r.socket.setAuth(),void 0!==v){const w=r.bindings.postgres_changes,T=null!==(_=w?.length)&&void 0!==_?_:0,D=[];for(let P=0;P<T;P++){const F=w[P],{filter:{event:Y,schema:Zt,table:Re,filter:ft}}=F,Qn=v&&v[P];if(!Qn||Qn.event!==Y||Qn.schema!==Zt||Qn.table!==Re||Qn.filter!==ft)return r.unsubscribe(),r.state=Ct.errored,void n?.(yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));D.push(Object.assign(Object.assign({},F),{id:Qn.id}))}return r.bindings.postgres_changes=D,void(n&&n(yr.SUBSCRIBED))}n?.(yr.SUBSCRIBED)});return function(v){return p.apply(this,arguments)}}()).receive("error",p=>{this.state=Ct.errored,n?.(yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{n?.(yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(n){var e=this;return C(function*(r,o={}){return yield e.send({type:"presence",event:"track",payload:r},o.timeout||e.timeout)}).apply(this,arguments)}untrack(){var n=this;return C(function*(e={}){return yield n.send({type:"presence",event:"untrack"},e)}).apply(this,arguments)}on(n,e,r){return this.state===Ct.joined&&n===Ki.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,e,r)}httpSend(n,e){var r=this;return C(function*(o,i,s={}){var a;const l=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,c,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const h=yield u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(n){var e=this;return C(function*(r,o={}){var i,s;if(e._canPush()||"broadcast"!==r.type)return new Promise(a=>{var l,c,u;const d=e._push(r.type,r,o.timeout||e.timeout);"broadcast"===r.type&&!(null!==(u=null===(c=null===(l=e.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=r,u={method:"POST",headers:{Authorization:e.socket.accessTokenValue?`Bearer ${e.socket.accessTokenValue}`:"",apikey:e.socket.apiKey?e.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:e.subTopic,event:a,payload:l,private:e.private}]})};try{const d=yield e._fetchWithTimeout(e.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:e.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ct.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new fp(this,Nn.leave,{},n),r.receive("ok",()=>{e(),o("ok")}).receive("timeout",()=>{e(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ct.closed,this.bindings={}}_fetchWithTimeout(n,e,r){var o=this;return C(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(n,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(s),a})()}_push(n,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new fp(this,n,e,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(n,e,r){return e}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,e,r){var o,i;const s=n.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Nn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(f=>{var p,v,_;return"*"===(null===(p=f.filter)||void 0===p?void 0:p.event)||(null===(_=null===(v=f.filter)||void 0===v?void 0:v.event)||void 0===_?void 0:_.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):null===(i=this.bindings[s])||void 0===i||i.filter(f=>{var p,v,_,w,T,D;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in f){const P=f.id,F=null===(p=f.filter)||void 0===p?void 0:p.event;return P&&(null===(v=e.ids)||void 0===v?void 0:v.includes(P))&&("*"===F||F?.toLocaleLowerCase()===(null===(_=e.data)||void 0===_?void 0:_.type.toLocaleLowerCase()))}{const P=null===(T=null===(w=f?.filter)||void 0===w?void 0:w.event)||void 0===T?void 0:T.toLocaleLowerCase();return"*"===P||P===(null===(D=e?.event)||void 0===D?void 0:D.toLocaleLowerCase())}}return f.type.toLocaleLowerCase()===s}).map(f=>{if("object"==typeof h&&"ids"in h){const p=h.data,{schema:v,table:_,commit_timestamp:w,type:T,errors:D}=p;h=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:w,eventType:T,new:{},old:{},errors:D}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Ct.closed}_isJoined(){return this.state===Ct.joined}_isJoining(){return this.state===Ct.joining}_isLeaving(){return this.state===Ct.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,e,r){const o=n.toLocaleLowerCase(),i={type:o,filter:e,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(n,e){const r=n.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&pp.isEqual(o.filter,e))})),this}static isEqual(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(n[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Nn.close,{},n)}_onError(n){this._on(Nn.error,{},e=>n(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ct.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const e={new:{},old:{}};return("INSERT"===n.type||"UPDATE"===n.type)&&(e.new=mD(n.columns,n.record)),("UPDATE"===n.type||"DELETE"===n.type)&&(e.old=mD(n.columns,n.old_record)),e}}const gp=()=>{},AL=[1e3,2e3,5e3,1e4];class RL{constructor(n,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gp,this.ref=0,this.reconnectTimer=null,this.logger=gp,this.conn=null,this.sendBuffer=[],this.serializer=new SL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return i=o||(typeof fetch>"u"?(...s)=>Promise.resolve().then(te.bind(te,397)).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...s)=>i(...s)},null===(r=e?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${n}/${Xc.websocket}`,this.httpEndpoint=yD(n),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vL.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const e=n.message;throw e.includes("Node.js")?new Error(`${e}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(n,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},n?this.conn.close(n,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(n){var e=this;return C(function*(){const r=yield n.unsubscribe();return 0===e.channels.length&&e.disconnect(),r})()}removeAllChannels(){var n=this;return C(function*(){const e=yield Promise.all(n.channels.map(r=>r.unsubscribe()));return n.channels=[],n.disconnect(),e})()}log(n,e,r){this.logger(n,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wi.connecting:return io.Connecting;case Wi.open:return io.Open;case Wi.closing:return io.Closing;default:return io.Closed}}isConnected(){return this.connectionState()===io.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(n,e={config:{}}){const r=`realtime:${n}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new pp(`realtime:${n}`,e,this);return this.channels.push(i),i}}push(n){const{topic:e,event:r,payload:o,ref:i}=n,s=()=>{this.encode(n,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${e} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var n=this;return C(function*(e=null){n._authPromise=n._performAuth(e);try{yield n._authPromise}finally{n._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var n=this;return C(function*(){var e;if(n.isConnected()){if(n.pendingHeartbeatRef){n.pendingHeartbeatRef=null,n.log("transport","heartbeat timeout. Attempting to re-establish connection");try{n.heartbeatCallback("timeout")}catch(r){n.log("error","error in heartbeat callback",r)}return n._wasManualDisconnect=!1,null===(e=n.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;n.isConnected()||null===(r=n.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}n.pendingHeartbeatRef=n._makeRef(),n.push({topic:"phoenix",event:"heartbeat",payload:{},ref:n.pendingHeartbeatRef});try{n.heartbeatCallback("sent")}catch(r){n.log("error","error in heartbeat callback",r)}n._setAuthSafely("heartbeat")}else try{n.heartbeatCallback("disconnected")}catch(r){n.log("error","error in heartbeat callback",r)}})()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return this.ref=n===this.ref?0:n,this.ref.toString()}_leaveOpenTopic(n){let e=this.channels.find(r=>r.topic===n&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${n}"`),e.unsubscribe())}_remove(n){this.channels=this.channels.filter(e=>e.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=e;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(n){var e;"heartbeat"===n&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===n&&(null===(e=this.reconnectTimer)||void 0===e||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var e;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Nn.error))}_appendParams(n,e){if(0===Object.keys(e).length)return n;const r=n.match(/\?/)?"&":"?";return`${n}${r}${new URLSearchParams(e)}`}_workerObjectUrl(n){let e;if(n)e=n;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(n,e=!1){this._connectionState=n,"connecting"===n?this._wasManualDisconnect=!1:"disconnecting"===n&&(this._wasManualDisconnect=e)}_performAuth(){var n=this;return C(function*(e=null){let r;r=e||(n.accessToken?yield n.accessToken():n.accessTokenValue),n.accessTokenValue!=r&&(n.accessTokenValue=r,n.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.76.1"}),o.joinedOnce&&o._isJoined()&&o._push(Nn.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var n=this;return C(function*(){n._authPromise&&(yield n._authPromise)})()}_setAuthSafely(n="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${n}`,e)})}_triggerStateCallbacks(n,e){try{this.stateChangeCallbacks[n].forEach(r=>{try{r(e)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(r){this.log("error",`error triggering ${n} callbacks`,r)}}_setupReconnectionTimer(){var n=this;this.reconnectTimer=new gD(C(function*(){setTimeout(C(function*(){yield n._waitForAuthIfNeeded(),n.isConnected()||n.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(n){var e,r,o,i,s,a,l,c,u;if(this.transport=null!==(e=n?.transport)&&void 0!==e?e:null,this.timeout=null!==(r=n?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=n?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=n?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=n?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=n?.heartbeatCallback)&&void 0!==a?a:gp,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=n?.reconnectAfterMs)&&void 0!==l?l:d=>AL[d-1]||1e4,this.encode=null!==(c=n?.encode)&&void 0!==c?c:(d,h)=>h(JSON.stringify(d)),this.decode=null!==(u=n?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class mp extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function tt(t){return"object"==typeof t&&null!==t&&"__isStorageError"in t}class NL extends mp{constructor(n,e,r){super(n),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _p extends mp{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}}const yp=t=>{let n;return n=t||(typeof fetch>"u"?(...e)=>Promise.resolve().then(te.bind(te,397)).then(({default:r})=>r(...e)):fetch),(...e)=>n(...e)},vp=t=>{if(Array.isArray(t))return t.map(e=>vp(e));if("function"==typeof t||t!==Object(t))return t;const n={};return Object.entries(t).forEach(([e,r])=>{const o=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));n[o]=vp(r)}),n},Cp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jL=(t,n,e)=>(0,$.__awaiter)(void 0,void 0,void 0,function*(){const r=yield(0,$.__awaiter)(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(te.bind(te,397))).Response:Response});t instanceof r&&!e?.noResolveJson?t.json().then(o=>{const i=t.status||500,s=o?.statusCode||i+"";n(new NL(Cp(o),i,s))}).catch(o=>{n(new _p(Cp(o),o))}):n(new _p(Cp(t),t))}),VL=(t,n,e,r)=>{const o={method:t,headers:n?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const n=Object.getPrototypeOf(t);return!(null!==n&&n!==Object.prototype&&null!==Object.getPrototypeOf(n)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(r)):o.body=r,n?.duplex&&(o.duplex=n.duplex),Object.assign(Object.assign({},o),e)):o};function Sa(t,n,e,r,o,i){return(0,$.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(e,VL(n,r,o,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>jL(l,a,r))})})}function Ea(t,n,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(t,"GET",n,e,r)})}function Jn(t,n,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(t,"POST",n,r,o,e)})}function bp(t,n,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(t,"PUT",n,r,o,e)})}function wp(t,n,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(t,"DELETE",n,r,o,e)})}class UL{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}execute(){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}}var vD;vD=Symbol.toStringTag;const zL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},CD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class GL{constructor(n,e={},r,o){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=r,this.fetch=yp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},CD),o);let a=Object.assign(Object.assign({},this.headers),"POST"===n&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield("PUT"==n?bp:Jn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}upload(n,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,e,r)})}uploadToSignedUrl(n,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(n),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:CD.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(yield bp(this.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(tt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(n,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(n);const o=Object.assign({},this.headers);e?.upsert&&(o["x-upsert"]="true");const i=yield Jn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new mp("No token returned by API");return{data:{signedUrl:s.toString(),path:n,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}update(n,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,e,r)})}move(n,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}copy(n,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}createSignedUrl(n,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),i=yield Jn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}createSignedUrls(n,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{const o=yield Jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:n},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}download(n,e){const o=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(n);return new class BL{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[vD]="BlobDownloadBuilder",this.promise=null}asStream(){return new UL(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}}(()=>Ea(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(n);try{const r=yield Ea(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:vp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}exists(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(n);try{return yield function $L(t,n,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(t,"HEAD",n,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r)&&r instanceof _p&&[400,404].includes(r.originalError?.status))return{data:!1,error:r};throw r}})}getPublicUrl(n,e){const r=this._getFinalPath(n),o=[],i=e?.download?`download=${!0===e.download?"":e.download}`:"";""!==i&&o.push(i);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});""!==l&&o.push(l);let c=o.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield wp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}list(n,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},zL),e),{prefix:n||""});return{data:yield Jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}listV2(n,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},n);return{data:yield Jn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}}const wD={"X-Client-Info":"storage-js/2.76.1"};class qL{constructor(n,e={},r,o){this.shouldThrowOnError=!1;const i=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wD),e),this.fetch=yp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}getBucket(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}createBucket(n){return(0,$.__awaiter)(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}updateBucket(n,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield bp(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}emptyBucket(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}deleteBucket(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield wp(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}}class WL{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wD),e),this.fetch=yp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}listBuckets(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{const e=new URLSearchParams;void 0!==n?.limit&&e.set("limit",n.limit.toString()),void 0!==n?.offset&&e.set("offset",n.offset.toString()),n?.sortColumn&&e.set("sortColumn",n.sortColumn),n?.sortOrder&&e.set("sortOrder",n.sortOrder),n?.search&&e.set("search",n.search);const r=e.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield Ea(this.fetch,o,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}deleteBucket(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield wp(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tt(e))return{data:null,error:e};throw e}})}}const Dp={"X-Client-Info":"storage-js/2.76.1","Content-Type":"application/json"};class DD extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _n(t){return"object"==typeof t&&null!==t&&"__isStorageVectorsError"in t}class Sp extends DD{constructor(n,e,r){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class KL extends DD{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}}const Ep=t=>{let n;return n=t||(typeof fetch>"u"?(...e)=>Promise.resolve().then(te.bind(te,397)).then(({default:r})=>r(...e)):fetch),(...e)=>n(...e)},SD=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),YL=(t,n,e)=>(0,$.__awaiter)(void 0,void 0,void 0,function*(){if(t&&"object"==typeof t&&"status"in t&&"ok"in t&&"number"==typeof t.status&&!e?.noResolveJson){const o=t.status||500,i=t;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";n(new Sp(SD(s),o,a))}).catch(()=>{n(new Sp(i.statusText||`HTTP ${o} error`,o,o+""))}):n(new Sp(i.statusText||`HTTP ${o} error`,o,o+""))}else n(new KL(SD(t),t))}),QL=(t,n,e,r)=>{const o={method:t,headers:n?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const n=Object.getPrototypeOf(t);return!(null!==n&&n!==Object.prototype&&null!==Object.getPrototypeOf(n)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),e)):o};function yn(t,n,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){return function tu(t,n,e,r,o,i){return(0,$.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(e,QL(n,r,o,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return c&&c.includes("application/json")?l.json():{}}).then(l=>s(l)).catch(l=>YL(l,a,r))})})}(t,"POST",n,r,o,e)})}class ZL{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dp),e),this.fetch=Ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getIndex(n,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}})}listIndexes(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteIndex(n,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}})}}class XL{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dp),e),this.fetch=Ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield yn(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getVectors(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}listVectors(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==n.segmentCount){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==n.segmentIndex&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error("segmentIndex must be between 0 and "+(n.segmentCount-1))}return{data:yield yn(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}queryVectors(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteVectors(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield yn(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}}class ej{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dp),e),this.fetch=Ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getBucket(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,$.__awaiter)(this,arguments,void 0,function*(n={}){try{return{data:yield yn(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteBucket(n){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}}class tj extends ej{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new nj(this.url,this.headers,n,this.fetch)}}class nj extends ZL{constructor(n,e,r,o){super(n,e,o),this.vectorBucketName=r}createIndex(n){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,$.__awaiter)(this,arguments,void 0,function*(e={}){return n.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new rj(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class rj extends XL{constructor(n,e,r,o,i){super(n,e,i),this.vectorBucketName=r,this.indexName=o}putVectors(n){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,$.__awaiter)(this,arguments,void 0,function*(e={}){return n.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class oj extends qL{constructor(n,e={},r,o){super(n,e,r,o)}from(n){return new GL(this.url,this.headers,n,this.fetch)}get vectors(){return new tj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new WL(this.url+"/iceberg",this.headers,this.fetch)}}let xa="";xa=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const sj={headers:{"X-Client-Info":`supabase-js-${xa}/2.76.1`}},aj={schema:"public"},lj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cj={};var ED=te(397);const hj=(t,n,e)=>{const r=(t=>{let n;return n=t||(typeof fetch>"u"?ED.default:fetch),(...e)=>n(...e)})(e),o=typeof Headers>"u"?ED.Headers:Headers;return function(){var i=C(function*(s,a){var l;const c=null!==(l=yield n())&&void 0!==l?l:t;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},Ji=3e4,Tp="X-Supabase-Api-Version",MD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ma extends Error{constructor(n,e,r){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}}function re(t){return"object"==typeof t&&null!==t&&"__isAuthError"in t}class bj extends Ma{constructor(n,e,r){super(n,e,r),this.name="AuthApiError",this.status=e,this.code=r}}class Oo extends Ma{constructor(n,e){super(n),this.name="AuthUnknownError",this.originalError=e}}class so extends Ma{constructor(n,e,r,o){super(n,r,o),this.name=e,this.status=r}}class ao extends so{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Yi extends so{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nu extends so{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class ru extends so{constructor(n,e=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class TD extends so{constructor(n,e=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Op extends so{constructor(n,e){super(n,"AuthRetryableFetchError",e,void 0)}}function Ip(t){return re(t)&&"AuthRetryableFetchError"===t.name}class OD extends so{constructor(n,e,r){super(n,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}}class Ap extends so{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const ou="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ID=" \t\n\r=".split(""),Ej=(()=>{const t=new Array(128);for(let n=0;n<t.length;n+=1)t[n]=-1;for(let n=0;n<ID.length;n+=1)t[ID[n].charCodeAt(0)]=-2;for(let n=0;n<ou.length;n+=1)t[ou[n].charCodeAt(0)]=n;return t})();function iu(t,n,e){if(null!==t)for(n.queue=n.queue<<8|t,n.queuedBits+=8;n.queuedBits>=6;)e(ou[n.queue>>n.queuedBits-6&63]),n.queuedBits-=6;else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;)e(ou[n.queue>>n.queuedBits-6&63]),n.queuedBits-=6}function AD(t,n,e){const r=Ej[t];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}for(n.queue=n.queue<<6|r,n.queuedBits+=6;n.queuedBits>=8;)e(n.queue>>n.queuedBits-8&255),n.queuedBits-=8}function kD(t){const n=[],e=s=>{n.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function Mj(t,n,e){if(0===n.utf8seq){if(t<=127)return void e(t);for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){n.utf8seq=r;break}if(2===n.utf8seq)n.codepoint=31&t;else if(3===n.utf8seq)n.codepoint=15&t;else{if(4!==n.utf8seq)throw new Error("Invalid UTF-8 sequence");n.codepoint=7&t}n.utf8seq-=1}else if(n.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|63&t,n.utf8seq-=1,0===n.utf8seq&&e(n.codepoint)}}(s,r,e)};for(let s=0;s<t.length;s+=1)AD(t.charCodeAt(s),o,i);return n.join("")}function xj(t,n){if(!(t<=127)){if(t<=2047)return n(192|t>>6),void n(128|63&t);if(t<=65535)return n(224|t>>12),n(128|t>>6&63),void n(128|63&t);if(t<=1114111)return n(240|t>>18),n(128|t>>12&63),n(128|t>>6&63),void n(128|63&t);throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}n(t)}function Qi(t){const n=[],e={queue:0,queuedBits:0},r=o=>{n.push(o)};for(let o=0;o<t.length;o+=1)AD(t.charCodeAt(o),e,r);return new Uint8Array(n)}function Io(t){const n=[],e={queue:0,queuedBits:0},r=o=>{n.push(o)};return t.forEach(o=>iu(o,e,r)),iu(null,e,r),n.join("")}const vn=()=>typeof window<"u"&&typeof document<"u",Ao={tested:!1,writable:!1},RD=()=>{if(!vn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Ao.tested)return Ao.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ao.tested=!0,Ao.writable=!0}catch{Ao.tested=!0,Ao.writable=!1}return Ao.writable},ND=t=>{let n;return n=t||(typeof fetch>"u"?(...e)=>Promise.resolve().then(te.bind(te,397)).then(({default:r})=>r(...e)):fetch),(...e)=>n(...e)},kj=t=>"object"==typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json,Zi=function(){var t=C(function*(n,e,r){yield n.setItem(e,JSON.stringify(r))});return function(e,r,o){return t.apply(this,arguments)}}(),ko=function(){var t=C(function*(n,e){const r=yield n.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(e,r){return t.apply(this,arguments)}}(),lo=function(){var t=C(function*(n,e){yield n.removeItem(e)});return function(e,r){return t.apply(this,arguments)}}();class su{constructor(){this.promise=new su.promiseConstructor((n,e)=>{this.resolve=n,this.reject=e})}}function kp(t){const n=t.split(".");if(3!==n.length)throw new Ap("Invalid JWT structure");for(let r=0;r<n.length;r++)if(!vj.test(n[r]))throw new Ap("JWT not in base64url format");return{header:JSON.parse(kD(n[0])),payload:JSON.parse(kD(n[1])),signature:Qi(n[2]),raw:{header:n[0],payload:n[1]}}}function Pp(){return(Pp=C(function*(t){return yield new Promise(n=>{setTimeout(()=>n(null),t)})})).apply(this,arguments)}function Nj(t){return("0"+t.toString(16)).substr(-2)}function Rp(){return(Rp=C(function*(t){const e=(new TextEncoder).encode(t),r=yield crypto.subtle.digest("SHA-256",e),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function Np(){return Np=C(function*(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=yield function Lj(t){return Rp.apply(this,arguments)}(t);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Np.apply(this,arguments)}function Xi(t,n){return Fp.apply(this,arguments)}function Fp(){return Fp=C(function*(t,n,e=!1){const r=function Fj(){const n=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length;let o="";for(let i=0;i<56;i++)o+=e.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(n),Array.from(n,Nj).join("")}();let o=r;e&&(o+="/PASSWORD_RECOVERY"),yield Zi(t,`${n}-code-verifier`,o);const i=yield function jj(t){return Np.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),Fp.apply(this,arguments)}su.promiseConstructor=Promise;const Vj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Hj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function es(t){if(!Hj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lp(){return new Proxy({},{get:(n,e)=>{if("__isUserNotAvailableProxy"===e)return!0;if("symbol"==typeof e){const r=e.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function FD(t){return JSON.parse(JSON.stringify(t))}const Po=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zj=[502,503,504];function LD(t){return jp.apply(this,arguments)}function jp(){return(jp=C(function*(t){var n;if(!kj(t))throw new Op(Po(t),0);if(zj.includes(t.status))throw new Op(Po(t),t.status);let e,r;try{e=yield t.json()}catch(i){throw new Oo(Po(i),i)}const o=function $j(t){const n=t.headers.get(Tp);if(!n||!n.match(Vj))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}(t);if(o&&o.getTime()>=MD["2024-01-01"].timestamp&&"object"==typeof e&&e&&"string"==typeof e.code?r=e.code:"object"==typeof e&&e&&"string"==typeof e.error_code&&(r=e.error_code),r){if("weak_password"===r)throw new OD(Po(e),t.status,(null===(n=e.weak_password)||void 0===n?void 0:n.reasons)||[]);if("session_not_found"===r)throw new ao}else if("object"==typeof e&&e&&"object"==typeof e.weak_password&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new OD(Po(e),t.status,e.weak_password.reasons);throw new bj(Po(e),t.status||500,r)})).apply(this,arguments)}const Gj=(t,n,e,r)=>{const o={method:t,headers:n?.headers||{}};return"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),e))};function ge(t,n,e,r){return Vp.apply(this,arguments)}function Vp(){return Vp=C(function*(t,n,e,r){var o;const i=Object.assign({},r?.headers);i[Tp]||(i[Tp]=MD["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield function qj(t,n,e,r,o,i){return $p.apply(this,arguments)}(t,n,e+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),Vp.apply(this,arguments)}function $p(){return($p=C(function*(t,n,e,r,o,i){const s=Gj(n,r,o,i);let a;try{a=yield t(e,Object.assign({},s))}catch(l){throw console.error(l),new Op(Po(l),0)}if(a.ok||(yield LD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield LD(l)}})).apply(this,arguments)}function Yn(t){var n;let e=null;return function Jj(t){return t.access_token&&t.refresh_token&&t.expires_in}(t)&&(e=Object.assign({},t),t.expires_at||(e.expires_at=function Oj(t){return Math.round(Date.now()/1e3)+t}(t.expires_in))),{data:{session:e,user:null!==(n=t.user)&&void 0!==n?n:t},error:null}}function jD(t){const n=Yn(t);return!n.error&&t.weak_password&&"object"==typeof t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&"string"==typeof t.weak_password.message&&t.weak_password.reasons.reduce((e,r)=>e&&"string"==typeof r,!0)&&(n.data.weak_password=t.weak_password),n}function co(t){var n;return{data:{user:null!==(n=t.user)&&void 0!==n?n:t},error:null}}function Wj(t){return{data:t,error:null}}function Kj(t){const{action_link:n,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i}=t,s=(0,$.__rest)(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:n,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function VD(t){return t}const Up=["global","local","others"];class Yj{constructor({url:n="",headers:e={},fetch:r}){this.url=n,this.headers=e,this.fetch=ND(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(n){var e=this;return C(function*(r,o=Up[0]){if(Up.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Up.join(", ")}`);try{return yield ge(e.fetch,"POST",`${e.url}/logout?scope=${o}`,{headers:e.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(re(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(n){var e=this;return C(function*(r,o={}){try{return yield ge(e.fetch,"POST",`${e.url}/invite`,{body:{email:r,data:o.data},headers:e.headers,redirectTo:o.redirectTo,xform:co})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(n){var e=this;return C(function*(){try{const{options:r}=n,o=(0,$.__rest)(n,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield ge(e.fetch,"POST",`${e.url}/admin/generate_link`,{body:i,headers:e.headers,xform:Kj,redirectTo:r?.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(n){var e=this;return C(function*(){try{return yield ge(e.fetch,"POST",`${e.url}/admin/users`,{body:n,headers:e.headers,xform:co})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})()}listUsers(n){var e=this;return C(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield ge(e.fetch,"GET",`${e.url}/admin/users`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=n?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=n?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:VD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(v=>{const _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=_}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}})()}getUserById(n){var e=this;return C(function*(){es(n);try{return yield ge(e.fetch,"GET",`${e.url}/admin/users/${n}`,{headers:e.headers,xform:co})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})()}updateUserById(n,e){var r=this;return C(function*(){es(n);try{return yield ge(r.fetch,"PUT",`${r.url}/admin/users/${n}`,{body:e,headers:r.headers,xform:co})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}})()}deleteUser(n){var e=this;return C(function*(r,o=!1){es(r);try{return yield ge(e.fetch,"DELETE",`${e.url}/admin/users/${r}`,{headers:e.headers,body:{should_soft_delete:o},xform:co})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(n){var e=this;return C(function*(){es(n.userId);try{const{data:r,error:o}=yield ge(e.fetch,"GET",`${e.url}/admin/users/${n.userId}/factors`,{headers:e.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_deleteFactor(n){var e=this;return C(function*(){es(n.userId),es(n.id);try{return{data:yield ge(e.fetch,"DELETE",`${e.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:e.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_listOAuthClients(n){var e=this;return C(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield ge(e.fetch,"GET",`${e.url}/admin/oauth/clients`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=n?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=n?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:VD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(v=>{const _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=_}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(n){var e=this;return C(function*(){try{return yield ge(e.fetch,"POST",`${e.url}/admin/oauth/clients`,{body:n,headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_getOAuthClient(n){var e=this;return C(function*(){try{return yield ge(e.fetch,"GET",`${e.url}/admin/oauth/clients/${n}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_deleteOAuthClient(n){var e=this;return C(function*(){try{return yield ge(e.fetch,"DELETE",`${e.url}/admin/oauth/clients/${n}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(n){var e=this;return C(function*(){try{return yield ge(e.fetch,"POST",`${e.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}}function $D(t={}){return{getItem:n=>t[n]||null,setItem:(n,e)=>{t[n]=e},removeItem:n=>{delete t[n]}}}const ts={debug:!!(globalThis&&RD()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class UD extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Qj extends UD{}function Xj(t,n,e){return Bp.apply(this,arguments)}function Bp(){return Bp=C(function*(t,n,e){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,n);const r=new globalThis.AbortController;return n>0&&setTimeout(()=>{r.abort(),ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},n),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(t,0===n?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=C(function*(i){if(!i){if(0===n)throw ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Qj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ts.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return yield e()}finally{ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),Bp.apply(this,arguments)}function HD(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function nV(t){const n=(new TextEncoder).encode(t);return"0x"+Array.from(n,r=>r.toString(16).padStart(2,"0")).join("")}class bt extends Error{constructor({message:n,code:e,cause:r,name:o}){var i;super(n,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=e}}class au extends bt{constructor(n,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:n}),this.name="WebAuthnUnknownError",this.originalError=e}}function oV({error:t,options:n}){var e,r,o;const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(e=i.authenticatorSelection)||void 0===e?void 0:e.requireResidentKey))return new bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===n.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new bt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if("SecurityError"===t.name){const s=window.location.hostname;if(!zD(s))return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rp.id!==s)return new bt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function iV({error:t,options:n}){const{publicKey:e}=n;if(!e)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new bt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const r=window.location.hostname;if(!zD(r))return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(e.rpId!==r)return new bt({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const aV=new class sV{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}};function lV(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:n,user:e,excludeCredentials:r}=t,o=(0,$.__rest)(t,["challenge","user","excludeCredentials"]),i=Qi(n).buffer,s=Object.assign(Object.assign({},e),{id:Qi(e.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Qi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function cV(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:n,allowCredentials:e}=t,r=(0,$.__rest)(t,["challenge","allowCredentials"]),o=Qi(n).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(e&&e.length>0){i.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){const a=e[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Qi(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function uV(t){var n;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const e=t;return{id:t.id,rawId:t.id,response:{attestationObject:Io(new Uint8Array(t.response.attestationObject)),clientDataJSON:Io(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:null!==(n=e.authenticatorAttachment)&&void 0!==n?n:void 0}}function dV(t){var n;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const e=t,r=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Io(new Uint8Array(o.authenticatorData)),clientDataJSON:Io(new Uint8Array(o.clientDataJSON)),signature:Io(new Uint8Array(o.signature)),userHandle:o.userHandle?Io(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(n=e.authenticatorAttachment)&&void 0!==n?n:void 0}}function zD(t){return"localhost"===t||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function GD(){var t,n;return!!(vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(t=navigator?.credentials)||void 0===t?void 0:t.create)&&"function"==typeof(null===(n=navigator?.credentials)||void 0===n?void 0:n.get))}function zp(){return(zp=C(function*(t){try{const n=yield navigator.credentials.create(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new au("Browser returned unexpected credential type",n)}:{data:null,error:new au("Empty credential response",n)}}catch(n){return{data:null,error:oV({error:n,options:t})}}})).apply(this,arguments)}function Gp(){return(Gp=C(function*(t){try{const n=yield navigator.credentials.get(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new au("Browser returned unexpected credential type",n)}:{data:null,error:new au("Empty credential response",n)}}catch(n){return{data:null,error:iV({error:n,options:t})}}})).apply(this,arguments)}const pV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},gV={userVerification:"preferred",hints:["security-key"]};function lu(...t){const n=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),e=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of t)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(e(s))r[i]=s;else if(n(s)){const a=r[i];r[i]=n(a)?lu(a,s):lu(s)}else r[i]=s}return r}class yV{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(n){var e=this;return C(function*(){return e.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))})()}_challenge(n,e){var r=this;return C(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!c)return{data:null,error:u};const d=a??aV.createNewAbortSignal();if("create"===c.webauthn.type){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=function mV(t,n){return lu(pV,t,n||{})}(c.webauthn.credential_options.publicKey,l?.create),{data:f,error:p}=yield function hV(t){return zp.apply(this,arguments)}({publicKey:h,signal:d});return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=function _V(t,n){return lu(gV,t,n||{})}(c.webauthn.credential_options.publicKey,l?.request),{data:f,error:p}=yield function fV(t){return Gp.apply(this,arguments)}(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Oo("Unexpected error in challenge",c)}}}).apply(this,arguments)}_verify(n){var e=this;return C(function*({challengeId:r,factorId:o,webauthn:i}){return e.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(n,e){var r=this;return C(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}},l){if(!i)return{data:null,error:new Ma("rpId is required for WebAuthn authentication")};try{if(!GD())return{data:null,error:new Oo("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:u};const{webauthn:d}=c;return r._verify({factorId:o,challengeId:c.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Oo("Unexpected error in authenticate",c)}}}).apply(this,arguments)}_register(n,e){var r=this;return C(function*({friendlyName:o,rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a},l){if(!i)return{data:null,error:new Ma("rpId is required for WebAuthn registration")};try{if(!GD())return{data:null,error:new Oo("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r._enroll({friendlyName:o});if(!c)return yield r.client.mfa.listFactors().then(f=>{var p;return null===(p=f.data)||void 0===p?void 0:p.all.find(v=>"webauthn"===v.factor_type&&v.friendly_name===o&&"unverified"!==v.status)}).then(f=>f?r.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:d,error:h}=yield r._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return d?r._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Oo("Unexpected error in register",c)}}}).apply(this,arguments)}}!function eV(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const vV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.76.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function qD(t,n,e){return qp.apply(this,arguments)}function qp(){return(qp=C(function*(t,n,e){return yield e()})).apply(this,arguments)}const ns={},bV=(()=>{class t{get jwks(){var e,r;return null!==(r=null===(e=ns[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==r?r:{keys:[]}}set jwks(e){ns[this.storageKey]=Object.assign(Object.assign({},ns[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return null!==(r=null===(e=ns[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ns[this.storageKey]=Object.assign(Object.assign({},ns[this.storageKey]),{cachedAt:e})}constructor(e){var o,i,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=t.nextInstanceID,t.nextInstanceID+=1,this.instanceID>0&&vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},vV),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Yj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ND(s.fetch),this.lock=s.lock||qD,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.lock=s.lock?s.lock:vn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?Xj:qD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new yV(this)},this.persistSession?(s.storage?this.storage=s.storage:RD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$D(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=$D(this.memoryStorage)),vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=C(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.76.1) ${(new Date).toISOString()}`,...e),this}initialize(){var e=this;return C(function*(){return e.initializePromise||(e.initializePromise=C(function*(){return yield e._acquireLock(-1,C(function*(){return yield e._initialize()}))})()),yield e.initializePromise})()}_initialize(){var e=this;return C(function*(){var r;try{const o=function Aj(t){const n={},e=new URL(t);if(e.hash&&"#"===e.hash[0])try{new URLSearchParams(e.hash.substring(1)).forEach((o,i)=>{n[i]=o})}catch{}return e.searchParams.forEach((r,o)=>{n[o]=r}),n}(window.location.href);let i="none";if(e._isImplicitGrantCallback(o)?i="implicit":(yield e._isPKCECallback(o))&&(i="pkce"),vn()&&e.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield e._getSessionFromURL(o,i);if(a){if(e._debug("#_initialize()","error detecting session from URL",a),function Sj(t){return re(t)&&"AuthImplicitGrantRedirectError"===t.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield e._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return e._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield e._saveSession(l),setTimeout(C(function*(){"recovery"===c?yield e._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield e._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield e._recoverAndRefresh(),{error:null}}catch(o){return re(o)?{error:o}:{error:new Oo("Unexpected error during initialization",o)}}finally{yield e._handleVisibilityChange(),e._debug("#_initialize()","end")}})()}signInAnonymously(e){var r=this;return C(function*(){var o,i,s;try{const a=yield ge(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=e?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=e?.options)||void 0===s?void 0:s.captchaToken}},xform:Yn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(e){var r=this;return C(function*(){var o,i,s;try{let a;if("email"in e){const{email:h,password:f,options:p}=e;let v=null,_=null;"pkce"===r.flowType&&([v,_]=yield Xi(r.storage,r.storageKey)),a=yield ge(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:null!==(o=p?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:v,code_challenge_method:_},xform:Yn})}else{if(!("phone"in e))throw new nu("You must provide either an email or phone number and a password");{const{phone:h,password:f,options:p}=e;a=yield ge(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:h,password:f,data:null!==(i=p?.data)&&void 0!==i?i:{},channel:null!==(s=p?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Yn})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(e){var r=this;return C(function*(){try{let o;if("email"in e){const{email:a,password:l,options:c}=e;o=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:jD})}else{if(!("phone"in e))throw new nu("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=e;o=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:jD})}}const{data:i,error:s}=o;return s?{data:{user:null,session:null},error:s}:i&&i.session&&i.user?(i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Yi}}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(e){var r=this;return C(function*(){var o,i,s,a;return yield r._handleProviderSignIn(e.provider,{redirectTo:null===(o=e.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=e.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(e){var r=this;return C(function*(){return yield r.initializePromise,r._acquireLock(-1,C(function*(){return r._exchangeCodeForSession(e)}))})()}signInWithWeb3(e){var r=this;return C(function*(){const{chain:o}=e;switch(o){case"ethereum":return yield r.signInWithEthereum(e);case"solana":return yield r.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(e){var r=this;return C(function*(){var o,i,s,a,l,c,u,d,h,f,p;let v,_;if("message"in e)v=e.message,_=e.signature;else{const{wallet:T,statement:D,options:P}=e;let F;if(vn())if("object"==typeof T)F=T;else{const Cn=window;if(!("ethereum"in Cn)||"object"!=typeof Cn.ethereum||!("request"in Cn.ethereum)||"function"!=typeof Cn.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");F=Cn.ethereum}else{if("object"!=typeof T||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=T}const Y=new URL(null!==(o=P?.url)&&void 0!==o?o:window.location.href),Zt=yield F.request({method:"eth_requestAccounts"}).then(Cn=>Cn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Zt||0===Zt.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Re=HD(Zt[0]);let ft=null===(i=P?.signInWithEthereum)||void 0===i?void 0:i.chainId;ft||(ft=function tV(t){return parseInt(t,16)}(yield F.request({method:"eth_chainId"}))),v=function rV(t){var n;const{chainId:e,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=t;if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null!==(n=t.statement)&&void 0!==n&&n.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`);const _=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${HD(t.address)}\n\n${t.statement?`${t.statement}\n`:""}`;let w=`URI: ${d}\nVersion: ${h}\nChain ID: ${e}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(w+=`\nExpiration Time: ${o.toISOString()}`),a&&(w+=`\nNot Before: ${a.toISOString()}`),l&&(w+=`\nRequest ID: ${l}`),c){let T="\nResources:";for(const D of c){if(!D||"string"!=typeof D)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);T+=`\n- ${D}`}w+=T}return`${_}\n${w}`}({domain:Y.host,address:Re,statement:D,uri:Y.href,version:"1",chainId:ft,nonce:null===(s=P?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(l=null===(a=P?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==l?l:new Date,expirationTime:null===(c=P?.signInWithEthereum)||void 0===c?void 0:c.expirationTime,notBefore:null===(u=P?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=P?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(h=P?.signInWithEthereum)||void 0===h?void 0:h.resources}),_=yield F.request({method:"personal_sign",params:[nV(v),Re]})}try{const{data:w,error:T}=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:v,signature:_},null!==(f=e.options)&&void 0!==f&&f.captchaToken?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Yn});if(T)throw T;return w&&w.session&&w.user?(w.session&&(yield r._saveSession(w.session),yield r._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:T}):{data:{user:null,session:null},error:new Yi}}catch(w){if(re(w))return{data:{user:null,session:null},error:w};throw w}})()}signInWithSolana(e){var r=this;return C(function*(){var o,i,s,a,l,c,u,d,h,f,p,v;let _,w;if("message"in e)_=e.message,w=e.signature;else{const{wallet:D,statement:P,options:F}=e;let Y;if(vn())if("object"==typeof D)Y=D;else{const Re=window;if(!("solana"in Re)||"object"!=typeof Re.solana||!("signIn"in Re.solana&&"function"==typeof Re.solana.signIn||"signMessage"in Re.solana&&"function"==typeof Re.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");Y=Re.solana}else{if("object"!=typeof D||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=D}const Zt=new URL(null!==(o=F?.url)&&void 0!==o?o:window.location.href);if("signIn"in Y&&Y.signIn){const Re=yield Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},F?.signInWithSolana),{version:"1",domain:Zt.host,uri:Zt.href}),P?{statement:P}:null));let ft;if(Array.isArray(Re)&&Re[0]&&"object"==typeof Re[0])ft=Re[0];else{if(!(Re&&"object"==typeof Re&&"signedMessage"in Re&&"signature"in Re))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");ft=Re}if(!("signedMessage"in ft&&"signature"in ft&&("string"==typeof ft.signedMessage||ft.signedMessage instanceof Uint8Array)&&ft.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");_="string"==typeof ft.signedMessage?ft.signedMessage:(new TextDecoder).decode(ft.signedMessage),w=ft.signature}else{if(!("signMessage"in Y&&"function"==typeof Y.signMessage&&"publicKey"in Y&&"object"==typeof Y&&Y.publicKey&&"toBase58"in Y.publicKey&&"function"==typeof Y.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${Zt.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${Zt.href}`,`Issued At: ${null!==(s=null===(i=F?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=F?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...null!==(l=F?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...null!==(c=F?.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...null!==(u=F?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...null!==(d=F?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...null!==(f=null===(h=F?.signInWithSolana)||void 0===h?void 0:h.resources)&&void 0!==f&&f.length?["Resources",...F.signInWithSolana.resources.map(ft=>`- ${ft}`)]:[]].join("\n");const Re=yield Y.signMessage((new TextEncoder).encode(_),"utf8");if(!(Re&&Re instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=Re}}try{const{data:T,error:D}=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:_,signature:Io(w)},null!==(p=e.options)&&void 0!==p&&p.captchaToken?{gotrue_meta_security:{captcha_token:null===(v=e.options)||void 0===v?void 0:v.captchaToken}}:null),xform:Yn});if(D)throw D;return T&&T.session&&T.user?(T.session&&(yield r._saveSession(T.session),yield r._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:D}):{data:{user:null,session:null},error:new Yi}}catch(T){if(re(T))return{data:{user:null,session:null},error:T};throw T}})()}_exchangeCodeForSession(e){var r=this;return C(function*(){const o=yield ko(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:l}=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:e,code_verifier:i},xform:Yn});if(yield lo(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Yi}}catch(a){if(re(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(e){var r=this;return C(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:l}=e,c=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Yn}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new Yi}}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(e){var r=this;return C(function*(){var o,i,s,a,l;try{if("email"in e){const{email:c,options:u}=e;let d=null,h=null;"pkce"===r.flowType&&([d,h]=yield Xi(r.storage,r.storageKey));const{error:f}=yield ge(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:c,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:c,options:u}=e,{data:d,error:h}=yield ge(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:c,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(l=u?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new nu("You must provide either an email or phone number.")}catch(c){if(re(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(e){var r=this;return C(function*(){var o,i;try{let s,a;"options"in e&&(s=null===(o=e.options)||void 0===o?void 0:o.redirectTo,a=null===(i=e.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield ge(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Yn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,d=l.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithSSO(e){var r=this;return C(function*(){var o,i,s;try{let a=null,l=null;return"pkce"===r.flowType&&([a,l]=yield Xi(r.storage,r.storageKey)),yield ge(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(i=null===(o=e.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=e?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:Wj})}catch(a){if(re(a))return{data:null,error:a};throw a}})()}reauthenticate(){var e=this;return C(function*(){return yield e.initializePromise,yield e._acquireLock(-1,C(function*(){return yield e._reauthenticate()}))})()}_reauthenticate(){var e=this;return C(function*(){try{return yield e._useSession(function(){var r=C(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new ao;const{error:a}=yield ge(e.fetch,"GET",`${e.url}/reauthenticate`,{headers:e.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(e){var r=this;return C(function*(){try{const o=`${r.url}/resend`;if("email"in e){const{email:i,type:s,options:a}=e,{error:l}=yield ge(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in e){const{phone:i,type:s,options:a}=e,{data:l,error:c}=yield ge(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new nu("You must provide either an email or phone number and a type")}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var e=this;return C(function*(){return yield e.initializePromise,yield e._acquireLock(-1,C(function*(){return e._useSession(function(){var o=C(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(e,r){var o=this;return C(function*(){o._debug("#_acquireLock","begin",e);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=C(function*(){return yield i,yield r()})();return o.pendingInLock.push(C(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,e,C(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(C(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(e){var r=this;return C(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield e(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var e=this;return C(function*(){e._debug("#__loadSession()","begin"),e.lockAcquired||e._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield ko(e.storage,e.storageKey);if(e._debug("#getSession()","session from storage",o),null!==o&&(e._isValidSession(o)?r=o:(e._debug("#getSession()","session from storage is not valid"),yield e._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(e._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(e.userStorage){const l=yield ko(e.userStorage,e.storageKey+"-user");r.user=l?.user?l.user:Lp()}if(e.storage.isServer&&r.user){let l=e.suppressGetSessionWarning;r=new Proxy(r,{get:(u,d,h)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,e.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:r},error:null}}const{data:s,error:a}=yield e._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{e._debug("#__loadSession()","end")}})()}getUser(e){var r=this;return C(function*(){return e?yield r._getUser(e):(yield r.initializePromise,yield r._acquireLock(-1,C(function*(){return yield r._getUser()})))})()}_getUser(e){var r=this;return C(function*(){try{return e?yield ge(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:e,xform:co}):yield r._useSession(function(){var o=C(function*(i){var s,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(s=c.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield ge(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:co}):{data:{user:null},error:new ao}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return function Dj(t){return re(t)&&"AuthSessionMissingError"===t.name}(o)&&(yield r._removeSession(),yield lo(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(e){var r=this;return C(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,C(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(e){var r=this;return C(function*(o,i={}){try{return yield r._useSession(function(){var s=C(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new ao;const u=l.session;let d=null,h=null;"pkce"===r.flowType&&null!=o.email&&([d,h]=yield Xi(r.storage,r.storageKey));const{data:f,error:p}=yield ge(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:co});if(p)throw p;return u.user=f.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return s.apply(this,arguments)}}())}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}).apply(this,arguments)}setSession(e){var r=this;return C(function*(){return yield r.initializePromise,yield r._acquireLock(-1,C(function*(){return yield r._setSession(e)}))})()}_setSession(e){var r=this;return C(function*(){try{if(!e.access_token||!e.refresh_token)throw new ao;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:l}=kp(e.access_token);if(l.exp&&(i=l.exp,s=i<=o),s){const{data:c,error:u}=yield r._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield r._getUser(e.access_token);if(u)throw u;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(o){if(re(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(e){var r=this;return C(function*(){return yield r.initializePromise,yield r._acquireLock(-1,C(function*(){return yield r._refreshSession(e)}))})()}_refreshSession(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s;if(!e){const{data:c,error:u}=i;if(u)throw u;e=null!==(s=c.session)&&void 0!==s?s:void 0}if(!e?.refresh_token)throw new ao;const{data:a,error:l}=yield r._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(e,r){var o=this;return C(function*(){try{if(!vn())throw new ru("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ru(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new TD("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new ru("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new TD("No code detected.");const{data:P,error:F}=yield o._exchangeCodeForSession(e.code);if(F)throw F;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:d}=e;if(!(a&&c&&l&&d))throw new ru("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let p=h+f;u&&(p=parseInt(u));const v=p-h;1e3*v<=Ji&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const _=p-f;h-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,p,h):h-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,p,h);const{data:w,error:T}=yield o._getUser(a);if(T)throw T;const D={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:d,user:w.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(i){if(re(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}_isPKCECallback(e){var r=this;return C(function*(){const o=yield ko(r.storage,`${r.storageKey}-code-verifier`);return!(!e.code||!o)})()}signOut(){var e=this;return C(function*(r={scope:"global"}){return yield e.initializePromise,yield e._acquireLock(-1,C(function*(){return yield e._signOut(r)}))}).apply(this,arguments)}_signOut(){var e=this;return C(function*({scope:r}={scope:"global"}){return yield e._useSession(function(){var o=C(function*(i){var s;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(s=a.session)||void 0===s?void 0:s.access_token;if(c){const{error:u}=yield e.admin.signOut(c,r);if(u&&(!function wj(t){return re(t)&&"AuthApiError"===t.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==r&&(yield e._removeSession(),yield lo(e.storage,`${e.storageKey}-code-verifier`)),{error:null}});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(e){var r=this;const o=function Ij(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const n=16*Math.random()|0;return("x"==t?n:3&n|8).toString(16)})}(),i={id:o,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),C(function*(){yield r.initializePromise,yield r._acquireLock(-1,C(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(e){var r=this;return C(function*(){return yield r._useSession(function(){var o=C(function*(i){var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(s=r.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(e){var r=this;return C(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield Xi(r.storage,r.storageKey,!0));try{return yield ge(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(l){if(re(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var e=this;return C(function*(){var r;try{const{data:o,error:i}=yield e.getUser();if(i)throw i;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(re(o))return{data:null,error:o};throw o}})()}linkIdentity(e){var r=this;return C(function*(){return"token"in e?r.linkIdentityIdToken(e):r.linkIdentityOAuth(e)})()}linkIdentityOAuth(e){var r=this;return C(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=C(function*(l){var c,u,d,h,f;const{data:p,error:v}=l;if(v)throw v;const _=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,e.provider,{redirectTo:null===(c=e.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=e.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=e.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield ge(r.fetch,"GET",_,{headers:r.headers,jwt:null!==(f=null===(h=p.session)||void 0===h?void 0:h.access_token)&&void 0!==f?f:void 0})});return function(l){return a.apply(this,arguments)}}());if(s)throw s;return vn()&&!(null!==(o=e.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(re(i))return{data:{provider:e.provider,url:null},error:i};throw i}})()}linkIdentityIdToken(e){var r=this;return C(function*(){return yield r._useSession(function(){var o=C(function*(i){var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:u,token:d,access_token:h,nonce:f}=e,p=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=l?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Yn}),{data:v,error:_}=p;return _?{data:{user:null,session:null},error:_}:v&&v.session&&v.user?(v.session&&(yield r._saveSession(v.session),yield r._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:_}):{data:{user:null,session:null},error:new Yi}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s,a;const{data:l,error:c}=i;if(c)throw c;return yield ge(r.fetch,"DELETE",`${r.url}/user/identities/${e.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=l.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(e){var r=this;return C(function*(){const o=`#_refreshAccessToken(${e.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function Rj(t,n){return new Promise((r,o)=>{C(function*(){for(let i=0;i<1/0;i++)try{const s=yield t(i);if(!n(i,null,s))return void r(s)}catch(s){if(!n(i,s))return void o(s)}})()})}(function(){var s=C(function*(a){return a>0&&(yield function Pj(t){return Pp.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield ge(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:r.headers,xform:Yn})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const l=200*Math.pow(2,s);return a&&Ip(a)&&Date.now()+l-i<Ji})}catch(i){if(r._debug(o,"error",i),re(i))return{data:{session:null,user:null},error:i};throw i}finally{r._debug(o,"end")}})()}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){var o=this;return C(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),vn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})()}_recoverAndRefresh(){var e=this;return C(function*(){var r,o;const i="#_recoverAndRefresh()";e._debug(i,"begin");try{const s=yield ko(e.storage,e.storageKey);if(s&&e.userStorage){let l=yield ko(e.userStorage,e.storageKey+"-user");!e.storage.isServer&&Object.is(e.storage,e.userStorage)&&!l&&(l={user:s.user},yield Zi(e.userStorage,e.storageKey+"-user",l)),s.user=null!==(r=l?.user)&&void 0!==r?r:Lp()}else if(s&&!s.user&&!s.user){const l=yield ko(e.storage,e.storageKey+"-user");l&&l?.user?(s.user=l.user,yield lo(e.storage,e.storageKey+"-user"),yield Zi(e.storage,e.storageKey,s)):s.user=Lp()}if(e._debug(i,"session from storage",s),!e._isValidSession(s))return e._debug(i,"session is not valid"),void(null!==s&&(yield e._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(e._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(e.autoRefreshToken&&s.refresh_token){const{error:l}=yield e._callRefreshToken(s.refresh_token);l&&(console.error(l),Ip(l)||(e._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield e._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield e._getUser(s.access_token);!c&&l?.user?(s.user=l.user,yield e._saveSession(s),yield e._notifyAllSubscribers("SIGNED_IN",s)):e._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),e._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield e._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return e._debug(i,"error",s),void console.error(s)}finally{e._debug(i,"end")}})()}_callRefreshToken(e){var r=this;return C(function*(){var o,i;if(!e)throw new ao;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new su;const{data:a,error:l}=yield r._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new ao;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return r.refreshingDeferred.resolve(c),c}catch(a){if(r._debug(s,"error",a),re(a)){const l={data:null,error:a};return Ip(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(e,r){var o=this;return C(function*(i,s,a=!0){const l=`#_notifyAllSubscribers(${i})`;o._debug(l,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const c=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=C(function*(h){try{yield h.callback(i,s)}catch(f){c.push(f)}});return function(h){return d.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(e){var r=this;return C(function*(){r._debug("#_saveSession()",e),r.suppressGetSessionWarning=!0;const o=Object.assign({},e);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield Zi(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=FD(s);yield Zi(r.storage,r.storageKey,a)}else{const s=FD(o);yield Zi(r.storage,r.storageKey,s)}})()}_removeSession(){var e=this;return C(function*(){e._debug("#_removeSession()"),yield lo(e.storage,e.storageKey),yield lo(e.storage,e.storageKey+"-code-verifier"),yield lo(e.storage,e.storageKey+"-user"),e.userStorage&&(yield lo(e.userStorage,e.storageKey+"-user")),yield e._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var e=this;return C(function*(){yield e._stopAutoRefresh(),e._debug("#_startAutoRefresh()");const r=setInterval(()=>e._autoRefreshTokenTick(),Ji);e.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(C(function*(){yield e.initializePromise,yield e._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var e=this;return C(function*(){e._debug("#_stopAutoRefresh()");const r=e.autoRefreshTicker;e.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var e=this;return C(function*(){e._removeVisibilityChangedCallback(),yield e._startAutoRefresh()})()}stopAutoRefresh(){var e=this;return C(function*(){e._removeVisibilityChangedCallback(),yield e._stopAutoRefresh()})()}_autoRefreshTokenTick(){var e=this;return C(function*(){e._debug("#_autoRefreshTokenTick()","begin");try{yield e._acquireLock(0,C(function*(){try{const r=Date.now();try{return yield e._useSession(function(){var o=C(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void e._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/Ji);e._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield e._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{e._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof UD))throw r;e._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var e=this;return C(function*(){if(e._debug("#_handleVisibilityChange()"),!vn()||!window?.addEventListener)return e.autoRefreshToken&&e.startAutoRefresh(),!1;try{e.visibilityChangedCallback=C(function*(){return yield e._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",e.visibilityChangedCallback),yield e._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(e){var r=this;return C(function*(){const o=`#_onVisibilityChanged(${e})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),e||(yield r.initializePromise,yield r._acquireLock(-1,C(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(e,r,o){var i=this;return C(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,l]=yield Xi(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${s.join("&")}`})()}_unenroll(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s;const{data:a,error:l}=i;return l?{data:null,error:l}:yield ge(r.fetch,"DELETE",`${r.url}/factors/${e.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}})()}_enroll(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:d,error:h}=yield ge(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=l?.session)||void 0===s?void 0:s.access_token});return h?{data:null,error:h}:("totp"===e.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}})()}_verify(e){var r=this;return C(function*(){return r._acquireLock(-1,C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?uV(e.webauthn.credential_response):dV(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=yield ge(r.fetch,"POST",`${r.url}/factors/${e.factorId}/verify`,{body:c,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?{data:null,error:d}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}}))})()}_challenge(e){var r=this;return C(function*(){return r._acquireLock(-1,C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=yield ge(r.fetch,"POST",`${r.url}/factors/${e.factorId}/challenge`,{body:e,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:lV(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:cV(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(e){var r=this;return C(function*(){const{data:o,error:i}=yield r._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield r._verify({factorId:e.factorId,challengeId:o.id,code:e.code})})()}_listFactors(){var e=this;return C(function*(){var r;const{data:{user:o},error:i}=yield e.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var e=this;return C(function*(){return e._acquireLock(-1,C(function*(){return yield e._useSession(function(){var r=C(function*(o){var i,s;const{data:{session:a},error:l}=o;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=kp(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;return(null!==(s=null===(i=a.user.factors)||void 0===i?void 0:i.filter(p=>"verified"===p.status))&&void 0!==s?s:[]).length>0&&(d="aal2"),{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:c.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(e){var r=this;return C(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:l,error:c}=yield ge(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=a,s=l.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(e){var r=this;return C(function*(o,i={}){try{let s=o;if(!s){const{data:_,error:w}=yield r.getSession();if(w||!_.session)return{data:null,error:w};s=_.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:d}}=kp(s);i?.allowExpired||function Uj(t){if(!t)throw new Error("Missing exp claim");if(t<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const h=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!h){const{error:_}=yield r.getUser(s);if(_)throw _;return{data:{claims:l,header:a,signature:c},error:null}}const f=function Bj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),p=yield crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!(yield crypto.subtle.verify(f,p,c,function Tj(t){const n=[];return function PD(t,n){for(let e=0;e<t.length;e+=1){let r=t.charCodeAt(e);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(t.charCodeAt(e+1)-56320&65535|o),e+=1}xj(r,n)}}(t,e=>n.push(e)),new Uint8Array(n)}(`${u}.${d}`))))throw new Ap("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}}).apply(this,arguments)}}return t.nextInstanceID=0,t})();class wV extends bV{constructor(n){super(n)}}class DV{constructor(n,e,r){var o,i,s;this.supabaseUrl=n,this.supabaseKey=e;const a=function gj(t){const n=t?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function fj(t){return t.endsWith("/")?t:t+"/"}(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function pj(t,n){var e,r;const{db:o,auth:i,realtime:s,global:a}=t,{db:l,auth:c,realtime:u,global:d}=n,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(e=d?.headers)&&void 0!==e?e:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(f=C(function*(){return""}),function(){return f.apply(this,arguments)})};var f;return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}(r??{},{db:aj,realtime:cj,auth:Object.assign(Object.assign({},lj),{storageKey:l}),global:sj});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=hj(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new pD(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new oj(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new dL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,r)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n=this;return C(function*(){var e,r;if(n.accessToken)return yield n.accessToken();const{data:o}=yield n.auth.getSession();return null!==(r=null===(e=o.session)||void 0===e?void 0:e.access_token)&&void 0!==r?r:n.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c},u,d){return new wV({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:s,autoRefreshToken:n,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>"authorization"===f.toLowerCase())})}_initRealtimeClient(n){return new RL(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(n,e,r){"TOKEN_REFRESHED"!==n&&"SIGNED_IN"!==n||this.changedAccessToken===r?"SIGNED_OUT"===n&&(this.realtime.setAuth(),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function EV(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(null==t)return!1;const n=t.match(/^v(\d+)\./);return!!n&&parseInt(n[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const WD_supabase_url="https://hpqwzclyjrfivcmkzwpo.supabase.co",WD_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwcXd6Y2x5anJmaXZjbWt6d3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2ODMzMjUsImV4cCI6MjA3NjI1OTMyNX0.pN-NPncmQCJoiBlYnFk77bAdxXEu5NAn3Fi8bk_c4wI";let rs=(()=>{const n=class{constructor(){this.currentUserSubject=new Pn(null),this.currentUser$=this.currentUserSubject.asObservable(),this.isInitialized=!1,this.initializeClient()}initializeClient(){var r=this;return C(function*(){try{r.supabase=((t,n,e)=>new DV(t,n,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))(WD_supabase_url,WD_supabase_anonKey),r.isInitialized=!0,yield r.checkExistingSession()}catch(o){console.error("Error initializing Supabase client:",o)}})()}checkExistingSession(){var r=this;return C(function*(){const o=localStorage.getItem("currentUser");if(o)try{const i=JSON.parse(o);r.currentUserSubject.next(i)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("currentUser")}})()}signInFallback(r,o){var i=this;return C(function*(){try{const a=[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r&&l.password===o);return a?(localStorage.setItem("currentUser",JSON.stringify(a)),i.currentUserSubject.next(a),{user:a,error:null}):{user:null,error:"Invalid username or password"}}catch(s){return console.error("Fallback sign in error:",s),{user:null,error:"Sign in failed. Please try again."}}})()}signIn(r,o){var i=this;return C(function*(){try{i.isInitialized||(yield new Promise(l=>{const c=()=>{i.isInitialized?l(void 0):setTimeout(c,50)};c()})),yield new Promise(l=>setTimeout(l,100));const{data:s,error:a}=yield i.supabase.from("profiles").select("*").eq("username",r).eq("password",o).single();return a?(console.error("Database query error:",a),console.log("Trying fallback authentication..."),yield i.signInFallback(r,o)):s?(localStorage.setItem("currentUser",JSON.stringify(s)),i.currentUserSubject.next(s),{user:s,error:null}):{user:null,error:"User not found"}}catch(s){if(console.error("Sign in error:",s),s&&"object"==typeof s&&"message"in s){const a=s.message;if(a.includes("NavigatorLockAcquireTimeoutError")||a.includes("lock"))return console.log("Lock error detected, using fallback authentication..."),yield i.signInFallback(r,o)}return console.log("Error occurred, trying fallback authentication..."),yield i.signInFallback(r,o)}})()}signOut(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getCurrentUser(){return this.currentUserSubject.value}isSignedIn(){return null!==this.currentUserSubject.value}getProfileByUsername(r){var o=this;return C(function*(){try{o.isInitialized||(yield new Promise(a=>{const l=()=>{o.isInitialized?a():setTimeout(l,50)};l()}));const{data:i,error:s}=yield o.supabase.from("profiles").select("*").eq("username",r).maybeSingle();return s?(console.warn("getProfileByUsername fallback due to error:",s.message),[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r)||null):i||null}catch(i){return console.error("Error in getProfileByUsername:",i),null}})()}getUserCards(r,o){var i=this;return C(function*(){try{const s=parseInt(r);if(isNaN(s))return{cards:[],error:"Invalid user ID format"};const a=1e3;let l=0,c=[],u=!0;for(;u;){const{data:d,error:h}=yield i.supabase.from("user_cards").select("*").eq("user_id",s).range(l,l+a-1);if(h)return{cards:[],error:h.message};d&&d.length>0?(c=c.concat(d),l+=a,u=d.length===a,o&&o(c.length)):u=!1}return{cards:c,error:null}}catch(s){return console.error("Error fetching user cards:",s),{cards:[],error:"Failed to fetch user cards"}}})()}updateCardQuantity(r,o,i){var s=this;return C(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};if(i<=0){const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a).eq("card_def_key",o);if(l)return{success:!1,error:l.message}}else{const{data:l,error:c}=yield s.supabase.from("user_cards").select("*").eq("user_id",a).eq("card_def_key",o).maybeSingle();if(c)return console.error("Error checking existing card:",c),{success:!1,error:c.message};if(l){const{error:u}=yield s.supabase.from("user_cards").update({quantity:i}).eq("user_id",a).eq("card_def_key",o);if(u)return{success:!1,error:u.message}}else{const{error:u}=yield s.supabase.from("user_cards").insert({user_id:a,card_def_key:o,quantity:i,minimum_keep_card:2,allow_trade:!0});if(u)return{success:!1,error:u.message}}}return{success:!0,error:null}}catch(a){return console.error("Error updating card quantity:",a),{success:!1,error:"Failed to update card quantity"}}})()}getCardQuantity(r,o){var i=this;return C(function*(){try{const{data:s,error:a}=yield i.supabase.from("user_cards").select("quantity").eq("user_id",r).eq("card_def_key",o).single();return a||!s?0:s.quantity||0}catch(s){return console.error("Error fetching card quantity:",s),0}})()}syncUserCollection(r,o){var i=this;return C(function*(){try{const{cards:s,error:a}=yield i.getUserCards(r,o);if(a)return console.error("Error syncing user collection:",a),{quantities:{},minimumKeepCounts:{},allowTrade:{}};const l={},c={},u={};return s.forEach(d=>{l[d.card_def_key]=d.quantity,c[d.card_def_key]=d.minimum_keep_card||0,u[d.card_def_key]=!1!==d.allow_trade}),{quantities:l,minimumKeepCounts:c,allowTrade:u}}catch(s){return console.error("Error syncing user collection:",s),{quantities:{},minimumKeepCounts:{},allowTrade:{}}}})()}updateCardMinimumKeepCount(r,o,i){var s=this;return C(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};const{error:l}=yield s.supabase.from("user_cards").update({minimum_keep_card:i}).eq("user_id",a).eq("card_def_key",o);return l?{success:!1,error:l.message}:{success:!0,error:null}}catch(a){return console.error("Error updating minimum keep count:",a),{success:!1,error:"Failed to update minimum keep count"}}})()}toggleAllowTrade(r,o,i){var s=this;return C(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};const{error:l}=yield s.supabase.from("user_cards").update({allow_trade:i}).eq("user_id",a).eq("card_def_key",o);return l?{success:!1,error:l.message}:{success:!0,error:null}}catch(a){return console.error("Error toggling allow trade:",a),{success:!1,error:"Failed to toggle allow trade"}}})()}bulkReplaceUserCollection(r,o){var i=this;return C(function*(){try{const s=parseInt(r);if(isNaN(s))return{success:!1,error:"Invalid user ID format"};const{error:a}=yield i.supabase.from("user_cards").delete().eq("user_id",s);if(a)return console.error("Error deleting existing cards:",a),{success:!1,error:a.message};const l=Object.entries(o).filter(([c,u])=>u>0).map(([c,u])=>({user_id:s,card_def_key:c,quantity:u,minimum_keep_card:0}));if(l.length>0){const{error:c}=yield i.supabase.from("user_cards").insert(l);if(c)return console.error("Error inserting new cards:",c),{success:!1,error:c.message};console.log(`\u2705 Bulk sync completed: ${l.length} cards inserted`)}else console.log("\u2705 Bulk sync completed: No cards to insert (collection is empty)");return{success:!0,error:null}}catch(s){return console.error("Error in bulk replace user collection:",s),{success:!1,error:"Failed to bulk replace user collection"}}})()}};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),KD=(()=>{const n=class{constructor(){this.rarityMap=new Map([["C",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["U",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["R",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["RR",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["AR",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["SR",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["SAR",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["IM",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["UR",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["CR",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["S",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["SSR",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}],["Common",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["Uncommon",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["Rare",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["Double Rare",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["Art Rare",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["Super Rare",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Special Art Rare",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Immersive Rare",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["Ultimate Rare",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["Crown Rare",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["Shiny",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["Shiny Super Rare",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}]])}getRarityInfo(r){return this.rarityMap.get(r)}getDisplayName(r){const o=this.getRarityInfo(r);return o?o.displayName:r}getSymbol(r){const o=this.getRarityInfo(r);return o?o.symbol:r}getAllRarities(){return Array.from(this.rarityMap.values()).filter(r=>!r.code.includes(" ")).sort((r,o)=>r.order-o.order)}getRarityOrder(r){const o=this.getRarityInfo(r);return o?o.order:999}sortRarities(r){return r.sort((o,i)=>this.getRarityOrder(o)-this.getRarityOrder(i))}isRare(r){return["IM","UR","SSR"].includes(r)}isSuperRare(r){return["SR","SAR","IM","UR","SSR"].includes(r)}getNormalizedCode(r){const o=this.getRarityInfo(r);return o?"SAR"===o.code||"Special Art Rare"===r?"SR":o.code:r}getStandardizedDisplayName(r){const o=this.getNormalizedCode(r),i=this.getRarityInfo(o);return i?i.displayName:r}getUnifiedRarities(){const o=this.getAllRarities().filter(s=>"SAR"!==s.code),i=new Set;return o.filter(s=>!i.has(s.symbol)&&(i.add(s.symbol),!0))}getCodeFromSymbol(r){for(const[,o]of this.rarityMap)if(o.symbol===r)return o.code;return r}groupCardsByNormalizedRarity(r){const o=new Map;return r.forEach(i=>{if(!i.rarity)return;const s=this.getCodeFromSymbol(i.rarity),a=this.getNormalizedCode(s);o.has(a)||o.set(a,[]),o.get(a).push(i)}),o}};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),t})();function xV(t,n){if(1&t){const e=xe();g(0,"div",67)(1,"div",68),b(2,"Viewing "),g(3,"strong"),b(4),m(),b(5,"'s collection (read-only)"),m(),g(6,"button",69),A("click",function(){return z(e),G(S().backToMyCollection())}),b(7,"Back to my collection"),m()()}if(2&t){const e=S();y(4),rt(null==e.viewingUser?null:e.viewingUser.username)}}function MV(t,n){if(1&t&&(g(0,"option",70),b(1),m()),2&t){const e=n.$implicit;x("value",e),y(1),rt(e)}}function TV(t,n){if(1&t&&(g(0,"option",70),b(1),m()),2&t){const e=n.$implicit,r=S();x("value",e),y(1),rt(r.getSetName(e))}}function OV(t,n){if(1&t&&(g(0,"option",70),b(1),m()),2&t){const e=n.$implicit;x("value",e),y(1),rt(e)}}function IV(t,n){if(1&t){const e=xe();g(0,"button",71),A("click",function(){const i=z(e).$implicit;return G(S().toggleRarity(i.symbol))}),b(1),m()}if(2&t){const e=n.$implicit;Ie("active",S().isRaritySelected(e.symbol)),x("title",e.displayName),y(1),Me(" ",e.symbol," ")}}const AV=function(t,n,e){return{"trainer-item":t,"trainer-tool":n,"trainer-supporter":e}};function kV(t,n){if(1&t&&(mi(0),g(1,"span",75),b(2),m(),_i()),2&t){const e=S().$implicit;y(1),x("ngClass",ah(2,AV,"Item"===e,"Tool"===e,"Supporter"===e)),y(1),Me(" ",e," ")}}function PV(t,n){if(1&t&&Ye(0,"img",76),2&t){const e=S().$implicit;x("src","assets/energy/"+e.toLowerCase()+".webp",ei)("alt",e)}}const RV=function(){return["Item","Tool","Supporter"]};function NV(t,n){if(1&t){const e=xe();g(0,"button",72),A("click",function(){const i=z(e).$implicit;return G(S().toggleType(i))}),H(1,kV,3,6,"ng-container",73),H(2,PV,1,2,"ng-template",null,74,Rl),m()}if(2&t){const e=n.$implicit,r=Ls(3);Ie("active",S().isTypeSelected(e)),x("title",e),y(1),x("ngIf",wi(5,RV).includes(e))("ngIfElse",r)}}function FV(t,n){if(1&t){const e=xe();g(0,"div",14)(1,"label",77),b(2,"Group By"),m(),g(3,"select",78),A("ngModelChange",function(o){return z(e),G(S().groupBy=o)})("change",function(){return z(e),G(S().onGroupByChange())}),g(4,"option",79),b(5,"No Grouping"),m(),g(6,"option",80),b(7,"Rarity"),m(),g(8,"option",81),b(9,"Pack"),m(),g(10,"option",82),b(11,"Type"),m()()()}if(2&t){const e=S();y(3),x("ngModel",e.groupBy)}}function LV(t,n){1&t&&(g(0,"div",83),Ye(1,"div",84),g(2,"p"),b(3,"Loading Pokemon cards..."),m()())}function jV(t,n){if(1&t){const e=xe();g(0,"div",85)(1,"p"),b(2),m(),g(3,"button",86),A("click",function(){return z(e),G(S().loadAllData())}),b(4,"Retry"),m()()}if(2&t){const e=S();y(2),rt(e.error)}}function VV(t,n){if(1&t&&(g(0,"div",93),b(1),m()),2&t){const e=S(2);y(1),Me("",e.syncProgress," cards loaded")}}function $V(t,n){if(1&t&&(g(0,"div",87)(1,"div",88)(2,"div",89),b(3,"\u23f3"),m(),g(4,"div",90)(5,"div",91),b(6),m(),H(7,VV,2,1,"div",92),m()()()),2&t){const e=S();y(6),rt(e.syncMessage),y(1),x("ngIf",e.syncProgress>0)}}function UV(t,n){if(1&t&&(g(0,"span",107),b(1),m()),2&t){const e=S().$implicit,r=S(2);y(1),Me(" \u25ca ",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)," ")}}function BV(t,n){if(1&t&&(g(0,"span",108),b(1),m()),2&t){const e=S().$implicit,r=S(2);y(1),Me(" \u2606 ",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)," ")}}function HV(t,n){if(1&t&&(g(0,"span",109),b(1),m()),2&t){const e=S().$implicit,r=S(2);y(1),Me(" \u2735 ",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)," ")}}function zV(t,n){if(1&t&&(g(0,"span",110),b(1),m()),2&t){const e=S().$implicit,r=S(2);y(1),Me(" \u{1f451} ",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)," ")}}function GV(t,n){if(1&t){const e=xe();mi(0),g(1,"input",123),A("ngModelChange",function(o){return z(e),G(S(5).editingCountValue=o)})("keydown.enter",function(){z(e);const o=S().$implicit;return G(S(4).commitCount(o))})("keydown",function(o){z(e);const i=S().$implicit;return G(S(4).onCountInputKeydown(o,i))})("keydown.escape",function(){return z(e),G(S(5).cancelEditingCount())})("blur",function(){z(e);const o=S().$implicit;return G(S(4).commitCount(o))}),m(),_i()}if(2&t){const e=S(5);y(1),x("ngModel",e.editingCountValue)}}function qV(t,n){if(1&t){const e=xe();g(0,"button",124),A("click",function(){z(e);const o=S().$implicit,i=S(4);return G(i.isViewingOther?null:i.startEditingCount(o))}),b(1),m()}if(2&t){const e=S().$implicit,r=S(4);x("disabled",r.isViewingOther),y(1),Me(" ",r.getOwnedCount(e)," ")}}function WV(t,n){if(1&t){const e=xe();g(0,"div",125)(1,"button",126),A("click",function(){z(e);const o=S().$implicit;return G(S(4).toggleCardAllowTrade(o))}),b(2),m(),g(3,"input",127),A("change",function(o){z(e);const i=S().$implicit;return G(S(4).updateCardMinimumKeepCount(i,+o.target.value))}),m()()}if(2&t){const e=S().$implicit,r=S(4);y(1),x("title",r.isCardAllowTrade(e)?"Click to lock (prevent trade)":"Click to unlock (allow trade)"),y(1),Me(" ",r.isCardAllowTrade(e)?"\u{1f513}":"\u{1f512}"," "),y(1),x("value",r.getCardMinimumKeepCount(e))("max",r.getOwnedCount(e))("disabled",r.isViewingOther||!r.isCardAllowTrade(e))}}function KV(t,n){if(1&t){const e=xe();g(0,"div",113)(1,"div",114)(2,"img",115),A("error",function(o){const s=z(e).$implicit;return G(S(4).onImageError(o,s))})("click",function(){const i=z(e).$implicit;return G(S(4).openCardModal(i))}),m()(),g(3,"div",116)(4,"div",117),b(5),m(),g(6,"div",118)(7,"button",119),A("click",function(){const i=z(e).$implicit;return G(S(4).decreaseOwned(i))}),b(8," \u2212 "),m(),H(9,GV,2,1,"ng-container",73),H(10,qV,2,2,"ng-template",null,120,Rl),g(12,"button",121),A("click",function(){const i=z(e).$implicit;return G(S(4).increaseOwned(i))}),b(13," + "),m()(),H(14,WV,4,5,"div",122),m()()}if(2&t){const e=n.$implicit,r=Ls(11),o=S(4);Ie("no-quantity",0===o.getOwnedCount(e)),Nt("data-cardid",o.getCardId(e)),y(1),Ie("no-quantity",0===o.getOwnedCount(e)),y(1),Ie("no-quantity",0===o.getOwnedCount(e)),x("src",o.getCardImageUrl(e.imageName),ei)("alt",e.label.eng+" Pokemon Card"),y(3),rt(o.getCardDisplayName(e)),y(2),x("disabled",o.isViewingOther||0===o.getOwnedCount(e)),y(2),x("ngIf",o.editingCardId===o.getCardId(e))("ngIfElse",r),y(3),x("disabled",o.isViewingOther),y(2),x("ngIf",o.getOwnedCount(e)>0&&!o.isViewingOther)}}function JV(t,n){if(1&t&&(g(0,"div",111),H(1,KV,15,15,"div",112),m()),2&t){const e=S().$implicit,r=S(2);y(1),x("ngForOf",e.cards)("ngForTrackBy",r.trackByCardInGroup)}}function YV(t,n){if(1&t&&(g(0,"span",142),b(1),m()),2&t){const e=S().$implicit;y(1),Me(" ",e.packs.join(", ")," ")}}function QV(t,n){if(1&t){const e=xe();mi(0),g(1,"input",123),A("ngModelChange",function(o){return z(e),G(S(5).editingCountValue=o)})("keydown.enter",function(){z(e);const o=S().$implicit;return G(S(4).commitCount(o))})("keydown",function(o){z(e);const i=S().$implicit;return G(S(4).onCountInputKeydown(o,i))})("keydown.escape",function(){return z(e),G(S(5).cancelEditingCount())})("blur",function(){z(e);const o=S().$implicit;return G(S(4).commitCount(o))}),m(),_i()}if(2&t){const e=S(5);y(1),x("ngModel",e.editingCountValue)}}function ZV(t,n){if(1&t){const e=xe();g(0,"button",124),A("click",function(){z(e);const o=S().$implicit,i=S(4);return G(i.isViewingOther?null:i.startEditingCount(o))}),b(1),m()}if(2&t){const e=S().$implicit,r=S(4);x("disabled",r.isViewingOther),y(1),Me(" ",r.getOwnedCount(e)," ")}}function XV(t,n){if(1&t){const e=xe();g(0,"div",143)(1,"button",126),A("click",function(){z(e);const o=S().$implicit;return G(S(4).toggleCardAllowTrade(o))}),b(2),m(),g(3,"input",144),A("change",function(o){z(e);const i=S().$implicit;return G(S(4).updateCardMinimumKeepCount(i,+o.target.value))}),m()()}if(2&t){const e=S().$implicit,r=S(4);y(1),x("title",r.isCardAllowTrade(e)?"Click to lock (prevent trade)":"Click to unlock (allow trade)"),y(1),Me(" ",r.isCardAllowTrade(e)?"\u{1f513}":"\u{1f512}"," "),y(1),x("value",r.getCardMinimumKeepCount(e))("max",r.getOwnedCount(e))("disabled",r.isViewingOther||!r.isCardAllowTrade(e))}}function e$(t,n){if(1&t){const e=xe();g(0,"div",130)(1,"div",131),A("click",function(){const i=z(e).$implicit;return G(S(4).openCardModal(i))}),g(2,"img",132),A("error",function(o){const s=z(e).$implicit;return G(S(4).onImageError(o,s))}),m()(),g(3,"div",133)(4,"div",134),b(5),m(),g(6,"div",135)(7,"span",136),b(8),m(),H(9,YV,2,1,"span",137),m()(),g(10,"div",138)(11,"div",139)(12,"button",119),A("click",function(){const i=z(e).$implicit;return G(S(4).decreaseOwned(i))}),b(13,"\u2212"),m(),H(14,QV,2,1,"ng-container",73),H(15,ZV,2,2,"ng-template",null,140,Rl),g(17,"button",121),A("click",function(){const i=z(e).$implicit;return G(S(4).increaseOwned(i))}),b(18,"+"),m()(),H(19,XV,4,5,"div",141),m()()}if(2&t){const e=n.$implicit,r=Ls(16),o=S(4);Ie("no-quantity",0===o.getOwnedCount(e)),Nt("data-cardid",o.getCardId(e)),y(2),Ie("no-quantity",0===o.getOwnedCount(e)),x("src",o.getCardImageUrl(e.imageName),ei)("alt",e.label.eng+" Pokemon Card"),y(3),rt(o.getCardDisplayName(e)),y(3),fr("",e.set,"-",e.number,""),y(1),x("ngIf",e.packs&&e.packs.length>0),y(3),x("disabled",o.isViewingOther||0===o.getOwnedCount(e)),y(2),x("ngIf",o.editingCardId===o.getCardId(e))("ngIfElse",r),y(3),x("disabled",o.isViewingOther),y(2),x("ngIf",o.getOwnedCount(e)>0&&!o.isViewingOther)}}function t$(t,n){if(1&t&&(g(0,"div",128),H(1,e$,20,16,"div",129),m()),2&t){const e=S().$implicit,r=S(2);y(1),x("ngForOf",e.cards)("ngForTrackBy",r.trackByCardInGroup)}}function n$(t,n){if(1&t&&(g(0,"div",96)(1,"div",97)(2,"h3",98),b(3),m(),g(4,"div",99),H(5,UV,2,1,"span",100),H(6,BV,2,1,"span",101),H(7,HV,2,1,"span",102),H(8,zV,2,1,"span",103),g(9,"span",104),b(10),m()()(),H(11,JV,2,2,"div",105),H(12,t$,2,2,"div",106),m()),2&t){const e=n.$implicit,r=S(2);Nt("id","set-"+e.groupTitle),y(3),rt(r.getGroupDisplayName(e.groupTitle,e.cards)),y(2),x("ngIf",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle).endsWith("/0")),y(1),x("ngIf",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle).endsWith("/0")),y(1),x("ngIf",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle).endsWith("/0")),y(1),x("ngIf",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle).endsWith("/0")),y(2),Me("",r.getGroupCollectedCount(e.cards)," cards"),y(1),x("ngIf","grid"===r.viewMode),y(1),x("ngIf","list"===r.viewMode)}}function r$(t,n){if(1&t&&(g(0,"div",94),H(1,n$,13,9,"div",95),m()),2&t){const e=S();y(1),x("ngForOf",e.getGroupedCards())("ngForTrackBy",e.trackByGroupTitle)}}function o$(t,n){if(1&t){const e=xe();g(0,"div",145)(1,"div",146),b(2,"\u{1f50d}"),m(),g(3,"h3"),b(4,"No cards found"),m(),g(5,"p"),b(6,"Try adjusting your search or filter criteria"),m(),g(7,"button",86),A("click",function(){return z(e),G(S().clearFilters())}),b(8,"Clear All Filters"),m()()}}function i$(t,n){if(1&t){const e=xe();g(0,"div",147),A("click",function(){return z(e),G(S().closeViewOthersModal())}),g(1,"div",148),A("click",function(o){return o.stopPropagation()}),g(2,"div",149)(3,"h3"),b(4,"View Others Collection"),m(),g(5,"button",150),A("click",function(){return z(e),G(S().closeViewOthersModal())}),b(6,"\xd7"),m()(),g(7,"div",151)(8,"div",152)(9,"div",153)(10,"label",154),b(11,"Username:"),m(),g(12,"input",155),A("ngModelChange",function(o){return z(e),G(S().otherUsername=o)})("keydown.enter",function(){return z(e),G(S().viewOtherCollectionFromModal())}),m(),g(13,"span",156),b(14,"Enter the username of the collection you want to view"),m()()()(),g(15,"div",157)(16,"button",69),A("click",function(){return z(e),G(S().closeViewOthersModal())}),b(17,"Cancel"),m(),g(18,"button",158),A("click",function(){return z(e),G(S().viewOtherCollectionFromModal())}),b(19," \u{1f464} View Collection "),m()()()()}if(2&t){const e=S();y(12),x("ngModel",e.otherUsername),y(6),x("disabled",!e.otherUsername.trim())}}function s$(t,n){if(1&t){const e=xe();g(0,"div",153)(1,"label",183)(2,"input",184),A("ngModelChange",function(o){return z(e),G(S(2).tradeDeluxeSpecialOnly=o)})("ngModelChange",function(){return z(e),G(S(2).onDeluxeSpecialToggle())}),m(),b(3," [SPECIAL] - Deluxe packs only "),m()()}if(2&t){const e=S(2);y(2),x("ngModel",e.tradeDeluxeSpecialOnly)}}function a$(t,n){if(1&t&&(g(0,"span"),b(1),m()),2&t){const e=S(2);y(1),Me("All Sets Selected (",e.availableTradeSets.length,")")}}function l$(t,n){1&t&&(g(0,"span"),b(1,"No Sets Selected"),m())}function c$(t,n){1&t&&(g(0,"span"),b(1,"1 Set Selected"),m())}function u$(t,n){if(1&t&&(g(0,"span"),b(1),m()),2&t){const e=S(2);y(1),Me("",e.selectedLFsets.length," Sets Selected")}}const JD=function(){return{background:"var(--header-gradient)",color:"#fff"}},YD=function(){return{background:"transparent",color:"var(--text)"}};function d$(t,n){if(1&t){const e=xe();g(0,"button",191),A("click",function(){const i=z(e).$implicit;return G(S(3).toggleLFSet(i))}),g(1,"span",192),b(2),m(),g(3,"span"),b(4),m()()}if(2&t){const e=n.$implicit,r=S(3);x("ngStyle",r.isLFSetSelected(e)?wi(5,JD):wi(6,YD)),Nt("aria-selected",r.isLFSetSelected(e)),y(2),rt(r.isLFSetSelected(e)?"\u2714":""),y(2),fr("",e," \u2013 ",r.getSetName(e),"")}}function h$(t,n){1&t&&(g(0,"div",193),b(1,"No sets available"),m())}function f$(t,n){if(1&t){const e=xe();g(0,"div",185)(1,"div",186)(2,"button",187),A("click",function(){return z(e),G(S(2).clearLFsets())}),b(3,"Clear"),m(),g(4,"button",187),A("click",function(){return z(e),G(S(2).selectAllLFsets())}),b(5,"All"),m()(),g(6,"div",188),H(7,d$,5,7,"button",189),H(8,h$,2,0,"div",190),m()()}if(2&t){const e=S(2);y(7),x("ngForOf",e.availableTradeSets),y(1),x("ngIf",0===e.availableTradeSets.length)}}function p$(t,n){if(1&t&&(g(0,"span"),b(1),m()),2&t){const e=S(2);y(1),Me("All Sets Selected (",e.availableTradeSets.length,")")}}function g$(t,n){1&t&&(g(0,"span"),b(1,"No Sets Selected"),m())}function m$(t,n){1&t&&(g(0,"span"),b(1,"1 Set Selected"),m())}function _$(t,n){if(1&t&&(g(0,"span"),b(1),m()),2&t){const e=S(2);y(1),Me("",e.selectedFTsets.length," Sets Selected")}}function y$(t,n){if(1&t){const e=xe();g(0,"button",191),A("click",function(){const i=z(e).$implicit;return G(S(3).toggleFTSet(i))}),g(1,"span",192),b(2),m(),g(3,"span"),b(4),m()()}if(2&t){const e=n.$implicit,r=S(3);x("ngStyle",r.isFTSetSelected(e)?wi(5,JD):wi(6,YD)),Nt("aria-selected",r.isFTSetSelected(e)),y(2),rt(r.isFTSetSelected(e)?"\u2714":""),y(2),fr("",e," \u2013 ",r.getSetName(e),"")}}function v$(t,n){1&t&&(g(0,"div",193),b(1,"No sets available"),m())}function C$(t,n){if(1&t){const e=xe();g(0,"div",185)(1,"div",186)(2,"button",187),A("click",function(){return z(e),G(S(2).clearFTsets())}),b(3,"Clear"),m(),g(4,"button",187),A("click",function(){return z(e),G(S(2).selectAllFTsets())}),b(5,"All"),m()(),g(6,"div",188),H(7,y$,5,7,"button",189),H(8,v$,2,0,"div",190),m()()}if(2&t){const e=S(2);y(7),x("ngForOf",e.availableTradeSets),y(1),x("ngIf",0===e.availableTradeSets.length)}}function b$(t,n){if(1&t){const e=xe();g(0,"button",71),A("click",function(){const i=z(e).$implicit;return G(S(2).toggleTradeRarity(i.symbol))}),b(1),m()}if(2&t){const e=n.$implicit;Ie("active",S(2).isTradeRaritySelected(e.symbol)),x("title",e.displayName),y(1),Me(" ",e.symbol," ")}}const QD=function(t,n){return{"fa-chevron-down":t,"fa-chevron-up":n}};function w$(t,n){if(1&t){const e=xe();g(0,"div",147),A("click",function(){return z(e),G(S().closeTradeModal())}),g(1,"div",159),A("click",function(o){return o.stopPropagation()}),g(2,"div",149)(3,"h3"),b(4,"Copy For Trade"),m(),g(5,"button",150),A("click",function(){return z(e),G(S().closeTradeModal())}),b(6,"\xd7"),m()(),g(7,"div",151)(8,"div",160)(9,"div",153)(10,"label",161)(11,"input",162),A("ngModelChange",function(o){return z(e),G(S().excludeSpecialPacks=o)})("ngModelChange",function(){return z(e),G(S().onExcludeSpecialPacksToggle())}),m(),b(12,' Exclude "PROMO" and "Deluxe packs" '),m()(),H(13,s$,4,1,"div",163),g(14,"div",153)(15,"label",164),b(16,"Include sets (Looking For):"),m(),g(17,"div",165)(18,"button",166),A("click",function(){z(e);const o=S();return G(o.lfSetDropdownOpen=!o.lfSetDropdownOpen)}),H(19,a$,2,1,"span",167),H(20,l$,2,0,"span",167),H(21,c$,2,0,"span",167),H(22,u$,2,1,"span",167),Ye(23,"i",168),m(),H(24,f$,9,2,"div",169),m()(),g(25,"div",153)(26,"label",170),b(27,"Include sets (For Trade):"),m(),g(28,"div",171)(29,"button",166),A("click",function(){z(e);const o=S();return G(o.ftSetDropdownOpen=!o.ftSetDropdownOpen)}),H(30,p$,2,1,"span",167),H(31,g$,2,0,"span",167),H(32,m$,2,0,"span",167),H(33,_$,2,1,"span",167),Ye(34,"i",168),m(),H(35,C$,9,2,"div",169),m()(),g(36,"div",153)(37,"label",172),b(38,"Include rarities:"),m(),g(39,"div",173)(40,"button",174),A("click",function(){return z(e),G(S().clearTradeRarities())}),b(41,"ALL"),m(),H(42,b$,2,4,"button",27),m()(),g(43,"div",153)(44,"label",172),b(45,"Output format:"),m(),g(46,"div",175)(47,"button",176),A("click",function(){return z(e),G(S().outputFormat="discord")}),b(48,"DISCORD"),m(),g(49,"button",176),A("click",function(){return z(e),G(S().outputFormat="details")}),b(50,"DETAILS"),m()()(),g(51,"div",153)(52,"label",177),b(53,"Trade cards (quantity \u2265):"),m(),g(54,"input",178),A("ngModelChange",function(o){return z(e),G(S().tradeQuantityMin=o)}),m()(),g(55,"div",153)(56,"label",179),b(57,"Friend Code:"),m(),g(58,"input",180),A("ngModelChange",function(o){return z(e),G(S().tradeFriendCode=o)}),m()(),g(59,"div",153)(60,"label",181),b(61,"Template text:"),m(),g(62,"textarea",182),A("ngModelChange",function(o){return z(e),G(S().tradeTemplateText=o)}),m()()()(),g(63,"div",157)(64,"button",69),A("click",function(){return z(e),G(S().closeTradeModal())}),b(65,"Cancel"),m(),g(66,"button",86),A("click",function(){return z(e),G(S().generateAndCopyTradeText())}),b(67,"\u{1f4cb} Copy Trade Text"),m()()()()}if(2&t){const e=S();y(11),x("ngModel",e.excludeSpecialPacks),y(2),x("ngIf",!e.excludeSpecialPacks),y(6),x("ngIf",e.selectedLFsets.length===e.availableTradeSets.length),y(1),x("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&0===e.selectedLFsets.length),y(1),x("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&1===e.selectedLFsets.length),y(1),x("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&e.selectedLFsets.length>1),y(1),x("ngClass",Di(24,QD,!e.lfSetDropdownOpen,e.lfSetDropdownOpen)),y(1),x("ngIf",e.lfSetDropdownOpen),y(6),x("ngIf",e.selectedFTsets.length===e.availableTradeSets.length),y(1),x("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&0===e.selectedFTsets.length),y(1),x("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&1===e.selectedFTsets.length),y(1),x("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&e.selectedFTsets.length>1),y(1),x("ngClass",Di(27,QD,!e.ftSetDropdownOpen,e.ftSetDropdownOpen)),y(1),x("ngIf",e.ftSetDropdownOpen),y(5),Ie("active",0===e.selectedTradeRarities.length),y(2),x("ngForOf",e.getAvailableTradeRaritySymbols()),y(5),Ie("active","discord"===e.outputFormat),y(2),Ie("active","details"===e.outputFormat),y(5),x("ngModel",e.tradeQuantityMin),y(4),x("ngModel",e.tradeFriendCode),y(4),x("ngModel",e.tradeTemplateText)}}function D$(t,n){if(1&t&&(g(0,"span",207),b(1),m()),2&t){const e=n.$implicit;y(1),rt(e)}}function S$(t,n){if(1&t&&(g(0,"div",205),H(1,D$,2,1,"span",206),m()),2&t){const e=S(2);y(1),x("ngForOf",e.selectedCardForModal.packs)}}function E$(t,n){if(1&t){const e=xe();g(0,"div",194),A("click",function(){return z(e),G(S().closeCardModal())}),g(1,"div",195),A("click",function(o){return o.stopPropagation()}),g(2,"button",196),A("click",function(){return z(e),G(S().closeCardModal())}),b(3,"\xd7"),m(),g(4,"div",197)(5,"button",198),A("click",function(o){return z(e),G(S().showPrevCardInModal(o))}),Ye(6,"i",199),m(),Ye(7,"img",200),g(8,"button",201),A("click",function(o){return z(e),G(S().showNextCardInModal(o))}),Ye(9,"i",202),m()(),g(10,"div",203)(11,"h3"),b(12),m(),H(13,S$,2,1,"div",204),m()()()}if(2&t){const e=S();y(7),x("src",e.getCardImageUrl(e.selectedCardForModal.imageName),ei)("alt",e.getCardDisplayName(e.selectedCardForModal)),y(5),rt(e.getCardDisplayName(e.selectedCardForModal)),y(1),x("ngIf",e.selectedCardForModal.packs&&e.selectedCardForModal.packs.length>0)}}let x$=(()=>{const n=class{constructor(r,o,i,s,a,l,c,u){this.pokemonDataService=r,this.dataManager=o,this.imageService=i,this.supabaseService=s,this.router=a,this.route=l,this.cdr=c,this.rarityService=u,this.touchStartX=null,this.touchEndX=null,this.handleModalTouchStart=d=>{1===d.touches.length&&(this.touchStartX=d.touches[0].clientX)},this.handleModalTouchEnd=d=>{if(null===this.touchStartX)return;this.touchEndX=d.changedTouches[0].clientX;const h=this.touchEndX-this.touchStartX;Math.abs(h)>50&&(h<0?this.showNextCardInModal():this.showPrevCardInModal()),this.touchStartX=null,this.touchEndX=null},this.cards=[],this.filteredCards=[],this.sets=[],this.rarityMapping={},this.ownedCards={},this.cardMinimumKeepCount={},this.cardAllowTrade={},this.Math=Math,this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.foilFilter="all",this.groupBy="none",this.availableSets=[],this.availableSeries=[],this.availableRarities=[],this.availableRaritySymbols=[],this.availableTypes=[],this.availablePacks=[],this.loading=!0,this.loadingOwnedCards=!1,this.syncingCards=!1,this.syncProgress=0,this.syncMessage="",this.error=null,this.viewMode="grid",this.editingCardId=null,this.editingCountValue=0,this.lastFlatOrder=[],this.selectedCardForModal=null,this.isViewingOther=!1,this.otherUsername="",this.viewingUser=null,this.totalCards=0,this.ownedCount=0,this.uniqueOwned=0,this.completionPercentage=0,this.currentUser=null,this.filtersOpen=!1,this.showTradeModal=!1,this.selectedTradeRarities=[],this.availableTradeSets=[],this.selectedLFsets=[],this.selectedFTsets=[],this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.tradeQuantityMin=2,this.tradeFriendCode="",this.tradeTemplateText="Please ping me if there is any possible trades. \nENGLISH cards only please.",this.excludedTradeSymbols=new Set(["\u2606\u2606\u2606","\u{1f451}"]),this.excludeSpecialPacks=!0,this.tradeDeluxeSpecialOnly=!1,this.outputFormat="discord",this.showViewOthersModal=!1,this.handleModalKeydown=d=>{"Escape"===d.key&&this.selectedCardForModal&&this.closeCardModal()},this.trackByCardId=(d,h)=>this.getCardId(h),this.trackByGroupTitle=(d,h)=>h.groupTitle,this.trackByCardInGroup=(d,h)=>this.getCardId(h)}getOwnedRarityCount(r,o,i){if(!r)return"0/0";const a=i.split(" - ")[0].trim().toUpperCase(),l={"\u25ca":["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca"],"\u2606":["\u2606","\u2606\u2606","\u2606\u2606\u2606"],"\u2735":["\u2735","\u2735\u2735"]}[o]||[o],c=r.filter(d=>{if(!d)return!1;const h=l.includes(d.rarity),f="all"===i||d.set&&d.set.toUpperCase()===a;return h&&f});return`${c.filter(d=>this.getOwnedCount(d)>0).length}/${c.length}`}openCardModal(r){this.selectedCardForModal=r,document.body.style.overflow="hidden",document.addEventListener("keydown",this.handleModalKeydown),setTimeout(()=>{const o=document.querySelector(".modal-content.card-modal");o&&(o.addEventListener("touchstart",i=>this.handleModalTouchStart(i),{passive:!0}),o.addEventListener("touchend",i=>this.handleModalTouchEnd(i),{passive:!0}))},0)}closeCardModal(){this.selectedCardForModal=null,document.body.style.overflow="auto",document.removeEventListener("keydown",this.handleModalKeydown);const r=document.querySelector(".modal-content.card-modal");if(r){const o=r.cloneNode(!0);r.parentNode?.replaceChild(o,r)}}showPrevCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s>0?o[s-1]:o[o.length-1],this.cdr.markForCheck()}showNextCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s<o.length-1?o[s+1]:o[0],this.cdr.markForCheck()}getAllModalCards(){const r=this.getGroupedCards();return Array.isArray(r)?r.flatMap(o=>o.cards):[]}ngOnInit(){if(this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser){try{typeof window<"u"&&window?.innerWidth<=768&&(this.filtersOpen=!1)}catch{}this.loadAllData()}else this.router.navigate(["/signin"])}loadAllData(){this.loading=!0,this.error=null,this.pokemonDataService.loadAllData().subscribe({next:r=>{this.cards=r.cards,this.filteredCards=[...this.cards],this.sets=r.sets,this.rarityMapping=r.rarities,this.extractFilterOptions(),this.calculateStatistics(),this.loading=!1,this.cdr.detectChanges(),this.applyQueryParamsIfAny().then(()=>{this.isViewingOther||this.loadOwnedCards()})},error:r=>{this.error="Failed to load card collection",this.loading=!1,this.cdr.detectChanges(),console.error("Error loading card collection:",r)}})}applyQueryParamsIfAny(){var r=this;return C(function*(){const o=r.route.snapshot.queryParams||{},i=o.series,s=o.set,a=o.pack,l=o.rarity,c=o.otherUser;let u=!1;"string"==typeof i&&i.trim()&&(r.selectedSeries=i,u=!0),r.extractAvailableSets(),"string"==typeof s&&s.trim()&&(r.selectedSet=s,u=!0),r.extractAvailablePacks(),"string"==typeof a&&a.trim()&&(r.selectedPack=a,u=!0),"string"==typeof l&&l.trim()&&(r.selectedRarities=[l],u=!0),u&&(r.applyFilters(),r.cdr.detectChanges()),"string"==typeof c&&c.trim()&&(r.otherUsername=c.trim(),yield r.viewOtherCollection())})()}extractFilterOptions(){this.availableSeries=[...new Set(this.cards.map(l=>l.series).filter(l=>!!l))];const r=[...new Set(this.cards.map(l=>l.rarity).filter(l=>l))],o=this.createRaritySymbolToCodeMap();this.availableRarities=r.map(l=>o.get(l)||l),this.availableRaritySymbols=[];const i=new Set;this.cards.forEach(l=>{if(l.rarity){const c=o.get(l.rarity);if(c){const u=this.rarityService.getNormalizedCode(c);i.add(u)}}});const s=new Map;this.rarityService.getUnifiedRarities().forEach(l=>{i.has(l.code)&&s.set(l.symbol,{symbol:l.symbol,rarities:[l.code],displayName:l.displayName})}),this.availableRaritySymbols=Array.from(s.values()).sort((l,c)=>this.rarityService.getRarityOrder(l.rarities[0])-this.rarityService.getRarityOrder(c.rarities[0])),this.extractAvailablePacks(),this.extractAvailableTypes(),this.extractAvailableSets()}extractAvailableSets(){this.availableSets="all"===this.selectedSeries?[...new Set(this.cards.map(r=>r.set))]:[...new Set(this.cards.filter(r=>r.series===this.selectedSeries).map(r=>r.set))]}createRaritySymbolToCodeMap(){const r=new Map,o=this.rarityService.getUnifiedRarities();for(const i of o)r.set(i.symbol,i.code);return r}getCardRarityCode(r){return this.createRaritySymbolToCodeMap().get(r.rarity)||r.rarity}convertRarityNameToCode(r){return{Common:"C",Uncommon:"U",Rare:"R","Double Rare":"RR","Art Rare":"AR","Super Rare":"SR","Special Art Rare":"SAR","Immersive Rare":"IM","Crown Rare":"UR",Shiny:"S","Shiny Super Rare":"SSR"}[r]||r}extractAvailablePacks(){let r=this.cards;"all"!==this.selectedSeries&&(r=r.filter(i=>i.series===this.selectedSeries)),"all"!==this.selectedSet&&(r=r.filter(i=>i.set===this.selectedSet));const o=r.flatMap(i=>Array.isArray(i.packs)?i.packs:[]).filter(i=>"string"==typeof i&&i.trim());this.availablePacks=[...new Set(o)],"all"!==this.selectedPack&&!this.availablePacks.includes(this.selectedPack)&&(this.selectedPack="all")}extractAvailableTypes(){const r=this.cards.flatMap(i=>Array.isArray(i.types)?i.types:[]).filter(i=>"string"==typeof i&&i.trim()),o=["Item","Tool","Supporter"];this.availableTypes=[...new Set(r)].sort((i,s)=>{const a=o.includes(i),l=o.includes(s);return a&&!l?1:!a&&l?-1:i.localeCompare(s)})}applyFilters(){this.filteredCards=this.cards.filter(i=>{if("all"!==this.selectedSet&&i.set!==this.selectedSet||"all"!==this.selectedSeries&&i.series!==this.selectedSeries)return!1;if(this.selectedRarities.length>0){const a=this.getCardRarityCode(i),l=a?this.rarityService.getSymbol(a):"";if(!l||!this.selectedRarities.includes(l))return!1}if(this.selectedTypes.length>0&&!(Array.isArray(i.types)?i.types:[]).some(c=>this.selectedTypes.includes(c))||"all"!==this.selectedSet&&"all"!==this.selectedPack&&!(Array.isArray(i.packs)?i.packs:[]).includes(this.selectedPack)||this.searchTerm&&!i.label.eng.toLowerCase().includes(this.searchTerm.toLowerCase())||"missing"===this.ownershipFilter&&this.getOwnedCount(i)>0||"owned"===this.ownershipFilter&&0===this.getOwnedCount(i))return!1;const s=!0===i.isFoil;return!("no-foil"===this.foilFilter&&s||"foil-only"===this.foilFilter&&!s)});const r=i=>this.isSpecialSet(i),o=(i,s)=>{const a=/^([A-Z]+)(\d+)([a-z]*)$/,l=(i||"").match(a),c=(s||"").match(a);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return(i||"").localeCompare(s||"")};this.filteredCards.sort("oldest"===this.sortBy?(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(i.set,s.set);return 0!==c?c:i.number-s.number}:(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(s.set,i.set);return 0!==c?c:s.number-i.number})}onFilterChange(){this.extractAvailablePacks(),this.applyFilters()}onSetChange(){this.extractAvailablePacks(),"all"===this.selectedSet&&(this.selectedPack="all",this.groupBy="none"),this.applyFilters()}onSeriesChange(){this.extractAvailableSets(),this.selectedSet="all",this.selectedPack="all",this.groupBy="none",this.extractAvailablePacks(),this.applyFilters()}onSearchChange(){this.applyFilters()}onGroupByChange(){this.applyFilters()}clearFilters(){this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.foilFilter="all",this.groupBy="none",this.extractAvailableSets(),this.extractAvailablePacks(),this.applyFilters()}toggleFilters(){this.filtersOpen=!this.filtersOpen,this.cdr.detectChanges(),this.filtersOpen&&setTimeout(()=>{const r=document.querySelector(".filters-panel");if(r){const o=r.getBoundingClientRect().top+window.scrollY-8;window.scrollTo({top:o,behavior:"smooth"})}})}isSpecialSet(r){const o=(r||"").toUpperCase();return o.startsWith("P-")||o.endsWith("-P")||"P-A"===o||o.startsWith("PROMO")||o.startsWith("A4B")}openTradeModal(){this.isViewingOther||(this.tradeFriendCode=this.currentUser?.friend_code||"",this.selectedTradeRarities=this.selectedTradeRarities.filter(r=>!this.isTradeRarityDisabled(r)),this.refreshAvailableTradeSets(),this.selectedLFsets=this.selectedLFsets&&0!==this.selectedLFsets.length&&this.selectedLFsets.length===this.availableTradeSets.length?this.selectedLFsets.filter(r=>this.availableTradeSets.includes(r)):[...this.availableTradeSets],this.selectedFTsets=this.selectedFTsets&&0!==this.selectedFTsets.length&&this.selectedFTsets.length===this.availableTradeSets.length?this.selectedFTsets.filter(r=>this.availableTradeSets.includes(r)):[...this.availableTradeSets],this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.showTradeModal=!0,this.cdr.detectChanges())}closeTradeModal(){this.showTradeModal=!1,this.cdr.detectChanges()}isTradeRaritySelected(r){return this.selectedTradeRarities.includes(r)}toggleTradeRarity(r){if(this.isTradeRarityDisabled(r))return;const o=this.selectedTradeRarities.indexOf(r);o>=0?this.selectedTradeRarities.splice(o,1):this.selectedTradeRarities.push(r),this.cdr.detectChanges()}isTradeRarityDisabled(r){return this.excludedTradeSymbols.has(r)}getAvailableTradeRaritySymbols(){return(this.availableRaritySymbols||[]).filter(r=>!this.excludedTradeSymbols.has(r.symbol))}clearTradeRarities(){this.selectedTradeRarities=[],this.cdr.detectChanges()}refreshAvailableTradeSets(){const o=(this.sets||[]).map(s=>s.code).filter(s=>!(!s||this.excludeSpecialPacks&&this.isSpecialSet(s))),i=/^([A-Z]+)(\d+)([a-z]*)$/;o.sort((s,a)=>{const l=s.match(i),c=a.match(i);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return s.localeCompare(a)}),this.availableTradeSets=o}onExcludeSpecialPacksToggle(){this.refreshAvailableTradeSets();const r=this.selectedLFsets&&this.selectedLFsets.length===this.availableTradeSets.length,o=this.selectedFTsets&&this.selectedFTsets.length===this.availableTradeSets.length;this.selectedLFsets=(this.selectedLFsets||[]).filter(i=>this.availableTradeSets.includes(i)),this.selectedFTsets=(this.selectedFTsets||[]).filter(i=>this.availableTradeSets.includes(i)),r&&(this.selectedLFsets=[...this.availableTradeSets]),o&&(this.selectedFTsets=[...this.availableTradeSets]),this.cdr.detectChanges()}onDeluxeSpecialToggle(){if(this.tradeDeluxeSpecialOnly){const r=this.availableTradeSets.find(o=>"A4B"===o.toUpperCase());r&&(this.selectedLFsets=[r])}this.cdr.detectChanges()}isLFSetSelected(r){return this.selectedLFsets.includes(r)}toggleLFSet(r){const o=this.selectedLFsets.indexOf(r);o>=0?this.selectedLFsets.splice(o,1):this.selectedLFsets.push(r),this.cdr.detectChanges()}clearLFsets(){this.selectedLFsets=[],this.cdr.detectChanges()}selectAllLFsets(){this.selectedLFsets=[...this.availableTradeSets],this.cdr.detectChanges()}isFTSetSelected(r){return this.selectedFTsets.includes(r)}toggleFTSet(r){const o=this.selectedFTsets.indexOf(r);o>=0?this.selectedFTsets.splice(o,1):this.selectedFTsets.push(r),this.cdr.detectChanges()}clearFTsets(){this.selectedFTsets=[],this.cdr.detectChanges()}selectAllFTsets(){this.selectedFTsets=[...this.availableTradeSets],this.cdr.detectChanges()}openViewOthersModal(){this.isViewingOther||(this.showViewOthersModal=!0,this.cdr.detectChanges())}closeViewOthersModal(){this.showViewOthersModal=!1,this.cdr.detectChanges()}viewOtherCollectionFromModal(){var r=this;return C(function*(){r.openOtherCollectionInNewTab(),r.closeViewOthersModal()})()}openOtherCollectionInNewTab(){const r=(this.otherUsername||"").trim();if(!r)return void alert("Please enter a username");const o=this.router.createUrlTree(["/collection"],{queryParams:{otherUser:r}}),i=this.router.serializeUrl(o),a=(document.querySelector("base")?.getAttribute("href")||"/").trim();let l;/^https?:\/\//i.test(a),l=a.replace(/\/$/,"")+i,window.open(l,"_blank","noopener")}onDocumentClickCloseTradeDropdowns(r){if(!this.showTradeModal)return;const o=r.target,i=document.getElementById("lf-set-multiselect"),s=document.getElementById("ft-set-multiselect"),a=!!(i&&o&&i.contains(o)),l=!!(s&&o&&s.contains(o));!a&&this.lfSetDropdownOpen&&(this.lfSetDropdownOpen=!1,this.cdr.detectChanges()),!l&&this.ftSetDropdownOpen&&(this.ftSetDropdownOpen=!1,this.cdr.detectChanges())}generateAndCopyTradeText(){var r=this;return C(function*(){try{const o=r.generateTradeText();yield navigator.clipboard.writeText(o)}catch(o){console.error("Failed to copy to clipboard:",o),alert("Failed to copy to clipboard. Please try again.")}})()}generateTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],s=this.cards.filter(_=>{if(this.excludeSpecialPacks&&!this.tradeDeluxeSpecialOnly&&this.isSpecialSet(_.set)||this.tradeDeluxeSpecialOnly&&!this.isSpecialSet(_.set))return!1;const w=this.getCardRarityCode(_),T=w?this.rarityService.getSymbol(w):"";return!(T&&!o.includes(T)||this.selectedLFsets.length>0&&!this.selectedLFsets.includes(_.set)||this.tradeDeluxeSpecialOnly&&!0!==_.isFoil)&&0===this.getOwnedCount(_)}).reduce((_,w)=>((_[w.set]||=[]).push(w),_),{});let a="";if("details"===this.outputFormat)return this.generateDetailsTradeText();const l=_=>{const w=_.map(T=>{const D=T.label?.eng||"";return!0===T.isFoil?`${D} (foil)`:D});return 0===w.length?"":1===w.length?w[0]:2===w.length?`${w[0]} & ${w[1]}`:w.join(", ")};a+="LF:\n";const c=Object.entries(s).filter(([,_])=>_.length>0).sort((_,w)=>this.compareSetCodesAsc(_[0],w[0]));for(const[_,w]of c){const T=this.getSetShortName(_);w.sort((P,F)=>P.number-F.number||P.label.eng.localeCompare(F.label.eng));const D=l(w);D&&(a+=`[${T}] ${D}\n`)}a+="\nFT:\n";const d=this.cards.filter(_=>{if(this.excludeSpecialPacks&&this.isSpecialSet(_.set))return!1;const w=this.getCardRarityCode(_),T=w?this.rarityService.getSymbol(w):"";return!(T&&!o.includes(T)||T&&this.excludedTradeSymbols.has(T)||this.selectedFTsets.length>0&&!this.selectedFTsets.includes(_.set))&&!(this.getOwnedCount(_)-this.getCardMinimumKeepCount(_)<this.tradeQuantityMin)}).reduce((_,w)=>((_[w.set]||=[]).push(w),_),{}),h=Object.entries(d).filter(([,_])=>_.length>0).sort((_,w)=>this.compareSetCodesAsc(_[0],w[0]));for(const[_,w]of h){const T=this.getSetShortName(_);w.sort((P,F)=>P.number-F.number||P.label.eng.localeCompare(F.label.eng));const D=l(w);D&&(a+=`[${T}] ${D}\n`)}const f=(this.tradeTemplateText||"").trim(),p=(this.tradeFriendCode||"").trim(),v=(this.currentUser?.username||"").trim();return a+="\n=============================================================================",f&&(a+=`\n${f}\n`),(p||v)&&(v&&(a+=`\nIGN: ${v}`),p&&(a+=`\nFriend code: ${p}`)),a.trim()}compareSetCodesAsc(r,o){const i=/^([A-Z]+)(\d+)([a-z]*)$/,s=(r||"").match(i),a=(o||"").match(i);if(s&&a){if(s[1]!==a[1])return s[1].localeCompare(a[1]);const l=parseInt(s[2],10),c=parseInt(a[2],10);return l!==c?l-c:(s[3]||"").localeCompare(a[3]||"")}return(r||"").localeCompare(o||"")}generateDetailsTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],i=this.cards.filter(d=>{if(this.excludeSpecialPacks&&this.isSpecialSet(d.set)||this.selectedLFsets.length>0&&!this.selectedLFsets.includes(d.set))return!1;const h=this.getCardRarityCode(d),f=h?this.rarityService.getSymbol(h):"";return!(f&&!o.includes(f))&&0===this.getOwnedCount(d)}),s={};for(const d of i){const h=d.set,f=this.getCardRarityCode(d),p=f?this.rarityService.getSymbol(f):"Unknown";s[h]||(s[h]={}),s[h][p]||(s[h][p]=[]),s[h][p].push(d)}const a=d=>{const f=["\u25ca\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca","\u25ca","\u2606\u2606","\u2606","\u2735\u2735","\u2735"].indexOf(d);return f>=0?f:999},l=[],c=Object.keys(s).sort((d,h)=>this.compareSetCodesAsc(d,h)),u=(d,h)=>`${(d||h).toLowerCase().replace(/\s+/g,"")}(${h.toLowerCase()}):`;for(const d of c){const h=this.getSetShortName(d),f=s[d],p=Object.keys(f).sort((v,_)=>a(v)-a(_));for(const v of p){const _=u(h,d);l.push(_);const w=f[v].sort((T,D)=>T.number-D.number||T.label.eng.localeCompare(D.label.eng));for(const T of w)l.push(`${v} ${T.set}-${T.number} - ${T.label.eng}`);l.push("")}}return l.join("\n").trim()}loadOwnedCards(){var r=this;return C(function*(){r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}loadOwnedCardsForUser(r,o){var i=this;return C(function*(){i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage=o?`Loading ${o}'s collection...`:"Starting sync...",i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage="Starting sync...";try{const{quantities:s,minimumKeepCounts:a,allowTrade:l}=yield i.supabaseService.syncUserCollection(r,c=>{i.syncProgress=c,i.syncMessage=`Syncing cards... ${c} loaded`,i.cdr.detectChanges()});i.ownedCards=s,i.cardMinimumKeepCount=a,i.cardAllowTrade=l,i.calculateStatistics(),i.syncMessage=`Sync completed! ${Object.keys(s).length} cards loaded`,i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},1500)}catch(s){console.error("Error loading owned cards:",s),i.syncMessage="Sync failed, using local data...";const a=localStorage.getItem("ownedPokemonCards");a&&(i.ownedCards=JSON.parse(a),i.calculateStatistics()),i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},2e3)}finally{i.loadingOwnedCards=!1}})()}saveOwnedCards(){var r=this;return C(function*(){localStorage.setItem("ownedPokemonCards",JSON.stringify(r.ownedCards)),r.calculateStatistics()})()}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}getCardMinimumKeepCount(r){const o=this.getCardId(r);return this.cardMinimumKeepCount[o]||0}isCardAllowTrade(r){const o=this.getCardId(r);return!1!==this.cardAllowTrade[o]}toggleCardAllowTrade(r){var o=this;return C(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.isCardAllowTrade(r),a=!s,l=o.cardMinimumKeepCount[i]||0;if(o.cardAllowTrade[i]=a,a){if(0===l){const d=o.getCardRarityCode(r),h=o.rarityService.getRarityOrder(d);console.log(h),o.cardMinimumKeepCount[i]=h>=5?1:2}}else o.cardMinimumKeepCount[i]=0;o.cdr.detectChanges();const c=yield o.supabaseService.toggleAllowTrade(o.currentUser.id,i,a);if(!c.success)return console.error("Error toggling allow trade:",c.error),o.cardAllowTrade[i]=s,o.cardMinimumKeepCount[i]=l,void o.cdr.detectChanges();const u=yield o.supabaseService.updateCardMinimumKeepCount(o.currentUser.id,i,o.cardMinimumKeepCount[i]);u.success||console.error("Error updating minimum keep count:",u.error)})()}updateCardMinimumKeepCount(r,o){var i=this;return C(function*(){if(i.isViewingOther||!i.currentUser||o<0)return;const s=i.getCardId(r),a=i.getCardMinimumKeepCount(r);i.cardMinimumKeepCount[s]=o,i.cdr.detectChanges();const l=yield i.supabaseService.updateCardMinimumKeepCount(i.currentUser.id,s,o);l.success||(console.error("Failed to update minimum keep count:",l.error),i.cardMinimumKeepCount[s]=a,i.cdr.detectChanges())})()}increaseOwned(r){var o=this;return C(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r),a=s+1;o.updateLocalQuantity(i,a,r),yield o.persistQuantity(i,a,s,r)})()}decreaseOwned(r){var o=this;return C(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r);if(0===s)return;const a=s-1;o.updateLocalQuantity(i,a,r),yield o.persistQuantity(i,a,s,r)})()}startEditingCount(r){this.isViewingOther||(this.editingCardId=this.getCardId(r),this.editingCountValue=this.getOwnedCount(r),this.cdr.detectChanges(),this.focusEditingInput())}cancelEditingCount(){this.editingCardId=null,this.editingCountValue=0,this.cdr.detectChanges()}commitCount(r){var o=this;return C(function*(){if(o.isViewingOther)return void o.cancelEditingCount();if(!o.currentUser)return;const i=o.getCardId(r);if(o.editingCardId!==i)return;const s=Math.max(0,Math.floor(Number(o.editingCountValue)||0)),a=o.getOwnedCount(r);s!==a?(o.updateLocalQuantity(i,s,r),yield o.persistQuantity(i,s,a,r),o.cancelEditingCount()):o.cancelEditingCount()})()}onCountInputKeydown(r,o){if("Tab"!==r.key)return;r.preventDefault();const i=this.getFlatOrderedCards(),s=this.getCardId(o),a=i.findIndex(c=>this.getCardId(c)===s);if(-1===a)return;const l=r.shiftKey?a-1:a+1;this.commitCount(o).then(()=>{const c=i[l];c&&this.startEditingCount(c)})}focusEditingInput(){const r=this.editingCardId;r&&setTimeout(()=>{const o=document.querySelector(`.card-item[data-cardid="${r}"] .count-input`);o&&(o.focus(),o.select())})}getFlatOrderedCards(){const r=this.getGroupedCards();return this.lastFlatOrder=r.flatMap(o=>o.cards),this.lastFlatOrder}updateLocalQuantity(r,o,i){if(o<=0)delete this.ownedCards[r],delete this.cardMinimumKeepCount[r],delete this.cardAllowTrade[r];else{if(this.ownedCards[r]=o,void 0===this.cardMinimumKeepCount[r]){const s=this.getCardRarityCode(i),a=this.rarityService.getRarityOrder(s);this.cardMinimumKeepCount[r]=a>=5?1:2}void 0===this.cardAllowTrade[r]&&(this.cardAllowTrade[r]=!0)}this.saveOwnedCards(),this.cdr.detectChanges()}persistQuantity(r,o,i,s){var a=this;return C(function*(){if(a.currentUser)try{if(yield a.supabaseService.updateCardQuantity(a.currentUser.id,r,o),0===i&&o>0){const l=a.getCardRarityCode(s),u=a.rarityService.getRarityOrder(l)>=5?1:2;yield a.supabaseService.updateCardMinimumKeepCount(a.currentUser.id,r,u)}}catch(l){console.error("Error updating card quantity in database:",l),i<=0?delete a.ownedCards[r]:a.ownedCards[r]=i,a.saveOwnedCards(),a.cdr.detectChanges()}})()}calculateStatistics(){this.totalCards=this.cards.length,this.ownedCount=Object.values(this.ownedCards).reduce((r,o)=>r+o,0),this.uniqueOwned=Object.keys(this.ownedCards).length,this.completionPercentage=this.totalCards>0?Math.round(this.uniqueOwned/this.totalCards*100):0}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.name:r}getSetShortName(r){const o=this.sets.find(i=>i.code===r);return o?o.shortName:r}getFullRarityName(r){return this.rarityService.getStandardizedDisplayName(r)}getRarityClass(r){return{Common:"rarity-common",Uncommon:"rarity-uncommon",Rare:"rarity-rare","Double Rare":"rarity-double-rare","Art Rare":"rarity-art-rare","Super Rare":"rarity-super-rare","Special Art Rare":"rarity-special-art-rare","Immersive Rare":"rarity-immersive-rare","Crown Rare":"rarity-crown-rare",Shiny:"rarity-shiny","Shiny Super Rare":"rarity-shiny-super-rare"}[r]||"rarity-default"}toggleViewMode(){this.viewMode="grid"===this.viewMode?"list":"grid",console.log("View mode toggled to:",this.viewMode),this.cdr.detectChanges()}exportCollection(){if(this.isViewingOther)return void alert("Export is disabled when viewing another user's collection");let r="\ufeff";r+="Id,CardName,NumberOwn,Expansion,Pack,Rarity\n",this.cards.forEach(s=>{const a=this.getCardId(s),l=this.getOwnedCount(s),c=this.getCardRarityCode(s),u=c?this.rarityService.getSymbol(c):"Unknown",d=s.packs&&s.packs.length>0?s.packs[0]:"",h=s.label.eng.replace(/,/g,'""');r+=`${a},"${h}",${l},${s.set},"${d}",${u}\n`});const o=new Blob([r],{type:"text/csv;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="pokemon-tcg-collection.csv",i.click()}importCollection(r){var o=this;if(this.isViewingOther)return void alert("Import is disabled when viewing another user's collection");const i=r.target.files[0];if(i){const s=new FileReader;s.onload=function(){var a=C(function*(l){try{const d=(l.target?.result||"").split(/\r?\n/).filter(F=>F.trim().length>0);if(0===d.length)return void alert("CSV file appears to be empty.");const h=new Map;o.cards.forEach(F=>{const Y=o.getCardId(F);h.set(o.normalizeId(Y),Y)});const f=o.parseCSVLine(d[0]),p=/(id|card|name|expansion|set|rarity|qty|quantity|owned|count|number|no)/i,v=f.some(F=>p.test(F)),_=v?1:0,w=v?o.buildHeaderMap(f):null;let T=0,D=0,P=0;for(let F=_;F<d.length;F++){const Y=d[F];try{const Zt=o.parseCSVLine(Y),{cardId:Re,quantity:ft}=o.resolveCsvRow(Zt,w);if(!Re){D++;continue}const Qn=Math.max(0,Math.floor(Number(ft))||0),Cn=h.get(o.normalizeId(Re))||null;Cn?(Qn>0?o.ownedCards[Cn]=Qn:delete o.ownedCards[Cn],T++):(console.log(Re),P++)}catch(Zt){console.error(`Error parsing line: ${Y}`,Zt),D++}}if(o.saveOwnedCards(),o.currentUser)try{const F=yield o.supabaseService.bulkReplaceUserCollection(o.currentUser.id,o.ownedCards);if(F.success){let Y=`Import completed!\n${T} cards updated`;Y+="\nCollection synced to database successfully",P>0&&(Y+=`\n${P} rows referenced unknown cards (skipped)`),D>0&&(Y+=`\n${D} parse errors encountered`),yield o.loadOwnedCards(),alert(Y)}else{console.error("\u274c Failed to sync collection to database:",F.error);let Y=`Import completed!\n${T} cards updated locally`;Y+=`\nDatabase sync failed: ${F.error}`,P>0&&(Y+=`\n${P} unknown cards (skipped)`),D>0&&(Y+=`\n${D} parse errors encountered`),alert(Y)}}catch(F){console.error("\u274c Error during bulk sync:",F);let Y=`Import completed!\n${T} cards updated locally`;Y+="\nDatabase sync failed - please try again",P>0&&(Y+=`\n${P} unknown cards (skipped)`),D>0&&(Y+=`\n${D} parse errors encountered`),alert(Y)}else{let F=`Import completed!\n${T} cards updated`;P>0&&(F+=`\n${P} unknown cards (skipped)`),D>0&&(F+=`\n${D} parse errors encountered`),alert(F)}}catch(c){console.error("Failed to import collection:",c),alert("Failed to import collection. Please check the CSV file format.")}});return function(l){return a.apply(this,arguments)}}(),s.readAsText(i)}}viewOtherCollection(){var r=this;return C(function*(){const o=(r.otherUsername||"").trim();if(!o)return void alert("Please enter a username");if(r.currentUser&&o===r.currentUser.username)return void r.backToMyCollection();const i=yield r.supabaseService.getProfileByUsername(o);i?(r.isViewingOther=!0,r.viewingUser=i,yield r.loadOwnedCardsForUser(i.id,i.username)):alert(`User '${o}' not found`)})()}backToMyCollection(){var r=this;return C(function*(){r.isViewingOther=!1,r.viewingUser=null,r.otherUsername="",r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}buildHeaderMap(r){const o={};return r.forEach((i,s)=>{const a=i.trim().toLowerCase();o[a]=s}),o}resolveCsvRow(r,o){const i=c=>{if(o)for(const u of c){const d=o[u];if(void 0!==d&&d>=0&&d<r.length){const h=(r[d]||"").trim();if(h)return h}}},s=i(["numberown","quantity","qty","owned","count","number own","number_owned"]);let a=0;void 0!==s?a=Math.max(0,Math.floor(Number(s)||0)):r.length>=3&&(a=Math.max(0,Math.floor(Number(r[2])||0)));let l=i(["id","cardid","card id"]);if(!l){let c=i(["set","expansion"]),u=i(["number","no","card number","card no","card#"]);if(!c&&r.length>=4&&(c=(r[3]||"").trim()),!u&&r.length>=1){const d=(r[1]||"").trim();/^\d+/.test(d)&&(u=d)}if(c&&u){const d=this.mapToSetCode(c),h=this.extractLeadingInt(u);d&&null!==h&&(l=`${d}-${h}`)}}if(!l&&r.length>0){const c=(r[0]||"").trim();c&&(l=c)}return{cardId:l||null,quantity:a}}extractLeadingInt(r){const o=(r||"").match(/\d+/);return o?parseInt(o[0],10):null}mapToSetCode(r){const i=(r||"").trim().toUpperCase();if("PROMO-A"===i)return"P-A";const s=this.sets.find(l=>(l.code||"").toUpperCase()===i);if(s)return s.code;const a=this.sets.find(l=>(l.name||"").toUpperCase()===i);return a?a.code:null}normalizeId(r){let o=(r||"").trim().toUpperCase();return o=o.replace(/^PROMO-A(?=-)/,"P-A"),o}parseCSVLine(r){const o=[];let i="",s=!1;for(let a=0;a<r.length;a++){const l=r[a];'"'===l?s=!s:","!==l||s?i+=l:(o.push(i),i="")}return o.push(i),o}getCardImageUrl(r){return this.imageService.getCardImageUrl(r)}getCardDisplayName(r){return`${r.set}-${r.number} \u2013 ${r.label.eng}`}onImageError(r,o){console.error("\u274c Image failed to load:",o.imageName),r.target.src=this.imageService.getPlaceholderImageUrl()}getGroupedCards(){if("all"!==this.selectedSet&&"none"!==this.groupBy)return this.getGroupedCardsByCategory();const r={};this.filteredCards.forEach(a=>{const l=a.set;r[l]||(r[l]=[]),r[l].push(a)});const o=(a,l)=>{const c=a.match(/^([A-Z]+)(\d+)([a-z]*)$/),u=l.match(/^([A-Z]+)(\d+)([a-z]*)$/);if(c&&u){if(c[1]!==u[1])return c[1].localeCompare(u[1]);const d=parseInt(c[2],10),h=parseInt(u[2],10);return d!==h?d-h:(c[3]||"").localeCompare(u[3]||"")}return a.localeCompare(l)},s=(a,l)=>a.number!==l.number?a.number-l.number:a.label.eng.localeCompare(l.label.eng);return Object.keys(r).sort((a,l)=>{const c=h=>this.isSpecialSet(h),u=c(a),d=c(l);return u&&!d?1:!u&&d?-1:"latest"===this.sortBy?o(l,a):o(a,l)}).map(a=>({groupTitle:a,cards:r[a].sort(s)}))}getGroupedCardsByCategory(){const r={};this.filteredCards.forEach(s=>{let a;switch(this.groupBy){case"rarity":const l=this.getCardRarityCode(s);a=`${l?this.rarityService.getSymbol(l):"Unknown"} ${l?this.rarityService.getDisplayName(l):"Unknown"}`;break;case"pack":a=s.packs&&s.packs.length>0?s.packs[0]:"No Pack";break;case"type":a=s.types&&s.types.length>0?s.types[0]:"No Type";break;default:a="All Cards"}r[a]||(r[a]=[]),r[a].push(s)});const o=Object.keys(r).sort((s,a)=>{if("rarity"===this.groupBy){const l=c=>{const u=c.split(" ")[0];return this.rarityService.getRarityOrder(u)||999};return l(s)-l(a)}return s.localeCompare(a)}),i=(s,a)=>s.number!==a.number?s.number-a.number:s.label.eng.localeCompare(a.label.eng);return o.map(s=>({groupTitle:s,cards:r[s].sort(i)}))}getGroupDisplayName(r,o){const i=this.getSetName(r);return i&&i!==r?`${r} - ${i}`:`Set ${r}`}getGroupCollectedCount(r){return`${r.filter(s=>this.getOwnedCount(s)>0).length}/${r.length}`}setOwnership(r){this.ownershipFilter!==r&&(this.ownershipFilter=r,this.applyFilters(),this.cdr.detectChanges())}setFoilFilter(r){this.foilFilter!==r&&(this.foilFilter=r,this.applyFilters(),this.cdr.detectChanges())}isRaritySelected(r){return this.selectedRarities.includes(r)}toggleRarity(r){const o=this.selectedRarities.indexOf(r);o>=0?this.selectedRarities.splice(o,1):this.selectedRarities.push(r),this.applyFilters(),this.cdr.detectChanges()}clearRarity(){this.selectedRarities.length>0&&(this.selectedRarities=[],this.applyFilters(),this.cdr.detectChanges())}isTypeSelected(r){return this.selectedTypes.includes(r)}toggleType(r){const o=this.selectedTypes.indexOf(r);o>=0?this.selectedTypes.splice(o,1):this.selectedTypes.push(r),this.applyFilters(),this.cdr.detectChanges()}clearTypes(){this.selectedTypes.length>0&&(this.selectedTypes=[],this.applyFilters(),this.cdr.detectChanges())}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){const r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);window.scrollTo({top:r,behavior:"smooth"})}getSetElements(){return Array.from(document.querySelectorAll(".cards-container .card-group"))}getCurrentSetIndex(r=80){const o=window.scrollY||window.pageYOffset||0,i=this.getSetElements();let s=-1;for(let a=0;a<i.length&&i[a].getBoundingClientRect().top+window.scrollY-r<=o;a++)s=a;return s}scrollToNextSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),i=Math.min(o+1,r.length-1);if(i>=0){const a=r[i].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}}scrollToPrevSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),a=r[Math.max(o-1,0)].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}ngOnDestroy(){this.selectedCardForModal&&(document.removeEventListener("keydown",this.handleModalKeydown),document.body.style.overflow="auto")}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(Qc),N(uD),N(cL),N(rs),N(xt),N(ro),N(xi),N(KD))},n.\u0275cmp=Br({type:n,selectors:[["app-card-collection"]],hostBindings:function(o,i){1&o&&A("click",function(a){return i.onDocumentClickCloseTradeDropdowns(a)},0,r_)},decls:106,vars:49,consts:[[1,"collection-container"],[1,"collection-actions"],[1,"actions-left"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","import-btn"],["type","file","accept",".csv","hidden","",3,"change"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"actions-right"],["title","Toggle view mode",1,"btn","btn-secondary",3,"click"],["class","view-other-banner","style","margin-bottom:12px; padding:10px 14px; border-radius:12px; background:rgba(46,204,113,0.12); border:1px solid rgba(46,204,113,0.35); display:flex; align-items:center; justify-content:space-between; gap:12px;",4,"ngIf"],["role","region","aria-label","Collection filters",1,"filters-panel"],[1,"filters-row"],["type","text","placeholder","Search cards\u2026","aria-label","Search cards",1,"filter-input",3,"ngModel","ngModelChange","input"],[1,"filters-row","wrap","sets-row"],[1,"sort-group"],["for","series-select"],["id","series-select","aria-label","Select series",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["for","set-select"],["id","set-select","aria-label","Select set",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["for","pack-select"],["id","pack-select","aria-label","Select pack",1,"filter-select","compact",3,"disabled","ngModel","ngModelChange","change"],[1,"filters-row","rarity-row"],["for","rarity-chips",1,"filter-label"],["id","rarity-chips","aria-label","Rarity filter",1,"segmented","multi","chips-scroll"],["type","button","title","All rarities",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","types-row"],["for","types-chips",1,"filter-label"],["id","types-chips","aria-label","Types filter",1,"segmented","multi","chips-scroll"],["type","button","title","All types",1,"chip",3,"click"],["type","button","class","chip type-chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","wrap"],["for","sort-select"],["id","sort-select","aria-label","Sort order",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","latest"],["value","oldest"],["class","sort-group",4,"ngIf"],["role","tablist","aria-label","Ownership filter",1,"segmented","ownership"],["type","button",3,"click"],["role","tablist","aria-label","Foil filter",1,"segmented","foil"],[1,"row-spacer"],["type","button","aria-label","Reset filters",1,"btn","btn-outline","reset-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","sync-progress",4,"ngIf"],["class","cards-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["aria-label","Collection navigation controls",1,"fab-stack"],["type","button","title","Top",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-up"],["type","button","title","Previous set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-up"],["type","button","title","Next set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-down"],["type","button","title","Bottom",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-down"],["aria-label","Filter controls",1,"fab-stack-left"],["type","button","title","Filters",1,"fab","mobile-only",3,"click"],["aria-hidden","true",1,"fa","fa-filter"],["type","button","title","Copy For Trade",1,"fab","mobile-only",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-exchange-alt"],["type","button","title","View Others Collection",1,"fab","mobile-only",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-user"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"view-other-banner",2,"margin-bottom","12px","padding","10px 14px","border-radius","12px","background","rgba(46,204,113,0.12)","border","1px solid rgba(46,204,113,0.35)","display","flex","align-items","center","justify-content","space-between","gap","12px"],[2,"background-color","transparent"],[1,"btn","btn-outline",3,"click"],[3,"value"],["type","button",1,"chip",3,"title","click"],["type","button",1,"chip","type-chip",3,"title","click"],[4,"ngIf","ngIfElse"],["normalType",""],[1,"trainer-label",3,"ngClass"],[1,"type-icon",3,"src","alt"],["for","group-select"],["id","group-select","aria-label","Group by",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","none"],["value","rarity"],["value","pack"],["value","type"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"btn","btn-primary",3,"click"],[1,"sync-progress"],[1,"sync-message"],[1,"sync-icon"],[1,"sync-text"],[1,"sync-title"],["class","sync-count",4,"ngIf"],[1,"sync-count"],[1,"cards-container"],["class","card-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-group"],[1,"group-header"],[1,"group-title"],[1,"group-stats"],["class","group-count","style","margin-left:10px; color:#b9eaff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffe066;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#f7a6ff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffd700;",4,"ngIf"],[1,"group-count"],["class","cards-grid",4,"ngIf"],["class","cards-list",4,"ngIf"],[1,"group-count",2,"margin-left","10px","color","#b9eaff"],[1,"group-count",2,"margin-left","10px","color","#ffe066"],[1,"group-count",2,"margin-left","10px","color","#f7a6ff"],[1,"group-count",2,"margin-left","10px","color","#ffd700"],[1,"cards-grid"],["class","card-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-item"],[1,"card-image"],["loading","lazy",1,"pokemon-card-img",2,"cursor","pointer",3,"src","alt","error","click"],[1,"card-info"],[1,"card-title"],[1,"ownership-controls"],[1,"count-btn","decrease",3,"disabled","click"],["displayCount",""],[1,"count-btn","increase",3,"disabled","click"],["class","minimum-keep-controls",4,"ngIf"],["type","number","min","0",1,"count-input",3,"ngModel","ngModelChange","keydown.enter","keydown","keydown.escape","blur"],["type","button",1,"count-display",3,"disabled","click"],[1,"minimum-keep-controls"],["type","button",1,"lock-toggle-btn",3,"title","click"],["type","number","min","0","placeholder","0",1,"minimum-keep-input",3,"value","max","disabled","change"],[1,"cards-list"],["class","card-list-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-list-item"],[1,"card-list-image",3,"click"],["loading","lazy",1,"card-list-img",3,"src","alt","error"],[1,"card-list-details"],[1,"card-list-name"],[1,"card-list-meta"],[1,"card-list-set"],["class","card-list-packs",4,"ngIf"],[1,"card-list-controls"],[1,"card-list-quantity"],["displayCountList",""],["class","card-list-keep",4,"ngIf"],[1,"card-list-packs"],[1,"card-list-keep"],["type","number","min","0","placeholder","0",1,"minimum-keep-input-list",3,"value","max","disabled","change"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-backdrop",3,"click"],[1,"modal-content","view-others-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"view-others-config"],[1,"config-section"],["for","other-username-input",1,"config-label"],["type","text","id","other-username-input","placeholder","Enter username to view their collection\u2026",1,"config-input-wide",3,"ngModel","ngModelChange","keydown.enter"],[1,"config-hint"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],[1,"modal-content","trade-modal",3,"click"],[1,"trade-config"],["for","exclude-special-toggle",1,"config-label"],["type","checkbox","id","exclude-special-toggle",3,"ngModel","ngModelChange"],["class","config-section",4,"ngIf"],["for","lf-set-multiselect",1,"config-label"],["id","lf-set-multiselect",2,"position","relative","display","inline-block","width","100%"],["type","button",2,"width","100%","background","rgba(255,255,255,0.08)","border","1px solid rgba(255,255,255,0.18)","color","var(--text)","padding","6px 10px","border-radius","8px","display","flex","align-items","center","justify-content","space-between","cursor","pointer","font-size","14px",3,"click"],[4,"ngIf"],[1,"fa",3,"ngClass"],["style","position:absolute; left:0; right:0; top: calc(100% + 4px); background: #1e2533; border:1px solid rgba(255,255,255,0.18); border-radius:10px; padding:8px 8px 10px; box-shadow:0 6px 16px rgba(0,0,0,0.45); z-index:50; max-height:260px; overflow-y:auto;",4,"ngIf"],["for","ft-set-multiselect",1,"config-label"],["id","ft-set-multiselect",2,"position","relative","display","inline-block","width","100%"],[1,"config-label"],[1,"rarity-chips"],["type","button",1,"chip",3,"click"],["role","tablist","aria-label","Output format",1,"segmented"],["type","button","role","tab",3,"click"],["for","trade-qty-min",1,"config-label"],["type","number","id","trade-qty-min","min","1","max","10",1,"config-input",3,"ngModel","ngModelChange"],["for","friend-code-input",1,"config-label"],["type","text","id","friend-code-input","placeholder","Enter your friend code to include in the copy\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],["for","trade-template-text",1,"config-label"],["id","trade-template-text","rows","2","placeholder","Add an extra note to include in the copied text\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],["for","deluxe-special-toggle",1,"config-label"],["type","checkbox","id","deluxe-special-toggle",3,"ngModel","ngModelChange"],[2,"position","absolute","left","0","right","0","top","calc(100% + 4px)","background","#1e2533","border","1px solid rgba(255,255,255,0.18)","border-radius","10px","padding","8px 8px 10px","box-shadow","0 6px 16px rgba(0,0,0,0.45)","z-index","50","max-height","260px","overflow-y","auto"],[2,"display","flex","gap","8px","margin-bottom","6px"],["type","button",1,"btn","btn-outline",2,"padding","4px 8px","font-size","11px","line-height","1",3,"click"],["role","listbox",2,"display","flex","flex-direction","column","gap","2px"],["type","button","style","border:none; text-align:left; padding:4px 6px; border-radius:6px; font-size:12px; cursor:pointer; display:flex; align-items:center; gap:6px;",3,"ngStyle","click",4,"ngFor","ngForOf"],["style","font-size:12px; opacity:0.7; padding:4px;",4,"ngIf"],["type","button",2,"border","none","text-align","left","padding","4px 6px","border-radius","6px","font-size","12px","cursor","pointer","display","flex","align-items","center","gap","6px",3,"ngStyle","click"],[2,"width","16px","display","inline-block"],[2,"font-size","12px","opacity","0.7","padding","4px"],[1,"modal-overlay",3,"click"],[1,"modal-content","card-modal",3,"click"],["aria-label","Close modal",1,"modal-close",3,"click"],[1,"card-modal-image",2,"display","flex","align-items","center","justify-content","center","gap","16px"],["aria-label","Previous card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"modal-card-image",3,"src","alt"],["aria-label","Next card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"card-modal-info"],["class","modal-pack-badges",4,"ngIf"],[1,"modal-pack-badges"],["class","pack-badge",4,"ngFor","ngForOf"],[1,"pack-badge"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),A("click",function(){return i.exportCollection()}),b(4," \u{1f4e4} Export Collection "),m(),g(5,"label",4),b(6," \u{1f4e5} Import Collection "),g(7,"input",5),A("change",function(a){return i.importCollection(a)}),m()(),g(8,"button",6),A("click",function(){return i.openTradeModal()}),b(9," \u{1f4cb} Copy For Trade "),m(),g(10,"button",6),A("click",function(){return i.openViewOthersModal()}),b(11," \u{1f464} View Others Collection "),m()(),g(12,"div",7)(13,"button",8),A("click",function(){return i.toggleViewMode()}),b(14),m()()(),H(15,xV,8,1,"div",9),g(16,"div",10)(17,"div",11)(18,"input",12),A("ngModelChange",function(a){return i.searchTerm=a})("input",function(){return i.onSearchChange()}),m()(),g(19,"div",13)(20,"div",14)(21,"label",15),b(22,"Series"),m(),g(23,"select",16),A("ngModelChange",function(a){return i.selectedSeries=a})("change",function(){return i.onSeriesChange()}),g(24,"option",17),b(25,"All Series"),m(),H(26,MV,2,2,"option",18),m()(),g(27,"div",14)(28,"label",19),b(29),m(),g(30,"select",20),A("ngModelChange",function(a){return i.selectedSet=a})("change",function(){return i.onSetChange()}),g(31,"option",17),b(32),m(),H(33,TV,2,2,"option",18),m()(),g(34,"div",14)(35,"label",21),b(36),m(),g(37,"select",22),A("ngModelChange",function(a){return i.selectedPack=a})("change",function(){return i.applyFilters()}),g(38,"option",17),b(39),m(),H(40,OV,2,2,"option",18),m()()(),g(41,"div",23)(42,"label",24),b(43,"Rarity"),m(),g(44,"div",25)(45,"button",26),A("click",function(){return i.clearRarity()}),b(46,"ALL"),m(),H(47,IV,2,4,"button",27),m()(),g(48,"div",28)(49,"label",29),b(50,"Types"),m(),g(51,"div",30)(52,"button",31),A("click",function(){return i.clearTypes()}),b(53," ALL "),m(),H(54,NV,4,6,"button",32),m()(),g(55,"div",33)(56,"div",14)(57,"label",34),b(58,"Sort By"),m(),g(59,"select",35),A("ngModelChange",function(a){return i.sortBy=a})("change",function(){return i.applyFilters()}),g(60,"option",36),b(61,"Latest Set"),m(),g(62,"option",37),b(63,"Oldest Set"),m()()(),H(64,FV,12,1,"div",38),g(65,"div",39)(66,"button",40),A("click",function(){return i.setOwnership("all")}),b(67,"ALL"),m(),g(68,"button",40),A("click",function(){return i.setOwnership("missing")}),b(69,"MISSING"),m(),g(70,"button",40),A("click",function(){return i.setOwnership("owned")}),b(71,"OWNED"),m()(),g(72,"div",41)(73,"button",40),A("click",function(){return i.setFoilFilter("all")}),b(74,"ALL"),m(),g(75,"button",40),A("click",function(){return i.setFoilFilter("no-foil")}),b(76,"NO FOIL"),m(),g(77,"button",40),A("click",function(){return i.setFoilFilter("foil-only")}),b(78,"FOIL ONLY"),m()(),Ye(79,"div",42),g(80,"button",43),A("click",function(){return i.clearFilters()}),b(81,"Reset"),m()()(),H(82,LV,4,0,"div",44),H(83,jV,5,1,"div",45),H(84,$V,8,2,"div",46),H(85,r$,2,2,"div",47),H(86,o$,9,0,"div",48),g(87,"div",49)(88,"button",50),A("click",function(){return i.scrollToTop()}),Ye(89,"i",51),m(),g(90,"button",52),A("click",function(){return i.scrollToPrevSet()}),Ye(91,"i",53),m(),g(92,"button",54),A("click",function(){return i.scrollToNextSet()}),Ye(93,"i",55),m(),g(94,"button",56),A("click",function(){return i.scrollToBottom()}),Ye(95,"i",57),m()(),g(96,"div",58)(97,"button",59),A("click",function(){return i.toggleFilters()}),Ye(98,"i",60),m(),g(99,"button",61),A("click",function(){return i.openTradeModal()}),Ye(100,"i",62),m(),g(101,"button",63),A("click",function(){return i.openViewOthersModal()}),Ye(102,"i",64),m()(),H(103,i$,20,2,"div",65),H(104,w$,68,30,"div",65),H(105,E$,14,4,"div",66),m()),2&o&&(y(8),x("disabled",i.isViewingOther),y(2),x("disabled",i.isViewingOther),y(4),Me(" ","grid"===i.viewMode?"\u{1f4cb} List View":"\u{1f5bc}\ufe0f Grid View"," "),y(1),x("ngIf",i.isViewingOther),y(1),Ie("collapsed",!i.filtersOpen),y(2),x("ngModel",i.searchTerm),y(5),x("ngModel",i.selectedSeries),y(3),x("ngForOf",i.availableSeries),y(3),Me("Set ","all"!==i.selectedSeries?"(in "+i.selectedSeries+")":"",""),y(1),x("ngModel",i.selectedSet),y(2),rt("all"!==i.selectedSeries?"All Sets in "+i.selectedSeries:"All Sets"),y(1),x("ngForOf",i.availableSets),y(3),Me("Pack ","all"!==i.selectedSet?"(in "+i.getSetName(i.selectedSet)+")":"(select a set first)",""),y(1),x("disabled","all"===i.selectedSet)("ngModel",i.selectedPack),y(2),rt("all"!==i.selectedSet?"All Packs in "+i.getSetName(i.selectedSet):"Select a set first"),y(1),x("ngForOf",i.availablePacks),y(5),Ie("active",0===i.selectedRarities.length),y(2),x("ngForOf",i.availableRaritySymbols),y(5),Ie("active",0===i.selectedTypes.length),y(2),x("ngForOf",i.availableTypes),y(5),x("ngModel",i.sortBy),y(5),x("ngIf","all"!==i.selectedSet),y(2),Ie("active","all"===i.ownershipFilter),y(2),Ie("active","missing"===i.ownershipFilter),y(2),Ie("active","owned"===i.ownershipFilter),y(3),Ie("active","all"===i.foilFilter),y(2),Ie("active","no-foil"===i.foilFilter),y(2),Ie("active","foil-only"===i.foilFilter),y(5),x("ngIf",i.loading),y(1),x("ngIf",i.error),y(1),x("ngIf",i.syncingCards),y(1),x("ngIf",!i.loading&&!i.error),y(1),x("ngIf",!i.loading&&!i.error&&0===i.getGroupedCards().length),y(11),Nt("aria-pressed",i.filtersOpen),y(2),x("disabled",i.isViewingOther),y(2),x("disabled",i.isViewingOther),y(2),x("ngIf",i.showViewOthersModal),y(1),x("ngIf",i.showTradeModal),y(1),x("ngIf",i.selectedCardForModal))},dependencies:[ec,tc,Ti,nb,Dc,Sc,Ai,wc,uc,Ni,ra,Ec,Pf,Ri],styles:['.group-header[_ngcontent-%COMP%]{flex-wrap:wrap}.group-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.group-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1rem;padding:2px 8px;border-radius:6px;background:rgba(255,255,255,.04);margin-bottom:2px}@media (max-width:600px){.group-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.group-stats[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:6px;font-size:.95rem;margin-top:4px}.group-count[_ngcontent-%COMP%]{font-size:.95rem;padding:2px 6px;margin-bottom:2px}}.chip.active[_ngcontent-%COMP%]   .trainer-item[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-tool[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-supporter[_ngcontent-%COMP%]{color:#fff!important}.trainer-item[_ngcontent-%COMP%], .trainer-tool[_ngcontent-%COMP%], .trainer-supporter[_ngcontent-%COMP%]{font-family:Roboto Condensed,Arial Narrow,sans-serif;font-weight:1000;font-style:italic;font-size:13px;text-transform:uppercase;letter-spacing:1px;-webkit-font-smoothing:antialiased;display:inline-block;margin:0 2px;-webkit-user-select:none;user-select:none;transition:filter .15s ease-in-out;filter:brightness(1.12)}.trainer-item[_ngcontent-%COMP%]{color:#2596be}.trainer-tool[_ngcontent-%COMP%]{color:#78619a}.trainer-supporter[_ngcontent-%COMP%]{color:#dc6c40}.collection-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:transparent;min-height:100vh;color:#fff}.sync-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,#1a4d3a 0%,#0f2d1f 100%);border:1px solid #28a745;border-radius:10px;padding:16px 22px;margin-bottom:20px;box-shadow:0 4px 18px #28a74540}.sync-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.sync-icon[_ngcontent-%COMP%]{font-size:22px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.sync-text[_ngcontent-%COMP%]{flex:1}.sync-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#28a745;margin-bottom:2px}.sync-count[_ngcontent-%COMP%]{font-size:12px;color:#9fb8aa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.collection-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:30px;flex-wrap:wrap}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.view-other-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.view-other-controls[_ngcontent-%COMP%]   .search-input.compact[_ngcontent-%COMP%]{width:auto;max-width:240px;min-width:200px;padding:8px 12px;border-radius:8px}@media (max-width: 768px){.collection-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{justify-content:space-between}}.import-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d;border:1px solid #404040}.filters-panel[_ngcontent-%COMP%]{border:1px solid #666;border-radius:10px;padding:14px;margin-bottom:20px;background-color:#12151c;background:#12151c;box-shadow:0 8px 18px #00000059}.filters-header[_ngcontent-%COMP%]{color:#ddd;font-weight:600;margin-bottom:10px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.filters-row.wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.rarity-row[_ngcontent-%COMP%]{align-items:flex-start;gap:10px}.filters-row.rarity-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filters-row.footer[_ngcontent-%COMP%]{justify-content:space-between}.filter-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.filter-select.compact[_ngcontent-%COMP%]{width:240px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.sort-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#cfcfcf;margin-right:8px}.segmented[_ngcontent-%COMP%]{display:inline-flex;background:#1b1e24;border:1px solid #4a4f5a;border-radius:6px;overflow:hidden}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;background:transparent;color:#cfd6e4;border:none;cursor:pointer}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-left:1px solid #4a4f5a}.segmented[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff}.segmented.multi[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;background:transparent;border:none;overflow-x:auto;padding:4px 2px 2px;-webkit-overflow-scrolling:touch}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#3a3f48;border-radius:4px}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{border:1px solid #3d4350;background:#171a20;color:#cfd6e4;border-radius:999px;padding:6px 10px;font-size:12px;line-height:1}.segmented.multi[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);border-color:#7056b1;color:#fff}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4b90ff;outline-offset:2px}.type-chip[_ngcontent-%COMP%]{padding:6px 8px!important;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.type-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:contain}.ownership[_ngcontent-%COMP%]{margin-left:4px}.row-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.reset-btn[_ngcontent-%COMP%]{white-space:nowrap}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;align-items:center;justify-content:center;padding:16px}.modal-content[_ngcontent-%COMP%]{width:min(520px,92vw);max-height:85vh;overflow:auto;background:#121317;border:1px solid #3e4654;border-radius:10px;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #2c3240}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#eaeaea}.modal-close[_ngcontent-%COMP%]{background:transparent;border:none;color:#aaa;font-size:18px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #2c3240}.trade-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.trade-config[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.config-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.config-label[_ngcontent-%COMP%]{font-weight:600;color:#ddd;font-size:14px}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #4a4f5a;border-radius:6px;background:#1b1e24;color:#cfd6e4;cursor:pointer;transition:all .2s ease}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.rarity-chips[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:var(--header-gradient);border-color:#6f79d9;color:#fff}.config-input[_ngcontent-%COMP%]{width:80px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-input-wide[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-hint[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:420px;margin:0 auto}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #444;border-radius:25px;background-color:#333;color:#fff;font-size:16px;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 10px #007bff4d}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ccc;letter-spacing:.5px}.filter-dependency[_ngcontent-%COMP%]{font-size:11px;color:#007bff;font-weight:400;text-transform:none;font-style:italic}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #444;border-radius:8px;background-color:#333;color:#fff;font-size:14px;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:hover{border-color:#555;background-color:#3a3a3a}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff33}.filter-select[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background-color:#2a2a2a;border-color:#333;color:#888}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.results-info[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:12px 20px;border-radius:8px;text-align:center;border:1px solid #333}.results-text[_ngcontent-%COMP%]{color:#ccc;font-size:14px;font-weight:500}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #333;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.cards-container[_ngcontent-%COMP%]{width:100%}.card-group[_ngcontent-%COMP%]{margin-bottom:40px}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:2px solid #333;flex-wrap:wrap;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin:0;text-shadow:1px 1px 2px rgba(0,0,0,.5);flex:1;min-width:280px;position:relative;line-height:1.3}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-shrink:0}.group-count[_ngcontent-%COMP%]{color:#ccc;font-size:14px;padding:4px 8px;background-color:#333;border-radius:4px;white-space:nowrap}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:18px}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;overflow:hidden;transition:transform .2s ease}.card-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.cards-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.card-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px 16px;background:linear-gradient(135deg,rgba(30,30,40,.6) 0%,rgba(20,20,30,.6) 100%);border:1px solid rgba(100,100,120,.3);border-radius:10px;transition:all .2s ease}.card-list-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,rgba(40,40,50,.7) 0%,rgba(30,30,40,.7) 100%);border-color:#78789680;transform:translate(4px)}.card-list-item.no-quantity[_ngcontent-%COMP%]{opacity:.5}.card-list-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.7}.card-list-image[_ngcontent-%COMP%]{flex-shrink:0;width:60px;height:84px;border-radius:6px;overflow:hidden;cursor:pointer;transition:transform .2s ease}.card-list-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-list-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:6px}.card-list-img.no-quantity[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-list-details[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}.card-list-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-list-meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:12px;color:#aaa}.card-list-set[_ngcontent-%COMP%]{font-weight:500;color:#7a9bff}.card-list-packs[_ngcontent-%COMP%]{color:#999}.card-list-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:flex-end}.card-list-quantity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.card-list-keep[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:4px 8px;background:rgba(30,30,40,.8);border:1px solid rgba(100,100,120,.3);border-radius:6px}.card-list-keep[_ngcontent-%COMP%]   .keep-icon[_ngcontent-%COMP%]{font-size:11px;opacity:.7}.minimum-keep-input-list[_ngcontent-%COMP%]{width:45px;padding:3px 6px;border-radius:4px;border:1px solid rgba(100,120,150,.4);background:rgba(40,40,50,.9);color:#fff;font-size:12px;font-weight:600;text-align:center;outline:none;transition:all .2s ease}.minimum-keep-input-list[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.minimum-keep-input-list[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.card-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2 / 3;overflow:hidden;padding:10px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.pokemon-card-img[_ngcontent-%COMP%]{width:90%;object-fit:cover;object-position:center;border-radius:10px;transition:transform .3s ease,opacity .3s ease;background-color:#222}.card-item[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{transform:scale(1.05)}.pokemon-card-img[_ngcontent-%COMP%]:not([src]), .pokemon-card-img[src=""][_ngcontent-%COMP%]{opacity:.5;background:linear-gradient(45deg,#333,#555,#333);background-size:200% 200%;animation:_ngcontent-%COMP%_loading-shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loading-shimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.card-item.no-quantity[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.9}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(0%) opacity(.8)}.card-item.no-quantity[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{color:#888}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]:hover   .count-display[_ngcontent-%COMP%]{color:#bbb}.card-info[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pack-badges[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.pack-badge[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff;padding:2px 6px;border-radius:10px;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.ownership-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.count-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #555;border-radius:4px;background-color:#444;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;transition:all .2s ease}.count-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#555;border-color:#666}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.count-btn.decrease[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;border-color:#dc3545}.count-btn.increase[_ngcontent-%COMP%]:hover{background-color:#28a745;border-color:#28a745}.count-display[_ngcontent-%COMP%]{min-width:32px;padding:4px 10px;border-radius:6px;border:1px dashed #666;background:rgba(51,51,51,.65);color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.count-display[_ngcontent-%COMP%]:hover, .count-display[_ngcontent-%COMP%]:focus-visible{border-color:#007bff;background:rgba(0,123,255,.2);outline:none}.count-input[_ngcontent-%COMP%]{width:56px;padding:4px 8px;border-radius:6px;border:1px solid #777;background:rgba(24,24,24,.95);color:#fff;font-size:14px;font-weight:600;text-align:center;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.minimum-keep-controls[_ngcontent-%COMP%]{margin-top:8px;width:100%;background:linear-gradient(135deg,rgba(30,30,40,.95) 0%,rgba(20,20,30,.95) 100%);border:1px solid rgba(100,100,120,.4);border-radius:8px;padding:8px 10px;display:flex;flex-direction:row;align-items:center;gap:8px;box-shadow:0 2px 6px #0000004d}.keep-icon[_ngcontent-%COMP%]{font-size:13px;opacity:.8;flex-shrink:0}.lock-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:16px;padding:0;margin:0 4px 0 0;display:flex;align-items:center;justify-content:center;flex-shrink:0;opacity:.8;transition:opacity .2s,transform .1s}.lock-toggle-btn[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.lock-toggle-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.minimum-keep-label[_ngcontent-%COMP%]{font-size:11px;color:#b8b8c8;font-weight:600;text-transform:uppercase;letter-spacing:.5px;flex-shrink:0}.minimum-keep-input[_ngcontent-%COMP%]{flex:1;padding:6px 10px;border-radius:6px;border:1px solid rgba(100,120,150,.5);background:rgba(40,40,50,.9);color:#fff;font-size:14px;font-weight:700;text-align:center;outline:none;transition:all .2s ease;box-shadow:inset 0 1px 3px #0006}.minimum-keep-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;background:rgba(45,45,60,1);box-shadow:0 0 0 2px #4a9eff33,inset 0 1px 3px #0006}.minimum-keep-input[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#788caab3;background:rgba(45,45,55,.95)}.minimum-keep-input[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;background:rgba(30,30,35,.7)}.count-input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 6px #007bff4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.pokemon-card-img.lazy-loading[_ngcontent-%COMP%]{opacity:.6;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.pokemon-card-img.lazy-loaded[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}.pokemon-card-img.lazy-error[_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 1200px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (max-width: 768px){.collection-container[_ngcontent-%COMP%]{padding:15px}.filters-panel[_ngcontent-%COMP%]{border-radius:10px;padding:12px}.filters-header[_ngcontent-%COMP%]{margin-bottom:8px}.filters-row[_ngcontent-%COMP%]{gap:10px}.filter-select.compact[_ngcontent-%COMP%]{width:100%}.filter-input[_ngcontent-%COMP%]{min-width:0}.rarity-row[_ngcontent-%COMP%], .types-row[_ngcontent-%COMP%]{flex-direction:column}.chips-scroll[_ngcontent-%COMP%]{width:100%}.ownership[_ngcontent-%COMP%]{width:100%;justify-content:space-between;display:flex}.collection-actions[_ngcontent-%COMP%]   .actions-left[_ngcontent-%COMP%], .filters-panel.collapsed[_ngcontent-%COMP%]{display:none}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}.card-list-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.card-list-image[_ngcontent-%COMP%]{width:80px;height:112px}.card-list-details[_ngcontent-%COMP%]{width:100%}.card-list-controls[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;align-items:center}.ownership-controls[_ngcontent-%COMP%]{gap:8px}.filters-section[_ngcontent-%COMP%]{padding:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-box[_ngcontent-%COMP%]{max-width:100%}.group-header[_ngcontent-%COMP%]{padding:10px 0}.group-title[_ngcontent-%COMP%]{font-size:1.3rem;padding-left:24px}.group-title[_ngcontent-%COMP%]:before{font-size:1rem}}@media (max-width: 540px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.card-list-item[_ngcontent-%COMP%]{padding:10px 12px}.card-list-name[_ngcontent-%COMP%]{font-size:14px}.card-list-meta[_ngcontent-%COMP%]{font-size:11px}.filters-row[_ngcontent-%COMP%]{margin-bottom:8px}.reset-btn[_ngcontent-%COMP%]{width:100%}.count-display[_ngcontent-%COMP%], .count-input[_ngcontent-%COMP%]{width:48px}.filters-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.filter-label[_ngcontent-%COMP%]{font-size:12px}.group-title[_ngcontent-%COMP%]{font-size:1.15rem}.group-title[_ngcontent-%COMP%]:before{font-size:.9rem}}.fab-stack[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:24px;display:flex;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}.fab[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:1px solid rgba(255,255,255,.18);background:var(--header-gradient);color:#fff;font-size:18px;cursor:pointer;box-shadow:0 10px 24px #070c1859;display:inline-flex;align-items:center;justify-content:center;transition:transform .14s ease,box-shadow .14s ease,border-color .14s ease,filter .14s ease}.fab[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 14px 28px #070c1873;filter:brightness(1.05)}.fab-stack-left[_ngcontent-%COMP%]{position:fixed;left:24px;bottom:24px;display:none;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{right:16px;bottom:16px;gap:8px}.fab[_ngcontent-%COMP%]{width:44px;height:44px}.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.fab-stack-left[_ngcontent-%COMP%]{display:flex;left:16px;bottom:16px}}.fab.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex!important}.fab-stack-left[_ngcontent-%COMP%]{display:flex!important}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px}.modal-content.card-modal[_ngcontent-%COMP%]{background:#2a2d3a;border-radius:12px;max-width:500px;max-height:90vh;width:100%;position:relative;overflow:hidden;box-shadow:0 20px 40px #00000080}.modal-close[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:rgba(0,0,0,.7);border:none;border-radius:50%;width:32px;height:32px;color:#fff;font-size:18px;cursor:pointer;z-index:10001;display:flex;align-items:center;justify-content:center;transition:background .2s ease}.modal-close[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.9)}.card-modal-image[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px 20px 10px}.modal-card-image[_ngcontent-%COMP%]{max-width:100%;height:auto;max-height:60vh;border-radius:8px;box-shadow:0 8px 16px #0000004d}.card-modal-info[_ngcontent-%COMP%]{padding:10px 20px 20px;text-align:center}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px;font-weight:600}.modal-pack-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}.modal-pack-badges[_ngcontent-%COMP%]   .pack-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content.card-modal[_ngcontent-%COMP%]{max-width:100%;max-height:95vh}.modal-card-image[_ngcontent-%COMP%]{max-height:70vh}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}'],changeDetection:0}),t})();function M$(t,n){1&t&&(g(0,"div",9),Ye(1,"div",10),g(2,"p"),b(3,"Calculating pack suggestions..."),m()())}function T$(t,n){1&t&&(g(0,"div",11)(1,"p"),b(2,"Please sign in to get personalized pack suggestions."),m()())}function O$(t,n){if(1&t&&(g(0,"option",19),b(1),m()),2&t){const e=n.$implicit;x("value",e),y(1),rt(e)}}function I$(t,n){if(1&t){const e=xe();g(0,"div",38),A("click",function(){const i=z(e).$implicit,s=S(2).$implicit;return G(S(2).onRarityClick(s,i))}),g(1,"span",39),b(2),m(),g(3,"span",40),b(4),m(),g(5,"span",41),b(6),m()()}if(2&t){const e=n.$implicit,r=S(4);Ie("complete",100===e.percentage),y(1),x("title",r.getRarityDisplayName(e.rarity)),y(1),Me(" ",e.rarity," "),y(2),fr(" ",e.owned,"/",e.total," "),y(1),Ie("complete",100===e.percentage),y(1),Me(" ",e.percentage.toFixed(0),"% ")}}function A$(t,n){if(1&t&&(g(0,"div",35)(1,"h5"),b(2,"Rarity Breakdown:"),m(),g(3,"div",36),H(4,I$,7,9,"div",37),m()()),2&t){const e=S().$implicit;y(4),x("ngForOf",e.rarityBreakdown)}}function k$(t,n){if(1&t&&(g(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"h4",24),b(5),m()(),g(6,"div",25)(7,"span",26),b(8),m(),g(9,"span",27),b(10),m()()(),g(11,"div",28)(12,"div",29)(13,"span",30),b(14,"New Card Chance"),m(),g(15,"span",31),b(16),m()(),g(17,"div",29)(18,"span",30),b(19,"Missing Cards"),m(),g(20,"span",32),b(21),m()(),g(22,"div",29)(23,"span",30),b(24,"Collection"),m(),g(25,"span",33),b(26),m()()(),H(27,A$,5,1,"div",34),m()()),2&t){const e=n.$implicit,r=n.index;y(5),fr("",r+1,". ",e.packName,""),y(3),rt(e.setCode),y(2),rt(e.setName),y(6),Me("",e.newCardChance.toFixed(1),"%"),y(5),fr("",e.missingCards,"/",e.totalCards,""),y(5),Me("",e.percentage.toFixed(1),"% complete"),y(1),x("ngIf",e.rarityBreakdown.length>0)}}function P$(t,n){if(1&t){const e=xe();g(0,"div",12)(1,"div",13)(2,"h3"),b(3),m(),g(4,"select",14),A("ngModelChange",function(o){return z(e),G(S().selectedSeriesFilter=o)})("change",function(){return z(e),G(S().onSeriesFilterChange())}),g(5,"option",15),b(6,"Top 3 Suggestions"),m(),g(7,"optgroup",16),H(8,O$,2,2,"option",17),m()()(),H(9,k$,28,9,"div",18),m()}if(2&t){const e=S();y(3),Me("Recommended Packs (",e.packSuggestions.length," available)"),y(1),x("ngModel",e.selectedSeriesFilter),y(4),x("ngForOf",e.seriesList),y(1),x("ngForOf",e.packSuggestions)}}function R$(t,n){1&t&&(g(0,"div",42)(1,"p"),b(2,"\u{1f389} Congratulations! You have completed your collection according to the selected algorithm."),m(),g(3,"p"),b(4,"Try a different algorithm to find more cards to collect."),m()())}function N$(t,n){1&t&&(g(0,"span"),b(1,"\u{1f6ab}"),m())}function F$(t,n){1&t&&(g(0,"span"),b(1,"\u{1f4e6}"),m())}function L$(t,n){1&t&&(g(0,"span"),b(1,"\u2b50"),m())}function j$(t,n){1&t&&(g(0,"span"),b(1,"\u{1f48e}"),m())}function V$(t,n){1&t&&(g(0,"span"),b(1,"\u{1f451}"),m())}const $$=function(t,n){return{"fab-excluding":t,"fab-including":n}},U$=function(t,n,e){return{"fab-tradable":t,"fab-common":n,"fab-all":e}};let B$=(()=>{const n=class{constructor(r,o,i,s,a){this.pokemonDataService=r,this.dataManager=o,this.supabaseService=i,this.cdr=s,this.router=a,this.cards=[],this.sets=[],this.rarityMapping={},this.currentUser=null,this.ownedCards={},this.selectedAlgorithm="new-card-chance",this.excludeSpecialPacks=!0,this.rarityFilterMode="tradable",this.selectedSeriesFilter="top-3",this.seriesList=[],this.packSuggestions=[],this.isLoading=!0}ngOnInit(){this.loadData()}onRarityClick(r,o){const s=this.sets.find(a=>a.code===r.setCode)?.series||"all";this.router.navigate(["/collection"],{queryParams:{series:s,set:r.setCode,pack:r.packName,rarity:o.rarity}})}loadData(){var r=this;return C(function*(){r.isLoading=!0;try{r.currentUser=yield r.supabaseService.getCurrentUser();const o=yield r.pokemonDataService.loadAllData().toPromise();o&&(r.cards=o.cards,r.sets=o.sets,r.rarityMapping=o.rarities),r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id)),r.seriesList=Array.from(new Set(r.sets.map(i=>i.series))).sort(),r.calculateSuggestions()}catch(o){console.error("Error loading data:",o)}finally{r.isLoading=!1,r.cdr.markForCheck()}})()}onExcludeSpecialPacksChange(){this.calculateSuggestions(),this.cdr.markForCheck()}onRarityFilterChange(){this.rarityFilterMode="tradable"===this.rarityFilterMode?"common":"common"===this.rarityFilterMode?"all":"tradable",this.calculateSuggestions(),this.cdr.markForCheck()}onSeriesFilterChange(){this.calculateSuggestions(),this.cdr.markForCheck()}calculateSuggestions(){if(!this.cards.length||!this.sets.length)return;const r=[],o="top-3"===this.selectedSeriesFilter?this.sets:this.sets.filter(a=>a.series===this.selectedSeriesFilter),i=new Set;o.forEach(a=>{a.packs?.forEach(l=>{this.excludeSpecialPacks&&this.isSpecialPack(l)||i.add(l)})}),i.forEach(a=>{const l=this.calculatePackSuggestion(a);l&&r.push(l)});const s=r.sort((a,l)=>l.newCardChance-a.newCardChance);this.packSuggestions="top-3"===this.selectedSeriesFilter?s.slice(0,3):s}calculatePackSuggestion(r){let o=this.cards.filter(f=>f.packs&&f.packs.includes(r));if(0===o.length)return null;const i=this.sets.find(f=>f.packs&&f.packs.includes(r));if(!i)return null;if("tradable"===this.rarityFilterMode){const f=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606"];o=o.filter(p=>f.includes(p.rarity))}else if("common"===this.rarityFilterMode){const f=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606"];o=o.filter(p=>f.includes(p.rarity))}const s=o,l=s.filter(f=>0===this.getOwnedCount(f)).length,c=s.length,u=c>0?(c-l)/c*100:0,d=c>0?l/c*100:0,h=this.calculateRarityBreakdown(s);return{setCode:i.code,setName:i.name,packName:r,missingCards:l,totalCards:c,percentage:u,newCardChance:d,rarityBreakdown:h}}calculateRarityBreakdown(r){const o=[...new Set(r.map(s=>s.rarity))],i=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2606\u2606\u2606","\u{1f451}","\u2735","\u2735\u2735"];return o.sort((s,a)=>{const l=i.indexOf(s),c=i.indexOf(a);return(-1===l?999:l)-(-1===c?999:c)}),o.map(s=>{const a=r.filter(d=>d.rarity===s),l=a.filter(d=>this.getOwnedCount(d)>0).length,c=a.length;return{rarity:s,owned:l,total:c,percentage:c>0?l/c*100:0}})}getOwnedCount(r){return this.currentUser&&this.ownedCards[this.getCardId(r)]||0}loadOwnedCardsForUser(r){var o=this;return C(function*(){try{const{quantities:i}=yield o.supabaseService.syncUserCollection(r);o.ownedCards=i}catch(i){console.error("Error loading owned cards:",i),o.ownedCards={}}})()}getCardId(r){return`${r.set}-${r.number}`}isSpecialPack(r){return[/Deluxe/i,/vol/i].some(i=>i.test(r))}getRarityDisplayName(r){for(const[o,i]of Object.entries(this.rarityMapping))if(i.split(" - ")[0]===r)return i;return r}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(Qc),N(uD),N(rs),N(xi),N(xt))},n.\u0275cmp=Br({type:n,selectors:[["app-suggestion"]],decls:13,vars:20,consts:[[1,"suggestion-container"],[1,"filter-section"],["class","loading-state",4,"ngIf"],["class","no-user-state",4,"ngIf"],["class","suggestions-list",4,"ngIf"],["class","no-suggestions",4,"ngIf"],[1,"fab","fab-special",3,"ngClass","title","click"],[4,"ngIf"],[1,"fab","fab-rarity",3,"ngClass","title","click"],[1,"loading-state"],[1,"spinner"],[1,"no-user-state"],[1,"suggestions-list"],[1,"suggestions-header-row"],[1,"set-filter",3,"ngModel","ngModelChange","change"],["value","top-3"],["label","Series"],[3,"value",4,"ngFor","ngForOf"],["class","suggestion-item",4,"ngFor","ngForOf"],[3,"value"],[1,"suggestion-item"],[1,"suggestion-content"],[1,"suggestion-header"],[1,"header-left"],[1,"pack-name"],[1,"header-right"],[1,"set-code"],[1,"set-name"],[1,"suggestion-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","chance"],[1,"stat-value","missing"],[1,"stat-value","percentage"],["class","rarity-breakdown",4,"ngIf"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-item clickable","tabindex","0",3,"complete","click",4,"ngFor","ngForOf"],["tabindex","0",1,"rarity-item","clickable",3,"click"],[1,"rarity-symbol",3,"title"],[1,"rarity-count"],[1,"rarity-percentage"],[1,"no-suggestions"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"div",1),H(2,M$,4,0,"div",2),H(3,T$,3,0,"div",3),H(4,P$,10,4,"div",4),m(),H(5,R$,5,0,"div",5),g(6,"button",6),A("click",function(){return i.excludeSpecialPacks=!i.excludeSpecialPacks,i.onExcludeSpecialPacksChange()}),H(7,N$,2,0,"span",7),H(8,F$,2,0,"span",7),m(),g(9,"button",8),A("click",function(){return i.onRarityFilterChange()}),H(10,L$,2,0,"span",7),H(11,j$,2,0,"span",7),H(12,V$,2,0,"span",7),m()()),2&o&&(y(2),x("ngIf",i.isLoading),y(1),x("ngIf",!i.isLoading&&!i.currentUser),y(1),x("ngIf",!i.isLoading&&i.currentUser&&i.packSuggestions.length>0),y(1),x("ngIf",!i.isLoading&&i.currentUser&&0===i.packSuggestions.length),y(1),x("ngClass",Di(13,$$,i.excludeSpecialPacks,!i.excludeSpecialPacks))("title",i.excludeSpecialPacks?"Excluding Special Packs":"Including Special Packs"),y(1),x("ngIf",i.excludeSpecialPacks),y(1),x("ngIf",!i.excludeSpecialPacks),y(1),x("ngClass",ah(16,U$,"tradable"===i.rarityFilterMode,"common"===i.rarityFilterMode,"all"===i.rarityFilterMode))("title","tradable"===i.rarityFilterMode?"Tradable cards: \u25ca-\u25ca\u25ca\u25ca\u25ca, \u2606, \u2606\u2606":"common"===i.rarityFilterMode?"Common only: \u25ca-\u25ca\u25ca\u25ca\u25ca, \u2606":"All rarities"),y(1),x("ngIf","tradable"===i.rarityFilterMode),y(1),x("ngIf","common"===i.rarityFilterMode),y(1),x("ngIf","all"===i.rarityFilterMode))},dependencies:[ec,tc,Ti,Dc,Sc,Ni,ra,Ri],styles:['.suggestion-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:var(--text)}.suggestion-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:8px;font-size:2.2rem}.suggestion-header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem;margin:0}.filter-section[_ngcontent-%COMP%]{background:var(--surface);border-radius:12px;padding:15px;margin-bottom:20px;border:1px solid var(--border)}.filter-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;flex-wrap:wrap}.checkbox-option.compact[_ngcontent-%COMP%]{padding:6px 8px;gap:8px}.checkbox-option.compact[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{transform:scale(.9)}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.9rem}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.set-filter[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;background:var(--surface) url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%236c757d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>\') no-repeat right 8px center;border:1px solid var(--border);border-radius:8px;padding:8px 32px 8px 12px;font-size:.9rem;color:var(--text);cursor:pointer}.set-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px #5ba8ff26}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:15px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.radio-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-label[_ngcontent-%COMP%]{color:var(--text)}.radio-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.radio-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.radio-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.radio-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.filter-options[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid var(--border)}.checkbox-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:12px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.checkbox-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkbox-label[_ngcontent-%COMP%]{color:var(--text)}.checkbox-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.checkbox-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.loading-state[_ngcontent-%COMP%], .no-user-state[_ngcontent-%COMP%], .no-suggestions[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background:var(--surface);border:1px solid var(--border);border-radius:12px;margin:20px 0}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.08);border-top:4px solid var(--accent);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.suggestions-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text);margin-bottom:20px;font-size:1.4rem}.suggestions-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}.suggestion-item[_ngcontent-%COMP%]{display:block;background:rgb(14 21 37 / 85%);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:20px;transition:all .2s ease;box-shadow:0 2px 6px #00000040}.suggestion-content[_ngcontent-%COMP%]{width:100%}.suggestion-header[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;text-align:right}.pack-name[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text);margin:0;font-weight:1000;text-align:left}.set-code[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:2px 8px;border-radius:4px;font-size:.8rem;font-weight:500}.set-name[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem}.suggestion-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:15px}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-muted);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.stat-value.score[_ngcontent-%COMP%]{color:#3498db}.stat-value.chance[_ngcontent-%COMP%]{color:#e74c3c}.stat-value.missing[_ngcontent-%COMP%]{color:#f39c12}.stat-value.percentage[_ngcontent-%COMP%]{color:#27ae60}.rarity-breakdown[_ngcontent-%COMP%]{margin-top:15px;padding-top:15px;border-top:1px solid var(--border)}.rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 10px;color:var(--text);font-size:.9rem;font-weight:600}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px}.rarity-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:8px;background:rgba(255,255,255,.03);border-radius:6px;border:1px solid var(--border);gap:4px}.rarity-item.complete[_ngcontent-%COMP%]{background:rgba(39,174,96,.15);border-color:#27ae60}.rarity-item.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:transform .15s ease,box-shadow .15s ease}.rarity-item.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-1px)}.rarity-symbol[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--text)}.rarity-count[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);font-weight:500}.rarity-percentage[_ngcontent-%COMP%]{font-size:.75rem;color:#f39c12;font-weight:600}.rarity-percentage.complete[_ngcontent-%COMP%]{color:#27ae60}.exclude-toggle-fixed[_ngcontent-%COMP%]{position:fixed;top:16px;right:16px;z-index:1500;background:var(--surface);border-color:var(--border);box-shadow:0 4px 12px #0003}@media (max-width: 768px){.exclude-toggle-fixed[_ngcontent-%COMP%]{top:12px;right:12px;transform:scale(.95)}}@media (max-width: 768px){.suggestion-container[_ngcontent-%COMP%]{padding:15px}.suggestion-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.header-left[_ngcontent-%COMP%]{width:100%}.header-right[_ngcontent-%COMP%]{width:100%;text-align:left}.set-name[_ngcontent-%COMP%]{text-align:left;margin-left:0;width:100%}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.algorithm-selector[_ngcontent-%COMP%]{gap:8px}.radio-option[_ngcontent-%COMP%]{padding:12px}.filter-toolbar[_ngcontent-%COMP%]{justify-content:space-between}.rarity-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:6px}.rarity-item[_ngcontent-%COMP%]{padding:6px}}@media (max-width: 480px){.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.pack-name[_ngcontent-%COMP%]{font-size:1.1rem}}.fab[_ngcontent-%COMP%]{position:fixed;right:20px;width:56px;height:56px;border-radius:50%;color:#fff;border:none;font-size:1.5rem;cursor:pointer;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;z-index:1000;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.fab-special[_ngcontent-%COMP%]{bottom:20px}.fab-rarity[_ngcontent-%COMP%]{bottom:90px}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 16px #0006}.fab.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c 0%,#c0392b 100%)}.fab-tradable[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12 0%,#e67e22 100%)}.fab-common[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db 0%,#2980b9 100%)}.fab-all[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6 0%,#8e44ad 100%)}.fab-excluding[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c 0%,#c0392b 100%)}.fab-including[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60 0%,#229954 100%)}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:2000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:var(--surface-strong);color:var(--text);border:1px solid var(--border);border-radius:12px;max-width:800px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0006}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text);font-size:1.5rem}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8rem;color:#7f8c8d;cursor:pointer;padding:0;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.close-button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.06);color:var(--text)}.modal-body[_ngcontent-%COMP%]{padding:24px}.modal-filter[_ngcontent-%COMP%]{margin-top:12px}.algorithm-detail[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:20px;border-bottom:1px solid var(--border)}.algorithm-detail[_ngcontent-%COMP%]:last-child, .scoring-detail[_ngcontent-%COMP%]:last-child, .filter-detail[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.algorithm-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1.2rem}.algorithm-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text-muted);line-height:1.6}.algorithm-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:8px 0 0;padding-left:20px;color:#495057}.algorithm-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;line-height:1.5}.rarity-points[_ngcontent-%COMP%]{background:rgba(255,255,255,.05);padding:16px;border-radius:8px;margin-top:12px}.rarity-points[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1rem}.points-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px}.points-grid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--surface);padding:6px 10px;border-radius:4px;font-size:.85rem;color:var(--text);border:1px solid var(--border)}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end}.modal-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:10px 20px;border-radius:6px;font-size:1rem;cursor:pointer;transition:background .2s ease}.modal-button[_ngcontent-%COMP%]:hover{filter:brightness(.9)}.algorithm-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{max-height:95vh}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:16px}.points-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fab[_ngcontent-%COMP%]{bottom:16px;right:16px;width:48px;height:48px;font-size:1.3rem}}'],changeDetection:0}),t})();function H$(t,n){1&t&&(g(0,"span"),b(1,"No sets selected"),m())}function z$(t,n){1&t&&(g(0,"span"),b(1,"(Multiple select)"),m())}function G$(t,n){if(1&t){const e=xe();g(0,"button",39),A("click",function(){const i=z(e).$implicit;return G(S(2).toggleLFSet(i))}),g(1,"span",40),b(2),m(),g(3,"span"),b(4),m()()}if(2&t){const e=n.$implicit,r=S(2);Ie("selected",r.isLFSetSelected(e)),y(2),rt(r.isLFSetSelected(e)?"\u2714":""),y(2),fr("",e," \u2013 ",r.getSetName(e),"")}}function q$(t,n){if(1&t){const e=xe();g(0,"div",34)(1,"div",35)(2,"button",36),A("click",function(){return z(e),G(S().clearLFsets())}),b(3,"Clear"),m(),g(4,"button",36),A("click",function(){return z(e),G(S().selectAllLFsets())}),b(5,"All"),m()(),g(6,"div",37),H(7,G$,5,5,"button",38),m()()}if(2&t){const e=S();y(7),x("ngForOf",e.availableTradeSets)}}function W$(t,n){1&t&&(g(0,"span"),b(1,"No sets selected"),m())}function K$(t,n){1&t&&(g(0,"span"),b(1,"(Multiple select)"),m())}function J$(t,n){if(1&t){const e=xe();g(0,"button",39),A("click",function(){const i=z(e).$implicit;return G(S(2).toggleFTSet(i))}),g(1,"span",40),b(2),m(),g(3,"span"),b(4),m()()}if(2&t){const e=n.$implicit,r=S(2);Ie("selected",r.isFTSetSelected(e)),y(2),rt(r.isFTSetSelected(e)?"\u2714":""),y(2),fr("",e," \u2013 ",r.getSetName(e),"")}}function Y$(t,n){if(1&t){const e=xe();g(0,"div",34)(1,"div",35)(2,"button",36),A("click",function(){return z(e),G(S().clearFTsets())}),b(3,"Clear"),m(),g(4,"button",36),A("click",function(){return z(e),G(S().selectAllFTsets())}),b(5,"All"),m()(),g(6,"div",37),H(7,J$,5,5,"button",38),m()()}if(2&t){const e=S();y(7),x("ngForOf",e.availableTradeSets)}}function Q$(t,n){if(1&t){const e=xe();g(0,"button",41),A("click",function(){const i=z(e).$implicit;return G(S().toggleTradeRarity(i.symbol))}),b(1),m()}if(2&t){const e=n.$implicit;Ie("active",S().isTradeRaritySelected(e.symbol)),x("title",e.displayName),y(1),Me(" ",e.symbol," ")}}function Z$(t,n){if(1&t){const e=xe();g(0,"div",42)(1,"label",43),b(2,"Minimum Keep Count (>)"),m(),g(3,"input",44),A("ngModelChange",function(o){return z(e),G(S().overrideMinKeepValue=o)}),m()()}if(2&t){const e=S();y(3),x("ngModel",e.overrideMinKeepValue)}}function X$(t,n){1&t&&(g(0,"div",45),b(1,"\u26a0\ufe0f For discord, please choose only 1 rarity."),m())}function e3(t,n){1&t&&(g(0,"div",45),b(1,"\u26a0\ufe0f For foil trade, please choose only 1 rarity. It will ignore the pack selection."),m())}function t3(t,n){if(1&t){const e=xe();g(0,"textarea",46),A("ngModelChange",function(o){return z(e),G(S().generatedText=o)}),m()}2&t&&x("ngModel",S().generatedText)}function n3(t,n){1&t&&(g(0,"div",47),b(1,' Click "Generate" to create trade text '),m())}const ZD=function(t,n){return{"fa-chevron-down":t,"fa-chevron-up":n}};let r3=(()=>{const n=class{constructor(r,o,i){this.supabaseService=r,this.pokemonDataService=o,this.rarityService=i,this.currentUser=null,this.cards=[],this.sets=[],this.ownedCards={},this.cardMinimumKeepCount={},this.cardAllowTrade={},this.selectedLFsets=[],this.selectedFTsets=[],this.availableTradeSets=[],this.selectedTradeRarities=[],this.outputFormat="details",this.tradeFriendCode="",this.tradeTemplateText="Please ping me if there is any possible trades. \nENGLISH cards only please.",this.excludePromo=!0,this.excludeDeluxe=!0,this.overrideMinKeepEnabled=!1,this.overrideMinKeepValue=3,this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.generatedText="",this.loading=!0}ngOnInit(){var r=this;return C(function*(){yield r.loadData()})()}loadData(){var r=this;return C(function*(){r.loading=!0;try{if(r.currentUser=yield r.supabaseService.getCurrentUser(),r.currentUser){r.tradeFriendCode=r.currentUser.friend_code||"";const{quantities:i,minimumKeepCounts:s,allowTrade:a}=yield r.supabaseService.syncUserCollection(r.currentUser.id);r.ownedCards=i,r.cardMinimumKeepCount=s,r.cardAllowTrade=a}const o=yield r.pokemonDataService.loadAllData().toPromise();o&&(r.cards=o.cards,r.sets=o.sets),r.updateAvailableTradeSets(),r.selectedLFsets=[...r.availableTradeSets],r.selectedFTsets=[...r.availableTradeSets]}catch(o){console.error("Error loading data:",o)}r.loading=!1})()}updateAvailableTradeSets(){let r=Array.from(new Set(this.cards.map(o=>o.set))).sort();this.excludePromo&&(r=r.filter(o=>!o.startsWith("P-"))),this.excludeDeluxe&&(r=r.filter(o=>"A4B"!==o)),this.availableTradeSets=r,this.selectedLFsets=this.selectedLFsets.filter(o=>this.availableTradeSets.includes(o)),this.selectedFTsets=this.selectedFTsets.filter(o=>this.availableTradeSets.includes(o))}isSpecialSet(r){return"PROMO"===r||r.startsWith("A")}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.name:r}getSetShortName(r){const o=this.sets.find(i=>i.code===r);return o?o.shortName:r}getAvailableTradeRaritySymbols(){return this.rarityService.getUnifiedRarities()}isTradeRaritySelected(r){return this.selectedTradeRarities.includes(r)}toggleTradeRarity(r){const o=this.selectedTradeRarities.indexOf(r);o>-1?this.selectedTradeRarities.splice(o,1):this.selectedTradeRarities.push(r)}clearTradeRarities(){this.selectedTradeRarities=[]}isLFSetSelected(r){return this.selectedLFsets.includes(r)}toggleLFSet(r){const o=this.selectedLFsets.indexOf(r);o>-1?this.selectedLFsets.splice(o,1):this.selectedLFsets.push(r)}selectAllLFsets(){this.selectedLFsets=[...this.availableTradeSets]}clearLFsets(){this.selectedLFsets=[]}isFTSetSelected(r){return this.selectedFTsets.includes(r)}toggleFTSet(r){const o=this.selectedFTsets.indexOf(r);o>-1?this.selectedFTsets.splice(o,1):this.selectedFTsets.push(r)}selectAllFTsets(){this.selectedFTsets=[...this.availableTradeSets]}clearFTsets(){this.selectedFTsets=[]}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}getCardMinimumKeepCount(r){return this.cardMinimumKeepCount[this.getCardId(r)]||0}isCardAllowTrade(r){const o=this.getCardId(r);return!1!==this.cardAllowTrade[o]}generateTradeText(){const r=this.selectedTradeRarities.length>0?this.selectedTradeRarities:[],o="foil-trade"===this.outputFormat,i=this.cards.filter(a=>{if(o){if(!a.isFoil)return!1}else if(this.selectedLFsets.length>0&&!this.selectedLFsets.includes(a.set))return!1;const l=a.rarity,c=l?this.rarityService.getSymbol(l):"";return!(r.length>0&&(!c||!r.includes(c)))&&0===this.getOwnedCount(a)}),s=this.cards.filter(a=>{if(!o&&this.selectedFTsets.length>0&&!this.selectedFTsets.includes(a.set))return!1;const l=a.rarity,c=l?this.rarityService.getSymbol(l):"";return!(r.length>0&&(!c||!r.includes(c)))&&this.getOwnedCount(a)>(this.overrideMinKeepEnabled?this.overrideMinKeepValue:this.getCardMinimumKeepCount(a))});this.generatedText=this.formatTradeText(i,s)}formatTradeText(r,o){let i="";return i+="foil-trade"===this.outputFormat?this.formatFoilTrade(r,o):"discord"===this.outputFormat?this.formatDiscord(r,o):this.formatDetails(r,o),i+="\n",this.tradeTemplateText&&(i+=this.tradeTemplateText+"\n\n"),this.currentUser?.username&&(i+=`IGN: ${this.currentUser.username}\n`),this.tradeFriendCode&&(i+=`Friend code: ${this.tradeFriendCode}`),i}formatFoilTrade(r,o){let i="**Looking For (Foil Only)**\n";if(r.length>0){const s=this.groupBySet(r);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(d=>`${d.label.eng} (foil)`).join(", ")}\n`}else i+="None\n";if(i+="\n**For Trade**\n",o.length>0){const s=this.groupBySet(o);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(d=>{const h=d.label.eng;return d.isFoil?`${h} (foil)`:h}).join(", ")}\n`}else i+="None\n";return i}formatDiscord(r,o){let i="**Looking For**\n";if(r.length>0){const s=this.groupBySet(r);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(u=>u.label.eng).join(", ")}\n`}else i+="None\n";if(i+="\n**For Trade**\n",o.length>0){const s=this.groupBySet(o);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(u=>u.label.eng).join(", ")}\n`}else i+="None\n";return i}formatDetails(r,o){let i="**Looking For**\n";if(r.length>0){const s=this.groupBySet(r);for(const[a,l]of Object.entries(s)){const c=this.getSetShortName(a);i+=`\n[${c}]\n`,l.forEach(u=>{const d=this.rarityService.getSymbol(u.rarity);i+=`${d} ${a}-${u.number} - ${u.label.eng}\n`})}}else i+="None\n";if(i+="\n**For Trade**\n",o.length>0){const s=this.groupBySet(o);for(const[a,l]of Object.entries(s)){const c=this.getSetShortName(a);i+=`\n[${c}]\n`,l.forEach(u=>{const d=this.rarityService.getSymbol(u.rarity);i+=`${d} ${a}-${u.number} - ${u.label.eng}\n`})}}else i+="None\n";return i}groupBySet(r){return r.reduce((o,i)=>(o[i.set]||(o[i.set]=[]),o[i.set].push(i),o),{})}copyToClipboard(){navigator.clipboard.writeText(this.generatedText).then(()=>{}).catch(r=>{console.error("Failed to copy:",r),alert("Failed to copy to clipboard")})}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(rs),N(Qc),N(KD))},n.\u0275cmp=Br({type:n,selectors:[["app-trade-gen"]],decls:80,vars:30,consts:[[1,"trade-gen-container"],[1,"trade-gen-content"],[1,"config-panel"],[1,"config-section"],[1,"section-label"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"multiselect-dropdown"],["type","button",1,"dropdown-trigger",3,"click"],[4,"ngIf"],[1,"fa",3,"ngClass"],["class","dropdown-menu",4,"ngIf"],[1,"rarity-chips"],["type","button",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelChange"],["class","override-input-group",4,"ngIf"],["for","friend-code",1,"section-label"],["type","text","id","friend-code","placeholder","Friend code from your profile",1,"text-input",3,"ngModel","ngModelChange"],["for","template-text",1,"section-label"],["id","template-text","rows","3","placeholder","Add an extra note...",1,"textarea-input",3,"ngModel","ngModelChange"],[1,"select-input",3,"ngModel","ngModelChange"],["value","details"],["value","discord"],["value","foil-trade"],["class","warning-text",4,"ngIf"],["type","button",1,"btn-primary",3,"disabled","click"],[1,"output-panel"],[1,"output-header"],["type","button",1,"btn-copy",3,"disabled","click"],[1,"output-content"],["class","output-text",3,"ngModel","ngModelChange",4,"ngIf"],["class","output-placeholder",4,"ngIf"],[1,"dropdown-menu"],[1,"dropdown-actions"],["type","button",1,"btn-small",3,"click"],[1,"dropdown-options"],["type","button","class","dropdown-option",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"dropdown-option",3,"click"],[1,"checkmark"],["type","button",1,"chip",3,"title","click"],[1,"override-input-group"],["for","override-min-keep",1,"section-label"],["type","number","id","override-min-keep","min","0","placeholder","0",1,"text-input",3,"ngModel","ngModelChange"],[1,"warning-text"],[1,"output-text",3,"ngModel","ngModelChange"],[1,"output-placeholder"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),b(4,"Trade Generator"),m(),g(5,"div",3)(6,"label",4),b(7,"Pack Filters"),m(),g(8,"div",5)(9,"label",6)(10,"input",7),A("ngModelChange",function(a){return i.excludePromo=a})("change",function(){return i.updateAvailableTradeSets()}),m(),g(11,"span"),b(12,"Exclude Promo"),m()(),g(13,"label",6)(14,"input",7),A("ngModelChange",function(a){return i.excludeDeluxe=a})("change",function(){return i.updateAvailableTradeSets()}),m(),g(15,"span"),b(16,"Exclude Deluxe Pack"),m()()()(),g(17,"div",3)(18,"label",4),b(19,"Include sets (Looking For)"),m(),g(20,"div",8)(21,"button",9),A("click",function(){return i.lfSetDropdownOpen=!i.lfSetDropdownOpen}),H(22,H$,2,0,"span",10),H(23,z$,2,0,"span",10),Ye(24,"i",11),m(),H(25,q$,8,1,"div",12),m()(),g(26,"div",3)(27,"label",4),b(28,"Include sets (For Trade)"),m(),g(29,"div",8)(30,"button",9),A("click",function(){return i.ftSetDropdownOpen=!i.ftSetDropdownOpen}),H(31,W$,2,0,"span",10),H(32,K$,2,0,"span",10),Ye(33,"i",11),m(),H(34,Y$,8,1,"div",12),m()(),g(35,"div",3)(36,"label",4),b(37,"Include rarities:"),m(),g(38,"div",13)(39,"button",14),A("click",function(){return i.clearTradeRarities()}),b(40,"ALL"),m(),H(41,Q$,2,4,"button",15),m()(),g(42,"div",3)(43,"label",6)(44,"input",16),A("ngModelChange",function(a){return i.overrideMinKeepEnabled=a}),m(),g(45,"span"),b(46,"Override minimum keep count"),m()(),H(47,Z$,4,1,"div",17),m(),g(48,"div",3)(49,"label",18),b(50,"Friend Code"),m(),g(51,"input",19),A("ngModelChange",function(a){return i.tradeFriendCode=a}),m()(),g(52,"div",3)(53,"label",20),b(54,"Template text:"),m(),g(55,"textarea",21),A("ngModelChange",function(a){return i.tradeTemplateText=a}),m()(),g(56,"div",3)(57,"label",4),b(58,"Output Format"),m(),g(59,"select",22),A("ngModelChange",function(a){return i.outputFormat=a}),g(60,"option",23),b(61,"Details Trade"),m(),g(62,"option",24),b(63,"Discord Trade"),m(),g(64,"option",25),b(65,"Foil Trade"),m()(),H(66,X$,2,0,"div",26),H(67,e3,2,0,"div",26),m(),g(68,"div",3)(69,"button",27),A("click",function(){return i.generateTradeText()}),b(70," Generate "),m()()(),g(71,"div",28)(72,"div",29)(73,"h3"),b(74,"Generated Trade Text"),m(),g(75,"button",30),A("click",function(){return i.copyToClipboard()}),b(76," Copy to clipboard "),m()(),g(77,"div",31),H(78,t3,1,1,"textarea",32),H(79,n3,2,0,"div",33),m()()()()),2&o&&(y(10),x("ngModel",i.excludePromo),y(4),x("ngModel",i.excludeDeluxe),y(8),x("ngIf",0===i.selectedLFsets.length),y(1),x("ngIf",i.selectedLFsets.length>0),y(1),x("ngClass",Di(24,ZD,!i.lfSetDropdownOpen,i.lfSetDropdownOpen)),y(1),x("ngIf",i.lfSetDropdownOpen),y(6),x("ngIf",0===i.selectedFTsets.length),y(1),x("ngIf",i.selectedFTsets.length>0),y(1),x("ngClass",Di(27,ZD,!i.ftSetDropdownOpen,i.ftSetDropdownOpen)),y(1),x("ngIf",i.ftSetDropdownOpen),y(5),Ie("active",0===i.selectedTradeRarities.length),y(2),x("ngForOf",i.getAvailableTradeRaritySymbols()),y(3),x("ngModel",i.overrideMinKeepEnabled),y(3),x("ngIf",i.overrideMinKeepEnabled),y(4),x("ngModel",i.tradeFriendCode),y(4),x("ngModel",i.tradeTemplateText),y(4),x("ngModel",i.outputFormat),y(7),x("ngIf","discord"==i.outputFormat),y(1),x("ngIf","foil-trade"==i.outputFormat),y(2),x("disabled",i.loading),y(6),x("disabled",!i.generatedText),y(3),x("ngIf",i.generatedText),y(1),x("ngIf",!i.generatedText))},dependencies:[ec,tc,Ti,Dc,Sc,Ai,wc,uc,Ni,ra,Ec,Ri],styles:[".trade-gen-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;min-height:100vh;color:#fff}.trade-gen-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:400px 1fr;gap:20px;height:calc(100vh - 100px)}.config-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,30,40,.95) 0%,rgba(20,20,30,.95) 100%);border:1px solid rgba(100,100,120,.4);border-radius:12px;padding:24px;overflow-y:auto;box-shadow:0 4px 12px #0000004d}.config-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 24px;font-size:24px;font-weight:600;color:#fff}.config-section[_ngcontent-%COMP%]{margin-bottom:20px}.section-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#b8b8c8;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#ddd;cursor:pointer;-webkit-user-select:none;user-select:none}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#4a9eff}.checkbox-label[_ngcontent-%COMP%]:hover{color:#fff}.override-input-group[_ngcontent-%COMP%]{margin-top:12px}.multiselect-dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-trigger[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:all .2s ease}.dropdown-trigger[_ngcontent-%COMP%]:hover{border-color:#788caab3;background:rgba(45,45,55,.95)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 4px);background:#1e2533;border:1px solid rgba(255,255,255,.18);border-radius:10px;padding:8px;box-shadow:0 6px 16px #00000073;z-index:50;max-height:300px;overflow-y:auto}.dropdown-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,.1)}.btn-small[_ngcontent-%COMP%]{padding:4px 12px;background:rgba(60,60,70,.8);border:1px solid rgba(100,120,150,.4);border-radius:6px;color:#ddd;font-size:12px;cursor:pointer;transition:all .2s ease}.btn-small[_ngcontent-%COMP%]:hover{background:rgba(70,70,80,.9);border-color:#788caa99}.dropdown-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.dropdown-option[_ngcontent-%COMP%]{width:100%;padding:8px 12px;background:transparent;border:none;border-radius:6px;color:#ddd;font-size:13px;text-align:left;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s ease}.dropdown-option[_ngcontent-%COMP%]:hover{background:rgba(60,60,70,.6)}.dropdown-option.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);color:#fff}.checkmark[_ngcontent-%COMP%]{width:20px;font-size:12px;font-weight:700}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(100,120,150,.4);border-radius:6px;background:rgba(40,40,50,.8);color:#cfd6e4;font-size:13px;cursor:pointer;transition:all .2s ease}.chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);border-color:#7056b1;color:#fff}.warning-text[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#fa0;display:flex;align-items:center;gap:4px}.text-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;outline:none;transition:all .2s ease}.text-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.textarea-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;font-family:inherit;resize:vertical;outline:none;transition:all .2s ease}.textarea-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.select-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;cursor:pointer;outline:none;transition:all .2s ease}.select-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:12px 20px;background:linear-gradient(135deg,#7056B1,#6C80EA);border:1px solid #7056B1;border-radius:8px;color:#fff;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s ease;text-transform:uppercase;letter-spacing:.5px}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#6046A1,#5C70DA);transform:translateY(-1px);box-shadow:0 4px 12px #7056b166}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.output-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,30,40,.95) 0%,rgba(20,20,30,.95) 100%);border:1px solid rgba(100,100,120,.4);border-radius:12px;display:flex;flex-direction:column;box-shadow:0 4px 12px #0000004d;overflow:hidden}.output-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid rgba(100,100,120,.3)}.output-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#fff}.btn-copy[_ngcontent-%COMP%]{padding:8px 16px;background:rgba(40,167,69,.2);border:1px solid #28a745;border-radius:6px;color:#28a745;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}.btn-copy[_ngcontent-%COMP%]:hover:not(:disabled){background:rgba(40,167,69,.3);transform:translateY(-1px)}.btn-copy[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.output-content[_ngcontent-%COMP%]{flex:1;padding:24px;overflow:hidden;display:flex;flex-direction:column}.output-text[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:20px;background:rgba(20,20,30,.8);border:1px solid rgba(100,100,120,.3);border-radius:8px;color:#e0e0e0;font-family:Consolas,Monaco,Courier New,monospace;font-size:13px;line-height:1.6;white-space:pre-wrap;word-wrap:break-word;resize:none;outline:none;box-sizing:border-box}.output-text[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.output-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;color:#666;font-size:16px;font-style:italic}@media (max-width: 1024px){.trade-gen-content[_ngcontent-%COMP%]{grid-template-columns:1fr;height:auto}.config-panel[_ngcontent-%COMP%]{max-height:none}.output-panel[_ngcontent-%COMP%]{min-height:400px}}@media (max-width: 768px){.trade-gen-container[_ngcontent-%COMP%]{padding:15px}.config-panel[_ngcontent-%COMP%], .output-panel[_ngcontent-%COMP%]{padding:16px}.output-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.btn-copy[_ngcontent-%COMP%]{width:100%}}"]}),t})();function o3(t,n){if(1&t&&(g(0,"div",19),b(1),m()),2&t){const e=S();y(1),Me(" ",e.error," ")}}function i3(t,n){1&t&&Ye(0,"span",20)}function l3(t,n){if(1&t){const e=xe();g(0,"div",18)(1,"span",19),b(2),m(),g(3,"button",20),A("click",function(){return z(e),G(S().signOut())}),b(4,"Sign Out"),m()()}if(2&t){const e=S();y(2),Me("\u{1f464} ",e.currentUser.username,"")}}function c3(t,n){if(1&t&&(g(0,"div",21)(1,"span",19),b(2),m()()),2&t){const e=S();y(2),Me("\u{1f464} ",e.currentUser.username,"")}}function u3(t,n){if(1&t){const e=xe();g(0,"button",22),A("click",function(){z(e);const o=S();return o.signOut(),G(o.closeMobileMenu())}),b(1," \u{1f6aa} Sign Out "),m()}}const d3=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:(()=>{const n=class{constructor(r,o,i){this.supabaseService=r,this.router=o,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/collection"}ngOnInit(){this.supabaseService.isSignedIn()?this.router.navigate([this.returnUrl]):this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/collection"}get isFormValid(){return this.username.trim().length>0&&this.password.trim().length>0}onSubmit(){var r=this;return C(function*(){if(r.isFormValid){r.loading=!0,r.error="";try{const{user:o,error:i}=yield r.supabaseService.signIn(r.username.trim(),r.password.trim());i?(r.error=i,i.includes("Please wait a moment")&&(r.error+=" This usually resolves itself quickly.")):o&&r.router.navigate([r.returnUrl])}catch(o){if(console.error("Sign in error:",o),o&&"object"==typeof o&&"message"in o){const i=o.message;r.error=i.includes("NavigatorLockAcquireTimeoutError")||i.includes("lock")?"Please wait a moment and try signing in again.":"An unexpected error occurred"}else r.error="An unexpected error occurred"}finally{r.loading=!1}}else r.error="Please enter both username and password"})()}onUsernameChange(){this.error=""}onPasswordChange(){this.error=""}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(rs),N(xt),N(ro))},n.\u0275cmp=Br({type:n,selectors:[["app-signin"]],decls:26,vars:8,consts:[[1,"signin-container"],[1,"signin-card"],[1,"signin-header"],[1,"signin-title"],[1,"signin-subtitle"],[1,"signin-form",3,"ngSubmit"],["signinForm","ngForm"],[1,"form-group"],["for","username"],["id","username","name","username","type","text","placeholder","Enter your username","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["usernameInput","ngModel"],["for","password"],["id","password","name","password","type","password","placeholder","Enter your password","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["passwordInput","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"signin-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"signin-footer"],[1,"invite-note"],[1,"error-message"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),b(4,"\u{1f0cf} Pokemon TCG Pocket"),m(),g(5,"p",4),b(6,"Collection Manager"),m()(),g(7,"form",5,6),A("ngSubmit",function(){return i.onSubmit()}),g(9,"div",7)(10,"label",8),b(11,"Username"),m(),g(12,"input",9,10),A("ngModelChange",function(a){return i.username=a})("input",function(){return i.onUsernameChange()}),m()(),g(14,"div",7)(15,"label",11),b(16,"Password"),m(),g(17,"input",12,13),A("ngModelChange",function(a){return i.password=a})("input",function(){return i.onPasswordChange()}),m()(),H(19,o3,2,1,"div",14),g(20,"button",15),H(21,i3,1,0,"span",16),b(22),m()(),g(23,"div",17)(24,"p",18),b(25," \u{1f4e7} This is an invite-only system. Contact your administrator if you need access. "),m()()()()),2&o){const s=Ls(8);y(12),x("ngModel",i.username)("disabled",i.loading),y(5),x("ngModel",i.password)("disabled",i.loading),y(2),x("ngIf",i.error),y(1),x("disabled",i.loading||!s.valid),y(1),x("ngIf",i.loading),y(1),Me(" ",i.loading?"Signing In...":"Sign In"," ")}},dependencies:[Ti,P0,Ai,ra,v0,xc,Ri,bc],styles:[".signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px}.signin-card[_ngcontent-%COMP%]{background:#333;border-radius:12px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 30px #0000004d;border:1px solid #444}.signin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signin-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.signin-subtitle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin:0;opacity:.8}.signin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #555;border-radius:6px;background-color:#444;color:#fff;font-size:16px;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;background-color:#555}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:#888}.error-message[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:10px 12px;border-radius:6px;font-size:14px;text-align:center;margin-top:-10px}.signin-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}.signin-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px)}.signin-btn[_ngcontent-%COMP%]:disabled{background-color:#666;cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signin-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.invite-note[_ngcontent-%COMP%]{color:#888;font-size:12px;line-height:1.4;margin:0;padding:15px;background-color:#2a2a2a;border-radius:6px;border-left:3px solid #007bff}@media (max-width: 480px){.signin-container[_ngcontent-%COMP%]{padding:10px}.signin-card[_ngcontent-%COMP%]{padding:30px 20px}.signin-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),t})()},{path:"",component:(()=>{const n=class{constructor(r,o){this.supabaseService=r,this.router=o,this.currentUser=null,this.appVersion="1.7.1",this.isMobileMenuOpen=!1}ngOnInit(){this.supabaseService.currentUser$.subscribe(r=>{this.currentUser=r}),this.router.events.subscribe(()=>{this.isMobileMenuOpen=!1})}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(rs),N(xt))},n.\u0275cmp=Br({type:n,selectors:[["app-main-layout"]],decls:30,vars:7,consts:[[1,"app-layout"],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],[1,"nav-center","desktop-only"],[1,"nav-links"],["routerLink","/suggestion","routerLinkActive","active",1,"nav-link"],["routerLink","/collection","routerLinkActive","active",1,"nav-link"],["routerLink","/trade","routerLinkActive","active",1,"nav-link"],["class","nav-user desktop-only",4,"ngIf"],["type","button","aria-controls","mobileMenu","aria-label","Menu",1,"hamburger","mobile-only",3,"click"],["id","mobileMenu",1,"mobile-menu","mobile-only"],["class","mobile-menu-header",4,"ngIf"],["routerLink","/collection","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/suggestion","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/trade","routerLinkActive","active",1,"mobile-link",3,"click"],["class","mobile-link signout",3,"click",4,"ngIf"],[1,"main-content"],[1,"nav-user","desktop-only"],[1,"username"],[1,"btn-signout",3,"click"],[1,"mobile-menu-header"],[1,"mobile-link","signout",3,"click"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"h2"),b(5,"Pokemon TCGP Collector"),m(),g(6,"p"),b(7),m()(),g(8,"div",4)(9,"div",5)(10,"a",6),b(11," \u{1f4ca} Suggestion "),m(),g(12,"a",7),b(13," \u{1f5c2}\ufe0f Collection "),m(),g(14,"a",8),b(15," \u{1f504} Trade (Beta) "),m()()(),H(16,l3,5,1,"div",9),g(17,"button",10),A("click",function(){return i.toggleMobileMenu()}),b(18," \u2630 "),m()(),g(19,"div",11),H(20,c3,3,1,"div",12),g(21,"a",13),A("click",function(){return i.closeMobileMenu()}),b(22," \u{1f5c2}\ufe0f Collection "),m(),g(23,"a",14),A("click",function(){return i.closeMobileMenu()}),b(24," \u{1f4e6} Suggestion "),m(),g(25,"a",15),A("click",function(){return i.closeMobileMenu()}),b(26," \u{1f4ca} Trade (Beta) "),m(),H(27,u3,2,0,"button",16),m()(),g(28,"main",17),Ye(29,"router-outlet"),m()()),2&o&&(y(7),Me("v",i.appVersion,""),y(9),x("ngIf",i.currentUser),y(1),Nt("aria-expanded",i.isMobileMenuOpen),y(2),Ie("open",i.isMobileMenuOpen),y(1),x("ngIf",i.currentUser),y(7),x("ngIf",i.currentUser))},dependencies:[Ti,$c,Yc,Xw],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#1d1b1b}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:0 20px;box-shadow:0 2px 10px #0000001a;position:relative}.nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff}.nav-brand[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f0f0f0;opacity:.9;font-size:.95rem}.nav-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;border-radius:5px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:0 2px 5px #0003}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.username[_ngcontent-%COMP%]{color:#f0f0f0;font-size:14px;font-weight:500}.btn-signout[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background-color:transparent;color:#fff;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-signout[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#1d1b1b}.desktop-only[_ngcontent-%COMP%]{display:flex}.mobile-only[_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.35);color:#fff;border-radius:6px;padding:6px 10px;font-size:18px;cursor:pointer}.mobile-menu[_ngcontent-%COMP%]{display:none!important;position:absolute;right:12px;top:100%;margin-top:8px;width:220px;z-index:100;flex-direction:column;gap:8px;padding:10px 12px 12px;border:1px solid rgba(255,255,255,.16);border-radius:10px;background:#1b1f2a;box-shadow:0 10px 28px #00000059}.mobile-menu.open[_ngcontent-%COMP%]{display:flex!important}.mobile-menu[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin-bottom:4px;display:inline-block;opacity:.9}.mobile-link[_ngcontent-%COMP%]{text-align:left;color:#fff;text-decoration:none;padding:10px 12px;border:1px solid rgba(255,255,255,.12);border-radius:6px;background:rgba(255,255,255,.05);font-size:14px}.mobile-link.signout[_ngcontent-%COMP%]{border-color:#dc3545;background:rgba(220,53,69,.15)}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.nav-container[_ngcontent-%COMP%]{padding:8px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}"]}),t})(),canActivate:[(()=>{const n=class{constructor(r,o){this.supabaseService=r,this.router=o}canActivate(r,o){const i=this.supabaseService.isSignedIn(),s=this.supabaseService.getCurrentUser();return!(!i||!s)||(this.router.navigate(["/signin"],{queryParams:{returnUrl:o.url}}),!1)}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(rs),K(xt))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),t})()],children:[{path:"collection",component:x$},{path:"suggestion",component:B$},{path:"trade",component:r3}]},{path:"**",redirectTo:"/signin"}];let h3=(()=>{const n=class{};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=En({imports:[aD.forRoot(d3),aD]}),t})(),f3=(()=>{const n=class{};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=Ln({type:n,bootstrap:[iL]}),n.\u0275inj=En({imports:[QP,ob,MR,kN,h3]}),t})();YP().bootstrapModule(f3).catch(t=>console.error(t))},397:(Ot,de,te)=>{"use strict";te.r(de),te.d(de,{Headers:()=>k,Request:()=>R,Response:()=>q,default:()=>Ge,fetch:()=>Le});var ve=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const Le=ve.fetch,Ge=ve.fetch.bind(ve),k=ve.Headers,R=ve.Request,q=ve.Response},369:(Ot,de,te)=>{"use strict";var oe=te(156).default;Object.defineProperty(de,"__esModule",{value:!0});const ve=te(582),Le=ve.__importDefault(te(397)),Ge=ve.__importDefault(te(839));de.default=class k{constructor(q){var Q,ne;this.shouldThrowOnError=!1,this.method=q.method,this.url=q.url,this.headers=new Headers(q.headers),this.schema=q.schema,this.body=q.body,this.shouldThrowOnError=null!==(Q=q.shouldThrowOnError)&&void 0!==Q&&Q,this.signal=q.signal,this.isMaybeSingle=null!==(ne=q.isMaybeSingle)&&void 0!==ne&&ne,this.fetch=q.fetch?q.fetch:typeof fetch>"u"?Le.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(q,Q){return this.headers=new Headers(this.headers),this.headers.set(q,Q),this}then(q,Q){var ne=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Fe=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var De=oe(function*(je){var st,zt,It,Ze;let at=null,Mt=null,Zn=null,Xt=je.status,bn=je.statusText;if(je.ok){if("HEAD"!==ne.method){const Vr=yield je.text();""===Vr||(Mt="text/csv"===ne.headers.get("Accept")||ne.headers.get("Accept")&&null!==(st=ne.headers.get("Accept"))&&void 0!==st&&st.includes("application/vnd.pgrst.plan+text")?Vr:JSON.parse(Vr))}const en=null===(zt=ne.headers.get("Prefer"))||void 0===zt?void 0:zt.match(/count=(exact|planned|estimated)/),wn=null===(It=je.headers.get("content-range"))||void 0===It?void 0:It.split("/");en&&wn&&wn.length>1&&(Zn=parseInt(wn[1])),ne.isMaybeSingle&&"GET"===ne.method&&Array.isArray(Mt)&&(Mt.length>1?(at={code:"PGRST116",details:`Results contain ${Mt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Mt=null,Zn=null,Xt=406,bn="Not Acceptable"):Mt=1===Mt.length?Mt[0]:null)}else{const en=yield je.text();try{at=JSON.parse(en),Array.isArray(at)&&404===je.status&&(Mt=[],at=null,Xt=200,bn="OK")}catch{404===je.status&&""===en?(Xt=204,bn="No Content"):at={message:en}}if(at&&ne.isMaybeSingle&&!(null===(Ze=at?.details)||void 0===Ze)&&Ze.includes("0 rows")&&(at=null,Xt=200,bn="OK"),at&&ne.shouldThrowOnError)throw new Ge.default(at)}return{error:at,data:Mt,count:Zn,status:Xt,statusText:bn}});return function(je){return De.apply(this,arguments)}}());return this.shouldThrowOnError||(Fe=Fe.catch(De=>{var je,st,zt;return{error:{message:`${null!==(je=De?.name)&&void 0!==je?je:"FetchError"}: ${De?.message}`,details:`${null!==(st=De?.stack)&&void 0!==st?st:""}`,hint:"",code:`${null!==(zt=De?.code)&&void 0!==zt?zt:""}`},data:null,count:null,status:0,statusText:""}})),Fe.then(q,Q)}returns(){return this}overrideTypes(){return this}}},851:(Ot,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const oe=te(582),ve=oe.__importDefault(te(241)),Le=oe.__importDefault(te(105));class Ge{constructor(R,{headers:q={},schema:Q,fetch:ne}={}){this.url=R,this.headers=new Headers(q),this.schemaName=Q,this.fetch=ne}from(R){const q=new URL(`${this.url}/${R}`);return new ve.default(q,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(R){return new Ge(this.url,{headers:this.headers,schema:R,fetch:this.fetch})}rpc(R,q={},{head:Q=!1,get:ne=!1,count:Ee}={}){var Fe;let De;const je=new URL(`${this.url}/rpc/${R}`);let st;Q||ne?(De=Q?"HEAD":"GET",Object.entries(q).filter(([It,Ze])=>void 0!==Ze).map(([It,Ze])=>[It,Array.isArray(Ze)?`{${Ze.join(",")}}`:`${Ze}`]).forEach(([It,Ze])=>{je.searchParams.append(It,Ze)})):(De="POST",st=q);const zt=new Headers(this.headers);return Ee&&zt.set("Prefer",`count=${Ee}`),new Le.default({method:De,url:je,headers:zt,schema:this.schemaName,body:st,fetch:null!==(Fe=this.fetch)&&void 0!==Fe?Fe:fetch})}}de.default=Ge},839:(Ot,de)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});class te extends Error{constructor(ve){super(ve.message),this.name="PostgrestError",this.details=ve.details,this.hint=ve.hint,this.code=ve.code}}de.default=te},105:(Ot,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const ve=te(582).__importDefault(te(594));de.default=class Le extends ve.default{eq(k,R){return this.url.searchParams.append(k,`eq.${R}`),this}neq(k,R){return this.url.searchParams.append(k,`neq.${R}`),this}gt(k,R){return this.url.searchParams.append(k,`gt.${R}`),this}gte(k,R){return this.url.searchParams.append(k,`gte.${R}`),this}lt(k,R){return this.url.searchParams.append(k,`lt.${R}`),this}lte(k,R){return this.url.searchParams.append(k,`lte.${R}`),this}like(k,R){return this.url.searchParams.append(k,`like.${R}`),this}likeAllOf(k,R){return this.url.searchParams.append(k,`like(all).{${R.join(",")}}`),this}likeAnyOf(k,R){return this.url.searchParams.append(k,`like(any).{${R.join(",")}}`),this}ilike(k,R){return this.url.searchParams.append(k,`ilike.${R}`),this}ilikeAllOf(k,R){return this.url.searchParams.append(k,`ilike(all).{${R.join(",")}}`),this}ilikeAnyOf(k,R){return this.url.searchParams.append(k,`ilike(any).{${R.join(",")}}`),this}is(k,R){return this.url.searchParams.append(k,`is.${R}`),this}in(k,R){const q=Array.from(new Set(R)).map(Q=>"string"==typeof Q&&new RegExp("[,()]").test(Q)?`"${Q}"`:`${Q}`).join(",");return this.url.searchParams.append(k,`in.(${q})`),this}contains(k,R){return"string"==typeof R?this.url.searchParams.append(k,`cs.${R}`):Array.isArray(R)?this.url.searchParams.append(k,`cs.{${R.join(",")}}`):this.url.searchParams.append(k,`cs.${JSON.stringify(R)}`),this}containedBy(k,R){return"string"==typeof R?this.url.searchParams.append(k,`cd.${R}`):Array.isArray(R)?this.url.searchParams.append(k,`cd.{${R.join(",")}}`):this.url.searchParams.append(k,`cd.${JSON.stringify(R)}`),this}rangeGt(k,R){return this.url.searchParams.append(k,`sr.${R}`),this}rangeGte(k,R){return this.url.searchParams.append(k,`nxl.${R}`),this}rangeLt(k,R){return this.url.searchParams.append(k,`sl.${R}`),this}rangeLte(k,R){return this.url.searchParams.append(k,`nxr.${R}`),this}rangeAdjacent(k,R){return this.url.searchParams.append(k,`adj.${R}`),this}overlaps(k,R){return this.url.searchParams.append(k,"string"==typeof R?`ov.${R}`:`ov.{${R.join(",")}}`),this}textSearch(k,R,{config:q,type:Q}={}){let ne="";return"plain"===Q?ne="pl":"phrase"===Q?ne="ph":"websearch"===Q&&(ne="w"),this.url.searchParams.append(k,`${ne}fts${void 0===q?"":`(${q})`}.${R}`),this}match(k){return Object.entries(k).forEach(([R,q])=>{this.url.searchParams.append(R,`eq.${q}`)}),this}not(k,R,q){return this.url.searchParams.append(k,`not.${R}.${q}`),this}or(k,{foreignTable:R,referencedTable:q=R}={}){return this.url.searchParams.append(q?`${q}.or`:"or",`(${k})`),this}filter(k,R,q){return this.url.searchParams.append(k,`${R}.${q}`),this}}},241:(Ot,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const ve=te(582).__importDefault(te(105));de.default=class Le{constructor(k,{headers:R={},schema:q,fetch:Q}){this.url=k,this.headers=new Headers(R),this.schema=q,this.fetch=Q}select(k,R){const{head:q=!1,count:Q}=R??{},ne=q?"HEAD":"GET";let Ee=!1;const Fe=(k??"*").split("").map(De=>/\s/.test(De)&&!Ee?"":('"'===De&&(Ee=!Ee),De)).join("");return this.url.searchParams.set("select",Fe),Q&&this.headers.append("Prefer",`count=${Q}`),new ve.default({method:ne,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(k,{count:R,defaultToNull:q=!0}={}){var Q;if(R&&this.headers.append("Prefer",`count=${R}`),q||this.headers.append("Prefer","missing=default"),Array.isArray(k)){const Ee=k.reduce((Fe,De)=>Fe.concat(Object.keys(De)),[]);if(Ee.length>0){const Fe=[...new Set(Ee)].map(De=>`"${De}"`);this.url.searchParams.set("columns",Fe.join(","))}}return new ve.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:k,fetch:null!==(Q=this.fetch)&&void 0!==Q?Q:fetch})}upsert(k,{onConflict:R,ignoreDuplicates:q=!1,count:Q,defaultToNull:ne=!0}={}){var Ee;if(this.headers.append("Prefer",`resolution=${q?"ignore":"merge"}-duplicates`),void 0!==R&&this.url.searchParams.set("on_conflict",R),Q&&this.headers.append("Prefer",`count=${Q}`),ne||this.headers.append("Prefer","missing=default"),Array.isArray(k)){const De=k.reduce((je,st)=>je.concat(Object.keys(st)),[]);if(De.length>0){const je=[...new Set(De)].map(st=>`"${st}"`);this.url.searchParams.set("columns",je.join(","))}}return new ve.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:k,fetch:null!==(Ee=this.fetch)&&void 0!==Ee?Ee:fetch})}update(k,{count:R}={}){var q;return R&&this.headers.append("Prefer",`count=${R}`),new ve.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:k,fetch:null!==(q=this.fetch)&&void 0!==q?q:fetch})}delete({count:k}={}){var R;return k&&this.headers.append("Prefer",`count=${k}`),new ve.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(R=this.fetch)&&void 0!==R?R:fetch})}}},594:(Ot,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const ve=te(582).__importDefault(te(369));de.default=class Le extends ve.default{select(k){let R=!1;const q=(k??"*").split("").map(Q=>/\s/.test(Q)&&!R?"":('"'===Q&&(R=!R),Q)).join("");return this.url.searchParams.set("select",q),this.headers.append("Prefer","return=representation"),this}order(k,{ascending:R=!0,nullsFirst:q,foreignTable:Q,referencedTable:ne=Q}={}){const Ee=ne?`${ne}.order`:"order",Fe=this.url.searchParams.get(Ee);return this.url.searchParams.set(Ee,`${Fe?`${Fe},`:""}${k}.${R?"asc":"desc"}${void 0===q?"":q?".nullsfirst":".nullslast"}`),this}limit(k,{foreignTable:R,referencedTable:q=R}={}){return this.url.searchParams.set(typeof q>"u"?"limit":`${q}.limit`,`${k}`),this}range(k,R,{foreignTable:q,referencedTable:Q=q}={}){const Ee=typeof Q>"u"?"limit":`${Q}.limit`;return this.url.searchParams.set(typeof Q>"u"?"offset":`${Q}.offset`,`${k}`),this.url.searchParams.set(Ee,""+(R-k+1)),this}abortSignal(k){return this.signal=k,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:k=!1,verbose:R=!1,settings:q=!1,buffers:Q=!1,wal:ne=!1,format:Ee="text"}={}){var Fe;const De=[k?"analyze":null,R?"verbose":null,q?"settings":null,Q?"buffers":null,ne?"wal":null].filter(Boolean).join("|"),je=null!==(Fe=this.headers.get("Accept"))&&void 0!==Fe?Fe:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${Ee}; for="${je}"; options=${De};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(k){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${k}`),this}}},358:(Ot,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0}),de.PostgrestError=de.PostgrestBuilder=de.PostgrestTransformBuilder=de.PostgrestFilterBuilder=de.PostgrestQueryBuilder=de.PostgrestClient=void 0;const oe=te(582),ve=oe.__importDefault(te(851));de.PostgrestClient=ve.default;const Le=oe.__importDefault(te(241));de.PostgrestQueryBuilder=Le.default;const Ge=oe.__importDefault(te(105));de.PostgrestFilterBuilder=Ge.default;const k=oe.__importDefault(te(594));de.PostgrestTransformBuilder=k.default;const R=oe.__importDefault(te(369));de.PostgrestBuilder=R.default;const q=oe.__importDefault(te(839));de.PostgrestError=q.default,de.default={PostgrestClient:ve.default,PostgrestQueryBuilder:Le.default,PostgrestFilterBuilder:Ge.default,PostgrestTransformBuilder:k.default,PostgrestBuilder:R.default,PostgrestError:q.default}},156:Ot=>{function de(oe,ve,Le,Ge,k,R,q){try{var Q=oe[R](q),ne=Q.value}catch(Ee){return void Le(Ee)}Q.done?ve(ne):Promise.resolve(ne).then(Ge,k)}Ot.exports=function te(oe){return function(){var ve=this,Le=arguments;return new Promise(function(Ge,k){var R=oe.apply(ve,Le);function q(ne){de(R,Ge,k,q,Q,"next",ne)}function Q(ne){de(R,Ge,k,q,Q,"throw",ne)}q(void 0)})}},Ot.exports.__esModule=!0,Ot.exports.default=Ot.exports},582:(Ot,de,te)=>{"use strict";te.r(de),te.d(de,{__addDisposableResource:()=>qe,__assign:()=>Le,__asyncDelegator:()=>os,__asyncGenerator:()=>bn,__asyncValues:()=>en,__await:()=>Xt,__awaiter:()=>De,__classPrivateFieldGet:()=>Xn,__classPrivateFieldIn:()=>is,__classPrivateFieldSet:()=>Oa,__createBinding:()=>st,__decorate:()=>k,__disposeResources:()=>Aa,__esDecorate:()=>q,__exportStar:()=>zt,__extends:()=>ve,__generator:()=>je,__importDefault:()=>Ro,__importStar:()=>Ta,__makeTemplateObject:()=>wn,__metadata:()=>Fe,__param:()=>R,__propKey:()=>ne,__read:()=>Ze,__rest:()=>Ge,__rewriteRelativeImportExtension:()=>ka,__runInitializers:()=>Q,__setFunctionName:()=>Ee,__spread:()=>at,__spreadArray:()=>Zn,__spreadArrays:()=>Mt,__values:()=>It,default:()=>cu});var oe=function(E,O){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,M){I.__proto__=M}||function(I,M){for(var j in M)Object.prototype.hasOwnProperty.call(M,j)&&(I[j]=M[j])})(E,O)};function ve(E,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function I(){this.constructor=E}oe(E,O),E.prototype=null===O?Object.create(O):(I.prototype=O.prototype,new I)}var Le=function(){return Le=Object.assign||function(O){for(var I,M=1,j=arguments.length;M<j;M++)for(var B in I=arguments[M])Object.prototype.hasOwnProperty.call(I,B)&&(O[B]=I[B]);return O},Le.apply(this,arguments)};function Ge(E,O){var I={};for(var M in E)Object.prototype.hasOwnProperty.call(E,M)&&O.indexOf(M)<0&&(I[M]=E[M]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var j=0;for(M=Object.getOwnPropertySymbols(E);j<M.length;j++)O.indexOf(M[j])<0&&Object.prototype.propertyIsEnumerable.call(E,M[j])&&(I[M[j]]=E[M[j]])}return I}function k(E,O,I,M){var L,j=arguments.length,B=j<3?O:null===M?M=Object.getOwnPropertyDescriptor(O,I):M;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(E,O,I,M);else for(var $=E.length-1;$>=0;$--)(L=E[$])&&(B=(j<3?L(B):j>3?L(O,I,B):L(O,I))||B);return j>3&&B&&Object.defineProperty(O,I,B),B}function R(E,O){return function(I,M){O(I,M,E)}}function q(E,O,I,M,j,B){function L(er){if(void 0!==er&&"function"!=typeof er)throw new TypeError("Function expected");return er}for(var wt,$=M.kind,Tt="getter"===$?"get":"setter"===$?"set":"value",ue=!O&&E?M.static?E:E.prototype:null,Je=O||(ue?Object.getOwnPropertyDescriptor(ue,M.name):{}),$r=!1,Ue=I.length-1;Ue>=0;Ue--){var Lt={};for(var tn in M)Lt[tn]="access"===tn?{}:M[tn];for(var tn in M.access)Lt.access[tn]=M.access[tn];Lt.addInitializer=function(er){if($r)throw new TypeError("Cannot add initializers after decoration has completed");B.push(L(er||null))};var Dn=(0,I[Ue])("accessor"===$?{get:Je.get,set:Je.set}:Je[Tt],Lt);if("accessor"===$){if(void 0===Dn)continue;if(null===Dn||"object"!=typeof Dn)throw new TypeError("Object expected");(wt=L(Dn.get))&&(Je.get=wt),(wt=L(Dn.set))&&(Je.set=wt),(wt=L(Dn.init))&&j.unshift(wt)}else(wt=L(Dn))&&("field"===$?j.unshift(wt):Je[Tt]=wt)}ue&&Object.defineProperty(ue,M.name,Je),$r=!0}function Q(E,O,I){for(var M=arguments.length>2,j=0;j<O.length;j++)I=M?O[j].call(E,I):O[j].call(E);return M?I:void 0}function ne(E){return"symbol"==typeof E?E:"".concat(E)}function Ee(E,O,I){return"symbol"==typeof O&&(O=O.description?"[".concat(O.description,"]"):""),Object.defineProperty(E,"name",{configurable:!0,value:I?"".concat(I," ",O):O})}function Fe(E,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(E,O)}function De(E,O,I,M){return new(I||(I=Promise))(function(B,L){function $(Je){try{ue(M.next(Je))}catch(wt){L(wt)}}function Tt(Je){try{ue(M.throw(Je))}catch(wt){L(wt)}}function ue(Je){Je.done?B(Je.value):function j(B){return B instanceof I?B:new I(function(L){L(B)})}(Je.value).then($,Tt)}ue((M=M.apply(E,O||[])).next())})}function je(E,O){var M,j,B,I={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},L=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return L.next=$(0),L.throw=$(1),L.return=$(2),"function"==typeof Symbol&&(L[Symbol.iterator]=function(){return this}),L;function $(ue){return function(Je){return function Tt(ue){if(M)throw new TypeError("Generator is already executing.");for(;L&&(L=0,ue[0]&&(I=0)),I;)try{if(M=1,j&&(B=2&ue[0]?j.return:ue[0]?j.throw||((B=j.return)&&B.call(j),0):j.next)&&!(B=B.call(j,ue[1])).done)return B;switch(j=0,B&&(ue=[2&ue[0],B.value]),ue[0]){case 0:case 1:B=ue;break;case 4:return I.label++,{value:ue[1],done:!1};case 5:I.label++,j=ue[1],ue=[0];continue;case 7:ue=I.ops.pop(),I.trys.pop();continue;default:if(!(B=(B=I.trys).length>0&&B[B.length-1])&&(6===ue[0]||2===ue[0])){I=0;continue}if(3===ue[0]&&(!B||ue[1]>B[0]&&ue[1]<B[3])){I.label=ue[1];break}if(6===ue[0]&&I.label<B[1]){I.label=B[1],B=ue;break}if(B&&I.label<B[2]){I.label=B[2],I.ops.push(ue);break}B[2]&&I.ops.pop(),I.trys.pop();continue}ue=O.call(E,I)}catch(Je){ue=[6,Je],j=0}finally{M=B=0}if(5&ue[0])throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}([ue,Je])}}}var st=Object.create?function(E,O,I,M){void 0===M&&(M=I);var j=Object.getOwnPropertyDescriptor(O,I);(!j||("get"in j?!O.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return O[I]}}),Object.defineProperty(E,M,j)}:function(E,O,I,M){void 0===M&&(M=I),E[M]=O[I]};function zt(E,O){for(var I in E)"default"!==I&&!Object.prototype.hasOwnProperty.call(O,I)&&st(O,E,I)}function It(E){var O="function"==typeof Symbol&&Symbol.iterator,I=O&&E[O],M=0;if(I)return I.call(E);if(E&&"number"==typeof E.length)return{next:function(){return E&&M>=E.length&&(E=void 0),{value:E&&E[M++],done:!E}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ze(E,O){var I="function"==typeof Symbol&&E[Symbol.iterator];if(!I)return E;var j,L,M=I.call(E),B=[];try{for(;(void 0===O||O-- >0)&&!(j=M.next()).done;)B.push(j.value)}catch($){L={error:$}}finally{try{j&&!j.done&&(I=M.return)&&I.call(M)}finally{if(L)throw L.error}}return B}function at(){for(var E=[],O=0;O<arguments.length;O++)E=E.concat(Ze(arguments[O]));return E}function Mt(){for(var E=0,O=0,I=arguments.length;O<I;O++)E+=arguments[O].length;var M=Array(E),j=0;for(O=0;O<I;O++)for(var B=arguments[O],L=0,$=B.length;L<$;L++,j++)M[j]=B[L];return M}function Zn(E,O,I){if(I||2===arguments.length)for(var B,M=0,j=O.length;M<j;M++)(B||!(M in O))&&(B||(B=Array.prototype.slice.call(O,0,M)),B[M]=O[M]);return E.concat(B||Array.prototype.slice.call(O))}function Xt(E){return this instanceof Xt?(this.v=E,this):new Xt(E)}function bn(E,O,I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,M=I.apply(E,O||[]),B=[];return j=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),$("next"),$("throw"),$("return",function L(Ue){return function(Lt){return Promise.resolve(Lt).then(Ue,wt)}}),j[Symbol.asyncIterator]=function(){return this},j;function $(Ue,Lt){M[Ue]&&(j[Ue]=function(tn){return new Promise(function(Dn,er){B.push([Ue,tn,Dn,er])>1||Tt(Ue,tn)})},Lt&&(j[Ue]=Lt(j[Ue])))}function Tt(Ue,Lt){try{!function ue(Ue){Ue.value instanceof Xt?Promise.resolve(Ue.value.v).then(Je,wt):$r(B[0][2],Ue)}(M[Ue](Lt))}catch(tn){$r(B[0][3],tn)}}function Je(Ue){Tt("next",Ue)}function wt(Ue){Tt("throw",Ue)}function $r(Ue,Lt){Ue(Lt),B.shift(),B.length&&Tt(B[0][0],B[0][1])}}function os(E){var O,I;return O={},M("next"),M("throw",function(j){throw j}),M("return"),O[Symbol.iterator]=function(){return this},O;function M(j,B){O[j]=E[j]?function(L){return(I=!I)?{value:Xt(E[j](L)),done:!1}:B?B(L):L}:B}}function en(E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I,O=E[Symbol.asyncIterator];return O?O.call(E):(E=It(E),I={},M("next"),M("throw"),M("return"),I[Symbol.asyncIterator]=function(){return this},I);function M(B){I[B]=E[B]&&function(L){return new Promise(function($,Tt){!function j(B,L,$,Tt){Promise.resolve(Tt).then(function(ue){B({value:ue,done:$})},L)}($,Tt,(L=E[B](L)).done,L.value)})}}}function wn(E,O){return Object.defineProperty?Object.defineProperty(E,"raw",{value:O}):E.raw=O,E}var Vr=Object.create?function(E,O){Object.defineProperty(E,"default",{enumerable:!0,value:O})}:function(E,O){E.default=O},uo=function(E){return(uo=Object.getOwnPropertyNames||function(O){var I=[];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(I[I.length]=M);return I})(E)};function Ta(E){if(E&&E.__esModule)return E;var O={};if(null!=E)for(var I=uo(E),M=0;M<I.length;M++)"default"!==I[M]&&st(O,E,I[M]);return Vr(O,E),O}function Ro(E){return E&&E.__esModule?E:{default:E}}function Xn(E,O,I,M){if("a"===I&&!M)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof O?E!==O||!M:!O.has(E))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===I?M:"a"===I?M.call(E):M?M.value:O.get(E)}function Oa(E,O,I,M,j){if("m"===M)throw new TypeError("Private method is not writable");if("a"===M&&!j)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof O?E!==O||!j:!O.has(E))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===M?j.call(E,I):j?j.value=I:O.set(E,I),I}function is(E,O){if(null===O||"object"!=typeof O&&"function"!=typeof O)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof E?O===E:E.has(O)}function qe(E,O,I){if(null!=O){if("object"!=typeof O&&"function"!=typeof O)throw new TypeError("Object expected.");var M,j;if(I){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");M=O[Symbol.asyncDispose]}if(void 0===M){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");M=O[Symbol.dispose],I&&(j=M)}if("function"!=typeof M)throw new TypeError("Object not disposable.");j&&(M=function(){try{j.call(this)}catch(B){return Promise.reject(B)}}),E.stack.push({value:O,dispose:M,async:I})}else I&&E.stack.push({async:!0});return O}var Ia="function"==typeof SuppressedError?SuppressedError:function(E,O,I){var M=new Error(I);return M.name="SuppressedError",M.error=E,M.suppressed=O,M};function Aa(E){function O(B){E.error=E.hasError?new Ia(B,E.error,"An error was suppressed during disposal."):B,E.hasError=!0}var I,M=0;return function j(){for(;I=E.stack.pop();)try{if(!I.async&&1===M)return M=0,E.stack.push(I),Promise.resolve().then(j);if(I.dispose){var B=I.dispose.call(I.value);if(I.async)return M|=2,Promise.resolve(B).then(j,function(L){return O(L),j()})}else M|=1}catch(L){O(L)}if(1===M)return E.hasError?Promise.reject(E.error):Promise.resolve();if(E.hasError)throw E.error}()}function ka(E,O){return"string"==typeof E&&/^\.\.?\//.test(E)?E.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(I,M,j,B,L){return M?O?".jsx":".js":!j||B&&L?j+B+"."+L.toLowerCase()+"js":I}):E}const cu={__extends:ve,__assign:Le,__rest:Ge,__decorate:k,__param:R,__esDecorate:q,__runInitializers:Q,__propKey:ne,__setFunctionName:Ee,__metadata:Fe,__awaiter:De,__generator:je,__createBinding:st,__exportStar:zt,__values:It,__read:Ze,__spread:at,__spreadArrays:Mt,__spreadArray:Zn,__await:Xt,__asyncGenerator:bn,__asyncDelegator:os,__asyncValues:en,__makeTemplateObject:wn,__importStar:Ta,__importDefault:Ro,__classPrivateFieldGet:Xn,__classPrivateFieldSet:Oa,__classPrivateFieldIn:is,__addDisposableResource:qe,__disposeResources:Aa,__rewriteRelativeImportExtension:ka}}},Ot=>{Ot(Ot.s=734)}]);