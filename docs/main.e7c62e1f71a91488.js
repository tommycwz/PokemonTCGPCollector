(self.webpackChunkPokemonTCGPCollector=self.webpackChunkPokemonTCGPCollector||[]).push([[179],{716:(Mt,ce,Z)=>{"use strict";function te(n){return"function"==typeof n}function ye(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Re=ye(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Be(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class T{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const i of t)i.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(te(r))try{r()}catch(i){e=i instanceof Re?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{K(i)}catch(s){e=e??[],s instanceof Re?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Re(e)}}add(e){var t;if(e&&e!==this)if(this.closed)K(e);else{if(e instanceof T){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Be(t,e)}remove(e){const{_finalizers:t}=this;t&&Be(t,e),e instanceof T&&e._removeParent(this)}}T.EMPTY=(()=>{const n=new T;return n.closed=!0,n})();const O=T.EMPTY;function B(n){return n instanceof T||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function K(n){te(n)?n():n.unsubscribe()}const X={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Se={setTimeout(n,e,...t){const{delegate:r}=Se;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Se;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ke(n){Se.setTimeout(()=>{const{onUnhandledError:e}=X;if(!e)throw n;e(n)})}function De(){}const Ne=xt("C",void 0,void 0);function xt(n,e,t){return{kind:n,value:e,error:t}}let Ke=null;function rt(n){if(X.useDeprecatedSynchronousErrorHandling){const e=!Ke;if(e&&(Ke={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ke;if(Ke=null,t)throw r}}else n()}class Zn extends T{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,B(e)&&e.add(this)):this.destination=Ea}static create(e,t,r){return new Xt(e,t,r)}next(e){this.isStopped?co(function Ht(n){return xt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?co(function nt(n){return xt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?co(Ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Zt=Function.prototype.bind;function bn(n,e){return Zt.call(n,e)}class Ji{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){wn(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){wn(r)}else wn(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){wn(t)}}}class Xt extends Zn{constructor(e,t,r){let o;if(super(),te(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&X.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&bn(e.next,i),error:e.error&&bn(e.error,i),complete:e.complete&&bn(e.complete,i)}):o=e}this.destination=new Ji(o)}}function wn(n){X.useDeprecatedSynchronousErrorHandling?function Dt(n){X.useDeprecatedSynchronousErrorHandling&&Ke&&(Ke.errorThrown=!0,Ke.error=n)}(n):ke(n)}function co(n,e){const{onStoppedNotification:t}=X;t&&Se.setTimeout(()=>t(n,e))}const Ea={closed:!0,next:De,error:function jr(n){throw n},complete:De},Fo="function"==typeof Symbol&&Symbol.observable||"@@observable";function Xn(n){return n}function Yi(n){return 0===n.length?Xn:1===n.length?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}let He=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){const i=function Ia(n){return n&&n instanceof Zn||function xa(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}(n)&&B(n)}(t)?t:new Xt(t,r,o);return rt(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Ma(r))((o,i)=>{const s=new Xt({next:a=>{try{t(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Fo](){return this}pipe(...t){return Yi(t)(this)}toPromise(t){return new(t=Ma(t))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function Ma(n){var e;return null!==(e=n??X.Promise)&&void 0!==e?e:Promise}const eu=ye(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let b=(()=>{class n extends He{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new E(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new eu}next(t){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:o,observers:i}=this;return r||o?O:(this.currentObservers=null,i.push(t),new T(()=>{this.currentObservers=null,Be(i,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){const t=new He;return t.source=this,t}}return n.create=(e,t)=>new E(e,t),n})();class E extends b{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:O}}function S(n){return te(n?.lift)}function D(n){return e=>{if(S(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function R(n,e,t,r,o){return new V(n,e,t,r,o)}class V extends Zn{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function P(n,e){return D((t,r)=>{let o=0;t.subscribe(R(r,i=>{r.next(n.call(e,i,o++))}))})}var L=Z(582);const Et=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function le(n){return te(n?.then)}function qe(n){return te(n[Fo])}function _t(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Vr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Nt=function je(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function en(n){return te(n?.[Nt])}function Dn(n){return(0,L.__asyncGenerator)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:o}=yield(0,L.__await)(t.read());if(o)return yield(0,L.__await)(void 0);yield yield(0,L.__await)(r)}}finally{t.releaseLock()}})}function er(n){return te(n?.getReader)}function Fn(n){if(n instanceof He)return n;if(null!=n){if(qe(n))return function GD(n){return new He(e=>{const t=n[Fo]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Et(n))return function qD(n){return new He(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(le(n))return function WD(n){return new He(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ke)})}(n);if(_t(n))return Hp(n);if(en(n))return function KD(n){return new He(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(er(n))return function JD(n){return Hp(Dn(n))}(n)}throw Vr(n)}function Hp(n){return new He(e=>{(function YD(n,e){var t,r,o,i;return(0,L.__awaiter)(this,void 0,void 0,function*(){try{for(t=(0,L.__asyncValues)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function _r(n,e,t,r=0,o=!1){const i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function It(n,e,t=1/0){return te(e)?It((r,o)=>P((i,s)=>e(r,i,o,s))(Fn(n(r,o))),t):("number"==typeof e&&(t=e),D((r,o)=>function QD(n,e,t,r,o,i,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{i&&e.next(g),c++;let m=!1;Fn(t(g,u++)).subscribe(R(e,v=>{o?.(v),i?f(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<r;){const v=l.shift();s?_r(e,s,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(R(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,n,t)))}function Lo(n=1/0){return It(Xn,n)}const tr=new He(n=>n.complete());function tu(n){return n[n.length-1]}function zp(n){return te(tu(n))?n.pop():void 0}function Qi(n){return function XD(n){return n&&te(n.schedule)}(tu(n))?n.pop():void 0}function Gp(n,e=0){return D((t,r)=>{t.subscribe(R(r,o=>_r(r,n,()=>r.next(o),e),()=>_r(r,n,()=>r.complete(),e),o=>_r(r,n,()=>r.error(o),e)))})}function qp(n,e=0){return D((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Wp(n,e){if(!n)throw new Error("Iterable cannot be null");return new He(t=>{_r(t,e,()=>{const r=n[Symbol.asyncIterator]();_r(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function ut(n,e){return e?function sE(n,e){if(null!=n){if(qe(n))return function tE(n,e){return Fn(n).pipe(qp(e),Gp(e))}(n,e);if(Et(n))return function rE(n,e){return new He(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(le(n))return function nE(n,e){return Fn(n).pipe(qp(e),Gp(e))}(n,e);if(_t(n))return Wp(n,e);if(en(n))return function oE(n,e){return new He(t=>{let r;return _r(t,e,()=>{r=n[Nt](),_r(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void t.error(s)}i?t.complete():t.next(o)},0,!0)}),()=>te(r?.return)&&r.return()})}(n,e);if(er(n))return function iE(n,e){return Wp(Dn(n),e)}(n,e)}throw Vr(n)}(n,e):Fn(n)}function nu(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Xt({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function ru(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ve(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ve).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ou(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const cE=Fe({__forward_ref__:Fe});function $e(n){return n.__forward_ref__=$e,n.toString=function(){return Ve(this())},n}function re(n){return iu(n)?n():n}function iu(n){return"function"==typeof n&&n.hasOwnProperty(cE)&&n.__forward_ref__===$e}function su(n){return n&&!!n.\u0275providers}const Kp="https://g.co/ng/security#xss";class j extends Error{constructor(e,t){super(Ta(e,t)),this.code=e}}function Ta(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function ue(n){return"string"==typeof n?n:null==n?"":String(n)}function Oa(n,e){throw new j(-201,!1)}function En(n,e){null==n&&function Te(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function J(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Sn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Aa(n){return Jp(n,Pa)||Jp(n,Qp)}function Jp(n,e){return n.hasOwnProperty(e)?n[e]:null}function Yp(n){return n&&(n.hasOwnProperty(au)||n.hasOwnProperty(yE))?n[au]:null}const Pa=Fe({\u0275prov:Fe}),au=Fe({\u0275inj:Fe}),Qp=Fe({ngInjectableDef:Fe}),yE=Fe({ngInjectorDef:Fe});var oe=(()=>((oe=oe||{})[oe.Default=0]="Default",oe[oe.Host=1]="Host",oe[oe.Self=2]="Self",oe[oe.SkipSelf=4]="SkipSelf",oe[oe.Optional=8]="Optional",oe))();let lu;function Mn(n){const e=lu;return lu=n,e}function Zp(n,e,t){const r=Aa(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&oe.Optional?null:void 0!==e?e:void Oa(Ve(n))}const ze=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zi={},cu="__NG_DI_FLAG__",ka="ngTempTokenPath",vE="ngTokenPath",CE=/\n/gm,bE="\u0275",Xp="__source";let Xi;function jo(n){const e=Xi;return Xi=n,e}function wE(n,e=oe.Default){if(void 0===Xi)throw new j(-203,!1);return null===Xi?Zp(n,void 0,e):Xi.get(n,e&oe.Optional?null:void 0,e)}function G(n,e=oe.Default){return(function _E(){return lu}()||wE)(re(n),e)}function _e(n,e=oe.Default){return G(n,Ra(e))}function Ra(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uu(n){const e=[];for(let t=0;t<n.length;t++){const r=re(n[t]);if(Array.isArray(r)){if(0===r.length)throw new j(900,!1);let o,i=oe.Default;for(let s=0;s<r.length;s++){const a=r[s],l=DE(a);"number"==typeof l?-1===l?o=a.token:i|=l:o=a}e.push(G(o,i))}else e.push(G(r))}return e}function es(n,e){return n[cu]=e,n.prototype[cu]=e,n}function DE(n){return n[cu]}function vr(n){return{toString:n}.toString()}var nr=(()=>((nr=nr||{})[nr.OnPush=0]="OnPush",nr[nr.Default=1]="Default",nr))(),rr=(()=>{return(n=rr||(rr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",rr;var n})();const Cr={},xe=[],Na=Fe({\u0275cmp:Fe}),du=Fe({\u0275dir:Fe}),hu=Fe({\u0275pipe:Fe}),tg=Fe({\u0275mod:Fe}),br=Fe({\u0275fac:Fe}),ts=Fe({__NG_ELEMENT_ID__:Fe});let ME=0;function uo(n){return vr(()=>{const e=rg(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||rr.Emulated,id:"c"+ME++,styles:n.styles||xe,_:null,schemas:n.schemas||null,tView:null};og(t);const r=n.dependencies;return t.directiveDefs=Fa(r,!1),t.pipeDefs=Fa(r,!0),t})}function IE(n){return Oe(n)||Ft(n)}function TE(n){return null!==n}function Ln(n){return vr(()=>({type:n.type,bootstrap:n.bootstrap||xe,declarations:n.declarations||xe,imports:n.imports||xe,exports:n.exports||xe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ng(n,e){if(null==n)return Cr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),t[o]=r,e&&(e[o]=i)}return t}function se(n){return vr(()=>{const e=rg(n);return og(e),e})}function Oe(n){return n[Na]||null}function Ft(n){return n[du]||null}function nn(n){return n[hu]||null}function un(n,e){const t=n[tg]||null;if(!t&&!0===e)throw new Error(`Type ${Ve(n)} does not have '\u0275mod' property.`);return t}function rg(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||xe,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ng(n.inputs,e),outputs:ng(n.outputs)}}function og(n){n.features?.forEach(e=>e(n))}function Fa(n,e){if(!n)return null;const t=e?nn:IE;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(TE)}const wr=0,q=1,ge=2,Ze=3,jn=4,ho=5,Lt=6,$o=7,ot=8,La=9,ja=10,ve=11,fu=12,ns=13,ig=14,Uo=15,jt=16,rs=17,Bo=18,or=19,os=20,sg=21,Ge=22,pu=1,ag=2,Va=7,$a=8,Ho=9,zt=10;function dn(n){return Array.isArray(n)&&"object"==typeof n[pu]}function Vn(n){return Array.isArray(n)&&!0===n[pu]}function gu(n){return 0!=(4&n.flags)}function is(n){return n.componentOffset>-1}function Ua(n){return 1==(1&n.flags)}function $n(n){return!!n.template}function AE(n){return 0!=(256&n[ge])}function fo(n,e){return n.hasOwnProperty(br)?n[br]:null}class RE{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function xn(){return ug}function ug(n){return n.type.prototype.ngOnChanges&&(n.setInput=FE),NE}function NE(){const n=hg(this),e=n?.current;if(e){const t=n.previous;if(t===Cr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function FE(n,e,t,r){const o=this.declaredInputs[t],i=hg(n)||function LE(n,e){return n[dg]=e}(n,{previous:Cr,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[o];s[o]=new RE(l&&l.currentValue,e,a===Cr),n[r]=e}xn.ngInherit=!0;const dg="__ngSimpleChanges__";function hg(n){return n[dg]||null}const In=function(n,e,t){};function Tt(n){for(;Array.isArray(n);)n=n[wr];return n}function Ba(n,e){return Tt(e[n])}function hn(n,e){return Tt(e[n.index])}function gg(n,e){return n.data[e]}function rn(n,e){const t=e[n];return dn(t)?t:t[wr]}function Ha(n){return 64==(64&n[ge])}function Ur(n,e){return null==e?null:n[e]}function mg(n){n[Bo]=0}function yu(n,e){n[ho]+=e;let t=n,r=n[Ze];for(;null!==r&&(1===e&&1===t[ho]||-1===e&&0===t[ho]);)r[ho]+=e,t=r,r=r[Ze]}const de={lFrame:Mg(null),bindingsEnabled:!0};function _g(){return de.bindingsEnabled}function N(){return de.lFrame.lView}function Me(){return de.lFrame.tView}function Ce(n){return de.lFrame.contextLView=n,n[ot]}function be(n){return de.lFrame.contextLView=null,n}function Ot(){let n=vg();for(;null!==n&&64===n.type;)n=n.parent;return n}function vg(){return de.lFrame.currentTNode}function ir(n,e){const t=de.lFrame;t.currentTNode=n,t.isParent=e}function _u(){return de.lFrame.isParent}function vu(){de.lFrame.isParent=!1}function Gt(){const n=de.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Go(){return de.lFrame.bindingIndex++}function Er(n){const e=de.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function YE(n,e){const t=de.lFrame;t.bindingIndex=t.bindingRootIndex=n,Cu(e)}function Cu(n){de.lFrame.currentDirectiveIndex=n}function Dg(){return de.lFrame.currentQueryIndex}function wu(n){de.lFrame.currentQueryIndex=n}function ZE(n){const e=n[q];return 2===e.type?e.declTNode:1===e.type?n[Lt]:null}function Eg(n,e,t){if(t&oe.SkipSelf){let o=e,i=n;for(;!(o=o.parent,null!==o||t&oe.Host||(o=ZE(i),null===o||(i=i[Uo],10&o.type))););if(null===o)return!1;e=o,n=i}const r=de.lFrame=Sg();return r.currentTNode=e,r.lView=n,!0}function Du(n){const e=Sg(),t=n[q];de.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Sg(){const n=de.lFrame,e=null===n?null:n.child;return null===e?Mg(n):e}function Mg(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function xg(){const n=de.lFrame;return de.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ig=xg;function Eu(){const n=xg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qt(){return de.lFrame.selectedIndex}function po(n){de.lFrame.selectedIndex=n}function Je(){const n=de.lFrame;return gg(n.tView,n.selectedIndex)}function za(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(n.contentHooks??(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks??(n.contentHooks=[])).push(t,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks??(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks??(n.viewHooks=[])).push(t,c),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks??(n.destroyHooks=[])).push(t,u)}}function Ga(n,e,t){Tg(n,e,3,t)}function qa(n,e,t,r){(3&n[ge])===t&&Tg(n,e,t,r)}function Su(n,e){let t=n[ge];(3&t)===e&&(t&=2047,t+=1,n[ge]=t)}function Tg(n,e,t,r){const i=r??-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Bo]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Bo]+=65536),(a<i||-1==i)&&(aS(n,t,e,l),n[Bo]=(4294901760&n[Bo])+l+2),l++}function aS(n,e,t,r){const o=t[r]<0,i=t[r+1],a=n[o?-t[r]:t[r]];if(o){if(n[ge]>>11<n[Bo]>>16&&(3&n[ge])===e){n[ge]+=2048,In(4,a,i);try{i.call(a)}finally{In(5,a,i)}}}else{In(4,a,i);try{i.call(a)}finally{In(5,a,i)}}}const qo=-1;class as{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function xu(n,e,t){let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{const i=o,s=t[++r];Ag(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function Og(n){return 3===n||4===n||6===n}function Ag(n){return 64===n.charCodeAt(0)}function ls(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?t=o:0===t||Pg(n,t,o,null,-1===t||2===t?e[++r]:null)}}return n}function Pg(n,e,t,r,o){let i=0,s=n.length;if(-1===e)s=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==o&&(n[i+1]=o));if(r===n[i+1])return void(n[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),null!==r&&n.splice(i++,0,r),null!==o&&n.splice(i++,0,o)}function kg(n){return n!==qo}function Wa(n){return 32767&n}function Ka(n,e){let t=function dS(n){return n>>16}(n),r=e;for(;t>0;)r=r[Uo],t--;return r}let Iu=!0;function Ja(n){const e=Iu;return Iu=n,e}const Rg=255,Ng=5;let hS=0;const sr={};function Ya(n,e){const t=Fg(n,e);if(-1!==t)return t;const r=e[q];r.firstCreatePass&&(n.injectorIndex=e.length,Tu(r.data,n),Tu(e,null),Tu(r.blueprint,null));const o=Ou(n,e),i=n.injectorIndex;if(kg(o)){const s=Wa(o),a=Ka(o,e),l=a[q].data;for(let c=0;c<8;c++)e[i+c]=a[s+c]|l[s+c]}return e[i+8]=o,i}function Tu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Fg(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Ou(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;null!==o;){if(r=Hg(o),null===r)return qo;if(t++,o=o[Uo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return qo}function Au(n,e,t){!function fS(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ts)&&(r=t[ts]),null==r&&(r=t[ts]=hS++);const o=r&Rg;e.data[n+(o>>Ng)]|=1<<o}(n,e,t)}function Lg(n,e,t){if(t&oe.Optional||void 0!==n)return n;Oa()}function jg(n,e,t,r){if(t&oe.Optional&&void 0===r&&(r=null),!(t&(oe.Self|oe.Host))){const o=n[La],i=Mn(void 0);try{return o?o.get(e,r,t&oe.Optional):Zp(e,r,t&oe.Optional)}finally{Mn(i)}}return Lg(r,0,t)}function Vg(n,e,t,r=oe.Default,o){if(null!==n){if(1024&e[ge]){const s=function _S(n,e,t,r,o){let i=n,s=e;for(;null!==i&&null!==s&&1024&s[ge]&&!(256&s[ge]);){const a=$g(i,s,t,r|oe.Self,sr);if(a!==sr)return a;let l=i.parent;if(!l){const c=s[sg];if(c){const u=c.get(t,sr,r);if(u!==sr)return u}l=Hg(s),s=s[Uo]}i=l}return o}(n,e,t,r,sr);if(s!==sr)return s}const i=$g(n,e,t,r,sr);if(i!==sr)return i}return jg(e,t,r,o)}function $g(n,e,t,r,o){const i=function mS(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ts)?n[ts]:void 0;return"number"==typeof e?e>=0?e&Rg:yS:e}(t);if("function"==typeof i){if(!Eg(e,n,r))return r&oe.Host?Lg(o,0,r):jg(e,t,r,o);try{const s=i(r);if(null!=s||r&oe.Optional)return s;Oa()}finally{Ig()}}else if("number"==typeof i){let s=null,a=Fg(n,e),l=qo,c=r&oe.Host?e[jt][Lt]:null;for((-1===a||r&oe.SkipSelf)&&(l=-1===a?Ou(n,e):e[a+8],l!==qo&&Bg(r,!1)?(s=e[q],a=Wa(l),e=Ka(l,e)):a=-1);-1!==a;){const u=e[q];if(Ug(i,a,u.data)){const d=gS(a,e,t,s,r,c);if(d!==sr)return d}l=e[a+8],l!==qo&&Bg(r,e[q].data[a+8]===c)&&Ug(i,a,e)?(s=u,a=Wa(l),e=Ka(l,e)):a=-1}}return o}function gS(n,e,t,r,o,i){const s=e[q],a=s.data[n+8],u=Qa(a,s,t,null==r?is(a)&&Iu:r!=s&&0!=(3&a.type),o&oe.Host&&i===a);return null!==u?go(e,s,u,a):sr}function Qa(n,e,t,r,o){const i=n.providerIndexes,s=e.data,a=1048575&i,l=n.directiveStart,u=i>>20,h=o?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(o){const f=s[l];if(f&&$n(f)&&f.type===t)return l}return null}function go(n,e,t,r){let o=n[t];const i=e.data;if(function lS(n){return n instanceof as}(o)){const s=o;s.resolving&&function uE(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new j(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Ie(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ue(n)}(i[t]));const a=Ja(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Mn(s.injectImpl):null;Eg(n,r,oe.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&function sS(n,e,t){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=ug(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s)}o&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,o),i&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,i),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,i))}(t,i[t],e)}finally{null!==l&&Mn(l),Ja(a),s.resolving=!1,Ig()}}return o}function Ug(n,e,t){return!!(t[e+(n>>Ng)]&1<<n)}function Bg(n,e){return!(n&oe.Self||n&oe.Host&&e)}class Wo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Vg(this._tNode,this._lView,e,Ra(r),t)}}function yS(){return new Wo(Ot(),N())}function At(n){return vr(()=>{const e=n.prototype.constructor,t=e[br]||Pu(e),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const i=o[br]||Pu(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Pu(n){return iu(n)?()=>{const e=Pu(re(n));return e&&e()}:fo(n)}function Hg(n){const e=n[q],t=e.type;return 2===t?e.declTNode:1===t?n[Lt]:null}const Jo="__parameters__";function Qo(n,e,t){return vr(()=>{const r=function ku(n){return function(...t){if(n){const r=n(...t);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Jo)?l[Jo]:Object.defineProperty(l,Jo,{value:[]})[Jo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}class Y{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=J({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function mo(n,e){n.forEach(t=>Array.isArray(t)?mo(t,e):e(t))}function Gg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function fn(n,e,t){let r=Zo(n,e);return r>=0?n[1|r]=t:(r=~r,function wS(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(1===o)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;)n[o]=n[o-2],o--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Nu(n,e){const t=Zo(n,e);if(t>=0)return n[1|t]}function Zo(n,e){return function qg(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){const i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}(n,e,1)}const hs=es(Qo("Optional"),8),fs=es(Qo("SkipSelf"),4);var on=(()=>((on=on||{})[on.Important=1]="Important",on[on.DashCase=2]="DashCase",on))();const Uu=new Map;let zS=0;const Hu="__ngContext__";function Vt(n,e){dn(e)?(n[Hu]=e[os],function qS(n){Uu.set(n[os],n)}(e)):n[Hu]=e}let zu;function Gu(n,e){return zu(n,e)}function ys(n){const e=n[Ze];return Vn(e)?e[Ze]:e}function qu(n){return hm(n[ns])}function Wu(n){return hm(n[jn])}function hm(n){for(;null!==n&&!Vn(n);)n=n[jn];return n}function ei(n,e,t,r,o){if(null!=r){let i,s=!1;Vn(r)?i=r:dn(r)&&(s=!0,r=r[wr]);const a=Tt(r);0===n&&null!==t?null==o?_m(e,t,a):yo(e,t,a,o||null,!0):1===n&&null!==t?yo(e,t,a,o||null,!0):2===n?function ed(n,e,t){const r=rl(n,e);r&&function hM(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=i&&function gM(n,e,t,r,o){const i=t[Va];i!==Tt(t)&&ei(e,n,r,i,o);for(let a=zt;a<t.length;a++){const l=t[a];_s(l[q],l,n,e,r,i)}}(e,n,i,t,o)}}function Ju(n,e,t){return n.createElement(e,t)}function pm(n,e){const t=n[Ho],r=t.indexOf(e),o=e[Ze];512&e[ge]&&(e[ge]&=-513,yu(o,-1)),t.splice(r,1)}function Yu(n,e){if(n.length<=zt)return;const t=zt+e,r=n[t];if(r){const o=r[rs];null!==o&&o!==n&&pm(o,r),e>0&&(n[t-1][jn]=r[jn]);const i=Xa(n,zt+e);!function oM(n,e){_s(n,e,e[ve],2,null,null),e[wr]=null,e[Lt]=null}(r[q],r);const s=i[or];null!==s&&s.detachView(i[q]),r[Ze]=null,r[jn]=null,r[ge]&=-65}return r}function gm(n,e){if(!(128&e[ge])){const t=e[ve];t.destroyNode&&_s(n,e,t,3,null,null),function aM(n){let e=n[ns];if(!e)return Qu(n[q],n);for(;e;){let t=null;if(dn(e))t=e[ns];else{const r=e[zt];r&&(t=r)}if(!t){for(;e&&!e[jn]&&e!==n;)dn(e)&&Qu(e[q],e),e=e[Ze];null===e&&(e=n),dn(e)&&Qu(e[q],e),t=e&&e[jn]}e=t}}(e)}}function Qu(n,e){if(!(128&e[ge])){e[ge]&=-65,e[ge]|=128,function dM(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const o=e[t[r]];if(!(o instanceof as)){const i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],l=i[s+1];In(4,a,l);try{l.call(a)}finally{In(5,a,l)}}else{In(4,o,i);try{i.call(o)}finally{In(5,o,i)}}}}}(n,e),function uM(n,e){const t=n.cleanup,r=e[$o];let o=-1;if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const s=t[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=t[i+1]];t[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();e[$o]=null}}(n,e),1===e[q].type&&e[ve].destroy();const t=e[rs];if(null!==t&&Vn(e[Ze])){t!==e[Ze]&&pm(t,e);const r=e[or];null!==r&&r.detachView(n)}!function WS(n){Uu.delete(n[os])}(e)}}function mm(n,e,t){return function ym(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[wr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=n.data[r.directiveStart+o];if(i===rr.None||i===rr.Emulated)return null}return hn(r,t)}}(n,e.parent,t)}function yo(n,e,t,r,o){n.insertBefore(e,t,r,o)}function _m(n,e,t){n.appendChild(e,t)}function vm(n,e,t,r,o){null!==r?yo(n,e,t,r,o):_m(n,e,t)}function rl(n,e){return n.parentNode(e)}let Zu,rd,al,wm=function bm(n,e,t){return 40&n.type?hn(n,t):null};function ol(n,e,t,r){const o=mm(n,r,e),i=e[ve],a=function Cm(n,e,t){return wm(n,e,t)}(r.parent||e[Lt],r,e);if(null!=o)if(Array.isArray(t))for(let l=0;l<t.length;l++)vm(i,o,t[l],a,!1);else vm(i,o,t,a,!1);void 0!==Zu&&Zu(i,r,e,t,o)}function il(n,e){if(null!==e){const t=e.type;if(3&t)return hn(e,n);if(4&t)return Xu(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return il(n,r);{const o=n[e.index];return Vn(o)?Xu(-1,o):Tt(o)}}if(32&t)return Gu(e,n)()||Tt(n[e.index]);{const r=Em(n,e);return null!==r?Array.isArray(r)?r[0]:il(ys(n[jt]),r):il(n,e.next)}}return null}function Em(n,e){return null!==e?n[jt][Lt].projection[e.projection]:null}function Xu(n,e){const t=zt+n+1;if(t<e.length){const r=e[t],o=r[q].firstChild;if(null!==o)return il(r,o)}return e[Va]}function td(n,e,t,r,o,i,s){for(;null!=t;){const a=r[t.index],l=t.type;if(s&&0===e&&(a&&Vt(Tt(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)td(n,e,t.child,r,o,i,!1),ei(e,n,o,a,i);else if(32&l){const c=Gu(t,r);let u;for(;u=c();)ei(e,n,o,u,i);ei(e,n,o,a,i)}else 16&l?Sm(n,e,r,t,o,i):ei(e,n,o,a,i);t=s?t.projectionNext:t.next}}function _s(n,e,t,r,o,i){td(t,r,n.firstChild,e,o,i,!1)}function Sm(n,e,t,r,o,i){const s=t[jt],l=s[Lt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ei(e,n,o,l[c],i);else td(n,e,l,s[Ze],o,i,!0)}function Mm(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function xm(n,e,t){const{mergedAttrs:r,classes:o,styles:i}=t;null!==r&&xu(n,e,r),null!==o&&Mm(n,e,o),null!==i&&function yM(n,e,t){n.setAttribute(e,"style",t)}(n,e,i)}function Am(n){return function od(){if(void 0===al&&(al=null,ze.trustedTypes))try{al=ze.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return al}()?.createScriptURL(n)||n}class Pm{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kp})`}}function Br(n){return n instanceof Pm?n.changingThisBreaksApplicationSecurity:n}function vs(n,e){const t=function xM(n){return n instanceof Pm&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Kp})`)}return t===e}const AM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var dt=(()=>((dt=dt||{})[dt.NONE=0]="NONE",dt[dt.HTML=1]="HTML",dt[dt.STYLE=2]="STYLE",dt[dt.SCRIPT=3]="SCRIPT",dt[dt.URL=4]="URL",dt[dt.RESOURCE_URL=5]="RESOURCE_URL",dt))();function bs(n){const e=ws();return e?e.sanitize(dt.URL,n)||"":vs(n,"URL")?Br(n):function id(n){return(n=String(n)).match(AM)?n:"unsafe:"+n}(ue(n))}function Vm(n){const e=ws();if(e)return Am(e.sanitize(dt.RESOURCE_URL,n)||"");if(vs(n,"ResourceURL"))return Am(Br(n));throw new j(904,!1)}function ws(){const n=N();return n&&n[fu]}const cl=new Y("ENVIRONMENT_INITIALIZER"),Um=new Y("INJECTOR",-1),Bm=new Y("INJECTOR_DEF_TYPES");class Hm{get(e,t=Zi){if(t===Zi){const r=new Error(`NullInjectorError: No provider for ${Ve(e)}!`);throw r.name="NullInjectorError",r}return t}}function GM(...n){return{\u0275providers:zm(0,n),\u0275fromNgModule:!0}}function zm(n,...e){const t=[],r=new Set;let o;return mo(e,i=>{const s=i;cd(s,t,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&Gm(o,t),t}function Gm(n,e){for(let t=0;t<n.length;t++){const{providers:o}=n[t];ud(o,i=>{e.push(i)})}}function cd(n,e,t,r){if(!(n=re(n)))return!1;let o=null,i=Yp(n);const s=!i&&Oe(n);if(i||s){if(s&&!s.standalone)return!1;o=n}else{const l=n.ngModule;if(i=Yp(l),!i)return!1;o=l}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)cd(c,e,t,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{mo(i.imports,u=>{cd(u,e,t,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&Gm(c,e)}if(!a){const c=fo(o)||(()=>new o);e.push({provide:o,useFactory:c,deps:xe},{provide:Bm,useValue:o,multi:!0},{provide:cl,useValue:()=>G(o),multi:!0})}const l=i.providers;null==l||a||ud(l,u=>{e.push(u)})}}return o!==n&&void 0!==n.providers}function ud(n,e){for(let t of n)su(t)&&(t=t.\u0275providers),Array.isArray(t)?ud(t,e):e(t)}const qM=Fe({provide:String,useValue:Fe});function dd(n){return null!==n&&"object"==typeof n&&qM in n}function _o(n){return"function"==typeof n}const hd=new Y("Set Injector scope."),ul={},KM={};let fd;function dl(){return void 0===fd&&(fd=new Hm),fd}class ar{}class Km extends ar{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gd(e,s=>this.processProvider(s)),this.records.set(Um,ni(void 0,this)),o.has("environment")&&this.records.set(ar,ni(void 0,this));const i=this.records.get(hd);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Bm.multi,xe,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=jo(this),r=Mn(void 0);try{return e()}finally{jo(t),Mn(r)}}get(e,t=Zi,r=oe.Default){this.assertNotDestroyed(),r=Ra(r);const o=jo(this),i=Mn(void 0);try{if(!(r&oe.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function XM(n){return"function"==typeof n||"object"==typeof n&&n instanceof Y}(e)&&Aa(e);a=l&&this.injectableDefInScope(l)?ni(pd(e),ul):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&oe.Self?dl():this.parent).get(e,t=r&oe.Optional&&t===Zi?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[ka]=s[ka]||[]).unshift(Ve(e)),o)throw s;return function EE(n,e,t,r){const o=n[ka];throw e[Xp]&&o.unshift(e[Xp]),n.message=function SE(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==bE?n.slice(2):n;let o=Ve(e);if(Array.isArray(e))o=e.map(Ve).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Ve(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(CE,"\n  ")}`}("\n"+n.message,o,t,r),n[vE]=o,n[ka]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{Mn(i),jo(o)}}resolveInjectorInitializers(){const e=jo(this),t=Mn(void 0);try{const r=this.get(cl.multi,xe,oe.Self);for(const o of r)o()}finally{jo(e),Mn(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ve(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){let t=_o(e=re(e))?e:re(e&&e.provide);const r=function YM(n){return dd(n)?ni(void 0,n.useValue):ni(Jm(n),ul)}(e);if(_o(e)||!0!==e.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=ni(void 0,ul,!0),o.factory=()=>uu(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===ul&&(t.value=KM,t.value=t.factory()),"object"==typeof t.value&&t.value&&function ZM(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=re(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function pd(n){const e=Aa(n),t=null!==e?e.factory:fo(n);if(null!==t)return t;if(n instanceof Y)throw new j(204,!1);if(n instanceof Function)return function JM(n){const e=n.length;if(e>0)throw function ds(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new j(204,!1);const t=function mE(n){return n&&(n[Pa]||n[Qp])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new j(204,!1)}function Jm(n,e,t){let r;if(_o(n)){const o=re(n);return fo(o)||pd(o)}if(dd(n))r=()=>re(n.useValue);else if(function Wm(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...uu(n.deps||[]));else if(function qm(n){return!(!n||!n.useExisting)}(n))r=()=>G(re(n.useExisting));else{const o=re(n&&(n.useClass||n.provide));if(!function QM(n){return!!n.deps}(n))return fo(o)||pd(o);r=()=>new o(...uu(n.deps))}return r}function ni(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function gd(n,e){for(const t of n)Array.isArray(t)?gd(t,e):t&&su(t)?gd(t.\u0275providers,e):e(t)}class ex{}class Ym{}class nx{resolveComponentFactory(e){throw function tx(n){const e=Error(`No component factory found for ${Ve(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ds=(()=>{class n{}return n.NULL=new nx,n})();function rx(){return ri(Ot(),N())}function ri(n,e){return new pn(hn(n,e))}let pn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=rx,n})();function ox(n){return n instanceof pn?n.nativeElement:n}class Zm{}let Mr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ix(){const n=N(),t=rn(Ot().index,n);return(dn(t)?t:n)[ve]}(),n})(),sx=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>null}),n})();class Es{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ax=new Es("15.2.10"),md={},yd="ngOriginalError";function _d(n){return n[yd]}class oi{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&_d(e);for(;t&&_d(t);)t=_d(t);return t||null}}function xr(n){return n instanceof Function?n():n}function ey(n,e,t){let r=n.length;for(;;){const o=n.indexOf(e,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}const ty="ng-template";function _x(n,e,t){let r=0,o=!0;for(;r<n.length;){let i=n[r++];if("string"==typeof i&&o){const s=n[r++];if(t&&"class"===i&&-1!==ey(s.toLowerCase(),e,0))return!0}else{if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function ny(n){return 4===n.type&&n.value!==ty}function vx(n,e,t){return e===(4!==n.type||t?n.value:ty)}function Cx(n,e,t){let r=4;const o=n.attrs||[],i=function Dx(n){for(let e=0;e<n.length;e++)if(Og(n[e]))return e;return n.length}(o);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!vx(n,l,t)||""===l&&1===e.length){if(Un(r))return!1;s=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!_x(n.attrs,c,t)){if(Un(r))return!1;s=!0}continue}const d=bx(8&r?"class":l,o,ny(n),t);if(-1===d){if(Un(r))return!1;s=!0;continue}if(""!==c){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==ey(f,c,0)||2&r&&c!==h){if(Un(r))return!1;s=!0}}}}else{if(!s&&!Un(r)&&!Un(l))return!1;if(s&&Un(l))continue;s=!1,r=l|1&r}}return Un(r)||s}function Un(n){return 0==(1&n)}function bx(n,e,t,r){if(null===e)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){const s=e[o];if(s===n)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function Ex(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ry(n,e,t=!1){for(let r=0;r<e.length;r++)if(Cx(n,e[r],t))return!0;return!1}function oy(n,e){return n?":not("+e.trim()+")":e}function Mx(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Un(s)&&(e+=oy(i,o),o=""),r=s,i=i||!Un(r);t++}return""!==o&&(e+=oy(i,o)),e}const he={};function x(n){iy(Me(),N(),qt()+n,!1)}function iy(n,e,t,r){if(!r)if(3==(3&e[ge])){const i=n.preOrderCheckHooks;null!==i&&Ga(e,i,t)}else{const i=n.preOrderHooks;null!==i&&qa(e,i,0,t)}po(t)}function cy(n,e=null,t=null,r){const o=uy(n,e,t,r);return o.resolveInjectorInitializers(),o}function uy(n,e=null,t=null,r,o=new Set){const i=[t||xe,GM(n)];return r=r||("object"==typeof n?void 0:Ve(n)),new Km(i,e||dl(),r||null,o)}let lr=(()=>{class n{static create(t,r){if(Array.isArray(t))return cy({name:""},r,t,"");{const o=t.name??"";return cy({name:o},t.parent,t.providers,o)}}}return n.THROW_IF_NOT_FOUND=Zi,n.NULL=new Hm,n.\u0275prov=J({token:n,providedIn:"any",factory:()=>G(Um)}),n.__NG_ELEMENT_ID__=-1,n})();function A(n,e=oe.Default){const t=N();return null===t?G(n,e):Vg(Ot(),t,re(n),e)}function _y(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r+1];if(-1!==i){const s=n.data[i];wu(t[r]),s.contentQueries(2,e[i],i)}}}function fl(n,e,t,r,o,i,s,a,l,c,u){const d=e.blueprint.slice();return d[wr]=o,d[ge]=76|r,(null!==u||n&&1024&n[ge])&&(d[ge]|=1024),mg(d),d[Ze]=d[Uo]=n,d[ot]=t,d[ja]=s||n&&n[ja],d[ve]=a||n&&n[ve],d[fu]=l||n&&n[fu]||null,d[La]=c||n&&n[La]||null,d[Lt]=i,d[os]=function GS(){return zS++}(),d[sg]=u,d[jt]=2==e.type?n[jt]:d,d}function ai(n,e,t,r,o){let i=n.data[e];if(null===i)i=function Dd(n,e,t,r,o){const i=vg(),s=_u(),l=n.data[e]=function Zx(n,e,t,r,o,i){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,t,e,r,o);return null===n.firstChild&&(n.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(n,e,t,r,o),function JE(){return de.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=t,i.value=r,i.attrs=o;const s=function ss(){const n=de.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return ir(i,!0),i}function Ss(n,e,t,r){if(0===t)return-1;const o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function Ed(n,e,t){Du(e);try{const r=n.viewQuery;null!==r&&kd(1,r,t);const o=n.template;null!==o&&vy(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&_y(n,e),n.staticViewQueries&&kd(2,n.viewQuery,t);const i=n.components;null!==i&&function Jx(n,e){for(let t=0;t<e.length;t++)_I(n,e[t])}(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ge]&=-5,Eu()}}function pl(n,e,t,r){const o=e[ge];if(128!=(128&o)){Du(e);try{mg(e),function bg(n){return de.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&vy(n,e,t,2,r);const s=3==(3&o);if(s){const c=n.preOrderCheckHooks;null!==c&&Ga(e,c,null)}else{const c=n.preOrderHooks;null!==c&&qa(e,c,0,null),Su(e,0)}if(function mI(n){for(let e=qu(n);null!==e;e=Wu(e)){if(!e[ag])continue;const t=e[Ho];for(let r=0;r<t.length;r++){const o=t[r];512&o[ge]||yu(o[Ze],1),o[ge]|=512}}}(e),function gI(n){for(let e=qu(n);null!==e;e=Wu(e))for(let t=zt;t<e.length;t++){const r=e[t],o=r[q];Ha(r)&&pl(o,r,o.template,r[ot])}}(e),null!==n.contentQueries&&_y(n,e),s){const c=n.contentCheckHooks;null!==c&&Ga(e,c)}else{const c=n.contentHooks;null!==c&&qa(e,c,1),Su(e,1)}!function Wx(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)po(~o);else{const i=o,s=t[++r],a=t[++r];YE(s,i),a(2,e[i])}}}finally{po(-1)}}(n,e);const a=n.components;null!==a&&function Kx(n,e){for(let t=0;t<e.length;t++)yI(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&kd(2,l,r),s){const c=n.viewCheckHooks;null!==c&&Ga(e,c)}else{const c=n.viewHooks;null!==c&&qa(e,c,2),Su(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ge]&=-41,512&e[ge]&&(e[ge]&=-513,yu(e[Ze],-1))}finally{Eu()}}}function vy(n,e,t,r,o){const i=qt(),s=2&r;try{po(-1),s&&e.length>Ge&&iy(n,e,Ge,!1),In(s?2:0,o),t(r,o)}finally{po(i),In(s?3:1,o)}}function Sd(n,e,t){if(gu(e)){const o=e.directiveEnd;for(let i=e.directiveStart;i<o;i++){const s=n.data[i];s.contentQueries&&s.contentQueries(1,t[i],i)}}}function Md(n,e,t){_g()&&(function iI(n,e,t,r){const o=t.directiveStart,i=t.directiveEnd;is(t)&&function hI(n,e,t){const r=hn(e,n),o=Cy(t),i=n[ja],s=gl(n,fl(n,o,null,t.onPush?32:16,r,e,i,i.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||Ya(t,e),Vt(r,e);const s=t.initialInputs;for(let a=o;a<i;a++){const l=n.data[a],c=go(e,n,a,t);Vt(c,e),null!==s&&fI(0,a-o,c,l,0,s),$n(l)&&(rn(t.index,e)[ot]=go(e,n,a,t))}}(n,e,t,hn(t,e)),64==(64&t.flags)&&Sy(n,e,t))}function xd(n,e,t=hn){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?t(e,n):n[s];n[o++]=a}}}function Cy(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Id(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Id(n,e,t,r,o,i,s,a,l,c){const u=Ge+r,d=u+o,h=function Yx(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:he);return t}(u,d),f="function"==typeof c?c():c;return h[q]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function by(n,e,t,r){const o=xy(e);null===t?o.push(r):(o.push(t),n.firstCreatePass&&Iy(n).push(r,o.length-1))}function wy(n,e,t,r){for(let o in n)if(n.hasOwnProperty(o)){t=null===t?{}:t;const i=n[o];null===r?Dy(t,e,o,i):r.hasOwnProperty(o)&&Dy(t,e,r[o],i)}return t}function Dy(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Td(n,e,t,r){if(_g()){const o=null===r?null:{"":-1},i=function aI(n,e){const t=n.directiveRegistry;let r=null,o=null;if(t)for(let i=0;i<t.length;i++){const s=t[i];if(ry(e,s.selectors,!1))if(r||(r=[]),$n(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Od(n,e,a.length)}else r.unshift(s),Od(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(n,t);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&Ey(n,e,t,s,o,a),o&&function lI(n,e,t){if(e){const r=n.localNames=[];for(let o=0;o<e.length;o+=2){const i=t[e[o+1]];if(null==i)throw new j(-301,!1);r.push(e[o],i)}}}(t,r,o)}t.mergedAttrs=ls(t.mergedAttrs,t.attrs)}function Ey(n,e,t,r,o,i){for(let c=0;c<r.length;c++)Au(Ya(t,e),n,r[c].type);!function uI(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Ss(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=ls(t.mergedAttrs,u.hostAttrs),dI(n,t,e,l,u),cI(l,u,o),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function Xx(n,e,t){const o=e.directiveEnd,i=n.data,s=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<o;u++){const d=i[u],h=t?t.get(d):null,p=h?h.outputs:null;l=wy(d.inputs,u,l,h?h.inputs:null),c=wy(d.outputs,u,c,p);const g=null===l||null===s||ny(e)?null:pI(l,u,s);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,i)}function Sy(n,e,t){const r=t.directiveStart,o=t.directiveEnd,i=t.index,s=function QE(){return de.lFrame.currentDirectiveIndex}();try{po(i);for(let a=r;a<o;a++){const l=n.data[a],c=e[a];Cu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&sI(l,c)}}finally{po(-1),Cu(s)}}function sI(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Od(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function cI(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;$n(e)&&(t[""]=n)}}function dI(n,e,t,r,o){n.data[r]=o;const i=o.factory||(o.factory=fo(o.type)),s=new as(i,$n(o),A);n.blueprint[r]=s,t[r]=s,function rI(n,e,t,r,o){const i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function oI(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,i)}}(n,e,r,Ss(n,t,o.hostVars,he),o)}function cr(n,e,t,r,o,i){const s=hn(n,e);!function Ad(n,e,t,r,o,i,s){if(null==i)n.removeAttribute(e,o,t);else{const a=null==s?ue(i):s(i,r||"",o);n.setAttribute(e,o,a,t)}}(e[ve],s,i,n.value,t,r,o)}function fI(n,e,t,r,o,i){const s=i[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function pI(n,e,t){let r=null,o=0;for(;o<t.length;){const i=t[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const s=n[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function My(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function yI(n,e){const t=rn(e,n);if(Ha(t)){const r=t[q];48&t[ge]?pl(r,t,r.template,t[ot]):t[ho]>0&&Pd(t)}}function Pd(n){for(let r=qu(n);null!==r;r=Wu(r))for(let o=zt;o<r.length;o++){const i=r[o];if(Ha(i))if(512&i[ge]){const s=i[q];pl(s,i,s.template,i[ot])}else i[ho]>0&&Pd(i)}const t=n[q].components;if(null!==t)for(let r=0;r<t.length;r++){const o=rn(t[r],n);Ha(o)&&o[ho]>0&&Pd(o)}}function _I(n,e){const t=rn(e,n),r=t[q];(function vI(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Ed(r,t,t[ot])}function gl(n,e){return n[ns]?n[ig][jn]=e:n[ns]=e,n[ig]=e,e}function ml(n){for(;n;){n[ge]|=32;const e=ys(n);if(AE(n)&&!e)return n;n=e}return null}function yl(n,e,t,r=!0){const o=e[ja];o.begin&&o.begin();try{pl(n,e,n.template,t)}catch(s){throw r&&Oy(e,s),s}finally{o.end&&o.end()}}function kd(n,e,t){wu(0),e(n,t)}function xy(n){return n[$o]||(n[$o]=[])}function Iy(n){return n.cleanup||(n.cleanup=[])}function Oy(n,e){const t=n[La],r=t?t.get(oi,null):null;r&&r.handleError(e)}function Rd(n,e,t,r,o){for(let i=0;i<t.length;){const s=t[i++],a=t[i++],l=e[s],c=n.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function Ir(n,e,t){const r=Ba(e,n);!function fm(n,e,t){n.setValue(e,t)}(n[ve],r,t)}function _l(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=ou(o,a):2==i&&(r=ou(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function vl(n,e,t,r,o=!1){for(;null!==t;){const i=e[t.index];if(null!==i&&r.push(Tt(i)),Vn(i))for(let a=zt;a<i.length;a++){const l=i[a],c=l[q].firstChild;null!==c&&vl(l[q],l,c,r)}const s=t.type;if(8&s)vl(n,e,t.child,r);else if(32&s){const a=Gu(t,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=Em(e,t);if(Array.isArray(a))r.push(...a);else{const l=ys(e[jt]);vl(l[q],l,a,r,!0)}}t=o?t.projectionNext:t.next}return r}class Ms{get rootNodes(){const e=this._lView,t=e[q];return vl(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ot]}set context(e){this._lView[ot]=e}get destroyed(){return 128==(128&this._lView[ge])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ze];if(Vn(e)){const t=e[$a],r=t?t.indexOf(this):-1;r>-1&&(Yu(e,r),Xa(t,r))}this._attachedToViewContainer=!1}gm(this._lView[q],this._lView)}onDestroy(e){by(this._lView[q],this._lView,null,e)}markForCheck(){ml(this._cdRefInjectingView||this._lView)}detach(){this._lView[ge]&=-65}reattach(){this._lView[ge]|=64}detectChanges(){yl(this._lView[q],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sM(n,e){_s(n,e,e[ve],2,null,null)}(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e}}class CI extends Ms{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;yl(e[q],e,e[ot],!1)}checkNoChanges(){}get context(){return null}}class Ay extends Ds{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Oe(e);return new xs(t,this.ngModule)}}function Py(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class wI{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ra(r);const o=this.injector.get(e,md,r);return o!==md||t===md?o:this.parentInjector.get(e,t,r)}}class xs extends Ym{get inputs(){return Py(this.componentDef.inputs)}get outputs(){return Py(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function xx(n){return n.map(Mx).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=(o=o||this.ngModule)instanceof ar?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new wI(e,i):e,a=s.get(Zm,null);if(null===a)throw new j(407,!1);const l=s.get(sx,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function Qx(n,e,t){return n.selectRootElement(e,t===rr.ShadowDom)}(c,r,this.componentDef.encapsulation):Ju(c,u,function bI(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Id(0,null,null,1,0,null,null,null,null,null),p=fl(null,f,null,h,null,null,a,c,l,s,null);let g,m;Du(p);try{const v=this.componentDef;let M,w=null;v.findHostDirectiveDefs?(M=[],w=new Map,v.findHostDirectiveDefs(v,M,w),M.push(v)):M=[v];const k=function EI(n,e){const t=n[q],r=Ge;return n[r]=e,ai(t,r,2,"#host",null)}(p,d),F=function SI(n,e,t,r,o,i,s,a){const l=o[q];!function MI(n,e,t,r){for(const o of n)e.mergedAttrs=ls(e.mergedAttrs,o.hostAttrs);null!==e.mergedAttrs&&(_l(e,e.mergedAttrs,!0),null!==t&&xm(r,t,e))}(r,n,e,s);const c=i.createRenderer(e,t),u=fl(o,Cy(t),null,t.onPush?32:16,o[n.index],n,i,c,a||null,null,null);return l.firstCreatePass&&Od(l,n,r.length-1),gl(o,u),o[n.index]=u}(k,d,v,M,p,a,c);m=gg(f,Ge),d&&function II(n,e,t,r){if(r)xu(n,t,["ng-version",ax.full]);else{const{attrs:o,classes:i}=function Ix(n){const e=[],t=[];let r=1,o=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===o?""!==i&&e.push(i,n[++r]):8===o&&t.push(i);else{if(!Un(o))break;o=i}r++}return{attrs:e,classes:t}}(e.selectors[0]);o&&xu(n,t,o),i&&i.length>0&&Mm(n,t,i.join(" "))}}(c,v,d,r),void 0!==t&&function TI(n,e,t){const r=n.projection=[];for(let o=0;o<e.length;o++){const i=t[o];r.push(null!=i?Array.from(i):null)}}(m,this.ngContentSelectors,t),g=function xI(n,e,t,r,o,i){const s=Ot(),a=o[q],l=hn(s,o);Ey(a,o,s,t,null,r);for(let u=0;u<t.length;u++)Vt(go(o,a,s.directiveStart+u,s),o);Sy(a,o,s),l&&Vt(l,o);const c=go(o,a,s.directiveStart+s.componentOffset,s);if(n[ot]=o[ot]=c,null!==i)for(const u of i)u(c,e);return Sd(a,s,n),c}(F,v,M,w,p,[OI]),Ed(f,p,null)}finally{Eu()}return new DI(this.componentType,g,ri(m,p),p,m)}}class DI extends ex{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new CI(o),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[e])){const i=this._rootLView;Rd(i[q],i,o,e,t),ml(rn(this._tNode.index,i))}}get injector(){return new Wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function OI(){const n=Ot();za(N()[q],n)}function Pe(n){let e=function ky(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let o;if($n(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);o=e.\u0275dir}if(o){if(t){r.push(o);const s=n;s.inputs=Nd(n.inputs),s.declaredInputs=Nd(n.declaredInputs),s.outputs=Nd(n.outputs);const a=o.hostBindings;a&&RI(n,a);const l=o.viewQuery,c=o.contentQueries;if(l&&PI(n,l),c&&kI(n,c),ru(n.inputs,o.inputs),ru(n.declaredInputs,o.declaredInputs),ru(n.outputs,o.outputs),$n(o)&&o.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(n),a===Pe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function AI(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const o=n[r];o.hostVars=e+=o.hostVars,o.hostAttrs=ls(o.hostAttrs,t=ls(t,o.hostAttrs))}}(r)}function Nd(n){return n===Cr?{}:n===xe?[]:n}function PI(n,e){const t=n.viewQuery;n.viewQuery=t?(r,o)=>{e(r,o),t(r,o)}:e}function kI(n,e){const t=n.contentQueries;n.contentQueries=t?(r,o,i)=>{e(r,o,i),t(r,o,i)}:e}function RI(n,e){const t=n.hostBindings;n.hostBindings=t?(r,o)=>{e(r,o),t(r,o)}:e}function Cl(n){return!!Fd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Fd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ur(n,e,t){return n[e]=t}function $t(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function vo(n,e,t,r){const o=$t(n,e,t);return $t(n,e+1,r)||o}function Ut(n,e,t,r){const o=N();return $t(o,Go(),e)&&(Me(),cr(Je(),o,n,e,t,r)),Ut}function ui(n,e,t,r,o,i){const a=vo(n,function Dr(){return de.lFrame.bindingIndex}(),t,o);return Er(2),a?e+ue(t)+r+ue(o)+i:he}function ae(n,e,t,r,o,i,s,a){const l=N(),c=Me(),u=n+Ge,d=c.firstCreatePass?function zI(n,e,t,r,o,i,s,a,l){const c=e.consts,u=ai(e,n,4,s||null,Ur(c,a));Td(e,t,u,Ur(c,l)),za(e,u);const d=u.tView=Id(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,o,i,s):c.data[u];ir(d,!1);const h=l[ve].createComment("");ol(c,l,h,d),Vt(h,l),gl(l,l[u]=My(h,l,h,d)),Ua(d)&&Md(c,l,d),null!=s&&xd(l,d,a)}function wl(n){return function zo(n,e){return n[e]}(function KE(){return de.lFrame.contextLView}(),Ge+n)}function $(n,e,t){const r=N();return $t(r,Go(),e)&&function gn(n,e,t,r,o,i,s,a){const l=hn(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(Rd(n,t,u,r,o),is(e)&&function tI(n,e){const t=rn(e,n);16&t[ge]||(t[ge]|=32)}(t,e.index)):3&e.type&&(r=function eI(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=s?s(o,e.value||"",r):o,i.setProperty(l,r,o))}(Me(),Je(),r,n,e,r[ve],t,!1),$}function Ld(n,e,t,r,o){const s=o?"class":"style";Rd(n,t,e.inputs[s],s,r)}function _(n,e,t,r){const o=N(),i=Me(),s=Ge+n,a=o[ve],l=i.firstCreatePass?function qI(n,e,t,r,o,i){const s=e.consts,l=ai(e,n,2,r,Ur(s,o));return Td(e,t,l,Ur(s,i)),null!==l.attrs&&_l(l,l.attrs,!1),null!==l.mergedAttrs&&_l(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,i,o,e,t,r):i.data[s],c=o[s]=Ju(a,e,function iS(){return de.lFrame.currentNamespace}()),u=Ua(l);return ir(l,!0),xm(a,c,l),32!=(32&l.flags)&&ol(i,o,c,l),0===function HE(){return de.lFrame.elementDepthCount}()&&Vt(c,o),function zE(){de.lFrame.elementDepthCount++}(),u&&(Md(i,o,l),Sd(i,l,o)),null!==r&&xd(o,l),_}function C(){let n=Ot();_u()?vu():(n=n.parent,ir(n,!1));const e=n;!function GE(){de.lFrame.elementDepthCount--}();const t=Me();return t.firstCreatePass&&(za(t,n),gu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function cS(n){return 0!=(8&n.flags)}(e)&&Ld(t,e,N(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function uS(n){return 0!=(16&n.flags)}(e)&&Ld(t,e,N(),e.stylesWithoutHost,!1),C}function an(n,e,t,r){return _(n,e,t,r),C(),an}function Hr(n,e,t){const r=N(),o=Me(),i=n+Ge,s=o.firstCreatePass?function WI(n,e,t,r,o){const i=e.consts,s=Ur(i,r),a=ai(e,n,8,"ng-container",s);return null!==s&&_l(a,s,!0),Td(e,t,a,Ur(i,o)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,o,r,e,t):o.data[i];ir(s,!0);const a=r[i]=r[ve].createComment("");return ol(o,r,a,s),Vt(a,r),Ua(s)&&(Md(o,r,s),Sd(o,s,r)),null!=t&&xd(r,s),Hr}function zr(){let n=Ot();const e=Me();return _u()?vu():(n=n.parent,ir(n,!1)),e.firstCreatePass&&(za(e,n),gu(n)&&e.queries.elementEnd(n)),zr}function Pt(){return N()}function Ts(n){return!!n&&"function"==typeof n.then}const jd=function Wy(n){return!!n&&"function"==typeof n.subscribe};function H(n,e,t,r){const o=N(),i=Me(),s=Ot();return function Jy(n,e,t,r,o,i,s){const a=Ua(r),c=n.firstCreatePass&&Iy(n),u=e[ot],d=xy(e);let h=!0;if(3&r.type||s){const g=hn(r,e),m=s?s(g):g,v=d.length,M=s?k=>s(Tt(k[r.index])):r.index;let w=null;if(!s&&a&&(w=function KI(n,e,t,r){const o=n.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===t&&o[i+1]===r){const a=e[$o],l=o[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(n,e,o,r.index)),null!==w)(w.__ngLastListenerFn__||w).__ngNextListenerFn__=i,w.__ngLastListenerFn__=i,h=!1;else{i=Qy(r,e,u,i,!1);const k=t.listen(m,o,i);d.push(i,k),c&&c.push(o,M,v,v+1)}}else i=Qy(r,e,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const F=e[p[m]][p[m+1]].subscribe(i),W=d.length;d.push(i,F),c&&c.push(o,r.index,W,-(W+1))}}}(i,o,o[ve],s,n,e,r),H}function Yy(n,e,t,r){try{return In(6,e,t),!1!==t(r)}catch(o){return Oy(n,o),!1}finally{In(7,e,t)}}function Qy(n,e,t,r,o){return function i(s){if(s===Function)return r;ml(n.componentOffset>-1?rn(n.index,e):e);let l=Yy(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)l=Yy(e,t,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function U(n=1){return function XE(n){return(de.lFrame.contextLView=function eS(n,e){for(;n>0;)e=e[Uo],n--;return e}(n,de.lFrame.contextLView))[ot]}(n)}function Dl(n,e){return n<<17|e<<2}function Gr(n){return n>>17&32767}function $d(n){return 2|n}function Co(n){return(131068&n)>>2}function Ud(n,e){return-131069&n|e<<2}function Bd(n){return 1|n}function a_(n,e,t,r,o){const i=n[t+1],s=null===e;let a=r?Gr(i):Co(i),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];rT(n[a],e)&&(l=!0,n[a+1]=r?Bd(u):$d(u)),a=r?Gr(u):Co(u)}l&&(n[t+1]=r?$d(i):Bd(i))}function rT(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Zo(n,e)>=0}function Os(n,e,t){return Bn(n,e,t,!1),Os}function bt(n,e){return Bn(n,e,null,!0),bt}function Bn(n,e,t,r){const o=N(),i=Me(),s=Er(2);i.firstUpdatePass&&function g_(n,e,t,r){const o=n.data;if(null===o[t+1]){const i=o[qt()],s=function p_(n,e){return e>=n.expandoStartIndex}(n,t);(function v_(n,e){return 0!=(n.flags&(e?8:16))})(i,r)&&null===e&&!s&&(e=!1),e=function hT(n,e,t,r){const o=function bu(n){const e=de.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let i=r?e.residualClasses:e.residualStyles;if(null===o)0===(r?e.classBindings:e.styleBindings)&&(t=As(t=Hd(null,n,e,t,r),e.attrs,r),i=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==o)if(t=Hd(o,n,e,t,r),null===i){let l=function fT(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Co(r))return n[Gr(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=Hd(null,n,e,l[1],r),l=As(l,e.attrs,r),function pT(n,e,t,r){n[Gr(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else i=function gT(n,e,t){let r;const o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++)r=As(r,n[i].hostAttrs,t);return As(r,e.attrs,t)}(n,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),t}(o,i,e,r),function tT(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=Gr(s),l=Co(s);n[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||Zo(t,u)>0)&&(c=!0)):u=t,o)if(0!==l){const h=Gr(n[a+1]);n[r+1]=Dl(h,a),0!==h&&(n[h+1]=Ud(n[h+1],r)),n[a+1]=function XI(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Dl(a,0),0!==a&&(n[a+1]=Ud(n[a+1],r)),a=r;else n[r+1]=Dl(l,0),0===a?a=r:n[l+1]=Ud(n[l+1],r),l=r;c&&(n[r+1]=$d(n[r+1])),a_(n,u,r,!0),a_(n,u,r,!1),function nT(n,e,t,r,o){const i=o?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof e&&Zo(i,e)>=0&&(t[r+1]=Bd(t[r+1]))}(e,u,n,r,i),s=Dl(a,l),i?e.classBindings=s:e.styleBindings=s}(o,i,e,t,s,r)}}(i,n,s,r),e!==he&&$t(o,s,e)&&function y_(n,e,t,r,o,i,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function eT(n){return 1==(1&n)}(c)?__(l,e,t,o,Co(c),s):void 0;El(u)||(El(i)||function ZI(n){return 2==(2&n)}(c)&&(i=__(l,null,t,o,a,s)),function mM(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=-1===r.indexOf("-")?void 0:on.DashCase;null==o?n.removeStyle(t,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=on.Important),n.setStyle(t,r,o,i))}}(r,s,Ba(qt(),t),o,i))}(i,i.data[qt()],o,o[ve],n,o[s+1]=function vT(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ve(Br(n)))),n}(e,t),r,s)}function Hd(n,e,t,r,o){let i=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(i=e[a],r=As(r,i.hostAttrs,o),i!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function As(n,e,t){const r=t?1:2;let o=-1;if(null!==e)for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?o=s:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),fn(n,s,!!t||e[++i]))}return void 0===n?null:n}function __(n,e,t,r,o,i){const s=null===e;let a;for(;o>0;){const l=n[o],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[o+1];h===he&&(h=d?xe:void 0);let f=d?Nu(h,r):u===r?h:void 0;if(c&&!El(f)&&(f=Nu(l,r)),El(f)&&(a=f,s))return a;const p=n[o+1];o=s?Gr(p):Co(p)}if(null!==e){let l=i?e.residualClasses:e.residualStyles;null!=l&&(a=Nu(l,r))}return a}function El(n){return void 0!==n}function I(n,e=""){const t=N(),r=Me(),o=n+Ge,i=r.firstCreatePass?ai(r,o,1,e,null):r.data[o],s=t[o]=function Ku(n,e){return n.createText(e)}(t[ve],e);ol(r,t,s,i),ir(i,!1)}function kt(n){return Xe("",n,""),kt}function Xe(n,e,t){const r=N(),o=function ci(n,e,t,r){return $t(n,Go(),t)?e+ue(t)+r:he}(r,n,e,t);return o!==he&&Ir(r,qt(),o),Xe}function qr(n,e,t,r,o){const i=N(),s=ui(i,n,e,t,r,o);return s!==he&&Ir(i,qt(),s),qr}const vi="en-US";let $_=vi;function qd(n,e,t,r,o){if(n=re(n),Array.isArray(n))for(let i=0;i<n.length;i++)qd(n[i],e,t,r,o);else{const i=Me(),s=N();let a=_o(n)?n:re(n.provide),l=Jm(n);const c=Ot(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(_o(n)||!n.multi){const f=new as(l,o,A),p=Kd(a,e,o?u:u+h,d);-1===p?(Au(Ya(c,s),i,a),Wd(i,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=Kd(a,e,u+h,d),p=Kd(a,e,u,u+h),m=p>=0&&t[p];if(o&&!m||!o&&!(f>=0&&t[f])){Au(Ya(c,s),i,a);const v=function L1(n,e,t,r,o){const i=new as(n,t,A);return i.multi=[],i.index=e,i.componentProviders=0,dv(i,o,r&&!t),i}(o?F1:N1,t.length,o,r,l);!o&&m&&(t[p].providerFactory=v),Wd(i,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),t.push(v),s.push(v)}else Wd(i,n,f>-1?f:p,dv(t[o?p:f],l,!o&&r));!o&&r&&m&&t[p].componentProviders++}}}function Wd(n,e,t,r){const o=_o(e),i=function WM(n){return!!n.useClass}(e);if(o||i){const l=(i?re(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function dv(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Kd(n,e,t,r){for(let o=t;o<r;o++)if(e[o]===n)return o;return-1}function N1(n,e,t,r){return Jd(this.multi,[])}function F1(n,e,t,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=go(t,t[q],this.providerFactory.index,r);i=a.slice(0,s),Jd(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],Jd(o,i);return i}function Jd(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function We(n,e=[]){return t=>{t.providersResolver=(r,o)=>function R1(n,e,t){const r=Me();if(r.firstCreatePass){const o=$n(n);qd(t,r.data,r.blueprint,o,!0),qd(e,r.data,r.blueprint,o,!1)}}(r,o?o(n):n,e)}}class Ci{}class hv{}class fv extends Ci{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ay(this);const r=un(e);this._bootstrapComponents=xr(r.bootstrap),this._r3Injector=uy(e,t,[{provide:Ci,useValue:this},{provide:Ds,useValue:this.componentFactoryResolver}],Ve(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Yd extends hv{constructor(e){super(),this.moduleType=e}create(e){return new fv(this.moduleType,e)}}class V1 extends Ci{constructor(e,t,r){super(),this.componentFactoryResolver=new Ay(this),this.instance=null;const o=new Km([...e,{provide:Ci,useValue:this},{provide:Ds,useValue:this.componentFactoryResolver}],t||dl(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Tl(n,e,t=null){return new V1(n,e,t).injector}let $1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=zm(0,t.type),o=r.length>0?Tl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,o)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=J({token:n,providedIn:"environment",factory:()=>new n(G(ar))}),n})();function pv(n){n.getStandaloneInjector=e=>e.get($1).getOrCreateStandaloneInjector(n)}function wv(n,e,t,r,o,i){return function Sv(n,e,t,r,o,i,s,a){const l=e+t;return function bl(n,e,t,r,o){const i=vo(n,e,t,r);return $t(n,e+2,o)||i}(n,l,o,i,s)?ur(n,l+3,a?r.call(a,o,i,s):r(o,i,s)):function Ls(n,e){const t=n[e];return t===he?void 0:t}(n,l+3)}(N(),Gt(),n,e,t,r,o,i)}function Zd(n){return e=>{setTimeout(n,void 0,e)}}const tt=class uO extends b{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&"object"==typeof e){const l=e;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=Zd(i),o&&(o=Zd(o)),s&&(s=Zd(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof T&&e.add(a),a}};function dO(){return this._results[Symbol.iterator]()}class Xd{get changes(){return this._changes||(this._changes=new tt)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Xd.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=dO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const o=function Tn(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function CS(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],i=e[r];if(t&&(o=t(o),i=t(i)),i!==o)return!1}return!0}(r._results,o,t))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Tr=(()=>{class n{}return n.__NG_ELEMENT_ID__=pO,n})();const hO=Tr,fO=class extends hO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tView,o=fl(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);o[rs]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[or];return null!==s&&(o[or]=s.createEmbeddedView(r)),Ed(r,o,e),new Ms(o)}};function pO(){return Ol(Ot(),N())}function Ol(n,e){return 4&n.type?new fO(e,n,ri(n,e)):null}let zn=(()=>{class n{}return n.__NG_ELEMENT_ID__=gO,n})();function gO(){return Ov(Ot(),N())}const mO=zn,Iv=class extends mO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ri(this._hostTNode,this._hostLView)}get injector(){return new Wo(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ou(this._hostTNode,this._hostLView);if(kg(e)){const t=Ka(e,this._hostLView),r=Wa(e);return new Wo(t[q].data[r+8],t)}return new Wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Tv(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-zt}createEmbeddedView(e,t,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=e.createEmbeddedView(t||{},i);return this.insert(s,o),s}createComponent(e,t,r,o,i){const s=e&&!function us(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const l=s?e:new xs(Oe(e)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const h=(s?c:this.parentInjector).get(ar,null);h&&(i=h)}const u=l.create(c,o,void 0,i);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,o=r[q];if(function BE(n){return Vn(n[Ze])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[Ze],h=new Iv(d,d[Lt],d[Ze]);h.detach(h.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function lM(n,e,t,r){const o=zt+r,i=t.length;r>0&&(t[o-1][jn]=e),r<i-zt?(e[jn]=t[o],Gg(t,zt+r,e)):(t.push(e),e[jn]=null),e[Ze]=t;const s=e[rs];null!==s&&t!==s&&function cM(n,e){const t=n[Ho];e[jt]!==e[Ze][Ze][jt]&&(n[ag]=!0),null===t?n[Ho]=[e]:t.push(e)}(s,e);const a=e[or];null!==a&&a.insertView(n),e[ge]|=64}(o,r,s,i);const a=Xu(i,s),l=r[ve],c=rl(l,s[Va]);return null!==c&&function iM(n,e,t,r,o,i){r[wr]=o,r[Lt]=e,_s(n,r,t,1,o,i)}(o,s[Lt],l,r,c,a),e.attachToViewContainerRef(),Gg(eh(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Tv(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Yu(this._lContainer,t);r&&(Xa(eh(this._lContainer),t),gm(r[q],r))}detach(e){const t=this._adjustIndex(e,-1),r=Yu(this._lContainer,t);return r&&null!=Xa(eh(this._lContainer),t)?new Ms(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Tv(n){return n[$a]}function eh(n){return n[$a]||(n[$a]=[])}function Ov(n,e){let t;const r=e[n.index];if(Vn(r))t=r;else{let o;if(8&n.type)o=Tt(r);else{const i=e[ve];o=i.createComment("");const s=hn(n,e);yo(i,rl(i,s),o,function fM(n,e){return n.nextSibling(e)}(i,s),!1)}e[n.index]=t=My(r,e,o,n),gl(e,t)}return new Iv(t,n,e)}class th{constructor(e){this.queryList=e,this.matches=null}clone(){return new th(this.queryList)}setDirty(){this.queryList.setDirty()}}class nh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,o=[];for(let i=0;i<r;i++){const s=t.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new nh(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==jv(e,t).matches&&this.queries[t].setDirty()}}class Av{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class rh{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const o=null!==t?t.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,null!==t?t.push(i):t=[i])}return null!==t?new rh(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class oh{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new oh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(e,t,yO(t,i)),this.matchTNodeWithReadOption(e,t,Qa(t,e,i,!1,!1))}else r===Tr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Qa(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===pn||o===zn||o===Tr&&4&t.type)this.addMatch(t.index,-2);else{const i=Qa(t,e,o,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function yO(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function vO(n,e,t,r){return-1===t?function _O(n,e){return 11&n.type?ri(n,e):4&n.type?Ol(n,e):null}(e,n):-2===t?function CO(n,e,t){return t===pn?ri(e,n):t===Tr?Ol(e,n):t===zn?Ov(e,n):void 0}(n,e,r):go(n,n[q],t,e)}function Pv(n,e,t,r){const o=e[or].queries[r];if(null===o.matches){const i=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:vO(e,i[c],s[l+1],t.metadata.read))}o.matches=a}return o.matches}function ih(n,e,t,r){const o=n.queries.getByIndex(t),i=o.matches;if(null!==i){const s=Pv(n,e,o,t);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(s[a/2]);else{const c=i[a+1],u=e[-l];for(let d=zt;d<u.length;d++){const h=u[d];h[rs]===h[Ze]&&ih(h[q],h,c,r)}if(null!==u[Ho]){const d=u[Ho];for(let h=0;h<d.length;h++){const f=d[h];ih(f[q],f,c,r)}}}}}return r}function kv(n){const e=N(),t=Me(),r=Dg();wu(r+1);const o=jv(t,r);if(n.dirty&&function UE(n){return 4==(4&n[ge])}(e)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{const i=o.crossesNgTemplate?ih(t,e,r,[]):Pv(t,e,o,r);n.reset(i,ox),n.notifyOnChanges()}return!0}return!1}function Rv(n,e,t,r){const o=Me();if(o.firstCreatePass){const i=Ot();(function Lv(n,e,t){null===n.queries&&(n.queries=new rh),n.queries.track(new oh(e,t))})(o,new Av(e,t,r),i.index),function DO(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(o,n),2==(2&t)&&(o.staticContentQueries=!0)}!function Fv(n,e,t){const r=new Xd(4==(4&t));by(n,e,r,r.destroy),null===e[or]&&(e[or]=new nh),e[or].queries.push(new th(r))}(o,N(),t)}function jv(n,e){return n.queries.getByIndex(e)}function sh(n,e){return Ol(n,e)}function Pl(...n){}const kl=new Y("Application Initializer");let Rl=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Pl,this.reject=Pl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(Ts(i))t.push(i);else if(jd(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(G(kl,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $s=new Y("AppId",{providedIn:"root",factory:function nC(){return`${hh()}${hh()}${hh()}`}});function hh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rC=new Y("Platform Initializer"),fh=new Y("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let HO=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Or=new Y("LocaleId",{providedIn:"root",factory:()=>_e(Or,oe.Optional|oe.SkipSelf)||function zO(){return typeof $localize<"u"&&$localize.locale||vi}()});class qO{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let oC=(()=>{class n{compileModuleSync(t){return new Yd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),i=xr(un(t).declarations).reduce((s,a)=>{const l=Oe(a);return l&&s.push(new xs(l)),s},[]);return new qO(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JO=(()=>Promise.resolve(0))();function ph(n){typeof Zone>"u"?JO.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class it{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tt(!1),this.onMicrotaskEmpty=new tt(!1),this.onStable=new tt(!1),this.onError=new tt(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function YO(){let n=ze.requestAnimationFrame,e=ze.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function XO(n){const e=()=>{!function ZO(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ze,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,mh(n),n.isCheckStableRunning=!0,gh(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),mh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,i,s,a)=>{try{return aC(n),t.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&e(),lC(n)}},onInvoke:(t,r,o,i,s,a,l)=>{try{return aC(n),t.invoke(o,i,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),lC(n)}},onHasTask:(t,r,o,i)=>{t.hasTask(o,i),r===o&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,mh(n),gh(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,o,i)=>(t.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,QO,Pl,Pl);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const QO={};function gh(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function mh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function aC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lC(n){n._nesting--,gh(n)}class eA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tt,this.onMicrotaskEmpty=new tt,this.onStable=new tt,this.onError=new tt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}}const cC=new Y(""),Nl=new Y("");let vh,yh=(()=>{class n{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vh||(function tA(n){vh=n}(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),ph(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ph(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}}return n.\u0275fac=function(t){return new(t||n)(G(it),G(_h),G(Nl))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),_h=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return vh?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ar=!1;let Wr=null;const uC=new Y("AllowMultipleToken"),Ch=new Y("PlatformDestroyListeners"),dC=new Y("appBootstrapListener");class hC{constructor(e,t){this.name=e,this.token=t}}function pC(n,e,t=[]){const r=`Platform: ${e}`,o=new Y(r);return(i=[])=>{let s=bh();if(!s||s.injector.get(uC,!1)){const a=[...t,...i,{provide:o,useValue:!0}];n?n(a):function oA(n){if(Wr&&!Wr.get(uC,!1))throw new j(400,!1);Wr=n;const e=n.get(mC);(function fC(n){const e=n.get(rC,null);e&&e.forEach(t=>t())})(n)}(function gC(n=[],e){return lr.create({name:e,providers:[{provide:hd,useValue:"platform"},{provide:Ch,useValue:new Set([()=>Wr=null])},...n]})}(a,r))}return function sA(n){const e=bh();if(!e)throw new j(401,!1);return e}()}}function bh(){return Wr?.get(mC)??null}let mC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const o=function _C(n,e){let t;return t="noop"===n?new eA:("zone.js"===n?void 0:n)||new it(e),t}(r?.ngZone,function yC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:it,useValue:o}];return o.run(()=>{const s=lr.create({providers:i,parent:this.injector,name:t.moduleType.name}),a=t.create(s),l=a.injector.get(oi,null);if(!l)throw new j(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Ll(this._modules,a),c.unsubscribe()})}),function vC(n,e,t){try{const r=t();return Ts(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(l,o,()=>{const c=a.injector.get(Rl);return c.runInitializers(),c.donePromise.then(()=>(function U_(n){En(n,"Expected localeId to be defined"),"string"==typeof n&&($_=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Or,vi)||vi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const o=CC({},r);return function nA(n,e,t){const r=new Yd(t);return Promise.resolve(r)}(0,0,t).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(t){const r=t.injector.get(Fl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new j(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Ch,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(G(lr))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function CC(n,e){return Array.isArray(e)?e.reduce(CC,n):{...n,...e}}let Fl=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,o){this._zone=t,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new He(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new He(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{it.assertNotInAngularZone(),ph(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{it.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function aE(...n){const e=Qi(n),t=function eE(n,e){return"number"==typeof tu(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Fn(r[0]):Lo(t)(ut(r,e)):tr}(i,s.pipe(function lE(n={}){const{connector:e=(()=>new b),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=n;return i=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const g=s;f(),g?.unsubscribe()};return D((g,m)=>{c++,!d&&!u&&h();const v=l=l??e();m.add(()=>{c--,0===c&&!d&&!u&&(a=nu(p,o))}),v.subscribe(m),!s&&c>0&&(s=new Xt({next:M=>v.next(M),error:M=>{d=!0,h(),a=nu(f,t,M),v.error(M)},complete:()=>{u=!0,h(),a=nu(f,r),v.complete()}}),Fn(g).subscribe(s))})(i)}}()))}bootstrap(t,r){const o=t instanceof Ym;if(!this._injector.get(Rl).done){!o&&function Vo(n){const e=Oe(n)||Ft(n)||nn(n);return null!==e&&e.standalone}(t);throw new j(405,Ar)}let s;s=o?t:this._injector.get(Ds).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function rA(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Ci),c=s.create(lr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(cC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Ll(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new j(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Ll(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(dC,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ll(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(G(it),G(ar),G(oi))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ll(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Us=(()=>{class n{}return n.__NG_ELEMENT_ID__=lA,n})();function lA(n){return function cA(n,e,t){if(is(n)&&!t){const r=rn(n.index,e);return new Ms(r,r)}return 47&n.type?new Ms(e[jt],e):null}(Ot(),N(),16==(16&n))}class SC{constructor(){}supports(e){return Cl(e)}create(e){return new gA(e)}}const pA=(n,e)=>e;class gA{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||pA}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){const s=!r||t&&t.currentIndex<xC(r,o,i)?t:r,a=xC(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,u=l-o;if(c!=u){for(let h=0;h<c;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<c&&(i[h]=f+1)}i[s.previousIndex]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Cl(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let o,i,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,i,s,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)):(t=this._mismatch(t,i,s,a),r=!0),t=t._next}else o=0,function UI(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(o,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,o),r=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,o){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,o)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,o)):e=this._addAfter(new mA(t,r),i,o),e}_verifyReinsertion(e,t,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const o=e._prevRemoved,i=e._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const o=null===t?this._itHead:t._next;return e._next=o,e._prev=t,null===o?this._itTail=e:o._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new MC),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class mA{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yA{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class MC{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new yA,this.map.set(t,r)),r.add(e)}get(e,t){const o=this.map.get(e);return o?o.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xC(n,e,t){const r=n.previousIndex;if(null===r)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+e+o}class IC{constructor(){}supports(e){return e instanceof Map||Fd(e)}create(){return new _A}}class _A{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Fd(e)))throw new j(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,o)=>{if(t&&t.key===o)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(o,r);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const o=this._records.get(e);this._maybeAddToChanges(o,t);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new vA(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class vA{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TC(){return new $l([new SC])}let $l=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||TC()),deps:[[n,new fs,new hs]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(null!=r)return r;throw new j(901,!1)}}return n.\u0275prov=J({token:n,providedIn:"root",factory:TC}),n})();function OC(){return new Bs([new IC])}let Bs=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||OC()),deps:[[n,new fs,new hs]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(r)return r;throw new j(901,!1)}}return n.\u0275prov=J({token:n,providedIn:"root",factory:OC}),n})();const wA=pC(null,"core",[]);let DA=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(G(Fl))},n.\u0275mod=Ln({type:n}),n.\u0275inj=Sn({}),n})();function Di(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Mh=null;function Pr(){return Mh}class MA{}const Jt=new Y("DocumentToken");let xh=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return function xA(){return G(AC)}()},providedIn:"platform"}),n})();const IA=new Y("Location Initialized");let AC=(()=>{class n extends xh{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pr().getBaseHref(this._doc)}onPopState(t){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){PC()?this._history.pushState(t,r,o):this._location.hash=o}replaceState(t,r,o){PC()?this._history.replaceState(t,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(G(Jt))},n.\u0275prov=J({token:n,factory:function(){return function TA(){return new AC(G(Jt))}()},providedIn:"platform"}),n})();function PC(){return!!window.history.pushState}function Ih(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function kC(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function kr(n){return n&&"?"!==n[0]?"?"+n:n}let Do=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return _e(NC)},providedIn:"root"}),n})();const RC=new Y("appBaseHref");let NC=(()=>{class n extends Do{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??_e(Jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ih(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+kr(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){const s=this.prepareExternalUrl(o+kr(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){const s=this.prepareExternalUrl(o+kr(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(G(xh),G(RC,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OA=(()=>{class n extends Do{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ih(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+kr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+kr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(G(xh),G(RC,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),Th=(()=>{class n{constructor(t){this._subject=new tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function kA(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(kC(FC(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+kr(r))}normalize(t){return n.stripTrailingSlash(function PA(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,FC(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=kr,n.joinWithSlash=Ih,n.stripTrailingSlash=kC,n.\u0275fac=function(t){return new(t||n)(G(Do))},n.\u0275prov=J({token:n,factory:function(){return function AA(){return new Th(G(Do))}()},providedIn:"root"}),n})();function FC(n){return n.replace(/\/index.html$/,"")}function GC(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,i]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}const Vh=/\s+/,qC=[];let $h=(()=>{class n{constructor(t,r,o,i){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this.initialClasses=qC,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Vh):qC}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Vh):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Vh).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(A($l),A(Bs),A(pn),A(Mr))},n.\u0275dir=se({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class yP{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Uh=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new yP(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),JC(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{JC(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(A(zn),A(Tr),A($l))},n.\u0275dir=se({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function JC(n,e){n.context.$implicit=e.item}let Gs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){YC("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){YC("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(A(zn),A(Tr))},n.\u0275dir=se({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class vP{constructor(){this.$implicit=null,this.ngIf=null}}function YC(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ve(e)}'.`)}let zP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Sn({}),n})();let KP=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>new JP(G(Jt),window)}),n})();class JP{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function YP(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=eb(this.window.history)||eb(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function eb(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class tb{}class Dk extends MA{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Kh extends Dk{static makeCurrent(){!function SA(n){Mh||(Mh=n)}(new Kh)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ek(){return Ws=Ws||document.querySelector("base"),Ws?Ws.getAttribute("href"):null}();return null==t?null:function Sk(n){Zl=Zl||document.createElement("a"),Zl.setAttribute("href",n);const e=Zl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return GC(document.cookie,e)}}let Zl,Ws=null;const sb=new Y("TRANSITION_ID"),xk=[{provide:kl,useFactory:function Mk(n,e,t){return()=>{t.get(Rl).donePromise.then(()=>{const r=Pr(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[sb,Jt,lr],multi:!0}];let Tk=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const Xl=new Y("EventManagerPlugins");let ec=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(G(Xl),G(it))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class ab{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=Pr().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let lb=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const o=this.usageCount;let i=o.get(t)??0;return i+=r,i>0?o.set(t,i):o.delete(t),i}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),Ks=(()=>{class n extends lb{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(i=>i.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const o=this.doc.createElement("style");o.textContent=r,t.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(G(Jt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const Jh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yh=/%COMP%/g,db=new Y("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function hb(n,e){return e.flat(100).map(t=>t.replace(Yh,n))}function fb(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qh=(()=>{class n{constructor(t,r,o,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new Zh(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof mb?o.applyToHost(t):o instanceof Xh&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case rr.Emulated:i=new mb(s,a,r,this.appId,l);break;case rr.ShadowDom:return new Fk(s,a,t,r);default:i=new Xh(s,a,r,l)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(G(ec),G(Ks),G($s),G(db))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class Zh{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Jh[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(gb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(gb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const i=Jh[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Jh[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(on.DashCase|on.Important)?e.style.setProperty(t,r,o&on.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&on.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,fb(r)):this.eventManager.addEventListener(e,t,fb(r))}}function gb(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Fk extends Zh{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=hb(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Xh extends Zh{constructor(e,t,r,o,i=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=hb(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class mb extends Xh{constructor(e,t,r,o,i){const s=o+"-"+r.id;super(e,t,r,i,s),this.contentAttr=function kk(n){return"_ngcontent-%COMP%".replace(Yh,n)}(s),this.hostAttr=function Rk(n){return"_nghost-%COMP%".replace(Yh,n)}(s)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Lk=(()=>{class n extends ab{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(G(Jt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const yb=["alt","control","meta","shift"],jk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let $k=(()=>{class n extends ab{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pr().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),yb.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let o=jk[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),yb.forEach(s=>{s!==o&&(0,Vk[s])(t)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(G(Jt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const zk=pC(wA,"browser",[{provide:fh,useValue:"browser"},{provide:rC,useValue:function Uk(){Kh.makeCurrent()},multi:!0},{provide:Jt,useFactory:function Hk(){return function bM(n){rd=n}(document),document},deps:[]}]),Cb=new Y(""),bb=[{provide:Nl,useClass:class Ik{addToWindow(e){ze.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},ze.getAllAngularTestabilities=()=>e.getAllTestabilities(),ze.getAllAngularRootElements=()=>e.getAllRootElements(),ze.frameworkStabilizers||(ze.frameworkStabilizers=[]),ze.frameworkStabilizers.push(r=>{const o=ze.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(l){s=s||l,i--,0==i&&r(s)};o.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Pr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:cC,useClass:yh,deps:[it,_h,Nl]},{provide:yh,useClass:yh,deps:[it,_h,Nl]}],wb=[{provide:hd,useValue:"root"},{provide:oi,useFactory:function Bk(){return new oi},deps:[]},{provide:Xl,useClass:Lk,multi:!0,deps:[Jt,it,fh]},{provide:Xl,useClass:$k,multi:!0,deps:[Jt]},{provide:Qh,useClass:Qh,deps:[ec,Ks,$s,db]},{provide:Zm,useExisting:Qh},{provide:lb,useExisting:Ks},{provide:Ks,useClass:Ks,deps:[Jt]},{provide:ec,useClass:ec,deps:[Xl,it]},{provide:tb,useClass:Tk,deps:[]},[]];let Gk=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:$s,useValue:t.appId},{provide:sb,useExisting:$s},xk]}}}return n.\u0275fac=function(t){return new(t||n)(G(Cb,12))},n.\u0275mod=Ln({type:n}),n.\u0275inj=Sn({providers:[...wb,...bb],imports:[zP,DA]}),n})(),Db=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(G(Jt))},n.\u0275prov=J({token:n,factory:function(t){let r=null;return r=t?new t:function Wk(){return new Db(G(Jt))}(),r},providedIn:"root"}),n})();function Q(...n){return ut(n,Qi(n))}function Jr(n,e){return te(e)?It(n,e,1):It(n,1)}function Nr(n,e){return D((t,r)=>{let o=0;t.subscribe(R(r,i=>n.call(e,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class tc{}class nf{}class Fr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),i=o.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=t.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(t,i)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Fr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Fr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Fr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Xk{encodeKey(e){return Mb(e)}encodeValue(e){return Mb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tR=/%(\d[a-f0-9])/gi,nR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Mb(n){return encodeURIComponent(n).replace(tR,(e,t)=>nR[t]??e)}function nc(n){return`${n}`}class Yr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Xk,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eR(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(nc):[nc(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Yr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(nc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(nc(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rR{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function xb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ib(n){return typeof Blob<"u"&&n instanceof Blob}function Tb(n){return typeof FormData<"u"&&n instanceof FormData}class Js{constructor(e,t,r,o){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function oR(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Fr),this.context||(this.context=new rR),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Yr,this.urlWithParams=t}serializeBody(){return null===this.body?null:xb(this.body)||Ib(this.body)||Tb(this.body)||function iR(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Yr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Tb(this.body)?null:Ib(this.body)?this.body.type||null:xb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Yr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new Js(t,r,i,{params:c,headers:l,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var pt=(()=>((pt=pt||{})[pt.Sent=0]="Sent",pt[pt.UploadProgress=1]="UploadProgress",pt[pt.ResponseHeader=2]="ResponseHeader",pt[pt.DownloadProgress=3]="DownloadProgress",pt[pt.Response=4]="Response",pt[pt.User=5]="User",pt))();class rf{constructor(e,t=200,r="OK"){this.headers=e.headers||new Fr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class sf extends rf{constructor(e={}){super(e),this.type=pt.ResponseHeader}clone(e={}){return new sf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class rc extends rf{constructor(e={}){super(e),this.type=pt.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new rc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ob extends rf{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function af(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ei=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof Js)i=t;else{let l,c;l=o.headers instanceof Fr?o.headers:new Fr(o.headers),o.params&&(c=o.params instanceof Yr?o.params:new Yr({fromObject:o.params})),i=new Js(t,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=Q(i).pipe(Jr(l=>this.handler.handle(l)));if(t instanceof Js||"events"===o.observe)return s;const a=s.pipe(Nr(l=>l instanceof rc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(P(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(P(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(P(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(P(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Yr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,af(o,r))}post(t,r,o={}){return this.request("POST",t,af(o,r))}put(t,r,o={}){return this.request("PUT",t,af(o,r))}}return n.\u0275fac=function(t){return new(t||n)(G(tc))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function Ab(n,e){return e(n)}function sR(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}const lR=new Y("HTTP_INTERCEPTORS"),Ys=new Y("HTTP_INTERCEPTOR_FNS");function cR(){let n=null;return(e,t)=>(null===n&&(n=(_e(lR,{optional:!0})??[]).reduceRight(sR,Ab)),n(e,t))}let Pb=(()=>{class n extends tc{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Ys)));this.chain=r.reduceRight((o,i)=>function aR(n,e,t){return(r,o)=>t.runInContext(()=>e(r,i=>n(i,o)))}(o,i,this.injector),Ab)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(G(nf),G(ar))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const fR=/^\)\]\}',?\n/;let Rb=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new He(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((f,p)=>o.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=t.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",p=new Fr(o.getAllResponseHeaders()),g=function pR(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return s=new sf({headers:p,status:o.status,statusText:f,url:g}),s},l=()=>{let{headers:f,status:p,statusText:g,url:m}=a(),v=null;204!==p&&(v=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=v?200:0);let M=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof v){const w=v;v=v.replace(fR,"");try{v=""!==v?JSON.parse(v):null}catch(k){v=w,M&&(M=!1,v={error:k,text:v})}}M?(r.next(new rc({body:v,headers:f,status:p,statusText:g,url:m||void 0})),r.complete()):r.error(new Ob({error:v,headers:f,status:p,statusText:g,url:m||void 0}))},c=f=>{const{url:p}=a(),g=new Ob({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});r.error(g)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:pt.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&o.responseText&&(p.partialText=o.responseText),r.next(p)},h=f=>{let p={type:pt.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return o.addEventListener("load",l),o.addEventListener("error",c),o.addEventListener("timeout",c),o.addEventListener("abort",c),t.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:pt.Sent}),()=>{o.removeEventListener("error",c),o.removeEventListener("abort",c),o.removeEventListener("load",l),o.removeEventListener("timeout",c),t.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(G(tb))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const lf=new Y("XSRF_ENABLED"),Nb=new Y("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Fb=new Y("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Lb{}let yR=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=GC(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(G(Jt),G(fh),G(Nb))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function _R(n,e){const t=n.url.toLowerCase();if(!_e(lf)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=_e(Lb).getToken(),o=_e(Fb);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var lt=(()=>((lt=lt||{})[lt.Interceptors=0]="Interceptors",lt[lt.LegacyInterceptors=1]="LegacyInterceptors",lt[lt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",lt[lt.NoXsrfProtection=3]="NoXsrfProtection",lt[lt.JsonpSupport=4]="JsonpSupport",lt[lt.RequestsMadeViaParent=5]="RequestsMadeViaParent",lt))();function Si(n,e){return{\u0275kind:n,\u0275providers:e}}function vR(...n){const e=[Ei,Rb,Pb,{provide:tc,useExisting:Pb},{provide:nf,useExisting:Rb},{provide:Ys,useValue:_R,multi:!0},{provide:lf,useValue:!0},{provide:Lb,useClass:yR}];for(const t of n)e.push(...t.\u0275providers);return function zM(n){return{\u0275providers:n}}(e)}const jb=new Y("LEGACY_INTERCEPTOR_FN");let bR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Sn({providers:[vR(Si(lt.LegacyInterceptors,[{provide:jb,useFactory:cR},{provide:Ys,useExisting:jb,multi:!0}]))]}),n})();const{isArray:wR}=Array,{getPrototypeOf:DR,prototype:ER,keys:SR}=Object;function Vb(n){if(1===n.length){const e=n[0];if(wR(e))return{args:e,keys:null};if(function MR(n){return n&&"object"==typeof n&&DR(n)===ER}(e)){const t=SR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:xR}=Array;function $b(n){return P(e=>function IR(n,e){return xR(e)?n(...e):n(e)}(n,e))}function Ub(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function Eo(...n){const e=zp(n),{args:t,keys:r}=Vb(n),o=new He(i=>{const{length:s}=t;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Fn(t[u]).subscribe(R(i,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?Ub(r,a):a),i.complete())}))}});return e?o.pipe($b(e)):o}let Bb=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(A(Mr),A(pn))},n.\u0275dir=se({type:n}),n})(),So=(()=>{class n extends Bb{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=At(n)))(r||n)}}(),n.\u0275dir=se({type:n,features:[Pe]}),n})();const fr=new Y("NgValueAccessor"),TR={provide:fr,useExisting:$e(()=>oc),multi:!0};let oc=(()=>{class n extends So{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=At(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&H("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[We([TR]),Pe]}),n})();const OR={provide:fr,useExisting:$e(()=>Qs),multi:!0},PR=new Y("CompositionEventMode");let Qs=(()=>{class n extends Bb{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function AR(){const n=Pr()?Pr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(A(Mr),A(pn),A(PR,8))},n.\u0275dir=se({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&H("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[We([OR]),Pe]}),n})();const kR=!1;function Qr(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Bt=new Y("NgValidators"),Zr=new Y("NgAsyncValidators");function qb(n){return Qr(n.value)?{required:!0}:null}function ic(n){return null}function Zb(n){return null!=n}function Xb(n){const e=Ts(n)?ut(n):n;if(kR&&!jd(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new j(-1101,t)}return e}function ew(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function tw(n,e){return e.map(t=>t(n))}function nw(n){return n.map(e=>function NR(n){return!n.validate}(e)?e:t=>e.validate(t))}function cf(n){return null!=n?function rw(n){if(!n)return null;const e=n.filter(Zb);return 0==e.length?null:function(t){return ew(tw(t,e))}}(nw(n)):null}function uf(n){return null!=n?function ow(n){if(!n)return null;const e=n.filter(Zb);return 0==e.length?null:function(t){return Eo(tw(t,e).map(Xb)).pipe(P(ew))}}(nw(n)):null}function iw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function df(n){return n?Array.isArray(n)?n:[n]:[]}function sc(n,e){return Array.isArray(n)?n.includes(e):n===e}function lw(n,e){const t=df(e);return df(n).forEach(o=>{sc(t,o)||t.push(o)}),t}function cw(n,e){return df(e).filter(t=>!sc(n,t))}class uw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yt extends uw{get formDirective(){return null}get path(){return null}}class Xr extends uw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class dw{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ac=(()=>{class n extends dw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(A(Xr,2))},n.\u0275dir=se({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&bt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Pe]}),n})(),hw=(()=>{class n extends dw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(A(Yt,10))},n.\u0275dir=se({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&bt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Pe]}),n})();function fw(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const pf=!1,Zs="VALID",cc="INVALID",Mi="PENDING",Xs="DISABLED";function gf(n){return(uc(n)?n.validators:n)||null}function mf(n,e){return(uc(e)?e.asyncValidators:n)||null}function uc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class mw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Zs}get invalid(){return this.status===cc}get pending(){return this.status==Mi}get disabled(){return this.status===Xs}get enabled(){return this.status!==Xs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cw(e,this._rawAsyncValidators))}hasValidator(e){return sc(this._rawValidators,e)}hasAsyncValidator(e){return sc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Mi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xs,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zs,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zs||this.status===Mi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xs:Zs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Mi,this._hasOwnPendingAsyncValidator=!0;const t=Xb(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new tt,this.statusChanges=new tt}_calculateStatus(){return this._allControlsDisabled()?Xs:this.errors?cc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mi)?Mi:this._anyControlsHaveStatus(cc)?cc:Zs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){uc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function BR(n){return Array.isArray(n)?cf(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function HR(n){return Array.isArray(n)?uf(n):n||null}(this._rawAsyncValidators)}}class yf extends mw{constructor(e,t,r){super(gf(t),mf(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function gw(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new j(1002,pf?function UR(n,e){return`Must supply a value for form control ${fw(n,e)}`}(e,o):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function pw(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,pf?function VR(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new j(1001,pf?function $R(n,e){return`Cannot find form control ${fw(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,i)=>{r=t(r,o,i)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const xi=new Y("CallSetDisabledState",{providedIn:"root",factory:()=>dc}),dc="always";function ea(n,e,t=dc){_f(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function qR(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yw(n,e)})}(n,e),function KR(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function WR(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yw(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function GR(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _f(n,e){const t=function sw(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(iw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function aw(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(iw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();pc(e._rawValidators,o),pc(e._rawAsyncValidators,o)}function yw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const XR={provide:Yt,useExisting:$e(()=>mc)},ta=(()=>Promise.resolve())();let mc=(()=>{class n extends Yt{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new tt,this.form=new yf({},cf(t),uf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ta.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ea(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ta.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ta.then(()=>{const r=this._findContainer(t.path),o=new yf({});(function _w(n,e){_f(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ta.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ta.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function vw(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(A(Bt,10),A(Zr,10),A(xi,8))},n.\u0275dir=se({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&H("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[We([XR]),Pe]}),n})();function Cw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function bw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ww=class extends mw{constructor(e=null,t,r){super(gf(t),mf(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=bw(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){bw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},nN={provide:Xr,useExisting:$e(()=>na)},Sw=(()=>Promise.resolve())();let na=(()=>{class n extends Xr{constructor(t,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new ww,this._registered=!1,this.update=new tt,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function bf(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(i=>{i.constructor===Qs?t=i:function QR(n){return Object.getPrototypeOf(n.constructor)===So}(i)?r=i:o=i}),o||r||t||null}(0,i)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Cf(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ea(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Sw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&Di(r);Sw.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function hc(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(A(Yt,9),A(Bt,10),A(Zr,10),A(fr,10),A(Us,8),A(xi,8))},n.\u0275dir=se({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[We([nN]),Pe,xn]}),n})(),Mw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=se({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const rN={provide:fr,useExisting:$e(()=>wf),multi:!0};let wf=(()=>{class n extends So{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=At(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&H("input",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},features:[We([rN]),Pe]}),n})(),xw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Sn({}),n})();const hN={provide:fr,useExisting:$e(()=>yc),multi:!0};function Rw(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let yc=(()=>{class n extends So{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=Rw(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function fN(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=At(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&H("change",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[We([hN]),Pe]}),n})(),Nw=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Rw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(A(pn),A(Mr),A(yc,9))},n.\u0275dir=se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const pN={provide:fr,useExisting:$e(()=>Mf),multi:!0};function Fw(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Mf=(()=>{class n extends So{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);o.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function gN(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=At(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&H("change",function(i){return r.onChange(i.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[We([pN]),Pe]}),n})(),Lw=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Fw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Fw(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(A(pn),A(Mr),A(Mf,9))},n.\u0275dir=se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function Vw(n){return"number"==typeof n?n:parseFloat(n)}let Mo=(()=>{class n{constructor(){this._validator=ic}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ic,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=se({type:n,features:[xn]}),n})();const mN={provide:Bt,useExisting:$e(()=>xf),multi:!0};let xf=(()=>{class n extends Mo{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>Vw(t),this.createValidator=t=>function Gb(n){return e=>{if(Qr(e.value)||Qr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=At(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Ut("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[We([mN]),Pe]}),n})();const yN={provide:Bt,useExisting:$e(()=>If),multi:!0};let If=(()=>{class n extends Mo{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>Vw(t),this.createValidator=t=>function zb(n){return e=>{if(Qr(e.value)||Qr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=At(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Ut("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[We([yN]),Pe]}),n})();const _N={provide:Bt,useExisting:$e(()=>_c),multi:!0};let _c=(()=>{class n extends Mo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Di,this.createValidator=t=>qb}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=At(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&Ut("required",r._enabled?"":null)},inputs:{required:"required"},features:[We([_N]),Pe]}),n})(),EN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Sn({imports:[xw]}),n})(),MN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xi,useValue:t.callSetDisabledState??dc}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Sn({imports:[EN]}),n})();class kn extends b{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const vc=ye(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Gw(...n){const e=Qi(n),t=zp(n),{args:r,keys:o}=Vb(n);if(0===r.length)return ut([],e);const i=new He(function xN(n,e,t=Xn){return r=>{qw(e,()=>{const{length:o}=n,i=new Array(o);let s=o,a=o;for(let l=0;l<o;l++)qw(e,()=>{const c=ut(n[l],e);let u=!1;c.subscribe(R(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>Ub(o,s):Xn));return t?i.pipe($b(t)):i}function qw(n,e,t){n?_r(t,n,e):e()}function Tf(...n){return function IN(){return Lo(1)}()(ut(n,Qi(n)))}function Ww(n){return new He(e=>{Fn(n()).subscribe(e)})}function Ii(n,e){const t=te(n)?n:()=>n,r=o=>o.error(t());return new He(e?o=>e.schedule(r,0,o):r)}function Of(){return D((n,e)=>{let t=null;n._refCount++;const r=R(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Kw extends He{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,S(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new T;const t=this.getSubject();e.add(this.source.subscribe(R(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=T.EMPTY)}return e}refCount(){return Of()(this)}}function pr(n,e){return D((t,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();t.subscribe(R(r,l=>{o?.unsubscribe();let c=0;const u=i++;Fn(n(l,u)).subscribe(o=R(r,d=>r.next(e?e(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Ti(n){return n<=0?()=>tr:D((e,t)=>{let r=0;e.subscribe(R(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Cc(n){return D((e,t)=>{let r=!1;e.subscribe(R(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Jw(n=ON){return D((e,t)=>{let r=!1;e.subscribe(R(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function ON(){return new vc}function eo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Nr((o,i)=>n(o,i,r)):Xn,Ti(1),t?Cc(e):Jw(()=>new vc))}function gt(n,e,t){const r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?D((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(R(i,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),i.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),i.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),i.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Xn}function Kn(n){return D((e,t)=>{let i,r=null,o=!1;r=e.subscribe(R(t,void 0,void 0,s=>{i=Fn(n(s,Kn(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function Yw(n,e){return D(function AN(n,e,t,r,o){return(i,s)=>{let a=t,l=e,c=0;i.subscribe(R(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}(n,e,arguments.length>=2,!0))}function Af(n){return n<=0?()=>tr:D((e,t)=>{let r=[];e.subscribe(R(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Qw(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Nr((o,i)=>n(o,i,r)):Xn,Af(1),t?Cc(e):Jw(()=>new vc))}function Pf(n){return D((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const pe="primary",ra=Symbol("RouteTitle");class RN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Oi(n){return new RN(n)}function NN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function gr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!Zw(n[o],e[o]))return!1;return!0}function Zw(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}return n===e}function Xw(n){return Array.prototype.concat.apply([],n)}function e0(n){return n.length>0?n[n.length-1]:null}function Rt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function to(n){return jd(n)?n:Ts(n)?ut(Promise.resolve(n)):Q(n)}const bc=!1,LN={exact:function r0(n,e,t){if(!xo(n.segments,e.segments)||!wc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!r0(n.children[r],e.children[r],t))return!1;return!0},subset:o0},t0={exact:function jN(n,e){return gr(n,e)},subset:function VN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Zw(n[t],e[t]))},ignored:()=>!0};function n0(n,e,t){return LN[t.paths](n.root,e.root,t.matrixParams)&&t0[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function o0(n,e,t){return s0(n,e,e.segments,t)}function s0(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!xo(o,t)||e.hasChildren()||!wc(o,t,r))}if(n.segments.length===t.length){if(!xo(n.segments,t)||!wc(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!o0(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!!(xo(n.segments,o)&&wc(n.segments,o,r)&&n.children[pe])&&s0(n.children[pe],e,i,r)}}function wc(n,e,t){return e.every((r,o)=>t0[t](n[o].parameters,r.parameters))}class no{constructor(e=new we([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){return BN.serialize(this)}}class we{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Rt(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dc(this)}}class oa{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Oi(this.parameters)),this._parameterMap}toString(){return c0(this)}}function xo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ia=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return new kf},providedIn:"root"}),n})();class kf{parse(e){const t=new QN(e);return new no(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${sa(e.root,!0)}`,r=function GN(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ec(t)}=${Ec(o)}`).join("&"):`${Ec(t)}=${Ec(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function HN(n){return encodeURI(n)}(e.fragment)}`:""}`}}const BN=new kf;function Dc(n){return n.segments.map(e=>c0(e)).join("/")}function sa(n,e){if(!n.hasChildren())return Dc(n);if(e){const t=n.children[pe]?sa(n.children[pe],!1):"",r=[];return Rt(n.children,(o,i)=>{i!==pe&&r.push(`${i}:${sa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function UN(n,e){let t=[];return Rt(n.children,(r,o)=>{o===pe&&(t=t.concat(e(r,o)))}),Rt(n.children,(r,o)=>{o!==pe&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===pe?[sa(n.children[pe],!1)]:[`${o}:${sa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[pe]?`${Dc(n)}/${t[0]}`:`${Dc(n)}/(${t.join("//")})`}}function a0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ec(n){return a0(n).replace(/%3B/gi,";")}function Rf(n){return a0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sc(n){return decodeURIComponent(n)}function l0(n){return Sc(n.replace(/\+/g,"%20"))}function c0(n){return`${Rf(n.path)}${function zN(n){return Object.keys(n).map(e=>`;${Rf(e)}=${Rf(n[e])}`).join("")}(n.parameters)}`}const qN=/^[^\/()?;=#]+/;function Mc(n){const e=n.match(qN);return e?e[0]:""}const WN=/^[^=?&#]+/,JN=/^[^&#]+/;class QN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[pe]=new we(e,t)),r}parseSegment(){const e=Mc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new j(4009,bc);return this.capture(e),new oa(Sc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Mc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Mc(this.remaining);o&&(r=o,this.capture(r))}e[Sc(t)]=Sc(r)}parseQueryParam(e){const t=function KN(n){const e=n.match(WN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function YN(n){const e=n.match(JN);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=l0(t),i=l0(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Mc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new j(4010,bc);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=pe);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[pe]:new we([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new j(4011,bc)}}function Nf(n){return n.segments.length>0?new we([],{[pe]:n}):n}function xc(n){const e={};for(const r of Object.keys(n.children)){const i=xc(n.children[r]);(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function ZN(n){if(1===n.numberOfChildren&&n.children[pe]){const e=n.children[pe];return new we(n.segments.concat(e.segments),e.children)}return n}(new we(n.segments,e))}function Io(n){return n instanceof no}const Ff=!1;function XN(n,e,t,r,o){if(0===t.length)return Ai(e.root,e.root,e.root,r,o);const i=function p0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new f0(!0,0,n);let e=0,t=!1;const r=n.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Rt(i.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new f0(t,e,r)}(t);return i.toRoot()?Ai(e.root,e.root,new we([],{}),r,o):function s(l){const c=function tF(n,e,t,r){if(n.isAbsolute)return new Pi(e.root,!0,0);if(-1===r)return new Pi(t,t===e.root,0);return function g0(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new j(4005,Ff&&"Invalid number of '../'");o=r.segments.length}return new Pi(r,!1,o-i)}(t,r+(aa(n.commands[0])?0:1),n.numberOfDoubleDots)}(i,e,n.snapshot?._urlSegment,l),u=c.processChildren?ki(c.segmentGroup,c.index,i.commands):Lf(c.segmentGroup,c.index,i.commands);return Ai(e.root,c.segmentGroup,u,r,o)}(n.snapshot?._lastPathIndex)}function aa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function la(n){return"object"==typeof n&&null!=n&&n.outlets}function Ai(n,e,t,r,o){let s,i={};r&&Rt(r,(l,c)=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===e?t:h0(n,e,t);const a=Nf(xc(s));return new no(a,i,o)}function h0(n,e,t){const r={};return Rt(n.children,(o,i)=>{r[i]=o===e?t:h0(o,e,t)}),new we(n.segments,r)}class f0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&aa(r[0]))throw new j(4003,Ff&&"Root segment cannot have matrix parameters");const o=r.find(la);if(o&&o!==e0(r))throw new j(4004,Ff&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pi{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Lf(n,e,t){if(n||(n=new we([],{})),0===n.segments.length&&n.hasChildren())return ki(n,e,t);const r=function rF(n,e,t){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;const s=n.segments[o],a=t[r];if(la(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(o>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!y0(l,c,s))return i;r+=2}else{if(!y0(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new we(n.segments.slice(0,r.pathIndex),{});return i.children[pe]=new we(n.segments.slice(r.pathIndex),n.children),ki(i,0,o)}return r.match&&0===o.length?new we(n.segments,{}):r.match&&!n.hasChildren()?jf(n,e,t):r.match?ki(n,0,o):jf(n,e,t)}function ki(n,e,t){if(0===t.length)return new we(n.segments,{});{const r=function nF(n){return la(n[0])?n[0].outlets:{[pe]:n}}(t),o={};if(!r[pe]&&n.children[pe]&&1===n.numberOfChildren&&0===n.children[pe].segments.length){const i=ki(n.children[pe],e,t);return new we(n.segments,i.children)}return Rt(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=Lf(n.children[s],e,i))}),Rt(n.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new we(n.segments,o)}}function jf(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const i=t[o];if(la(i)){const l=oF(i.outlets);return new we(r,l)}if(0===o&&aa(t[0])){r.push(new oa(n.segments[e].path,m0(t[0]))),o++;continue}const s=la(i)?i.outlets[pe]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&aa(a)?(r.push(new oa(s,m0(a))),o+=2):(r.push(new oa(s,{})),o++)}return new we(r,{})}function oF(n){const e={};return Rt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=jf(new we([],{}),0,t))}),e}function m0(n){const e={};return Rt(n,(t,r)=>e[r]=`${t}`),e}function y0(n,e,t){return n==t.path&&gr(e,t.parameters)}const ca="imperative";class mr{constructor(e,t){this.id=e,this.url=t}}class Vf extends mr{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class To extends mr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ic extends mr{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tc extends mr{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class $f extends mr{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iF extends mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sF extends mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aF extends mr{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lF extends mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cF extends mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uF{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dF{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hF{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fF{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pF{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gF{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _0{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _F=(()=>{class n{createUrlTree(t,r,o,i,s,a){return XN(t||r.root,o,i,s,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),CF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(e){return _F.\u0275fac(e)},providedIn:"root"}),n})();class v0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Uf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Uf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Bf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Bf(e,this._root).map(t=>t.value)}}function Uf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Uf(n,t);if(r)return r}return null}function Bf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Bf(n,t);if(r.length)return r.unshift(e),r}return[]}class Lr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ri(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class C0 extends v0{constructor(e,t){super(e),this.snapshot=t,Hf(this,e)}toString(){return this.snapshot.toString()}}function b0(n,e){const t=function bF(n,e){const s=new Oc([],{},{},"",{},pe,e,null,n.root,-1,{});return new D0("",new Lr(s,[]))}(n,e),r=new kn([new oa("",{})]),o=new kn({}),i=new kn({}),s=new kn({}),a=new kn(""),l=new Oo(r,o,s,a,i,pe,e,t.root);return l.snapshot=t.root,new C0(new Lr(l,[]),t)}class Oo{constructor(e,t,r,o,i,s,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(P(c=>c[ra]))??Q(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(P(e=>Oi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(P(e=>Oi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function w0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],i=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function wF(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Oc{get title(){return this.data?.[ra]}constructor(e,t,r,o,i,s,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class D0 extends v0{constructor(e,t){super(t),this.url=e,Hf(this,t)}toString(){return E0(this._root)}}function Hf(n,e){e.value._routerState=n,e.children.forEach(t=>Hf(n,t))}function E0(n){const e=n.children.length>0?` { ${n.children.map(E0).join(", ")} } `:"";return`${n.value}${e}`}function zf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gr(e.params,t.params)||n.params.next(t.params),function FN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Gf(n,e){const t=gr(n.params,e.params)&&function $N(n,e){return xo(n,e)&&n.every((t,r)=>gr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Gf(n.parent,e.parent))}function ua(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function EF(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ua(n,r,o);return ua(n,r)})}(n,e,t);return new Lr(r,o)}{if(n.shouldAttach(e.value)){const i=n.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ua(n,a)),s}}const r=function SF(n){return new Oo(new kn(n.url),new kn(n.params),new kn(n.queryParams),new kn(n.fragment),new kn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(i=>ua(n,i));return new Lr(r,o)}}const qf="ngNavigationCancelingError";function S0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Io(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=M0(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function M0(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[qf]=!0,r.cancellationCode=e,t&&(r.url=t),r}function x0(n){return I0(n)&&Io(n.url)}function I0(n){return n&&n[qf]}class MF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new da,this.attachRef=null}}let da=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new MF,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ac=!1;let Pc=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=pe,this.activateEvents=new tt,this.deactivateEvents=new tt,this.attachEvents=new tt,this.detachEvents=new tt,this.parentContexts=_e(da),this.location=_e(zn),this.changeDetector=_e(Us),this.environmentInjector=_e(ar)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,Ac);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,Ac);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,Ac);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,Ac);this._activatedRoute=t;const o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new xF(t,a,o.injector);if(r&&function IF(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=o.createComponent(c,o.length,l)}else this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=se({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xn]}),n})();class xF{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oo?this.route:e===da?this.childContexts:this.parent.get(e,t)}}let Wf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=uo({type:n,selectors:[["ng-component"]],standalone:!0,features:[pv],decls:1,vars:0,template:function(t,r){1&t&&an(0,"router-outlet")},dependencies:[Pc],encapsulation:2}),n})();function T0(n,e){return n.providers&&!n._injector&&(n._injector=Tl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jf(n){const e=n.children&&n.children.map(Jf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pe&&(t.component=Wf),t}function Rn(n){return n.outlet||pe}function O0(n,e){const t=n.filter(r=>Rn(r)===e);return t.push(...n.filter(r=>Rn(r)!==e)),t}function ha(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class kF{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Ri(t);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Rt(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Ri(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Ri(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Ri(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new gF(i.value.snapshot))}),e.children.length&&this.forwardEvent(new fF(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(zf(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),zf(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=ha(o.snapshot),l=a?.get(Ds)??null;s.attachRef=null,s.route=o,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class A0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class kc{constructor(e,t){this.component=e,this.route=t}}function RF(n,e,t){const r=n._root;return fa(r,e?e._root:null,t,[r.value])}function Ni(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function gE(n){return null!==Aa(n)}(n)?e.get(n):n:r}function fa(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Ri(e);return n.children.forEach(s=>{(function FF(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function LF(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xo(n.url,e.url)||!gr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gf(n,e)||!gr(n.queryParams,e.queryParams);default:return!Gf(n,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new A0(r)):(i.data=s.data,i._resolvedData=s._resolvedData),fa(n,e,i.component?a?a.children:null:t,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new kc(a.outlet.component,s))}else s&&pa(e,a,o),o.canActivateChecks.push(new A0(r)),fa(n,null,i.component?a?a.children:null:t,r,o)})(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Rt(i,(s,a)=>pa(s,t.getContext(a),o)),o}function pa(n,e,t){const r=Ri(n),o=n.value;Rt(r,(i,s)=>{pa(i,o.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new kc(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function ga(n){return"function"==typeof n}function Yf(n){return n instanceof vc||"EmptyError"===n?.name}const Rc=Symbol("INITIAL_VALUE");function Fi(){return pr(n=>Gw(n.map(e=>e.pipe(Ti(1),function TN(...n){const e=Qi(n);return D((t,r)=>{(e?Tf(n,t,e):Tf(n,t)).subscribe(r)})}(Rc)))).pipe(P(e=>{for(const t of e)if(!0!==t){if(t===Rc)return Rc;if(!1===t||t instanceof no)return t}return!0}),Nr(e=>e!==Rc),Ti(1)))}function P0(n){return function Sa(...n){return Yi(n)}(gt(e=>{if(Io(e))throw S0(0,e)}),P(e=>!0===e))}const Qf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function k0(n,e,t,r,o){const i=Zf(n,e,t);return i.matched?function eL(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?Q(o.map(s=>{const a=Ni(s,n);return to(function HF(n){return n&&ga(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Fi(),P0()):Q(!0)}(r=T0(e,r),e,t).pipe(P(s=>!0===s?i:{...Qf})):Q(i)}function Zf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Qf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||NN)(t,n,e);if(!o)return{...Qf};const i={};Rt(o.posParams,(a,l)=>{i[l]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Nc(n,e,t,r){if(t.length>0&&function rL(n,e,t){return t.some(r=>Fc(n,e,r)&&Rn(r)!==pe)}(n,t,r)){const i=new we(e,function nL(n,e,t,r){const o={};o[pe]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const i of t)if(""===i.path&&Rn(i)!==pe){const s=new we([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,o[Rn(i)]=s}return o}(n,e,r,new we(t,n.children)));return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===t.length&&function oL(n,e,t){return t.some(r=>Fc(n,e,r))}(n,t,r)){const i=new we(n.segments,function tL(n,e,t,r,o){const i={};for(const s of r)if(Fc(n,t,s)&&!o[Rn(s)]){const a=new we([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,i[Rn(s)]=a}return{...o,...i}}(n,e,t,r,n.children));return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}const o=new we(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Fc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function R0(n,e,t,r){return!!(Rn(n)===r||r!==pe&&Fc(e,t,n))&&("**"===n.path||Zf(e,n,t).matched)}function N0(n,e,t){return 0===e.length&&!n.children[t]}const Lc=!1;class jc{constructor(e){this.segmentGroup=e||null}}class F0{constructor(e){this.urlTree=e}}function ma(n){return Ii(new jc(n))}function L0(n){return Ii(new F0(n))}class lL{constructor(e,t,r,o,i){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const e=Nc(this.urlTree.root,[],[],this.config).segmentGroup,t=new we(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,pe).pipe(P(i=>this.createUrlTree(xc(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Kn(i=>{if(i instanceof F0)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof jc?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,pe).pipe(P(o=>this.createUrlTree(xc(o),e.queryParams,e.fragment))).pipe(Kn(o=>{throw o instanceof jc?this.noMatchError(o):o}))}noMatchError(e){return new j(4002,Lc)}createUrlTree(e,t,r){const o=Nf(e);return new no(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(P(i=>new we([],i))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return ut(o).pipe(Jr(i=>{const s=r.children[i],a=O0(t,i);return this.expandSegmentGroup(e,a,s,i).pipe(P(l=>({segment:l,outlet:i})))}),Yw((i,s)=>(i[s.outlet]=s.segment,i),{}),Qw())}expandSegment(e,t,r,o,i,s){return ut(r).pipe(Jr(a=>this.expandSegmentAgainstRoute(e,t,r,a,o,i,s).pipe(Kn(c=>{if(c instanceof jc)return Q(null);throw c}))),eo(a=>!!a),Kn((a,l)=>{if(Yf(a))return N0(t,o,i)?Q(new we([],{})):ma(t);throw a}))}expandSegmentAgainstRoute(e,t,r,o,i,s,a){return R0(o,t,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s):ma(t):ma(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?L0(i):this.lineralizeSegments(r,i).pipe(It(s=>{const a=new we(s,{});return this.expandSegment(e,a,t,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Zf(t,o,i);if(!a)return ma(t);const d=this.applyRedirectCommands(l,o.redirectTo,u);return o.redirectTo.startsWith("/")?L0(d):this.lineralizeSegments(o,d).pipe(It(h=>this.expandSegment(e,t,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,r,o,i){return"**"===r.path?(e=T0(r,e),r.loadChildren?(r._loadedRoutes?Q({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(P(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new we(o,{})))):Q(new we(o,{}))):k0(t,r,o,e).pipe(pr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(e=r._injector??e,r,o).pipe(It(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=Nc(t,a,l,h),g=new we(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(P(w=>new we(a,w)));if(0===h.length&&0===p.length)return Q(new we(a,{}));const m=Rn(r)===i;return this.expandSegment(d,g,h,p,m?pe:i,!0).pipe(P(M=>new we(a.concat(M.segments),M.children)))})):ma(t)))}getChildConfig(e,t,r){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):function XF(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?Q(!0):Q(o.map(s=>{const a=Ni(s,n);return to(function VF(n){return n&&ga(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Fi(),P0())}(e,t,r).pipe(It(o=>o?this.configLoader.loadChildren(e,t).pipe(gt(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):function sL(n){return Ii(M0(Lc,3))}())):Q({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Q(r);if(o.numberOfChildren>1||!o.children[pe])return e.redirectTo,Ii(new j(4e3,Lc));o=o.children[pe]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const i=this.createSegmentGroup(e,t.root,r,o);return new no(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Rt(e,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,o){const i=this.createSegments(e,t.segments,r,o);let s={};return Rt(t.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,r,o)}),new we(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new j(4001,Lc);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class uL{}class fL{constructor(e,t,r,o,i,s,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=Nc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,pe).pipe(P(t=>{if(null===t)return null;const r=new Oc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pe,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Lr(r,t),i=new D0(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(e){const t=e.value,r=w0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return ut(Object.keys(r.children)).pipe(Jr(o=>{const i=r.children[o],s=O0(t,o);return this.processSegmentGroup(e,s,i,o)}),Yw((o,i)=>o&&i?(o.push(...i),o):null),function PN(n,e=!1){return D((t,r)=>{let o=0;t.subscribe(R(r,i=>{const s=n(i,o++);(s||e)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),Cc(null),Qw(),P(o=>{if(null===o)return null;const i=V0(o);return function pL(n){n.sort((e,t)=>e.value.outlet===pe?-1:t.value.outlet===pe?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}))}processSegment(e,t,r,o,i){return ut(t).pipe(Jr(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,o,i)),eo(s=>!!s),Kn(s=>{if(Yf(s))return N0(r,o,i)?Q([]):Q(null);throw s}))}processSegmentAgainstRoute(e,t,r,o,i){if(t.redirectTo||!R0(t,r,o,i))return Q(null);let s;if("**"===t.path){const a=o.length>0?e0(o).parameters:{},l=U0(r)+o.length;s=Q({snapshot:new Oc(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B0(t),Rn(t),t.component??t._loadedComponent??null,t,$0(r),l,H0(t)),consumedSegments:[],remainingSegments:[]})}else s=k0(r,t,o,e).pipe(P(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=U0(r)+l.length;return{snapshot:new Oc(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B0(t),Rn(t),t.component??t._loadedComponent??null,t,$0(r),d,H0(t)),consumedSegments:l,remainingSegments:c}}));return s.pipe(pr(a=>{if(null===a)return Q(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function gL(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=Nc(r,c,u,h.filter(m=>void 0===m.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(P(m=>null===m?null:[new Lr(l,m)]));if(0===h.length&&0===p.length)return Q([new Lr(l,[])]);const g=Rn(t)===i;return this.processSegment(d,h,f,p,g?pe:i).pipe(P(m=>null===m?null:[new Lr(l,m)]))}))}}function mL(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function V0(n){const e=[],t=new Set;for(const r of n){if(!mL(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=V0(r.children);e.push(new Lr(r.value,o))}return e.filter(r=>!t.has(r))}function $0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function U0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function B0(n){return n.data||{}}function H0(n){return n.resolve||{}}function z0(n){return"string"==typeof n.title||null===n.title}function Xf(n){return pr(e=>{const t=n(e);return t?ut(t).pipe(P(()=>e)):Q(e)})}const Li=new Y("ROUTES");let ep=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_e(oC)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=to(t.loadComponent()).pipe(P(q0),gt(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),Pf(()=>{this.componentLoaders.delete(t)})),o=new Kw(r,()=>new b).pipe(Of());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(P(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=Xw(l.get(Li,[],oe.Self|oe.Optional)));return{routes:c.map(Jf),injector:l}}),Pf(()=>{this.childrenLoaders.delete(r)})),s=new Kw(i,()=>new b).pipe(Of());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return to(t()).pipe(P(q0),It(r=>r instanceof hv||Array.isArray(r)?Q(r):ut(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function q0(n){return function EL(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let $c=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new b,this.configLoader=_e(ep),this.environmentInjector=_e(ar),this.urlSerializer=_e(ia),this.rootContexts=_e(da),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new dF(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new uF(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new kn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ca,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Nr(r=>0!==r.id),P(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),pr(r=>{let o=!1,i=!1;return Q(r).pipe(gt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pr(s=>{const a=t.browserUrlTree.toString(),l=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new Tc(s.id,t.serializeUrl(r.rawUrl),u,0)),t.rawUrlTree=s.rawUrl,s.resolve(null),tr}if(t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return W0(s.source)&&(t.browserUrlTree=s.extractedUrl),Q(s).pipe(pr(u=>{const d=this.transitions?.getValue();return this.events.next(new Vf(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?tr:Promise.resolve(u)}),function cL(n,e,t,r){return pr(o=>function aL(n,e,t,r,o){return new lL(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe(P(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),gt(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function _L(n,e,t,r,o){return It(i=>function hL(n,e,t,r,o,i,s="emptyOnly"){return new fL(n,e,t,r,o,s,i).recognize().pipe(pr(a=>null===a?function dL(n){return new He(e=>e.error(n))}(new uL):Q(a)))}(n,e,t,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(P(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),gt(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(h,u)}t.browserUrlTree=u.urlAfterRedirects}const d=new iF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,g=new Vf(u,this.urlSerializer.serialize(d),h,f);this.events.next(g);const m=b0(d,this.rootComponentType).snapshot;return Q(r={...s,targetSnapshot:m,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Tc(s.id,t.serializeUrl(r.extractedUrl),u,1)),t.rawUrlTree=s.rawUrl,s.resolve(null),tr}}),gt(s=>{const a=new sF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),P(s=>r={...s,guards:RF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function GF(n,e){return It(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return 0===s.length&&0===i.length?Q({...t,guardsResult:!0}):function qF(n,e,t,r){return ut(n).pipe(It(o=>function ZF(n,e,t,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?Q(i.map(a=>{const l=ha(e)??o,c=Ni(a,l);return to(function BF(n){return n&&ga(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(eo())})).pipe(Fi()):Q(!0)}(o.component,o.route,t,e,r)),eo(o=>!0!==o,!0))}(s,r,o,n).pipe(It(a=>a&&function jF(n){return"boolean"==typeof n}(a)?function WF(n,e,t,r){return ut(e).pipe(Jr(o=>Tf(function JF(n,e){return null!==n&&e&&e(new hF(n)),Q(!0)}(o.route.parent,r),function KF(n,e){return null!==n&&e&&e(new pF(n)),Q(!0)}(o.route,r),function QF(n,e,t){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function NF(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Ww(()=>Q(s.guards.map(l=>{const c=ha(s.node)??t,u=Ni(l,c);return to(function UF(n){return n&&ga(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(eo())})).pipe(Fi())));return Q(i).pipe(Fi())}(n,o.path,t),function YF(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Q(!0);const o=r.map(i=>Ww(()=>{const s=ha(e)??t,a=Ni(i,s);return to(function $F(n){return n&&ga(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(eo())}));return Q(o).pipe(Fi())}(n,o.route,t))),eo(o=>!0!==o,!0))}(r,i,n,e):Q(a)),P(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),gt(s=>{if(r.guardsResult=s.guardsResult,Io(s.guardsResult))throw S0(0,s.guardsResult);const a=new aF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Nr(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),Xf(s=>{if(s.guards.canActivateChecks.length)return Q(s).pipe(gt(a=>{const l=new lF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),pr(a=>{let l=!1;return Q(a).pipe(function vL(n,e){return It(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Q(t);let i=0;return ut(o).pipe(Jr(s=>function CL(n,e,t,r){const o=n.routeConfig,i=n._resolve;return void 0!==o?.title&&!z0(o)&&(i[ra]=o.title),function bL(n,e,t,r){const o=function wL(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Q({});const i={};return ut(o).pipe(It(s=>function DL(n,e,t,r){const o=ha(e)??r,i=Ni(n,o);return to(i.resolve?i.resolve(e,t):o.runInContext(()=>i(e,t)))}(n[s],e,t,r).pipe(eo(),gt(a=>{i[s]=a}))),Af(1),function kN(n){return P(()=>n)}(i),Kn(s=>Yf(s)?tr:Ii(s)))}(i,n,e,r).pipe(P(s=>(n._resolvedData=s,n.data=w0(n,t).resolve,o&&z0(o)&&(n.data[ra]=o.title),null)))}(s.route,r,n,e)),gt(()=>i++),Af(1),It(s=>i===o.length?Q(t):tr))})}(t.paramsInheritanceStrategy,this.environmentInjector),gt({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),gt(a=>{const l=new cF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Xf(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(gt(u=>{l.component=u}),P(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Gw(a(s.targetSnapshot.root)).pipe(Cc(),Ti(1))}),Xf(()=>this.afterPreactivation()),P(s=>{const a=function DF(n,e,t){const r=ua(n,e._root,t?t._root:void 0);return new C0(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),gt(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>P(r=>(new kF(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),Ti(1),gt({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new To(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Pf(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Kn(s=>{if(i=!0,I0(s)){x0(s)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new Ic(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),x0(s)){const l=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||W0(r.source)};t.scheduleNavigation(l,ca,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new $f(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(s))}catch(l){r.reject(l)}}return tr}))}))}cancelNavigationTransition(t,r,o){const i=new Ic(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function W0(n){return n!==ca}let K0=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===pe);return r}getResolvedTitleForRoute(t){return t.data[ra]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return _e(SL)},providedIn:"root"}),n})(),SL=(()=>{class n extends K0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(G(Db))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ML=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return _e(IL)},providedIn:"root"}),n})();class xL{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let IL=(()=>{class n extends xL{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=At(n)))(r||n)}}(),n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Uc=new Y("",{providedIn:"root",factory:()=>({})});let OL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return _e(AL)},providedIn:"root"}),n})(),AL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PL(n){throw n}function kL(n,e,t){return e.parse("/")}const RL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let St=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=_e(HO),this.isNgZoneEnabled=!1,this.options=_e(Uc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||PL,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||kL,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=_e(OL),this.routeReuseStrategy=_e(ML),this.urlCreationStrategy=_e(CF),this.titleStrategy=_e(K0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Xw(_e(Li,{optional:!0})??[]),this.navigationTransitions=_e($c),this.urlSerializer=_e(ia),this.location=_e(Th),this.isNgZoneEnabled=_e(it)instanceof it&&it.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new no,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=b0(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ca,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Jf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Io(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ca,null,r)}navigate(t,r={skipLocationChange:!1}){return function FL(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new j(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...RL}:!1===r?{...NL}:r,Io(t))return n0(this.currentUrlTree,t,o);const i=this.parseUrl(t);return n0(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const i=t[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bc=(()=>{class n{constructor(t,r,o,i,s,a){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new b;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof To&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Di(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Di(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Di(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function $m(n,e,t){return function HM(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?Vm:bs}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,t,r):o.removeAttribute(i,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(A(St),A(Oo),function Za(n){return function pS(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let o=0;for(;o<r;){const i=t[o];if(Og(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof t[o];)o++;else{if(i===e)return t[o+1];o+=2}}}return null}(Ot(),n)}("tabindex"),A(Mr),A(pn),A(Do))},n.\u0275dir=se({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&H("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&t&&Ut("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[xn]}),n})(),J0=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,o,i,s){this.router=t,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new tt,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof To&&this.update()})}ngAfterContentInit(){Q(this.links.changes,Q(null)).pipe(Lo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ut(t).pipe(Lo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function LL(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(A(St),A(pn),A(Mr),A(Us),A(Bc,8))},n.\u0275dir=se({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&Rv(o,Bc,5),2&t){let i;kv(i=function Nv(){return function wO(n,e){return n[or].queries[e].queryList}(N(),Dg())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[xn]}),n})();class Y0{}let jL=(()=>{class n{constructor(t,r,o,i,s){this.router=t,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Nr(t=>t instanceof To),Jr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=Tl(i.providers,t,`Route: ${i.path}`));const s=i._injector??t,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return ut(o).pipe(Lo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Q(null);const i=o.pipe(It(s=>null===s?Q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?ut([i,this.loader.loadComponent(r)]).pipe(Lo()):i})}}return n.\u0275fac=function(t){return new(t||n)(G(St),G(oC),G(ar),G(Y0),G(ep))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const np=new Y("");let Q0=(()=>{class n{constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Vf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof To&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _0&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _0(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function yy(){throw new Error("invalid")}()},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();var mn=(()=>((mn=mn||{})[mn.COMPLETE=0]="COMPLETE",mn[mn.FAILED=1]="FAILED",mn[mn.REDIRECTING=2]="REDIRECTING",mn))();const ji=!1;function ro(n,e){return{\u0275kind:n,\u0275providers:e}}const rp=new Y("",{providedIn:"root",factory:()=>!1});function X0(){const n=_e(lr);return e=>{const t=n.get(Fl);if(e!==t.components[0])return;const r=n.get(St),o=n.get(eD);1===n.get(op)&&r.initialNavigation(),n.get(tD,null,oe.Optional)?.setUpPreloading(),n.get(np,null,oe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const eD=new Y(ji?"bootstrap done indicator":"",{factory:()=>new b}),op=new Y(ji?"initial navigation":"",{providedIn:"root",factory:()=>1});function HL(){let n=[];return n=ji?[{provide:cl,multi:!0,useFactory:()=>{const e=_e(St);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function mF(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],ro(1,n)}const tD=new Y(ji?"router preloader":"");function zL(n){return ro(0,[{provide:tD,useExisting:jL},{provide:Y0,useExisting:n}])}const ya=!1,nD=new Y(ya?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),GL=[Th,{provide:ia,useClass:kf},St,da,{provide:Oo,useFactory:function Z0(n){return n.routerState.root},deps:[St]},ep,ya?{provide:rp,useValue:!0}:[]];function qL(){return new hC("Router",St)}let ip=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[GL,ya&&r?.enableTracing?HL().\u0275providers:[],{provide:Li,multi:!0,useValue:t},{provide:nD,useFactory:YL,deps:[[St,new hs,new fs]]},{provide:Uc,useValue:r||{}},r?.useHash?{provide:Do,useClass:OA}:{provide:Do,useClass:NC},{provide:np,useFactory:()=>{const n=_e(KP),e=_e(it),t=_e(Uc),r=_e($c),o=_e(ia);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Q0(o,r,n,e,t)}},r?.preloadingStrategy?zL(r.preloadingStrategy).\u0275providers:[],{provide:hC,multi:!0,useFactory:qL},r?.initialNavigation?QL(r):[],[{provide:rD,useFactory:X0},{provide:dC,multi:!0,useExisting:rD}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Li,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(G(nD,8))},n.\u0275mod=Ln({type:n}),n.\u0275inj=Sn({imports:[Wf]}),n})();function YL(n){if(ya&&n)throw new j(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function QL(n){return["disabled"===n.initialNavigation?ro(3,[{provide:kl,multi:!0,useFactory:()=>{const e=_e(St);return()=>{e.setUpLocationChangeListener()}}},{provide:op,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ro(2,[{provide:op,useValue:0},{provide:kl,multi:!0,deps:[lr],useFactory:e=>{const t=e.get(IA,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(St),i=e.get(eD);(function VL(n,e){n.events.pipe(Nr(t=>t instanceof To||t instanceof Ic||t instanceof $f||t instanceof Tc),P(t=>t instanceof To||t instanceof Tc?mn.COMPLETE:t instanceof Ic&&(0===t.code||1===t.code)?mn.REDIRECTING:mn.FAILED),Nr(t=>t!==mn.REDIRECTING),Ti(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get($c).afterPreactivation=()=>(r(!0),i.closed?Q(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const rD=new Y(ya?"Router Initializer":"");let XL=(()=>{const e=class{constructor(){this.title="Pokemon TCG Pocket Collector"}};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=uo({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){1&o&&an(0,"router-outlet")},dependencies:[Pc],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background-color:#000;min-height:100vh}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.data-overview[_ngcontent-%COMP%]{margin-top:30px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 6px #0000001a}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;opacity:.9}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0}.section[_ngcontent-%COMP%]{margin:40px 0;padding:20px 0;border-top:2px solid #e9ecef}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:20px}.sets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.set-card[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.set-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px}.rarity-stats[_ngcontent-%COMP%], .pack-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.rarity-item[_ngcontent-%COMP%], .pack-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#000;border-radius:5px;border-left:4px solid #007bff}.rarity-name[_ngcontent-%COMP%], .pack-name[_ngcontent-%COMP%]{font-weight:600;color:#fff}.rarity-count[_ngcontent-%COMP%], .pack-count[_ngcontent-%COMP%]{color:#ccc}.rarity-percentage[_ngcontent-%COMP%], .pack-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0}.feature[_ngcontent-%COMP%]{background-color:#000;padding:20px;border-radius:8px;border-left:4px solid #17a2b8}.feature[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0;font-size:14px}.api-info[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:20px}.api-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0}.api-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;margin:0}.api-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;color:#ff6b6b}.error[_ngcontent-%COMP%]{background-color:#000;color:#ff6b6b;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center;border:1px solid #ff6b6b}.card-info[_ngcontent-%COMP%]{margin-top:30px}.card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}.card-item[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.card-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin:0 0 10px;font-size:16px}.card-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#ccc}.note[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#ccc;margin-top:20px}.instructions[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:30px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:#fff}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace}.data-info[_ngcontent-%COMP%]{background-color:#000;border-left:4px solid #007bff;padding:15px;margin-top:20px}.data-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:200px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),n})();function oD(n,e,t,r,o,i,s){try{var a=n[i](s),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,o)}function y(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function s(l){oD(i,r,o,s,a,"next",l)}function a(l){oD(i,r,o,s,a,"throw",l)}s(void 0)})}}let e2=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json",this.LOCAL_CARDS_PATH="assets/cards/cards.json"}fetchCardsFromAPI(){return this.http.get(this.CARDS_API_URL)}downloadAndStoreCards(){return this.fetchCardsFromAPI().pipe(gt(r=>{localStorage.setItem("pokemonCards",JSON.stringify(r))}))}getStoredCards(){const r=localStorage.getItem("pokemonCards");return r?JSON.parse(r):null}loadCards(){return this.http.get(this.LOCAL_CARDS_PATH).pipe(P(r=>r||[]))}getCardsBySet(r){return this.loadCards().pipe(P(o=>o.filter(i=>i.set===r)))}getCardsByType(r){return this.loadCards().pipe(P(o=>o.filter(i=>i.types&&i.types.includes(r))))}getCardsByRarity(r){return this.loadCards().pipe(P(o=>o.filter(i=>i.rarity===r)))}searchCardsByName(r){return this.loadCards().pipe(P(o=>o.filter(i=>i.label.eng.toLowerCase().includes(r.toLowerCase()))))}getUniqueSets(){return this.loadCards().pipe(P(r=>[...new Set(r.map(o=>o.set))]))}getAvailableTypes(){return this.loadCards().pipe(P(r=>[...new Set(r.flatMap(o=>o.types||[]).filter(o=>!!o))]))}getUniqueRarities(){return this.loadCards().pipe(P(r=>[...new Set(r.map(o=>o.rarity))]))}getUniquePacks(){return this.loadCards().pipe(P(r=>[...new Set(r.flatMap(o=>o.packs))]))}};let n=e;return e.\u0275fac=function(o){return new(o||e)(G(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),t2=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsData(){return this.http.get(this.CARDS_API_URL).pipe(Kn(r=>(console.error("Error downloading cards data:",r),Ii(()=>new Error("Failed to download cards data")))))}downloadCardsAsBlob(){return this.downloadCardsData().pipe(P(r=>{const o=JSON.stringify(r,null,2);return new Blob([o],{type:"application/json"})}))}triggerDownload(){this.downloadCardsAsBlob().subscribe({next:r=>{const o=window.URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download="cards.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},error:r=>{console.error("Failed to download cards data:",r)}})}getStorageInstructions(){return"\nTo store the cards data locally:\n\n1. Create a 'cards' folder in src/assets/\n2. Use the downloadCardsAsBlob() method to get the data\n3. Save the file as 'cards.json' in src/assets/cards/\n\nAlternative: Use triggerDownload() to download the file and manually move it to the assets folder.\n\nNote: In a production environment, you would typically have a backend service \nto handle file storage and serving.\n    "}};let n=e;return e.\u0275fac=function(o){return new(o||e)(G(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),n2=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsJson(){this.http.get(this.CARDS_API_URL).subscribe({next:r=>{const o=JSON.stringify(r,null,2),i=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="cards.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`Downloaded ${r.length} cards to cards.json\n\nPlease move the file to: src/assets/cards/cards.json`)},error:r=>{console.error("Failed to download cards data:",r),alert("Failed to download cards data. Please check your internet connection.")}})}showSetupInstructions(){return`\n=== Pokemon TCG Pocket Collector Setup Instructions ===\n\n1. AUTOMATIC DOWNLOAD (Recommended):\n   - Click "Download cards.json" button\n   - Move the downloaded file to: src/assets/cards/cards.json\n   - Restart the development server\n\n2. MANUAL DOWNLOAD:\n   - Go to: ${this.CARDS_API_URL}\n   - Right-click and "Save As" to src/assets/cards/cards.json\n   - Restart the development server\n\n3. VERIFY SETUP:\n   - Click "Load Cards Data" to test the service\n   - Check browser console for detailed information\n   - Data will be cached in localStorage for offline use\n\n=== Service Features ===\n- \u2705 Fetch cards from Pokemon TCG Pocket database\n- \u2705 Store data locally for offline access\n- \u2705 Filter by set, type, rarity\n- \u2705 Search cards by name\n- \u2705 Get unique values for filters\n- \u2705 Automatic fallback to localStorage\n\nFor more information, check the browser console when using the services.\n    `}};let n=e;return e.\u0275fac=function(o){return new(o||e)(G(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),iD=(()=>{const e=class{constructor(r){this.http=r,this.BASE_PATH="assets/cards/",this.API_BASE="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/"}getCardRarityCode(r,o){for(const[i,s]of Object.entries(o))if(s.split(" - ")[0]===r.rarity)return i;return r.rarity||"Unknown"}loadSets(){return this.http.get(`${this.BASE_PATH}sets.json`)}loadRarities(){return this.http.get(`${this.BASE_PATH}rarity.json`)}loadCards(){return this.http.get(`${this.BASE_PATH}cards.json`)}loadAllData(){return Eo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(gt(r=>{}))}getSetByCode(r){return this.loadSets().pipe(P(o=>o.find(i=>i.code===r)))}getRarityName(r){return this.loadRarities().pipe(P(o=>o[r]))}getCardsBySetWithInfo(r){return Eo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(P(({cards:o,sets:i,rarities:s})=>{const a=i.find(l=>l.code===r);return o.filter(l=>l.set===r).map(l=>({...l,setInfo:a,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}))}))}getSetsWithCardCounts(){return Eo({cards:this.loadCards(),sets:this.loadSets()}).pipe(P(({cards:r,sets:o})=>o.map(i=>{const s=r.filter(a=>a.set===i.code).length;return{...i,actualCardCount:s}})))}getRarityDistribution(){return Eo({cards:this.loadCards(),rarities:this.loadRarities()}).pipe(P(({cards:r,rarities:o})=>{const i={};r.forEach(a=>{const l=this.getCardRarityCode(a,o);i[l]=(i[l]||0)+1});const s=r.length;return Object.entries(i).map(([a,l])=>({code:a,name:o[a]||a,count:l,percentage:Math.round(l/s*100*100)/100})).sort((a,l)=>l.count-a.count)}))}getPackDistribution(){return this.loadCards().pipe(P(r=>{const o={};r.forEach(s=>{(Array.isArray(s.packs)?s.packs:[]).forEach(l=>{l&&l.trim()&&(o[l]=(o[l]||0)+1)})});const i=Object.values(o).reduce((s,a)=>s+a,0);return Object.entries(o).map(([s,a])=>({pack:s,count:a,percentage:i>0?Math.round(a/i*100*100)/100:0})).sort((s,a)=>a.count-s.count)}))}searchCardsEnhanced(r){return Eo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(P(({cards:o,sets:i,rarities:s})=>o.filter(l=>l.label.eng.toLowerCase().includes(r.toLowerCase())).map(l=>{const c=i.find(u=>u.code===l.set);return{...l,setInfo:c,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}})))}getComprehensiveStats(){return Eo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(P(({cards:r,sets:o,rarities:i})=>({totalCards:r.length,totalSets:o.length,totalRarities:Object.keys(i).length,setBreakdown:o.map(a=>({...a,actualCardCount:r.filter(l=>l.set===a.code).length})),rarityBreakdown:Object.entries(i).map(([a,l])=>({code:a,name:l,count:r.filter(c=>this.getCardRarityCode(c,i)===a).length})),packBreakdown:this.calculatePackDistribution(r),dateRange:{earliest:o.reduce((a,l)=>new Date(l.releaseDate)<new Date(a)?l.releaseDate:a,o[0]?.releaseDate||""),latest:o.reduce((a,l)=>new Date(l.releaseDate)>new Date(a)?l.releaseDate:a,o[0]?.releaseDate||"")}})))}calculatePackDistribution(r){const o={};return r.forEach(i=>{(Array.isArray(i.packs)?i.packs:[]).forEach(a=>{a&&a.trim()&&(o[a]=(o[a]||0)+1)})}),Object.entries(o).map(([i,s])=>({pack:i,count:s})).sort((i,s)=>s.count-i.count)}};let n=e;return e.\u0275fac=function(o){return new(o||e)(G(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),sD=(()=>{const e=class{constructor(r,o,i,s){this.cardDataService=r,this.fileStorageService=o,this.assetsHelper=i,this.pokemonDataService=s}initializeCardData(){return this.cardDataService.downloadAndStoreCards().pipe(gt(r=>{this.logDataSummary(r)}),Kn(r=>(console.error("Failed to initialize card data:",r),Q(this.cardDataService.getStoredCards()||[]))))}downloadCardsFile(){this.assetsHelper.downloadCardsJson()}getStorageInstructions(){return this.assetsHelper.showSetupInstructions()}logDataSummary(r){new Set(r.map(a=>a.set)),new Set(r.map(a=>a.rarity)),new Set(r.flatMap(a=>a.packs))}getAllCards(){return this.cardDataService.loadCards()}getCardsBySet(r){return this.cardDataService.getCardsBySet(r)}getCardsByType(r){return this.cardDataService.getCardsByType(r)}getCardsByPack(r){return this.cardDataService.loadCards().pipe(P(o=>o.filter(i=>i.packs.includes(r))))}searchCards(r){return this.cardDataService.searchCardsByName(r)}getFilterOptions(){return new He(r=>{Promise.all([this.cardDataService.getUniqueSets().toPromise(),this.cardDataService.getAvailableTypes().toPromise(),this.cardDataService.getUniqueRarities().toPromise(),this.cardDataService.getUniquePacks().toPromise()]).then(([o,i,s,a])=>{r.next({sets:o||[],types:i||[],rarities:s||[],packs:a||[]}),r.complete()}).catch(o=>{r.error(o)})})}loadAllPokemonData(){return this.pokemonDataService.loadAllData().pipe(gt(r=>{this.logEnhancedDataSummary(r)}))}getAllSets(){return this.pokemonDataService.loadSets()}getSetsWithCounts(){return this.pokemonDataService.getSetsWithCardCounts()}getRarityMapping(){return this.pokemonDataService.loadRarities()}getSetInfo(r){return this.pokemonDataService.getSetByCode(r)}getCardsBySetEnhanced(r){return this.pokemonDataService.getCardsBySetWithInfo(r)}searchCardsEnhanced(r){return this.pokemonDataService.searchCardsEnhanced(r)}getRarityStats(){return this.pokemonDataService.getRarityDistribution()}getPackStats(){return this.pokemonDataService.getPackDistribution()}getComprehensiveStats(){return this.pokemonDataService.getComprehensiveStats()}logEnhancedDataSummary(r){}};let n=e;return e.\u0275fac=function(o){return new(o||e)(G(e2),G(t2),G(n2),G(iD))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();class sp extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class aD extends sp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lD extends sp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class cD extends sp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Hc=(()=>{return(n=Hc||(Hc={})).Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",Hc;var n})();class o2{constructor(e,{headers:t={},customFetch:r,region:o=Hc.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=(n=>{let e;return e=n||(typeof fetch>"u"?(...t)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,L.__awaiter)(this,arguments,void 0,function*(t,r={}){var o;try{const{headers:i,method:s,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${t}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):"string"==typeof a?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(v=>{throw"AbortError"===v.name?v:new aD(v)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new lD(f);if(!f.ok)throw new cD(f);let m,g=(null!==(o=f.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return m="application/json"===g?yield f.json():"application/octet-stream"===g||"application/pdf"===g?yield f.blob():"text/event-stream"===g?f:"multipart/form-data"===g?yield f.formData():yield f.text(),{data:m,error:null,response:f}}catch(i){return i instanceof Error&&"AbortError"===i.name?{data:null,error:new aD(i)}:{data:null,error:i,response:i instanceof cD||i instanceof lD?i.context:void 0}}})}}var i2=Z(358);const{PostgrestClient:uD}=i2,h2=class d2{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(e=navigator.userAgent)&&void 0!==e&&e.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const o=parseInt(t.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch{return!1}}};var Vi=(()=>{return(n=Vi||(Vi={}))[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",Vi;var n})(),mt=(()=>{return(n=mt||(mt={})).closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",mt;var n})(),Nn=(()=>{return(n=Nn||(Nn={})).close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",Nn;var n})(),zc=(()=>((zc||(zc={})).websocket="websocket",zc))(),oo=(()=>{return(n=oo||(oo={})).Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",oo;var n})();class y2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const o=t.getUint8(1),i=t.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(e.slice(s,s+o));s+=o;const l=r.decode(e.slice(s,s+i));return s+=i,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class dD{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le=(()=>{return(n=Le||(Le={})).abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",Le;var n})();const hD=(n,e,t={})=>{var r;const o=null!==(r=t.skipTypes)&&void 0!==r?r:[];return e?Object.keys(e).reduce((i,s)=>(i[s]=_2(s,n,e,o),i),{}):{}},_2=(n,e,t,r)=>{const i=e.find(a=>a.name===n)?.type,s=t[n];return i&&!r.includes(i)?fD(i,s):lp(s)},fD=(n,e)=>{if("_"===n.charAt(0)){const t=n.slice(1,n.length);return w2(e,t)}switch(n){case Le.bool:return v2(e);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return C2(e);case Le.json:case Le.jsonb:return b2(e);case Le.timestamp:return D2(e);default:return lp(e)}},lp=n=>n,v2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},C2=n=>{if("string"==typeof n){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},b2=n=>{if("string"==typeof n)try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},w2=(n,e)=>{if("string"!=typeof n)return n;const t=n.length-1;if("{"===n[0]&&"}"===n[t]){let i;const s=n.slice(1,t);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>fD(e,a))}return n},D2=n=>"string"==typeof n?n.replace(" ","T"):n,pD=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname=""===e.pathname||"/"===e.pathname?"/api/broadcast":e.pathname+"/api/broadcast",e.href};class cp{constructor(e,t,r={},o=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class _a{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_a.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=_a.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=_a.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const i=this.cloneDeep(e),s=this.transformState(t),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(m=>m.presence_ref),f=d.map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0),g=d.filter(m=>h.indexOf(m.presence_ref)<0);p.length>0&&(a[c]=p),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(e,t,r,o){const{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=e[a])&&void 0!==c?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,o(a,c,l),0===c.length&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return t[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $i=(()=>{return(n=$i||($i={})).BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",$i;var n})(),yr=(()=>{return(n=yr||(yr={})).SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",yr;var n})();class up{constructor(e,t={config:{}},r){var o,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new cp(this,Nn.join,this.params,this.timeout),this.rejoinTimer=new dD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nn.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new _a(this),this.broadcastEndpointURL=pD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==mt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(p=>p.filter))&&void 0!==i?i:[],d=!!this.bindings[$i.PRESENCE]&&this.bindings[$i.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(yr.CHANNEL_ERROR,p)),this._onClose(()=>e?.(yr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",function(){var p=y(function*({postgres_changes:g}){var m;if(r.socket.setAuth(),void 0!==g){const v=r.bindings.postgres_changes,M=null!==(m=v?.length)&&void 0!==m?m:0,w=[];for(let k=0;k<M;k++){const F=v[k],{filter:{event:W,schema:Qt,table:Ae,filter:ct}}=F,Qn=g&&g[k];if(!Qn||Qn.event!==W||Qn.schema!==Qt||Qn.table!==Ae||Qn.filter!==ct)return r.unsubscribe(),r.state=mt.errored,void e?.(yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));w.push(Object.assign(Object.assign({},F),{id:Qn.id}))}return r.bindings.postgres_changes=w,void(e&&e(yr.SUBSCRIBED))}e?.(yr.SUBSCRIBED)});return function(g){return p.apply(this,arguments)}}()).receive("error",p=>{this.state=mt.errored,e?.(yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(e){var t=this;return y(function*(r,o={}){return yield t.send({type:"presence",event:"track",payload:r},o.timeout||t.timeout)}).apply(this,arguments)}untrack(){var e=this;return y(function*(t={}){return yield e.send({type:"presence",event:"untrack"},t)}).apply(this,arguments)}on(e,t,r){return this.state===mt.joined&&e===$i.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}httpSend(e,t){var r=this;return y(function*(o,i,s={}){var a;const l=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,c,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const h=yield u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(e){var t=this;return y(function*(r,o={}){var i,s;if(t._canPush()||"broadcast"!==r.type)return new Promise(a=>{var l,c,u;const d=t._push(r.type,r,o.timeout||t.timeout);"broadcast"===r.type&&!(null!==(u=null===(c=null===(l=t.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=r,u={method:"POST",headers:{Authorization:t.socket.accessTokenValue?`Bearer ${t.socket.accessTokenValue}`:"",apikey:t.socket.apiKey?t.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:t.subTopic,event:a,payload:l,private:t.private}]})};try{const d=yield t._fetchWithTimeout(t.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:t.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new cp(this,Nn.leave,{},e),r.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mt.closed,this.bindings={}}_fetchWithTimeout(e,t,r){var o=this;return y(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),a})()}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new cp(this,e,t,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,i;const s=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Nn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(f=>{var p,g,m;return"*"===(null===(p=f.filter)||void 0===p?void 0:p.event)||(null===(m=null===(g=f.filter)||void 0===g?void 0:g.event)||void 0===m?void 0:m.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):null===(i=this.bindings[s])||void 0===i||i.filter(f=>{var p,g,m,v,M,w;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in f){const k=f.id,F=null===(p=f.filter)||void 0===p?void 0:p.event;return k&&(null===(g=t.ids)||void 0===g?void 0:g.includes(k))&&("*"===F||F?.toLocaleLowerCase()===(null===(m=t.data)||void 0===m?void 0:m.type.toLocaleLowerCase()))}{const k=null===(M=null===(v=f?.filter)||void 0===v?void 0:v.event)||void 0===M?void 0:M.toLocaleLowerCase();return"*"===k||k===(null===(w=t?.event)||void 0===w?void 0:w.toLocaleLowerCase())}}return f.type.toLocaleLowerCase()===s}).map(f=>{if("object"==typeof h&&"ids"in h){const p=h.data,{schema:g,table:m,commit_timestamp:v,type:M,errors:w}=p;h=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:v,eventType:M,new:{},old:{},errors:w}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===mt.closed}_isJoined(){return this.state===mt.joined}_isJoining(){return this.state===mt.joining}_isLeaving(){return this.state===mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),i={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&up.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Nn.close,{},e)}_onError(e){this._on(Nn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=hD(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=hD(e.columns,e.old_record)),t}}const dp=()=>{},E2=[1e3,2e3,5e3,1e4];class x2{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dp,this.ref=0,this.reconnectTimer=null,this.logger=dp,this.conn=null,this.sendBuffer=[],this.serializer=new y2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return i=o||(typeof fetch>"u"?(...s)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...s)=>i(...s)},null===(r=t?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${zc.websocket}`,this.httpEndpoint=pD(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=h2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){var t=this;return y(function*(){const r=yield e.unsubscribe();return 0===t.channels.length&&t.disconnect(),r})()}removeAllChannels(){var e=this;return y(function*(){const t=yield Promise.all(e.channels.map(r=>r.unsubscribe()));return e.channels=[],e.disconnect(),t})()}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vi.connecting:return oo.Connecting;case Vi.open:return oo.Open;case Vi.closing:return oo.Closing;default:return oo.Closed}}isConnected(){return this.connectionState()===oo.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new up(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:o,ref:i}=e,s=()=>{this.encode(e,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${t} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var e=this;return y(function*(t=null){e._authPromise=e._performAuth(t);try{yield e._authPromise}finally{e._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var e=this;return y(function*(){var t;if(e.isConnected()){if(e.pendingHeartbeatRef){e.pendingHeartbeatRef=null,e.log("transport","heartbeat timeout. Attempting to re-establish connection");try{e.heartbeatCallback("timeout")}catch(r){e.log("error","error in heartbeat callback",r)}return e._wasManualDisconnect=!1,null===(t=e.conn)||void 0===t||t.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;e.isConnected()||null===(r=e.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}e.pendingHeartbeatRef=e._makeRef(),e.push({topic:"phoenix",event:"heartbeat",payload:{},ref:e.pendingHeartbeatRef});try{e.heartbeatCallback("sent")}catch(r){e.log("error","error in heartbeat callback",r)}e._setAuthSafely("heartbeat")}else try{e.heartbeatCallback("disconnected")}catch(r){e.log("error","error in heartbeat callback",r)}})()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return this.ref=e===this.ref?0:e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if("phoenix"===t.topic&&"phx_reply"===t.event)try{this.heartbeatCallback("ok"===t.payload.status?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=t;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,i,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{"keepAlive"===t.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Nn.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}_performAuth(){var e=this;return y(function*(t=null){let r;r=t||(e.accessToken?yield e.accessToken():e.accessTokenValue),e.accessTokenValue!=r&&(e.accessTokenValue=r,e.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.76.1"}),o.joinedOnce&&o._isJoined()&&o._push(Nn.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var e=this;return y(function*(){e._authPromise&&(yield e._authPromise)})()}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){var e=this;this.reconnectTimer=new dD(y(function*(){setTimeout(y(function*(){yield e._waitForAuthIfNeeded(),e.isConnected()||e.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(e){var t,r,o,i,s,a,l,c,u;if(this.transport=null!==(t=e?.transport)&&void 0!==t?t:null,this.timeout=null!==(r=e?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=e?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=e?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=e?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=e?.heartbeatCallback)&&void 0!==a?a:dp,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=e?.reconnectAfterMs)&&void 0!==l?l:d=>E2[d-1]||1e4,this.encode=null!==(c=e?.encode)&&void 0!==c?c:(d,h)=>h(JSON.stringify(d)),this.decode=null!==(u=e?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class hp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qe(n){return"object"==typeof n&&null!==n&&"__isStorageError"in n}class I2 extends hp{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fp extends hp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const pp=n=>{let e;return e=n||(typeof fetch>"u"?(...t)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)},gp=n=>{if(Array.isArray(n))return n.map(t=>gp(t));if("function"==typeof n||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[o]=gp(r)}),e},mp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),A2=(n,e,t)=>(0,L.__awaiter)(void 0,void 0,void 0,function*(){const r=yield(0,L.__awaiter)(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(Z.bind(Z,397))).Response:Response});n instanceof r&&!t?.noResolveJson?n.json().then(o=>{const i=n.status||500,s=o?.statusCode||i+"";e(new I2(mp(o),i,s))}).catch(o=>{e(new fp(mp(o),o))}):e(new fp(mp(n),n))}),P2=(n,e,t,r)=>{const o={method:n,headers:e?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const e=Object.getPrototypeOf(n);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),t)):o};function va(n,e,t,r,o,i){return(0,L.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(t,P2(e,r,o,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>A2(l,a,r))})})}function Ca(n,e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){return va(n,"GET",e,t,r)})}function Jn(n,e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){return va(n,"POST",e,r,o,t)})}function yp(n,e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){return va(n,"PUT",e,r,o,t)})}function _p(n,e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){return va(n,"DELETE",e,r,o,t)})}class R2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}var gD;gD=Symbol.toStringTag;const L2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class j2{constructor(e,t={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=pp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},mD),o);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield("PUT"==e?yp:Jn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}upload(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:mD.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(yield yp(this.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Qe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);t?.upsert&&(o["x-upsert"]="true");const i=yield Jn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new hp("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}update(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}copy(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),i=yield Jn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{const o=yield Jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}download(e,t){const o=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(e);return new class N2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[gD]="BlobDownloadBuilder",this.promise=null}asStream(){return new R2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}(()=>Ca(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Ca(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:gp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}exists(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function k2(n,e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){return va(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r)&&r instanceof fp&&[400,404].includes(r.originalError?.status))return{data:!1,error:r};throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),o=[],i=t?.download?`download=${!0===t.download?"":t.download}`:"";""!==i&&o.push(i);const a=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});""!==l&&o.push(l);let c=o.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _p(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}list(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},L2),t),{prefix:e||""});return{data:yield Jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}listV2(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Jn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const _D={"X-Client-Info":"storage-js/2.76.1"};class V2{constructor(e,t={},r,o){this.shouldThrowOnError=!1;const i=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_D),t),this.fetch=pp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ca(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ca(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}createBucket(e){return(0,L.__awaiter)(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}updateBucket(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _p(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}}class $2{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_D),t),this.fetch=pp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}listBuckets(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==e?.limit&&t.set("limit",e.limit.toString()),void 0!==e?.offset&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield Ca(this.fetch,o,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _p(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}}const vp={"X-Client-Info":"storage-js/2.76.1","Content-Type":"application/json"};class vD extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function yn(n){return"object"==typeof n&&null!==n&&"__isStorageVectorsError"in n}class Cp extends vD{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class U2 extends vD{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}const bp=n=>{let e;return e=n||(typeof fetch>"u"?(...t)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)},CD=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),H2=(n,e,t)=>(0,L.__awaiter)(void 0,void 0,void 0,function*(){if(n&&"object"==typeof n&&"status"in n&&"ok"in n&&"number"==typeof n.status&&!t?.noResolveJson){const o=n.status||500,i=n;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";e(new Cp(CD(s),o,a))}).catch(()=>{e(new Cp(i.statusText||`HTTP ${o} error`,o,o+""))}):e(new Cp(i.statusText||`HTTP ${o} error`,o,o+""))}else e(new U2(CD(n),n))}),z2=(n,e,t,r)=>{const o={method:n,headers:e?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const e=Object.getPrototypeOf(n);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),t)):o};function _n(n,e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){return function qc(n,e,t,r,o,i){return(0,L.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(t,z2(e,r,o,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return c&&c.includes("application/json")?l.json():{}}).then(l=>s(l)).catch(l=>H2(l,a,r))})})}(n,"POST",e,r,o,t)})}class G2{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vp),t),this.fetch=bp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield _n(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r))return{data:null,error:r};throw r}})}listIndexes(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield _n(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yn(r))return{data:null,error:r};throw r}})}}class q2{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vp),t),this.fetch=bp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield _n(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}getVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}listVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield _n(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}queryVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield _n(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}}class W2{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vp),t),this.fetch=bp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield _n(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}listBuckets(){return(0,L.__awaiter)(this,arguments,void 0,function*(e={}){try{return{data:yield _n(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield _n(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yn(t))return{data:null,error:t};throw t}})}}class K2 extends W2{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new J2(this.url,this.headers,e,this.fetch)}}class J2 extends G2{constructor(e,t,r,o){super(e,t,o),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,L.__awaiter)(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Y2(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Y2 extends q2{constructor(e,t,r,o,i){super(e,t,i),this.vectorBucketName=r,this.indexName=o}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,L.__awaiter)(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Q2 extends V2{constructor(e,t={},r,o){super(e,t,r,o)}from(e){return new j2(this.url,this.headers,e,this.fetch)}get vectors(){return new K2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $2(this.url+"/iceberg",this.headers,this.fetch)}}let ba="";ba=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const X2={headers:{"X-Client-Info":`supabase-js-${ba}/2.76.1`}},ej={schema:"public"},tj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nj={};var bD=Z(397);const ij=(n,e,t)=>{const r=(n=>{let e;return e=n||(typeof fetch>"u"?bD.default:fetch),(...t)=>e(...t)})(t),o=typeof Headers>"u"?bD.Headers:Headers;return function(){var i=y(function*(s,a){var l;const c=null!==(l=yield e())&&void 0!==l?l:n;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},Ui=3e4,Ep="X-Supabase-Api-Version",DD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class wa extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ee(n){return"object"==typeof n&&null!==n&&"__isAuthError"in n}class pj extends wa{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Ao extends wa{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class io extends wa{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class so extends io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Bi extends io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wc extends io{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Kc extends io{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ED extends io{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sp extends io{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Mp(n){return ee(n)&&"AuthRetryableFetchError"===n.name}class SD extends io{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class xp extends io{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),MD=" \t\n\r=".split(""),_j=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<MD.length;e+=1)n[MD[e].charCodeAt(0)]=-2;for(let e=0;e<Jc.length;e+=1)n[Jc[e].charCodeAt(0)]=e;return n})();function Yc(n,e,t){if(null!==n)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;)t(Jc[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6;else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;)t(Jc[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6}function xD(n,e,t){const r=_j[n];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8}function ID(n){const e=[],t=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function Cj(n,e,t){if(0===e.utf8seq){if(n<=127)return void t(n);for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(2===e.utf8seq)e.codepoint=31&n;else if(3===e.utf8seq)e.codepoint=15&n;else{if(4!==e.utf8seq)throw new Error("Invalid UTF-8 sequence");e.codepoint=7&n}e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|63&n,e.utf8seq-=1,0===e.utf8seq&&t(e.codepoint)}}(s,r,t)};for(let s=0;s<n.length;s+=1)xD(n.charCodeAt(s),o,i);return e.join("")}function vj(n,e){if(!(n<=127)){if(n<=2047)return e(192|n>>6),void e(128|63&n);if(n<=65535)return e(224|n>>12),e(128|n>>6&63),void e(128|63&n);if(n<=1114111)return e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),void e(128|63&n);throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}e(n)}function Hi(n){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<n.length;o+=1)xD(n.charCodeAt(o),t,r);return new Uint8Array(e)}function Po(n){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};return n.forEach(o=>Yc(o,t,r)),Yc(null,t,r),e.join("")}const vn=()=>typeof window<"u"&&typeof document<"u",ko={tested:!1,writable:!1},OD=()=>{if(!vn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(ko.tested)return ko.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ko.tested=!0,ko.writable=!0}catch{ko.tested=!0,ko.writable=!1}return ko.writable},AD=n=>{let e;return e=n||(typeof fetch>"u"?(...t)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)},Sj=n=>"object"==typeof n&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json,zi=function(){var n=y(function*(e,t,r){yield e.setItem(t,JSON.stringify(r))});return function(t,r,o){return n.apply(this,arguments)}}(),Ro=function(){var n=y(function*(e,t){const r=yield e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(t,r){return n.apply(this,arguments)}}(),ao=function(){var n=y(function*(e,t){yield e.removeItem(t)});return function(t,r){return n.apply(this,arguments)}}();class Qc{constructor(){this.promise=new Qc.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Ip(n){const e=n.split(".");if(3!==e.length)throw new xp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!hj.test(e[r]))throw new xp("JWT not in base64url format");return{header:JSON.parse(ID(e[0])),payload:JSON.parse(ID(e[1])),signature:Hi(e[2]),raw:{header:e[0],payload:e[1]}}}function Tp(){return(Tp=y(function*(n){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})).apply(this,arguments)}function Ij(n){return("0"+n.toString(16)).substr(-2)}function Op(){return(Op=y(function*(n){const t=(new TextEncoder).encode(n),r=yield crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function Ap(){return Ap=y(function*(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=yield function Oj(n){return Op.apply(this,arguments)}(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Ap.apply(this,arguments)}function Gi(n,e){return Pp.apply(this,arguments)}function Pp(){return Pp=y(function*(n,e,t=!1){const r=function Tj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let i=0;i<56;i++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,Ij).join("")}();let o=r;t&&(o+="/PASSWORD_RECOVERY"),yield zi(n,`${e}-code-verifier`,o);const i=yield function Aj(n){return Ap.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),Pp.apply(this,arguments)}Qc.promiseConstructor=Promise;const Pj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Fj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qi(n){if(!Fj.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kp(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function PD(n){return JSON.parse(JSON.stringify(n))}const No=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Lj=[502,503,504];function kD(n){return Rp.apply(this,arguments)}function Rp(){return(Rp=y(function*(n){var e;if(!Sj(n))throw new Sp(No(n),0);if(Lj.includes(n.status))throw new Sp(No(n),n.status);let t,r;try{t=yield n.json()}catch(i){throw new Ao(No(i),i)}const o=function kj(n){const e=n.headers.get(Ep);if(!e||!e.match(Pj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}(n);if(o&&o.getTime()>=DD["2024-01-01"].timestamp&&"object"==typeof t&&t&&"string"==typeof t.code?r=t.code:"object"==typeof t&&t&&"string"==typeof t.error_code&&(r=t.error_code),r){if("weak_password"===r)throw new SD(No(t),n.status,(null===(e=t.weak_password)||void 0===e?void 0:e.reasons)||[]);if("session_not_found"===r)throw new so}else if("object"==typeof t&&t&&"object"==typeof t.weak_password&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new SD(No(t),n.status,t.weak_password.reasons);throw new pj(No(t),n.status||500,r)})).apply(this,arguments)}const jj=(n,e,t,r)=>{const o={method:n,headers:e?.headers||{}};return"GET"===n?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};function fe(n,e,t,r){return Np.apply(this,arguments)}function Np(){return Np=y(function*(n,e,t,r){var o;const i=Object.assign({},r?.headers);i[Ep]||(i[Ep]=DD["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield function Vj(n,e,t,r,o,i){return Fp.apply(this,arguments)}(n,e,t+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),Np.apply(this,arguments)}function Fp(){return(Fp=y(function*(n,e,t,r,o,i){const s=jj(e,r,o,i);let a;try{a=yield n(t,Object.assign({},s))}catch(l){throw console.error(l),new Sp(No(l),0)}if(a.ok||(yield kD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield kD(l)}})).apply(this,arguments)}function Yn(n){var e;let t=null;return function Bj(n){return n.access_token&&n.refresh_token&&n.expires_in}(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=function wj(n){return Math.round(Date.now()/1e3)+n}(n.expires_in))),{data:{session:t,user:null!==(e=n.user)&&void 0!==e?e:n},error:null}}function RD(n){const e=Yn(n);return!e.error&&n.weak_password&&"object"==typeof n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&"string"==typeof n.weak_password.message&&n.weak_password.reasons.reduce((t,r)=>t&&"string"==typeof r,!0)&&(e.data.weak_password=n.weak_password),e}function lo(n){var e;return{data:{user:null!==(e=n.user)&&void 0!==e?e:n},error:null}}function $j(n){return{data:n,error:null}}function Uj(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:i}=n,s=(0,L.__rest)(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function ND(n){return n}const Lp=["global","local","others"];class Hj{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=AD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(e){var t=this;return y(function*(r,o=Lp[0]){if(Lp.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lp.join(", ")}`);try{return yield fe(t.fetch,"POST",`${t.url}/logout?scope=${o}`,{headers:t.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ee(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(e){var t=this;return y(function*(r,o={}){try{return yield fe(t.fetch,"POST",`${t.url}/invite`,{body:{email:r,data:o.data},headers:t.headers,redirectTo:o.redirectTo,xform:lo})}catch(i){if(ee(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(e){var t=this;return y(function*(){try{const{options:r}=e,o=(0,L.__rest)(e,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield fe(t.fetch,"POST",`${t.url}/admin/generate_link`,{body:i,headers:t.headers,xform:Uj,redirectTo:r?.redirectTo})}catch(r){if(ee(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(e){var t=this;return y(function*(){try{return yield fe(t.fetch,"POST",`${t.url}/admin/users`,{body:e,headers:t.headers,xform:lo})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}})()}listUsers(e){var t=this;return y(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield fe(t.fetch,"GET",`${t.url}/admin/users`,{headers:t.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=e?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:ND});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ee(u))return{data:{users:[]},error:u};throw u}})()}getUserById(e){var t=this;return y(function*(){qi(e);try{return yield fe(t.fetch,"GET",`${t.url}/admin/users/${e}`,{headers:t.headers,xform:lo})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}})()}updateUserById(e,t){var r=this;return y(function*(){qi(e);try{return yield fe(r.fetch,"PUT",`${r.url}/admin/users/${e}`,{body:t,headers:r.headers,xform:lo})}catch(o){if(ee(o))return{data:{user:null},error:o};throw o}})()}deleteUser(e){var t=this;return y(function*(r,o=!1){qi(r);try{return yield fe(t.fetch,"DELETE",`${t.url}/admin/users/${r}`,{headers:t.headers,body:{should_soft_delete:o},xform:lo})}catch(i){if(ee(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(e){var t=this;return y(function*(){qi(e.userId);try{const{data:r,error:o}=yield fe(t.fetch,"GET",`${t.url}/admin/users/${e.userId}/factors`,{headers:t.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_deleteFactor(e){var t=this;return y(function*(){qi(e.userId),qi(e.id);try{return{data:yield fe(t.fetch,"DELETE",`${t.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:t.headers}),error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_listOAuthClients(e){var t=this;return y(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield fe(t.fetch,"GET",`${t.url}/admin/oauth/clients`,{headers:t.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=e?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:ND});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ee(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(e){var t=this;return y(function*(){try{return yield fe(t.fetch,"POST",`${t.url}/admin/oauth/clients`,{body:e,headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_getOAuthClient(e){var t=this;return y(function*(){try{return yield fe(t.fetch,"GET",`${t.url}/admin/oauth/clients/${e}`,{headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_deleteOAuthClient(e){var t=this;return y(function*(){try{return yield fe(t.fetch,"DELETE",`${t.url}/admin/oauth/clients/${e}`,{headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(e){var t=this;return y(function*(){try{return yield fe(t.fetch,"POST",`${t.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}}function FD(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Wi={debug:!!(globalThis&&OD()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class LD extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zj extends LD{}function qj(n,e,t){return jp.apply(this,arguments)}function jp(){return jp=y(function*(n,e,t){Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,0===e?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=y(function*(i){if(!i){if(0===e)throw Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new zj(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Wi.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield t()}finally{Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),jp.apply(this,arguments)}function VD(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Jj(n){const e=(new TextEncoder).encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}class yt extends Error{constructor({message:e,code:t,cause:r,name:o}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=t}}class Zc extends yt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Qj({error:n,options:e}){var t,r,o;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(e.signal instanceof AbortSignal)return new yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if("ConstraintError"===n.name){if(!0===(null===(t=i.authenticatorSelection)||void 0===t?void 0:t.requireResidentKey))return new yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if("conditional"===e.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if("InvalidStateError"===n.name)return new yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if("NotAllowedError"===n.name)return new yt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("NotSupportedError"===n.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if("SecurityError"===n.name){const s=window.location.hostname;if(!$D(s))return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(i.rp.id!==s)return new yt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("TypeError"===n.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if("UnknownError"===n.name)return new yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Zj({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(e.signal instanceof AbortSignal)return new yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if("NotAllowedError"===n.name)return new yt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("SecurityError"===n.name){const r=window.location.hostname;if(!$D(r))return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(t.rpId!==r)return new yt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("UnknownError"===n.name)return new yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}const eV=new class Xj{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function tV(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,o=(0,L.__rest)(n,["challenge","user","excludeCredentials"]),i=Hi(e).buffer,s=Object.assign(Object.assign({},t),{id:Hi(t.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Hi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function nV(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=(0,L.__rest)(n,["challenge","allowCredentials"]),o=Hi(e).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let s=0;s<t.length;s++){const a=t[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Hi(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function rV(n){var e;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Po(new Uint8Array(n.response.attestationObject)),clientDataJSON:Po(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:null!==(e=t.authenticatorAttachment)&&void 0!==e?e:void 0}}function oV(n){var e;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const t=n,r=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Po(new Uint8Array(o.authenticatorData)),clientDataJSON:Po(new Uint8Array(o.clientDataJSON)),signature:Po(new Uint8Array(o.signature)),userHandle:o.userHandle?Po(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(e=t.authenticatorAttachment)&&void 0!==e?e:void 0}}function $D(n){return"localhost"===n||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function UD(){var n,e;return!!(vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(n=navigator?.credentials)||void 0===n?void 0:n.create)&&"function"==typeof(null===(e=navigator?.credentials)||void 0===e?void 0:e.get))}function $p(){return($p=y(function*(n){try{const e=yield navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Zc("Browser returned unexpected credential type",e)}:{data:null,error:new Zc("Empty credential response",e)}}catch(e){return{data:null,error:Qj({error:e,options:n})}}})).apply(this,arguments)}function Up(){return(Up=y(function*(n){try{const e=yield navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Zc("Browser returned unexpected credential type",e)}:{data:null,error:new Zc("Empty credential response",e)}}catch(e){return{data:null,error:Zj({error:e,options:n})}}})).apply(this,arguments)}const aV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},lV={userVerification:"preferred",hints:["security-key"]};function Xc(...n){const e=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of n)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(t(s))r[i]=s;else if(e(s)){const a=r[i];r[i]=e(a)?Xc(a,s):Xc(s)}else r[i]=s}return r}class dV{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(e){var t=this;return y(function*(){return t.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))})()}_challenge(e,t){var r=this;return y(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!c)return{data:null,error:u};const d=a??eV.createNewAbortSignal();if("create"===c.webauthn.type){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=function cV(n,e){return Xc(aV,n,e||{})}(c.webauthn.credential_options.publicKey,l?.create),{data:f,error:p}=yield function iV(n){return $p.apply(this,arguments)}({publicKey:h,signal:d});return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=function uV(n,e){return Xc(lV,n,e||{})}(c.webauthn.credential_options.publicKey,l?.request),{data:f,error:p}=yield function sV(n){return Up.apply(this,arguments)}(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(c){return ee(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in challenge",c)}}}).apply(this,arguments)}_verify(e){var t=this;return y(function*({challengeId:r,factorId:o,webauthn:i}){return t.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(e,t){var r=this;return y(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}},l){if(!i)return{data:null,error:new wa("rpId is required for WebAuthn authentication")};try{if(!UD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:u};const{webauthn:d}=c;return r._verify({factorId:o,challengeId:c.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return ee(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in authenticate",c)}}}).apply(this,arguments)}_register(e,t){var r=this;return y(function*({friendlyName:o,rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a},l){if(!i)return{data:null,error:new wa("rpId is required for WebAuthn registration")};try{if(!UD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r._enroll({friendlyName:o});if(!c)return yield r.client.mfa.listFactors().then(f=>{var p;return null===(p=f.data)||void 0===p?void 0:p.all.find(g=>"webauthn"===g.factor_type&&g.friendly_name===o&&"unverified"!==g.status)}).then(f=>f?r.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:d,error:h}=yield r._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return d?r._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(c){return ee(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in register",c)}}}).apply(this,arguments)}}!function Wj(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const hV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.76.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function BD(n,e,t){return Bp.apply(this,arguments)}function Bp(){return(Bp=y(function*(n,e,t){return yield t()})).apply(this,arguments)}const Ki={},pV=(()=>{class n{get jwks(){var t,r;return null!==(r=null===(t=Ki[this.storageKey])||void 0===t?void 0:t.jwks)&&void 0!==r?r:{keys:[]}}set jwks(t){Ki[this.storageKey]=Object.assign(Object.assign({},Ki[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return null!==(r=null===(t=Ki[this.storageKey])||void 0===t?void 0:t.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ki[this.storageKey]=Object.assign(Object.assign({},Ki[this.storageKey]),{cachedAt:t})}constructor(t){var o,i,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},hV),t);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Hj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=AD(s.fetch),this.lock=s.lock||BD,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.lock=s.lock?s.lock:vn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?qj:BD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dV(this)},this.persistSession?(s.storage?this.storage=s.storage:OD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=FD(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=FD(this.memoryStorage)),vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=y(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.76.1) ${(new Date).toISOString()}`,...t),this}initialize(){var t=this;return y(function*(){return t.initializePromise||(t.initializePromise=y(function*(){return yield t._acquireLock(-1,y(function*(){return yield t._initialize()}))})()),yield t.initializePromise})()}_initialize(){var t=this;return y(function*(){var r;try{const o=function Ej(n){const e={},t=new URL(n);if(t.hash&&"#"===t.hash[0])try{new URLSearchParams(t.hash.substring(1)).forEach((o,i)=>{e[i]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}(window.location.href);let i="none";if(t._isImplicitGrantCallback(o)?i="implicit":(yield t._isPKCECallback(o))&&(i="pkce"),vn()&&t.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield t._getSessionFromURL(o,i);if(a){if(t._debug("#_initialize()","error detecting session from URL",a),function yj(n){return ee(n)&&"AuthImplicitGrantRedirectError"===n.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield t._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return t._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield t._saveSession(l),setTimeout(y(function*(){"recovery"===c?yield t._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield t._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield t._recoverAndRefresh(),{error:null}}catch(o){return ee(o)?{error:o}:{error:new Ao("Unexpected error during initialization",o)}}finally{yield t._handleVisibilityChange(),t._debug("#_initialize()","end")}})()}signInAnonymously(t){var r=this;return y(function*(){var o,i,s;try{const a=yield fe(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=t?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=t?.options)||void 0===s?void 0:s.captchaToken}},xform:Yn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(ee(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(t){var r=this;return y(function*(){var o,i,s;try{let a;if("email"in t){const{email:h,password:f,options:p}=t;let g=null,m=null;"pkce"===r.flowType&&([g,m]=yield Gi(r.storage,r.storageKey)),a=yield fe(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:null!==(o=p?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:m},xform:Yn})}else{if(!("phone"in t))throw new Wc("You must provide either an email or phone number and a password");{const{phone:h,password:f,options:p}=t;a=yield fe(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:h,password:f,data:null!==(i=p?.data)&&void 0!==i?i:{},channel:null!==(s=p?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Yn})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(ee(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(t){var r=this;return y(function*(){try{let o;if("email"in t){const{email:a,password:l,options:c}=t;o=yield fe(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:RD})}else{if(!("phone"in t))throw new Wc("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=t;o=yield fe(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:RD})}}const{data:i,error:s}=o;return s?{data:{user:null,session:null},error:s}:i&&i.session&&i.user?(i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Bi}}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(t){var r=this;return y(function*(){var o,i,s,a;return yield r._handleProviderSignIn(t.provider,{redirectTo:null===(o=t.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=t.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=t.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=t.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(t){var r=this;return y(function*(){return yield r.initializePromise,r._acquireLock(-1,y(function*(){return r._exchangeCodeForSession(t)}))})()}signInWithWeb3(t){var r=this;return y(function*(){const{chain:o}=t;switch(o){case"ethereum":return yield r.signInWithEthereum(t);case"solana":return yield r.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(t){var r=this;return y(function*(){var o,i,s,a,l,c,u,d,h,f,p;let g,m;if("message"in t)g=t.message,m=t.signature;else{const{wallet:M,statement:w,options:k}=t;let F;if(vn())if("object"==typeof M)F=M;else{const Cn=window;if(!("ethereum"in Cn)||"object"!=typeof Cn.ethereum||!("request"in Cn.ethereum)||"function"!=typeof Cn.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");F=Cn.ethereum}else{if("object"!=typeof M||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=M}const W=new URL(null!==(o=k?.url)&&void 0!==o?o:window.location.href),Qt=yield F.request({method:"eth_requestAccounts"}).then(Cn=>Cn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Qt||0===Qt.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Ae=VD(Qt[0]);let ct=null===(i=k?.signInWithEthereum)||void 0===i?void 0:i.chainId;ct||(ct=function Kj(n){return parseInt(n,16)}(yield F.request({method:"eth_chainId"}))),g=function Yj(n){var e;const{chainId:t,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=n;if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null!==(e=n.statement)&&void 0!==e&&e.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`);const m=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${VD(n.address)}\n\n${n.statement?`${n.statement}\n`:""}`;let v=`URI: ${d}\nVersion: ${h}\nChain ID: ${t}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(v+=`\nExpiration Time: ${o.toISOString()}`),a&&(v+=`\nNot Before: ${a.toISOString()}`),l&&(v+=`\nRequest ID: ${l}`),c){let M="\nResources:";for(const w of c){if(!w||"string"!=typeof w)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);M+=`\n- ${w}`}v+=M}return`${m}\n${v}`}({domain:W.host,address:Ae,statement:w,uri:W.href,version:"1",chainId:ct,nonce:null===(s=k?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(l=null===(a=k?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==l?l:new Date,expirationTime:null===(c=k?.signInWithEthereum)||void 0===c?void 0:c.expirationTime,notBefore:null===(u=k?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=k?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(h=k?.signInWithEthereum)||void 0===h?void 0:h.resources}),m=yield F.request({method:"personal_sign",params:[Jj(g),Ae]})}try{const{data:v,error:M}=yield fe(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:g,signature:m},null!==(f=t.options)&&void 0!==f&&f.captchaToken?{gotrue_meta_security:{captcha_token:null===(p=t.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Yn});if(M)throw M;return v&&v.session&&v.user?(v.session&&(yield r._saveSession(v.session),yield r._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:M}):{data:{user:null,session:null},error:new Bi}}catch(v){if(ee(v))return{data:{user:null,session:null},error:v};throw v}})()}signInWithSolana(t){var r=this;return y(function*(){var o,i,s,a,l,c,u,d,h,f,p,g;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{wallet:w,statement:k,options:F}=t;let W;if(vn())if("object"==typeof w)W=w;else{const Ae=window;if(!("solana"in Ae)||"object"!=typeof Ae.solana||!("signIn"in Ae.solana&&"function"==typeof Ae.solana.signIn||"signMessage"in Ae.solana&&"function"==typeof Ae.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");W=Ae.solana}else{if("object"!=typeof w||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=w}const Qt=new URL(null!==(o=F?.url)&&void 0!==o?o:window.location.href);if("signIn"in W&&W.signIn){const Ae=yield W.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},F?.signInWithSolana),{version:"1",domain:Qt.host,uri:Qt.href}),k?{statement:k}:null));let ct;if(Array.isArray(Ae)&&Ae[0]&&"object"==typeof Ae[0])ct=Ae[0];else{if(!(Ae&&"object"==typeof Ae&&"signedMessage"in Ae&&"signature"in Ae))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");ct=Ae}if(!("signedMessage"in ct&&"signature"in ct&&("string"==typeof ct.signedMessage||ct.signedMessage instanceof Uint8Array)&&ct.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof ct.signedMessage?ct.signedMessage:(new TextDecoder).decode(ct.signedMessage),v=ct.signature}else{if(!("signMessage"in W&&"function"==typeof W.signMessage&&"publicKey"in W&&"object"==typeof W&&W.publicKey&&"toBase58"in W.publicKey&&"function"==typeof W.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${Qt.host} wants you to sign in with your Solana account:`,W.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${Qt.href}`,`Issued At: ${null!==(s=null===(i=F?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=F?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...null!==(l=F?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...null!==(c=F?.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...null!==(u=F?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...null!==(d=F?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...null!==(f=null===(h=F?.signInWithSolana)||void 0===h?void 0:h.resources)&&void 0!==f&&f.length?["Resources",...F.signInWithSolana.resources.map(ct=>`- ${ct}`)]:[]].join("\n");const Ae=yield W.signMessage((new TextEncoder).encode(m),"utf8");if(!(Ae&&Ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=Ae}}try{const{data:M,error:w}=yield fe(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:m,signature:Po(v)},null!==(p=t.options)&&void 0!==p&&p.captchaToken?{gotrue_meta_security:{captcha_token:null===(g=t.options)||void 0===g?void 0:g.captchaToken}}:null),xform:Yn});if(w)throw w;return M&&M.session&&M.user?(M.session&&(yield r._saveSession(M.session),yield r._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:w}):{data:{user:null,session:null},error:new Bi}}catch(M){if(ee(M))return{data:{user:null,session:null},error:M};throw M}})()}_exchangeCodeForSession(t){var r=this;return y(function*(){const o=yield Ro(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:l}=yield fe(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:t,code_verifier:i},xform:Yn});if(yield ao(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Bi}}catch(a){if(ee(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(t){var r=this;return y(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:l}=t,c=yield fe(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Yn}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new Bi}}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(t){var r=this;return y(function*(){var o,i,s,a,l;try{if("email"in t){const{email:c,options:u}=t;let d=null,h=null;"pkce"===r.flowType&&([d,h]=yield Gi(r.storage,r.storageKey));const{error:f}=yield fe(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:c,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:c,options:u}=t,{data:d,error:h}=yield fe(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:c,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(l=u?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new Wc("You must provide either an email or phone number.")}catch(c){if(ee(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(t){var r=this;return y(function*(){var o,i;try{let s,a;"options"in t&&(s=null===(o=t.options)||void 0===o?void 0:o.redirectTo,a=null===(i=t.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield fe(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Yn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,d=l.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==t.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithSSO(t){var r=this;return y(function*(){var o,i,s;try{let a=null,l=null;return"pkce"===r.flowType&&([a,l]=yield Gi(r.storage,r.storageKey)),yield fe(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(i=null===(o=t.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=t?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:$j})}catch(a){if(ee(a))return{data:null,error:a};throw a}})()}reauthenticate(){var t=this;return y(function*(){return yield t.initializePromise,yield t._acquireLock(-1,y(function*(){return yield t._reauthenticate()}))})()}_reauthenticate(){var t=this;return y(function*(){try{return yield t._useSession(function(){var r=y(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new so;const{error:a}=yield fe(t.fetch,"GET",`${t.url}/reauthenticate`,{headers:t.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(t){var r=this;return y(function*(){try{const o=`${r.url}/resend`;if("email"in t){const{email:i,type:s,options:a}=t,{error:l}=yield fe(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in t){const{phone:i,type:s,options:a}=t,{data:l,error:c}=yield fe(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new Wc("You must provide either an email or phone number and a type")}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var t=this;return y(function*(){return yield t.initializePromise,yield t._acquireLock(-1,y(function*(){return t._useSession(function(){var o=y(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(t,r){var o=this;return y(function*(){o._debug("#_acquireLock","begin",t);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=y(function*(){return yield i,yield r()})();return o.pendingInLock.push(y(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,t,y(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(y(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(t){var r=this;return y(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield t(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var t=this;return y(function*(){t._debug("#__loadSession()","begin"),t.lockAcquired||t._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield Ro(t.storage,t.storageKey);if(t._debug("#getSession()","session from storage",o),null!==o&&(t._isValidSession(o)?r=o:(t._debug("#getSession()","session from storage is not valid"),yield t._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(t._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(t.userStorage){const l=yield Ro(t.userStorage,t.storageKey+"-user");r.user=l?.user?l.user:kp()}if(t.storage.isServer&&r.user){let l=t.suppressGetSessionWarning;r=new Proxy(r,{get:(u,d,h)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,t.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:r},error:null}}const{data:s,error:a}=yield t._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{t._debug("#__loadSession()","end")}})()}getUser(t){var r=this;return y(function*(){return t?yield r._getUser(t):(yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._getUser()})))})()}_getUser(t){var r=this;return y(function*(){try{return t?yield fe(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:t,xform:lo}):yield r._useSession(function(){var o=y(function*(i){var s,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(s=c.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield fe(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:lo}):{data:{user:null},error:new so}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return function mj(n){return ee(n)&&"AuthSessionMissingError"===n.name}(o)&&(yield r._removeSession(),yield ao(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(t){var r=this;return y(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(t){var r=this;return y(function*(o,i={}){try{return yield r._useSession(function(){var s=y(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new so;const u=l.session;let d=null,h=null;"pkce"===r.flowType&&null!=o.email&&([d,h]=yield Gi(r.storage,r.storageKey));const{data:f,error:p}=yield fe(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:lo});if(p)throw p;return u.user=f.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return s.apply(this,arguments)}}())}catch(s){if(ee(s))return{data:{user:null},error:s};throw s}}).apply(this,arguments)}setSession(t){var r=this;return y(function*(){return yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._setSession(t)}))})()}_setSession(t){var r=this;return y(function*(){try{if(!t.access_token||!t.refresh_token)throw new so;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:l}=Ip(t.access_token);if(l.exp&&(i=l.exp,s=i<=o),s){const{data:c,error:u}=yield r._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield r._getUser(t.access_token);if(u)throw u;a={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(o){if(ee(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(t){var r=this;return y(function*(){return yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._refreshSession(t)}))})()}_refreshSession(t){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;if(!t){const{data:c,error:u}=i;if(u)throw u;t=null!==(s=c.session)&&void 0!==s?s:void 0}if(!t?.refresh_token)throw new so;const{data:a,error:l}=yield r._callRefreshToken(t.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(t,r){var o=this;return y(function*(){try{if(!vn())throw new Kc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Kc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new ED("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new Kc("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ED("No code detected.");const{data:k,error:F}=yield o._exchangeCodeForSession(t.code);if(F)throw F;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:d}=t;if(!(a&&c&&l&&d))throw new Kc("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let p=h+f;u&&(p=parseInt(u));const g=p-h;1e3*g<=Ui&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const m=p-f;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,p,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,p,h);const{data:v,error:M}=yield o._getUser(a);if(M)throw M;const w={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:d,user:v.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(i){if(ee(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(t){return Boolean(t.access_token||t.error_description)}_isPKCECallback(t){var r=this;return y(function*(){const o=yield Ro(r.storage,`${r.storageKey}-code-verifier`);return!(!t.code||!o)})()}signOut(){var t=this;return y(function*(r={scope:"global"}){return yield t.initializePromise,yield t._acquireLock(-1,y(function*(){return yield t._signOut(r)}))}).apply(this,arguments)}_signOut(){var t=this;return y(function*({scope:r}={scope:"global"}){return yield t._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(s=a.session)||void 0===s?void 0:s.access_token;if(c){const{error:u}=yield t.admin.signOut(c,r);if(u&&(!function gj(n){return ee(n)&&"AuthApiError"===n.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==r&&(yield t._removeSession(),yield ao(t.storage,`${t.storageKey}-code-verifier`)),{error:null}});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(t){var r=this;const o=function Dj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=16*Math.random()|0;return("x"==n?e:3&e|8).toString(16)})}(),i={id:o,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),y(function*(){yield r.initializePromise,yield r._acquireLock(-1,y(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(t){var r=this;return y(function*(){return yield r._useSession(function(){var o=y(function*(i){var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(s=r.stateChangeEmitters.get(t))||void 0===s?void 0:s.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(t))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(t){var r=this;return y(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield Gi(r.storage,r.storageKey,!0));try{return yield fe(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(l){if(ee(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var t=this;return y(function*(){var r;try{const{data:o,error:i}=yield t.getUser();if(i)throw i;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(ee(o))return{data:null,error:o};throw o}})()}linkIdentity(t){var r=this;return y(function*(){return"token"in t?r.linkIdentityIdToken(t):r.linkIdentityOAuth(t)})()}linkIdentityOAuth(t){var r=this;return y(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=y(function*(l){var c,u,d,h,f;const{data:p,error:g}=l;if(g)throw g;const m=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,t.provider,{redirectTo:null===(c=t.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=t.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=t.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield fe(r.fetch,"GET",m,{headers:r.headers,jwt:null!==(f=null===(h=p.session)||void 0===h?void 0:h.access_token)&&void 0!==f?f:void 0})});return function(l){return a.apply(this,arguments)}}());if(s)throw s;return vn()&&!(null!==(o=t.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:t.provider,url:i?.url},error:null}}catch(i){if(ee(i))return{data:{provider:t.provider,url:null},error:i};throw i}})()}linkIdentityIdToken(t){var r=this;return y(function*(){return yield r._useSession(function(){var o=y(function*(i){var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:u,token:d,access_token:h,nonce:f}=t,p=yield fe(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=l?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Yn}),{data:g,error:m}=p;return m?{data:{user:null,session:null},error:m}:g&&g.session&&g.user?(g.session&&(yield r._saveSession(g.session),yield r._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:m}):{data:{user:null,session:null},error:new Bi}}catch(a){if(ee(a))return{data:{user:null,session:null},error:a};throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(t){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s,a;const{data:l,error:c}=i;if(c)throw c;return yield fe(r.fetch,"DELETE",`${r.url}/user/identities/${t.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=l.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(t){var r=this;return y(function*(){const o=`#_refreshAccessToken(${t.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function xj(n,e){return new Promise((r,o)=>{y(function*(){for(let i=0;i<1/0;i++)try{const s=yield n(i);if(!e(i,null,s))return void r(s)}catch(s){if(!e(i,s))return void o(s)}})()})}(function(){var s=y(function*(a){return a>0&&(yield function Mj(n){return Tp.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield fe(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:r.headers,xform:Yn})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const l=200*Math.pow(2,s);return a&&Mp(a)&&Date.now()+l-i<Ui})}catch(i){if(r._debug(o,"error",i),ee(i))return{data:{session:null,user:null},error:i};throw i}finally{r._debug(o,"end")}})()}_isValidSession(t){return"object"==typeof t&&null!==t&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){var o=this;return y(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),vn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}})()}_recoverAndRefresh(){var t=this;return y(function*(){var r,o;const i="#_recoverAndRefresh()";t._debug(i,"begin");try{const s=yield Ro(t.storage,t.storageKey);if(s&&t.userStorage){let l=yield Ro(t.userStorage,t.storageKey+"-user");!t.storage.isServer&&Object.is(t.storage,t.userStorage)&&!l&&(l={user:s.user},yield zi(t.userStorage,t.storageKey+"-user",l)),s.user=null!==(r=l?.user)&&void 0!==r?r:kp()}else if(s&&!s.user&&!s.user){const l=yield Ro(t.storage,t.storageKey+"-user");l&&l?.user?(s.user=l.user,yield ao(t.storage,t.storageKey+"-user"),yield zi(t.storage,t.storageKey,s)):s.user=kp()}if(t._debug(i,"session from storage",s),!t._isValidSession(s))return t._debug(i,"session is not valid"),void(null!==s&&(yield t._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(t._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(t.autoRefreshToken&&s.refresh_token){const{error:l}=yield t._callRefreshToken(s.refresh_token);l&&(console.error(l),Mp(l)||(t._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield t._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield t._getUser(s.access_token);!c&&l?.user?(s.user=l.user,yield t._saveSession(s),yield t._notifyAllSubscribers("SIGNED_IN",s)):t._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),t._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield t._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return t._debug(i,"error",s),void console.error(s)}finally{t._debug(i,"end")}})()}_callRefreshToken(t){var r=this;return y(function*(){var o,i;if(!t)throw new so;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new Qc;const{data:a,error:l}=yield r._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new so;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return r.refreshingDeferred.resolve(c),c}catch(a){if(r._debug(s,"error",a),ee(a)){const l={data:null,error:a};return Mp(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(t,r){var o=this;return y(function*(i,s,a=!0){const l=`#_notifyAllSubscribers(${i})`;o._debug(l,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const c=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=y(function*(h){try{yield h.callback(i,s)}catch(f){c.push(f)}});return function(h){return d.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(t){var r=this;return y(function*(){r._debug("#_saveSession()",t),r.suppressGetSessionWarning=!0;const o=Object.assign({},t);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield zi(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=PD(s);yield zi(r.storage,r.storageKey,a)}else{const s=PD(o);yield zi(r.storage,r.storageKey,s)}})()}_removeSession(){var t=this;return y(function*(){t._debug("#_removeSession()"),yield ao(t.storage,t.storageKey),yield ao(t.storage,t.storageKey+"-code-verifier"),yield ao(t.storage,t.storageKey+"-user"),t.userStorage&&(yield ao(t.userStorage,t.storageKey+"-user")),yield t._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&vn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var t=this;return y(function*(){yield t._stopAutoRefresh(),t._debug("#_startAutoRefresh()");const r=setInterval(()=>t._autoRefreshTokenTick(),Ui);t.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(y(function*(){yield t.initializePromise,yield t._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var t=this;return y(function*(){t._debug("#_stopAutoRefresh()");const r=t.autoRefreshTicker;t.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var t=this;return y(function*(){t._removeVisibilityChangedCallback(),yield t._startAutoRefresh()})()}stopAutoRefresh(){var t=this;return y(function*(){t._removeVisibilityChangedCallback(),yield t._stopAutoRefresh()})()}_autoRefreshTokenTick(){var t=this;return y(function*(){t._debug("#_autoRefreshTokenTick()","begin");try{yield t._acquireLock(0,y(function*(){try{const r=Date.now();try{return yield t._useSession(function(){var o=y(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void t._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/Ui);t._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield t._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{t._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof LD))throw r;t._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var t=this;return y(function*(){if(t._debug("#_handleVisibilityChange()"),!vn()||!window?.addEventListener)return t.autoRefreshToken&&t.startAutoRefresh(),!1;try{t.visibilityChangedCallback=y(function*(){return yield t._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",t.visibilityChangedCallback),yield t._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(t){var r=this;return y(function*(){const o=`#_onVisibilityChanged(${t})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),t||(yield r.initializePromise,yield r._acquireLock(-1,y(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(t,r,o){var i=this;return y(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,l]=yield Gi(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${t}?${s.join("&")}`})()}_unenroll(t){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;return l?{data:null,error:l}:yield fe(r.fetch,"DELETE",`${r.url}/factors/${t.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}})()}_enroll(t){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},"phone"===t.factorType?{phone:t.phone}:"totp"===t.factorType?{issuer:t.issuer}:{}),{data:d,error:h}=yield fe(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=l?.session)||void 0===s?void 0:s.access_token});return h?{data:null,error:h}:("totp"===t.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}})()}_verify(t){var r=this;return y(function*(){return r._acquireLock(-1,y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:"create"===t.webauthn.type?rV(t.webauthn.credential_response):oV(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=yield fe(r.fetch,"POST",`${r.url}/factors/${t.factorId}/verify`,{body:c,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?{data:null,error:d}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}}))})()}_challenge(t){var r=this;return y(function*(){return r._acquireLock(-1,y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=yield fe(r.fetch,"POST",`${r.url}/factors/${t.factorId}/challenge`,{body:t,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:tV(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:nV(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(t){var r=this;return y(function*(){const{data:o,error:i}=yield r._challenge({factorId:t.factorId});return i?{data:null,error:i}:yield r._verify({factorId:t.factorId,challengeId:o.id,code:t.code})})()}_listFactors(){var t=this;return y(function*(){var r;const{data:{user:o},error:i}=yield t.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var t=this;return y(function*(){return t._acquireLock(-1,y(function*(){return yield t._useSession(function(){var r=y(function*(o){var i,s;const{data:{session:a},error:l}=o;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Ip(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;return(null!==(s=null===(i=a.user.factors)||void 0===i?void 0:i.filter(p=>"verified"===p.status))&&void 0!==s?s:[]).length>0&&(d="aal2"),{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:c.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(t){var r=this;return y(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:l,error:c}=yield fe(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=a,s=l.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(t){var r=this;return y(function*(o,i={}){try{let s=o;if(!s){const{data:m,error:v}=yield r.getSession();if(v||!m.session)return{data:null,error:v};s=m.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:d}}=Ip(s);i?.allowExpired||function Rj(n){if(!n)throw new Error("Missing exp claim");if(n<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const h=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!h){const{error:m}=yield r.getUser(s);if(m)throw m;return{data:{claims:l,header:a,signature:c},error:null}}const f=function Nj(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),p=yield crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!(yield crypto.subtle.verify(f,p,c,function bj(n){const e=[];return function TD(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(n.charCodeAt(t+1)-56320&65535|o),t+=1}vj(r,e)}}(n,t=>e.push(t)),new Uint8Array(e)}(`${u}.${d}`))))throw new xp("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}}).apply(this,arguments)}}return n.nextInstanceID=0,n})();class gV extends pV{constructor(e){super(e)}}class mV{constructor(e,t,r){var o,i,s;this.supabaseUrl=e,this.supabaseKey=t;const a=function lj(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function sj(n){return n.endsWith("/")?n:n+"/"}(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function aj(n,e){var t,r;const{db:o,auth:i,realtime:s,global:a}=n,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(t=d?.headers)&&void 0!==t?t:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(f=y(function*(){return""}),function(){return f.apply(this,arguments)})};var f;return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}(r??{},{db:ej,realtime:nj,auth:Object.assign(Object.assign({},tj),{storageKey:l}),global:X2});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=ij(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new uD(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Q2(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new o2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e=this;return y(function*(){var t,r;if(e.accessToken)return yield e.accessToken();const{data:o}=yield e.auth.getSession();return null!==(r=null===(t=o.session)||void 0===t?void 0:t.access_token)&&void 0!==r?r:e.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c},u,d){return new gV({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>"authorization"===f.toLowerCase())})}_initRealtimeClient(e){return new x2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function _V(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(null==n)return!1;const e=n.match(/^v(\d+)\./);return!!e&&parseInt(e[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const HD_supabase_url="https://hpqwzclyjrfivcmkzwpo.supabase.co",HD_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwcXd6Y2x5anJmaXZjbWt6d3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2ODMzMjUsImV4cCI6MjA3NjI1OTMyNX0.pN-NPncmQCJoiBlYnFk77bAdxXEu5NAn3Fi8bk_c4wI";let Da=(()=>{const e=class{constructor(){this.currentUserSubject=new kn(null),this.currentUser$=this.currentUserSubject.asObservable(),this.isInitialized=!1,this.initializeClient()}initializeClient(){var r=this;return y(function*(){try{r.supabase=((n,e,t)=>new mV(n,e,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))(HD_supabase_url,HD_supabase_anonKey),r.isInitialized=!0,yield r.checkExistingSession()}catch(o){console.error("Error initializing Supabase client:",o)}})()}checkExistingSession(){var r=this;return y(function*(){const o=localStorage.getItem("currentUser");if(o)try{const i=JSON.parse(o);r.currentUserSubject.next(i)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("currentUser")}})()}signInFallback(r,o){var i=this;return y(function*(){try{const a=[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r&&l.password===o);return a?(localStorage.setItem("currentUser",JSON.stringify(a)),i.currentUserSubject.next(a),{user:a,error:null}):{user:null,error:"Invalid username or password"}}catch(s){return console.error("Fallback sign in error:",s),{user:null,error:"Sign in failed. Please try again."}}})()}signIn(r,o){var i=this;return y(function*(){try{i.isInitialized||(yield new Promise(l=>{const c=()=>{i.isInitialized?l(void 0):setTimeout(c,50)};c()})),yield new Promise(l=>setTimeout(l,100));const{data:s,error:a}=yield i.supabase.from("profiles").select("*").eq("username",r).eq("password",o).single();return a?(console.error("Database query error:",a),console.log("Trying fallback authentication..."),yield i.signInFallback(r,o)):s?(localStorage.setItem("currentUser",JSON.stringify(s)),i.currentUserSubject.next(s),{user:s,error:null}):{user:null,error:"User not found"}}catch(s){if(console.error("Sign in error:",s),s&&"object"==typeof s&&"message"in s){const a=s.message;if(a.includes("NavigatorLockAcquireTimeoutError")||a.includes("lock"))return console.log("Lock error detected, using fallback authentication..."),yield i.signInFallback(r,o)}return console.log("Error occurred, trying fallback authentication..."),yield i.signInFallback(r,o)}})()}signOut(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getCurrentUser(){return this.currentUserSubject.value}isSignedIn(){return null!==this.currentUserSubject.value}getProfileByUsername(r){var o=this;return y(function*(){try{o.isInitialized||(yield new Promise(a=>{const l=()=>{o.isInitialized?a():setTimeout(l,50)};l()}));const{data:i,error:s}=yield o.supabase.from("profiles").select("*").eq("username",r).maybeSingle();return s?(console.warn("getProfileByUsername fallback due to error:",s.message),[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r)||null):i||null}catch(i){return console.error("Error in getProfileByUsername:",i),null}})()}getUserCards(r,o){var i=this;return y(function*(){try{const s=parseInt(r);if(isNaN(s))return{cards:[],error:"Invalid user ID format"};const a=1e3;let l=0,c=[],u=!0;for(;u;){const{data:d,error:h}=yield i.supabase.from("user_cards").select("*").eq("user_id",s).range(l,l+a-1);if(h)return{cards:[],error:h.message};d&&d.length>0?(c=c.concat(d),l+=a,u=d.length===a,o&&o(c.length)):u=!1}return{cards:c,error:null}}catch(s){return console.error("Error fetching user cards:",s),{cards:[],error:"Failed to fetch user cards"}}})()}updateCardQuantity(r,o,i){var s=this;return y(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};if(i<=0){const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a).eq("card_def_key",o);if(l)return{success:!1,error:l.message}}else{const{data:l,error:c}=yield s.supabase.from("user_cards").select("*").eq("user_id",a).eq("card_def_key",o).maybeSingle();if(c)return console.error("Error checking existing card:",c),{success:!1,error:c.message};if(l){const{error:u}=yield s.supabase.from("user_cards").update({quantity:i}).eq("user_id",a).eq("card_def_key",o);if(u)return{success:!1,error:u.message}}else{const{error:u}=yield s.supabase.from("user_cards").insert({user_id:a,card_def_key:o,quantity:i});if(u)return{success:!1,error:u.message}}}return{success:!0,error:null}}catch(a){return console.error("Error updating card quantity:",a),{success:!1,error:"Failed to update card quantity"}}})()}getCardQuantity(r,o){var i=this;return y(function*(){try{const{data:s,error:a}=yield i.supabase.from("user_cards").select("quantity").eq("user_id",r).eq("card_def_key",o).single();return a||!s?0:s.quantity||0}catch(s){return console.error("Error fetching card quantity:",s),0}})()}syncUserCollection(r,o){var i=this;return y(function*(){try{const{cards:s,error:a}=yield i.getUserCards(r,o);if(a)return console.error("Error syncing user collection:",a),{};const l={};return s.forEach(c=>{l[c.card_def_key]=c.quantity}),l}catch(s){return console.error("Error syncing user collection:",s),{}}})()}bulkReplaceUserCollection(r,o){var i=this;return y(function*(){try{const s=parseInt(r);if(isNaN(s))return{success:!1,error:"Invalid user ID format"};const{error:a}=yield i.supabase.from("user_cards").delete().eq("user_id",s);if(a)return console.error("Error deleting existing cards:",a),{success:!1,error:a.message};const l=Object.entries(o).filter(([c,u])=>u>0).map(([c,u])=>({user_id:s,card_def_key:c,quantity:u}));if(l.length>0){const{error:c}=yield i.supabase.from("user_cards").insert(l);if(c)return console.error("Error inserting new cards:",c),{success:!1,error:c.message};console.log(`\u2705 Bulk sync completed: ${l.length} cards inserted`)}else console.log("\u2705 Bulk sync completed: No cards to insert (collection is empty)");return{success:!0,error:null}}catch(s){return console.error("Error in bulk replace user collection:",s),{success:!1,error:"Failed to bulk replace user collection"}}})()}};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),zD=(()=>{const e=class{constructor(){this.rarityMap=new Map([["C",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["U",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["R",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["RR",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["AR",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["SR",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["SAR",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["IM",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["UR",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["CR",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["S",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["SSR",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}],["Common",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["Uncommon",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["Rare",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["Double Rare",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["Art Rare",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["Super Rare",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Special Art Rare",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Immersive Rare",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["Ultimate Rare",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["Crown Rare",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["Shiny",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["Shiny Super Rare",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}]])}getRarityInfo(r){return this.rarityMap.get(r)}getDisplayName(r){const o=this.getRarityInfo(r);return o?o.displayName:r}getSymbol(r){const o=this.getRarityInfo(r);return o?o.symbol:r}getAllRarities(){return Array.from(this.rarityMap.values()).filter(r=>!r.code.includes(" ")).sort((r,o)=>r.order-o.order)}getRarityOrder(r){const o=this.getRarityInfo(r);return o?o.order:999}sortRarities(r){return r.sort((o,i)=>this.getRarityOrder(o)-this.getRarityOrder(i))}isRare(r){return["IM","UR","SSR"].includes(r)}isSuperRare(r){return["SR","SAR","IM","UR","SSR"].includes(r)}getNormalizedCode(r){const o=this.getRarityInfo(r);return o?"SAR"===o.code||"Special Art Rare"===r?"SR":o.code:r}getStandardizedDisplayName(r){const o=this.getNormalizedCode(r),i=this.getRarityInfo(o);return i?i.displayName:r}getUnifiedRarities(){return this.getAllRarities().filter(o=>"SAR"!==o.code)}getCodeFromSymbol(r){for(const[,o]of this.rarityMap)if(o.symbol===r)return o.code;return r}groupCardsByNormalizedRarity(r){const o=new Map;return r.forEach(i=>{if(!i.rarity)return;const s=this.getCodeFromSymbol(i.rarity),a=this.getNormalizedCode(s);o.has(a)||o.set(a,[]),o.get(a).push(i)}),o}};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function vV(n,e){if(1&n&&(_(0,"div",4),I(1),C()),2&n){const t=U();x(1),Xe(" ",t.error," ")}}function CV(n,e){1&n&&(_(0,"div",5)(1,"h2"),I(2,"Loading your collection..."),C(),an(3,"div",6),C())}function bV(n,e){if(1&n&&(_(0,"span",28),I(1),C()),2&n){const t=U(2).$implicit;x(1),qr("[",t.primarySetCode,"] - ",t.primarySetName,"")}}function wV(n,e){if(1&n&&(_(0,"div",20)(1,"div",21)(2,"span",22),I(3),C(),_(4,"strong"),I(5),C()(),_(6,"div",23),ae(7,bV,2,2,"span",24),_(8,"span",25),I(9),C(),_(10,"span",26),I(11),C(),_(12,"span",27),I(13),C()()()),2&n){const t=U(),r=t.index,o=t.$implicit;bt("top-pick",0===r),x(3),Xe("#",r+1,""),x(2),kt(o.packName),x(2),$("ngIf",o.primarySetCode),x(2),Xe("",o.missingCards," missing cards"),x(2),Xe("",o.completionPercentage,"% complete"),x(2),qr("(",o.ownedCards,"/",o.totalCards,")")}}function DV(n,e){if(1&n&&(Hr(0),ae(1,wV,14,9,"div",19),zr()),2&n){const t=e.$implicit,r=U(3);x(1),$("ngIf",!r.excludeDeluxePack||!r.isDeluxeA4B(t.packName))}}function EV(n,e){if(1&n&&(_(0,"div",14)(1,"details",15)(2,"summary"),I(3,"\u{1f381} Pack Opening Suggestions"),C(),_(4,"p",16),I(5,"Optimized recommendations based on your missing cards"),C(),_(6,"div",17),ae(7,DV,2,1,"ng-container",18),C()()()),2&n){const t=U(2);x(7),$("ngForOf",t.packSuggestions)}}function SV(n,e){if(1&n&&(_(0,"div",42)(1,"span",43),I(2),C(),_(3,"div",44)(4,"div",45),an(5,"div",46),C(),_(6,"span",47),I(7),C()()()),2&n){const t=e.$implicit;$("ngClass","rarity-"+t.code),Ut("title",t.name+": "+t.owned+"/"+t.total+" ("+t.percentage+"%)"),x(2),kt(t.name),x(3),Os("width",t.percentage,"%"),x(2),qr("",t.owned,"/",t.total,"")}}function MV(n,e){if(1&n&&(_(0,"div",39)(1,"h5"),I(2,"Rarity Progress:"),C(),_(3,"div",40),ae(4,SV,8,7,"div",41),C()()),2&n){const t=U(2).$implicit;x(4),$("ngForOf",t.rarityBreakdown)}}function xV(n,e){if(1&n&&(_(0,"div",32)(1,"div",33)(2,"h4"),I(3),C(),_(4,"span",34),I(5),C()(),_(6,"div",35),an(7,"div",36),C(),_(8,"p",37),I(9),C(),ae(10,MV,5,1,"div",38),C()),2&n){const t=U().$implicit;x(3),qr("[",t.code,"] - ",t.name,""),x(2),Xe("",t.percentage,"%"),x(2),Os("width",t.percentage,"%"),x(2),qr("",t.owned,"/",t.total," cards"),x(1),$("ngIf",t.rarityBreakdown&&t.rarityBreakdown.length>0)}}function IV(n,e){if(1&n&&(Hr(0),ae(1,xV,11,8,"div",31),zr()),2&n){const t=e.$implicit;x(1),$("ngIf",t.total>0)}}function TV(n,e){if(1&n&&(_(0,"div",29)(1,"details")(2,"summary"),I(3,"\u{1f4e6} Set Completion Progress"),C(),_(4,"div",30),ae(5,IV,2,1,"ng-container",18),C()()()),2&n){const t=U(2);x(5),$("ngForOf",t.setProgress)}}function OV(n,e){if(1&n&&(_(0,"div",51)(1,"div",52)(2,"h4"),I(3),C(),_(4,"span",53),I(5),C()(),_(6,"div",54)(7,"div",55),an(8,"div",56),C(),_(9,"span",57),I(10),C()()()),2&n){const t=U().$implicit;$("ngClass","rarity-"+t.code),Ut("title",t.name+": "+t.owned+"/"+t.total+" ("+t.percentage+"%)"),x(3),kt(t.name),x(2),qr("",t.owned,"/",t.total,""),x(3),Os("width",t.percentage,"%"),x(2),Xe("",t.percentage,"%")}}function AV(n,e){if(1&n&&(Hr(0),ae(1,OV,11,8,"div",50),zr()),2&n){const t=e.$implicit;x(1),$("ngIf",t.total>0)}}function PV(n,e){if(1&n&&(_(0,"div",48)(1,"details")(2,"summary"),I(3,"\u2b50 Collection by Rarity"),C(),_(4,"div",49),ae(5,AV,2,1,"ng-container",18),C()()()),2&n){const t=U(2);x(5),$("ngForOf",t.userRarityStats)}}function kV(n,e){if(1&n){const t=Pt();_(0,"div",7)(1,"div",8)(2,"label",9)(3,"input",10),H("ngModelChange",function(o){return Ce(t),be(U().excludeDeluxePack=o)})("ngModelChange",function(){return Ce(t),be(U().excludeModelChange())}),C(),I(4," Exclude A4B - DELUXE PACK "),C()(),ae(5,EV,8,1,"div",11),ae(6,TV,6,1,"div",12),ae(7,PV,6,1,"div",13),C()}if(2&n){const t=U();x(3),$("ngModel",t.excludeDeluxePack),x(2),$("ngIf",t.packSuggestions.length>0),x(1),$("ngIf",t.setProgress.length>0),x(1),$("ngIf",t.userRarityStats.length>0)}}let RV=(()=>{const e=class{constructor(r,o,i,s){this.dataManager=r,this.supabaseService=o,this.router=i,this.rarityService=s,this.title="Pokemon TCG Pocket Collector",this.cards=[],this.sets=[],this.rarityStats=[],this.packStats=[],this.loading=!1,this.error=null,this.dataLoaded=!1,this.userCollectionLoaded=!1,this.userCards=[],this.userStats={totalOwned:0,uniqueCards:0,completionPercentage:0,rareCards:0,recentSetsOwned:0,missingCommons:0,missingRares:0},this.setProgress=[],this.userRarityStats=[],this.recentCards=[],this.nearestCompleteSet=null,this.packSuggestions=[],this.excludeDeluxePack=!0}getCardRarityCode(r){const o=this.rarityService.getUnifiedRarities();for(const i of o)if(i.symbol===r.rarity)return i.code;return r.rarity||"Unknown"}ngOnInit(){this.supabaseService.isSignedIn()?this.loadAllData():this.router.navigate(["/signin"])}loadCards(){this.loading=!0,this.error=null,this.dataManager.initializeCardData().subscribe({next:r=>{this.cards=r,this.loading=!1},error:r=>{this.error="Failed to load cards data",this.loading=!1,console.error("Error loading cards:",r)}})}loadAllData(){this.loading=!0,this.error=null,this.dataManager.loadAllPokemonData().subscribe({next:r=>{this.cards=r.cards,this.sets=r.sets,this.dataLoaded=!0,this.loading=!1,this.loadStats(),this.loadUserCollection()},error:r=>{this.error="Failed to load Pokemon data",this.loading=!1,console.error("Error loading data:",r)}})}loadStats(){this.dataManager.getRarityStats().subscribe({next:r=>{this.rarityStats=r},error:r=>console.error("Error loading rarity stats:",r)}),this.dataManager.getPackStats().subscribe({next:r=>{this.packStats=r.slice(0,10)},error:r=>console.error("Error loading pack stats:",r)})}downloadCardsFile(){this.dataManager.downloadCardsFile()}getStorageInstructions(){const r=this.dataManager.getStorageInstructions();alert(r)}showComprehensiveStats(){this.dataManager.getComprehensiveStats().subscribe({next:r=>{alert(`Comprehensive Statistics loaded!\n\nSummary:\n- ${r.totalCards} total cards\n- ${r.totalSets} sets\n- ${r.totalRarities} rarity types\n- Date range: ${r.dateRange.earliest} to ${r.dateRange.latest}`)},error:r=>{console.error("Error loading comprehensive stats:",r),alert("Failed to load comprehensive statistics")}})}loadUserCollection(){var r=this;return y(function*(){const o=yield r.supabaseService.getCurrentUser();if(o)try{const i=yield r.supabaseService.syncUserCollection(o.id);r.userCards=Object.entries(i).map(([s,a])=>({card_def_key:s,quantity:a})),r.userCollectionLoaded=!0,r.calculateSetProgress(),r.calculateUserRarityStats(),r.calculatePackSuggestions()}catch(i){console.error("Error loading user collection:",i)}})()}excludeModelChange(){this.calculateSetProgress(),this.calculateUserRarityStats(),this.calculatePackSuggestions()}getCardId(r){return`${r.set}-${r.number}`}calculateSetProgress(){if(!this.userCards||!this.sets.length||!this.cards.length)return;const r=new Map;this.userCards.forEach(o=>{r.set(o.card_def_key,!0)}),this.setProgress=this.sets.map(o=>{const i=this.cards.filter(u=>u.set===o.code),s=this.excludeDeluxePack?i.filter(u=>!(u.packs&&u.packs.some(d=>this.isDeluxeA4B(d)))):i,a=s.filter(u=>r.has(this.getCardId(u))),l=s.length>0?Math.round(a.length/s.length*100):0,c=this.calculateSetRarityBreakdown(s,r);return{name:o.name||o.code,code:o.code,owned:a.length,total:s.length,percentage:l,rarityBreakdown:c}}).sort((o,i)=>o.code.localeCompare(i.code)),this.nearestCompleteSet=this.setProgress.find(o=>o.percentage<100)||this.setProgress[0]}calculateSetRarityBreakdown(r,o){const i=this.rarityService.groupCardsByNormalizedRarity(r),s=[];return i.forEach((a,l)=>{const c=a.filter(h=>o.has(this.getCardId(h))),u=a.length>0?Math.round(c.length/a.length*100):0,d=this.rarityService.getStandardizedDisplayName(l);s.push({name:d,code:l,owned:c.length,total:a.length,percentage:u})}),s.sort((a,l)=>this.rarityService.getRarityOrder(a.code)-this.rarityService.getRarityOrder(l.code))}calculateUserRarityStats(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(l=>{r.set(l.card_def_key,!0)});const o=this.excludeDeluxePack?this.cards.filter(l=>!(l.packs&&l.packs.some(c=>this.isDeluxeA4B(c)))):this.cards,i=this.rarityService.groupCardsByNormalizedRarity(o),s=[];i.forEach((l,c)=>{const u=l.filter(f=>r.has(this.getCardId(f))),d=l.length>0?Math.round(u.length/l.length*100):0,h=this.rarityService.getStandardizedDisplayName(c);s.push({name:h,code:c,owned:u.length,total:l.length,percentage:d})});const a=new Map;s.forEach(l=>{const c=a.get(l.code);c?(c.owned+=l.owned,c.total+=l.total):a.set(l.code,{name:l.name,code:l.code,owned:l.owned,total:l.total})}),this.userRarityStats=Array.from(a.values()).map(l=>({name:l.name,code:l.code,owned:l.owned,total:l.total,percentage:l.total>0?Math.round(l.owned/l.total*100):0})),this.userRarityStats.sort((l,c)=>this.rarityService.getRarityOrder(l.code)-this.rarityService.getRarityOrder(c.code))}loadRecentCards(){!this.userCards||!this.cards.length||(this.recentCards=this.userCards.slice(0,6).map(r=>({...this.cards.find(i=>this.getCardId(i)===r.card_def_key),quantity:r.quantity})).filter(r=>r))}calculatePackSuggestions(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(s=>{r.set(s.card_def_key,!0)});const o=new Set;this.cards.forEach(s=>{s.packs&&s.packs.length>0&&s.packs.forEach(a=>{this.excludeDeluxePack&&this.isDeluxeA4B(a)||o.add(a)})});const i=Array.from(o).map(s=>{const a=this.cards.filter(g=>g.packs&&g.packs.includes(s)),l=new Map;a.forEach(g=>{g.set&&l.set(g.set,(l.get(g.set)||0)+1)});let c=null,u=0;l.forEach((g,m)=>{g>u&&(u=g,c=m)});let d="";if(c){const g=this.sets.find(m=>m.code===c);d=g?.name||g?.code||c}const h=a.filter(g=>!r.has(this.getCardId(g))),f=new Map;h.forEach(g=>{const m=this.getCardRarityCode(g),v=this.rarityService.getNormalizedCode(m),M=f.get(v)||0;f.set(v,M+1)});let p=0;return f.forEach((g,m)=>{const v=this.rarityService.getRarityOrder(m),M=Math.max(1,10-v);p+=g*M}),{packName:s,primarySetCode:c,primarySetName:d,totalCards:a.length,missingCards:h.length,ownedCards:a.length-h.length,completionPercentage:a.length>0?Math.round((a.length-h.length)/a.length*100):100,rarityBreakdown:Array.from(f.entries()).map(([g,m])=>({code:g,count:m,displayName:this.rarityService.getDisplayName(g),symbol:this.rarityService.getSymbol(g)})).sort((g,m)=>this.rarityService.getRarityOrder(g.code)-this.rarityService.getRarityOrder(m.code)),score:p,missingCardsList:h.slice(0,5)}});this.packSuggestions=i.filter(s=>s.missingCards>0).sort((s,a)=>a.score-s.score).slice(0,5)}isDeluxeA4B(r){return!!r&&r.toUpperCase().replace(/[\u2012\u2013\u2014\u2015\-]/g,"-").replace(/\s+/g," ").trim().includes("DELUXE")}exportCollection(){if(!this.userCollectionLoaded)return void alert("Collection not loaded yet. Please wait...");const r=this.generateCollectionCSV(),o=new Blob(["\ufeff"+r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),s=URL.createObjectURL(o);i.setAttribute("href",s),i.setAttribute("download","pokemon_collection.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}generateCollectionCSV(){const o=[["Card Name","Set","Number","Rarity","Quantity"].join(",")];return this.userCards.forEach(i=>{const s=this.cards.find(a=>this.getCardId(a)===i.card_def_key);if(s){const a=[`"${s.label?.eng||s.name||""}"`,`"${s.set||""}"`,`"${s.number||""}"`,`"${s.rarity||""}"`,i.quantity.toString()];o.push(a.join(","))}}),o.join("\n")}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}};let n=e;return e.\u0275fac=function(o){return new(o||e)(A(sD),A(Da),A(St),A(zD))},e.\u0275cmp=uo({type:e,selectors:[["app-dashboard"]],decls:4,vars:3,consts:[[1,"container"],["class","error",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"error"],[1,"loading-state"],[1,"loading-spinner"],[1,"dashboard-content"],[1,"suggestion-controls",2,"display","flex","justify-content","flex-end","align-items","center","gap","12px"],[2,"display","inline-flex","align-items","center","gap","8px","cursor","pointer"],["type","checkbox",3,"ngModel","ngModelChange"],["class","pack-suggestions",4,"ngIf"],["class","set-progress",4,"ngIf"],["class","rarity-breakdown",4,"ngIf"],[1,"pack-suggestions"],["open",""],[1,"suggestion-subtitle"],[1,"suggestions-list"],[4,"ngFor","ngForOf"],["class","suggestion-item",3,"top-pick",4,"ngIf"],[1,"suggestion-item"],[1,"suggestion-header"],[1,"rank-number"],[1,"suggestion-summary"],["class","pack-set",4,"ngIf"],[1,"missing-count"],[1,"completion-rate"],[1,"progress-count"],[1,"pack-set"],[1,"set-progress"],[1,"progress-list"],["class","progress-item",4,"ngIf"],[1,"progress-item"],[1,"progress-header"],[1,"progress-percentage"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-details"],["class","set-rarity-breakdown",4,"ngIf"],[1,"set-rarity-breakdown"],[1,"set-rarity-grid"],["class","set-rarity-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"set-rarity-item",3,"ngClass"],[1,"rarity-name"],[1,"rarity-mini-progress"],[1,"rarity-mini-bar"],[1,"rarity-mini-fill"],[1,"rarity-mini-text"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-card",3,"ngClass",4,"ngIf"],[1,"rarity-card",3,"ngClass"],[1,"rarity-header"],[1,"rarity-count"],[1,"rarity-progress"],[1,"rarity-bar"],[1,"rarity-fill"],[1,"percentage"]],template:function(o,i){1&o&&(_(0,"div",0),ae(1,vV,2,1,"div",1),ae(2,CV,4,0,"div",2),ae(3,kV,8,4,"div",3),C()),2&o&&(x(1),$("ngIf",i.error),x(1),$("ngIf",i.loading),x(1),$("ngIf",!i.loading))},dependencies:[$h,Uh,Gs,oc,ac,na],styles:['.container[_ngcontent-%COMP%]{position:relative;max-width:1280px;margin:30px auto 0;min-height:100vh;color:var(--text);background:transparent;overflow:visible;border-radius:0;box-shadow:none;padding:0 20px;box-sizing:border-box;width:100%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{color:var(--text);margin-bottom:12px;font-weight:600}.dashboard-content[_ngcontent-%COMP%]{display:grid;gap:32px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.stat-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.22);border-radius:20px;padding:22px;display:flex;flex-direction:column;gap:12px;box-shadow:0 16px 32px #0c142447;transition:transform .16s ease,border-color .16s ease}.stat-card.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(91,168,255,.25),rgba(34,46,70,.85))}.stat-icon[_ngcontent-%COMP%]{font-size:2rem}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--text-muted);letter-spacing:.02em}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0}.stat-detail[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem}.error[_ngcontent-%COMP%]{background:rgba(255,107,107,.12);color:var(--danger);border:1px solid rgba(255,107,107,.35);padding:18px 22px;border-radius:14px;text-align:center;font-weight:500}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:80px 0;color:var(--text)}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;margin:24px auto;border-radius:50%;border:4px solid rgba(91,168,255,.2);border-top-color:var(--accent);animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:clamp(20px,2.4vw,28px);box-shadow:0 18px 36px #070c1859;transition:transform .16s ease,box-shadow .16s ease,border-color .18s ease;max-width:100%;box-sizing:border-box}.pack-suggestions[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]{width:100%}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;list-style:none;cursor:pointer;font-size:clamp(1.25rem,2vw,1.55rem);font-weight:700;color:var(--text);padding-bottom:18px;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:22px}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{content:"";width:11px;height:11px;border-radius:50%;background:var(--accent);box-shadow:0 0 18px #5ba8ffa6}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker{display:none}.pack-suggestions[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{background:var(--accent-strong)}.suggestion-subtitle[_ngcontent-%COMP%]{color:var(--text-muted);margin-bottom:18px;font-size:.95rem;font-style:italic}.suggestions-list[_ngcontent-%COMP%]{display:grid;gap:14px}.suggestion-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:18px;padding:18px 20px;border:1px solid rgba(91,168,255,.2);transition:transform .16s ease,border-color .16s ease,box-shadow .16s ease}.suggestion-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#5ba8ff8c;box-shadow:0 14px 28px #101c3459}.suggestion-item.top-pick[_ngcontent-%COMP%]{border:1px solid rgba(241,196,15,.65);background:linear-gradient(120deg,rgba(241,196,15,.22),rgba(44,62,80,.45))}.suggestion-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.pack-set[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;font-weight:700}.rank-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:32px;padding:4px 10px;border-radius:999px;background:rgba(91,168,255,.2);color:var(--accent);font-weight:600}.top-pick-badge[_ngcontent-%COMP%]{font-size:.72rem;letter-spacing:.12em;text-transform:uppercase;padding:4px 10px;border-radius:999px;background:rgba(241,196,15,.16);color:var(--warning)}.suggestion-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:14px;color:var(--text-muted);font-size:.92rem}.missing-count[_ngcontent-%COMP%]{color:var(--danger);font-weight:600}.completion-rate[_ngcontent-%COMP%]{color:var(--success);font-weight:600}.progress-count[_ngcontent-%COMP%]{color:var(--accent);font-weight:600}.progress-list[_ngcontent-%COMP%]{display:grid;gap:18px}.progress-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:20px;padding:20px 22px;border:1px solid rgba(91,168,255,.18);transition:transform .16s ease,border-color .16s ease}.progress-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.progress-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;color:var(--text)}.progress-percentage[_ngcontent-%COMP%]{color:var(--success);font-weight:700}.progress-bar[_ngcontent-%COMP%]{background:rgba(91,168,255,.14);border-radius:999px;height:10px;overflow:hidden;margin-bottom:10px}.progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent-strong));transition:width .22s ease-in-out}.progress-details[_ngcontent-%COMP%]{color:var(--text-muted);margin:0;font-size:.92rem}.set-rarity-breakdown[_ngcontent-%COMP%]{margin-top:18px}.set-rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:12px;color:var(--text-muted);font-weight:600;letter-spacing:.02em}.set-rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.set-rarity-item[_ngcontent-%COMP%]{background:rgba(13,19,33,.7);border:1px solid rgba(91,168,255,.14);border-radius:16px;padding:12px 14px;text-align:center;box-shadow:inset 0 1px #ffffff0a,0 6px 14px #080c1659;display:flex;flex-direction:column;min-height:96px}.rarity-name[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:.8rem;font-weight:600;color:var(--text)}.rarity-mini-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:auto}.rarity-mini-bar[_ngcontent-%COMP%]{flex:1;height:8px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(91,168,255,.12));border:1px solid rgba(91,168,255,.22);overflow:hidden;position:relative}.rarity-mini-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--rarity-start, var(--accent)) 0%,var(--rarity-end, var(--accent-strong)) 100%);border-radius:999px;box-shadow:0 0 8px var(--rarity-glow, rgba(76, 138, 255, .6));transition:width .26s ease}.rarity-mini-text[_ngcontent-%COMP%]{font-size:.72rem;color:var(--text);background:rgba(255,255,255,.06);border:1px solid rgba(91,168,255,.18);padding:2px 8px;border-radius:999px;font-weight:600;letter-spacing:.01em;font-variant-numeric:tabular-nums}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.rarity-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.18);border-radius:18px;padding:20px;display:flex;flex-direction:column;gap:14px;min-height:140px;transition:transform .16s ease,border-color .16s ease}.rarity-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.rarity-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.rarity-count[_ngcontent-%COMP%]{font-weight:700;color:var(--accent)}.rarity-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:auto}.rarity-bar[_ngcontent-%COMP%]{flex:1;height:10px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(91,168,255,.12));border:1px solid rgba(91,168,255,.22);overflow:hidden}.rarity-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--rarity-start, var(--accent)) 0%,var(--rarity-end, var(--accent-strong)) 100%);border-radius:999px;box-shadow:0 0 10px var(--rarity-glow, rgba(76, 138, 255, .65));transition:width .26s ease-in-out}.percentage[_ngcontent-%COMP%]{min-width:48px;text-align:right;font-weight:700;color:var(--success);background:rgba(46,204,113,.1);border:1px solid rgba(46,204,113,.25);padding:2px 8px;border-radius:999px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding-left:16px!important;padding-right:16px!important}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{margin-inline:8px}.suggestion-summary[_ngcontent-%COMP%], .progress-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.suggestions-list[_ngcontent-%COMP%]{gap:10px}.suggestion-item[_ngcontent-%COMP%]{padding:14px 16px;box-sizing:border-box;max-width:100%}.suggestion-item.top-pick[_ngcontent-%COMP%]{padding:12px 14px;border-radius:16px}.suggestion-header[_ngcontent-%COMP%]{gap:10px}.top-pick-badge[_ngcontent-%COMP%]{font-size:.68rem;padding:3px 8px}.pack-set[_ngcontent-%COMP%]{font-size:.85rem}.rarity-grid[_ngcontent-%COMP%], .set-rarity-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.rank-number[_ngcontent-%COMP%]{min-width:24px;padding:3px 8px;font-size:.9rem}.suggestion-summary[_ngcontent-%COMP%]{gap:10px;font-size:.88rem;overflow-wrap:anywhere;word-break:break-word}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{padding:clamp(18px,2.16vw,25px);font-size:.9em}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{font-size:.9em}.suggestion-item[_ngcontent-%COMP%]{padding:12px 14px}.suggestion-item.top-pick[_ngcontent-%COMP%]{padding:10px 12px}.progress-item[_ngcontent-%COMP%]{padding:18px 20px}.rarity-card[_ngcontent-%COMP%]{padding:18px}.suggestion-summary[_ngcontent-%COMP%]{font-size:.8rem}.top-pick-badge[_ngcontent-%COMP%]{font-size:.62rem;padding:3px 7px}.rank-number[_ngcontent-%COMP%]{min-width:22px;padding:2px 7px;font-size:.82rem}.pack-set[_ngcontent-%COMP%]{font-size:.78rem}}']}),n})(),NV=(()=>{const e=class{constructor(r){this.http=r,this.BASE_IMAGE_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-exchange/main/public/images/cards",this.imageCache=new Map}getCardImageUrl(r){return`${this.BASE_IMAGE_URL}/${r}`}checkImageExists(r){if(this.imageCache.has(r))return Q(this.imageCache.get(r));const o=this.getCardImageUrl(r);return this.http.head(o,{observe:"response"}).pipe(P(i=>{const s=200===i.status;return this.imageCache.set(r,s),s}),Kn(()=>(this.imageCache.set(r,!1),Q(!1))))}preloadImage(r){return new Promise(o=>{const i=new Image;i.onload=()=>{this.imageCache.set(r,!0),o(!0)},i.onerror=()=>{this.imageCache.set(r,!1),o(!1)},i.src=this.getCardImageUrl(r)})}getPlaceholderImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDIwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExNi41NjkgMTQwIDEzMCAxMjYuNTY5IDEzMCAxMTBDMTMwIDkzLjQzMTUgMTE2LjU2OSA4MCAxMDAgODBDODMuNDMxNSA4MCA3MCA5My40MzE1IDcwIDExMEM3MCAxMjYuNTY5IDgzLjQzMTUgMTQwIDEwMCAxNDBaIiBmaWxsPSIjOUI5QkE4Ii8+CjxwYXRoIGQ9Ik0xMDAgMTAwQzEwNS41MjMgMTAwIDExMCAxMDQuNDc3IDExMCAxMTBDMTEwIDExNS41MjMgMTA1LjUyMyAxMjAgMTAwIDEyMEM5NC40NzcgMTIwIDkwIDExNS41MjMgOTAgMTEwQzkwIDEwNC40NzcgOTQuNDc3IDEwMCAxMDAgMTAwWiIgZmlsbD0iI0Y5RkFGQiIvPgo8L3N2Zz4K"}};let n=e;return e.\u0275fac=function(o){return new(o||e)(G(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function FV(n,e){if(1&n){const t=Pt();_(0,"div",57)(1,"div"),I(2,"Viewing "),_(3,"strong"),I(4),C(),I(5,"'s collection (read-only)"),C(),_(6,"button",58),H("click",function(){return Ce(t),be(U().backToMyCollection())}),I(7,"Back to my collection"),C()()}if(2&n){const t=U();x(4),kt(null==t.viewingUser?null:t.viewingUser.username)}}function LV(n,e){if(1&n&&(_(0,"option",59),I(1),C()),2&n){const t=e.$implicit;$("value",t),x(1),kt(t)}}function jV(n,e){if(1&n&&(_(0,"option",59),I(1),C()),2&n){const t=e.$implicit,r=U();$("value",t),x(1),kt(r.getSetName(t))}}function VV(n,e){if(1&n&&(_(0,"option",59),I(1),C()),2&n){const t=e.$implicit;$("value",t),x(1),kt(t)}}function $V(n,e){if(1&n){const t=Pt();_(0,"button",60),H("click",function(){const i=Ce(t).$implicit;return be(U().toggleRarity(i.symbol))}),I(1),C()}if(2&n){const t=e.$implicit;bt("active",U().isRaritySelected(t.symbol)),$("title",t.displayName),x(1),Xe(" ",t.symbol," ")}}const UV=function(n,e,t){return{"trainer-item":n,"trainer-tool":e,"trainer-supporter":t}};function BV(n,e){if(1&n&&(Hr(0),_(1,"span",64),I(2),C(),zr()),2&n){const t=U().$implicit;x(1),$("ngClass",wv(2,UV,"Item"===t,"Tool"===t,"Supporter"===t)),x(1),Xe(" ",t," ")}}function HV(n,e){if(1&n&&an(0,"img",65),2&n){const t=U().$implicit;$("src","assets/energy/"+t.toLowerCase()+".webp",bs)("alt",t)}}const zV=function(){return["Item","Tool","Supporter"]};function GV(n,e){if(1&n){const t=Pt();_(0,"button",61),H("click",function(){const i=Ce(t).$implicit;return be(U().toggleType(i))}),ae(1,BV,3,6,"ng-container",62),ae(2,HV,1,2,"ng-template",null,63,sh),C()}if(2&n){const t=e.$implicit,r=wl(3);bt("active",U().isTypeSelected(t)),$("title",t),x(1),$("ngIf",function bv(n,e,t){const r=Gt()+n,o=N();return o[r]===he?ur(o,r,t?e.call(t):e()):function Is(n,e){return n[e]}(o,r)}(5,zV).includes(t))("ngIfElse",r)}}function qV(n,e){if(1&n){const t=Pt();_(0,"div",12)(1,"label",66),I(2,"Group By"),C(),_(3,"select",67),H("ngModelChange",function(o){return Ce(t),be(U().groupBy=o)})("change",function(){return Ce(t),be(U().onGroupByChange())}),_(4,"option",68),I(5,"No Grouping"),C(),_(6,"option",69),I(7,"Rarity"),C(),_(8,"option",70),I(9,"Pack"),C(),_(10,"option",71),I(11,"Type"),C()()()}if(2&n){const t=U();x(3),$("ngModel",t.groupBy)}}function WV(n,e){1&n&&(_(0,"div",72),an(1,"div",73),_(2,"p"),I(3,"Loading Pokemon cards..."),C()())}function KV(n,e){if(1&n){const t=Pt();_(0,"div",74)(1,"p"),I(2),C(),_(3,"button",75),H("click",function(){return Ce(t),be(U().loadAllData())}),I(4,"Retry"),C()()}if(2&n){const t=U();x(2),kt(t.error)}}function JV(n,e){if(1&n&&(_(0,"div",82),I(1),C()),2&n){const t=U(2);x(1),Xe("",t.syncProgress," cards loaded")}}function YV(n,e){if(1&n&&(_(0,"div",76)(1,"div",77)(2,"div",78),I(3,"\u23f3"),C(),_(4,"div",79)(5,"div",80),I(6),C(),ae(7,JV,2,1,"div",81),C()()()),2&n){const t=U();x(6),kt(t.syncMessage),x(1),$("ngIf",t.syncProgress>0)}}function QV(n,e){if(1&n){const t=Pt();Hr(0),_(1,"input",101),H("ngModelChange",function(o){return Ce(t),be(U(4).editingCountValue=o)})("keydown.enter",function(){Ce(t);const o=U().$implicit;return be(U(3).commitCount(o))})("keydown",function(o){Ce(t);const i=U().$implicit;return be(U(3).onCountInputKeydown(o,i))})("keydown.escape",function(){return Ce(t),be(U(4).cancelEditingCount())})("blur",function(){Ce(t);const o=U().$implicit;return be(U(3).commitCount(o))}),C(),zr()}if(2&n){const t=U(4);x(1),$("ngModel",t.editingCountValue)}}function ZV(n,e){if(1&n){const t=Pt();_(0,"button",102),H("click",function(){Ce(t);const o=U().$implicit,i=U(3);return be(i.isViewingOther?null:i.startEditingCount(o))}),I(1),C()}if(2&n){const t=U().$implicit,r=U(3);$("disabled",r.isViewingOther),x(1),Xe(" ",r.getOwnedCount(t)," ")}}function XV(n,e){if(1&n){const t=Pt();_(0,"div",92)(1,"div",93)(2,"img",94),H("error",function(o){const s=Ce(t).$implicit;return be(U(3).onImageError(o,s))})("click",function(){const i=Ce(t).$implicit;return be(U(3).openCardModal(i))}),C()(),_(3,"div",95)(4,"div",96),I(5),C(),_(6,"div",97)(7,"button",98),H("click",function(){const i=Ce(t).$implicit;return be(U(3).decreaseOwned(i))}),I(8," \u2212 "),C(),ae(9,QV,2,1,"ng-container",62),ae(10,ZV,2,2,"ng-template",null,99,sh),_(12,"button",100),H("click",function(){const i=Ce(t).$implicit;return be(U(3).increaseOwned(i))}),I(13," + "),C()()()()}if(2&n){const t=e.$implicit,r=wl(11),o=U(3);bt("no-quantity",0===o.getOwnedCount(t)),Ut("data-cardid",o.getCardId(t)),x(1),bt("no-quantity",0===o.getOwnedCount(t)),x(1),bt("no-quantity",0===o.getOwnedCount(t)),$("src",o.getCardImageUrl(t.imageName),bs)("alt",t.label.eng+" Pokemon Card"),x(3),kt(o.getCardDisplayName(t)),x(2),$("disabled",o.isViewingOther||0===o.getOwnedCount(t)),x(2),$("ngIf",o.editingCardId===o.getCardId(t))("ngIfElse",r),x(3),$("disabled",o.isViewingOther)}}function e$(n,e){if(1&n&&(_(0,"div",85)(1,"div",86)(2,"h3",87),I(3),C(),_(4,"div",88)(5,"span",89),I(6),C()()(),_(7,"div",90),ae(8,XV,14,14,"div",91),C()()),2&n){const t=e.$implicit,r=U(2);Ut("id","set-"+t.groupTitle),x(3),kt(r.getGroupDisplayName(t.groupTitle,t.cards)),x(3),Xe("",r.getGroupCollectedCount(t.cards)," cards"),x(2),$("ngForOf",t.cards)("ngForTrackBy",r.trackByCardInGroup)}}function t$(n,e){if(1&n&&(_(0,"div",83),ae(1,e$,9,5,"div",84),C()),2&n){const t=U();x(1),$("ngForOf",t.getGroupedCards())("ngForTrackBy",t.trackByGroupTitle)}}function n$(n,e){if(1&n){const t=Pt();_(0,"div",103)(1,"div",104),I(2,"\u{1f50d}"),C(),_(3,"h3"),I(4,"No cards found"),C(),_(5,"p"),I(6,"Try adjusting your search or filter criteria"),C(),_(7,"button",75),H("click",function(){return Ce(t),be(U().clearFilters())}),I(8,"Clear All Filters"),C()()}}function r$(n,e){if(1&n){const t=Pt();_(0,"div",105),H("click",function(){return Ce(t),be(U().closeViewOthersModal())}),_(1,"div",106),H("click",function(o){return o.stopPropagation()}),_(2,"div",107)(3,"h3"),I(4,"View Others Collection"),C(),_(5,"button",108),H("click",function(){return Ce(t),be(U().closeViewOthersModal())}),I(6,"\xd7"),C()(),_(7,"div",109)(8,"div",110)(9,"div",111)(10,"label",112),I(11,"Username:"),C(),_(12,"input",113),H("ngModelChange",function(o){return Ce(t),be(U().otherUsername=o)})("keydown.enter",function(){return Ce(t),be(U().viewOtherCollectionFromModal())}),C(),_(13,"span",114),I(14,"Enter the username of the collection you want to view"),C()()()(),_(15,"div",115)(16,"button",58),H("click",function(){return Ce(t),be(U().closeViewOthersModal())}),I(17,"Cancel"),C(),_(18,"button",116),H("click",function(){return Ce(t),be(U().viewOtherCollectionFromModal())}),I(19," \u{1f464} View Collection "),C()()()()}if(2&n){const t=U();x(12),$("ngModel",t.otherUsername),x(6),$("disabled",!t.otherUsername.trim())}}function o$(n,e){if(1&n){const t=Pt();_(0,"button",60),H("click",function(){const i=Ce(t).$implicit;return be(U(2).toggleTradeRarity(i.symbol))}),I(1),C()}if(2&n){const t=e.$implicit;bt("active",U(2).isTradeRaritySelected(t.symbol)),$("title",t.displayName),x(1),Xe(" ",t.symbol," ")}}function i$(n,e){if(1&n){const t=Pt();_(0,"div",105),H("click",function(){return Ce(t),be(U().closeTradeModal())}),_(1,"div",117),H("click",function(o){return o.stopPropagation()}),_(2,"div",107)(3,"h3"),I(4,"Copy For Trade"),C(),_(5,"button",108),H("click",function(){return Ce(t),be(U().closeTradeModal())}),I(6,"\xd7"),C()(),_(7,"div",109)(8,"div",118)(9,"div",111)(10,"label",119)(11,"input",120),H("ngModelChange",function(o){return Ce(t),be(U().excludeSpecialPacks=o)}),C(),I(12," Exclude Special packs "),C(),_(13,"span",114),I(14,'When enabled, cards from packs with "PROMO" and "A4b" are omitted.'),C()(),_(15,"div",111)(16,"label",121),I(17,"Include rarities:"),C(),_(18,"div",122)(19,"button",123),H("click",function(){return Ce(t),be(U().clearTradeRarities())}),I(20,"ALL"),C(),ae(21,o$,2,4,"button",25),C()(),_(22,"div",111)(23,"label",124),I(24,"Trade cards (quantity \u2265):"),C(),_(25,"input",125),H("ngModelChange",function(o){return Ce(t),be(U().tradeQuantityMin=o)}),C(),_(26,"span",114),I(27,'Cards with this quantity or more will be listed as "for trade"'),C()(),_(28,"div",111)(29,"label",126),I(30,"Friend Code:"),C(),_(31,"input",127),H("ngModelChange",function(o){return Ce(t),be(U().tradeFriendCode=o)}),C(),_(32,"span",114),I(33,"This is not saved. It's only used in the copied text."),C()(),_(34,"div",111)(35,"label",128),I(36,"Template text:"),C(),_(37,"textarea",129),H("ngModelChange",function(o){return Ce(t),be(U().tradeTemplateText=o)}),C(),_(38,"span",114),I(39,"Not saved. Will be appended to the copied text."),C()()()(),_(40,"div",115)(41,"button",58),H("click",function(){return Ce(t),be(U().closeTradeModal())}),I(42,"Cancel"),C(),_(43,"button",75),H("click",function(){return Ce(t),be(U().generateAndCopyTradeText())}),I(44,"\u{1f4cb} Copy Trade Text"),C()()()()}if(2&n){const t=U();x(11),$("ngModel",t.excludeSpecialPacks),x(8),bt("active",0===t.selectedTradeRarities.length),x(2),$("ngForOf",t.getAvailableTradeRaritySymbols()),x(4),$("ngModel",t.tradeQuantityMin),x(6),$("ngModel",t.tradeFriendCode),x(6),$("ngModel",t.tradeTemplateText)}}function s$(n,e){if(1&n&&(_(0,"span",139),I(1),C()),2&n){const t=e.$implicit;x(1),kt(t)}}function a$(n,e){if(1&n&&(_(0,"div",137),ae(1,s$,2,1,"span",138),C()),2&n){const t=U(2);x(1),$("ngForOf",t.selectedCardForModal.packs)}}function l$(n,e){if(1&n){const t=Pt();_(0,"div",130),H("click",function(){return Ce(t),be(U().closeCardModal())}),_(1,"div",131),H("click",function(o){return o.stopPropagation()}),_(2,"button",132),H("click",function(){return Ce(t),be(U().closeCardModal())}),I(3,"\xd7"),C(),_(4,"div",133),an(5,"img",134),C(),_(6,"div",135)(7,"h3"),I(8),C(),ae(9,a$,2,1,"div",136),C()()()}if(2&n){const t=U();x(5),$("src",t.getCardImageUrl(t.selectedCardForModal.imageName),bs)("alt",t.getCardDisplayName(t.selectedCardForModal)),x(3),kt(t.getCardDisplayName(t.selectedCardForModal)),x(1),$("ngIf",t.selectedCardForModal.packs&&t.selectedCardForModal.packs.length>0)}}let c$=(()=>{const e=class{constructor(r,o,i,s,a,l,c){this.pokemonDataService=r,this.dataManager=o,this.imageService=i,this.supabaseService=s,this.router=a,this.cdr=l,this.rarityService=c,this.cards=[],this.filteredCards=[],this.sets=[],this.rarityMapping={},this.ownedCards={},this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.groupBy="none",this.availableSets=[],this.availableSeries=[],this.availableRarities=[],this.availableRaritySymbols=[],this.availableTypes=[],this.availablePacks=[],this.loading=!0,this.loadingOwnedCards=!1,this.syncingCards=!1,this.syncProgress=0,this.syncMessage="",this.error=null,this.viewMode="grid",this.editingCardId=null,this.editingCountValue=0,this.lastFlatOrder=[],this.selectedCardForModal=null,this.isViewingOther=!1,this.otherUsername="",this.viewingUser=null,this.totalCards=0,this.ownedCount=0,this.uniqueOwned=0,this.completionPercentage=0,this.currentUser=null,this.filtersOpen=!1,this.showTradeModal=!1,this.selectedTradeRarities=[],this.tradeQuantityMin=2,this.tradeFriendCode="",this.tradeTemplateText="Please ping me if there is any possible trades. \nENGLISH cards only please.",this.excludedTradeSymbols=new Set(["\u2606\u2606\u2606","\u{1f451}"]),this.excludeSpecialPacks=!0,this.showViewOthersModal=!1,this.handleModalKeydown=u=>{"Escape"===u.key&&this.selectedCardForModal&&this.closeCardModal()},this.trackByCardId=(u,d)=>this.getCardId(d),this.trackByGroupTitle=(u,d)=>d.groupTitle,this.trackByCardInGroup=(u,d)=>this.getCardId(d)}ngOnInit(){if(this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser){try{typeof window<"u"&&window?.innerWidth<=768&&(this.filtersOpen=!1)}catch{}this.loadAllData()}else this.router.navigate(["/signin"])}loadAllData(){this.loading=!0,this.error=null,this.pokemonDataService.loadAllData().subscribe({next:r=>{this.cards=r.cards,this.filteredCards=[...this.cards],this.sets=r.sets,this.rarityMapping=r.rarities,this.extractFilterOptions(),this.calculateStatistics(),this.loading=!1,this.cdr.detectChanges(),this.loadOwnedCards()},error:r=>{this.error="Failed to load card collection",this.loading=!1,this.cdr.detectChanges(),console.error("Error loading card collection:",r)}})}extractFilterOptions(){this.availableSeries=[...new Set(this.cards.map(l=>l.series).filter(l=>!!l))];const r=[...new Set(this.cards.map(l=>l.rarity).filter(l=>l))],o=this.createRaritySymbolToCodeMap();this.availableRarities=r.map(l=>o.get(l)||l),this.availableRaritySymbols=[];const i=new Set;this.cards.forEach(l=>{if(l.rarity){const c=o.get(l.rarity);if(c){const u=this.rarityService.getNormalizedCode(c);i.add(u)}}});const s=new Map;this.rarityService.getUnifiedRarities().forEach(l=>{i.has(l.code)&&s.set(l.symbol,{symbol:l.symbol,rarities:[l.code],displayName:l.displayName})}),this.availableRaritySymbols=Array.from(s.values()).sort((l,c)=>this.rarityService.getRarityOrder(l.rarities[0])-this.rarityService.getRarityOrder(c.rarities[0])),this.extractAvailablePacks(),this.extractAvailableTypes(),this.extractAvailableSets()}extractAvailableSets(){this.availableSets="all"===this.selectedSeries?[...new Set(this.cards.map(r=>r.set))]:[...new Set(this.cards.filter(r=>r.series===this.selectedSeries).map(r=>r.set))]}createRaritySymbolToCodeMap(){const r=new Map,o=this.rarityService.getUnifiedRarities();for(const i of o)r.set(i.symbol,i.code);return r}getCardRarityCode(r){return this.createRaritySymbolToCodeMap().get(r.rarity)||r.rarity}convertRarityNameToCode(r){return{Common:"C",Uncommon:"U",Rare:"R","Double Rare":"RR","Art Rare":"AR","Super Rare":"SR","Special Art Rare":"SAR","Immersive Rare":"IM","Crown Rare":"UR",Shiny:"S","Shiny Super Rare":"SSR"}[r]||r}extractAvailablePacks(){let r=this.cards;"all"!==this.selectedSeries&&(r=r.filter(i=>i.series===this.selectedSeries)),"all"!==this.selectedSet&&(r=r.filter(i=>i.set===this.selectedSet));const o=r.flatMap(i=>Array.isArray(i.packs)?i.packs:[]).filter(i=>"string"==typeof i&&i.trim());this.availablePacks=[...new Set(o)],"all"!==this.selectedPack&&!this.availablePacks.includes(this.selectedPack)&&(this.selectedPack="all")}extractAvailableTypes(){const r=this.cards.flatMap(i=>Array.isArray(i.types)?i.types:[]).filter(i=>"string"==typeof i&&i.trim()),o=["Item","Tool","Supporter"];this.availableTypes=[...new Set(r)].sort((i,s)=>{const a=o.includes(i),l=o.includes(s);return a&&!l?1:!a&&l?-1:i.localeCompare(s)}),console.log("Available types extracted:",this.availableTypes)}applyFilters(){this.filteredCards=this.cards.filter(i=>{if("all"!==this.selectedSet&&i.set!==this.selectedSet||"all"!==this.selectedSeries&&i.series!==this.selectedSeries)return!1;if(this.selectedRarities.length>0){const s=this.getCardRarityCode(i),a=s?this.rarityService.getSymbol(s):"";if(!a||!this.selectedRarities.includes(a))return!1}return!(this.selectedTypes.length>0&&!(Array.isArray(i.types)?i.types:[]).some(l=>this.selectedTypes.includes(l))||"all"!==this.selectedSet&&"all"!==this.selectedPack&&!(Array.isArray(i.packs)?i.packs:[]).includes(this.selectedPack)||this.searchTerm&&!i.label.eng.toLowerCase().includes(this.searchTerm.toLowerCase())||"missing"===this.ownershipFilter&&this.getOwnedCount(i)>0||"owned"===this.ownershipFilter&&0===this.getOwnedCount(i))});const r=i=>this.isSpecialSet(i),o=(i,s)=>{const a=/^([A-Z]+)(\d+)([a-z]*)$/,l=(i||"").match(a),c=(s||"").match(a);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return(i||"").localeCompare(s||"")};this.filteredCards.sort("oldest"===this.sortBy?(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(i.set,s.set);return 0!==c?c:i.number-s.number}:(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(s.set,i.set);return 0!==c?c:s.number-i.number})}onFilterChange(){this.extractAvailablePacks(),this.applyFilters()}onSetChange(){this.extractAvailablePacks(),"all"===this.selectedSet&&(this.selectedPack="all",this.groupBy="none"),this.applyFilters()}onSeriesChange(){this.extractAvailableSets(),this.selectedSet="all",this.selectedPack="all",this.groupBy="none",this.extractAvailablePacks(),this.applyFilters()}onSearchChange(){this.applyFilters()}onGroupByChange(){this.applyFilters()}clearFilters(){this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.groupBy="none",this.extractAvailableSets(),this.extractAvailablePacks(),this.applyFilters()}toggleFilters(){this.filtersOpen=!this.filtersOpen,this.cdr.detectChanges(),this.filtersOpen&&setTimeout(()=>{const r=document.querySelector(".filters-panel");if(r){const o=r.getBoundingClientRect().top+window.scrollY-8;window.scrollTo({top:o,behavior:"smooth"})}})}isSpecialSet(r){const o=(r||"").toUpperCase();return o.startsWith("P-")||o.endsWith("-P")||"P-A"===o||o.startsWith("PROMO")||o.startsWith("A4B")}openTradeModal(){this.isViewingOther||(this.tradeFriendCode=this.currentUser?.friend_code||"",this.selectedTradeRarities=this.selectedTradeRarities.filter(r=>!this.isTradeRarityDisabled(r)),this.showTradeModal=!0,this.cdr.detectChanges())}closeTradeModal(){this.showTradeModal=!1,this.cdr.detectChanges()}isTradeRaritySelected(r){return this.selectedTradeRarities.includes(r)}toggleTradeRarity(r){if(this.isTradeRarityDisabled(r))return;const o=this.selectedTradeRarities.indexOf(r);o>=0?this.selectedTradeRarities.splice(o,1):this.selectedTradeRarities.push(r),this.cdr.detectChanges()}isTradeRarityDisabled(r){return this.excludedTradeSymbols.has(r)}getAvailableTradeRaritySymbols(){return(this.availableRaritySymbols||[]).filter(r=>!this.excludedTradeSymbols.has(r.symbol))}clearTradeRarities(){this.selectedTradeRarities=[],this.cdr.detectChanges()}openViewOthersModal(){this.isViewingOther||(this.showViewOthersModal=!0,this.cdr.detectChanges())}closeViewOthersModal(){this.showViewOthersModal=!1,this.cdr.detectChanges()}viewOtherCollectionFromModal(){var r=this;return y(function*(){yield r.viewOtherCollection(),r.closeViewOthersModal()})()}generateAndCopyTradeText(){var r=this;return y(function*(){try{const o=r.generateTradeText();yield navigator.clipboard.writeText(o),r.closeTradeModal()}catch(o){console.error("Failed to copy to clipboard:",o),alert("Failed to copy to clipboard. Please try again.")}})()}generateTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],s=this.cards.filter(f=>{if(this.excludeSpecialPacks&&this.isSpecialSet(f.set))return!1;const p=this.getCardRarityCode(f),g=p?this.rarityService.getSymbol(p):"";return!(g&&!o.includes(g))&&0===this.getOwnedCount(f)}).reduce((f,p)=>((f[p.set]||=[]).push(p),f),{});let a="";a+="\n=============================================================================",a+="\nLooking for cards:",a+="\n=============================================================================\n\n";for(const[f,p]of Object.entries(s))if(0!==p.length){a+=`[${this.getSetName(f)}]:\n`;for(const m of p){const v=this.getCardRarityCode(m);a+=`${v?this.rarityService.getSymbol(v):""} ${this.getCardDisplayName(m)}\n`}a+="\n"}a+="\n=============================================================================",a+="\nCards for trade:",a+="\n=============================================================================\n\n";const c=this.cards.filter(f=>{if(this.excludeSpecialPacks&&this.isSpecialSet(f.set))return!1;const p=this.getCardRarityCode(f),g=p?this.rarityService.getSymbol(p):"";return!(g&&!o.includes(g)||g&&this.excludedTradeSymbols.has(g))&&this.getOwnedCount(f)>=this.tradeQuantityMin}).reduce((f,p)=>((f[p.set]||=[]).push(p),f),{});for(const[f,p]of Object.entries(c))if(0!==p.length){a+=`[${this.getSetName(f)}]:\n`;for(const m of p){const v=this.getCardRarityCode(m);a+=`${v?this.rarityService.getSymbol(v):""} ${this.getCardDisplayName(m)}\n`}a+="\n"}const u=(this.tradeTemplateText||"").trim(),d=(this.tradeFriendCode||"").trim(),h=(this.currentUser?.username||"").trim();return a+="\n=============================================================================",u&&(a+=`\n${u}\n`),(d||h)&&(h&&(a+=`\nIGN: ${h}`),d&&(a+=`\nFriend code: ${d}`)),a+="\n=============================================================================\n",a.trim()}loadOwnedCards(){var r=this;return y(function*(){r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}loadOwnedCardsForUser(r,o){var i=this;return y(function*(){i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage=o?`Loading ${o}'s collection...`:"Starting sync...",i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage="Starting sync...";try{const s=yield i.supabaseService.syncUserCollection(r,a=>{i.syncProgress=a,i.syncMessage=`Syncing cards... ${a} loaded`,i.cdr.detectChanges()});i.ownedCards=s,i.calculateStatistics(),i.syncMessage=`Sync completed! ${Object.keys(s).length} cards loaded`,i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},1500)}catch(s){console.error("Error loading owned cards:",s),i.syncMessage="Sync failed, using local data...";const a=localStorage.getItem("ownedPokemonCards");a&&(i.ownedCards=JSON.parse(a),i.calculateStatistics()),i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},2e3)}finally{i.loadingOwnedCards=!1}})()}saveOwnedCards(){var r=this;return y(function*(){localStorage.setItem("ownedPokemonCards",JSON.stringify(r.ownedCards)),r.calculateStatistics()})()}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}increaseOwned(r){var o=this;return y(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r),a=s+1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}decreaseOwned(r){var o=this;return y(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r);if(0===s)return;const a=s-1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}startEditingCount(r){this.isViewingOther||(this.editingCardId=this.getCardId(r),this.editingCountValue=this.getOwnedCount(r),this.cdr.detectChanges(),this.focusEditingInput())}cancelEditingCount(){this.editingCardId=null,this.editingCountValue=0,this.cdr.detectChanges()}commitCount(r){var o=this;return y(function*(){if(o.isViewingOther)return void o.cancelEditingCount();if(!o.currentUser)return;const i=o.getCardId(r);if(o.editingCardId!==i)return;const s=Math.max(0,Math.floor(Number(o.editingCountValue)||0)),a=o.getOwnedCount(r);s!==a?(o.updateLocalQuantity(i,s),yield o.persistQuantity(i,s,a),o.cancelEditingCount()):o.cancelEditingCount()})()}onCountInputKeydown(r,o){if("Tab"!==r.key)return;r.preventDefault();const i=this.getFlatOrderedCards(),s=this.getCardId(o),a=i.findIndex(c=>this.getCardId(c)===s);if(-1===a)return;const l=r.shiftKey?a-1:a+1;this.commitCount(o).then(()=>{const c=i[l];c&&this.startEditingCount(c)})}focusEditingInput(){const r=this.editingCardId;r&&setTimeout(()=>{const o=document.querySelector(`.card-item[data-cardid="${r}"] .count-input`);o&&(o.focus(),o.select())})}getFlatOrderedCards(){const r=this.getGroupedCards();return this.lastFlatOrder=r.flatMap(o=>o.cards),this.lastFlatOrder}updateLocalQuantity(r,o){o<=0?delete this.ownedCards[r]:this.ownedCards[r]=o,this.saveOwnedCards(),this.cdr.detectChanges()}persistQuantity(r,o,i){var s=this;return y(function*(){if(s.currentUser)try{yield s.supabaseService.updateCardQuantity(s.currentUser.id,r,o)}catch(a){console.error("Error updating card quantity in database:",a),i<=0?delete s.ownedCards[r]:s.ownedCards[r]=i,s.saveOwnedCards(),s.cdr.detectChanges()}})()}calculateStatistics(){this.totalCards=this.cards.length,this.ownedCount=Object.values(this.ownedCards).reduce((r,o)=>r+o,0),this.uniqueOwned=Object.keys(this.ownedCards).length,this.completionPercentage=this.totalCards>0?Math.round(this.uniqueOwned/this.totalCards*100):0}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.name:r}getFullRarityName(r){return this.rarityService.getStandardizedDisplayName(r)}getRarityClass(r){return{Common:"rarity-common",Uncommon:"rarity-uncommon",Rare:"rarity-rare","Double Rare":"rarity-double-rare","Art Rare":"rarity-art-rare","Super Rare":"rarity-super-rare","Special Art Rare":"rarity-special-art-rare","Immersive Rare":"rarity-immersive-rare","Crown Rare":"rarity-crown-rare",Shiny:"rarity-shiny","Shiny Super Rare":"rarity-shiny-super-rare"}[r]||"rarity-default"}toggleViewMode(){this.viewMode="grid"===this.viewMode?"list":"grid"}exportCollection(){if(this.isViewingOther)return void alert("Export is disabled when viewing another user's collection");let r="\ufeff";r+="Id,CardName,NumberOwn,Expansion,Pack,Rarity\n",this.cards.forEach(s=>{const a=this.getCardId(s),l=this.getOwnedCount(s),c=this.getCardRarityCode(s),u=c?this.rarityService.getSymbol(c):"Unknown",d=s.packs&&s.packs.length>0?s.packs[0]:"",h=s.label.eng.replace(/,/g,'""');r+=`${a},"${h}",${l},${s.set},"${d}",${u}\n`});const o=new Blob([r],{type:"text/csv;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="pokemon-tcg-collection.csv",i.click()}importCollection(r){var o=this;if(this.isViewingOther)return void alert("Import is disabled when viewing another user's collection");const i=r.target.files[0];if(i){const s=new FileReader;s.onload=function(){var a=y(function*(l){try{const d=(l.target?.result||"").split(/\r?\n/).filter(F=>F.trim().length>0);if(0===d.length)return void alert("CSV file appears to be empty.");const h=new Map;o.cards.forEach(F=>{const W=o.getCardId(F);h.set(o.normalizeId(W),W)});const f=o.parseCSVLine(d[0]),p=/(id|card|name|expansion|set|rarity|qty|quantity|owned|count|number|no)/i,g=f.some(F=>p.test(F)),m=g?1:0,v=g?o.buildHeaderMap(f):null;let M=0,w=0,k=0;for(let F=m;F<d.length;F++){const W=d[F];try{const Qt=o.parseCSVLine(W),{cardId:Ae,quantity:ct}=o.resolveCsvRow(Qt,v);if(!Ae){w++;continue}const Qn=Math.max(0,Math.floor(Number(ct))||0),Cn=h.get(o.normalizeId(Ae))||null;Cn?(Qn>0?o.ownedCards[Cn]=Qn:delete o.ownedCards[Cn],M++):(console.log(Ae),k++)}catch(Qt){console.error(`Error parsing line: ${W}`,Qt),w++}}if(o.saveOwnedCards(),o.currentUser)try{const F=yield o.supabaseService.bulkReplaceUserCollection(o.currentUser.id,o.ownedCards);if(F.success){let W=`Import completed!\n${M} cards updated`;W+="\nCollection synced to database successfully",k>0&&(W+=`\n${k} rows referenced unknown cards (skipped)`),w>0&&(W+=`\n${w} parse errors encountered`),yield o.loadOwnedCards(),alert(W)}else{console.error("\u274c Failed to sync collection to database:",F.error);let W=`Import completed!\n${M} cards updated locally`;W+=`\nDatabase sync failed: ${F.error}`,k>0&&(W+=`\n${k} unknown cards (skipped)`),w>0&&(W+=`\n${w} parse errors encountered`),alert(W)}}catch(F){console.error("\u274c Error during bulk sync:",F);let W=`Import completed!\n${M} cards updated locally`;W+="\nDatabase sync failed - please try again",k>0&&(W+=`\n${k} unknown cards (skipped)`),w>0&&(W+=`\n${w} parse errors encountered`),alert(W)}else{let F=`Import completed!\n${M} cards updated`;k>0&&(F+=`\n${k} unknown cards (skipped)`),w>0&&(F+=`\n${w} parse errors encountered`),alert(F)}}catch(c){console.error("Failed to import collection:",c),alert("Failed to import collection. Please check the CSV file format.")}});return function(l){return a.apply(this,arguments)}}(),s.readAsText(i)}}viewOtherCollection(){var r=this;return y(function*(){const o=(r.otherUsername||"").trim();if(!o)return void alert("Please enter a username");if(r.currentUser&&o===r.currentUser.username)return void r.backToMyCollection();const i=yield r.supabaseService.getProfileByUsername(o);i?(r.isViewingOther=!0,r.viewingUser=i,yield r.loadOwnedCardsForUser(i.id,i.username)):alert(`User '${o}' not found`)})()}backToMyCollection(){var r=this;return y(function*(){r.isViewingOther=!1,r.viewingUser=null,r.otherUsername="",r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}buildHeaderMap(r){const o={};return r.forEach((i,s)=>{const a=i.trim().toLowerCase();o[a]=s}),o}resolveCsvRow(r,o){const i=c=>{if(o)for(const u of c){const d=o[u];if(void 0!==d&&d>=0&&d<r.length){const h=(r[d]||"").trim();if(h)return h}}},s=i(["numberown","quantity","qty","owned","count","number own","number_owned"]);let a=0;void 0!==s?a=Math.max(0,Math.floor(Number(s)||0)):r.length>=3&&(a=Math.max(0,Math.floor(Number(r[2])||0)));let l=i(["id","cardid","card id"]);if(!l){let c=i(["set","expansion"]),u=i(["number","no","card number","card no","card#"]);if(!c&&r.length>=4&&(c=(r[3]||"").trim()),!u&&r.length>=1){const d=(r[1]||"").trim();/^\d+/.test(d)&&(u=d)}if(c&&u){const d=this.mapToSetCode(c),h=this.extractLeadingInt(u);d&&null!==h&&(l=`${d}-${h}`)}}if(!l&&r.length>0){const c=(r[0]||"").trim();c&&(l=c)}return{cardId:l||null,quantity:a}}extractLeadingInt(r){const o=(r||"").match(/\d+/);return o?parseInt(o[0],10):null}mapToSetCode(r){const i=(r||"").trim().toUpperCase();if("PROMO-A"===i)return"P-A";const s=this.sets.find(l=>(l.code||"").toUpperCase()===i);if(s)return s.code;const a=this.sets.find(l=>(l.name||"").toUpperCase()===i);return a?a.code:null}normalizeId(r){let o=(r||"").trim().toUpperCase();return o=o.replace(/^PROMO-A(?=-)/,"P-A"),o}parseCSVLine(r){const o=[];let i="",s=!1;for(let a=0;a<r.length;a++){const l=r[a];'"'===l?s=!s:","!==l||s?i+=l:(o.push(i),i="")}return o.push(i),o}getCardImageUrl(r){return this.imageService.getCardImageUrl(r)}getCardDisplayName(r){return`${r.set}-${r.number} \u2013 ${r.label.eng}`}onImageError(r,o){console.error("\u274c Image failed to load:",o.imageName),r.target.src=this.imageService.getPlaceholderImageUrl()}getGroupedCards(){if("all"!==this.selectedSet&&"none"!==this.groupBy)return this.getGroupedCardsByCategory();const r={};this.filteredCards.forEach(a=>{const l=a.set;r[l]||(r[l]=[]),r[l].push(a)});const o=(a,l)=>{const c=a.match(/^([A-Z]+)(\d+)([a-z]*)$/),u=l.match(/^([A-Z]+)(\d+)([a-z]*)$/);if(c&&u){if(c[1]!==u[1])return c[1].localeCompare(u[1]);const d=parseInt(c[2],10),h=parseInt(u[2],10);return d!==h?d-h:(c[3]||"").localeCompare(u[3]||"")}return a.localeCompare(l)},s=(a,l)=>a.number!==l.number?a.number-l.number:a.label.eng.localeCompare(l.label.eng);return Object.keys(r).sort((a,l)=>{const c=h=>this.isSpecialSet(h),u=c(a),d=c(l);return u&&!d?1:!u&&d?-1:"latest"===this.sortBy?o(l,a):o(a,l)}).map(a=>({groupTitle:a,cards:r[a].sort(s)}))}getGroupedCardsByCategory(){const r={};this.filteredCards.forEach(s=>{let a;switch(this.groupBy){case"rarity":const l=this.getCardRarityCode(s);a=`${l?this.rarityService.getSymbol(l):"Unknown"} ${l?this.rarityService.getDisplayName(l):"Unknown"}`;break;case"pack":a=s.packs&&s.packs.length>0?s.packs[0]:"No Pack";break;case"type":a=s.types&&s.types.length>0?s.types[0]:"No Type";break;default:a="All Cards"}r[a]||(r[a]=[]),r[a].push(s)});const o=Object.keys(r).sort((s,a)=>{if("rarity"===this.groupBy){const l=c=>{const u=c.split(" ")[0];return this.rarityService.getRarityOrder(u)||999};return l(s)-l(a)}return s.localeCompare(a)}),i=(s,a)=>s.number!==a.number?s.number-a.number:s.label.eng.localeCompare(a.label.eng);return o.map(s=>({groupTitle:s,cards:r[s].sort(i)}))}getGroupDisplayName(r,o){const i=this.getSetName(r);return i&&i!==r?`${r} - ${i}`:`Set ${r}`}getGroupCollectedCount(r){return`${r.filter(s=>this.getOwnedCount(s)>0).length}/${r.length}`}setOwnership(r){this.ownershipFilter!==r&&(this.ownershipFilter=r,this.applyFilters(),this.cdr.detectChanges())}isRaritySelected(r){return this.selectedRarities.includes(r)}toggleRarity(r){const o=this.selectedRarities.indexOf(r);o>=0?this.selectedRarities.splice(o,1):this.selectedRarities.push(r),this.applyFilters(),this.cdr.detectChanges()}clearRarity(){this.selectedRarities.length>0&&(this.selectedRarities=[],this.applyFilters(),this.cdr.detectChanges())}isTypeSelected(r){return this.selectedTypes.includes(r)}toggleType(r){const o=this.selectedTypes.indexOf(r);o>=0?this.selectedTypes.splice(o,1):this.selectedTypes.push(r),this.applyFilters(),this.cdr.detectChanges()}clearTypes(){this.selectedTypes.length>0&&(this.selectedTypes=[],this.applyFilters(),this.cdr.detectChanges())}openCardModal(r){this.selectedCardForModal=r,document.body.style.overflow="hidden",document.addEventListener("keydown",this.handleModalKeydown)}closeCardModal(){this.selectedCardForModal=null,document.body.style.overflow="auto",document.removeEventListener("keydown",this.handleModalKeydown)}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){const r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);window.scrollTo({top:r,behavior:"smooth"})}getSetElements(){return Array.from(document.querySelectorAll(".cards-container .card-group"))}getCurrentSetIndex(r=80){const o=window.scrollY||window.pageYOffset||0,i=this.getSetElements();let s=-1;for(let a=0;a<i.length&&i[a].getBoundingClientRect().top+window.scrollY-r<=o;a++)s=a;return s}scrollToNextSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),i=Math.min(o+1,r.length-1);if(i>=0){const a=r[i].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}}scrollToPrevSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),a=r[Math.max(o-1,0)].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}ngOnDestroy(){this.selectedCardForModal&&(document.removeEventListener("keydown",this.handleModalKeydown),document.body.style.overflow="auto")}};let n=e;return e.\u0275fac=function(o){return new(o||e)(A(iD),A(sD),A(NV),A(Da),A(St),A(Us),A(zD))},e.\u0275cmp=uo({type:e,selectors:[["app-card-collection"]],decls:96,vars:42,consts:[[1,"collection-container"],[1,"collection-actions"],[1,"actions-left"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","import-btn"],["type","file","accept",".csv","hidden","",3,"change"],[1,"btn","btn-secondary",3,"disabled","click"],["class","view-other-banner","style","margin-bottom:12px; padding:10px 14px; border-radius:12px; background:rgba(46,204,113,0.12); border:1px solid rgba(46,204,113,0.35); display:flex; align-items:center; justify-content:space-between; gap:12px;",4,"ngIf"],["role","region","aria-label","Collection filters",1,"filters-panel"],[1,"filters-row"],["type","text","placeholder","Search cards\u2026","aria-label","Search cards",1,"filter-input",3,"ngModel","ngModelChange","input"],[1,"filters-row","wrap","sets-row"],[1,"sort-group"],["for","series-select"],["id","series-select","aria-label","Select series",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["for","set-select"],["id","set-select","aria-label","Select set",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["for","pack-select"],["id","pack-select","aria-label","Select pack",1,"filter-select","compact",3,"disabled","ngModel","ngModelChange","change"],[1,"filters-row","rarity-row"],["for","rarity-chips",1,"filter-label"],["id","rarity-chips","aria-label","Rarity filter",1,"segmented","multi","chips-scroll"],["type","button","title","All rarities",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","types-row"],["for","types-chips",1,"filter-label"],["id","types-chips","aria-label","Types filter",1,"segmented","multi","chips-scroll"],["type","button","title","All types",1,"chip",3,"click"],["type","button","class","chip type-chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","wrap"],["for","sort-select"],["id","sort-select","aria-label","Sort order",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","latest"],["value","oldest"],["class","sort-group",4,"ngIf"],["role","tablist","aria-label","Ownership filter",1,"segmented","ownership"],["type","button",3,"click"],[1,"row-spacer"],["type","button","aria-label","Reset filters",1,"btn","btn-outline","reset-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","sync-progress",4,"ngIf"],["class","cards-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["aria-label","Collection navigation controls",1,"fab-stack"],["type","button","title","Top",1,"fab",3,"click"],["type","button","title","Previous set",1,"fab",3,"click"],["type","button","title","Next set",1,"fab",3,"click"],["type","button","title","Bottom",1,"fab",3,"click"],["aria-label","Filter controls",1,"fab-stack-left"],["type","button","title","Filters",1,"fab","mobile-only",3,"click"],["type","button","title","Copy For Trade",1,"fab","mobile-only",3,"disabled","click"],["type","button","title","View Others Collection",1,"fab","mobile-only",3,"disabled","click"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"view-other-banner",2,"margin-bottom","12px","padding","10px 14px","border-radius","12px","background","rgba(46,204,113,0.12)","border","1px solid rgba(46,204,113,0.35)","display","flex","align-items","center","justify-content","space-between","gap","12px"],[1,"btn","btn-outline",3,"click"],[3,"value"],["type","button",1,"chip",3,"title","click"],["type","button",1,"chip","type-chip",3,"title","click"],[4,"ngIf","ngIfElse"],["normalType",""],[1,"trainer-label",3,"ngClass"],[1,"type-icon",3,"src","alt"],["for","group-select"],["id","group-select","aria-label","Group by",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","none"],["value","rarity"],["value","pack"],["value","type"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"btn","btn-primary",3,"click"],[1,"sync-progress"],[1,"sync-message"],[1,"sync-icon"],[1,"sync-text"],[1,"sync-title"],["class","sync-count",4,"ngIf"],[1,"sync-count"],[1,"cards-container"],["class","card-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-group"],[1,"group-header"],[1,"group-title"],[1,"group-stats"],[1,"group-count"],[1,"cards-grid"],["class","card-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-item"],[1,"card-image"],["loading","lazy",1,"pokemon-card-img",2,"cursor","pointer",3,"src","alt","error","click"],[1,"card-info"],[1,"card-title"],[1,"ownership-controls"],[1,"count-btn","decrease",3,"disabled","click"],["displayCount",""],[1,"count-btn","increase",3,"disabled","click"],["type","number","min","0",1,"count-input",3,"ngModel","ngModelChange","keydown.enter","keydown","keydown.escape","blur"],["type","button",1,"count-display",3,"disabled","click"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-backdrop",3,"click"],[1,"modal-content","view-others-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"view-others-config"],[1,"config-section"],["for","other-username-input",1,"config-label"],["type","text","id","other-username-input","placeholder","Enter username to view their collection\u2026",1,"config-input-wide",3,"ngModel","ngModelChange","keydown.enter"],[1,"config-hint"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],[1,"modal-content","trade-modal",3,"click"],[1,"trade-config"],["for","exclude-special-toggle",1,"config-label"],["type","checkbox","id","exclude-special-toggle",3,"ngModel","ngModelChange"],[1,"config-label"],[1,"rarity-chips"],["type","button",1,"chip",3,"click"],["for","trade-qty-min",1,"config-label"],["type","number","id","trade-qty-min","min","1","max","10",1,"config-input",3,"ngModel","ngModelChange"],["for","friend-code-input",1,"config-label"],["type","text","id","friend-code-input","placeholder","Enter your friend code to include in the copy\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],["for","trade-template-text",1,"config-label"],["id","trade-template-text","rows","2","placeholder","Add an extra note to include in the copied text\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],[1,"modal-overlay",3,"click"],[1,"modal-content","card-modal",3,"click"],["aria-label","Close modal",1,"modal-close",3,"click"],[1,"card-modal-image"],[1,"modal-card-image",3,"src","alt"],[1,"card-modal-info"],["class","modal-pack-badges",4,"ngIf"],[1,"modal-pack-badges"],["class","pack-badge",4,"ngFor","ngForOf"],[1,"pack-badge"]],template:function(o,i){1&o&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),H("click",function(){return i.exportCollection()}),I(4," \u{1f4e4} Export Collection "),C(),_(5,"label",4),I(6," \u{1f4e5} Import Collection "),_(7,"input",5),H("change",function(a){return i.importCollection(a)}),C()(),_(8,"button",6),H("click",function(){return i.openTradeModal()}),I(9," \u{1f4cb} Copy For Trade "),C(),_(10,"button",6),H("click",function(){return i.openViewOthersModal()}),I(11," \u{1f464} View Others Collection "),C()()(),ae(12,FV,8,1,"div",7),_(13,"div",8)(14,"div",9)(15,"input",10),H("ngModelChange",function(a){return i.searchTerm=a})("input",function(){return i.onSearchChange()}),C()(),_(16,"div",11)(17,"div",12)(18,"label",13),I(19,"Series"),C(),_(20,"select",14),H("ngModelChange",function(a){return i.selectedSeries=a})("change",function(){return i.onSeriesChange()}),_(21,"option",15),I(22,"All Series"),C(),ae(23,LV,2,2,"option",16),C()(),_(24,"div",12)(25,"label",17),I(26),C(),_(27,"select",18),H("ngModelChange",function(a){return i.selectedSet=a})("change",function(){return i.onSetChange()}),_(28,"option",15),I(29),C(),ae(30,jV,2,2,"option",16),C()(),_(31,"div",12)(32,"label",19),I(33),C(),_(34,"select",20),H("ngModelChange",function(a){return i.selectedPack=a})("change",function(){return i.applyFilters()}),_(35,"option",15),I(36),C(),ae(37,VV,2,2,"option",16),C()()(),_(38,"div",21)(39,"label",22),I(40,"Rarity"),C(),_(41,"div",23)(42,"button",24),H("click",function(){return i.clearRarity()}),I(43,"ALL"),C(),ae(44,$V,2,4,"button",25),C()(),_(45,"div",26)(46,"label",27),I(47,"Types"),C(),_(48,"div",28)(49,"button",29),H("click",function(){return i.clearTypes()}),I(50," ALL "),C(),ae(51,GV,4,6,"button",30),C()(),_(52,"div",31)(53,"div",12)(54,"label",32),I(55,"Sort By"),C(),_(56,"select",33),H("ngModelChange",function(a){return i.sortBy=a})("change",function(){return i.applyFilters()}),_(57,"option",34),I(58,"Latest Set"),C(),_(59,"option",35),I(60,"Oldest Set"),C()()(),ae(61,qV,12,1,"div",36),_(62,"div",37)(63,"button",38),H("click",function(){return i.setOwnership("all")}),I(64,"ALL"),C(),_(65,"button",38),H("click",function(){return i.setOwnership("missing")}),I(66,"MISSING"),C(),_(67,"button",38),H("click",function(){return i.setOwnership("owned")}),I(68,"OWNED"),C()(),an(69,"div",39),_(70,"button",40),H("click",function(){return i.clearFilters()}),I(71,"Reset"),C()()(),ae(72,WV,4,0,"div",41),ae(73,KV,5,1,"div",42),ae(74,YV,8,2,"div",43),ae(75,t$,2,2,"div",44),ae(76,n$,9,0,"div",45),_(77,"div",46)(78,"button",47),H("click",function(){return i.scrollToTop()}),I(79,"\u2912"),C(),_(80,"button",48),H("click",function(){return i.scrollToPrevSet()}),I(81,"\u2191"),C(),_(82,"button",49),H("click",function(){return i.scrollToNextSet()}),I(83,"\u2193"),C(),_(84,"button",50),H("click",function(){return i.scrollToBottom()}),I(85,"\u2913"),C()(),_(86,"div",51)(87,"button",52),H("click",function(){return i.toggleFilters()}),I(88,"\u{1f50e}"),C(),_(89,"button",53),H("click",function(){return i.openTradeModal()}),I(90,"\u{1f4cb}"),C(),_(91,"button",54),H("click",function(){return i.openViewOthersModal()}),I(92,"\u{1f464}"),C()(),ae(93,r$,20,2,"div",55),ae(94,i$,45,7,"div",55),ae(95,l$,10,4,"div",56),C()),2&o&&(x(8),$("disabled",i.isViewingOther),x(2),$("disabled",i.isViewingOther),x(2),$("ngIf",i.isViewingOther),x(1),bt("collapsed",!i.filtersOpen),x(2),$("ngModel",i.searchTerm),x(5),$("ngModel",i.selectedSeries),x(3),$("ngForOf",i.availableSeries),x(3),Xe("Set ","all"!==i.selectedSeries?"(in "+i.selectedSeries+")":"",""),x(1),$("ngModel",i.selectedSet),x(2),kt("all"!==i.selectedSeries?"All Sets in "+i.selectedSeries:"All Sets"),x(1),$("ngForOf",i.availableSets),x(3),Xe("Pack ","all"!==i.selectedSet?"(in "+i.getSetName(i.selectedSet)+")":"(select a set first)",""),x(1),$("disabled","all"===i.selectedSet)("ngModel",i.selectedPack),x(2),kt("all"!==i.selectedSet?"All Packs in "+i.getSetName(i.selectedSet):"Select a set first"),x(1),$("ngForOf",i.availablePacks),x(5),bt("active",0===i.selectedRarities.length),x(2),$("ngForOf",i.availableRaritySymbols),x(5),bt("active",0===i.selectedTypes.length),x(2),$("ngForOf",i.availableTypes),x(5),$("ngModel",i.sortBy),x(5),$("ngIf","all"!==i.selectedSet),x(2),bt("active","all"===i.ownershipFilter),x(2),bt("active","missing"===i.ownershipFilter),x(2),bt("active","owned"===i.ownershipFilter),x(5),$("ngIf",i.loading),x(1),$("ngIf",i.error),x(1),$("ngIf",i.syncingCards),x(1),$("ngIf",!i.loading&&!i.error),x(1),$("ngIf",!i.loading&&!i.error&&0===i.getGroupedCards().length),x(11),Ut("aria-pressed",i.filtersOpen),x(2),$("disabled",i.isViewingOther),x(2),$("disabled",i.isViewingOther),x(2),$("ngIf",i.showViewOthersModal),x(1),$("ngIf",i.showTradeModal),x(1),$("ngIf",i.selectedCardForModal))},dependencies:[$h,Uh,Gs,Nw,Lw,Qs,wf,oc,yc,ac,If,xf,na],styles:['.chip.active[_ngcontent-%COMP%]   .trainer-item[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-tool[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-supporter[_ngcontent-%COMP%]{color:#fff!important}.trainer-item[_ngcontent-%COMP%], .trainer-tool[_ngcontent-%COMP%], .trainer-supporter[_ngcontent-%COMP%]{font-family:Roboto Condensed,Arial Narrow,sans-serif;font-weight:1000;font-style:italic;font-size:13px;text-transform:uppercase;letter-spacing:1px;-webkit-font-smoothing:antialiased;display:inline-block;margin:0 2px;-webkit-user-select:none;user-select:none;transition:filter .15s ease-in-out;filter:brightness(1.12)}.trainer-item[_ngcontent-%COMP%]{color:#2596be}.trainer-tool[_ngcontent-%COMP%]{color:#78619a}.trainer-supporter[_ngcontent-%COMP%]{color:#dc6c40}.collection-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:transparent;min-height:100vh;color:#fff}.sync-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,#1a4d3a 0%,#0f2d1f 100%);border:1px solid #28a745;border-radius:10px;padding:16px 22px;margin-bottom:20px;box-shadow:0 4px 18px #28a74540}.sync-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.sync-icon[_ngcontent-%COMP%]{font-size:22px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.sync-text[_ngcontent-%COMP%]{flex:1}.sync-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#28a745;margin-bottom:2px}.sync-count[_ngcontent-%COMP%]{font-size:12px;color:#9fb8aa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.collection-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:30px;flex-wrap:wrap}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.view-other-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.view-other-controls[_ngcontent-%COMP%]   .search-input.compact[_ngcontent-%COMP%]{width:auto;max-width:240px;min-width:200px;padding:8px 12px;border-radius:8px}@media (max-width: 768px){.collection-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{justify-content:space-between}}.import-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d;border:1px solid #404040}.filters-panel[_ngcontent-%COMP%]{border:1px solid #666;border-radius:10px;padding:14px;margin-bottom:20px;background-color:#12151c;background:#12151c;box-shadow:0 8px 18px #00000059}.filters-header[_ngcontent-%COMP%]{color:#ddd;font-weight:600;margin-bottom:10px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.filters-row.wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.rarity-row[_ngcontent-%COMP%]{align-items:flex-start;gap:10px}.filters-row.rarity-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filters-row.footer[_ngcontent-%COMP%]{justify-content:space-between}.filter-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.filter-select.compact[_ngcontent-%COMP%]{width:240px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.sort-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#cfcfcf;margin-right:8px}.segmented[_ngcontent-%COMP%]{display:inline-flex;background:#1b1e24;border:1px solid #4a4f5a;border-radius:6px;overflow:hidden}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;background:transparent;color:#cfd6e4;border:none;cursor:pointer}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-left:1px solid #4a4f5a}.segmented[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#737e91;color:#fff}.segmented.multi[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;background:transparent;border:none;overflow-x:auto;padding:4px 2px 2px;-webkit-overflow-scrolling:touch}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#3a3f48;border-radius:4px}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{border:1px solid #3d4350;background:#171a20;color:#cfd6e4;border-radius:999px;padding:6px 10px;font-size:12px;line-height:1}.segmented.multi[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);border-color:#7056b1;color:#fff}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4b90ff;outline-offset:2px}.type-chip[_ngcontent-%COMP%]{padding:6px 8px!important;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.type-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:contain}.ownership[_ngcontent-%COMP%]{margin-left:4px}.row-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.reset-btn[_ngcontent-%COMP%]{white-space:nowrap}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;align-items:center;justify-content:center;padding:16px}.modal-content[_ngcontent-%COMP%]{width:min(520px,92vw);max-height:85vh;overflow:auto;background:#121317;border:1px solid #3e4654;border-radius:10px;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #2c3240}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#eaeaea}.modal-close[_ngcontent-%COMP%]{background:transparent;border:none;color:#aaa;font-size:18px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #2c3240}.trade-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.trade-config[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.config-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.config-label[_ngcontent-%COMP%]{font-weight:600;color:#ddd;font-size:14px}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #4a4f5a;border-radius:6px;background:#1b1e24;color:#cfd6e4;cursor:pointer;transition:all .2s ease}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.rarity-chips[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:#c7a4ff;border-color:#c7a4ff;color:#fff}.config-input[_ngcontent-%COMP%]{width:80px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-input-wide[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-hint[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:420px;margin:0 auto}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #444;border-radius:25px;background-color:#333;color:#fff;font-size:16px;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 10px #007bff4d}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ccc;letter-spacing:.5px}.filter-dependency[_ngcontent-%COMP%]{font-size:11px;color:#007bff;font-weight:400;text-transform:none;font-style:italic}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #444;border-radius:8px;background-color:#333;color:#fff;font-size:14px;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:hover{border-color:#555;background-color:#3a3a3a}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff33}.filter-select[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background-color:#2a2a2a;border-color:#333;color:#888}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.results-info[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:12px 20px;border-radius:8px;text-align:center;border:1px solid #333}.results-text[_ngcontent-%COMP%]{color:#ccc;font-size:14px;font-weight:500}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #333;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.cards-container[_ngcontent-%COMP%]{width:100%}.card-group[_ngcontent-%COMP%]{margin-bottom:40px}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:2px solid #333;flex-wrap:wrap;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin:0;text-shadow:1px 1px 2px rgba(0,0,0,.5);flex:1;min-width:280px;position:relative;padding-left:30px;line-height:1.3}.group-title[_ngcontent-%COMP%]:before{content:"\\1f4cb";position:absolute;left:0;top:50%;transform:translateY(-50%);font-size:1.2rem}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-shrink:0}.group-count[_ngcontent-%COMP%]{color:#ccc;font-size:14px;padding:4px 8px;background-color:#333;border-radius:4px;white-space:nowrap}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:18px}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;overflow:hidden;transition:transform .2s ease}.card-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2 / 3;overflow:hidden;padding:10px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.pokemon-card-img[_ngcontent-%COMP%]{width:90%;object-fit:cover;object-position:center;border-radius:10px;transition:transform .3s ease,opacity .3s ease;background-color:#222}.card-item[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{transform:scale(1.05)}.pokemon-card-img[_ngcontent-%COMP%]:not([src]), .pokemon-card-img[src=""][_ngcontent-%COMP%]{opacity:.5;background:linear-gradient(45deg,#333,#555,#333);background-size:200% 200%;animation:_ngcontent-%COMP%_loading-shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loading-shimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.card-item.no-quantity[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.9}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(0%) opacity(.8)}.card-item.no-quantity[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{color:#888}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]:hover   .count-display[_ngcontent-%COMP%]{color:#bbb}.card-info[_ngcontent-%COMP%]{padding:10px 0;text-align:center}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pack-badges[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.pack-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:2px 6px;border-radius:10px;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.ownership-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.count-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #555;border-radius:4px;background-color:#444;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;transition:all .2s ease}.count-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#555;border-color:#666}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.count-btn.decrease[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;border-color:#dc3545}.count-btn.increase[_ngcontent-%COMP%]:hover{background-color:#28a745;border-color:#28a745}.count-display[_ngcontent-%COMP%]{min-width:32px;padding:4px 10px;border-radius:6px;border:1px dashed #666;background:rgba(51,51,51,.65);color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.count-display[_ngcontent-%COMP%]:hover, .count-display[_ngcontent-%COMP%]:focus-visible{border-color:#007bff;background:rgba(0,123,255,.2);outline:none}.count-input[_ngcontent-%COMP%]{width:56px;padding:4px 8px;border-radius:6px;border:1px solid #777;background:rgba(24,24,24,.95);color:#fff;font-size:14px;font-weight:600;text-align:center;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.count-input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 6px #007bff4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.pokemon-card-img.lazy-loading[_ngcontent-%COMP%]{opacity:.6;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.pokemon-card-img.lazy-loaded[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}.pokemon-card-img.lazy-error[_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 1200px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (max-width: 768px){.collection-container[_ngcontent-%COMP%]{padding:15px}.filters-panel[_ngcontent-%COMP%]{border-radius:10px;padding:12px}.filters-header[_ngcontent-%COMP%]{margin-bottom:8px}.filters-row[_ngcontent-%COMP%]{gap:10px}.filter-select.compact[_ngcontent-%COMP%]{width:100%}.filter-input[_ngcontent-%COMP%]{min-width:0}.rarity-row[_ngcontent-%COMP%], .types-row[_ngcontent-%COMP%]{flex-direction:column}.chips-scroll[_ngcontent-%COMP%]{width:100%}.ownership[_ngcontent-%COMP%]{width:100%;justify-content:space-between;display:flex}.collection-actions[_ngcontent-%COMP%]   .actions-left[_ngcontent-%COMP%], .filters-panel.collapsed[_ngcontent-%COMP%]{display:none}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}.ownership-controls[_ngcontent-%COMP%]{gap:8px}.filters-section[_ngcontent-%COMP%]{padding:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-box[_ngcontent-%COMP%]{max-width:100%}.group-header[_ngcontent-%COMP%]{padding:10px 0}.group-title[_ngcontent-%COMP%]{font-size:1.3rem;padding-left:24px}.group-title[_ngcontent-%COMP%]:before{font-size:1rem}}@media (max-width: 540px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.filters-row[_ngcontent-%COMP%]{margin-bottom:8px}.reset-btn[_ngcontent-%COMP%]{width:100%}.count-display[_ngcontent-%COMP%], .count-input[_ngcontent-%COMP%]{width:48px}.filters-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.filter-label[_ngcontent-%COMP%]{font-size:12px}.group-title[_ngcontent-%COMP%]{font-size:1.15rem}.group-title[_ngcontent-%COMP%]:before{font-size:.9rem}}.fab-stack[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:24px;display:flex;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}.fab[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:1px solid #3a5f8f;background:linear-gradient(135deg,rgb(91,168,255),rgba(34,46,70,.85));color:#e7eefc;font-size:18px;cursor:pointer;box-shadow:0 10px 24px #070c1859;display:inline-flex;align-items:center;justify-content:center;transition:transform .14s ease,box-shadow .14s ease,border-color .14s ease}.fab[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 14px 28px #070c1873;border-color:#5ba8ff99}.fab-stack-left[_ngcontent-%COMP%]{position:fixed;left:24px;bottom:24px;display:none;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{right:16px;bottom:16px;gap:8px}.fab[_ngcontent-%COMP%]{width:44px;height:44px}.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.fab-stack-left[_ngcontent-%COMP%]{display:flex;left:16px;bottom:16px}}.fab.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex!important}.fab-stack-left[_ngcontent-%COMP%]{display:flex!important}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px}.modal-content.card-modal[_ngcontent-%COMP%]{background:#2a2d3a;border-radius:12px;max-width:500px;max-height:90vh;width:100%;position:relative;overflow:hidden;box-shadow:0 20px 40px #00000080}.modal-close[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:rgba(0,0,0,.7);border:none;border-radius:50%;width:32px;height:32px;color:#fff;font-size:18px;cursor:pointer;z-index:10001;display:flex;align-items:center;justify-content:center;transition:background .2s ease}.modal-close[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.9)}.card-modal-image[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px 20px 10px}.modal-card-image[_ngcontent-%COMP%]{max-width:100%;height:auto;max-height:60vh;border-radius:8px;box-shadow:0 8px 16px #0000004d}.card-modal-info[_ngcontent-%COMP%]{padding:10px 20px 20px;text-align:center}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px;font-weight:600}.modal-pack-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}.modal-pack-badges[_ngcontent-%COMP%]   .pack-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content.card-modal[_ngcontent-%COMP%]{max-width:100%;max-height:95vh}.modal-card-image[_ngcontent-%COMP%]{max-height:70vh}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}'],changeDetection:0}),n})();function u$(n,e){if(1&n&&(_(0,"div",19),I(1),C()),2&n){const t=U();x(1),Xe(" ",t.error," ")}}function d$(n,e){1&n&&an(0,"span",20)}function p$(n,e){if(1&n){const t=Pt();_(0,"div",16)(1,"span",17),I(2),C(),_(3,"button",18),H("click",function(){return Ce(t),be(U().signOut())}),I(4,"Sign Out"),C()()}if(2&n){const t=U();x(2),Xe("\u{1f464} ",t.currentUser.username,"")}}function g$(n,e){if(1&n&&(_(0,"div",19)(1,"span",17),I(2),C()()),2&n){const t=U();x(2),Xe("\u{1f464} ",t.currentUser.username,"")}}function m$(n,e){if(1&n){const t=Pt();_(0,"button",20),H("click",function(){Ce(t);const o=U();return o.signOut(),be(o.closeMobileMenu())}),I(1," \u{1f6aa} Sign Out "),C()}}const y$=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:(()=>{const e=class{constructor(r,o,i){this.supabaseService=r,this.router=o,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/collection"}ngOnInit(){this.supabaseService.isSignedIn()?this.router.navigate([this.returnUrl]):this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/collection"}get isFormValid(){return this.username.trim().length>0&&this.password.trim().length>0}onSubmit(){var r=this;return y(function*(){if(r.isFormValid){r.loading=!0,r.error="";try{const{user:o,error:i}=yield r.supabaseService.signIn(r.username.trim(),r.password.trim());i?(r.error=i,i.includes("Please wait a moment")&&(r.error+=" This usually resolves itself quickly.")):o&&r.router.navigate([r.returnUrl])}catch(o){if(console.error("Sign in error:",o),o&&"object"==typeof o&&"message"in o){const i=o.message;r.error=i.includes("NavigatorLockAcquireTimeoutError")||i.includes("lock")?"Please wait a moment and try signing in again.":"An unexpected error occurred"}else r.error="An unexpected error occurred"}finally{r.loading=!1}}else r.error="Please enter both username and password"})()}onUsernameChange(){this.error=""}onPasswordChange(){this.error=""}};let n=e;return e.\u0275fac=function(o){return new(o||e)(A(Da),A(St),A(Oo))},e.\u0275cmp=uo({type:e,selectors:[["app-signin"]],decls:26,vars:8,consts:[[1,"signin-container"],[1,"signin-card"],[1,"signin-header"],[1,"signin-title"],[1,"signin-subtitle"],[1,"signin-form",3,"ngSubmit"],["signinForm","ngForm"],[1,"form-group"],["for","username"],["id","username","name","username","type","text","placeholder","Enter your username","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["usernameInput","ngModel"],["for","password"],["id","password","name","password","type","password","placeholder","Enter your password","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["passwordInput","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"signin-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"signin-footer"],[1,"invite-note"],[1,"error-message"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),I(4,"\u{1f0cf} Pokemon TCG Pocket"),C(),_(5,"p",4),I(6,"Collection Manager"),C()(),_(7,"form",5,6),H("ngSubmit",function(){return i.onSubmit()}),_(9,"div",7)(10,"label",8),I(11,"Username"),C(),_(12,"input",9,10),H("ngModelChange",function(a){return i.username=a})("input",function(){return i.onUsernameChange()}),C()(),_(14,"div",7)(15,"label",11),I(16,"Password"),C(),_(17,"input",12,13),H("ngModelChange",function(a){return i.password=a})("input",function(){return i.onPasswordChange()}),C()(),ae(19,u$,2,1,"div",14),_(20,"button",15),ae(21,d$,1,0,"span",16),I(22),C()(),_(23,"div",17)(24,"p",18),I(25," \u{1f4e7} This is an invite-only system. Contact your administrator if you need access. "),C()()()()),2&o){const s=wl(8);x(12),$("ngModel",i.username)("disabled",i.loading),x(5),$("ngModel",i.password)("disabled",i.loading),x(2),$("ngIf",i.error),x(1),$("disabled",i.loading||!s.valid),x(1),$("ngIf",i.loading),x(1),Xe(" ",i.loading?"Signing In...":"Sign In"," ")}},dependencies:[Gs,Mw,Qs,ac,hw,_c,na,mc],styles:[".signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px}.signin-card[_ngcontent-%COMP%]{background:#333;border-radius:12px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 30px #0000004d;border:1px solid #444}.signin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signin-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.signin-subtitle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin:0;opacity:.8}.signin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #555;border-radius:6px;background-color:#444;color:#fff;font-size:16px;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;background-color:#555}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:#888}.error-message[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:10px 12px;border-radius:6px;font-size:14px;text-align:center;margin-top:-10px}.signin-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}.signin-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px)}.signin-btn[_ngcontent-%COMP%]:disabled{background-color:#666;cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signin-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.invite-note[_ngcontent-%COMP%]{color:#888;font-size:12px;line-height:1.4;margin:0;padding:15px;background-color:#2a2a2a;border-radius:6px;border-left:3px solid #007bff}@media (max-width: 480px){.signin-container[_ngcontent-%COMP%]{padding:10px}.signin-card[_ngcontent-%COMP%]{padding:30px 20px}.signin-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),n})()},{path:"",component:(()=>{const e=class{constructor(r,o){this.supabaseService=r,this.router=o,this.currentUser=null,this.appVersion="1.3.2",this.isMobileMenuOpen=!1}ngOnInit(){this.supabaseService.currentUser$.subscribe(r=>{this.currentUser=r}),this.router.events.subscribe(()=>{this.isMobileMenuOpen=!1})}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}};let n=e;return e.\u0275fac=function(o){return new(o||e)(A(Da),A(St))},e.\u0275cmp=uo({type:e,selectors:[["app-main-layout"]],decls:26,vars:7,consts:[[1,"app-layout"],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],[1,"nav-center","desktop-only"],[1,"nav-links"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],["routerLink","/collection","routerLinkActive","active",1,"nav-link"],["class","nav-user desktop-only",4,"ngIf"],["type","button","aria-controls","mobileMenu","aria-label","Menu",1,"hamburger","mobile-only",3,"click"],["id","mobileMenu",1,"mobile-menu","mobile-only"],["class","mobile-menu-header",4,"ngIf"],["routerLink","/dashboard","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/collection","routerLinkActive","active",1,"mobile-link",3,"click"],["class","mobile-link signout",3,"click",4,"ngIf"],[1,"main-content"],[1,"nav-user","desktop-only"],[1,"username"],[1,"btn-signout",3,"click"],[1,"mobile-menu-header"],[1,"mobile-link","signout",3,"click"]],template:function(o,i){1&o&&(_(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"h2"),I(5,"Pokemon TCGP Collector"),C(),_(6,"p"),I(7),C()(),_(8,"div",4)(9,"div",5)(10,"a",6),I(11," \u{1f4ca} Dashboard "),C(),_(12,"a",7),I(13," \u{1f5c2}\ufe0f Collection "),C()()(),ae(14,p$,5,1,"div",8),_(15,"button",9),H("click",function(){return i.toggleMobileMenu()}),I(16," \u2630 "),C()(),_(17,"div",10),ae(18,g$,3,1,"div",11),_(19,"a",12),H("click",function(){return i.closeMobileMenu()}),I(20," \u{1f4ca} Dashboard "),C(),_(21,"a",13),H("click",function(){return i.closeMobileMenu()}),I(22," \u{1f5c2}\ufe0f Collection "),C(),ae(23,m$,2,0,"button",14),C()(),_(24,"main",15),an(25,"router-outlet"),C()()),2&o&&(x(7),Xe("v",i.appVersion,""),x(7),$("ngIf",i.currentUser),x(1),Ut("aria-expanded",i.isMobileMenuOpen),x(2),bt("open",i.isMobileMenuOpen),x(1),$("ngIf",i.currentUser),x(5),$("ngIf",i.currentUser))},dependencies:[Gs,Pc,Bc,J0],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#1d1b1b}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:0 20px;box-shadow:0 2px 10px #0000001a;position:relative}.nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff}.nav-brand[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f0f0f0;opacity:.9;font-size:.95rem}.nav-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;border-radius:5px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:0 2px 5px #0003}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.username[_ngcontent-%COMP%]{color:#f0f0f0;font-size:14px;font-weight:500}.btn-signout[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background-color:transparent;color:#fff;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-signout[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#1d1b1b}.desktop-only[_ngcontent-%COMP%]{display:flex}.mobile-only[_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.35);color:#fff;border-radius:6px;padding:6px 10px;font-size:18px;cursor:pointer}.mobile-menu[_ngcontent-%COMP%]{display:none!important;position:absolute;right:12px;top:100%;margin-top:8px;width:220px;z-index:100;flex-direction:column;gap:8px;padding:10px 12px 12px;border:1px solid rgba(255,255,255,.16);border-radius:10px;background:#1b1f2a;box-shadow:0 10px 28px #00000059}.mobile-menu.open[_ngcontent-%COMP%]{display:flex!important}.mobile-menu[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin-bottom:4px;display:inline-block;opacity:.9}.mobile-link[_ngcontent-%COMP%]{text-align:left;color:#fff;text-decoration:none;padding:10px 12px;border:1px solid rgba(255,255,255,.12);border-radius:6px;background:rgba(255,255,255,.05);font-size:14px}.mobile-link.signout[_ngcontent-%COMP%]{border-color:#dc3545;background:rgba(220,53,69,.15)}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.nav-container[_ngcontent-%COMP%]{padding:8px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}"]}),n})(),canActivate:[(()=>{const e=class{constructor(r,o){this.supabaseService=r,this.router=o}canActivate(r,o){const i=this.supabaseService.isSignedIn(),s=this.supabaseService.getCurrentUser();return!(!i||!s)||(this.router.navigate(["/signin"],{queryParams:{returnUrl:o.url}}),!1)}};let n=e;return e.\u0275fac=function(o){return new(o||e)(G(Da),G(St))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})()],children:[{path:"dashboard",component:RV},{path:"collection",component:c$}]},{path:"**",redirectTo:"/signin"}];let _$=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ln({type:e}),e.\u0275inj=Sn({imports:[ip.forRoot(y$),ip]}),n})(),v$=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ln({type:e,bootstrap:[XL]}),e.\u0275inj=Sn({imports:[Gk,bR,MN,ip,_$]}),n})();zk().bootstrapModule(v$).catch(n=>console.error(n))},397:(Mt,ce,Z)=>{"use strict";Z.r(ce),Z.d(ce,{Headers:()=>T,Request:()=>O,Response:()=>B,default:()=>Be,fetch:()=>Re});var ye=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const Re=ye.fetch,Be=ye.fetch.bind(ye),T=ye.Headers,O=ye.Request,B=ye.Response},369:(Mt,ce,Z)=>{"use strict";var te=Z(156).default;Object.defineProperty(ce,"__esModule",{value:!0});const ye=Z(582),Re=ye.__importDefault(Z(397)),Be=ye.__importDefault(Z(839));ce.default=class T{constructor(B){var K,X;this.shouldThrowOnError=!1,this.method=B.method,this.url=B.url,this.headers=new Headers(B.headers),this.schema=B.schema,this.body=B.body,this.shouldThrowOnError=null!==(K=B.shouldThrowOnError)&&void 0!==K&&K,this.signal=B.signal,this.isMaybeSingle=null!==(X=B.isMaybeSingle)&&void 0!==X&&X,this.fetch=B.fetch?B.fetch:typeof fetch>"u"?Re.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(B,K){return this.headers=new Headers(this.headers),this.headers.set(B,K),this}then(B,K){var X=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let ke=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var De=te(function*(Ne){var nt,Ht,xt,Ke;let rt=null,Dt=null,Zn=null,Zt=Ne.status,bn=Ne.statusText;if(Ne.ok){if("HEAD"!==X.method){const jr=yield Ne.text();""===jr||(Dt="text/csv"===X.headers.get("Accept")||X.headers.get("Accept")&&null!==(nt=X.headers.get("Accept"))&&void 0!==nt&&nt.includes("application/vnd.pgrst.plan+text")?jr:JSON.parse(jr))}const Xt=null===(Ht=X.headers.get("Prefer"))||void 0===Ht?void 0:Ht.match(/count=(exact|planned|estimated)/),wn=null===(xt=Ne.headers.get("content-range"))||void 0===xt?void 0:xt.split("/");Xt&&wn&&wn.length>1&&(Zn=parseInt(wn[1])),X.isMaybeSingle&&"GET"===X.method&&Array.isArray(Dt)&&(Dt.length>1?(rt={code:"PGRST116",details:`Results contain ${Dt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Dt=null,Zn=null,Zt=406,bn="Not Acceptable"):Dt=1===Dt.length?Dt[0]:null)}else{const Xt=yield Ne.text();try{rt=JSON.parse(Xt),Array.isArray(rt)&&404===Ne.status&&(Dt=[],rt=null,Zt=200,bn="OK")}catch{404===Ne.status&&""===Xt?(Zt=204,bn="No Content"):rt={message:Xt}}if(rt&&X.isMaybeSingle&&!(null===(Ke=rt?.details)||void 0===Ke)&&Ke.includes("0 rows")&&(rt=null,Zt=200,bn="OK"),rt&&X.shouldThrowOnError)throw new Be.default(rt)}return{error:rt,data:Dt,count:Zn,status:Zt,statusText:bn}});return function(Ne){return De.apply(this,arguments)}}());return this.shouldThrowOnError||(ke=ke.catch(De=>{var Ne,nt,Ht;return{error:{message:`${null!==(Ne=De?.name)&&void 0!==Ne?Ne:"FetchError"}: ${De?.message}`,details:`${null!==(nt=De?.stack)&&void 0!==nt?nt:""}`,hint:"",code:`${null!==(Ht=De?.code)&&void 0!==Ht?Ht:""}`},data:null,count:null,status:0,statusText:""}})),ke.then(B,K)}returns(){return this}overrideTypes(){return this}}},851:(Mt,ce,Z)=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});const te=Z(582),ye=te.__importDefault(Z(241)),Re=te.__importDefault(Z(105));class Be{constructor(O,{headers:B={},schema:K,fetch:X}={}){this.url=O,this.headers=new Headers(B),this.schemaName=K,this.fetch=X}from(O){const B=new URL(`${this.url}/${O}`);return new ye.default(B,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(O){return new Be(this.url,{headers:this.headers,schema:O,fetch:this.fetch})}rpc(O,B={},{head:K=!1,get:X=!1,count:Se}={}){var ke;let De;const Ne=new URL(`${this.url}/rpc/${O}`);let nt;K||X?(De=K?"HEAD":"GET",Object.entries(B).filter(([xt,Ke])=>void 0!==Ke).map(([xt,Ke])=>[xt,Array.isArray(Ke)?`{${Ke.join(",")}}`:`${Ke}`]).forEach(([xt,Ke])=>{Ne.searchParams.append(xt,Ke)})):(De="POST",nt=B);const Ht=new Headers(this.headers);return Se&&Ht.set("Prefer",`count=${Se}`),new Re.default({method:De,url:Ne,headers:Ht,schema:this.schemaName,body:nt,fetch:null!==(ke=this.fetch)&&void 0!==ke?ke:fetch})}}ce.default=Be},839:(Mt,ce)=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});class Z extends Error{constructor(ye){super(ye.message),this.name="PostgrestError",this.details=ye.details,this.hint=ye.hint,this.code=ye.code}}ce.default=Z},105:(Mt,ce,Z)=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});const ye=Z(582).__importDefault(Z(594));ce.default=class Re extends ye.default{eq(T,O){return this.url.searchParams.append(T,`eq.${O}`),this}neq(T,O){return this.url.searchParams.append(T,`neq.${O}`),this}gt(T,O){return this.url.searchParams.append(T,`gt.${O}`),this}gte(T,O){return this.url.searchParams.append(T,`gte.${O}`),this}lt(T,O){return this.url.searchParams.append(T,`lt.${O}`),this}lte(T,O){return this.url.searchParams.append(T,`lte.${O}`),this}like(T,O){return this.url.searchParams.append(T,`like.${O}`),this}likeAllOf(T,O){return this.url.searchParams.append(T,`like(all).{${O.join(",")}}`),this}likeAnyOf(T,O){return this.url.searchParams.append(T,`like(any).{${O.join(",")}}`),this}ilike(T,O){return this.url.searchParams.append(T,`ilike.${O}`),this}ilikeAllOf(T,O){return this.url.searchParams.append(T,`ilike(all).{${O.join(",")}}`),this}ilikeAnyOf(T,O){return this.url.searchParams.append(T,`ilike(any).{${O.join(",")}}`),this}is(T,O){return this.url.searchParams.append(T,`is.${O}`),this}in(T,O){const B=Array.from(new Set(O)).map(K=>"string"==typeof K&&new RegExp("[,()]").test(K)?`"${K}"`:`${K}`).join(",");return this.url.searchParams.append(T,`in.(${B})`),this}contains(T,O){return"string"==typeof O?this.url.searchParams.append(T,`cs.${O}`):Array.isArray(O)?this.url.searchParams.append(T,`cs.{${O.join(",")}}`):this.url.searchParams.append(T,`cs.${JSON.stringify(O)}`),this}containedBy(T,O){return"string"==typeof O?this.url.searchParams.append(T,`cd.${O}`):Array.isArray(O)?this.url.searchParams.append(T,`cd.{${O.join(",")}}`):this.url.searchParams.append(T,`cd.${JSON.stringify(O)}`),this}rangeGt(T,O){return this.url.searchParams.append(T,`sr.${O}`),this}rangeGte(T,O){return this.url.searchParams.append(T,`nxl.${O}`),this}rangeLt(T,O){return this.url.searchParams.append(T,`sl.${O}`),this}rangeLte(T,O){return this.url.searchParams.append(T,`nxr.${O}`),this}rangeAdjacent(T,O){return this.url.searchParams.append(T,`adj.${O}`),this}overlaps(T,O){return this.url.searchParams.append(T,"string"==typeof O?`ov.${O}`:`ov.{${O.join(",")}}`),this}textSearch(T,O,{config:B,type:K}={}){let X="";return"plain"===K?X="pl":"phrase"===K?X="ph":"websearch"===K&&(X="w"),this.url.searchParams.append(T,`${X}fts${void 0===B?"":`(${B})`}.${O}`),this}match(T){return Object.entries(T).forEach(([O,B])=>{this.url.searchParams.append(O,`eq.${B}`)}),this}not(T,O,B){return this.url.searchParams.append(T,`not.${O}.${B}`),this}or(T,{foreignTable:O,referencedTable:B=O}={}){return this.url.searchParams.append(B?`${B}.or`:"or",`(${T})`),this}filter(T,O,B){return this.url.searchParams.append(T,`${O}.${B}`),this}}},241:(Mt,ce,Z)=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});const ye=Z(582).__importDefault(Z(105));ce.default=class Re{constructor(T,{headers:O={},schema:B,fetch:K}){this.url=T,this.headers=new Headers(O),this.schema=B,this.fetch=K}select(T,O){const{head:B=!1,count:K}=O??{},X=B?"HEAD":"GET";let Se=!1;const ke=(T??"*").split("").map(De=>/\s/.test(De)&&!Se?"":('"'===De&&(Se=!Se),De)).join("");return this.url.searchParams.set("select",ke),K&&this.headers.append("Prefer",`count=${K}`),new ye.default({method:X,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(T,{count:O,defaultToNull:B=!0}={}){var K;if(O&&this.headers.append("Prefer",`count=${O}`),B||this.headers.append("Prefer","missing=default"),Array.isArray(T)){const Se=T.reduce((ke,De)=>ke.concat(Object.keys(De)),[]);if(Se.length>0){const ke=[...new Set(Se)].map(De=>`"${De}"`);this.url.searchParams.set("columns",ke.join(","))}}return new ye.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:T,fetch:null!==(K=this.fetch)&&void 0!==K?K:fetch})}upsert(T,{onConflict:O,ignoreDuplicates:B=!1,count:K,defaultToNull:X=!0}={}){var Se;if(this.headers.append("Prefer",`resolution=${B?"ignore":"merge"}-duplicates`),void 0!==O&&this.url.searchParams.set("on_conflict",O),K&&this.headers.append("Prefer",`count=${K}`),X||this.headers.append("Prefer","missing=default"),Array.isArray(T)){const De=T.reduce((Ne,nt)=>Ne.concat(Object.keys(nt)),[]);if(De.length>0){const Ne=[...new Set(De)].map(nt=>`"${nt}"`);this.url.searchParams.set("columns",Ne.join(","))}}return new ye.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:T,fetch:null!==(Se=this.fetch)&&void 0!==Se?Se:fetch})}update(T,{count:O}={}){var B;return O&&this.headers.append("Prefer",`count=${O}`),new ye.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:T,fetch:null!==(B=this.fetch)&&void 0!==B?B:fetch})}delete({count:T}={}){var O;return T&&this.headers.append("Prefer",`count=${T}`),new ye.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(O=this.fetch)&&void 0!==O?O:fetch})}}},594:(Mt,ce,Z)=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});const ye=Z(582).__importDefault(Z(369));ce.default=class Re extends ye.default{select(T){let O=!1;const B=(T??"*").split("").map(K=>/\s/.test(K)&&!O?"":('"'===K&&(O=!O),K)).join("");return this.url.searchParams.set("select",B),this.headers.append("Prefer","return=representation"),this}order(T,{ascending:O=!0,nullsFirst:B,foreignTable:K,referencedTable:X=K}={}){const Se=X?`${X}.order`:"order",ke=this.url.searchParams.get(Se);return this.url.searchParams.set(Se,`${ke?`${ke},`:""}${T}.${O?"asc":"desc"}${void 0===B?"":B?".nullsfirst":".nullslast"}`),this}limit(T,{foreignTable:O,referencedTable:B=O}={}){return this.url.searchParams.set(typeof B>"u"?"limit":`${B}.limit`,`${T}`),this}range(T,O,{foreignTable:B,referencedTable:K=B}={}){const Se=typeof K>"u"?"limit":`${K}.limit`;return this.url.searchParams.set(typeof K>"u"?"offset":`${K}.offset`,`${T}`),this.url.searchParams.set(Se,""+(O-T+1)),this}abortSignal(T){return this.signal=T,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:T=!1,verbose:O=!1,settings:B=!1,buffers:K=!1,wal:X=!1,format:Se="text"}={}){var ke;const De=[T?"analyze":null,O?"verbose":null,B?"settings":null,K?"buffers":null,X?"wal":null].filter(Boolean).join("|"),Ne=null!==(ke=this.headers.get("Accept"))&&void 0!==ke?ke:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${Se}; for="${Ne}"; options=${De};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(T){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${T}`),this}}},358:(Mt,ce,Z)=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0}),ce.PostgrestError=ce.PostgrestBuilder=ce.PostgrestTransformBuilder=ce.PostgrestFilterBuilder=ce.PostgrestQueryBuilder=ce.PostgrestClient=void 0;const te=Z(582),ye=te.__importDefault(Z(851));ce.PostgrestClient=ye.default;const Re=te.__importDefault(Z(241));ce.PostgrestQueryBuilder=Re.default;const Be=te.__importDefault(Z(105));ce.PostgrestFilterBuilder=Be.default;const T=te.__importDefault(Z(594));ce.PostgrestTransformBuilder=T.default;const O=te.__importDefault(Z(369));ce.PostgrestBuilder=O.default;const B=te.__importDefault(Z(839));ce.PostgrestError=B.default,ce.default={PostgrestClient:ye.default,PostgrestQueryBuilder:Re.default,PostgrestFilterBuilder:Be.default,PostgrestTransformBuilder:T.default,PostgrestBuilder:O.default,PostgrestError:B.default}},156:Mt=>{function ce(te,ye,Re,Be,T,O,B){try{var K=te[O](B),X=K.value}catch(Se){return void Re(Se)}K.done?ye(X):Promise.resolve(X).then(Be,T)}Mt.exports=function Z(te){return function(){var ye=this,Re=arguments;return new Promise(function(Be,T){var O=te.apply(ye,Re);function B(X){ce(O,Be,T,B,K,"next",X)}function K(X){ce(O,Be,T,B,K,"throw",X)}B(void 0)})}},Mt.exports.__esModule=!0,Mt.exports.default=Mt.exports},582:(Mt,ce,Z)=>{"use strict";Z.r(ce),Z.d(ce,{__addDisposableResource:()=>He,__assign:()=>Re,__asyncDelegator:()=>Ji,__asyncGenerator:()=>bn,__asyncValues:()=>Xt,__await:()=>Zt,__awaiter:()=>De,__classPrivateFieldGet:()=>Xn,__classPrivateFieldIn:()=>Yi,__classPrivateFieldSet:()=>Sa,__createBinding:()=>nt,__decorate:()=>T,__disposeResources:()=>xa,__esDecorate:()=>B,__exportStar:()=>Ht,__extends:()=>ye,__generator:()=>Ne,__importDefault:()=>Fo,__importStar:()=>Ea,__makeTemplateObject:()=>wn,__metadata:()=>ke,__param:()=>O,__propKey:()=>X,__read:()=>Ke,__rest:()=>Be,__rewriteRelativeImportExtension:()=>Ia,__runInitializers:()=>K,__setFunctionName:()=>Se,__spread:()=>rt,__spreadArray:()=>Zn,__spreadArrays:()=>Dt,__values:()=>xt,default:()=>eu});var te=function(b,E){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,D){S.__proto__=D}||function(S,D){for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&(S[R]=D[R])})(b,E)};function ye(b,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function S(){this.constructor=b}te(b,E),b.prototype=null===E?Object.create(E):(S.prototype=E.prototype,new S)}var Re=function(){return Re=Object.assign||function(E){for(var S,D=1,R=arguments.length;D<R;D++)for(var V in S=arguments[D])Object.prototype.hasOwnProperty.call(S,V)&&(E[V]=S[V]);return E},Re.apply(this,arguments)};function Be(b,E){var S={};for(var D in b)Object.prototype.hasOwnProperty.call(b,D)&&E.indexOf(D)<0&&(S[D]=b[D]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(D=Object.getOwnPropertySymbols(b);R<D.length;R++)E.indexOf(D[R])<0&&Object.prototype.propertyIsEnumerable.call(b,D[R])&&(S[D[R]]=b[D[R]])}return S}function T(b,E,S,D){var P,R=arguments.length,V=R<3?E:null===D?D=Object.getOwnPropertyDescriptor(E,S):D;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)V=Reflect.decorate(b,E,S,D);else for(var L=b.length-1;L>=0;L--)(P=b[L])&&(V=(R<3?P(V):R>3?P(E,S,V):P(E,S))||V);return R>3&&V&&Object.defineProperty(E,S,V),V}function O(b,E){return function(S,D){E(S,D,b)}}function B(b,E,S,D,R,V){function P(er){if(void 0!==er&&"function"!=typeof er)throw new TypeError("Function expected");return er}for(var _t,L=D.kind,Et="getter"===L?"get":"setter"===L?"set":"value",le=!E&&b?D.static?b:b.prototype:null,qe=E||(le?Object.getOwnPropertyDescriptor(le,D.name):{}),Vr=!1,je=S.length-1;je>=0;je--){var Nt={};for(var en in D)Nt[en]="access"===en?{}:D[en];for(var en in D.access)Nt.access[en]=D.access[en];Nt.addInitializer=function(er){if(Vr)throw new TypeError("Cannot add initializers after decoration has completed");V.push(P(er||null))};var Dn=(0,S[je])("accessor"===L?{get:qe.get,set:qe.set}:qe[Et],Nt);if("accessor"===L){if(void 0===Dn)continue;if(null===Dn||"object"!=typeof Dn)throw new TypeError("Object expected");(_t=P(Dn.get))&&(qe.get=_t),(_t=P(Dn.set))&&(qe.set=_t),(_t=P(Dn.init))&&R.unshift(_t)}else(_t=P(Dn))&&("field"===L?R.unshift(_t):qe[Et]=_t)}le&&Object.defineProperty(le,D.name,qe),Vr=!0}function K(b,E,S){for(var D=arguments.length>2,R=0;R<E.length;R++)S=D?E[R].call(b,S):E[R].call(b);return D?S:void 0}function X(b){return"symbol"==typeof b?b:"".concat(b)}function Se(b,E,S){return"symbol"==typeof E&&(E=E.description?"[".concat(E.description,"]"):""),Object.defineProperty(b,"name",{configurable:!0,value:S?"".concat(S," ",E):E})}function ke(b,E){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(b,E)}function De(b,E,S,D){return new(S||(S=Promise))(function(V,P){function L(qe){try{le(D.next(qe))}catch(_t){P(_t)}}function Et(qe){try{le(D.throw(qe))}catch(_t){P(_t)}}function le(qe){qe.done?V(qe.value):function R(V){return V instanceof S?V:new S(function(P){P(V)})}(qe.value).then(L,Et)}le((D=D.apply(b,E||[])).next())})}function Ne(b,E){var D,R,V,S={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]},P=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return P.next=L(0),P.throw=L(1),P.return=L(2),"function"==typeof Symbol&&(P[Symbol.iterator]=function(){return this}),P;function L(le){return function(qe){return function Et(le){if(D)throw new TypeError("Generator is already executing.");for(;P&&(P=0,le[0]&&(S=0)),S;)try{if(D=1,R&&(V=2&le[0]?R.return:le[0]?R.throw||((V=R.return)&&V.call(R),0):R.next)&&!(V=V.call(R,le[1])).done)return V;switch(R=0,V&&(le=[2&le[0],V.value]),le[0]){case 0:case 1:V=le;break;case 4:return S.label++,{value:le[1],done:!1};case 5:S.label++,R=le[1],le=[0];continue;case 7:le=S.ops.pop(),S.trys.pop();continue;default:if(!(V=(V=S.trys).length>0&&V[V.length-1])&&(6===le[0]||2===le[0])){S=0;continue}if(3===le[0]&&(!V||le[1]>V[0]&&le[1]<V[3])){S.label=le[1];break}if(6===le[0]&&S.label<V[1]){S.label=V[1],V=le;break}if(V&&S.label<V[2]){S.label=V[2],S.ops.push(le);break}V[2]&&S.ops.pop(),S.trys.pop();continue}le=E.call(b,S)}catch(qe){le=[6,qe],R=0}finally{D=V=0}if(5&le[0])throw le[1];return{value:le[0]?le[1]:void 0,done:!0}}([le,qe])}}}var nt=Object.create?function(b,E,S,D){void 0===D&&(D=S);var R=Object.getOwnPropertyDescriptor(E,S);(!R||("get"in R?!E.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return E[S]}}),Object.defineProperty(b,D,R)}:function(b,E,S,D){void 0===D&&(D=S),b[D]=E[S]};function Ht(b,E){for(var S in b)"default"!==S&&!Object.prototype.hasOwnProperty.call(E,S)&&nt(E,b,S)}function xt(b){var E="function"==typeof Symbol&&Symbol.iterator,S=E&&b[E],D=0;if(S)return S.call(b);if(b&&"number"==typeof b.length)return{next:function(){return b&&D>=b.length&&(b=void 0),{value:b&&b[D++],done:!b}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(b,E){var S="function"==typeof Symbol&&b[Symbol.iterator];if(!S)return b;var R,P,D=S.call(b),V=[];try{for(;(void 0===E||E-- >0)&&!(R=D.next()).done;)V.push(R.value)}catch(L){P={error:L}}finally{try{R&&!R.done&&(S=D.return)&&S.call(D)}finally{if(P)throw P.error}}return V}function rt(){for(var b=[],E=0;E<arguments.length;E++)b=b.concat(Ke(arguments[E]));return b}function Dt(){for(var b=0,E=0,S=arguments.length;E<S;E++)b+=arguments[E].length;var D=Array(b),R=0;for(E=0;E<S;E++)for(var V=arguments[E],P=0,L=V.length;P<L;P++,R++)D[R]=V[P];return D}function Zn(b,E,S){if(S||2===arguments.length)for(var V,D=0,R=E.length;D<R;D++)(V||!(D in E))&&(V||(V=Array.prototype.slice.call(E,0,D)),V[D]=E[D]);return b.concat(V||Array.prototype.slice.call(E))}function Zt(b){return this instanceof Zt?(this.v=b,this):new Zt(b)}function bn(b,E,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,D=S.apply(b,E||[]),V=[];return R=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),L("next"),L("throw"),L("return",function P(je){return function(Nt){return Promise.resolve(Nt).then(je,_t)}}),R[Symbol.asyncIterator]=function(){return this},R;function L(je,Nt){D[je]&&(R[je]=function(en){return new Promise(function(Dn,er){V.push([je,en,Dn,er])>1||Et(je,en)})},Nt&&(R[je]=Nt(R[je])))}function Et(je,Nt){try{!function le(je){je.value instanceof Zt?Promise.resolve(je.value.v).then(qe,_t):Vr(V[0][2],je)}(D[je](Nt))}catch(en){Vr(V[0][3],en)}}function qe(je){Et("next",je)}function _t(je){Et("throw",je)}function Vr(je,Nt){je(Nt),V.shift(),V.length&&Et(V[0][0],V[0][1])}}function Ji(b){var E,S;return E={},D("next"),D("throw",function(R){throw R}),D("return"),E[Symbol.iterator]=function(){return this},E;function D(R,V){E[R]=b[R]?function(P){return(S=!S)?{value:Zt(b[R](P)),done:!1}:V?V(P):P}:V}}function Xt(b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S,E=b[Symbol.asyncIterator];return E?E.call(b):(b=xt(b),S={},D("next"),D("throw"),D("return"),S[Symbol.asyncIterator]=function(){return this},S);function D(V){S[V]=b[V]&&function(P){return new Promise(function(L,Et){!function R(V,P,L,Et){Promise.resolve(Et).then(function(le){V({value:le,done:L})},P)}(L,Et,(P=b[V](P)).done,P.value)})}}}function wn(b,E){return Object.defineProperty?Object.defineProperty(b,"raw",{value:E}):b.raw=E,b}var jr=Object.create?function(b,E){Object.defineProperty(b,"default",{enumerable:!0,value:E})}:function(b,E){b.default=E},co=function(b){return(co=Object.getOwnPropertyNames||function(E){var S=[];for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(S[S.length]=D);return S})(b)};function Ea(b){if(b&&b.__esModule)return b;var E={};if(null!=b)for(var S=co(b),D=0;D<S.length;D++)"default"!==S[D]&&nt(E,b,S[D]);return jr(E,b),E}function Fo(b){return b&&b.__esModule?b:{default:b}}function Xn(b,E,S,D){if("a"===S&&!D)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof E?b!==E||!D:!E.has(b))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===S?D:"a"===S?D.call(b):D?D.value:E.get(b)}function Sa(b,E,S,D,R){if("m"===D)throw new TypeError("Private method is not writable");if("a"===D&&!R)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof E?b!==E||!R:!E.has(b))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===D?R.call(b,S):R?R.value=S:E.set(b,S),S}function Yi(b,E){if(null===E||"object"!=typeof E&&"function"!=typeof E)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof b?E===b:b.has(E)}function He(b,E,S){if(null!=E){if("object"!=typeof E&&"function"!=typeof E)throw new TypeError("Object expected.");var D,R;if(S){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");D=E[Symbol.asyncDispose]}if(void 0===D){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");D=E[Symbol.dispose],S&&(R=D)}if("function"!=typeof D)throw new TypeError("Object not disposable.");R&&(D=function(){try{R.call(this)}catch(V){return Promise.reject(V)}}),b.stack.push({value:E,dispose:D,async:S})}else S&&b.stack.push({async:!0});return E}var Ma="function"==typeof SuppressedError?SuppressedError:function(b,E,S){var D=new Error(S);return D.name="SuppressedError",D.error=b,D.suppressed=E,D};function xa(b){function E(V){b.error=b.hasError?new Ma(V,b.error,"An error was suppressed during disposal."):V,b.hasError=!0}var S,D=0;return function R(){for(;S=b.stack.pop();)try{if(!S.async&&1===D)return D=0,b.stack.push(S),Promise.resolve().then(R);if(S.dispose){var V=S.dispose.call(S.value);if(S.async)return D|=2,Promise.resolve(V).then(R,function(P){return E(P),R()})}else D|=1}catch(P){E(P)}if(1===D)return b.hasError?Promise.reject(b.error):Promise.resolve();if(b.hasError)throw b.error}()}function Ia(b,E){return"string"==typeof b&&/^\.\.?\//.test(b)?b.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(S,D,R,V,P){return D?E?".jsx":".js":!R||V&&P?R+V+"."+P.toLowerCase()+"js":S}):b}const eu={__extends:ye,__assign:Re,__rest:Be,__decorate:T,__param:O,__esDecorate:B,__runInitializers:K,__propKey:X,__setFunctionName:Se,__metadata:ke,__awaiter:De,__generator:Ne,__createBinding:nt,__exportStar:Ht,__values:xt,__read:Ke,__spread:rt,__spreadArrays:Dt,__spreadArray:Zn,__await:Zt,__asyncGenerator:bn,__asyncDelegator:Ji,__asyncValues:Xt,__makeTemplateObject:wn,__importStar:Ea,__importDefault:Fo,__classPrivateFieldGet:Xn,__classPrivateFieldSet:Sa,__classPrivateFieldIn:Yi,__addDisposableResource:He,__disposeResources:xa,__rewriteRelativeImportExtension:Ia}}},Mt=>{Mt(Mt.s=716)}]);