(self.webpackChunkPokemonTCGPCollector=self.webpackChunkPokemonTCGPCollector||[]).push([[179],{219:(It,de,te)=>{"use strict";function oe(n){return"function"==typeof n}function ve(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Ne=ve(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Ge(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class I{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const i of e)i.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(oe(r))try{r()}catch(i){t=i instanceof Ne?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{Q(i)}catch(s){t=t??[],s instanceof Ne?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Ne(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Q(t);else{if(t instanceof I){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Ge(e,t)}remove(t){const{_finalizers:e}=this;e&&Ge(e,t),t instanceof I&&t._removeParent(this)}}I.EMPTY=(()=>{const n=new I;return n.closed=!0,n})();const k=I.EMPTY;function H(n){return n instanceof I||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function Q(n){oe(n)?n():n.unsubscribe()}const ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ee={setTimeout(n,t,...e){const{delegate:r}=Ee;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=Ee;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Re(n){Ee.setTimeout(()=>{const{onUnhandledError:t}=ne;if(!t)throw n;t(n)})}function De(){}const Fe=At("C",void 0,void 0);function At(n,t,e){return{kind:n,value:t,error:e}}let Ze=null;function at(n){if(ne.useDeprecatedSynchronousErrorHandling){const t=!Ze;if(t&&(Ze={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=Ze;if(Ze=null,e)throw r}}else n()}class Xn extends I{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,H(t)&&t.add(this)):this.destination=Oa}static create(t,e,r){return new en(t,e,r)}next(t){this.isStopped?fo(function zt(n){return At("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?fo(function st(n){return At("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?fo(Fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xt=Function.prototype.bind;function wn(n,t){return Xt.call(n,t)}class ts{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Dn(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Dn(r)}else Dn(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Dn(e)}}}class en extends Xn{constructor(t,e,r){let o;if(super(),oe(t)||!t)o={next:t??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&ne.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&wn(t.next,i),error:t.error&&wn(t.error,i),complete:t.complete&&wn(t.complete,i)}):o=t}this.destination=new ts(o)}}function Dn(n){ne.useDeprecatedSynchronousErrorHandling?function Mt(n){ne.useDeprecatedSynchronousErrorHandling&&Ze&&(Ze.errorThrown=!0,Ze.error=n)}(n):Re(n)}function fo(n,t){const{onStoppedNotification:e}=ne;e&&Ee.setTimeout(()=>e(n,t))}const Oa={closed:!0,next:De,error:function Vr(n){throw n},complete:De},Fo="function"==typeof Symbol&&Symbol.observable||"@@observable";function er(n){return n}function ns(n){return 0===n.length?er:1===n.length?n[0]:function(e){return n.reduce((r,o)=>o(r),e)}}let qe=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,o){const i=function Pa(n){return n&&n instanceof Xn||function Aa(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}(n)&&H(n)}(e)?e:new en(e,r,o);return at(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=Ia(r))((o,i)=>{const s=new en({next:a=>{try{e(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[Fo](){return this}pipe(...e){return ns(e)(this)}toPromise(e){return new(e=Ia(e))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=t=>new n(t),n})();function Ia(n){var t;return null!==(t=n??ne.Promise)&&void 0!==t?t:Promise}const nu=ve(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let S=(()=>{class n extends qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new M(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new nu}next(e){at(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){at(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){at(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:o,observers:i}=this;return r||o?k:(this.currentObservers=null,i.push(e),new I(()=>{this.currentObservers=null,Ge(i,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:o,isStopped:i}=this;r?e.error(o):i&&e.complete()}asObservable(){const e=new qe;return e.source=this,e}}return n.create=(t,e)=>new M(t,e),n})();class M extends S{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:k}}function T(n){return oe(n?.lift)}function E(n){return t=>{if(T(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function L(n,t,e,r,o){return new B(n,t,e,r,o)}class B extends Xn{constructor(t,e,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function N(n,t){return E((e,r)=>{let o=0;e.subscribe(L(r,i=>{r.next(n.call(t,i,o++))}))})}var $=te(582);const Ot=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ue(n){return oe(n?.then)}function Ye(n){return oe(n[Fo])}function Dt(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function $r(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Lt=function Ve(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tn(n){return oe(n?.[Lt])}function Sn(n){return(0,$.__asyncGenerator)(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:o}=yield(0,$.__await)(e.read());if(o)return yield(0,$.__await)(void 0);yield yield(0,$.__await)(r)}}finally{e.releaseLock()}})}function tr(n){return oe(n?.getReader)}function Ln(n){if(n instanceof qe)return n;if(null!=n){if(Ye(n))return function QD(n){return new qe(t=>{const e=n[Fo]();if(oe(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ot(n))return function ZD(n){return new qe(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(ue(n))return function XD(n){return new qe(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Re)})}(n);if(Dt(n))return Yp(n);if(tn(n))return function eS(n){return new qe(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(tr(n))return function tS(n){return Yp(Sn(n))}(n)}throw $r(n)}function Yp(n){return new qe(t=>{(function nS(n,t){var e,r,o,i;return(0,$.__awaiter)(this,void 0,void 0,function*(){try{for(e=(0,$.__asyncValues)(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(o)throw o.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function vr(n,t,e,r=0,o=!1){const i=t.schedule(function(){e(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function Pt(n,t,e=1/0){return oe(t)?Pt((r,o)=>N((i,s)=>t(r,i,o,s))(Ln(n(r,o))),e):("number"==typeof t&&(e=t),E((r,o)=>function rS(n,t,e,r,o,i,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&t.complete()},f=y=>c<r?p(y):l.push(y),p=y=>{i&&t.next(y),c++;let _=!1;Ln(e(y,u++)).subscribe(L(t,b=>{o?.(b),i?f(b):t.next(b)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<r;){const b=l.shift();s?vr(t,s,()=>p(b)):p(b)}h()}catch(b){t.error(b)}}))};return n.subscribe(L(t,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,n,e)))}function Lo(n=1/0){return Pt(er,n)}const nr=new qe(n=>n.complete());function ru(n){return n[n.length-1]}function Qp(n){return oe(ru(n))?n.pop():void 0}function rs(n){return function iS(n){return n&&oe(n.schedule)}(ru(n))?n.pop():void 0}function Zp(n,t=0){return E((e,r)=>{e.subscribe(L(r,o=>vr(r,n,()=>r.next(o),t),()=>vr(r,n,()=>r.complete(),t),o=>vr(r,n,()=>r.error(o),t)))})}function Xp(n,t=0){return E((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function eg(n,t){if(!n)throw new Error("Iterable cannot be null");return new qe(e=>{vr(e,t,()=>{const r=n[Symbol.asyncIterator]();vr(e,t,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function pt(n,t){return t?function hS(n,t){if(null!=n){if(Ye(n))return function aS(n,t){return Ln(n).pipe(Xp(t),Zp(t))}(n,t);if(Ot(n))return function cS(n,t){return new qe(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(ue(n))return function lS(n,t){return Ln(n).pipe(Xp(t),Zp(t))}(n,t);if(Dt(n))return eg(n,t);if(tn(n))return function uS(n,t){return new qe(e=>{let r;return vr(e,t,()=>{r=n[Lt](),vr(e,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void e.error(s)}i?e.complete():e.next(o)},0,!0)}),()=>oe(r?.return)&&r.return()})}(n,t);if(tr(n))return function dS(n,t){return eg(Sn(n),t)}(n,t)}throw $r(n)}(n,t):Ln(n)}function ou(n,t,...e){if(!0===t)return void n();if(!1===t)return;const r=new en({next:()=>{r.unsubscribe(),n()}});return t(...e).subscribe(r)}function Le(n){for(let t in n)if(n[t]===Le)return t;throw Error("Could not find renamed property on target object.")}function iu(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function $e(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map($e).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function su(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const gS=Le({__forward_ref__:Le});function Ue(n){return n.__forward_ref__=Ue,n.toString=function(){return $e(this())},n}function se(n){return au(n)?n():n}function au(n){return"function"==typeof n&&n.hasOwnProperty(gS)&&n.__forward_ref__===Ue}function lu(n){return n&&!!n.\u0275providers}const tg="https://g.co/ng/security#xss";class U extends Error{constructor(t,e){super(ka(t,e)),this.code=t}}function ka(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}function he(n){return"string"==typeof n?n:null==n?"":String(n)}function Ra(n,t){throw new U(-201,!1)}function En(n,t){null==n&&function Ie(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Na(n){return ng(n,Fa)||ng(n,og)}function ng(n,t){return n.hasOwnProperty(t)?n[t]:null}function rg(n){return n&&(n.hasOwnProperty(cu)||n.hasOwnProperty(DS))?n[cu]:null}const Fa=Le({\u0275prov:Le}),cu=Le({\u0275inj:Le}),og=Le({ngInjectableDef:Le}),DS=Le({ngInjectorDef:Le});var ae=(()=>((ae=ae||{})[ae.Default=0]="Default",ae[ae.Host=1]="Host",ae[ae.Self=2]="Self",ae[ae.SkipSelf=4]="SkipSelf",ae[ae.Optional=8]="Optional",ae))();let uu;function Mn(n){const t=uu;return uu=n,t}function ig(n,t,e){const r=Na(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&ae.Optional?null:void 0!==t?t:void Ra($e(n))}const We=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),os={},du="__NG_DI_FLAG__",La="ngTempTokenPath",ES="ngTokenPath",xS=/\n/gm,MS="\u0275",sg="__source";let is;function jo(n){const t=is;return is=n,t}function OS(n,t=ae.Default){if(void 0===is)throw new U(-203,!1);return null===is?ig(n,void 0,t):is.get(n,t&ae.Optional?null:void 0,t)}function K(n,t=ae.Default){return(function SS(){return uu}()||OS)(se(n),t)}function Ce(n,t=ae.Default){return K(n,ja(t))}function ja(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function hu(n){const t=[];for(let e=0;e<n.length;e++){const r=se(n[e]);if(Array.isArray(r)){if(0===r.length)throw new U(900,!1);let o,i=ae.Default;for(let s=0;s<r.length;s++){const a=r[s],l=TS(a);"number"==typeof l?-1===l?o=a.token:i|=l:o=a}t.push(K(o,i))}else t.push(K(r))}return t}function ss(n,t){return n[du]=t,n.prototype[du]=t,n}function TS(n){return n[du]}function Cr(n){return{toString:n}.toString()}var rr=(()=>((rr=rr||{})[rr.OnPush=0]="OnPush",rr[rr.Default=1]="Default",rr))(),or=(()=>{return(n=or||(or={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",or;var n})();const br={},Oe=[],Va=Le({\u0275cmp:Le}),fu=Le({\u0275dir:Le}),pu=Le({\u0275pipe:Le}),lg=Le({\u0275mod:Le}),wr=Le({\u0275fac:Le}),as=Le({__NG_ELEMENT_ID__:Le});let PS=0;function Br(n){return Cr(()=>{const t=ug(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||or.Emulated,id:"c"+PS++,styles:n.styles||Oe,_:null,schemas:n.schemas||null,tView:null};dg(e);const r=n.dependencies;return e.directiveDefs=$a(r,!1),e.pipeDefs=$a(r,!0),e})}function RS(n){return Ae(n)||jt(n)}function NS(n){return null!==n}function jn(n){return Cr(()=>({type:n.type,bootstrap:n.bootstrap||Oe,declarations:n.declarations||Oe,imports:n.imports||Oe,exports:n.exports||Oe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function cg(n,t){if(null==n)return br;const e={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),e[o]=r,t&&(t[o]=i)}return e}function ce(n){return Cr(()=>{const t=ug(n);return dg(t),t})}function Ae(n){return n[Va]||null}function jt(n){return n[fu]||null}function rn(n){return n[pu]||null}function un(n,t){const e=n[lg]||null;if(!e&&!0===t)throw new Error(`Type ${$e(n)} does not have '\u0275mod' property.`);return e}function ug(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Oe,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cg(n.inputs,t),outputs:cg(n.outputs)}}function dg(n){n.features?.forEach(t=>t(n))}function $a(n,t){if(!n)return null;const e=t?rn:RS;return()=>("function"==typeof n?n():n).map(r=>e(r)).filter(NS)}const Dr=0,J=1,ye=2,rt=3,Vn=4,po=5,Vt=6,$o=7,lt=8,Ua=9,Ba=10,be=11,gu=12,ls=13,hg=14,Uo=15,$t=16,cs=17,Bo=18,ir=19,us=20,fg=21,Ke=22,mu=1,pg=2,Ha=7,za=8,Ho=9,Gt=10;function dn(n){return Array.isArray(n)&&"object"==typeof n[mu]}function $n(n){return Array.isArray(n)&&!0===n[mu]}function yu(n){return 0!=(4&n.flags)}function ds(n){return n.componentOffset>-1}function Ga(n){return 1==(1&n.flags)}function Un(n){return!!n.template}function LS(n){return 0!=(256&n[ye])}function go(n,t){return n.hasOwnProperty(wr)?n[wr]:null}class $S{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function On(){return yg}function yg(n){return n.type.prototype.ngOnChanges&&(n.setInput=BS),US}function US(){const n=vg(this),t=n?.current;if(t){const e=n.previous;if(e===br)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function BS(n,t,e,r){const o=this.declaredInputs[e],i=vg(n)||function HS(n,t){return n[_g]=t}(n,{previous:br,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[o];s[o]=new $S(l&&l.currentValue,t,a===br),n[r]=t}On.ngInherit=!0;const _g="__ngSimpleChanges__";function vg(n){return n[_g]||null}const Tn=function(n,t,e){};function kt(n){for(;Array.isArray(n);)n=n[Dr];return n}function qa(n,t){return kt(t[n])}function hn(n,t){return kt(t[n.index])}function wg(n,t){return n.data[t]}function on(n,t){const e=t[n];return dn(e)?e:e[Dr]}function Wa(n){return 64==(64&n[ye])}function Hr(n,t){return null==t?null:n[t]}function Dg(n){n[Bo]=0}function vu(n,t){n[po]+=t;let e=n,r=n[rt];for(;null!==r&&(1===t&&1===e[po]||-1===t&&0===e[po]);)r[po]+=t,e=r,r=r[rt]}const fe={lFrame:kg(null),bindingsEnabled:!0};function Eg(){return fe.bindingsEnabled}function j(){return fe.lFrame.lView}function Me(){return fe.lFrame.tView}function q(n){return fe.lFrame.contextLView=n,n[lt]}function W(n){return fe.lFrame.contextLView=null,n}function Rt(){let n=xg();for(;null!==n&&64===n.type;)n=n.parent;return n}function xg(){return fe.lFrame.currentTNode}function sr(n,t){const e=fe.lFrame;e.currentTNode=n,e.isParent=t}function Cu(){return fe.lFrame.isParent}function bu(){fe.lFrame.isParent=!1}function qt(){const n=fe.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Go(){return fe.lFrame.bindingIndex++}function Er(n){const t=fe.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function nE(n,t){const e=fe.lFrame;e.bindingIndex=e.bindingRootIndex=n,wu(t)}function wu(n){fe.lFrame.currentDirectiveIndex=n}function Ig(){return fe.lFrame.currentQueryIndex}function Su(n){fe.lFrame.currentQueryIndex=n}function oE(n){const t=n[J];return 2===t.type?t.declTNode:1===t.type?n[Vt]:null}function Ag(n,t,e){if(e&ae.SkipSelf){let o=t,i=n;for(;!(o=o.parent,null!==o||e&ae.Host||(o=oE(i),null===o||(i=i[Uo],10&o.type))););if(null===o)return!1;t=o,n=i}const r=fe.lFrame=Pg();return r.currentTNode=t,r.lView=n,!0}function Eu(n){const t=Pg(),e=n[J];fe.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Pg(){const n=fe.lFrame,t=null===n?null:n.child;return null===t?kg(n):t}function kg(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Rg(){const n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ng=Rg;function xu(){const n=Rg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Wt(){return fe.lFrame.selectedIndex}function mo(n){fe.lFrame.selectedIndex=n}function Xe(){const n=fe.lFrame;return wg(n.tView,n.selectedIndex)}function Ka(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const i=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(n.contentHooks??(n.contentHooks=[])).push(-e,s),a&&((n.contentHooks??(n.contentHooks=[])).push(e,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks??(n.viewHooks=[])).push(-e,l),c&&((n.viewHooks??(n.viewHooks=[])).push(e,c),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(e,c)),null!=u&&(n.destroyHooks??(n.destroyHooks=[])).push(e,u)}}function Ja(n,t,e){Fg(n,t,3,e)}function Ya(n,t,e,r){(3&n[ye])===e&&Fg(n,t,e,r)}function Mu(n,t){let e=n[ye];(3&e)===t&&(e&=2047,e+=1,n[ye]=e)}function Fg(n,t,e,r){const i=r??-1,s=t.length-1;let a=0;for(let l=void 0!==r?65535&n[Bo]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(n[Bo]+=65536),(a<i||-1==i)&&(fE(n,e,t,l),n[Bo]=(4294901760&n[Bo])+l+2),l++}function fE(n,t,e,r){const o=e[r]<0,i=e[r+1],a=n[o?-e[r]:e[r]];if(o){if(n[ye]>>11<n[Bo]>>16&&(3&n[ye])===t){n[ye]+=2048,Tn(4,a,i);try{i.call(a)}finally{Tn(5,a,i)}}}else{Tn(4,a,i);try{i.call(a)}finally{Tn(5,a,i)}}}const qo=-1;class fs{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function Tu(n,t,e){let r=0;for(;r<e.length;){const o=e[r];if("number"==typeof o){if(0!==o)break;r++;const i=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,i)}else{const i=o,s=e[++r];jg(i)?n.setProperty(t,i,s):n.setAttribute(t,i,s),r++}}return r}function Lg(n){return 3===n||4===n||6===n}function jg(n){return 64===n.charCodeAt(0)}function ps(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?e=o:0===e||Vg(n,e,o,null,-1===e||2===e?t[++r]:null)}}return n}function Vg(n,t,e,r,o){let i=0,s=n.length;if(-1===t)s=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==o&&(n[i+1]=o));if(r===n[i+1])return void(n[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(n.splice(s,0,t),i=s+1),n.splice(i++,0,e),null!==r&&n.splice(i++,0,r),null!==o&&n.splice(i++,0,o)}function $g(n){return n!==qo}function Qa(n){return 32767&n}function Za(n,t){let e=function yE(n){return n>>16}(n),r=t;for(;e>0;)r=r[Uo],e--;return r}let Iu=!0;function Xa(n){const t=Iu;return Iu=n,t}const Ug=255,Bg=5;let _E=0;const ar={};function el(n,t){const e=Hg(n,t);if(-1!==e)return e;const r=t[J];r.firstCreatePass&&(n.injectorIndex=t.length,Au(r.data,n),Au(t,null),Au(r.blueprint,null));const o=Pu(n,t),i=n.injectorIndex;if($g(o)){const s=Qa(o),a=Za(o,t),l=a[J].data;for(let c=0;c<8;c++)t[i+c]=a[s+c]|l[s+c]}return t[i+8]=o,i}function Au(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Hg(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Pu(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,o=t;for(;null!==o;){if(r=Yg(o),null===r)return qo;if(e++,o=o[Uo],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return qo}function ku(n,t,e){!function vE(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(as)&&(r=e[as]),null==r&&(r=e[as]=_E++);const o=r&Ug;t.data[n+(o>>Bg)]|=1<<o}(n,t,e)}function zg(n,t,e){if(e&ae.Optional||void 0!==n)return n;Ra()}function Gg(n,t,e,r){if(e&ae.Optional&&void 0===r&&(r=null),!(e&(ae.Self|ae.Host))){const o=n[Ua],i=Mn(void 0);try{return o?o.get(t,r,e&ae.Optional):ig(t,r,e&ae.Optional)}finally{Mn(i)}}return zg(r,0,e)}function qg(n,t,e,r=ae.Default,o){if(null!==n){if(1024&t[ye]){const s=function SE(n,t,e,r,o){let i=n,s=t;for(;null!==i&&null!==s&&1024&s[ye]&&!(256&s[ye]);){const a=Wg(i,s,e,r|ae.Self,ar);if(a!==ar)return a;let l=i.parent;if(!l){const c=s[fg];if(c){const u=c.get(e,ar,r);if(u!==ar)return u}l=Yg(s),s=s[Uo]}i=l}return o}(n,t,e,r,ar);if(s!==ar)return s}const i=Wg(n,t,e,r,ar);if(i!==ar)return i}return Gg(t,e,r,o)}function Wg(n,t,e,r,o){const i=function wE(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(as)?n[as]:void 0;return"number"==typeof t?t>=0?t&Ug:DE:t}(e);if("function"==typeof i){if(!Ag(t,n,r))return r&ae.Host?zg(o,0,r):Gg(t,e,r,o);try{const s=i(r);if(null!=s||r&ae.Optional)return s;Ra()}finally{Ng()}}else if("number"==typeof i){let s=null,a=Hg(n,t),l=qo,c=r&ae.Host?t[$t][Vt]:null;for((-1===a||r&ae.SkipSelf)&&(l=-1===a?Pu(n,t):t[a+8],l!==qo&&Jg(r,!1)?(s=t[J],a=Qa(l),t=Za(l,t)):a=-1);-1!==a;){const u=t[J];if(Kg(i,a,u.data)){const d=bE(a,t,e,s,r,c);if(d!==ar)return d}l=t[a+8],l!==qo&&Jg(r,t[J].data[a+8]===c)&&Kg(i,a,t)?(s=u,a=Qa(l),t=Za(l,t)):a=-1}}return o}function bE(n,t,e,r,o,i){const s=t[J],a=s.data[n+8],u=tl(a,s,e,null==r?ds(a)&&Iu:r!=s&&0!=(3&a.type),o&ae.Host&&i===a);return null!==u?yo(t,s,u,a):ar}function tl(n,t,e,r,o){const i=n.providerIndexes,s=t.data,a=1048575&i,l=n.directiveStart,u=i>>20,h=o?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(o){const f=s[l];if(f&&Un(f)&&f.type===e)return l}return null}function yo(n,t,e,r){let o=n[e];const i=t.data;if(function pE(n){return n instanceof fs}(o)){const s=o;s.resolving&&function mS(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new U(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Te(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():he(n)}(i[e]));const a=Xa(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Mn(s.injectImpl):null;Ag(n,r,ae.Default);try{o=n[e]=s.factory(void 0,i,n,r),t.firstCreatePass&&e>=r.directiveStart&&function hE(n,t,e){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){const s=yg(t);(e.preOrderHooks??(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,s)}o&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-n,o),i&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n,i),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n,i))}(e,i[e],t)}finally{null!==l&&Mn(l),Xa(a),s.resolving=!1,Ng()}}return o}function Kg(n,t,e){return!!(e[t+(n>>Bg)]&1<<n)}function Jg(n,t){return!(n&ae.Self||n&ae.Host&&t)}class Wo{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return qg(this._tNode,this._lView,t,ja(r),e)}}function DE(){return new Wo(Rt(),j())}function Nt(n){return Cr(()=>{const t=n.prototype.constructor,e=t[wr]||Ru(t),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const i=o[wr]||Ru(o);if(i&&i!==e)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Ru(n){return au(n)?()=>{const t=Ru(se(n));return t&&t()}:go(n)}function Yg(n){const t=n[J],e=t.type;return 2===e?t.declTNode:1===e?n[Vt]:null}const Jo="__parameters__";function Qo(n,t,e){return Cr(()=>{const r=function Nu(n){return function(...e){if(n){const r=n(...e);for(const o in r)this[o]=r[o]}}}(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Jo)?l[Jo]:Object.defineProperty(l,Jo,{value:[]})[Jo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}class X{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Z({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _o(n,t){n.forEach(e=>Array.isArray(e)?_o(e,t):t(e))}function Zg(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function rl(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function fn(n,t,e){let r=Zo(n,t);return r>=0?n[1|r]=e:(r=~r,function OE(n,t,e,r){let o=n.length;if(o==t)n.push(e,r);else if(1===o)n.push(r,n[0]),n[0]=e;else{for(o--,n.push(n[o-1],n[o]);o>t;)n[o]=n[o-2],o--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function Lu(n,t){const e=Zo(n,t);if(e>=0)return n[1|e]}function Zo(n,t){return function Xg(n,t,e){let r=0,o=n.length>>e;for(;o!==r;){const i=r+(o-r>>1),s=n[i<<e];if(t===s)return i<<e;s>t?o=i:r=i+1}return~(o<<e)}(n,t,1)}const _s=ss(Qo("Optional"),8),vs=ss(Qo("SkipSelf"),4);var sn=(()=>((sn=sn||{})[sn.Important=1]="Important",sn[sn.DashCase=2]="DashCase",sn))();const Hu=new Map;let YE=0;const Gu="__ngContext__";function Ut(n,t){dn(t)?(n[Gu]=t[us],function ZE(n){Hu.set(n[us],n)}(t)):n[Gu]=t}let qu;function Wu(n,t){return qu(n,t)}function Ds(n){const t=n[rt];return $n(t)?t[rt]:t}function Ku(n){return vm(n[ls])}function Ju(n){return vm(n[Vn])}function vm(n){for(;null!==n&&!$n(n);)n=n[Vn];return n}function ei(n,t,e,r,o){if(null!=r){let i,s=!1;$n(r)?i=r:dn(r)&&(s=!0,r=r[Dr]);const a=kt(r);0===n&&null!==e?null==o?Em(t,e,a):vo(t,e,a,o||null,!0):1===n&&null!==e?vo(t,e,a,o||null,!0):2===n?function nd(n,t,e){const r=al(n,t);r&&function _x(n,t,e,r){n.removeChild(t,e,r)}(n,r,t,e)}(t,a,s):3===n&&t.destroyNode(a),null!=i&&function bx(n,t,e,r,o){const i=e[Ha];i!==kt(e)&&ei(t,n,r,i,o);for(let a=Gt;a<e.length;a++){const l=e[a];Ss(l[J],l,n,t,r,i)}}(t,n,i,e,o)}}function Qu(n,t,e){return n.createElement(t,e)}function bm(n,t){const e=n[Ho],r=e.indexOf(t),o=t[rt];512&t[ye]&&(t[ye]&=-513,vu(o,-1)),e.splice(r,1)}function Zu(n,t){if(n.length<=Gt)return;const e=Gt+t,r=n[e];if(r){const o=r[cs];null!==o&&o!==n&&bm(o,r),t>0&&(n[e-1][Vn]=r[Vn]);const i=rl(n,Gt+t);!function ux(n,t){Ss(n,t,t[be],2,null,null),t[Dr]=null,t[Vt]=null}(r[J],r);const s=i[ir];null!==s&&s.detachView(i[J]),r[rt]=null,r[Vn]=null,r[ye]&=-65}return r}function wm(n,t){if(!(128&t[ye])){const e=t[be];e.destroyNode&&Ss(n,t,e,3,null,null),function fx(n){let t=n[ls];if(!t)return Xu(n[J],n);for(;t;){let e=null;if(dn(t))e=t[ls];else{const r=t[Gt];r&&(e=r)}if(!e){for(;t&&!t[Vn]&&t!==n;)dn(t)&&Xu(t[J],t),t=t[rt];null===t&&(t=n),dn(t)&&Xu(t[J],t),e=t&&t[Vn]}t=e}}(t)}}function Xu(n,t){if(!(128&t[ye])){t[ye]&=-65,t[ye]|=128,function yx(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const o=t[e[r]];if(!(o instanceof fs)){const i=e[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],l=i[s+1];Tn(4,a,l);try{l.call(a)}finally{Tn(5,a,l)}}else{Tn(4,o,i);try{i.call(o)}finally{Tn(5,o,i)}}}}}(n,t),function mx(n,t){const e=n.cleanup,r=t[$o];let o=-1;if(null!==e)for(let i=0;i<e.length-1;i+=2)if("string"==typeof e[i]){const s=e[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=e[i+1]];e[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();t[$o]=null}}(n,t),1===t[J].type&&t[be].destroy();const e=t[cs];if(null!==e&&$n(t[rt])){e!==t[rt]&&bm(e,t);const r=t[ir];null!==r&&r.detachView(n)}!function XE(n){Hu.delete(n[us])}(t)}}function Dm(n,t,e){return function Sm(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[Dr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=n.data[r.directiveStart+o];if(i===or.None||i===or.Emulated)return null}return hn(r,e)}}(n,t.parent,e)}function vo(n,t,e,r,o){n.insertBefore(t,e,r,o)}function Em(n,t,e){n.appendChild(t,e)}function xm(n,t,e,r,o){null!==r?vo(n,t,e,r,o):Em(n,t,e)}function al(n,t){return n.parentNode(t)}let ed,id,dl,Tm=function Om(n,t,e){return 40&n.type?hn(n,e):null};function ll(n,t,e,r){const o=Dm(n,r,t),i=t[be],a=function Mm(n,t,e){return Tm(n,t,e)}(r.parent||t[Vt],r,t);if(null!=o)if(Array.isArray(e))for(let l=0;l<e.length;l++)xm(i,o,e[l],a,!1);else xm(i,o,e,a,!1);void 0!==ed&&ed(i,r,t,e,o)}function cl(n,t){if(null!==t){const e=t.type;if(3&e)return hn(t,n);if(4&e)return td(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return cl(n,r);{const o=n[t.index];return $n(o)?td(-1,o):kt(o)}}if(32&e)return Wu(t,n)()||kt(n[t.index]);{const r=Am(n,t);return null!==r?Array.isArray(r)?r[0]:cl(Ds(n[$t]),r):cl(n,t.next)}}return null}function Am(n,t){return null!==t?n[$t][Vt].projection[t.projection]:null}function td(n,t){const e=Gt+n+1;if(e<t.length){const r=t[e],o=r[J].firstChild;if(null!==o)return cl(r,o)}return t[Ha]}function rd(n,t,e,r,o,i,s){for(;null!=e;){const a=r[e.index],l=e.type;if(s&&0===t&&(a&&Ut(kt(a),r),e.flags|=2),32!=(32&e.flags))if(8&l)rd(n,t,e.child,r,o,i,!1),ei(t,n,o,a,i);else if(32&l){const c=Wu(e,r);let u;for(;u=c();)ei(t,n,o,u,i);ei(t,n,o,a,i)}else 16&l?Pm(n,t,r,e,o,i):ei(t,n,o,a,i);e=s?e.projectionNext:e.next}}function Ss(n,t,e,r,o,i){rd(e,r,n.firstChild,t,o,i,!1)}function Pm(n,t,e,r,o,i){const s=e[$t],l=s[Vt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ei(t,n,o,l[c],i);else rd(n,t,l,s[rt],o,i,!0)}function km(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Rm(n,t,e){const{mergedAttrs:r,classes:o,styles:i}=e;null!==r&&Tu(n,t,r),null!==o&&km(n,t,o),null!==i&&function Dx(n,t,e){n.setAttribute(t,"style",e)}(n,t,i)}function jm(n){return function sd(){if(void 0===dl&&(dl=null,We.trustedTypes))try{dl=We.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return dl}()?.createScriptURL(n)||n}class Vm{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tg})`}}function zr(n){return n instanceof Vm?n.changingThisBreaksApplicationSecurity:n}function Es(n,t){const e=function kx(n){return n instanceof Vm&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${tg})`)}return e===t}const Lx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var gt=(()=>((gt=gt||{})[gt.NONE=0]="NONE",gt[gt.HTML=1]="HTML",gt[gt.STYLE=2]="STYLE",gt[gt.SCRIPT=3]="SCRIPT",gt[gt.URL=4]="URL",gt[gt.RESOURCE_URL=5]="RESOURCE_URL",gt))();function Ms(n){const t=Os();return t?t.sanitize(gt.URL,n)||"":Es(n,"URL")?zr(n):function ad(n){return(n=String(n)).match(Lx)?n:"unsafe:"+n}(he(n))}function qm(n){const t=Os();if(t)return jm(t.sanitize(gt.RESOURCE_URL,n)||"");if(Es(n,"ResourceURL"))return jm(zr(n));throw new U(904,!1)}function Os(){const n=j();return n&&n[gu]}const fl=new X("ENVIRONMENT_INITIALIZER"),Km=new X("INJECTOR",-1),Jm=new X("INJECTOR_DEF_TYPES");class Ym{get(t,e=os){if(e===os){const r=new Error(`NullInjectorError: No provider for ${$e(t)}!`);throw r.name="NullInjectorError",r}return e}}function Qx(...n){return{\u0275providers:Qm(0,n),\u0275fromNgModule:!0}}function Qm(n,...t){const e=[],r=new Set;let o;return _o(t,i=>{const s=i;dd(s,e,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&Zm(o,e),e}function Zm(n,t){for(let e=0;e<n.length;e++){const{providers:o}=n[e];hd(o,i=>{t.push(i)})}}function dd(n,t,e,r){if(!(n=se(n)))return!1;let o=null,i=rg(n);const s=!i&&Ae(n);if(i||s){if(s&&!s.standalone)return!1;o=n}else{const l=n.ngModule;if(i=rg(l),!i)return!1;o=l}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)dd(c,t,e,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{_o(i.imports,u=>{dd(u,t,e,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&Zm(c,t)}if(!a){const c=go(o)||(()=>new o);t.push({provide:o,useFactory:c,deps:Oe},{provide:Jm,useValue:o,multi:!0},{provide:fl,useValue:()=>K(o),multi:!0})}const l=i.providers;null==l||a||hd(l,u=>{t.push(u)})}}return o!==n&&void 0!==n.providers}function hd(n,t){for(let e of n)lu(e)&&(e=e.\u0275providers),Array.isArray(e)?hd(e,t):t(e)}const Zx=Le({provide:String,useValue:Le});function fd(n){return null!==n&&"object"==typeof n&&Zx in n}function Co(n){return"function"==typeof n}const pd=new X("Set Injector scope."),pl={},e1={};let gd;function gl(){return void 0===gd&&(gd=new Ym),gd}class lr{}class ty extends lr{get destroyed(){return this._destroyed}constructor(t,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yd(t,s=>this.processProvider(s)),this.records.set(Km,ni(void 0,this)),o.has("environment")&&this.records.set(lr,ni(void 0,this));const i=this.records.get(pd);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Jm.multi,Oe,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=jo(this),r=Mn(void 0);try{return t()}finally{jo(e),Mn(r)}}get(t,e=os,r=ae.Default){this.assertNotDestroyed(),r=ja(r);const o=jo(this),i=Mn(void 0);try{if(!(r&ae.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function i1(n){return"function"==typeof n||"object"==typeof n&&n instanceof X}(t)&&Na(t);a=l&&this.injectableDefInScope(l)?ni(md(t),pl):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&ae.Self?gl():this.parent).get(t,e=r&ae.Optional&&e===os?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[La]=s[La]||[]).unshift($e(t)),o)throw s;return function IS(n,t,e,r){const o=n[La];throw t[sg]&&o.unshift(t[sg]),n.message=function AS(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==MS?n.slice(2):n;let o=$e(t);if(Array.isArray(t))o=t.map($e).join(" -> ");else if("object"==typeof t){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):$e(a)))}o=`{${i.join(", ")}}`}return`${e}${r?"("+r+")":""}[${o}]: ${n.replace(xS,"\n  ")}`}("\n"+n.message,o,e,r),n[ES]=o,n[La]=null,n}(s,t,"R3InjectorError",this.source)}throw s}finally{Mn(i),jo(o)}}resolveInjectorInitializers(){const t=jo(this),e=Mn(void 0);try{const r=this.get(fl.multi,Oe,ae.Self);for(const o of r)o()}finally{jo(t),Mn(e)}}toString(){const t=[],e=this.records;for(const r of e.keys())t.push($e(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(t){let e=Co(t=se(t))?t:se(t&&t.provide);const r=function n1(n){return fd(n)?ni(void 0,n.useValue):ni(ny(n),pl)}(t);if(Co(t)||!0!==t.multi)this.records.get(e);else{let o=this.records.get(e);o||(o=ni(void 0,pl,!0),o.factory=()=>hu(o.multi),this.records.set(e,o)),e=t,o.multi.push(t)}this.records.set(e,r)}hydrate(t,e){return e.value===pl&&(e.value=e1,e.value=e.factory()),"object"==typeof e.value&&e.value&&function o1(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=se(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function md(n){const t=Na(n),e=null!==t?t.factory:go(n);if(null!==e)return e;if(n instanceof X)throw new U(204,!1);if(n instanceof Function)return function t1(n){const t=n.length;if(t>0)throw function ys(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}(t,"?"),new U(204,!1);const e=function wS(n){return n&&(n[Fa]||n[og])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new U(204,!1)}function ny(n,t,e){let r;if(Co(n)){const o=se(n);return go(o)||md(o)}if(fd(n))r=()=>se(n.useValue);else if(function ey(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...hu(n.deps||[]));else if(function Xm(n){return!(!n||!n.useExisting)}(n))r=()=>K(se(n.useExisting));else{const o=se(n&&(n.useClass||n.provide));if(!function r1(n){return!!n.deps}(n))return go(o)||md(o);r=()=>new o(...hu(n.deps))}return r}function ni(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function yd(n,t){for(const e of n)Array.isArray(e)?yd(e,t):e&&lu(e)?yd(e.\u0275providers,t):t(e)}class s1{}class ry{}class l1{resolveComponentFactory(t){throw function a1(n){const t=Error(`No component factory found for ${$e(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let Ts=(()=>{class n{}return n.NULL=new l1,n})();function c1(){return ri(Rt(),j())}function ri(n,t){return new pn(hn(n,t))}let pn=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=c1,n})();function u1(n){return n instanceof pn?n.nativeElement:n}class iy{}let Mr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function d1(){const n=j(),e=on(Rt().index,n);return(dn(e)?e:n)[be]}(),n})(),h1=(()=>{class n{}return n.\u0275prov=Z({token:n,providedIn:"root",factory:()=>null}),n})();class Is{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const f1=new Is("15.2.10"),_d={},vd="ngOriginalError";function Cd(n){return n[vd]}class oi{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Cd(t);for(;e&&Cd(e);)e=Cd(e);return e||null}}function sy(n){return n.ownerDocument}function Or(n){return n instanceof Function?n():n}function ly(n,t,e){let r=n.length;for(;;){const o=n.indexOf(t,e);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const i=t.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}e=o+1}}const cy="ng-template";function D1(n,t,e){let r=0,o=!0;for(;r<n.length;){let i=n[r++];if("string"==typeof i&&o){const s=n[r++];if(e&&"class"===i&&-1!==ly(s.toLowerCase(),t,0))return!0}else{if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===t)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function uy(n){return 4===n.type&&n.value!==cy}function S1(n,t,e){return t===(4!==n.type||e?n.value:cy)}function E1(n,t,e){let r=4;const o=n.attrs||[],i=function O1(n){for(let t=0;t<n.length;t++)if(Lg(n[t]))return t;return n.length}(o);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!S1(n,l,e)||""===l&&1===t.length){if(Bn(r))return!1;s=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==n.attrs){if(!D1(n.attrs,c,e)){if(Bn(r))return!1;s=!0}continue}const d=x1(8&r?"class":l,o,uy(n),e);if(-1===d){if(Bn(r))return!1;s=!0;continue}if(""!==c){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==ly(f,c,0)||2&r&&c!==h){if(Bn(r))return!1;s=!0}}}}else{if(!s&&!Bn(r)&&!Bn(l))return!1;if(s&&Bn(l))continue;s=!1,r=l|1&r}}return Bn(r)||s}function Bn(n){return 0==(1&n)}function x1(n,t,e,r){if(null===t)return-1;let o=0;if(r||!e){let i=!1;for(;o<t.length;){const s=t[o];if(s===n)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=t[++o];for(;"string"==typeof a;)a=t[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function T1(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function dy(n,t,e=!1){for(let r=0;r<t.length;r++)if(E1(n,t[r],e))return!0;return!1}function hy(n,t){return n?":not("+t.trim()+")":t}function A1(n){let t=n[0],e=1,r=2,o="",i=!1;for(;e<n.length;){let s=n[e];if("string"==typeof s)if(2&r){const a=n[++e];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Bn(s)&&(t+=hy(i,o),o=""),r=s,i=i||!Bn(r);e++}return""!==o&&(t+=hy(i,o)),t}const pe={};function C(n){fy(Me(),j(),Wt()+n,!1)}function fy(n,t,e,r){if(!r)if(3==(3&t[ye])){const i=n.preOrderCheckHooks;null!==i&&Ja(t,i,e)}else{const i=n.preOrderHooks;null!==i&&Ya(t,i,0,e)}mo(e)}function yy(n,t=null,e=null,r){const o=_y(n,t,e,r);return o.resolveInjectorInitializers(),o}function _y(n,t=null,e=null,r,o=new Set){const i=[e||Oe,Qx(n)];return r=r||("object"==typeof n?void 0:$e(n)),new ty(i,t||gl(),r||null,o)}let cr=(()=>{class n{static create(e,r){if(Array.isArray(e))return yy({name:""},r,e,"");{const o=e.name??"";return yy({name:o},e.parent,e.providers,o)}}}return n.THROW_IF_NOT_FOUND=os,n.NULL=new Ym,n.\u0275prov=Z({token:n,providedIn:"any",factory:()=>K(Km)}),n.__NG_ELEMENT_ID__=-1,n})();function A(n,t=ae.Default){const e=j();return null===e?K(n,t):qg(Rt(),e,se(n),t)}function xy(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const i=e[r+1];if(-1!==i){const s=n.data[i];Su(e[r]),s.contentQueries(2,t[i],i)}}}function yl(n,t,e,r,o,i,s,a,l,c,u){const d=t.blueprint.slice();return d[Dr]=o,d[ye]=76|r,(null!==u||n&&1024&n[ye])&&(d[ye]|=1024),Dg(d),d[rt]=d[Uo]=n,d[lt]=e,d[Ba]=s||n&&n[Ba],d[be]=a||n&&n[be],d[gu]=l||n&&n[gu]||null,d[Ua]=c||n&&n[Ua]||null,d[Vt]=i,d[us]=function QE(){return YE++}(),d[fg]=u,d[$t]=2==t.type?n[$t]:d,d}function ai(n,t,e,r,o){let i=n.data[t];if(null===i)i=function Ed(n,t,e,r,o){const i=xg(),s=Cu(),l=n.data[t]=function rM(n,t,e,r,o,i){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,e,t,r,o);return null===n.firstChild&&(n.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(n,t,e,r,o),function tE(){return fe.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=e,i.value=r,i.attrs=o;const s=function hs(){const n=fe.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return sr(i,!0),i}function As(n,t,e,r){if(0===e)return-1;const o=t.length;for(let i=0;i<e;i++)t.push(r),n.blueprint.push(r),n.data.push(null);return o}function xd(n,t,e){Eu(t);try{const r=n.viewQuery;null!==r&&Nd(1,r,e);const o=n.template;null!==o&&My(n,t,o,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&xy(n,t),n.staticViewQueries&&Nd(2,n.viewQuery,e);const i=n.components;null!==i&&function eM(n,t){for(let e=0;e<t.length;e++)DM(n,t[e])}(t,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[ye]&=-5,xu()}}function _l(n,t,e,r){const o=t[ye];if(128!=(128&o)){Eu(t);try{Dg(t),function Og(n){return fe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&My(n,t,e,2,r);const s=3==(3&o);if(s){const c=n.preOrderCheckHooks;null!==c&&Ja(t,c,null)}else{const c=n.preOrderHooks;null!==c&&Ya(t,c,0,null),Mu(t,0)}if(function bM(n){for(let t=Ku(n);null!==t;t=Ju(t)){if(!t[pg])continue;const e=t[Ho];for(let r=0;r<e.length;r++){const o=e[r];512&o[ye]||vu(o[rt],1),o[ye]|=512}}}(t),function CM(n){for(let t=Ku(n);null!==t;t=Ju(t))for(let e=Gt;e<t.length;e++){const r=t[e],o=r[J];Wa(r)&&_l(o,r,o.template,r[lt])}}(t),null!==n.contentQueries&&xy(n,t),s){const c=n.contentCheckHooks;null!==c&&Ja(t,c)}else{const c=n.contentHooks;null!==c&&Ya(t,c,1),Mu(t,1)}!function Z1(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const o=e[r];if(o<0)mo(~o);else{const i=o,s=e[++r],a=e[++r];nE(s,i),a(2,t[i])}}}finally{mo(-1)}}(n,t);const a=n.components;null!==a&&function X1(n,t){for(let e=0;e<t.length;e++)wM(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&Nd(2,l,r),s){const c=n.viewCheckHooks;null!==c&&Ja(t,c)}else{const c=n.viewHooks;null!==c&&Ya(t,c,2),Mu(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[ye]&=-41,512&t[ye]&&(t[ye]&=-513,vu(t[rt],-1))}finally{xu()}}}function My(n,t,e,r,o){const i=Wt(),s=2&r;try{mo(-1),s&&t.length>Ke&&fy(n,t,Ke,!1),Tn(s?2:0,o),e(r,o)}finally{mo(i),Tn(s?3:1,o)}}function Md(n,t,e){if(yu(t)){const o=t.directiveEnd;for(let i=t.directiveStart;i<o;i++){const s=n.data[i];s.contentQueries&&s.contentQueries(1,e[i],i)}}}function Od(n,t,e){Eg()&&(function uM(n,t,e,r){const o=e.directiveStart,i=e.directiveEnd;ds(e)&&function yM(n,t,e){const r=hn(t,n),o=Oy(e),i=n[Ba],s=vl(n,yl(n,o,null,e.onPush?32:16,r,t,i,i.createRenderer(r,e),null,null,null));n[t.index]=s}(t,e,n.data[o+e.componentOffset]),n.firstCreatePass||el(e,t),Ut(r,t);const s=e.initialInputs;for(let a=o;a<i;a++){const l=n.data[a],c=yo(t,n,a,e);Ut(c,t),null!==s&&_M(0,a-o,c,l,0,s),Un(l)&&(on(e.index,t)[lt]=yo(t,n,a,e))}}(n,t,e,hn(e,t)),64==(64&e.flags)&&ky(n,t,e))}function Td(n,t,e=hn){const r=t.localNames;if(null!==r){let o=t.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?e(t,n):n[s];n[o++]=a}}}function Oy(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Id(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Id(n,t,e,r,o,i,s,a,l,c){const u=Ke+r,d=u+o,h=function tM(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:pe);return e}(u,d),f="function"==typeof c?c():c;return h[J]={type:n,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Ty(n,t,e,r){const o=Ny(t);null===e?o.push(r):(o.push(e),n.firstCreatePass&&Fy(n).push(r,o.length-1))}function Iy(n,t,e,r){for(let o in n)if(n.hasOwnProperty(o)){e=null===e?{}:e;const i=n[o];null===r?Ay(e,t,o,i):r.hasOwnProperty(o)&&Ay(e,t,r[o],i)}return e}function Ay(n,t,e,r){n.hasOwnProperty(e)?n[e].push(t,r):n[e]=[t,r]}function Ad(n,t,e,r){if(Eg()){const o=null===r?null:{"":-1},i=function hM(n,t){const e=n.directiveRegistry;let r=null,o=null;if(e)for(let i=0;i<e.length;i++){const s=e[i];if(dy(t,s.selectors,!1))if(r||(r=[]),Un(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Pd(n,t,a.length)}else r.unshift(s),Pd(n,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(n,e);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&Py(n,t,e,s,o,a),o&&function fM(n,t,e){if(t){const r=n.localNames=[];for(let o=0;o<t.length;o+=2){const i=e[t[o+1]];if(null==i)throw new U(-301,!1);r.push(t[o],i)}}}(e,r,o)}e.mergedAttrs=ps(e.mergedAttrs,e.attrs)}function Py(n,t,e,r,o,i){for(let c=0;c<r.length;c++)ku(el(e,t),n,r[c].type);!function gM(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=As(n,t,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];e.mergedAttrs=ps(e.mergedAttrs,u.hostAttrs),mM(n,e,t,l,u),pM(l,u,o),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function oM(n,t,e){const o=t.directiveEnd,i=n.data,s=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<o;u++){const d=i[u],h=e?e.get(d):null,p=h?h.outputs:null;l=Iy(d.inputs,u,l,h?h.inputs:null),c=Iy(d.outputs,u,c,p);const y=null===l||null===s||uy(t)?null:vM(l,u,s);a.push(y)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(n,e,i)}function ky(n,t,e){const r=e.directiveStart,o=e.directiveEnd,i=e.index,s=function rE(){return fe.lFrame.currentDirectiveIndex}();try{mo(i);for(let a=r;a<o;a++){const l=n.data[a],c=t[a];wu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&dM(l,c)}}finally{mo(-1),wu(s)}}function dM(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function Pd(n,t,e){t.componentOffset=e,(n.components??(n.components=[])).push(t.index)}function pM(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;Un(t)&&(e[""]=n)}}function mM(n,t,e,r,o){n.data[r]=o;const i=o.factory||(o.factory=go(o.type)),s=new fs(i,Un(o),A);n.blueprint[r]=s,e[r]=s,function lM(n,t,e,r,o){const i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~t.index;(function cM(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,r,i)}}(n,t,r,As(n,e,o.hostVars,pe),o)}function ur(n,t,e,r,o,i){const s=hn(n,t);!function kd(n,t,e,r,o,i,s){if(null==i)n.removeAttribute(t,o,e);else{const a=null==s?he(i):s(i,r||"",o);n.setAttribute(t,o,a,e)}}(t[be],s,i,n.value,e,r,o)}function _M(n,t,e,r,o,i){const s=i[t];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(e,d,c,u):e[u]=d}}}function vM(n,t,e){let r=null,o=0;for(;o<e.length;){const i=e[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const s=n[i];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(i,s[a+1],e[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Ry(n,t,e,r){return[n,!0,!1,t,null,0,r,e,null,null]}function wM(n,t){const e=on(t,n);if(Wa(e)){const r=e[J];48&e[ye]?_l(r,e,r.template,e[lt]):e[po]>0&&Rd(e)}}function Rd(n){for(let r=Ku(n);null!==r;r=Ju(r))for(let o=Gt;o<r.length;o++){const i=r[o];if(Wa(i))if(512&i[ye]){const s=i[J];_l(s,i,s.template,i[lt])}else i[po]>0&&Rd(i)}const e=n[J].components;if(null!==e)for(let r=0;r<e.length;r++){const o=on(e[r],n);Wa(o)&&o[po]>0&&Rd(o)}}function DM(n,t){const e=on(t,n),r=e[J];(function SM(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),xd(r,e,e[lt])}function vl(n,t){return n[ls]?n[hg][Vn]=t:n[ls]=t,n[hg]=t,t}function Cl(n){for(;n;){n[ye]|=32;const t=Ds(n);if(LS(n)&&!t)return n;n=t}return null}function bl(n,t,e,r=!0){const o=t[Ba];o.begin&&o.begin();try{_l(n,t,n.template,e)}catch(s){throw r&&jy(t,s),s}finally{o.end&&o.end()}}function Nd(n,t,e){Su(0),t(n,e)}function Ny(n){return n[$o]||(n[$o]=[])}function Fy(n){return n.cleanup||(n.cleanup=[])}function jy(n,t){const e=n[Ua],r=e?e.get(oi,null):null;r&&r.handleError(t)}function Fd(n,t,e,r,o){for(let i=0;i<e.length;){const s=e[i++],a=e[i++],l=t[s],c=n.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function Tr(n,t,e){const r=qa(t,n);!function Cm(n,t,e){n.setValue(t,e)}(n[be],r,e)}function wl(n,t,e){let r=e?n.styles:null,o=e?n.classes:null,i=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?i=a:1==i?o=su(o,a):2==i&&(r=su(r,a+": "+t[++s]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=o:n.classesWithoutHost=o}function Dl(n,t,e,r,o=!1){for(;null!==e;){const i=t[e.index];if(null!==i&&r.push(kt(i)),$n(i))for(let a=Gt;a<i.length;a++){const l=i[a],c=l[J].firstChild;null!==c&&Dl(l[J],l,c,r)}const s=e.type;if(8&s)Dl(n,t,e.child,r);else if(32&s){const a=Wu(e,t);let l;for(;l=a();)r.push(l)}else if(16&s){const a=Am(t,e);if(Array.isArray(a))r.push(...a);else{const l=Ds(t[$t]);Dl(l[J],l,a,r,!0)}}e=o?e.projectionNext:e.next}return r}class Ps{get rootNodes(){const t=this._lView,e=t[J];return Dl(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[lt]}set context(t){this._lView[lt]=t}get destroyed(){return 128==(128&this._lView[ye])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[rt];if($n(t)){const e=t[za],r=e?e.indexOf(this):-1;r>-1&&(Zu(t,r),rl(e,r))}this._attachedToViewContainer=!1}wm(this._lView[J],this._lView)}onDestroy(t){Ty(this._lView[J],this._lView,null,t)}markForCheck(){Cl(this._cdRefInjectingView||this._lView)}detach(){this._lView[ye]&=-65}reattach(){this._lView[ye]|=64}detectChanges(){bl(this._lView[J],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hx(n,t){Ss(n,t,t[be],2,null,null)}(this._lView[J],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=t}}class EM extends Ps{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;bl(t[J],t,t[lt],!1)}checkNoChanges(){}get context(){return null}}class Vy extends Ts{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ae(t);return new ks(e,this.ngModule)}}function $y(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class MM{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=ja(r);const o=this.injector.get(t,_d,r);return o!==_d||e===_d?o:this.parentInjector.get(t,e,r)}}class ks extends ry{get inputs(){return $y(this.componentDef.inputs)}get outputs(){return $y(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function P1(n){return n.map(A1).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,o){let i=(o=o||this.ngModule)instanceof lr?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new MM(t,i):t,a=s.get(iy,null);if(null===a)throw new U(407,!1);const l=s.get(h1,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function nM(n,t,e){return n.selectRootElement(t,e===or.ShadowDom)}(c,r,this.componentDef.encapsulation):Qu(c,u,function xM(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Id(0,null,null,1,0,null,null,null,null,null),p=yl(null,f,null,h,null,null,a,c,l,s,null);let y,_;Eu(p);try{const b=this.componentDef;let x,D=null;b.findHostDirectiveDefs?(x=[],D=new Map,b.findHostDirectiveDefs(b,x,D),x.push(b)):x=[b];const R=function TM(n,t){const e=n[J],r=Ke;return n[r]=t,ai(e,r,2,"#host",null)}(p,d),F=function IM(n,t,e,r,o,i,s,a){const l=o[J];!function AM(n,t,e,r){for(const o of n)t.mergedAttrs=ps(t.mergedAttrs,o.hostAttrs);null!==t.mergedAttrs&&(wl(t,t.mergedAttrs,!0),null!==e&&Rm(r,e,t))}(r,n,t,s);const c=i.createRenderer(t,e),u=yl(o,Oy(e),null,e.onPush?32:16,o[n.index],n,i,c,a||null,null,null);return l.firstCreatePass&&Pd(l,n,r.length-1),vl(o,u),o[n.index]=u}(R,d,b,x,p,a,c);_=wg(f,Ke),d&&function kM(n,t,e,r){if(r)Tu(n,e,["ng-version",f1.full]);else{const{attrs:o,classes:i}=function k1(n){const t=[],e=[];let r=1,o=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===o?""!==i&&t.push(i,n[++r]):8===o&&e.push(i);else{if(!Bn(o))break;o=i}r++}return{attrs:t,classes:e}}(t.selectors[0]);o&&Tu(n,e,o),i&&i.length>0&&km(n,e,i.join(" "))}}(c,b,d,r),void 0!==e&&function RM(n,t,e){const r=n.projection=[];for(let o=0;o<t.length;o++){const i=e[o];r.push(null!=i?Array.from(i):null)}}(_,this.ngContentSelectors,e),y=function PM(n,t,e,r,o,i){const s=Rt(),a=o[J],l=hn(s,o);Py(a,o,s,e,null,r);for(let u=0;u<e.length;u++)Ut(yo(o,a,s.directiveStart+u,s),o);ky(a,o,s),l&&Ut(l,o);const c=yo(o,a,s.directiveStart+s.componentOffset,s);if(n[lt]=o[lt]=c,null!==i)for(const u of i)u(c,t);return Md(a,s,n),c}(F,b,x,D,p,[NM]),xd(f,p,null)}finally{xu()}return new OM(this.componentType,y,ri(_,p),p,_)}}class OM extends s1{constructor(t,e,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new EM(o),this.componentType=t}setInput(t,e){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[t])){const i=this._rootLView;Fd(i[J],i,o,t,e),Cl(on(this._tNode.index,i))}}get injector(){return new Wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function NM(){const n=Rt();Ka(j()[J],n)}function ke(n){let t=function Uy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let o;if(Un(n))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new U(903,!1);o=t.\u0275dir}if(o){if(e){r.push(o);const s=n;s.inputs=Ld(n.inputs),s.declaredInputs=Ld(n.declaredInputs),s.outputs=Ld(n.outputs);const a=o.hostBindings;a&&VM(n,a);const l=o.viewQuery,c=o.contentQueries;if(l&&LM(n,l),c&&jM(n,c),iu(n.inputs,o.inputs),iu(n.declaredInputs,o.declaredInputs),iu(n.outputs,o.outputs),Un(o)&&o.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(n),a===ke&&(e=!1)}}t=Object.getPrototypeOf(t)}!function FM(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const o=n[r];o.hostVars=t+=o.hostVars,o.hostAttrs=ps(o.hostAttrs,e=ps(e,o.hostAttrs))}}(r)}function Ld(n){return n===br?{}:n===Oe?[]:n}function LM(n,t){const e=n.viewQuery;n.viewQuery=e?(r,o)=>{t(r,o),e(r,o)}:t}function jM(n,t){const e=n.contentQueries;n.contentQueries=e?(r,o,i)=>{t(r,o,i),e(r,o,i)}:t}function VM(n,t){const e=n.hostBindings;n.hostBindings=e?(r,o)=>{t(r,o),e(r,o)}:t}function Sl(n){return!!jd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function jd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function dr(n,t,e){return n[t]=e}function Bt(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function bo(n,t,e,r){const o=Bt(n,t,e);return Bt(n,t+1,r)||o}function Tt(n,t,e,r){const o=j();return Bt(o,Go(),t)&&(Me(),ur(Xe(),o,n,t,e,r)),Tt}function ui(n,t,e,r,o,i){const a=bo(n,function Sr(){return fe.lFrame.bindingIndex}(),e,o);return Er(2),a?t+he(e)+r+he(o)+i:pe}function z(n,t,e,r,o,i,s,a){const l=j(),c=Me(),u=n+Ke,d=c.firstCreatePass?function JM(n,t,e,r,o,i,s,a,l){const c=t.consts,u=ai(t,n,4,s||null,Hr(c,a));Ad(t,e,u,Hr(c,l)),Ka(t,u);const d=u.tView=Id(2,u,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,r,o,i,s):c.data[u];sr(d,!1);const h=l[be].createComment("");ll(c,l,h,d),Ut(h,l),vl(l,l[u]=Ry(h,l,h,d)),Ga(d)&&Od(c,l,d),null!=s&&Td(l,d,a)}function xl(n){return function zo(n,t){return n[t]}(function eE(){return fe.lFrame.contextLView}(),Ke+n)}function P(n,t,e){const r=j();return Bt(r,Go(),t)&&function gn(n,t,e,r,o,i,s,a){const l=hn(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[r])?(Fd(n,e,u,r,o),ds(t)&&function sM(n,t){const e=on(t,n);16&e[ye]||(e[ye]|=32)}(e,t.index)):3&t.type&&(r=function iM(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=s?s(o,t.value||"",r):o,i.setProperty(l,r,o))}(Me(),Xe(),r,n,t,r[be],e,!1),P}function Vd(n,t,e,r,o){const s=o?"class":"style";Fd(n,e,t.inputs[s],s,r)}function m(n,t,e,r){const o=j(),i=Me(),s=Ke+n,a=o[be],l=i.firstCreatePass?function QM(n,t,e,r,o,i){const s=t.consts,l=ai(t,n,2,r,Hr(s,o));return Ad(t,e,l,Hr(s,i)),null!==l.attrs&&wl(l,l.attrs,!1),null!==l.mergedAttrs&&wl(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,i,o,t,e,r):i.data[s],c=o[s]=Qu(a,t,function dE(){return fe.lFrame.currentNamespace}()),u=Ga(l);return sr(l,!0),Rm(a,c,l),32!=(32&l.flags)&&ll(i,o,c,l),0===function JS(){return fe.lFrame.elementDepthCount}()&&Ut(c,o),function YS(){fe.lFrame.elementDepthCount++}(),u&&(Od(i,o,l),Md(i,l,o)),null!==r&&Td(o,l),m}function g(){let n=Rt();Cu()?bu():(n=n.parent,sr(n,!1));const t=n;!function QS(){fe.lFrame.elementDepthCount--}();const e=Me();return e.firstCreatePass&&(Ka(e,n),yu(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function gE(n){return 0!=(8&n.flags)}(t)&&Vd(e,t,j(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function mE(n){return 0!=(16&n.flags)}(t)&&Vd(e,t,j(),t.stylesWithoutHost,!1),g}function Be(n,t,e,r){return m(n,t,e,r),g(),Be}function Gr(n,t,e){const r=j(),o=Me(),i=n+Ke,s=o.firstCreatePass?function ZM(n,t,e,r,o){const i=t.consts,s=Hr(i,r),a=ai(t,n,8,"ng-container",s);return null!==s&&wl(a,s,!0),Ad(t,e,a,Hr(i,o)),null!==t.queries&&t.queries.elementStart(t,a),a}(i,o,r,t,e):o.data[i];sr(s,!0);const a=r[i]=r[be].createComment("");return ll(o,r,a,s),Ut(a,r),Ga(s)&&(Od(o,r,s),Md(o,s,r)),null!=e&&Td(r,s),Gr}function qr(){let n=Rt();const t=Me();return Cu()?bu():(n=n.parent,sr(n,!1)),t.firstCreatePass&&(Ka(t,n),yu(n)&&t.queries.elementEnd(n)),qr}function Je(){return j()}function Ns(n){return!!n&&"function"==typeof n.then}const $d=function t_(n){return!!n&&"function"==typeof n.subscribe};function V(n,t,e,r){const o=j(),i=Me(),s=Rt();return function r_(n,t,e,r,o,i,s){const a=Ga(r),c=n.firstCreatePass&&Fy(n),u=t[lt],d=Ny(t);let h=!0;if(3&r.type||s){const y=hn(r,t),_=s?s(y):y,b=d.length,x=s?R=>s(kt(R[r.index])):r.index;let D=null;if(!s&&a&&(D=function XM(n,t,e,r){const o=n.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===e&&o[i+1]===r){const a=t[$o],l=o[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(n,t,o,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=i,D.__ngLastListenerFn__=i,h=!1;else{i=i_(r,t,u,i,!1);const R=e.listen(_,o,i);d.push(i,R),c&&c.push(o,x,b,b+1)}}else i=i_(r,t,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const y=p.length;if(y)for(let _=0;_<y;_+=2){const F=t[p[_]][p[_+1]].subscribe(i),Y=d.length;d.push(i,F),c&&c.push(o,r.index,Y,-(Y+1))}}}(i,o,o[be],s,n,t,r),V}function o_(n,t,e,r){try{return Tn(6,t,e),!1!==e(r)}catch(o){return jy(n,o),!1}finally{Tn(7,t,e)}}function i_(n,t,e,r,o){return function i(s){if(s===Function)return r;Cl(n.componentOffset>-1?on(n.index,t):t);let l=o_(t,e,r,s),c=i.__ngNextListenerFn__;for(;c;)l=o_(t,e,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function O(n=1){return function iE(n){return(fe.lFrame.contextLView=function sE(n,t){for(;n>0;)t=t[Uo],n--;return t}(n,fe.lFrame.contextLView))[lt]}(n)}function Ml(n,t){return n<<17|t<<2}function Wr(n){return n>>17&32767}function Bd(n){return 2|n}function wo(n){return(131068&n)>>2}function Hd(n,t){return-131069&n|t<<2}function zd(n){return 1|n}function g_(n,t,e,r,o){const i=n[e+1],s=null===t;let a=r?Wr(i):wo(i),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];lO(n[a],t)&&(l=!0,n[a+1]=r?zd(u):Bd(u)),a=r?Wr(u):wo(u)}l&&(n[e+1]=r?Bd(i):zd(i))}function lO(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Zo(n,t)>=0}function Fs(n,t,e){return Hn(n,t,e,!1),Fs}function et(n,t){return Hn(n,t,null,!0),et}function Hn(n,t,e,r){const o=j(),i=Me(),s=Er(2);i.firstUpdatePass&&function D_(n,t,e,r){const o=n.data;if(null===o[e+1]){const i=o[Wt()],s=function w_(n,t){return t>=n.expandoStartIndex}(n,e);(function M_(n,t){return 0!=(n.flags&(t?8:16))})(i,r)&&null===t&&!s&&(t=!1),t=function yO(n,t,e,r){const o=function Du(n){const t=fe.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let i=r?t.residualClasses:t.residualStyles;if(null===o)0===(r?t.classBindings:t.styleBindings)&&(e=Ls(e=Gd(null,n,t,e,r),t.attrs,r),i=null);else{const s=t.directiveStylingLast;if(-1===s||n[s]!==o)if(e=Gd(o,n,t,e,r),null===i){let l=function _O(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==wo(r))return n[Wr(r)]}(n,t,r);void 0!==l&&Array.isArray(l)&&(l=Gd(null,n,t,l[1],r),l=Ls(l,t.attrs,r),function vO(n,t,e,r){n[Wr(e?t.classBindings:t.styleBindings)]=r}(n,t,r,l))}else i=function CO(n,t,e){let r;const o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++)r=Ls(r,n[i].hostAttrs,e);return Ls(r,t.attrs,e)}(n,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),e}(o,i,t,r),function sO(n,t,e,r,o,i){let s=i?t.classBindings:t.styleBindings,a=Wr(s),l=wo(s);n[r]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Zo(e,u)>0)&&(c=!0)):u=e,o)if(0!==l){const h=Wr(n[a+1]);n[r+1]=Ml(h,a),0!==h&&(n[h+1]=Hd(n[h+1],r)),n[a+1]=function oO(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=Ml(a,0),0!==a&&(n[a+1]=Hd(n[a+1],r)),a=r;else n[r+1]=Ml(l,0),0===a?a=r:n[l+1]=Hd(n[l+1],r),l=r;c&&(n[r+1]=Bd(n[r+1])),g_(n,u,r,!0),g_(n,u,r,!1),function aO(n,t,e,r,o){const i=o?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof t&&Zo(i,t)>=0&&(e[r+1]=zd(e[r+1]))}(t,u,n,r,i),s=Ml(a,l),i?t.classBindings=s:t.styleBindings=s}(o,i,t,e,s,r)}}(i,n,s,r),t!==pe&&Bt(o,s,t)&&function E_(n,t,e,r,o,i,s,a){if(!(3&t.type))return;const l=n.data,c=l[a+1],u=function iO(n){return 1==(1&n)}(c)?x_(l,t,e,o,wo(c),s):void 0;Ol(u)||(Ol(i)||function rO(n){return 2==(2&n)}(c)&&(i=x_(l,null,e,o,a,s)),function wx(n,t,e,r,o){if(t)o?n.addClass(e,r):n.removeClass(e,r);else{let i=-1===r.indexOf("-")?void 0:sn.DashCase;null==o?n.removeStyle(e,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=sn.Important),n.setStyle(e,r,o,i))}}(r,s,qa(Wt(),e),o,i))}(i,i.data[Wt()],o,o[be],n,o[s+1]=function SO(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=$e(zr(n)))),n}(t,e),r,s)}function Gd(n,t,e,r,o){let i=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(i=t[a],r=Ls(r,i.hostAttrs,o),i!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function Ls(n,t,e){const r=e?1:2;let o=-1;if(null!==t)for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?o=s:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),fn(n,s,!!e||t[++i]))}return void 0===n?null:n}function x_(n,t,e,r,o,i){const s=null===t;let a;for(;o>0;){const l=n[o],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[o+1];h===pe&&(h=d?Oe:void 0);let f=d?Lu(h,r):u===r?h:void 0;if(c&&!Ol(f)&&(f=Lu(l,r)),Ol(f)&&(a=f,s))return a;const p=n[o+1];o=s?Wr(p):wo(p)}if(null!==t){let l=i?t.residualClasses:t.residualStyles;null!=l&&(a=Lu(l,r))}return a}function Ol(n){return void 0!==n}function v(n,t=""){const e=j(),r=Me(),o=n+Ke,i=r.firstCreatePass?ai(r,o,1,t,null):r.data[o],s=e[o]=function Yu(n,t){return n.createText(t)}(e[be],t);ll(r,e,s,i),sr(i,!1)}function He(n){return xe("",n,""),He}function xe(n,t,e){const r=j(),o=function ci(n,t,e,r){return Bt(n,Go(),e)?t+he(e)+r:pe}(r,n,t,e);return o!==pe&&Tr(r,Wt(),o),xe}function mn(n,t,e,r,o){const i=j(),s=ui(i,n,t,e,r,o);return s!==pe&&Tr(i,Wt(),s),mn}const vi="en-US";let K_=vi;function Kd(n,t,e,r,o){if(n=se(n),Array.isArray(n))for(let i=0;i<n.length;i++)Kd(n[i],t,e,r,o);else{const i=Me(),s=j();let a=Co(n)?n:se(n.provide),l=ny(n);const c=Rt(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Co(n)||!n.multi){const f=new fs(l,o,A),p=Yd(a,t,o?u:u+h,d);-1===p?(ku(el(c,s),i,a),Jd(i,n,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(f),s.push(f)):(e[p]=f,s[p]=f)}else{const f=Yd(a,t,u+h,d),p=Yd(a,t,u,u+h),_=p>=0&&e[p];if(o&&!_||!o&&!(f>=0&&e[f])){ku(el(c,s),i,a);const b=function BT(n,t,e,r,o){const i=new fs(n,e,A);return i.multi=[],i.index=t,i.componentProviders=0,vv(i,o,r&&!e),i}(o?UT:$T,e.length,o,r,l);!o&&_&&(e[p].providerFactory=b),Jd(i,n,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(b),s.push(b)}else Jd(i,n,f>-1?f:p,vv(e[o?p:f],l,!o&&r));!o&&r&&_&&e[p].componentProviders++}}}function Jd(n,t,e,r){const o=Co(t),i=function Xx(n){return!!n.useClass}(t);if(o||i){const l=(i?se(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!o&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function vv(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Yd(n,t,e,r){for(let o=e;o<r;o++)if(t[o]===n)return o;return-1}function $T(n,t,e,r){return Qd(this.multi,[])}function UT(n,t,e,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=yo(e,e[J],this.providerFactory.index,r);i=a.slice(0,s),Qd(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],Qd(o,i);return i}function Qd(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Qe(n,t=[]){return e=>{e.providersResolver=(r,o)=>function VT(n,t,e){const r=Me();if(r.firstCreatePass){const o=Un(n);Kd(e,r.data,r.blueprint,o,!0),Kd(t,r.data,r.blueprint,o,!1)}}(r,o?o(n):n,t)}}class Ci{}class Cv{}class bv extends Ci{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Vy(this);const r=un(t);this._bootstrapComponents=Or(r.bootstrap),this._r3Injector=_y(t,e,[{provide:Ci,useValue:this},{provide:Ts,useValue:this.componentFactoryResolver}],$e(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Zd extends Cv{constructor(t){super(),this.moduleType=t}create(t){return new bv(this.moduleType,t)}}class zT extends Ci{constructor(t,e,r){super(),this.componentFactoryResolver=new Vy(this),this.instance=null;const o=new ty([...t,{provide:Ci,useValue:this},{provide:Ts,useValue:this.componentFactoryResolver}],e||gl(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function kl(n,t,e=null){return new zT(n,t,e).injector}let GT=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const r=Qm(0,e.type),o=r.length>0?kl([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,o)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n(K(lr))}),n})();function wv(n){n.getStandaloneInjector=t=>t.get(GT).getOrCreateStandaloneInjector(n)}function bi(n,t,e){const r=qt()+n,o=j();return o[r]===pe?dr(o,r,e?t.call(e):t()):function Rs(n,t){return n[t]}(o,r)}function eh(n,t,e,r,o){return function Av(n,t,e,r,o,i,s){const a=t+e;return bo(n,a,o,i)?dr(n,a+2,s?r.call(s,o,i):r(o,i)):Hs(n,a+2)}(j(),qt(),n,t,e,r,o)}function Tv(n,t,e,r,o,i){return function Pv(n,t,e,r,o,i,s,a){const l=t+e;return function El(n,t,e,r,o){const i=bo(n,t,e,r);return Bt(n,t+2,o)||i}(n,l,o,i,s)?dr(n,l+3,a?r.call(a,o,i,s):r(o,i,s)):Hs(n,l+3)}(j(),qt(),n,t,e,r,o,i)}function Hs(n,t){const e=n[t];return e===pe?void 0:e}function th(n){return t=>{setTimeout(n,void 0,t)}}const it=class pI extends S{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){let o=t,i=e||(()=>null),s=r;if(t&&"object"==typeof t){const l=t;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=th(i),o&&(o=th(o)),s&&(s=th(s)));const a=super.subscribe({next:o,error:i,complete:s});return t instanceof I&&t.add(a),a}};function gI(){return this._results[Symbol.iterator]()}class nh{get changes(){return this._changes||(this._changes=new it)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=nh.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=gI)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const o=function In(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function xE(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],i=t[r];if(e&&(o=e(o),i=e(i)),i!==o)return!1}return!0}(r._results,o,e))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ir=(()=>{class n{}return n.__NG_ELEMENT_ID__=_I,n})();const mI=Ir,yI=class extends mI{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t,e){const r=this._declarationTContainer.tView,o=yl(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,e||null);o[cs]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[ir];return null!==s&&(o[ir]=s.createEmbeddedView(r)),xd(r,o,t),new Ps(o)}};function _I(){return Rl(Rt(),j())}function Rl(n,t){return 4&n.type?new yI(t,n,ri(n,t)):null}let Gn=(()=>{class n{}return n.__NG_ELEMENT_ID__=vI,n})();function vI(){return Lv(Rt(),j())}const CI=Gn,Nv=class extends CI{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return ri(this._hostTNode,this._hostLView)}get injector(){return new Wo(this._hostTNode,this._hostLView)}get parentInjector(){const t=Pu(this._hostTNode,this._hostLView);if($g(t)){const e=Za(t,this._hostLView),r=Qa(t);return new Wo(e[J].data[r+8],e)}return new Wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Fv(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(t,e,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=t.createEmbeddedView(e||{},i);return this.insert(s,o),s}createComponent(t,e,r,o,i){const s=t&&!function ms(n){return"function"==typeof n}(t);let a;if(s)a=e;else{const d=e||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const l=s?t:new ks(Ae(t)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const h=(s?c:this.parentInjector).get(lr,null);h&&(i=h)}const u=l.create(c,o,void 0,i);return this.insert(u.hostView,a),u}insert(t,e){const r=t._lView,o=r[J];if(function KS(n){return $n(n[rt])}(r)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const d=r[rt],h=new Nv(d,d[Vt],d[rt]);h.detach(h.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function px(n,t,e,r){const o=Gt+r,i=e.length;r>0&&(e[o-1][Vn]=t),r<i-Gt?(t[Vn]=e[o],Zg(e,Gt+r,t)):(e.push(t),t[Vn]=null),t[rt]=e;const s=t[cs];null!==s&&e!==s&&function gx(n,t){const e=n[Ho];t[$t]!==t[rt][rt][$t]&&(n[pg]=!0),null===e?n[Ho]=[t]:e.push(t)}(s,t);const a=t[ir];null!==a&&a.insertView(n),t[ye]|=64}(o,r,s,i);const a=td(i,s),l=r[be],c=al(l,s[Ha]);return null!==c&&function dx(n,t,e,r,o,i){r[Dr]=o,r[Vt]=t,Ss(n,r,e,1,o,i)}(o,s[Vt],l,r,c,a),t.attachToViewContainerRef(),Zg(rh(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Fv(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=Zu(this._lContainer,e);r&&(rl(rh(this._lContainer),e),wm(r[J],r))}detach(t){const e=this._adjustIndex(t,-1),r=Zu(this._lContainer,e);return r&&null!=rl(rh(this._lContainer),e)?new Ps(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Fv(n){return n[za]}function rh(n){return n[za]||(n[za]=[])}function Lv(n,t){let e;const r=t[n.index];if($n(r))e=r;else{let o;if(8&n.type)o=kt(r);else{const i=t[be];o=i.createComment("");const s=hn(n,t);vo(i,al(i,s),o,function vx(n,t){return n.nextSibling(t)}(i,s),!1)}t[n.index]=e=Ry(r,t,o,n),vl(t,e)}return new Nv(e,n,t)}class oh{constructor(t){this.queryList=t,this.matches=null}clone(){return new oh(this.queryList)}setDirty(){this.queryList.setDirty()}}class ih{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,o=[];for(let i=0;i<r;i++){const s=e.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new ih(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Gv(t,e).matches&&this.queries[e].setDirty()}}class jv{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class sh{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const o=null!==e?e.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,null!==e?e.push(i):e=[i])}return null!==e?new sh(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ah{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ah(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(t,e,bI(e,i)),this.matchTNodeWithReadOption(t,e,tl(e,t,i,!1,!1))}else r===Ir?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,tl(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===pn||o===Gn||o===Ir&&4&e.type)this.addMatch(e.index,-2);else{const i=tl(e,t,o,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function bI(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function DI(n,t,e,r){return-1===e?function wI(n,t){return 11&n.type?ri(n,t):4&n.type?Rl(n,t):null}(t,n):-2===e?function SI(n,t,e){return e===pn?ri(t,n):e===Ir?Rl(t,n):e===Gn?Lv(t,n):void 0}(n,t,r):yo(n,n[J],e,t)}function Vv(n,t,e,r){const o=t[ir].queries[r];if(null===o.matches){const i=n.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:DI(t,i[c],s[l+1],e.metadata.read))}o.matches=a}return o.matches}function lh(n,t,e,r){const o=n.queries.getByIndex(e),i=o.matches;if(null!==i){const s=Vv(n,t,o,e);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(s[a/2]);else{const c=i[a+1],u=t[-l];for(let d=Gt;d<u.length;d++){const h=u[d];h[cs]===h[rt]&&lh(h[J],h,c,r)}if(null!==u[Ho]){const d=u[Ho];for(let h=0;h<d.length;h++){const f=d[h];lh(f[J],f,c,r)}}}}}return r}function $v(n){const t=j(),e=Me(),r=Ig();Su(r+1);const o=Gv(e,r);if(n.dirty&&function WS(n){return 4==(4&n[ye])}(t)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{const i=o.crossesNgTemplate?lh(e,t,r,[]):Vv(e,t,o,r);n.reset(i,u1),n.notifyOnChanges()}return!0}return!1}function Uv(n,t,e,r){const o=Me();if(o.firstCreatePass){const i=Rt();(function zv(n,t,e){null===n.queries&&(n.queries=new sh),n.queries.track(new ah(t,e))})(o,new jv(t,e,r),i.index),function MI(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(o,n),2==(2&e)&&(o.staticContentQueries=!0)}!function Hv(n,t,e){const r=new nh(4==(4&e));Ty(n,t,r,r.destroy),null===t[ir]&&(t[ir]=new ih),t[ir].queries.push(new oh(r))}(o,j(),e)}function Gv(n,t){return n.queries.getByIndex(t)}function ch(n,t){return Rl(n,t)}function Fl(...n){}const Ll=new X("Application Initializer");let jl=(()=>{class n{constructor(e){this.appInits=e,this.resolve=Fl,this.reject=Fl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(Ns(i))e.push(i);else if($d(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});e.push(s)}}Promise.all(e).then(()=>{r()}).catch(o=>{this.reject(o)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(K(Ll,8))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qs=new X("AppId",{providedIn:"root",factory:function cC(){return`${gh()}${gh()}${gh()}`}});function gh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uC=new X("Platform Initializer"),mh=new X("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let WI=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ar=new X("LocaleId",{providedIn:"root",factory:()=>Ce(Ar,ae.Optional|ae.SkipSelf)||function KI(){return typeof $localize<"u"&&$localize.locale||vi}()});class YI{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let dC=(()=>{class n{compileModuleSync(e){return new Zd(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),i=Or(un(e).declarations).reduce((s,a)=>{const l=Ae(a);return l&&s.push(new ks(l)),s},[]);return new YI(r,i)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI=(()=>Promise.resolve(0))();function yh(n){typeof Zone>"u"?XI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ct{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&e,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function eA(){let n=We.requestAnimationFrame,t=We.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function rA(n){const t=()=>{!function nA(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(We,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,vh(n),n.isCheckStableRunning=!0,_h(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),vh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,o,i,s,a)=>{try{return pC(n),e.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&t(),gC(n)}},onInvoke:(e,r,o,i,s,a,l)=>{try{return pC(n),e.invoke(o,i,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),gC(n)}},onHasTask:(e,r,o,i)=>{e.hasTask(o,i),r===o&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,vh(n),_h(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,r,o,i)=>(e.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ct.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(ct.isInAngularZone())throw new U(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,tA,Fl,Fl);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const tA={};function _h(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function vh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function pC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gC(n){n._nesting--,_h(n)}class oA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,o){return t.apply(e,r)}}const mC=new X(""),Vl=new X("");let wh,Ch=(()=>{class n{constructor(e,r,o){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,wh||(function iA(n){wh=n}(o),o.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ct.assertNotInAngularZone(),yh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yh(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:o})}whenStable(e,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,o){return[]}}return n.\u0275fac=function(e){return new(e||n)(K(ct),K(bh),K(Vl))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})(),bh=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return wh?.findTestabilityInTree(this,e,r)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Pr=!1;let Kr=null;const yC=new X("AllowMultipleToken"),Dh=new X("PlatformDestroyListeners"),_C=new X("appBootstrapListener");class vC{constructor(t,e){this.name=t,this.token=e}}function bC(n,t,e=[]){const r=`Platform: ${t}`,o=new X(r);return(i=[])=>{let s=Sh();if(!s||s.injector.get(yC,!1)){const a=[...e,...i,{provide:o,useValue:!0}];n?n(a):function lA(n){if(Kr&&!Kr.get(yC,!1))throw new U(400,!1);Kr=n;const t=n.get(DC);(function CC(n){const t=n.get(uC,null);t&&t.forEach(e=>e())})(n)}(function wC(n=[],t){return cr.create({name:t,providers:[{provide:pd,useValue:"platform"},{provide:Dh,useValue:new Set([()=>Kr=null])},...n]})}(a,r))}return function uA(n){const t=Sh();if(!t)throw new U(401,!1);return t}()}}function Sh(){return Kr?.get(DC)??null}let DC=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const o=function EC(n,t){let e;return e="noop"===n?new oA:("zone.js"===n?void 0:n)||new ct(t),e}(r?.ngZone,function SC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:ct,useValue:o}];return o.run(()=>{const s=cr.create({providers:i,parent:this.injector,name:e.moduleType.name}),a=e.create(s),l=a.injector.get(oi,null);if(!l)throw new U(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Ul(this._modules,a),c.unsubscribe()})}),function xC(n,t,e){try{const r=e();return Ns(r)?r.catch(o=>{throw t.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(l,o,()=>{const c=a.injector.get(jl);return c.runInitializers(),c.donePromise.then(()=>(function J_(n){En(n,"Expected localeId to be defined"),"string"==typeof n&&(K_=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ar,vi)||vi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,r=[]){const o=MC({},r);return function sA(n,t,e){const r=new Zd(e);return Promise.resolve(r)}(0,0,e).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(e){const r=e.injector.get($l);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!e.instance.ngDoBootstrap)throw new U(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(Dh,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(K(cr))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function MC(n,t){return Array.isArray(t)?t.reduce(MC,n):{...n,...t}}let $l=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,r,o){this._zone=e,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new qe(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new qe(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{ct.assertNotInAngularZone(),yh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{ct.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function fS(...n){const t=rs(n),e=function sS(n,t){return"number"==typeof ru(n)?n.pop():t}(n,1/0),r=n;return r.length?1===r.length?Ln(r[0]):Lo(e)(pt(r,t)):nr}(i,s.pipe(function pS(n={}){const{connector:t=(()=>new S),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=n;return i=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const y=s;f(),y?.unsubscribe()};return E((y,_)=>{c++,!d&&!u&&h();const b=l=l??t();_.add(()=>{c--,0===c&&!d&&!u&&(a=ou(p,o))}),b.subscribe(_),!s&&c>0&&(s=new en({next:x=>b.next(x),error:x=>{d=!0,h(),a=ou(f,e,x),b.error(x)},complete:()=>{u=!0,h(),a=ou(f,r),b.complete()}}),Ln(y).subscribe(s))})(i)}}()))}bootstrap(e,r){const o=e instanceof ry;if(!this._injector.get(jl).done){!o&&function Vo(n){const t=Ae(n)||jt(n)||rn(n);return null!==t&&t.standalone}(e);throw new U(405,Pr)}let s;s=o?e:this._injector.get(Ts).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function aA(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Ci),c=s.create(cr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(mC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Ul(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new U(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;Ul(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(_C,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ul(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new U(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(K(ct),K(lr),K(oi))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ul(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let Si=(()=>{class n{}return n.__NG_ELEMENT_ID__=hA,n})();function hA(n){return function fA(n,t,e){if(ds(n)&&!e){const r=on(n.index,t);return new Ps(r,r)}return 47&n.type?new Ps(t[$t],t):null}(Rt(),j(),16==(16&n))}class PC{constructor(){}supports(t){return Sl(t)}create(t){return new vA(t)}}const _A=(n,t)=>t;class vA{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||_A}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,o=0,i=null;for(;e||r;){const s=!r||e&&e.currentIndex<RC(r,o,i)?e:r,a=RC(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,u=l-o;if(c!=u){for(let h=0;h<c;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<c&&(i[h]=f+1)}i[s.previousIndex]=u-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Sl(t))throw new U(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,i,s,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,i,s,a)),Object.is(e.item,i)||this._addIdentityChange(e,i)):(e=this._mismatch(e,i,s,a),r=!0),e=e._next}else o=0,function qM(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(o,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,o),r=!0),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,o){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,o)):t=this._addAfter(new CA(e,r),i,o),t}_verifyReinsertion(t,e,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,i=t._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const o=null===e?this._itHead:e._next;return t._next=o,t._prev=e,null===o?this._itTail=t:o._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new kC),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kC),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class CA{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bA{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class kC{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new bA,this.map.set(e,r)),r.add(t)}get(t,e){const o=this.map.get(t);return o?o.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RC(n,t,e){const r=n.previousIndex;if(null===r)return r;let o=0;return e&&r<e.length&&(o=e[r]),r+t+o}class NC{constructor(){}supports(t){return t instanceof Map||jd(t)}create(){return new wA}}class wA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||jd(t)))throw new U(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(o,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const o=this._records.get(t);this._maybeAddToChanges(o,e);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new DA(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class DA{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FC(){return new zl([new PC])}let zl=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const o=r.factories.slice();e=e.concat(o)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||FC()),deps:[[n,new vs,new _s]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(null!=r)return r;throw new U(901,!1)}}return n.\u0275prov=Z({token:n,providedIn:"root",factory:FC}),n})();function LC(){return new Ws([new NC])}let Ws=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(r){const o=r.factories.slice();e=e.concat(o)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||LC()),deps:[[n,new vs,new _s]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(r)return r;throw new U(901,!1)}}return n.\u0275prov=Z({token:n,providedIn:"root",factory:LC}),n})();const xA=bC(null,"core",[]);let MA=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(K($l))},n.\u0275mod=jn({type:n}),n.\u0275inj=xn({}),n})();function Ei(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Th=null;function kr(){return Th}class IA{}const Yt=new X("DocumentToken");let Ih=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:function(){return function AA(){return K(jC)}()},providedIn:"platform"}),n})();const PA=new X("Location Initialized");let jC=(()=>{class n extends Ih{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kr().getBaseHref(this._doc)}onPopState(e){const r=kr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=kr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){VC()?this._history.pushState(e,r,o):this._location.hash=o}replaceState(e,r,o){VC()?this._history.replaceState(e,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(K(Yt))},n.\u0275prov=Z({token:n,factory:function(){return function kA(){return new jC(K(Yt))}()},providedIn:"platform"}),n})();function VC(){return!!window.history.pushState}function Ah(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function $C(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Rr(n){return n&&"?"!==n[0]?"?"+n:n}let Eo=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:function(){return Ce(BC)},providedIn:"root"}),n})();const UC=new X("appBaseHref");let BC=(()=>{class n extends Eo{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ce(Yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ah(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Rr(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,i){const s=this.prepareExternalUrl(o+Rr(i));this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){const s=this.prepareExternalUrl(o+Rr(i));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(K(Ih),K(UC,8))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RA=(()=>{class n extends Eo{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Ah(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+Rr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+Rr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(K(Ih),K(UC,8))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})(),Ph=(()=>{class n{constructor(e){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function LA(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}($C(HC(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Rr(r))}normalize(e){return n.stripTrailingSlash(function FA(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,HC(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rr(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r,complete:o})}}return n.normalizeQueryParams=Rr,n.joinWithSlash=Ah,n.stripTrailingSlash=$C,n.\u0275fac=function(e){return new(e||n)(K(Eo))},n.\u0275prov=Z({token:n,factory:function(){return function NA(){return new Ph(K(Eo))}()},providedIn:"root"}),n})();function HC(n){return n.replace(/\/index.html$/,"")}function ZC(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[o,i]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}const Bh=/\s+/,XC=[];let Hh=(()=>{class n{constructor(e,r,o,i){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this.initialClasses=XC,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Bh):XC}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Bh):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Bh).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(e){return new(e||n)(A(zl),A(Ws),A(pn),A(Mr))},n.\u0275dir=ce({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class bP{constructor(t,e,r,o){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ec=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,o){this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new bP(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),nb(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{nb(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(A(Gn),A(Ir),A(zl))},n.\u0275dir=ce({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function nb(n,t){n.context.$implicit=t.item}let xi=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new DP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){rb("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){rb("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(A(Gn),A(Ir))},n.\u0275dir=ce({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class DP{constructor(){this.$implicit=null,this.ngIf=null}}function rb(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${$e(t)}'.`)}let ib=(()=>{class n{constructor(e,r,o){this._ngEl=e,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[o,i]=e.split("."),s=-1===o.indexOf("-")?void 0:sn.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,o,i?`${r}${i}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,o,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(A(pn),A(Ws),A(Mr))},n.\u0275dir=ce({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),JP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jn({type:n}),n.\u0275inj=xn({}),n})();let XP=(()=>{class n{}return n.\u0275prov=Z({token:n,providedIn:"root",factory:()=>new ek(K(Yt),window)}),n})();class ek{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function tk(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(t)||i.querySelector(`[name="${t}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=lb(this.window.history)||lb(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lb(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class cb{}class Ok extends IA{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Yh extends Ok{static makeCurrent(){!function TA(n){Th||(Th=n)}(new Yh)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Tk(){return Qs=Qs||document.querySelector("base"),Qs?Qs.getAttribute("href"):null}();return null==e?null:function Ik(n){rc=rc||document.createElement("a"),rc.setAttribute("href",n);const t=rc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ZC(document.cookie,t)}}let rc,Qs=null;const pb=new X("TRANSITION_ID"),Pk=[{provide:Ll,useFactory:function Ak(n,t,e){return()=>{e.get(jl).donePromise.then(()=>{const r=kr(),o=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[pb,Yt,cr],multi:!0}];let Rk=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();const oc=new X("EventManagerPlugins");let ic=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o){return this._findPluginFor(r).addEventListener(e,r,o)}addGlobalEventListener(e,r,o){return this._findPluginFor(r).addGlobalEventListener(e,r,o)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(K(oc),K(ct))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();class gb{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const o=kr().getGlobalEventTarget(this._doc,t);if(!o)throw new Error(`Unsupported event target ${o} for event ${e}`);return this.addEventListener(o,e,r)}}let mb=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const o=this.usageCount;let i=o.get(e)??0;return i+=r,i>0?o.set(e,i):o.delete(e),i}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})(),Zs=(()=>{class n extends mb{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(i=>i.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const o=this.doc.createElement("style");o.textContent=r,e.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(K(Yt))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();const Qh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zh=/%COMP%/g,vb=new X("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Cb(n,t){return t.flat(100).map(e=>e.replace(Zh,n))}function bb(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Xh=(()=>{class n{constructor(e,r,o,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new ef(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(e,r);return o instanceof Sb?o.applyToHost(e):o instanceof tf&&o.applyStyles(),o}getOrCreateRenderer(e,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case or.Emulated:i=new Sb(s,a,r,this.appId,l);break;case or.ShadowDom:return new Uk(s,a,e,r);default:i=new tf(s,a,r,l)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(K(ic),K(Zs),K(qs),K(vb))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();class ef{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Qh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Db(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Db(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,o){if(o){e=o+":"+e;const i=Qh[o];i?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const o=Qh[r];o?t.removeAttributeNS(o,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,o){o&(sn.DashCase|sn.Important)?t.style.setProperty(e,r,o&sn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&sn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,bb(r)):this.eventManager.addEventListener(t,e,bb(r))}}function Db(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Uk extends ef{constructor(t,e,r,o){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Cb(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class tf extends ef{constructor(t,e,r,o,i=r.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=Cb(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Sb extends tf{constructor(t,e,r,o,i){const s=o+"-"+r.id;super(t,e,r,i,s),this.contentAttr=function jk(n){return"_ngcontent-%COMP%".replace(Zh,n)}(s),this.hostAttr=function Vk(n){return"_nghost-%COMP%".replace(Zh,n)}(s)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let Bk=(()=>{class n extends gb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o){return e.addEventListener(r,o,!1),()=>this.removeEventListener(e,r,o)}removeEventListener(e,r,o){return e.removeEventListener(r,o)}}return n.\u0275fac=function(e){return new(e||n)(K(Yt))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();const Eb=["alt","control","meta","shift"],Hk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Gk=(()=>{class n extends gb{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,o){const i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kr().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Eb.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let o=Hk[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(o=e.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Eb.forEach(s=>{s!==o&&(0,zk[s])(e)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(e,r,o){return i=>{n.matchEventFullKeyCode(i,e)&&o.runGuarded(()=>r(i))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(K(Yt))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();const Jk=bC(xA,"browser",[{provide:mh,useValue:"browser"},{provide:uC,useValue:function qk(){Yh.makeCurrent()},multi:!0},{provide:Yt,useFactory:function Kk(){return function Mx(n){id=n}(document),document},deps:[]}]),Ob=new X(""),Tb=[{provide:Vl,useClass:class kk{addToWindow(t){We.getAngularTestability=(r,o=!0)=>{const i=t.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},We.getAllAngularTestabilities=()=>t.getAllTestabilities(),We.getAllAngularRootElements=()=>t.getAllRootElements(),We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(r=>{const o=We.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(l){s=s||l,i--,0==i&&r(s)};o.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?kr().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:mC,useClass:Ch,deps:[ct,bh,Vl]},{provide:Ch,useClass:Ch,deps:[ct,bh,Vl]}],Ib=[{provide:pd,useValue:"root"},{provide:oi,useFactory:function Wk(){return new oi},deps:[]},{provide:oc,useClass:Bk,multi:!0,deps:[Yt,ct,mh]},{provide:oc,useClass:Gk,multi:!0,deps:[Yt]},{provide:Xh,useClass:Xh,deps:[ic,Zs,qs,vb]},{provide:iy,useExisting:Xh},{provide:mb,useExisting:Zs},{provide:Zs,useClass:Zs,deps:[Yt]},{provide:ic,useClass:ic,deps:[oc,ct]},{provide:cb,useClass:Rk,deps:[]},[]];let Yk=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:qs,useValue:e.appId},{provide:pb,useExisting:qs},Pk]}}}return n.\u0275fac=function(e){return new(e||n)(K(Ob,12))},n.\u0275mod=jn({type:n}),n.\u0275inj=xn({providers:[...Ib,...Tb],imports:[JP,MA]}),n})(),Ab=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(K(Yt))},n.\u0275prov=Z({token:n,factory:function(e){let r=null;return r=e?new e:function Zk(){return new Ab(K(Yt))}(),r},providedIn:"root"}),n})();function ee(...n){return pt(n,rs(n))}function Yr(n,t){return oe(t)?Pt(n,t,1):Pt(n,1)}function Fr(n,t){return E((e,r)=>{let o=0;e.subscribe(L(r,i=>n.call(t,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class sc{}class sf{}class Lr{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const o=e.slice(0,r),i=o.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=e.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(e,i)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Lr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Lr;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Lr?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const o=("a"===t.op?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":const i=t.value;if(i){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class oR{encodeKey(t){return Rb(t)}encodeValue(t){return Rb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const sR=/%(\d[a-f0-9])/gi,aR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Rb(n){return encodeURIComponent(n).replace(sR,(t,e)=>aR[e]??t)}function ac(n){return`${n}`}class Qr{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new oR,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function iR(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,i)),t.decodeValue(o.slice(i+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],o=Array.isArray(r)?r.map(ac):[ac(r)];this.map.set(e,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const o=t[r];Array.isArray(o)?o.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Qr({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(ac(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const o=r.indexOf(ac(t.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class lR{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Nb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Fb(n){return typeof Blob<"u"&&n instanceof Blob}function Lb(n){return typeof FormData<"u"&&n instanceof FormData}class Xs{constructor(t,e,r,o){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function cR(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Lr),this.context||(this.context=new lR),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Qr,this.urlWithParams=e}serializeBody(){return null===this.body?null:Nb(this.body)||Fb(this.body)||Lb(this.body)||function uR(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Lb(this.body)?null:Fb(this.body)?this.body.type||null:Nb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((d,h)=>d.set(h,t.setHeaders[h]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((d,h)=>d.set(h,t.setParams[h]),c)),new Xs(e,r,i,{params:c,headers:l,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var _t=(()=>((_t=_t||{})[_t.Sent=0]="Sent",_t[_t.UploadProgress=1]="UploadProgress",_t[_t.ResponseHeader=2]="ResponseHeader",_t[_t.DownloadProgress=3]="DownloadProgress",_t[_t.Response=4]="Response",_t[_t.User=5]="User",_t))();class af{constructor(t,e=200,r="OK"){this.headers=t.headers||new Lr,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class lf extends af{constructor(t={}){super(t),this.type=_t.ResponseHeader}clone(t={}){return new lf({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class lc extends af{constructor(t={}){super(t),this.type=_t.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new lc({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class jb extends af{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function cf(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Mi=(()=>{class n{constructor(e){this.handler=e}request(e,r,o={}){let i;if(e instanceof Xs)i=e;else{let l,c;l=o.headers instanceof Lr?o.headers:new Lr(o.headers),o.params&&(c=o.params instanceof Qr?o.params:new Qr({fromObject:o.params})),i=new Xs(e,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=ee(i).pipe(Yr(l=>this.handler.handle(l)));if(e instanceof Xs||"events"===o.observe)return s;const a=s.pipe(Fr(l=>l instanceof lc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(N(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(N(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(N(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(N(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Qr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,cf(o,r))}post(e,r,o={}){return this.request("POST",e,cf(o,r))}put(e,r,o={}){return this.request("PUT",e,cf(o,r))}}return n.\u0275fac=function(e){return new(e||n)(K(sc))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();function Vb(n,t){return t(n)}function dR(n,t){return(e,r)=>t.intercept(e,{handle:o=>n(o,r)})}const fR=new X("HTTP_INTERCEPTORS"),ea=new X("HTTP_INTERCEPTOR_FNS");function pR(){let n=null;return(t,e)=>(null===n&&(n=(Ce(fR,{optional:!0})??[]).reduceRight(dR,Vb)),n(t,e))}let $b=(()=>{class n extends sc{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(ea)));this.chain=r.reduceRight((o,i)=>function hR(n,t,e){return(r,o)=>e.runInContext(()=>t(r,i=>n(i,o)))}(o,i,this.injector),Vb)}return this.chain(e,r=>this.backend.handle(r))}}return n.\u0275fac=function(e){return new(e||n)(K(sf),K(lr))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();const _R=/^\)\]\}',?\n/;let Bb=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new qe(r=>{const o=this.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((f,p)=>o.setRequestHeader(f,p.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=e.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",p=new Lr(o.getAllResponseHeaders()),y=function vR(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||e.url;return s=new lf({headers:p,status:o.status,statusText:f,url:y}),s},l=()=>{let{headers:f,status:p,statusText:y,url:_}=a(),b=null;204!==p&&(b=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=b?200:0);let x=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof b){const D=b;b=b.replace(_R,"");try{b=""!==b?JSON.parse(b):null}catch(R){b=D,x&&(x=!1,b={error:R,text:b})}}x?(r.next(new lc({body:b,headers:f,status:p,statusText:y,url:_||void 0})),r.complete()):r.error(new jb({error:b,headers:f,status:p,statusText:y,url:_||void 0}))},c=f=>{const{url:p}=a(),y=new jb({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});r.error(y)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:_t.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===e.responseType&&o.responseText&&(p.partialText=o.responseText),r.next(p)},h=f=>{let p={type:_t.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return o.addEventListener("load",l),o.addEventListener("error",c),o.addEventListener("timeout",c),o.addEventListener("abort",c),e.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:_t.Sent}),()=>{o.removeEventListener("error",c),o.removeEventListener("abort",c),o.removeEventListener("load",l),o.removeEventListener("timeout",c),e.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(K(cb))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();const uf=new X("XSRF_ENABLED"),Hb=new X("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),zb=new X("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Gb{}let wR=(()=>{class n{constructor(e,r,o){this.doc=e,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ZC(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(K(Yt),K(mh),K(Hb))},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();function DR(n,t){const e=n.url.toLowerCase();if(!Ce(uf)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=Ce(Gb).getToken(),o=Ce(zb);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),t(n)}var ht=(()=>((ht=ht||{})[ht.Interceptors=0]="Interceptors",ht[ht.LegacyInterceptors=1]="LegacyInterceptors",ht[ht.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ht[ht.NoXsrfProtection=3]="NoXsrfProtection",ht[ht.JsonpSupport=4]="JsonpSupport",ht[ht.RequestsMadeViaParent=5]="RequestsMadeViaParent",ht))();function Oi(n,t){return{\u0275kind:n,\u0275providers:t}}function SR(...n){const t=[Mi,Bb,$b,{provide:sc,useExisting:$b},{provide:sf,useExisting:Bb},{provide:ea,useValue:DR,multi:!0},{provide:uf,useValue:!0},{provide:Gb,useClass:wR}];for(const e of n)t.push(...e.\u0275providers);return function Yx(n){return{\u0275providers:n}}(t)}const qb=new X("LEGACY_INTERCEPTOR_FN");let xR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jn({type:n}),n.\u0275inj=xn({providers:[SR(Oi(ht.LegacyInterceptors,[{provide:qb,useFactory:pR},{provide:ea,useExisting:qb,multi:!0}]))]}),n})();const{isArray:MR}=Array,{getPrototypeOf:OR,prototype:TR,keys:IR}=Object;function Wb(n){if(1===n.length){const t=n[0];if(MR(t))return{args:t,keys:null};if(function AR(n){return n&&"object"==typeof n&&OR(n)===TR}(t)){const e=IR(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}const{isArray:PR}=Array;function Kb(n){return N(t=>function kR(n,t){return PR(t)?n(...t):n(t)}(n,t))}function Jb(n,t){return n.reduce((e,r,o)=>(e[r]=t[o],e),{})}function xo(...n){const t=Qp(n),{args:e,keys:r}=Wb(n),o=new qe(i=>{const{length:s}=e;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Ln(e[u]).subscribe(L(i,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?Jb(r,a):a),i.complete())}))}});return t?o.pipe(Kb(t)):o}let Yb=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(A(Mr),A(pn))},n.\u0275dir=ce({type:n}),n})(),Mo=(()=>{class n extends Yb{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,features:[ke]}),n})();const pr=new X("NgValueAccessor"),RR={provide:pr,useExisting:Ue(()=>ta),multi:!0};let ta=(()=>{class n extends Mo{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&V("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[Qe([RR]),ke]}),n})();const NR={provide:pr,useExisting:Ue(()=>Ti),multi:!0},LR=new X("CompositionEventMode");let Ti=(()=>{class n extends Yb{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function FR(){const n=kr()?kr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(A(Mr),A(pn),A(LR,8))},n.\u0275dir=ce({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&V("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[Qe([NR]),ke]}),n})();const jR=!1;function Zr(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Ht=new X("NgValidators"),Xr=new X("NgAsyncValidators");function e0(n){return Zr(n.value)?{required:!0}:null}function cc(n){return null}function a0(n){return null!=n}function l0(n){const t=Ns(n)?pt(n):n;if(jR&&!$d(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new U(-1101,e)}return t}function c0(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function u0(n,t){return t.map(e=>e(n))}function d0(n){return n.map(t=>function $R(n){return!n.validate}(t)?t:e=>t.validate(e))}function df(n){return null!=n?function h0(n){if(!n)return null;const t=n.filter(a0);return 0==t.length?null:function(e){return c0(u0(e,t))}}(d0(n)):null}function hf(n){return null!=n?function f0(n){if(!n)return null;const t=n.filter(a0);return 0==t.length?null:function(e){return xo(u0(e,t).map(l0)).pipe(N(c0))}}(d0(n)):null}function p0(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function ff(n){return n?Array.isArray(n)?n:[n]:[]}function uc(n,t){return Array.isArray(n)?n.includes(t):n===t}function y0(n,t){const e=ff(t);return ff(n).forEach(o=>{uc(e,o)||e.push(o)}),e}function _0(n,t){return ff(t).filter(e=>!uc(n,e))}class v0{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=df(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=hf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Qt extends v0{get formDirective(){return null}get path(){return null}}class eo extends v0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class C0{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let na=(()=>{class n extends C0{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(A(eo,2))},n.\u0275dir=ce({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&et("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ke]}),n})(),b0=(()=>{class n extends C0{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(A(Qt,10))},n.\u0275dir=ce({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&et("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ke]}),n})();function w0(n,t){return n?`with name: '${t}'`:`at index: ${t}`}const mf=!1,ra="VALID",hc="INVALID",Ii="PENDING",oa="DISABLED";function yf(n){return(fc(n)?n.validators:n)||null}function _f(n,t){return(fc(t)?t.asyncValidators:n)||null}function fc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class E0{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ra}get invalid(){return this.status===hc}get pending(){return this.status==Ii}get disabled(){return this.status===oa}get enabled(){return this.status!==oa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(y0(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(y0(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(_0(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(_0(t,this._rawAsyncValidators))}hasValidator(t){return uc(this._rawValidators,t)}hasAsyncValidator(t){return uc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ii,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=oa,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ra,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ra||this.status===Ii)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oa:ra}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ii,this._hasOwnPendingAsyncValidator=!0;const e=l0(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?oa:this.errors?hc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ii)?Ii:this._anyControlsHaveStatus(hc)?hc:ra}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){fc(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function WR(n){return Array.isArray(n)?df(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function KR(n){return Array.isArray(n)?hf(n):n||null}(this._rawAsyncValidators)}}class vf extends E0{constructor(t,e,r){super(yf(e),_f(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function S0(n,t,e){n._forEachChild((r,o)=>{if(void 0===e[o])throw new U(1002,mf?function qR(n,t){return`Must supply a value for form control ${w0(n,t)}`}(t,o):"")})})(this,!0,t),Object.keys(t).forEach(r=>{(function D0(n,t,e){const r=n.controls;if(!(t?Object.keys(r):r).length)throw new U(1e3,mf?function zR(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!r[e])throw new U(1001,mf?function GR(n,t){return`Cannot find form control ${w0(n,t)}`}(t,e):"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{const o=this.controls[r];o&&o.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,o)=>{r.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((o,i)=>{r=e(r,o,i)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Ai=new X("CallSetDisabledState",{providedIn:"root",factory:()=>pc}),pc="always";function ia(n,t,e=pc){Cf(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function QR(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&x0(n,t)})}(n,t),function XR(n,t){const e=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function ZR(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&x0(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function YR(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function yc(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Cf(n,t){const e=function g0(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(p0(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function m0(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(p0(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();yc(t._rawValidators,o),yc(t._rawAsyncValidators,o)}function x0(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const oN={provide:Qt,useExisting:Ue(()=>vc)},sa=(()=>Promise.resolve())();let vc=(()=>{class n extends Qt{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new it,this.form=new vf({},df(e),hf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){sa.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),ia(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){sa.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){sa.then(()=>{const r=this._findContainer(e.path),o=new vf({});(function M0(n,t){Cf(n,t)})(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){sa.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){sa.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function O0(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(A(Ht,10),A(Xr,10),A(Ai,8))},n.\u0275dir=ce({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&V("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qe([oN]),ke]}),n})();function T0(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function I0(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const A0=class extends E0{constructor(t=null,e,r){super(yf(e),_f(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fc(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=I0(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){T0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){T0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){I0(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},aN={provide:eo,useExisting:Ue(()=>Pi)},R0=(()=>Promise.resolve())();let Pi=(()=>{class n extends eo{constructor(e,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new A0,this._registered=!1,this.update=new it,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Df(n,t){if(!t)return null;let e,r,o;return Array.isArray(t),t.forEach(i=>{i.constructor===Ti?e=i:function nN(n){return Object.getPrototypeOf(n.constructor)===Mo}(i)?r=i:o=i}),o||r||e||null}(0,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function wf(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ia(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){R0.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,o=0!==r&&Ei(r);R0.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function gc(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(A(Qt,9),A(Ht,10),A(Xr,10),A(pr,10),A(Si,8),A(Ai,8))},n.\u0275dir=ce({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qe([aN]),ke,On]}),n})(),N0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ce({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const lN={provide:pr,useExisting:Ue(()=>Sf),multi:!0};let Sf=(()=>{class n extends Mo{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,r){1&e&&V("input",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},features:[Qe([lN]),ke]}),n})();const cN={provide:pr,useExisting:Ue(()=>Ef),multi:!0};let F0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jn({type:n}),n.\u0275inj=xn({}),n})(),uN=(()=>{class n{constructor(){this._accessors=[]}add(e,r){this._accessors.push([e,r])}remove(e){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===e)return void this._accessors.splice(r,1)}select(e){this._accessors.forEach(r=>{this._isSameGroup(r,e)&&r[1]!==e&&r[1].fireUncheck(e.value)})}_isSameGroup(e,r){return!!e[0].control&&e[0]._parent===r._control._parent&&e[1].name===r.name}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:F0}),n})(),Ef=(()=>{class n extends Mo{constructor(e,r,o,i){super(e,r),this._registry=o,this._injector=i,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Ce(Ai,{optional:!0})??pc}ngOnInit(){this._control=this._injector.get(eo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(e){return new(e||n)(A(Mr),A(pn),A(uN),A(cr))},n.\u0275dir=ce({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,r){1&e&&V("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Qe([cN]),ke]}),n})();const yN={provide:pr,useExisting:Ue(()=>aa),multi:!0};function B0(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let aa=(()=>{class n extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=B0(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function _N(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&V("change",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qe([yN]),ke]}),n})(),Tf=(()=>{class n{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(B0(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(A(pn),A(Mr),A(aa,9))},n.\u0275dir=ce({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const vN={provide:pr,useExisting:Ue(()=>If),multi:!0};function H0(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let If=(()=>{class n extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const o=e.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);o.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,e(o)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function CN(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&V("change",function(i){return r.onChange(i.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qe([vN]),ke]}),n})(),Af=(()=>{class n{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(H0(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(H0(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(A(pn),A(Mr),A(If,9))},n.\u0275dir=ce({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function G0(n){return"number"==typeof n?n:parseFloat(n)}let Oo=(()=>{class n{constructor(){this._validator=cc}ngOnChanges(e){if(this.inputName in e){const r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):cc,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ce({type:n,features:[On]}),n})();const bN={provide:Ht,useExisting:Ue(()=>Pf),multi:!0};let Pf=(()=>{class n extends Oo{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>G0(e),this.createValidator=e=>function Xb(n){return t=>{if(Zr(t.value)||Zr(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&Tt("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Qe([bN]),ke]}),n})();const wN={provide:Ht,useExisting:Ue(()=>kf),multi:!0};let kf=(()=>{class n extends Oo{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>G0(e),this.createValidator=e=>function Zb(n){return t=>{if(Zr(t.value)||Zr(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&Tt("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Qe([wN]),ke]}),n})();const DN={provide:Ht,useExisting:Ue(()=>Cc),multi:!0};let Cc=(()=>{class n extends Oo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ei,this.createValidator=e=>e0}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nt(n)))(r||n)}}(),n.\u0275dir=ce({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&Tt("required",r._enabled?"":null)},inputs:{required:"required"},features:[Qe([DN]),ke]}),n})(),TN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jn({type:n}),n.\u0275inj=xn({imports:[F0]}),n})(),AN=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ai,useValue:e.callSetDisabledState??pc}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jn({type:n}),n.\u0275inj=xn({imports:[TN]}),n})();class Rn extends S{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const bc=ve(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q0(...n){const t=rs(n),e=Qp(n),{args:r,keys:o}=Wb(n);if(0===r.length)return pt([],t);const i=new qe(function PN(n,t,e=er){return r=>{Z0(t,()=>{const{length:o}=n,i=new Array(o);let s=o,a=o;for(let l=0;l<o;l++)Z0(t,()=>{const c=pt(n[l],t);let u=!1;c.subscribe(L(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(e(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,o?s=>Jb(o,s):er));return e?i.pipe(Kb(e)):i}function Z0(n,t,e){n?vr(e,n,t):t()}function Rf(...n){return function kN(){return Lo(1)}()(pt(n,rs(n)))}function X0(n){return new qe(t=>{Ln(n()).subscribe(t)})}function ki(n,t){const e=oe(n)?n:()=>n,r=o=>o.error(e());return new qe(t?o=>t.schedule(r,0,o):r)}function Nf(){return E((n,t)=>{let e=null;n._refCount++;const r=L(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const o=n._connection,i=e;e=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class ew extends qe{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,T(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new I;const e=this.getSubject();t.add(this.source.subscribe(L(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=I.EMPTY)}return t}refCount(){return Nf()(this)}}function gr(n,t){return E((e,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();e.subscribe(L(r,l=>{o?.unsubscribe();let c=0;const u=i++;Ln(n(l,u)).subscribe(o=L(r,d=>r.next(t?t(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Ri(n){return n<=0?()=>nr:E((t,e)=>{let r=0;t.subscribe(L(e,o=>{++r<=n&&(e.next(o),n<=r&&e.complete())}))})}function wc(n){return E((t,e)=>{let r=!1;t.subscribe(L(e,o=>{r=!0,e.next(o)},()=>{r||e.next(n),e.complete()}))})}function tw(n=NN){return E((t,e)=>{let r=!1;t.subscribe(L(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(n())))})}function NN(){return new bc}function to(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Fr((o,i)=>n(o,i,r)):er,Ri(1),e?wc(t):tw(()=>new bc))}function vt(n,t,e){const r=oe(n)||t||e?{next:n,error:t,complete:e}:n;return r?E((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(L(i,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),i.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),i.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),i.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):er}function Jn(n){return E((t,e)=>{let i,r=null,o=!1;r=t.subscribe(L(e,void 0,void 0,s=>{i=Ln(n(s,Jn(n)(t))),r?(r.unsubscribe(),r=null,i.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(e))})}function nw(n,t){return E(function FN(n,t,e,r,o){return(i,s)=>{let a=e,l=t,c=0;i.subscribe(L(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}(n,t,arguments.length>=2,!0))}function Ff(n){return n<=0?()=>nr:E((t,e)=>{let r=[];t.subscribe(L(e,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function rw(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Fr((o,i)=>n(o,i,r)):er,Ff(1),e?wc(t):tw(()=>new bc))}function Lf(n){return E((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const me="primary",la=Symbol("RouteTitle");class VN{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ni(n){return new VN(n)}function $N(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function mr(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let i=0;i<e.length;i++)if(o=e[i],!ow(n[o],t[o]))return!1;return!0}function ow(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((o,i)=>r[i]===o)}return n===t}function iw(n){return Array.prototype.concat.apply([],n)}function sw(n){return n.length>0?n[n.length-1]:null}function Ft(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function no(n){return $d(n)?n:Ns(n)?pt(Promise.resolve(n)):ee(n)}const Dc=!1,BN={exact:function cw(n,t,e){if(!To(n.segments,t.segments)||!Sc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!cw(n.children[r],t.children[r],e))return!1;return!0},subset:uw},aw={exact:function HN(n,t){return mr(n,t)},subset:function zN(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>ow(n[e],t[e]))},ignored:()=>!0};function lw(n,t,e){return BN[e.paths](n.root,t.root,e.matrixParams)&&aw[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function uw(n,t,e){return dw(n,t,t.segments,e)}function dw(n,t,e,r){if(n.segments.length>e.length){const o=n.segments.slice(0,e.length);return!(!To(o,e)||t.hasChildren()||!Sc(o,e,r))}if(n.segments.length===e.length){if(!To(n.segments,e)||!Sc(n.segments,e,r))return!1;for(const o in t.children)if(!n.children[o]||!uw(n.children[o],t.children[o],r))return!1;return!0}{const o=e.slice(0,n.segments.length),i=e.slice(n.segments.length);return!!(To(n.segments,o)&&Sc(n.segments,o,r)&&n.children[me])&&dw(n.children[me],t,i,r)}}function Sc(n,t,e){return t.every((r,o)=>aw[e](n[o].parameters,r.parameters))}class ro{constructor(t=new we([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ni(this.queryParams)),this._queryParamMap}toString(){return WN.serialize(this)}}class we{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ft(e,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ec(this)}}class ca{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ni(this.parameters)),this._parameterMap}toString(){return pw(this)}}function To(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let ua=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:function(){return new jf},providedIn:"root"}),n})();class jf{parse(t){const e=new nF(t);return new ro(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${da(t.root,!0)}`,r=function YN(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(o=>`${xc(e)}=${xc(o)}`).join("&"):`${xc(e)}=${xc(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function KN(n){return encodeURI(n)}(t.fragment)}`:""}`}}const WN=new jf;function Ec(n){return n.segments.map(t=>pw(t)).join("/")}function da(n,t){if(!n.hasChildren())return Ec(n);if(t){const e=n.children[me]?da(n.children[me],!1):"",r=[];return Ft(n.children,(o,i)=>{i!==me&&r.push(`${i}:${da(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function qN(n,t){let e=[];return Ft(n.children,(r,o)=>{o===me&&(e=e.concat(t(r,o)))}),Ft(n.children,(r,o)=>{o!==me&&(e=e.concat(t(r,o)))}),e}(n,(r,o)=>o===me?[da(n.children[me],!1)]:[`${o}:${da(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[me]?`${Ec(n)}/${e[0]}`:`${Ec(n)}/(${e.join("//")})`}}function hw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xc(n){return hw(n).replace(/%3B/gi,";")}function Vf(n){return hw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mc(n){return decodeURIComponent(n)}function fw(n){return Mc(n.replace(/\+/g,"%20"))}function pw(n){return`${Vf(n.path)}${function JN(n){return Object.keys(n).map(t=>`;${Vf(t)}=${Vf(n[t])}`).join("")}(n.parameters)}`}const QN=/^[^\/()?;=#]+/;function Oc(n){const t=n.match(QN);return t?t[0]:""}const ZN=/^[^=?&#]+/,eF=/^[^&#]+/;class nF{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[me]=new we(t,e)),r}parseSegment(){const t=Oc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new U(4009,Dc);return this.capture(t),new ca(Mc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Oc(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=Oc(this.remaining);o&&(r=o,this.capture(r))}t[Mc(e)]=Mc(r)}parseQueryParam(t){const e=function XN(n){const t=n.match(ZN);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const s=function tF(n){const t=n.match(eF);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=fw(e),i=fw(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Oc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new U(4010,Dc);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=me);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s[me]:new we([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new U(4011,Dc)}}function $f(n){return n.segments.length>0?new we([],{[me]:n}):n}function Tc(n){const t={};for(const r of Object.keys(n.children)){const i=Tc(n.children[r]);(i.segments.length>0||i.hasChildren())&&(t[r]=i)}return function rF(n){if(1===n.numberOfChildren&&n.children[me]){const t=n.children[me];return new we(n.segments.concat(t.segments),t.children)}return n}(new we(n.segments,t))}function Io(n){return n instanceof ro}const Uf=!1;function oF(n,t,e,r,o){if(0===e.length)return Fi(t.root,t.root,t.root,r,o);const i=function vw(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _w(!0,0,n);let t=0,e=!1;const r=n.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Ft(i.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new _w(e,t,r)}(e);return i.toRoot()?Fi(t.root,t.root,new we([],{}),r,o):function s(l){const c=function sF(n,t,e,r){if(n.isAbsolute)return new Li(t.root,!0,0);if(-1===r)return new Li(e,e===t.root,0);return function Cw(n,t,e){let r=n,o=t,i=e;for(;i>o;){if(i-=o,r=r.parent,!r)throw new U(4005,Uf&&"Invalid number of '../'");o=r.segments.length}return new Li(r,!1,o-i)}(e,r+(ha(n.commands[0])?0:1),n.numberOfDoubleDots)}(i,t,n.snapshot?._urlSegment,l),u=c.processChildren?ji(c.segmentGroup,c.index,i.commands):Bf(c.segmentGroup,c.index,i.commands);return Fi(t.root,c.segmentGroup,u,r,o)}(n.snapshot?._lastPathIndex)}function ha(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fa(n){return"object"==typeof n&&null!=n&&n.outlets}function Fi(n,t,e,r,o){let s,i={};r&&Ft(r,(l,c)=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===t?e:yw(n,t,e);const a=$f(Tc(s));return new ro(a,i,o)}function yw(n,t,e){const r={};return Ft(n.children,(o,i)=>{r[i]=o===t?e:yw(o,t,e)}),new we(n.segments,r)}class _w{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ha(r[0]))throw new U(4003,Uf&&"Root segment cannot have matrix parameters");const o=r.find(fa);if(o&&o!==sw(r))throw new U(4004,Uf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Li{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function Bf(n,t,e){if(n||(n=new we([],{})),0===n.segments.length&&n.hasChildren())return ji(n,t,e);const r=function lF(n,t,e){let r=0,o=t;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=e.length)return i;const s=n.segments[o],a=e[r];if(fa(a))break;const l=`${a}`,c=r<e.length-1?e[r+1]:null;if(o>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!ww(l,c,s))return i;r+=2}else{if(!ww(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,t,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new we(n.segments.slice(0,r.pathIndex),{});return i.children[me]=new we(n.segments.slice(r.pathIndex),n.children),ji(i,0,o)}return r.match&&0===o.length?new we(n.segments,{}):r.match&&!n.hasChildren()?Hf(n,t,e):r.match?ji(n,0,o):Hf(n,t,e)}function ji(n,t,e){if(0===e.length)return new we(n.segments,{});{const r=function aF(n){return fa(n[0])?n[0].outlets:{[me]:n}}(e),o={};if(!r[me]&&n.children[me]&&1===n.numberOfChildren&&0===n.children[me].segments.length){const i=ji(n.children[me],t,e);return new we(n.segments,i.children)}return Ft(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=Bf(n.children[s],t,i))}),Ft(n.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new we(n.segments,o)}}function Hf(n,t,e){const r=n.segments.slice(0,t);let o=0;for(;o<e.length;){const i=e[o];if(fa(i)){const l=cF(i.outlets);return new we(r,l)}if(0===o&&ha(e[0])){r.push(new ca(n.segments[t].path,bw(e[0]))),o++;continue}const s=fa(i)?i.outlets[me]:`${i}`,a=o<e.length-1?e[o+1]:null;s&&a&&ha(a)?(r.push(new ca(s,bw(a))),o+=2):(r.push(new ca(s,{})),o++)}return new we(r,{})}function cF(n){const t={};return Ft(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Hf(new we([],{}),0,e))}),t}function bw(n){const t={};return Ft(n,(e,r)=>t[r]=`${e}`),t}function ww(n,t,e){return n==e.path&&mr(t,e.parameters)}const pa="imperative";class yr{constructor(t,e){this.id=t,this.url=e}}class zf extends yr{constructor(t,e,r="imperative",o=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oo extends yr{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ic extends yr{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ac extends yr{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=16}}class Gf extends yr{constructor(t,e,r,o){super(t,e),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uF extends yr{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dF extends yr{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hF extends yr{constructor(t,e,r,o,i){super(t,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fF extends yr{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pF extends yr{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gF{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mF{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yF{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _F{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vF{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CF{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dw{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let DF=(()=>{class n{createUrlTree(e,r,o,i,s,a){return oF(e||r.root,o,i,s,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})(),EF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:function(t){return DF.\u0275fac(t)},providedIn:"root"}),n})();class Sw{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=qf(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=qf(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Wf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Wf(t,this._root).map(e=>e.value)}}function qf(n,t){if(n===t.value)return t;for(const e of t.children){const r=qf(n,e);if(r)return r}return null}function Wf(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Wf(n,e);if(r.length)return r.unshift(t),r}return[]}class jr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Vi(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Ew extends Sw{constructor(t,e){super(t),this.snapshot=e,Kf(this,t)}toString(){return this.snapshot.toString()}}function xw(n,t){const e=function xF(n,t){const s=new Pc([],{},{},"",{},me,t,null,n.root,-1,{});return new Ow("",new jr(s,[]))}(n,t),r=new Rn([new ca("",{})]),o=new Rn({}),i=new Rn({}),s=new Rn({}),a=new Rn(""),l=new io(r,o,s,a,i,me,t,e.root);return l.snapshot=e.root,new Ew(new jr(l,[]),e)}class io{constructor(t,e,r,o,i,s,a,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(N(c=>c[la]))??ee(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(N(t=>Ni(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(N(t=>Ni(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mw(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const o=e[r],i=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function MF(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Pc{get title(){return this.data?.[la]}constructor(t,e,r,o,i,s,a,l,c,u,d){this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ni(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ni(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ow extends Sw{constructor(t,e){super(e),this.url=t,Kf(this,e)}toString(){return Tw(this._root)}}function Kf(n,t){t.value._routerState=n,t.children.forEach(e=>Kf(n,e))}function Tw(n){const t=n.children.length>0?` { ${n.children.map(Tw).join(", ")} } `:"";return`${n.value}${t}`}function Jf(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,mr(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),mr(t.params,e.params)||n.params.next(e.params),function UN(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!mr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),mr(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Yf(n,t){const e=mr(n.params,t.params)&&function GN(n,t){return To(n,t)&&n.every((e,r)=>mr(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Yf(n.parent,t.parent))}function ga(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const o=function TF(n,t,e){return t.children.map(r=>{for(const o of e.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ga(n,r,o);return ga(n,r)})}(n,t,e);return new jr(r,o)}{if(n.shouldAttach(t.value)){const i=n.retrieve(t.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ga(n,a)),s}}const r=function IF(n){return new io(new Rn(n.url),new Rn(n.params),new Rn(n.queryParams),new Rn(n.fragment),new Rn(n.data),n.outlet,n.component,n)}(t.value),o=t.children.map(i=>ga(n,i));return new jr(r,o)}}const Qf="ngNavigationCancelingError";function Iw(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=Io(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=Aw(!1,0,t);return o.url=e,o.navigationBehaviorOptions=r,o}function Aw(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[Qf]=!0,r.cancellationCode=t,e&&(r.url=e),r}function Pw(n){return kw(n)&&Io(n.url)}function kw(n){return n&&n[Qf]}class AF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ma,this.attachRef=null}}let ma=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new AF,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kc=!1;let Rc=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=me,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=Ce(ma),this.location=Ce(Gn),this.changeDetector=Ce(Si),this.environmentInjector=Ce(lr)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,kc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,kc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,kc);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new U(4013,kc);this._activatedRoute=e;const o=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new PF(e,a,o.injector);if(r&&function kF(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=o.createComponent(c,o.length,l)}else this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ce({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[On]}),n})();class PF{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===io?this.route:t===ma?this.childContexts:this.parent.get(t,e)}}let Zf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Br({type:n,selectors:[["ng-component"]],standalone:!0,features:[wv],decls:1,vars:0,template:function(e,r){1&e&&Be(0,"router-outlet")},dependencies:[Rc],encapsulation:2}),n})();function Rw(n,t){return n.providers&&!n._injector&&(n._injector=kl(n.providers,t,`Route: ${n.path}`)),n._injector??t}function ep(n){const t=n.children&&n.children.map(ep),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==me&&(e.component=Zf),e}function Nn(n){return n.outlet||me}function Nw(n,t){const e=n.filter(r=>Nn(r)===t);return e.push(...n.filter(r=>Nn(r)!==t)),e}function ya(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class jF{constructor(t,e,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=o}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Jf(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const o=Vi(e);t.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Ft(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,e,r){const o=t.value,i=e?e.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,i=Vi(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,i=Vi(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const o=Vi(e);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new CF(i.value.snapshot))}),t.children.length&&this.forwardEvent(new _F(t.value.snapshot))}activateRoutes(t,e,r){const o=t.value,i=e?e.value:null;if(Jf(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Jf(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=ya(o.snapshot),l=a?.get(Ts)??null;s.attachRef=null,s.route=o,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class Fw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Nc{constructor(t,e){this.component=t,this.route=e}}function VF(n,t,e){const r=n._root;return _a(r,t?t._root:null,e,[r.value])}function $i(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||function bS(n){return null!==Na(n)}(n)?t.get(n):n:r}function _a(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Vi(t);return n.children.forEach(s=>{(function UF(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function BF(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!To(n.url,t.url);case"pathParamsOrQueryParamsChange":return!To(n.url,t.url)||!mr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yf(n,t)||!mr(n.queryParams,t.queryParams);default:return!Yf(n,t)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Fw(r)):(i.data=s.data,i._resolvedData=s._resolvedData),_a(n,t,i.component?a?a.children:null:e,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Nc(a.outlet.component,s))}else s&&va(t,a,o),o.canActivateChecks.push(new Fw(r)),_a(n,null,i.component?a?a.children:null:e,r,o)})(s,i[s.value.outlet],e,r.concat([s.value]),o),delete i[s.value.outlet]}),Ft(i,(s,a)=>va(s,e.getContext(a),o)),o}function va(n,t,e){const r=Vi(n),o=n.value;Ft(r,(i,s)=>{va(i,o.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new Nc(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}function Ca(n){return"function"==typeof n}function tp(n){return n instanceof bc||"EmptyError"===n?.name}const Fc=Symbol("INITIAL_VALUE");function Ui(){return gr(n=>Q0(n.map(t=>t.pipe(Ri(1),function RN(...n){const t=rs(n);return E((e,r)=>{(t?Rf(n,e,t):Rf(n,e)).subscribe(r)})}(Fc)))).pipe(N(t=>{for(const e of t)if(!0!==e){if(e===Fc)return Fc;if(!1===e||e instanceof ro)return e}return!0}),Fr(t=>t!==Fc),Ri(1)))}function Lw(n){return function Ta(...n){return ns(n)}(vt(t=>{if(Io(t))throw Iw(0,t)}),N(t=>!0===t))}const np={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jw(n,t,e,r,o){const i=rp(n,t,e);return i.matched?function i2(n,t,e,r){const o=t.canMatch;return o&&0!==o.length?ee(o.map(s=>{const a=$i(s,n);return no(function KF(n){return n&&Ca(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(Ui(),Lw()):ee(!0)}(r=Rw(t,r),t,e).pipe(N(s=>!0===s?i:{...np})):ee(i)}function rp(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...np}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||$N)(e,n,t);if(!o)return{...np};const i={};Ft(o.posParams,(a,l)=>{i[l]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Lc(n,t,e,r){if(e.length>0&&function l2(n,t,e){return e.some(r=>jc(n,t,r)&&Nn(r)!==me)}(n,e,r)){const i=new we(t,function a2(n,t,e,r){const o={};o[me]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const i of e)if(""===i.path&&Nn(i)!==me){const s=new we([],{});s._sourceSegment=n,s._segmentIndexShift=t.length,o[Nn(i)]=s}return o}(n,t,r,new we(e,n.children)));return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===e.length&&function c2(n,t,e){return e.some(r=>jc(n,t,r))}(n,e,r)){const i=new we(n.segments,function s2(n,t,e,r,o){const i={};for(const s of r)if(jc(n,e,s)&&!o[Nn(s)]){const a=new we([],{});a._sourceSegment=n,a._segmentIndexShift=t.length,i[Nn(s)]=a}return{...o,...i}}(n,t,e,r,n.children));return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:e}}const o=new we(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}function jc(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function Vw(n,t,e,r){return!!(Nn(n)===r||r!==me&&jc(t,e,n))&&("**"===n.path||rp(t,n,e).matched)}function $w(n,t,e){return 0===t.length&&!n.children[e]}const Vc=!1;class $c{constructor(t){this.segmentGroup=t||null}}class Uw{constructor(t){this.urlTree=t}}function ba(n){return ki(new $c(n))}function Bw(n){return ki(new Uw(n))}class f2{constructor(t,e,r,o,i){this.injector=t,this.configLoader=e,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const t=Lc(this.urlTree.root,[],[],this.config).segmentGroup,e=new we(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,me).pipe(N(i=>this.createUrlTree(Tc(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jn(i=>{if(i instanceof Uw)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof $c?this.noMatchError(i):i}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,me).pipe(N(o=>this.createUrlTree(Tc(o),t.queryParams,t.fragment))).pipe(Jn(o=>{throw o instanceof $c?this.noMatchError(o):o}))}noMatchError(t){return new U(4002,Vc)}createUrlTree(t,e,r){const o=$f(t);return new ro(o,e,r)}expandSegmentGroup(t,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(N(i=>new we([],i))):this.expandSegment(t,r,e,r.segments,o,!0)}expandChildren(t,e,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return pt(o).pipe(Yr(i=>{const s=r.children[i],a=Nw(e,i);return this.expandSegmentGroup(t,a,s,i).pipe(N(l=>({segment:l,outlet:i})))}),nw((i,s)=>(i[s.outlet]=s.segment,i),{}),rw())}expandSegment(t,e,r,o,i,s){return pt(r).pipe(Yr(a=>this.expandSegmentAgainstRoute(t,e,r,a,o,i,s).pipe(Jn(c=>{if(c instanceof $c)return ee(null);throw c}))),to(a=>!!a),Jn((a,l)=>{if(tp(a))return $w(e,o,i)?ee(new we([],{})):ba(e);throw a}))}expandSegmentAgainstRoute(t,e,r,o,i,s,a){return Vw(o,e,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(t,e,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s):ba(e):ba(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Bw(i):this.lineralizeSegments(r,i).pipe(Pt(s=>{const a=new we(s,{});return this.expandSegment(t,a,e,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,o,i,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=rp(e,o,i);if(!a)return ba(e);const d=this.applyRedirectCommands(l,o.redirectTo,u);return o.redirectTo.startsWith("/")?Bw(d):this.lineralizeSegments(o,d).pipe(Pt(h=>this.expandSegment(t,e,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(t,e,r,o,i){return"**"===r.path?(t=Rw(r,t),r.loadChildren?(r._loadedRoutes?ee({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(N(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new we(o,{})))):ee(new we(o,{}))):jw(e,r,o,t).pipe(gr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(t=r._injector??t,r,o).pipe(Pt(u=>{const d=u.injector??t,h=u.routes,{segmentGroup:f,slicedSegments:p}=Lc(e,a,l,h),y=new we(f.segments,f.children);if(0===p.length&&y.hasChildren())return this.expandChildren(d,h,y).pipe(N(D=>new we(a,D)));if(0===h.length&&0===p.length)return ee(new we(a,{}));const _=Nn(r)===i;return this.expandSegment(d,y,h,p,_?me:i,!0).pipe(N(x=>new we(a.concat(x.segments),x.children)))})):ba(e)))}getChildConfig(t,e,r){return e.children?ee({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ee({routes:e._loadedRoutes,injector:e._loadedInjector}):function o2(n,t,e,r){const o=t.canLoad;return void 0===o||0===o.length?ee(!0):ee(o.map(s=>{const a=$i(s,n);return no(function zF(n){return n&&Ca(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(Ui(),Lw())}(t,e,r).pipe(Pt(o=>o?this.configLoader.loadChildren(t,e).pipe(vt(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):function d2(n){return ki(Aw(Vc,3))}())):ee({routes:[],injector:t})}lineralizeSegments(t,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ee(r);if(o.numberOfChildren>1||!o.children[me])return t.redirectTo,ki(new U(4e3,Vc));o=o.children[me]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,o){const i=this.createSegmentGroup(t,e.root,r,o);return new ro(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Ft(t,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,o){const i=this.createSegments(t,e.segments,r,o);let s={};return Ft(e.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,r,o)}),new we(i,s)}createSegments(t,e,r,o){return e.map(i=>i.path.startsWith(":")?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,e,r){const o=r[e.path.substring(1)];if(!o)throw new U(4001,Vc);return o}findOrReturn(t,e){let r=0;for(const o of e){if(o.path===t.path)return e.splice(r),o;r++}return t}}class g2{}class _2{constructor(t,e,r,o,i,s,a){this.injector=t,this.rootComponentType=e,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const t=Lc(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,me).pipe(N(e=>{if(null===e)return null;const r=new Pc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},me,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new jr(r,e),i=new Ow(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(t){const e=t.value,r=Mw(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,o)}processChildren(t,e,r){return pt(Object.keys(r.children)).pipe(Yr(o=>{const i=r.children[o],s=Nw(e,o);return this.processSegmentGroup(t,s,i,o)}),nw((o,i)=>o&&i?(o.push(...i),o):null),function LN(n,t=!1){return E((e,r)=>{let o=0;e.subscribe(L(r,i=>{const s=n(i,o++);(s||t)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),wc(null),rw(),N(o=>{if(null===o)return null;const i=zw(o);return function v2(n){n.sort((t,e)=>t.value.outlet===me?-1:e.value.outlet===me?1:t.value.outlet.localeCompare(e.value.outlet))}(i),i}))}processSegment(t,e,r,o,i){return pt(e).pipe(Yr(s=>this.processSegmentAgainstRoute(s._injector??t,s,r,o,i)),to(s=>!!s),Jn(s=>{if(tp(s))return $w(r,o,i)?ee([]):ee(null);throw s}))}processSegmentAgainstRoute(t,e,r,o,i){if(e.redirectTo||!Vw(e,r,o,i))return ee(null);let s;if("**"===e.path){const a=o.length>0?sw(o).parameters:{},l=qw(r)+o.length;s=ee({snapshot:new Pc(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ww(e),Nn(e),e.component??e._loadedComponent??null,e,Gw(r),l,Kw(e)),consumedSegments:[],remainingSegments:[]})}else s=jw(r,e,o,t).pipe(N(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=qw(r)+l.length;return{snapshot:new Pc(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ww(e),Nn(e),e.component??e._loadedComponent??null,e,Gw(r),d,Kw(e)),consumedSegments:l,remainingSegments:c}}));return s.pipe(gr(a=>{if(null===a)return ee(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;t=e._injector??t;const d=e._loadedInjector??t,h=function C2(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:f,slicedSegments:p}=Lc(r,c,u,h.filter(_=>void 0===_.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(N(_=>null===_?null:[new jr(l,_)]));if(0===h.length&&0===p.length)return ee([new jr(l,[])]);const y=Nn(e)===i;return this.processSegment(d,h,f,p,y?me:i).pipe(N(_=>null===_?null:[new jr(l,_)]))}))}}function b2(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function zw(n){const t=[],e=new Set;for(const r of n){if(!b2(r)){t.push(r);continue}const o=t.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),e.add(o)):t.push(r)}for(const r of e){const o=zw(r.children);t.push(new jr(r.value,o))}return t.filter(r=>!e.has(r))}function Gw(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function qw(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function Ww(n){return n.data||{}}function Kw(n){return n.resolve||{}}function Jw(n){return"string"==typeof n.title||null===n.title}function op(n){return gr(t=>{const e=n(t);return e?pt(e).pipe(N(()=>t)):ee(t)})}const Bi=new X("ROUTES");let ip=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ce(dC)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ee(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=no(e.loadComponent()).pipe(N(Qw),vt(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),Lf(()=>{this.componentLoaders.delete(e)})),o=new ew(r,()=>new S).pipe(Nf());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(N(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(e).injector,c=iw(l.get(Bi,[],ae.Self|ae.Optional)));return{routes:c.map(ep),injector:l}}),Lf(()=>{this.childrenLoaders.delete(r)})),s=new ew(i,()=>new S).pipe(Nf());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(e){return no(e()).pipe(N(Qw),Pt(r=>r instanceof Cv||Array.isArray(r)?ee(r):pt(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qw(n){return function T2(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Bc=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new S,this.configLoader=Ce(ip),this.environmentInjector=Ce(lr),this.urlSerializer=Ce(ua),this.rootContexts=Ce(ma),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new mF(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new gF(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new Rn({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pa,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fr(r=>0!==r.id),N(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),gr(r=>{let o=!1,i=!1;return ee(r).pipe(vt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gr(s=>{const a=e.browserUrlTree.toString(),l=!e.navigated||s.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const u="";return this.events.next(new Ac(s.id,e.serializeUrl(r.rawUrl),u,0)),e.rawUrlTree=s.rawUrl,s.resolve(null),nr}if(e.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Zw(s.source)&&(e.browserUrlTree=s.extractedUrl),ee(s).pipe(gr(u=>{const d=this.transitions?.getValue();return this.events.next(new zf(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?nr:Promise.resolve(u)}),function p2(n,t,e,r){return gr(o=>function h2(n,t,e,r,o){return new f2(n,t,e,r,o).apply()}(n,t,e,o.extractedUrl,r).pipe(N(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),vt(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function D2(n,t,e,r,o){return Pt(i=>function y2(n,t,e,r,o,i,s="emptyOnly"){return new _2(n,t,e,r,o,s,i).recognize().pipe(gr(a=>null===a?function m2(n){return new qe(t=>t.error(n))}(new g2):ee(a)))}(n,t,e,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(N(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),vt(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=e.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);e.setBrowserUrl(h,u)}e.browserUrlTree=u.urlAfterRedirects}const d=new uF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,y=new zf(u,this.urlSerializer.serialize(d),h,f);this.events.next(y);const _=xw(d,this.rootComponentType).snapshot;return ee(r={...s,targetSnapshot:_,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Ac(s.id,e.serializeUrl(r.extractedUrl),u,1)),e.rawUrlTree=s.rawUrl,s.resolve(null),nr}}),vt(s=>{const a=new dF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),N(s=>r={...s,guards:VF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function YF(n,t){return Pt(e=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return 0===s.length&&0===i.length?ee({...e,guardsResult:!0}):function QF(n,t,e,r){return pt(n).pipe(Pt(o=>function r2(n,t,e,r,o){const i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return i&&0!==i.length?ee(i.map(a=>{const l=ya(t)??o,c=$i(a,l);return no(function WF(n){return n&&Ca(n.canDeactivate)}(c)?c.canDeactivate(n,t,e,r):l.runInContext(()=>c(n,t,e,r))).pipe(to())})).pipe(Ui()):ee(!0)}(o.component,o.route,e,t,r)),to(o=>!0!==o,!0))}(s,r,o,n).pipe(Pt(a=>a&&function HF(n){return"boolean"==typeof n}(a)?function ZF(n,t,e,r){return pt(t).pipe(Yr(o=>Rf(function e2(n,t){return null!==n&&t&&t(new yF(n)),ee(!0)}(o.route.parent,r),function XF(n,t){return null!==n&&t&&t(new vF(n)),ee(!0)}(o.route,r),function n2(n,t,e){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(s=>function $F(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(s)).filter(s=>null!==s).map(s=>X0(()=>ee(s.guards.map(l=>{const c=ya(s.node)??e,u=$i(l,c);return no(function qF(n){return n&&Ca(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(to())})).pipe(Ui())));return ee(i).pipe(Ui())}(n,o.path,e),function t2(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return ee(!0);const o=r.map(i=>X0(()=>{const s=ya(t)??e,a=$i(i,s);return no(function GF(n){return n&&Ca(n.canActivate)}(a)?a.canActivate(t,n):s.runInContext(()=>a(t,n))).pipe(to())}));return ee(o).pipe(Ui())}(n,o.route,e))),to(o=>!0!==o,!0))}(r,i,n,t):ee(a)),N(a=>({...e,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),vt(s=>{if(r.guardsResult=s.guardsResult,Io(s.guardsResult))throw Iw(0,s.guardsResult);const a=new hF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Fr(s=>!!s.guardsResult||(e.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),op(s=>{if(s.guards.canActivateChecks.length)return ee(s).pipe(vt(a=>{const l=new fF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),gr(a=>{let l=!1;return ee(a).pipe(function S2(n,t){return Pt(e=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return ee(e);let i=0;return pt(o).pipe(Yr(s=>function E2(n,t,e,r){const o=n.routeConfig,i=n._resolve;return void 0!==o?.title&&!Jw(o)&&(i[la]=o.title),function x2(n,t,e,r){const o=function M2(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return ee({});const i={};return pt(o).pipe(Pt(s=>function O2(n,t,e,r){const o=ya(t)??r,i=$i(n,o);return no(i.resolve?i.resolve(t,e):o.runInContext(()=>i(t,e)))}(n[s],t,e,r).pipe(to(),vt(a=>{i[s]=a}))),Ff(1),function jN(n){return N(()=>n)}(i),Jn(s=>tp(s)?nr:ki(s)))}(i,n,t,r).pipe(N(s=>(n._resolvedData=s,n.data=Mw(n,e).resolve,o&&Jw(o)&&(n.data[la]=o.title),null)))}(s.route,r,n,t)),vt(()=>i++),Ff(1),Pt(s=>i===o.length?ee(e):nr))})}(e.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),vt(a=>{const l=new pF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),op(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(vt(u=>{l.component=u}),N(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Q0(a(s.targetSnapshot.root)).pipe(wc(),Ri(1))}),op(()=>this.afterPreactivation()),N(s=>{const a=function OF(n,t,e){const r=ga(n,t._root,e?e._root:void 0);return new Ew(r,t)}(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),vt(s=>{e.currentUrlTree=s.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),e.routerState=s.targetRouterState,"deferred"===e.urlUpdateStrategy&&(s.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,s),e.browserUrlTree=s.urlAfterRedirects)}),((n,t,e)=>N(r=>(new jF(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s)),Ri(1),vt({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new oo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Lf(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Jn(s=>{if(i=!0,kw(s)){Pw(s)||(e.navigated=!0,e.restoreHistory(r,!0));const a=new Ic(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),Pw(s)){const l=e.urlHandlingStrategy.merge(s.url,e.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||Zw(r.source)};e.scheduleNavigation(l,pa,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const a=new Gf(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(e.errorHandler(s))}catch(l){r.reject(l)}}return nr}))}))}cancelNavigationTransition(e,r,o){const i=new Ic(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(i),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zw(n){return n!==pa}let Xw=(()=>{class n{buildTitle(e){let r,o=e.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===me);return r}getResolvedTitleForRoute(e){return e.data[la]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:function(){return Ce(I2)},providedIn:"root"}),n})(),I2=(()=>{class n extends Xw{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(K(Ab))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:function(){return Ce(k2)},providedIn:"root"}),n})();class P2{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let k2=(()=>{class n extends P2{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nt(n)))(r||n)}}(),n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hc=new X("",{providedIn:"root",factory:()=>({})});let N2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:function(){return Ce(F2)},providedIn:"root"}),n})(),F2=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function L2(n){throw n}function j2(n,t,e){return t.parse("/")}const V2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ct=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ce(WI),this.isNgZoneEnabled=!1,this.options=Ce(Hc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||L2,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||j2,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ce(N2),this.routeReuseStrategy=Ce(A2),this.urlCreationStrategy=Ce(EF),this.titleStrategy=Ce(Xw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=iw(Ce(Bi,{optional:!0})??[]),this.navigationTransitions=Ce(Bc),this.urlSerializer=Ce(ua),this.location=Ce(Ph),this.isNgZoneEnabled=Ce(ct)instanceof ct&&ct.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ro,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xw(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),pa,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(ep),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){const o=Io(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,pa,null,r)}navigate(e,r={skipLocationChange:!1}){return function U2(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new U(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return r}isActive(e,r){let o;if(o=!0===r?{...V2}:!1===r?{...$2}:r,Io(e))return lw(this.currentUrlTree,e,o);const i=this.parseUrl(e);return lw(this.currentUrlTree,i,o)}removeEmptyProps(e){return Object.keys(e).reduce((r,o)=>{const i=e[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(e,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(e,r){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zc=(()=>{class n{constructor(e,r,o,i,s,a){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new S;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof oo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=Ei(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=Ei(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=Ei(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function Wm(n,t,e){return function Jx(n,t){return"src"===t&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===t&&("base"===n||"link"===n)?qm:Ms}(t,e)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,e,r):o.removeAttribute(i,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(A(Ct),A(io),function nl(n){return function CE(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let o=0;for(;o<r;){const i=e[o];if(Lg(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof e[o];)o++;else{if(i===t)return e[o+1];o+=2}}}return null}(Rt(),n)}("tabindex"),A(Mr),A(pn),A(Eo))},n.\u0275dir=ce({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,r){1&e&&V("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&e&&Tt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[On]}),n})(),eD=(()=>{class n{get isActive(){return this._isActive}constructor(e,r,o,i,s){this.router=e,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new it,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof oo&&this.update()})}ngAfterContentInit(){ee(this.links.changes,ee(null)).pipe(Lo()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=pt(e).pipe(Lo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const r=function B2(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&e.isActive(o.urlTree,r)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}}return n.\u0275fac=function(e){return new(e||n)(A(Ct),A(pn),A(Mr),A(Si),A(zc,8))},n.\u0275dir=ce({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,r,o){if(1&e&&Uv(o,zc,5),2&e){let i;$v(i=function Bv(){return function xI(n,t){return n[ir].queries[t].queryList}(j(),Ig())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[On]}),n})();class tD{}let H2=(()=>{class n{constructor(e,r,o,i,s){this.router=e,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Fr(e=>e instanceof oo),Yr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=kl(i.providers,e,`Route: ${i.path}`));const s=i._injector??e,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return pt(o).pipe(Lo())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):ee(null);const i=o.pipe(Pt(s=>null===s?ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return r.loadComponent&&!r._loadedComponent?pt([i,this.loader.loadComponent(r)]).pipe(Lo()):i})}}return n.\u0275fac=function(e){return new(e||n)(K(Ct),K(dC),K(lr),K(tD),K(ip))},n.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ap=new X("");let nD=(()=>{class n{constructor(e,r,o,i,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof zf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof oo&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Dw&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dw(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){!function Ey(){throw new Error("invalid")}()},n.\u0275prov=Z({token:n,factory:n.\u0275fac}),n})();var yn=(()=>((yn=yn||{})[yn.COMPLETE=0]="COMPLETE",yn[yn.FAILED=1]="FAILED",yn[yn.REDIRECTING=2]="REDIRECTING",yn))();const Hi=!1;function so(n,t){return{\u0275kind:n,\u0275providers:t}}const lp=new X("",{providedIn:"root",factory:()=>!1});function oD(){const n=Ce(cr);return t=>{const e=n.get($l);if(t!==e.components[0])return;const r=n.get(Ct),o=n.get(iD);1===n.get(cp)&&r.initialNavigation(),n.get(sD,null,ae.Optional)?.setUpPreloading(),n.get(ap,null,ae.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const iD=new X(Hi?"bootstrap done indicator":"",{factory:()=>new S}),cp=new X(Hi?"initial navigation":"",{providedIn:"root",factory:()=>1});function K2(){let n=[];return n=Hi?[{provide:fl,multi:!0,useFactory:()=>{const t=Ce(Ct);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function bF(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],so(1,n)}const sD=new X(Hi?"router preloader":"");function J2(n){return so(0,[{provide:sD,useExisting:H2},{provide:tD,useExisting:n}])}const wa=!1,aD=new X(wa?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Y2=[Ph,{provide:ua,useClass:jf},Ct,ma,{provide:io,useFactory:function rD(n){return n.routerState.root},deps:[Ct]},ip,wa?{provide:lp,useValue:!0}:[]];function Q2(){return new vC("Router",Ct)}let up=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[Y2,wa&&r?.enableTracing?K2().\u0275providers:[],{provide:Bi,multi:!0,useValue:e},{provide:aD,useFactory:tL,deps:[[Ct,new _s,new vs]]},{provide:Hc,useValue:r||{}},r?.useHash?{provide:Eo,useClass:RA}:{provide:Eo,useClass:BC},{provide:ap,useFactory:()=>{const n=Ce(XP),t=Ce(ct),e=Ce(Hc),r=Ce(Bc),o=Ce(ua);return e.scrollOffset&&n.setOffset(e.scrollOffset),new nD(o,r,n,t,e)}},r?.preloadingStrategy?J2(r.preloadingStrategy).\u0275providers:[],{provide:vC,multi:!0,useFactory:Q2},r?.initialNavigation?nL(r):[],[{provide:lD,useFactory:oD},{provide:_C,multi:!0,useExisting:lD}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Bi,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(K(aD,8))},n.\u0275mod=jn({type:n}),n.\u0275inj=xn({imports:[Zf]}),n})();function tL(n){if(wa&&n)throw new U(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function nL(n){return["disabled"===n.initialNavigation?so(3,[{provide:Ll,multi:!0,useFactory:()=>{const t=Ce(Ct);return()=>{t.setUpLocationChangeListener()}}},{provide:cp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?so(2,[{provide:cp,useValue:0},{provide:Ll,multi:!0,deps:[cr],useFactory:t=>{const e=t.get(PA,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=t.get(Ct),i=t.get(iD);(function z2(n,t){n.events.pipe(Fr(e=>e instanceof oo||e instanceof Ic||e instanceof Gf||e instanceof Ac),N(e=>e instanceof oo||e instanceof Ac?yn.COMPLETE:e instanceof Ic&&(0===e.code||1===e.code)?yn.REDIRECTING:yn.FAILED),Fr(e=>e!==yn.REDIRECTING),Ri(1)).subscribe(()=>{t()})})(o,()=>{r(!0)}),t.get(Bc).afterPreactivation=()=>(r(!0),i.closed?ee(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const lD=new X(wa?"Router Initializer":"");let oL=(()=>{const t=class{constructor(r){this.router=r,this.title="Pokemon TCG Pocket Collector"}ngOnInit(){const r=()=>{const o=this.router.url.startsWith("/signin");document.body.classList.toggle("signin-page",o)};r(),this.routerSub=this.router.events.subscribe(o=>{o instanceof oo&&r()})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe?.(),document.body.classList.remove("signin-page")}};let n=t;return t.\u0275fac=function(o){return new(o||t)(A(Ct))},t.\u0275cmp=Br({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){1&o&&Be(0,"router-outlet")},dependencies:[Rc],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background-color:#000;min-height:100vh}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.data-overview[_ngcontent-%COMP%]{margin-top:30px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 6px #0000001a}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;opacity:.9}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0}.section[_ngcontent-%COMP%]{margin:40px 0;padding:20px 0;border-top:2px solid #e9ecef}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:20px}.sets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.set-card[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.set-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px}.rarity-stats[_ngcontent-%COMP%], .pack-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.rarity-item[_ngcontent-%COMP%], .pack-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#000;border-radius:5px;border-left:4px solid #007bff}.rarity-name[_ngcontent-%COMP%], .pack-name[_ngcontent-%COMP%]{font-weight:600;color:#fff}.rarity-count[_ngcontent-%COMP%], .pack-count[_ngcontent-%COMP%]{color:#ccc}.rarity-percentage[_ngcontent-%COMP%], .pack-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0}.feature[_ngcontent-%COMP%]{background-color:#000;padding:20px;border-radius:8px;border-left:4px solid #17a2b8}.feature[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0;font-size:14px}.api-info[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:20px}.api-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0}.api-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;margin:0}.api-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;color:#ff6b6b}.error[_ngcontent-%COMP%]{background-color:#000;color:#ff6b6b;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center;border:1px solid #ff6b6b}.card-info[_ngcontent-%COMP%]{margin-top:30px}.card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}.card-item[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.card-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin:0 0 10px;font-size:16px}.card-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#ccc}.note[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#ccc;margin-top:20px}.instructions[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:30px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:#fff}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace}.data-info[_ngcontent-%COMP%]{background-color:#000;border-left:4px solid #007bff;padding:15px;margin-top:20px}.data-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:200px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),n})();function cD(n,t,e,r,o,i,s){try{var a=n[i](s),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function w(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function s(l){cD(i,r,o,s,a,"next",l)}function a(l){cD(i,r,o,s,a,"throw",l)}s(void 0)})}}let iL=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json",this.LOCAL_CARDS_PATH="assets/cards/cards.json"}fetchCardsFromAPI(){return this.http.get(this.CARDS_API_URL)}downloadAndStoreCards(){return this.fetchCardsFromAPI().pipe(vt(r=>{localStorage.setItem("pokemonCards",JSON.stringify(r))}))}getStoredCards(){const r=localStorage.getItem("pokemonCards");return r?JSON.parse(r):null}loadCards(){return this.http.get(this.LOCAL_CARDS_PATH).pipe(N(r=>r||[]))}getCardsBySet(r){return this.loadCards().pipe(N(o=>o.filter(i=>i.set===r)))}getCardsByType(r){return this.loadCards().pipe(N(o=>o.filter(i=>i.types&&i.types.includes(r))))}getCardsByRarity(r){return this.loadCards().pipe(N(o=>o.filter(i=>i.rarity===r)))}searchCardsByName(r){return this.loadCards().pipe(N(o=>o.filter(i=>i.label.eng.toLowerCase().includes(r.toLowerCase()))))}getUniqueSets(){return this.loadCards().pipe(N(r=>[...new Set(r.map(o=>o.set))]))}getAvailableTypes(){return this.loadCards().pipe(N(r=>[...new Set(r.flatMap(o=>o.types||[]).filter(o=>!!o))]))}getUniqueRarities(){return this.loadCards().pipe(N(r=>[...new Set(r.map(o=>o.rarity))]))}getUniquePacks(){return this.loadCards().pipe(N(r=>[...new Set(r.flatMap(o=>o.packs))]))}};let n=t;return t.\u0275fac=function(o){return new(o||t)(K(Mi))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),sL=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsData(){return this.http.get(this.CARDS_API_URL).pipe(Jn(r=>(console.error("Error downloading cards data:",r),ki(()=>new Error("Failed to download cards data")))))}downloadCardsAsBlob(){return this.downloadCardsData().pipe(N(r=>{const o=JSON.stringify(r,null,2);return new Blob([o],{type:"application/json"})}))}triggerDownload(){this.downloadCardsAsBlob().subscribe({next:r=>{const o=window.URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download="cards.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},error:r=>{console.error("Failed to download cards data:",r)}})}getStorageInstructions(){return"\nTo store the cards data locally:\n\n1. Create a 'cards' folder in src/assets/\n2. Use the downloadCardsAsBlob() method to get the data\n3. Save the file as 'cards.json' in src/assets/cards/\n\nAlternative: Use triggerDownload() to download the file and manually move it to the assets folder.\n\nNote: In a production environment, you would typically have a backend service \nto handle file storage and serving.\n    "}};let n=t;return t.\u0275fac=function(o){return new(o||t)(K(Mi))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),aL=(()=>{const t=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsJson(){this.http.get(this.CARDS_API_URL).subscribe({next:r=>{const o=JSON.stringify(r,null,2),i=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="cards.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`Downloaded ${r.length} cards to cards.json\n\nPlease move the file to: src/assets/cards/cards.json`)},error:r=>{console.error("Failed to download cards data:",r),alert("Failed to download cards data. Please check your internet connection.")}})}showSetupInstructions(){return`\n=== Pokemon TCG Pocket Collector Setup Instructions ===\n\n1. AUTOMATIC DOWNLOAD (Recommended):\n   - Click "Download cards.json" button\n   - Move the downloaded file to: src/assets/cards/cards.json\n   - Restart the development server\n\n2. MANUAL DOWNLOAD:\n   - Go to: ${this.CARDS_API_URL}\n   - Right-click and "Save As" to src/assets/cards/cards.json\n   - Restart the development server\n\n3. VERIFY SETUP:\n   - Click "Load Cards Data" to test the service\n   - Check browser console for detailed information\n   - Data will be cached in localStorage for offline use\n\n=== Service Features ===\n- \u2705 Fetch cards from Pokemon TCG Pocket database\n- \u2705 Store data locally for offline access\n- \u2705 Filter by set, type, rarity\n- \u2705 Search cards by name\n- \u2705 Get unique values for filters\n- \u2705 Automatic fallback to localStorage\n\nFor more information, check the browser console when using the services.\n    `}};let n=t;return t.\u0275fac=function(o){return new(o||t)(K(Mi))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),dp=(()=>{const t=class{constructor(r){this.http=r,this.BASE_PATH="assets/cards/",this.API_BASE="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/"}getCardRarityCode(r,o){for(const[i,s]of Object.entries(o))if(s.split(" - ")[0]===r.rarity)return i;return r.rarity||"Unknown"}loadSets(){return this.http.get(`${this.BASE_PATH}sets.json`)}loadRarities(){return this.http.get(`${this.BASE_PATH}rarity.json`)}loadCards(){return this.http.get(`${this.BASE_PATH}cards.json`)}loadAllData(){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(vt(r=>{}))}getSetByCode(r){return this.loadSets().pipe(N(o=>o.find(i=>i.code===r)))}getRarityName(r){return this.loadRarities().pipe(N(o=>o[r]))}getCardsBySetWithInfo(r){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(N(({cards:o,sets:i,rarities:s})=>{const a=i.find(l=>l.code===r);return o.filter(l=>l.set===r).map(l=>({...l,setInfo:a,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}))}))}getSetsWithCardCounts(){return xo({cards:this.loadCards(),sets:this.loadSets()}).pipe(N(({cards:r,sets:o})=>o.map(i=>{const s=r.filter(a=>a.set===i.code).length;return{...i,actualCardCount:s}})))}getRarityDistribution(){return xo({cards:this.loadCards(),rarities:this.loadRarities()}).pipe(N(({cards:r,rarities:o})=>{const i={};r.forEach(a=>{const l=this.getCardRarityCode(a,o);i[l]=(i[l]||0)+1});const s=r.length;return Object.entries(i).map(([a,l])=>({code:a,name:o[a]||a,count:l,percentage:Math.round(l/s*100*100)/100})).sort((a,l)=>l.count-a.count)}))}getPackDistribution(){return this.loadCards().pipe(N(r=>{const o={};r.forEach(s=>{(Array.isArray(s.packs)?s.packs:[]).forEach(l=>{l&&l.trim()&&(o[l]=(o[l]||0)+1)})});const i=Object.values(o).reduce((s,a)=>s+a,0);return Object.entries(o).map(([s,a])=>({pack:s,count:a,percentage:i>0?Math.round(a/i*100*100)/100:0})).sort((s,a)=>a.count-s.count)}))}searchCardsEnhanced(r){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(N(({cards:o,sets:i,rarities:s})=>o.filter(l=>l.label.eng.toLowerCase().includes(r.toLowerCase())).map(l=>{const c=i.find(u=>u.code===l.set);return{...l,setInfo:c,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}})))}getComprehensiveStats(){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(N(({cards:r,sets:o,rarities:i})=>({totalCards:r.length,totalSets:o.length,totalRarities:Object.keys(i).length,setBreakdown:o.map(a=>({...a,actualCardCount:r.filter(l=>l.set===a.code).length})),rarityBreakdown:Object.entries(i).map(([a,l])=>({code:a,name:l,count:r.filter(c=>this.getCardRarityCode(c,i)===a).length})),packBreakdown:this.calculatePackDistribution(r),dateRange:{earliest:o.reduce((a,l)=>new Date(l.releaseDate)<new Date(a)?l.releaseDate:a,o[0]?.releaseDate||""),latest:o.reduce((a,l)=>new Date(l.releaseDate)>new Date(a)?l.releaseDate:a,o[0]?.releaseDate||"")}})))}calculatePackDistribution(r){const o={};return r.forEach(i=>{(Array.isArray(i.packs)?i.packs:[]).forEach(a=>{a&&a.trim()&&(o[a]=(o[a]||0)+1)})}),Object.entries(o).map(([i,s])=>({pack:i,count:s})).sort((i,s)=>s.count-i.count)}};let n=t;return t.\u0275fac=function(o){return new(o||t)(K(Mi))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),hp=(()=>{const t=class{constructor(r,o,i,s){this.cardDataService=r,this.fileStorageService=o,this.assetsHelper=i,this.pokemonDataService=s}initializeCardData(){return this.cardDataService.downloadAndStoreCards().pipe(vt(r=>{this.logDataSummary(r)}),Jn(r=>(console.error("Failed to initialize card data:",r),ee(this.cardDataService.getStoredCards()||[]))))}downloadCardsFile(){this.assetsHelper.downloadCardsJson()}getStorageInstructions(){return this.assetsHelper.showSetupInstructions()}logDataSummary(r){new Set(r.map(a=>a.set)),new Set(r.map(a=>a.rarity)),new Set(r.flatMap(a=>a.packs))}getAllCards(){return this.cardDataService.loadCards()}getCardsBySet(r){return this.cardDataService.getCardsBySet(r)}getCardsByType(r){return this.cardDataService.getCardsByType(r)}getCardsByPack(r){return this.cardDataService.loadCards().pipe(N(o=>o.filter(i=>i.packs.includes(r))))}searchCards(r){return this.cardDataService.searchCardsByName(r)}getFilterOptions(){return new qe(r=>{Promise.all([this.cardDataService.getUniqueSets().toPromise(),this.cardDataService.getAvailableTypes().toPromise(),this.cardDataService.getUniqueRarities().toPromise(),this.cardDataService.getUniquePacks().toPromise()]).then(([o,i,s,a])=>{r.next({sets:o||[],types:i||[],rarities:s||[],packs:a||[]}),r.complete()}).catch(o=>{r.error(o)})})}loadAllPokemonData(){return this.pokemonDataService.loadAllData().pipe(vt(r=>{this.logEnhancedDataSummary(r)}))}getAllSets(){return this.pokemonDataService.loadSets()}getSetsWithCounts(){return this.pokemonDataService.getSetsWithCardCounts()}getRarityMapping(){return this.pokemonDataService.loadRarities()}getSetInfo(r){return this.pokemonDataService.getSetByCode(r)}getCardsBySetEnhanced(r){return this.pokemonDataService.getCardsBySetWithInfo(r)}searchCardsEnhanced(r){return this.pokemonDataService.searchCardsEnhanced(r)}getRarityStats(){return this.pokemonDataService.getRarityDistribution()}getPackStats(){return this.pokemonDataService.getPackDistribution()}getComprehensiveStats(){return this.pokemonDataService.getComprehensiveStats()}logEnhancedDataSummary(r){}};let n=t;return t.\u0275fac=function(o){return new(o||t)(K(iL),K(sL),K(aL),K(dp))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();class fp extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}}class uD extends fp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class dD extends fp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class hD extends fp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Gc=(()=>{return(n=Gc||(Gc={})).Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",Gc;var n})();class cL{constructor(t,{headers:e={},customFetch:r,region:o=Gc.Any}={}){this.url=t,this.headers=e,this.region=o,this.fetch=(n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(te.bind(te,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return(0,$.__awaiter)(this,arguments,void 0,function*(e,r={}){var o;try{const{headers:i,method:s,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${e}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):"string"==typeof a?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(b=>{throw"AbortError"===b.name?b:new uD(b)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new dD(f);if(!f.ok)throw new hD(f);let _,y=(null!==(o=f.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return _="application/json"===y?yield f.json():"application/octet-stream"===y||"application/pdf"===y?yield f.blob():"text/event-stream"===y?f:"multipart/form-data"===y?yield f.formData():yield f.text(),{data:_,error:null,response:f}}catch(i){return i instanceof Error&&"AbortError"===i.name?{data:null,error:new uD(i)}:{data:null,error:i,response:i instanceof hD||i instanceof dD?i.context:void 0}}})}}var uL=te(358);const{PostgrestClient:fD}=uL,yL=class mL{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(t=navigator.userAgent)&&void 0!==t&&t.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const o=parseInt(e.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`\n\nSuggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){return new(this.getWebSocketConstructor())(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return"native"===t.type||"ws"===t.type}catch{return!1}}};var zi=(()=>{return(n=zi||(zi={}))[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",zi;var n})(),bt=(()=>{return(n=bt||(bt={})).closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",bt;var n})(),Fn=(()=>{return(n=Fn||(Fn={})).close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",Fn;var n})(),qc=(()=>((qc||(qc={})).websocket="websocket",qc))(),ao=(()=>{return(n=ao||(ao={})).Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",ao;var n})();class wL{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e("string"==typeof t?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){const o=e.getUint8(1),i=e.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(t.slice(s,s+o));s+=o;const l=r.decode(t.slice(s,s+i));return s+=i,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(t.slice(s,t.byteLength)))}}}class pD{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var je=(()=>{return(n=je||(je={})).abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",je;var n})();const gD=(n,t,e={})=>{var r;const o=null!==(r=e.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=DL(s,n,t,o),i),{}):{}},DL=(n,t,e,r)=>{const i=t.find(a=>a.name===n)?.type,s=e[n];return i&&!r.includes(i)?mD(i,s):gp(s)},mD=(n,t)=>{if("_"===n.charAt(0)){const e=n.slice(1,n.length);return ML(t,e)}switch(n){case je.bool:return SL(t);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return EL(t);case je.json:case je.jsonb:return xL(t);case je.timestamp:return OL(t);default:return gp(t)}},gp=n=>n,SL=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},EL=n=>{if("string"==typeof n){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},xL=n=>{if("string"==typeof n)try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},ML=(n,t)=>{if("string"!=typeof n)return n;const e=n.length-1;if("{"===n[0]&&"}"===n[e]){let i;const s=n.slice(1,e);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>mD(t,a))}return n},OL=n=>"string"==typeof n?n.replace(" ","T"):n,yD=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname=""===t.pathname||"/"===t.pathname?"/api/broadcast":t.pathname+"/api/broadcast",t.href};class mp{constructor(t,e,r={},o=1e4){this.channel=t,this.event=e,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}class Da{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Da.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=Da.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Da.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,o){const i=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(_=>_.presence_ref),f=d.map(_=>_.presence_ref),p=u.filter(_=>f.indexOf(_.presence_ref)<0),y=d.filter(_=>h.indexOf(_.presence_ref)<0);p.length>0&&(a[c]=p),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(t,e,r,o){const{joins:i,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=t[a])&&void 0!==c?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,o(a,c,l),0===c.length&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{const o=t[r];return e[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gi=(()=>{return(n=Gi||(Gi={})).BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",Gi;var n})(),_r=(()=>{return(n=_r||(_r={})).SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",_r;var n})();class yp{constructor(t,e={config:{}},r){var o,i;if(this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new mp(this,Fn.join,this.params,this.timeout),this.rejoinTimer=new pD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fn.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Da(this),this.broadcastEndpointURL=yD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==bt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(p=>p.filter))&&void 0!==i?i:[],d=!!this.bindings[Gi.PRESENCE]&&this.bindings[Gi.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t?.(_r.CHANNEL_ERROR,p)),this._onClose(()=>t?.(_r.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",function(){var p=w(function*({postgres_changes:y}){var _;if(r.socket.setAuth(),void 0!==y){const b=r.bindings.postgres_changes,x=null!==(_=b?.length)&&void 0!==_?_:0,D=[];for(let R=0;R<x;R++){const F=b[R],{filter:{event:Y,schema:Zt,table:Pe,filter:ft}}=F,Zn=y&&y[R];if(!Zn||Zn.event!==Y||Zn.schema!==Zt||Zn.table!==Pe||Zn.filter!==ft)return r.unsubscribe(),r.state=bt.errored,void t?.(_r.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));D.push(Object.assign(Object.assign({},F),{id:Zn.id}))}return r.bindings.postgres_changes=D,void(t&&t(_r.SUBSCRIBED))}t?.(_r.SUBSCRIBED)});return function(y){return p.apply(this,arguments)}}()).receive("error",p=>{this.state=bt.errored,t?.(_r.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t?.(_r.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(t){var e=this;return w(function*(r,o={}){return yield e.send({type:"presence",event:"track",payload:r},o.timeout||e.timeout)}).apply(this,arguments)}untrack(){var t=this;return w(function*(e={}){return yield t.send({type:"presence",event:"untrack"},e)}).apply(this,arguments)}on(t,e,r){return this.state===bt.joined&&t===Gi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}httpSend(t,e){var r=this;return w(function*(o,i,s={}){var a;const l=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,c,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const h=yield u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(t){var e=this;return w(function*(r,o={}){var i,s;if(e._canPush()||"broadcast"!==r.type)return new Promise(a=>{var l,c,u;const d=e._push(r.type,r,o.timeout||e.timeout);"broadcast"===r.type&&!(null!==(u=null===(c=null===(l=e.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=r,u={method:"POST",headers:{Authorization:e.socket.accessTokenValue?`Bearer ${e.socket.accessTokenValue}`:"",apikey:e.socket.apiKey?e.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:e.subTopic,event:a,payload:l,private:e.private}]})};try{const d=yield e._fetchWithTimeout(e.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:e.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=bt.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new mp(this,Fn.leave,{},t),r.receive("ok",()=>{e(),o("ok")}).receive("timeout",()=>{e(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bt.closed,this.bindings={}}_fetchWithTimeout(t,e,r){var o=this;return w(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(s),a})()}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new mp(this,t,e,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var o,i;const s=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Fn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(f=>{var p,y,_;return"*"===(null===(p=f.filter)||void 0===p?void 0:p.event)||(null===(_=null===(y=f.filter)||void 0===y?void 0:y.event)||void 0===_?void 0:_.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):null===(i=this.bindings[s])||void 0===i||i.filter(f=>{var p,y,_,b,x,D;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in f){const R=f.id,F=null===(p=f.filter)||void 0===p?void 0:p.event;return R&&(null===(y=e.ids)||void 0===y?void 0:y.includes(R))&&("*"===F||F?.toLocaleLowerCase()===(null===(_=e.data)||void 0===_?void 0:_.type.toLocaleLowerCase()))}{const R=null===(x=null===(b=f?.filter)||void 0===b?void 0:b.event)||void 0===x?void 0:x.toLocaleLowerCase();return"*"===R||R===(null===(D=e?.event)||void 0===D?void 0:D.toLocaleLowerCase())}}return f.type.toLocaleLowerCase()===s}).map(f=>{if("object"==typeof h&&"ids"in h){const p=h.data,{schema:y,table:_,commit_timestamp:b,type:x,errors:D}=p;h=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:b,eventType:x,new:{},old:{},errors:D}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===bt.closed}_isJoined(){return this.state===bt.joined}_isJoining(){return this.state===bt.joining}_isLeaving(){return this.state===bt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){const o=t.toLocaleLowerCase(),i={type:o,filter:e,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(t,e){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&yp.isEqual(o.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fn.close,{},t)}_onError(t){this._on(Fn.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return("INSERT"===t.type||"UPDATE"===t.type)&&(e.new=gD(t.columns,t.record)),("UPDATE"===t.type||"DELETE"===t.type)&&(e.old=gD(t.columns,t.old_record)),e}}const _p=()=>{},TL=[1e3,2e3,5e3,1e4];class PL{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_p,this.ref=0,this.reconnectTimer=null,this.logger=_p,this.conn=null,this.sendBuffer=[],this.serializer=new wL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return i=o||(typeof fetch>"u"?(...s)=>Promise.resolve().then(te.bind(te,397)).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...s)=>i(...s)},null===(r=e?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${qc.websocket}`,this.httpEndpoint=yD(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yL.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){var e=this;return w(function*(){const r=yield t.unsubscribe();return 0===e.channels.length&&e.disconnect(),r})()}removeAllChannels(){var t=this;return w(function*(){const e=yield Promise.all(t.channels.map(r=>r.unsubscribe()));return t.channels=[],t.disconnect(),e})()}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case zi.connecting:return ao.Connecting;case zi.open:return ao.Open;case zi.closing:return ao.Closing;default:return ao.Closed}}isConnected(){return this.connectionState()===ao.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(t,e={config:{}}){const r=`realtime:${t}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new yp(`realtime:${t}`,e,this);return this.channels.push(i),i}}push(t){const{topic:e,event:r,payload:o,ref:i}=t,s=()=>{this.encode(t,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${e} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var t=this;return w(function*(e=null){t._authPromise=t._performAuth(e);try{yield t._authPromise}finally{t._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var t=this;return w(function*(){var e;if(t.isConnected()){if(t.pendingHeartbeatRef){t.pendingHeartbeatRef=null,t.log("transport","heartbeat timeout. Attempting to re-establish connection");try{t.heartbeatCallback("timeout")}catch(r){t.log("error","error in heartbeat callback",r)}return t._wasManualDisconnect=!1,null===(e=t.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;t.isConnected()||null===(r=t.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}t.pendingHeartbeatRef=t._makeRef(),t.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t.pendingHeartbeatRef});try{t.heartbeatCallback("sent")}catch(r){t.log("error","error in heartbeat callback",r)}t._setAuthSafely("heartbeat")}else try{t.heartbeatCallback("disconnected")}catch(r){t.log("error","error in heartbeat callback",r)}})()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return this.ref=t===this.ref?0:t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=e;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;"heartbeat"===t&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===t&&(null===(e=this.reconnectTimer)||void 0===e||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Fn.error))}_appendParams(t,e){if(0===Object.keys(e).length)return t;const r=t.match(/\?/)?"&":"?";return`${t}${r}${new URLSearchParams(e)}`}_workerObjectUrl(t){let e;if(t)e=t;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,"connecting"===t?this._wasManualDisconnect=!1:"disconnecting"===t&&(this._wasManualDisconnect=e)}_performAuth(){var t=this;return w(function*(e=null){let r;r=e||(t.accessToken?yield t.accessToken():t.accessTokenValue),t.accessTokenValue!=r&&(t.accessTokenValue=r,t.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.76.1"}),o.joinedOnce&&o._isJoined()&&o._push(Fn.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var t=this;return w(function*(){t._authPromise&&(yield t._authPromise)})()}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){var t=this;this.reconnectTimer=new pD(w(function*(){setTimeout(w(function*(){yield t._waitForAuthIfNeeded(),t.isConnected()||t.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(t){var e,r,o,i,s,a,l,c,u;if(this.transport=null!==(e=t?.transport)&&void 0!==e?e:null,this.timeout=null!==(r=t?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=t?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=t?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=t?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=t?.heartbeatCallback)&&void 0!==a?a:_p,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=t?.reconnectAfterMs)&&void 0!==l?l:d=>TL[d-1]||1e4,this.encode=null!==(c=t?.encode)&&void 0!==c?c:(d,h)=>h(JSON.stringify(d)),this.decode=null!==(u=t?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class vp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function nt(n){return"object"==typeof n&&null!==n&&"__isStorageError"in n}class kL extends vp{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cp extends vp{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}const bp=n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(te.bind(te,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)},wp=n=>{if(Array.isArray(n))return n.map(e=>wp(e));if("function"==typeof n||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([e,r])=>{const o=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[o]=wp(r)}),t},Dp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),FL=(n,t,e)=>(0,$.__awaiter)(void 0,void 0,void 0,function*(){const r=yield(0,$.__awaiter)(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(te.bind(te,397))).Response:Response});n instanceof r&&!e?.noResolveJson?n.json().then(o=>{const i=n.status||500,s=o?.statusCode||i+"";t(new kL(Dp(o),i,s))}).catch(o=>{t(new Cp(Dp(o),o))}):t(new Cp(Dp(n),n))}),LL=(n,t,e,r)=>{const o={method:n,headers:t?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const t=Object.getPrototypeOf(n);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),e)):o};function Sa(n,t,e,r,o,i){return(0,$.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,LL(t,r,o,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>FL(l,a,r))})})}function Ea(n,t,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(n,"GET",t,e,r)})}function Yn(n,t,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(n,"POST",t,r,o,e)})}function Sp(n,t,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(n,"PUT",t,r,o,e)})}function Ep(n,t,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(n,"DELETE",t,r,o,e)})}class VL{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}}var _D;_D=Symbol.toStringTag;const BL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class HL{constructor(t,e={},r,o){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=bp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},vD),o);let a=Object.assign(Object.assign({},this.headers),"POST"===t&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield("PUT"==t?Sp:Yn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}upload(t,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:vD.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(yield Sp(this.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(nt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const o=Object.assign({},this.headers);e?.upsert&&(o["x-upsert"]="true");const i=yield Yn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new vp("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}update(t,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}copy(t,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Yn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}createSignedUrl(t,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),i=yield Yn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}createSignedUrls(t,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{const o=yield Yn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}download(t,e){const o=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(t);return new class $L{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[_D]="BlobDownloadBuilder",this.promise=null}asStream(){return new VL(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}}(()=>Ea(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{const r=yield Ea(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:wp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}exists(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{return yield function jL(n,t,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){return Sa(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r)&&r instanceof Cp&&[400,404].includes(r.originalError?.status))return{data:!1,error:r};throw r}})}getPublicUrl(t,e){const r=this._getFinalPath(t),o=[],i=e?.download?`download=${!0===e.download?"":e.download}`:"";""!==i&&o.push(i);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});""!==l&&o.push(l);let c=o.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}list(t,e,r){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},BL),e),{prefix:t||""});return{data:yield Yn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}listV2(t,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Yn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const bD={"X-Client-Info":"storage-js/2.76.1"};class zL{constructor(t,e={},r,o){this.shouldThrowOnError=!1;const i=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bD),e),this.fetch=bp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}getBucket(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}createBucket(t){return(0,$.__awaiter)(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield Yn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}updateBucket(t,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Sp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}deleteBucket(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}}class GL{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bD),e),this.fetch=bp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}listBuckets(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{const e=new URLSearchParams;void 0!==t?.limit&&e.set("limit",t.limit.toString()),void 0!==t?.offset&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);const r=e.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield Ea(this.fetch,o,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}deleteBucket(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}}const xp={"X-Client-Info":"storage-js/2.76.1","Content-Type":"application/json"};class wD extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _n(n){return"object"==typeof n&&null!==n&&"__isStorageVectorsError"in n}class Mp extends wD{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qL extends wD{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}}const Op=n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(te.bind(te,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)},DD=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),KL=(n,t,e)=>(0,$.__awaiter)(void 0,void 0,void 0,function*(){if(n&&"object"==typeof n&&"status"in n&&"ok"in n&&"number"==typeof n.status&&!e?.noResolveJson){const o=n.status||500,i=n;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";t(new Mp(DD(s),o,a))}).catch(()=>{t(new Mp(i.statusText||`HTTP ${o} error`,o,o+""))}):t(new Mp(i.statusText||`HTTP ${o} error`,o,o+""))}else t(new qL(DD(n),n))}),JL=(n,t,e,r)=>{const o={method:n,headers:t?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const t=Object.getPrototypeOf(n);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),e)):o};function vn(n,t,e,r,o){return(0,$.__awaiter)(this,void 0,void 0,function*(){return function Kc(n,t,e,r,o,i){return(0,$.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,JL(t,r,o,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return c&&c.includes("application/json")?l.json():{}}).then(l=>s(l)).catch(l=>KL(l,a,r))})})}(n,"POST",t,r,o,e)})}class YL{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xp),e),this.fetch=Op(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield vn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getIndex(t,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}})}listIndexes(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield vn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}})}}class QL{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xp),e),this.fetch=Op(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield vn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getVectors(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}listVectors(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==t.segmentCount){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==t.segmentIndex&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error("segmentIndex must be between 0 and "+(t.segmentCount-1))}return{data:yield vn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}queryVectors(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteVectors(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield vn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}}class ZL{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xp),e),this.fetch=Op(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield vn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getBucket(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,$.__awaiter)(this,arguments,void 0,function*(t={}){try{return{data:yield vn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteBucket(t){return(0,$.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield vn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}}class XL extends ZL{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new ej(this.url,this.headers,t,this.fetch)}}class ej extends YL{constructor(t,e,r,o){super(t,e,o),this.vectorBucketName=r}createIndex(t){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,$.__awaiter)(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new tj(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class tj extends QL{constructor(t,e,r,o,i){super(t,e,i),this.vectorBucketName=r,this.indexName=o}putVectors(t){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,$.__awaiter)(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,$.__awaiter)(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class nj extends zL{constructor(t,e={},r,o){super(t,e,r,o)}from(t){return new HL(this.url,this.headers,t,this.fetch)}get vectors(){return new XL(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new GL(this.url+"/iceberg",this.headers,this.fetch)}}let xa="";xa=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const oj={headers:{"X-Client-Info":`supabase-js-${xa}/2.76.1`}},ij={schema:"public"},sj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aj={};var SD=te(397);const uj=(n,t,e)=>{const r=(n=>{let t;return t=n||(typeof fetch>"u"?SD.default:fetch),(...e)=>t(...e)})(e),o=typeof Headers>"u"?SD.Headers:Headers;return function(){var i=w(function*(s,a){var l;const c=null!==(l=yield t())&&void 0!==l?l:n;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},qi=3e4,Ap="X-Supabase-Api-Version",xD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ma extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}}function re(n){return"object"==typeof n&&null!==n&&"__isAuthError"in n}class vj extends Ma{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}}class Ao extends Ma{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class lo extends Ma{constructor(t,e,r,o){super(t,r,o),this.name=e,this.status=r}}class co extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Wi extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jc extends lo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Yc extends lo{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class MD extends lo{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pp extends lo{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function kp(n){return re(n)&&"AuthRetryableFetchError"===n.name}class OD extends lo{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}}class Rp extends lo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),TD=" \t\n\r=".split(""),Dj=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<TD.length;t+=1)n[TD[t].charCodeAt(0)]=-2;for(let t=0;t<Qc.length;t+=1)n[Qc[t].charCodeAt(0)]=t;return n})();function Zc(n,t,e){if(null!==n)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;)e(Qc[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)e(Qc[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function ID(n,t,e){const r=Dj[n];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function AD(n){const t=[],e=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function Ej(n,t,e){if(0===t.utf8seq){if(n<=127)return void e(n);for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&n;else if(3===t.utf8seq)t.codepoint=15&n;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&n}t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&n,t.utf8seq-=1,0===t.utf8seq&&e(t.codepoint)}}(s,r,e)};for(let s=0;s<n.length;s+=1)ID(n.charCodeAt(s),o,i);return t.join("")}function Sj(n,t){if(!(n<=127)){if(n<=2047)return t(192|n>>6),void t(128|63&n);if(n<=65535)return t(224|n>>12),t(128|n>>6&63),void t(128|63&n);if(n<=1114111)return t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),void t(128|63&n);throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}t(n)}function Ki(n){const t=[],e={queue:0,queuedBits:0},r=o=>{t.push(o)};for(let o=0;o<n.length;o+=1)ID(n.charCodeAt(o),e,r);return new Uint8Array(t)}function Po(n){const t=[],e={queue:0,queuedBits:0},r=o=>{t.push(o)};return n.forEach(o=>Zc(o,e,r)),Zc(null,e,r),t.join("")}const Cn=()=>typeof window<"u"&&typeof document<"u",ko={tested:!1,writable:!1},kD=()=>{if(!Cn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(ko.tested)return ko.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ko.tested=!0,ko.writable=!0}catch{ko.tested=!0,ko.writable=!1}return ko.writable},RD=n=>{let t;return t=n||(typeof fetch>"u"?(...e)=>Promise.resolve().then(te.bind(te,397)).then(({default:r})=>r(...e)):fetch),(...e)=>t(...e)},Ij=n=>"object"==typeof n&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json,Ji=function(){var n=w(function*(t,e,r){yield t.setItem(e,JSON.stringify(r))});return function(e,r,o){return n.apply(this,arguments)}}(),Ro=function(){var n=w(function*(t,e){const r=yield t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(e,r){return n.apply(this,arguments)}}(),uo=function(){var n=w(function*(t,e){yield t.removeItem(e)});return function(e,r){return n.apply(this,arguments)}}();class Xc{constructor(){this.promise=new Xc.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}function Np(n){const t=n.split(".");if(3!==t.length)throw new Rp("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!yj.test(t[r]))throw new Rp("JWT not in base64url format");return{header:JSON.parse(AD(t[0])),payload:JSON.parse(AD(t[1])),signature:Ki(t[2]),raw:{header:t[0],payload:t[1]}}}function Fp(){return(Fp=w(function*(n){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})).apply(this,arguments)}function kj(n){return("0"+n.toString(16)).substr(-2)}function Lp(){return(Lp=w(function*(n){const e=(new TextEncoder).encode(n),r=yield crypto.subtle.digest("SHA-256",e),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function jp(){return jp=w(function*(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=yield function Nj(n){return Lp.apply(this,arguments)}(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),jp.apply(this,arguments)}function Yi(n,t){return Vp.apply(this,arguments)}function Vp(){return Vp=w(function*(n,t,e=!1){const r=function Rj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length;let o="";for(let i=0;i<56;i++)o+=e.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(t),Array.from(t,kj).join("")}();let o=r;e&&(o+="/PASSWORD_RECOVERY"),yield Ji(n,`${t}-code-verifier`,o);const i=yield function Fj(n){return jp.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),Vp.apply(this,arguments)}Xc.promiseConstructor=Promise;const Lj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Uj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qi(n){if(!Uj.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $p(){return new Proxy({},{get:(t,e)=>{if("__isUserNotAvailableProxy"===e)return!0;if("symbol"==typeof e){const r=e.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ND(n){return JSON.parse(JSON.stringify(n))}const No=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Bj=[502,503,504];function FD(n){return Up.apply(this,arguments)}function Up(){return(Up=w(function*(n){var t;if(!Ij(n))throw new Pp(No(n),0);if(Bj.includes(n.status))throw new Pp(No(n),n.status);let e,r;try{e=yield n.json()}catch(i){throw new Ao(No(i),i)}const o=function jj(n){const t=n.headers.get(Ap);if(!t||!t.match(Lj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}(n);if(o&&o.getTime()>=xD["2024-01-01"].timestamp&&"object"==typeof e&&e&&"string"==typeof e.code?r=e.code:"object"==typeof e&&e&&"string"==typeof e.error_code&&(r=e.error_code),r){if("weak_password"===r)throw new OD(No(e),n.status,(null===(t=e.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new co}else if("object"==typeof e&&e&&"object"==typeof e.weak_password&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new OD(No(e),n.status,e.weak_password.reasons);throw new vj(No(e),n.status||500,r)})).apply(this,arguments)}const Hj=(n,t,e,r)=>{const o={method:n,headers:t?.headers||{}};return"GET"===n?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),e))};function ge(n,t,e,r){return Bp.apply(this,arguments)}function Bp(){return Bp=w(function*(n,t,e,r){var o;const i=Object.assign({},r?.headers);i[Ap]||(i[Ap]=xD["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield function zj(n,t,e,r,o,i){return Hp.apply(this,arguments)}(n,t,e+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),Bp.apply(this,arguments)}function Hp(){return(Hp=w(function*(n,t,e,r,o,i){const s=Hj(t,r,o,i);let a;try{a=yield n(e,Object.assign({},s))}catch(l){throw console.error(l),new Pp(No(l),0)}if(a.ok||(yield FD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield FD(l)}})).apply(this,arguments)}function Qn(n){var t;let e=null;return function Wj(n){return n.access_token&&n.refresh_token&&n.expires_in}(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=function Mj(n){return Math.round(Date.now()/1e3)+n}(n.expires_in))),{data:{session:e,user:null!==(t=n.user)&&void 0!==t?t:n},error:null}}function LD(n){const t=Qn(n);return!t.error&&n.weak_password&&"object"==typeof n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&"string"==typeof n.weak_password.message&&n.weak_password.reasons.reduce((e,r)=>e&&"string"==typeof r,!0)&&(t.data.weak_password=n.weak_password),t}function ho(n){var t;return{data:{user:null!==(t=n.user)&&void 0!==t?t:n},error:null}}function Gj(n){return{data:n,error:null}}function qj(n){const{action_link:t,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i}=n,s=(0,$.__rest)(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function jD(n){return n}const zp=["global","local","others"];class Kj{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=RD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(t){var e=this;return w(function*(r,o=zp[0]){if(zp.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zp.join(", ")}`);try{return yield ge(e.fetch,"POST",`${e.url}/logout?scope=${o}`,{headers:e.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(re(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(t){var e=this;return w(function*(r,o={}){try{return yield ge(e.fetch,"POST",`${e.url}/invite`,{body:{email:r,data:o.data},headers:e.headers,redirectTo:o.redirectTo,xform:ho})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(t){var e=this;return w(function*(){try{const{options:r}=t,o=(0,$.__rest)(t,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield ge(e.fetch,"POST",`${e.url}/admin/generate_link`,{body:i,headers:e.headers,xform:qj,redirectTo:r?.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(t){var e=this;return w(function*(){try{return yield ge(e.fetch,"POST",`${e.url}/admin/users`,{body:t,headers:e.headers,xform:ho})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})()}listUsers(t){var e=this;return w(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield ge(e.fetch,"GET",`${e.url}/admin/users`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=t?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=t?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:jD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=_}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}})()}getUserById(t){var e=this;return w(function*(){Qi(t);try{return yield ge(e.fetch,"GET",`${e.url}/admin/users/${t}`,{headers:e.headers,xform:ho})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})()}updateUserById(t,e){var r=this;return w(function*(){Qi(t);try{return yield ge(r.fetch,"PUT",`${r.url}/admin/users/${t}`,{body:e,headers:r.headers,xform:ho})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}})()}deleteUser(t){var e=this;return w(function*(r,o=!1){Qi(r);try{return yield ge(e.fetch,"DELETE",`${e.url}/admin/users/${r}`,{headers:e.headers,body:{should_soft_delete:o},xform:ho})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(t){var e=this;return w(function*(){Qi(t.userId);try{const{data:r,error:o}=yield ge(e.fetch,"GET",`${e.url}/admin/users/${t.userId}/factors`,{headers:e.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_deleteFactor(t){var e=this;return w(function*(){Qi(t.userId),Qi(t.id);try{return{data:yield ge(e.fetch,"DELETE",`${e.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:e.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_listOAuthClients(t){var e=this;return w(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield ge(e.fetch,"GET",`${e.url}/admin/oauth/clients`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=t?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=t?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:jD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=_}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(t){var e=this;return w(function*(){try{return yield ge(e.fetch,"POST",`${e.url}/admin/oauth/clients`,{body:t,headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_getOAuthClient(t){var e=this;return w(function*(){try{return yield ge(e.fetch,"GET",`${e.url}/admin/oauth/clients/${t}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_deleteOAuthClient(t){var e=this;return w(function*(){try{return yield ge(e.fetch,"DELETE",`${e.url}/admin/oauth/clients/${t}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(t){var e=this;return w(function*(){try{return yield ge(e.fetch,"POST",`${e.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}})()}}function VD(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}const Zi={debug:!!(globalThis&&kD()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class $D extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Jj extends $D{}function Qj(n,t,e){return Gp.apply(this,arguments)}function Gp(){return Gp=w(function*(n,t,e){Zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Zi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=w(function*(i){if(!i){if(0===t)throw Zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Jj(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Zi.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}Zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield e()}finally{Zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),Gp.apply(this,arguments)}function BD(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function eV(n){const t=(new TextEncoder).encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}class wt extends Error{constructor({message:t,code:e,cause:r,name:o}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=e}}class eu extends wt{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}}function nV({error:n,options:t}){var e,r,o;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(t.signal instanceof AbortSignal)return new wt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if("ConstraintError"===n.name){if(!0===(null===(e=i.authenticatorSelection)||void 0===e?void 0:e.requireResidentKey))return new wt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if("conditional"===t.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new wt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new wt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if("InvalidStateError"===n.name)return new wt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if("NotAllowedError"===n.name)return new wt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("NotSupportedError"===n.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new wt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new wt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if("SecurityError"===n.name){const s=window.location.hostname;if(!HD(s))return new wt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(i.rp.id!==s)return new wt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("TypeError"===n.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new wt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if("UnknownError"===n.name)return new wt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new wt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function rV({error:n,options:t}){const{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(t.signal instanceof AbortSignal)return new wt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if("NotAllowedError"===n.name)return new wt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("SecurityError"===n.name){const r=window.location.hostname;if(!HD(r))return new wt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(e.rpId!==r)return new wt({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("UnknownError"===n.name)return new wt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new wt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}const iV=new class oV{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}};function sV(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:e,excludeCredentials:r}=n,o=(0,$.__rest)(n,["challenge","user","excludeCredentials"]),i=Ki(t).buffer,s=Object.assign(Object.assign({},e),{id:Ki(e.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Ki(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function aV(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:e}=n,r=(0,$.__rest)(n,["challenge","allowCredentials"]),o=Ki(t).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(e&&e.length>0){i.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){const a=e[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Ki(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function lV(n){var t;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const e=n;return{id:n.id,rawId:n.id,response:{attestationObject:Po(new Uint8Array(n.response.attestationObject)),clientDataJSON:Po(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:null!==(t=e.authenticatorAttachment)&&void 0!==t?t:void 0}}function cV(n){var t;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const e=n,r=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Po(new Uint8Array(o.authenticatorData)),clientDataJSON:Po(new Uint8Array(o.clientDataJSON)),signature:Po(new Uint8Array(o.signature)),userHandle:o.userHandle?Po(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=e.authenticatorAttachment)&&void 0!==t?t:void 0}}function HD(n){return"localhost"===n||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function zD(){var n,t;return!!(Cn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(n=navigator?.credentials)||void 0===n?void 0:n.create)&&"function"==typeof(null===(t=navigator?.credentials)||void 0===t?void 0:t.get))}function Wp(){return(Wp=w(function*(n){try{const t=yield navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new eu("Browser returned unexpected credential type",t)}:{data:null,error:new eu("Empty credential response",t)}}catch(t){return{data:null,error:nV({error:t,options:n})}}})).apply(this,arguments)}function Kp(){return(Kp=w(function*(n){try{const t=yield navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new eu("Browser returned unexpected credential type",t)}:{data:null,error:new eu("Empty credential response",t)}}catch(t){return{data:null,error:rV({error:t,options:n})}}})).apply(this,arguments)}const hV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},fV={userVerification:"preferred",hints:["security-key"]};function tu(...n){const t=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),e=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of n)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(e(s))r[i]=s;else if(t(s)){const a=r[i];r[i]=t(a)?tu(a,s):tu(s)}else r[i]=s}return r}class mV{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){var e=this;return w(function*(){return e.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})()}_challenge(t,e){var r=this;return w(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!c)return{data:null,error:u};const d=a??iV.createNewAbortSignal();if("create"===c.webauthn.type){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=function pV(n,t){return tu(hV,n,t||{})}(c.webauthn.credential_options.publicKey,l?.create),{data:f,error:p}=yield function uV(n){return Wp.apply(this,arguments)}({publicKey:h,signal:d});return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=function gV(n,t){return tu(fV,n,t||{})}(c.webauthn.credential_options.publicKey,l?.request),{data:f,error:p}=yield function dV(n){return Kp.apply(this,arguments)}(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in challenge",c)}}}).apply(this,arguments)}_verify(t){var e=this;return w(function*({challengeId:r,factorId:o,webauthn:i}){return e.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(t,e){var r=this;return w(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}},l){if(!i)return{data:null,error:new Ma("rpId is required for WebAuthn authentication")};try{if(!zD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:u};const{webauthn:d}=c;return r._verify({factorId:o,challengeId:c.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in authenticate",c)}}}).apply(this,arguments)}_register(t,e){var r=this;return w(function*({friendlyName:o,rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a},l){if(!i)return{data:null,error:new Ma("rpId is required for WebAuthn registration")};try{if(!zD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r._enroll({friendlyName:o});if(!c)return yield r.client.mfa.listFactors().then(f=>{var p;return null===(p=f.data)||void 0===p?void 0:p.all.find(y=>"webauthn"===y.factor_type&&y.friendly_name===o&&"unverified"!==y.status)}).then(f=>f?r.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:d,error:h}=yield r._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return d?r._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(c){return re(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in register",c)}}}).apply(this,arguments)}}!function Zj(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const yV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.76.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function GD(n,t,e){return Jp.apply(this,arguments)}function Jp(){return(Jp=w(function*(n,t,e){return yield e()})).apply(this,arguments)}const Xi={},vV=(()=>{class n{get jwks(){var e,r;return null!==(r=null===(e=Xi[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==r?r:{keys:[]}}set jwks(e){Xi[this.storageKey]=Object.assign(Object.assign({},Xi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return null!==(r=null===(e=Xi[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Xi[this.storageKey]=Object.assign(Object.assign({},Xi[this.storageKey]),{cachedAt:e})}constructor(e){var o,i,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&Cn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},yV),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Kj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=RD(s.fetch),this.lock=s.lock||GD,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.lock=s.lock?s.lock:Cn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?Qj:GD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new mV(this)},this.persistSession?(s.storage?this.storage=s.storage:kD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=VD(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=VD(this.memoryStorage)),Cn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=w(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.76.1) ${(new Date).toISOString()}`,...e),this}initialize(){var e=this;return w(function*(){return e.initializePromise||(e.initializePromise=w(function*(){return yield e._acquireLock(-1,w(function*(){return yield e._initialize()}))})()),yield e.initializePromise})()}_initialize(){var e=this;return w(function*(){var r;try{const o=function Tj(n){const t={},e=new URL(n);if(e.hash&&"#"===e.hash[0])try{new URLSearchParams(e.hash.substring(1)).forEach((o,i)=>{t[i]=o})}catch{}return e.searchParams.forEach((r,o)=>{t[o]=r}),t}(window.location.href);let i="none";if(e._isImplicitGrantCallback(o)?i="implicit":(yield e._isPKCECallback(o))&&(i="pkce"),Cn()&&e.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield e._getSessionFromURL(o,i);if(a){if(e._debug("#_initialize()","error detecting session from URL",a),function wj(n){return re(n)&&"AuthImplicitGrantRedirectError"===n.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield e._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return e._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield e._saveSession(l),setTimeout(w(function*(){"recovery"===c?yield e._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield e._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield e._recoverAndRefresh(),{error:null}}catch(o){return re(o)?{error:o}:{error:new Ao("Unexpected error during initialization",o)}}finally{yield e._handleVisibilityChange(),e._debug("#_initialize()","end")}})()}signInAnonymously(e){var r=this;return w(function*(){var o,i,s;try{const a=yield ge(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=e?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=e?.options)||void 0===s?void 0:s.captchaToken}},xform:Qn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(e){var r=this;return w(function*(){var o,i,s;try{let a;if("email"in e){const{email:h,password:f,options:p}=e;let y=null,_=null;"pkce"===r.flowType&&([y,_]=yield Yi(r.storage,r.storageKey)),a=yield ge(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:null!==(o=p?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:y,code_challenge_method:_},xform:Qn})}else{if(!("phone"in e))throw new Jc("You must provide either an email or phone number and a password");{const{phone:h,password:f,options:p}=e;a=yield ge(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:h,password:f,data:null!==(i=p?.data)&&void 0!==i?i:{},channel:null!==(s=p?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Qn})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(e){var r=this;return w(function*(){try{let o;if("email"in e){const{email:a,password:l,options:c}=e;o=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:LD})}else{if(!("phone"in e))throw new Jc("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=e;o=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:LD})}}const{data:i,error:s}=o;return s?{data:{user:null,session:null},error:s}:i&&i.session&&i.user?(i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Wi}}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(e){var r=this;return w(function*(){var o,i,s,a;return yield r._handleProviderSignIn(e.provider,{redirectTo:null===(o=e.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=e.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(e){var r=this;return w(function*(){return yield r.initializePromise,r._acquireLock(-1,w(function*(){return r._exchangeCodeForSession(e)}))})()}signInWithWeb3(e){var r=this;return w(function*(){const{chain:o}=e;switch(o){case"ethereum":return yield r.signInWithEthereum(e);case"solana":return yield r.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(e){var r=this;return w(function*(){var o,i,s,a,l,c,u,d,h,f,p;let y,_;if("message"in e)y=e.message,_=e.signature;else{const{wallet:x,statement:D,options:R}=e;let F;if(Cn())if("object"==typeof x)F=x;else{const bn=window;if(!("ethereum"in bn)||"object"!=typeof bn.ethereum||!("request"in bn.ethereum)||"function"!=typeof bn.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");F=bn.ethereum}else{if("object"!=typeof x||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=x}const Y=new URL(null!==(o=R?.url)&&void 0!==o?o:window.location.href),Zt=yield F.request({method:"eth_requestAccounts"}).then(bn=>bn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Zt||0===Zt.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Pe=BD(Zt[0]);let ft=null===(i=R?.signInWithEthereum)||void 0===i?void 0:i.chainId;ft||(ft=function Xj(n){return parseInt(n,16)}(yield F.request({method:"eth_chainId"}))),y=function tV(n){var t;const{chainId:e,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=n;if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null!==(t=n.statement)&&void 0!==t&&t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`);const _=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${BD(n.address)}\n\n${n.statement?`${n.statement}\n`:""}`;let b=`URI: ${d}\nVersion: ${h}\nChain ID: ${e}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(b+=`\nExpiration Time: ${o.toISOString()}`),a&&(b+=`\nNot Before: ${a.toISOString()}`),l&&(b+=`\nRequest ID: ${l}`),c){let x="\nResources:";for(const D of c){if(!D||"string"!=typeof D)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);x+=`\n- ${D}`}b+=x}return`${_}\n${b}`}({domain:Y.host,address:Pe,statement:D,uri:Y.href,version:"1",chainId:ft,nonce:null===(s=R?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(l=null===(a=R?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==l?l:new Date,expirationTime:null===(c=R?.signInWithEthereum)||void 0===c?void 0:c.expirationTime,notBefore:null===(u=R?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=R?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(h=R?.signInWithEthereum)||void 0===h?void 0:h.resources}),_=yield F.request({method:"personal_sign",params:[eV(y),Pe]})}try{const{data:b,error:x}=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:y,signature:_},null!==(f=e.options)&&void 0!==f&&f.captchaToken?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Qn});if(x)throw x;return b&&b.session&&b.user?(b.session&&(yield r._saveSession(b.session),yield r._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x}):{data:{user:null,session:null},error:new Wi}}catch(b){if(re(b))return{data:{user:null,session:null},error:b};throw b}})()}signInWithSolana(e){var r=this;return w(function*(){var o,i,s,a,l,c,u,d,h,f,p,y;let _,b;if("message"in e)_=e.message,b=e.signature;else{const{wallet:D,statement:R,options:F}=e;let Y;if(Cn())if("object"==typeof D)Y=D;else{const Pe=window;if(!("solana"in Pe)||"object"!=typeof Pe.solana||!("signIn"in Pe.solana&&"function"==typeof Pe.solana.signIn||"signMessage"in Pe.solana&&"function"==typeof Pe.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");Y=Pe.solana}else{if("object"!=typeof D||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=D}const Zt=new URL(null!==(o=F?.url)&&void 0!==o?o:window.location.href);if("signIn"in Y&&Y.signIn){const Pe=yield Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},F?.signInWithSolana),{version:"1",domain:Zt.host,uri:Zt.href}),R?{statement:R}:null));let ft;if(Array.isArray(Pe)&&Pe[0]&&"object"==typeof Pe[0])ft=Pe[0];else{if(!(Pe&&"object"==typeof Pe&&"signedMessage"in Pe&&"signature"in Pe))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");ft=Pe}if(!("signedMessage"in ft&&"signature"in ft&&("string"==typeof ft.signedMessage||ft.signedMessage instanceof Uint8Array)&&ft.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");_="string"==typeof ft.signedMessage?ft.signedMessage:(new TextDecoder).decode(ft.signedMessage),b=ft.signature}else{if(!("signMessage"in Y&&"function"==typeof Y.signMessage&&"publicKey"in Y&&"object"==typeof Y&&Y.publicKey&&"toBase58"in Y.publicKey&&"function"==typeof Y.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${Zt.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${Zt.href}`,`Issued At: ${null!==(s=null===(i=F?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=F?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...null!==(l=F?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...null!==(c=F?.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...null!==(u=F?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...null!==(d=F?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...null!==(f=null===(h=F?.signInWithSolana)||void 0===h?void 0:h.resources)&&void 0!==f&&f.length?["Resources",...F.signInWithSolana.resources.map(ft=>`- ${ft}`)]:[]].join("\n");const Pe=yield Y.signMessage((new TextEncoder).encode(_),"utf8");if(!(Pe&&Pe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=Pe}}try{const{data:x,error:D}=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:_,signature:Po(b)},null!==(p=e.options)&&void 0!==p&&p.captchaToken?{gotrue_meta_security:{captcha_token:null===(y=e.options)||void 0===y?void 0:y.captchaToken}}:null),xform:Qn});if(D)throw D;return x&&x.session&&x.user?(x.session&&(yield r._saveSession(x.session),yield r._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:D}):{data:{user:null,session:null},error:new Wi}}catch(x){if(re(x))return{data:{user:null,session:null},error:x};throw x}})()}_exchangeCodeForSession(e){var r=this;return w(function*(){const o=yield Ro(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:l}=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:e,code_verifier:i},xform:Qn});if(yield uo(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Wi}}catch(a){if(re(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(e){var r=this;return w(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:l}=e,c=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Qn}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new Wi}}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(e){var r=this;return w(function*(){var o,i,s,a,l;try{if("email"in e){const{email:c,options:u}=e;let d=null,h=null;"pkce"===r.flowType&&([d,h]=yield Yi(r.storage,r.storageKey));const{error:f}=yield ge(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:c,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:c,options:u}=e,{data:d,error:h}=yield ge(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:c,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(l=u?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new Jc("You must provide either an email or phone number.")}catch(c){if(re(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(e){var r=this;return w(function*(){var o,i;try{let s,a;"options"in e&&(s=null===(o=e.options)||void 0===o?void 0:o.redirectTo,a=null===(i=e.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield ge(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Qn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,d=l.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithSSO(e){var r=this;return w(function*(){var o,i,s;try{let a=null,l=null;return"pkce"===r.flowType&&([a,l]=yield Yi(r.storage,r.storageKey)),yield ge(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(i=null===(o=e.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=e?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:Gj})}catch(a){if(re(a))return{data:null,error:a};throw a}})()}reauthenticate(){var e=this;return w(function*(){return yield e.initializePromise,yield e._acquireLock(-1,w(function*(){return yield e._reauthenticate()}))})()}_reauthenticate(){var e=this;return w(function*(){try{return yield e._useSession(function(){var r=w(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new co;const{error:a}=yield ge(e.fetch,"GET",`${e.url}/reauthenticate`,{headers:e.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(e){var r=this;return w(function*(){try{const o=`${r.url}/resend`;if("email"in e){const{email:i,type:s,options:a}=e,{error:l}=yield ge(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in e){const{phone:i,type:s,options:a}=e,{data:l,error:c}=yield ge(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new Jc("You must provide either an email or phone number and a type")}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var e=this;return w(function*(){return yield e.initializePromise,yield e._acquireLock(-1,w(function*(){return e._useSession(function(){var o=w(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(e,r){var o=this;return w(function*(){o._debug("#_acquireLock","begin",e);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=w(function*(){return yield i,yield r()})();return o.pendingInLock.push(w(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,e,w(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(w(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(e){var r=this;return w(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield e(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var e=this;return w(function*(){e._debug("#__loadSession()","begin"),e.lockAcquired||e._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield Ro(e.storage,e.storageKey);if(e._debug("#getSession()","session from storage",o),null!==o&&(e._isValidSession(o)?r=o:(e._debug("#getSession()","session from storage is not valid"),yield e._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(e._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(e.userStorage){const l=yield Ro(e.userStorage,e.storageKey+"-user");r.user=l?.user?l.user:$p()}if(e.storage.isServer&&r.user){let l=e.suppressGetSessionWarning;r=new Proxy(r,{get:(u,d,h)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,e.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:r},error:null}}const{data:s,error:a}=yield e._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{e._debug("#__loadSession()","end")}})()}getUser(e){var r=this;return w(function*(){return e?yield r._getUser(e):(yield r.initializePromise,yield r._acquireLock(-1,w(function*(){return yield r._getUser()})))})()}_getUser(e){var r=this;return w(function*(){try{return e?yield ge(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:e,xform:ho}):yield r._useSession(function(){var o=w(function*(i){var s,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(s=c.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield ge(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:ho}):{data:{user:null},error:new co}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return function bj(n){return re(n)&&"AuthSessionMissingError"===n.name}(o)&&(yield r._removeSession(),yield uo(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(e){var r=this;return w(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,w(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(e){var r=this;return w(function*(o,i={}){try{return yield r._useSession(function(){var s=w(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new co;const u=l.session;let d=null,h=null;"pkce"===r.flowType&&null!=o.email&&([d,h]=yield Yi(r.storage,r.storageKey));const{data:f,error:p}=yield ge(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:ho});if(p)throw p;return u.user=f.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return s.apply(this,arguments)}}())}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}).apply(this,arguments)}setSession(e){var r=this;return w(function*(){return yield r.initializePromise,yield r._acquireLock(-1,w(function*(){return yield r._setSession(e)}))})()}_setSession(e){var r=this;return w(function*(){try{if(!e.access_token||!e.refresh_token)throw new co;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:l}=Np(e.access_token);if(l.exp&&(i=l.exp,s=i<=o),s){const{data:c,error:u}=yield r._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield r._getUser(e.access_token);if(u)throw u;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(o){if(re(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(e){var r=this;return w(function*(){return yield r.initializePromise,yield r._acquireLock(-1,w(function*(){return yield r._refreshSession(e)}))})()}_refreshSession(e){var r=this;return w(function*(){try{return yield r._useSession(function(){var o=w(function*(i){var s;if(!e){const{data:c,error:u}=i;if(u)throw u;e=null!==(s=c.session)&&void 0!==s?s:void 0}if(!e?.refresh_token)throw new co;const{data:a,error:l}=yield r._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(e,r){var o=this;return w(function*(){try{if(!Cn())throw new Yc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new MD("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new Yc("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new MD("No code detected.");const{data:R,error:F}=yield o._exchangeCodeForSession(e.code);if(F)throw F;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:d}=e;if(!(a&&c&&l&&d))throw new Yc("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let p=h+f;u&&(p=parseInt(u));const y=p-h;1e3*y<=qi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const _=p-f;h-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,p,h):h-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,p,h);const{data:b,error:x}=yield o._getUser(a);if(x)throw x;const D={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:d,user:b.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(i){if(re(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}_isPKCECallback(e){var r=this;return w(function*(){const o=yield Ro(r.storage,`${r.storageKey}-code-verifier`);return!(!e.code||!o)})()}signOut(){var e=this;return w(function*(r={scope:"global"}){return yield e.initializePromise,yield e._acquireLock(-1,w(function*(){return yield e._signOut(r)}))}).apply(this,arguments)}_signOut(){var e=this;return w(function*({scope:r}={scope:"global"}){return yield e._useSession(function(){var o=w(function*(i){var s;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(s=a.session)||void 0===s?void 0:s.access_token;if(c){const{error:u}=yield e.admin.signOut(c,r);if(u&&(!function Cj(n){return re(n)&&"AuthApiError"===n.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==r&&(yield e._removeSession(),yield uo(e.storage,`${e.storageKey}-code-verifier`)),{error:null}});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(e){var r=this;const o=function Oj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)})}(),i={id:o,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),w(function*(){yield r.initializePromise,yield r._acquireLock(-1,w(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(e){var r=this;return w(function*(){return yield r._useSession(function(){var o=w(function*(i){var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(s=r.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(e){var r=this;return w(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield Yi(r.storage,r.storageKey,!0));try{return yield ge(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(l){if(re(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var e=this;return w(function*(){var r;try{const{data:o,error:i}=yield e.getUser();if(i)throw i;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(re(o))return{data:null,error:o};throw o}})()}linkIdentity(e){var r=this;return w(function*(){return"token"in e?r.linkIdentityIdToken(e):r.linkIdentityOAuth(e)})()}linkIdentityOAuth(e){var r=this;return w(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=w(function*(l){var c,u,d,h,f;const{data:p,error:y}=l;if(y)throw y;const _=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,e.provider,{redirectTo:null===(c=e.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=e.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=e.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield ge(r.fetch,"GET",_,{headers:r.headers,jwt:null!==(f=null===(h=p.session)||void 0===h?void 0:h.access_token)&&void 0!==f?f:void 0})});return function(l){return a.apply(this,arguments)}}());if(s)throw s;return Cn()&&!(null!==(o=e.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(re(i))return{data:{provider:e.provider,url:null},error:i};throw i}})()}linkIdentityIdToken(e){var r=this;return w(function*(){return yield r._useSession(function(){var o=w(function*(i){var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:u,token:d,access_token:h,nonce:f}=e,p=yield ge(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=l?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Qn}),{data:y,error:_}=p;return _?{data:{user:null,session:null},error:_}:y&&y.session&&y.user?(y.session&&(yield r._saveSession(y.session),yield r._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:_}):{data:{user:null,session:null},error:new Wi}}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(e){var r=this;return w(function*(){try{return yield r._useSession(function(){var o=w(function*(i){var s,a;const{data:l,error:c}=i;if(c)throw c;return yield ge(r.fetch,"DELETE",`${r.url}/user/identities/${e.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=l.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(e){var r=this;return w(function*(){const o=`#_refreshAccessToken(${e.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function Pj(n,t){return new Promise((r,o)=>{w(function*(){for(let i=0;i<1/0;i++)try{const s=yield n(i);if(!t(i,null,s))return void r(s)}catch(s){if(!t(i,s))return void o(s)}})()})}(function(){var s=w(function*(a){return a>0&&(yield function Aj(n){return Fp.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield ge(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:r.headers,xform:Qn})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const l=200*Math.pow(2,s);return a&&kp(a)&&Date.now()+l-i<qi})}catch(i){if(r._debug(o,"error",i),re(i))return{data:{session:null,user:null},error:i};throw i}finally{r._debug(o,"end")}})()}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){var o=this;return w(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Cn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})()}_recoverAndRefresh(){var e=this;return w(function*(){var r,o;const i="#_recoverAndRefresh()";e._debug(i,"begin");try{const s=yield Ro(e.storage,e.storageKey);if(s&&e.userStorage){let l=yield Ro(e.userStorage,e.storageKey+"-user");!e.storage.isServer&&Object.is(e.storage,e.userStorage)&&!l&&(l={user:s.user},yield Ji(e.userStorage,e.storageKey+"-user",l)),s.user=null!==(r=l?.user)&&void 0!==r?r:$p()}else if(s&&!s.user&&!s.user){const l=yield Ro(e.storage,e.storageKey+"-user");l&&l?.user?(s.user=l.user,yield uo(e.storage,e.storageKey+"-user"),yield Ji(e.storage,e.storageKey,s)):s.user=$p()}if(e._debug(i,"session from storage",s),!e._isValidSession(s))return e._debug(i,"session is not valid"),void(null!==s&&(yield e._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(e._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(e.autoRefreshToken&&s.refresh_token){const{error:l}=yield e._callRefreshToken(s.refresh_token);l&&(console.error(l),kp(l)||(e._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield e._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield e._getUser(s.access_token);!c&&l?.user?(s.user=l.user,yield e._saveSession(s),yield e._notifyAllSubscribers("SIGNED_IN",s)):e._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),e._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield e._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return e._debug(i,"error",s),void console.error(s)}finally{e._debug(i,"end")}})()}_callRefreshToken(e){var r=this;return w(function*(){var o,i;if(!e)throw new co;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new Xc;const{data:a,error:l}=yield r._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new co;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return r.refreshingDeferred.resolve(c),c}catch(a){if(r._debug(s,"error",a),re(a)){const l={data:null,error:a};return kp(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(e,r){var o=this;return w(function*(i,s,a=!0){const l=`#_notifyAllSubscribers(${i})`;o._debug(l,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const c=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=w(function*(h){try{yield h.callback(i,s)}catch(f){c.push(f)}});return function(h){return d.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(e){var r=this;return w(function*(){r._debug("#_saveSession()",e),r.suppressGetSessionWarning=!0;const o=Object.assign({},e);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield Ji(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=ND(s);yield Ji(r.storage,r.storageKey,a)}else{const s=ND(o);yield Ji(r.storage,r.storageKey,s)}})()}_removeSession(){var e=this;return w(function*(){e._debug("#_removeSession()"),yield uo(e.storage,e.storageKey),yield uo(e.storage,e.storageKey+"-code-verifier"),yield uo(e.storage,e.storageKey+"-user"),e.userStorage&&(yield uo(e.userStorage,e.storageKey+"-user")),yield e._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Cn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var e=this;return w(function*(){yield e._stopAutoRefresh(),e._debug("#_startAutoRefresh()");const r=setInterval(()=>e._autoRefreshTokenTick(),qi);e.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(w(function*(){yield e.initializePromise,yield e._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var e=this;return w(function*(){e._debug("#_stopAutoRefresh()");const r=e.autoRefreshTicker;e.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var e=this;return w(function*(){e._removeVisibilityChangedCallback(),yield e._startAutoRefresh()})()}stopAutoRefresh(){var e=this;return w(function*(){e._removeVisibilityChangedCallback(),yield e._stopAutoRefresh()})()}_autoRefreshTokenTick(){var e=this;return w(function*(){e._debug("#_autoRefreshTokenTick()","begin");try{yield e._acquireLock(0,w(function*(){try{const r=Date.now();try{return yield e._useSession(function(){var o=w(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void e._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/qi);e._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield e._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{e._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof $D))throw r;e._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var e=this;return w(function*(){if(e._debug("#_handleVisibilityChange()"),!Cn()||!window?.addEventListener)return e.autoRefreshToken&&e.startAutoRefresh(),!1;try{e.visibilityChangedCallback=w(function*(){return yield e._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",e.visibilityChangedCallback),yield e._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(e){var r=this;return w(function*(){const o=`#_onVisibilityChanged(${e})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),e||(yield r.initializePromise,yield r._acquireLock(-1,w(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(e,r,o){var i=this;return w(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,l]=yield Yi(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${s.join("&")}`})()}_unenroll(e){var r=this;return w(function*(){try{return yield r._useSession(function(){var o=w(function*(i){var s;const{data:a,error:l}=i;return l?{data:null,error:l}:yield ge(r.fetch,"DELETE",`${r.url}/factors/${e.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}})()}_enroll(e){var r=this;return w(function*(){try{return yield r._useSession(function(){var o=w(function*(i){var s,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:d,error:h}=yield ge(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=l?.session)||void 0===s?void 0:s.access_token});return h?{data:null,error:h}:("totp"===e.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}})()}_verify(e){var r=this;return w(function*(){return r._acquireLock(-1,w(function*(){try{return yield r._useSession(function(){var o=w(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?lV(e.webauthn.credential_response):cV(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=yield ge(r.fetch,"POST",`${r.url}/factors/${e.factorId}/verify`,{body:c,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?{data:null,error:d}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}}))})()}_challenge(e){var r=this;return w(function*(){return r._acquireLock(-1,w(function*(){try{return yield r._useSession(function(){var o=w(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=yield ge(r.fetch,"POST",`${r.url}/factors/${e.factorId}/challenge`,{body:e,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:sV(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:aV(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(re(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(e){var r=this;return w(function*(){const{data:o,error:i}=yield r._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield r._verify({factorId:e.factorId,challengeId:o.id,code:e.code})})()}_listFactors(){var e=this;return w(function*(){var r;const{data:{user:o},error:i}=yield e.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var e=this;return w(function*(){return e._acquireLock(-1,w(function*(){return yield e._useSession(function(){var r=w(function*(o){var i,s;const{data:{session:a},error:l}=o;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Np(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;return(null!==(s=null===(i=a.user.factors)||void 0===i?void 0:i.filter(p=>"verified"===p.status))&&void 0!==s?s:[]).length>0&&(d="aal2"),{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:c.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(e){var r=this;return w(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:l,error:c}=yield ge(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=a,s=l.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(e){var r=this;return w(function*(o,i={}){try{let s=o;if(!s){const{data:_,error:b}=yield r.getSession();if(b||!_.session)return{data:null,error:b};s=_.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:d}}=Np(s);i?.allowExpired||function Vj(n){if(!n)throw new Error("Missing exp claim");if(n<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const h=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!h){const{error:_}=yield r.getUser(s);if(_)throw _;return{data:{claims:l,header:a,signature:c},error:null}}const f=function $j(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),p=yield crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!(yield crypto.subtle.verify(f,p,c,function xj(n){const t=[];return function PD(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(n.charCodeAt(e+1)-56320&65535|o),e+=1}Sj(r,t)}}(n,e=>t.push(e)),new Uint8Array(t)}(`${u}.${d}`))))throw new Rp("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}}).apply(this,arguments)}}return n.nextInstanceID=0,n})();class CV extends vV{constructor(t){super(t)}}class bV{constructor(t,e,r){var o,i,s;this.supabaseUrl=t,this.supabaseKey=e;const a=function fj(n){const t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function dj(n){return n.endsWith("/")?n:n+"/"}(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function hj(n,t){var e,r;const{db:o,auth:i,realtime:s,global:a}=n,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(e=d?.headers)&&void 0!==e?e:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(f=w(function*(){return""}),function(){return f.apply(this,arguments)})};var f;return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}(r??{},{db:ij,realtime:aj,auth:Object.assign(Object.assign({},sj),{storageKey:l}),global:oj});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=uj(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new fD(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new nj(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new cL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t=this;return w(function*(){var e,r;if(t.accessToken)return yield t.accessToken();const{data:o}=yield t.auth.getSession();return null!==(r=null===(e=o.session)||void 0===e?void 0:e.access_token)&&void 0!==r?r:t.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c},u,d){return new CV({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>"authorization"===f.toLowerCase())})}_initRealtimeClient(t){return new PL(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){"TOKEN_REFRESHED"!==t&&"SIGNED_IN"!==t||this.changedAccessToken===r?"SIGNED_OUT"===t&&(this.realtime.setAuth(),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function DV(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(null==n)return!1;const t=n.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qD_supabase_url="https://hpqwzclyjrfivcmkzwpo.supabase.co",qD_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwcXd6Y2x5anJmaXZjbWt6d3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2ODMzMjUsImV4cCI6MjA3NjI1OTMyNX0.pN-NPncmQCJoiBlYnFk77bAdxXEu5NAn3Fi8bk_c4wI";let es=(()=>{const t=class{constructor(){this.currentUserSubject=new Rn(null),this.currentUser$=this.currentUserSubject.asObservable(),this.isInitialized=!1,this.initializeClient()}initializeClient(){var r=this;return w(function*(){try{r.supabase=((n,t,e)=>new bV(n,t,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))(qD_supabase_url,qD_supabase_anonKey),r.isInitialized=!0,yield r.checkExistingSession()}catch(o){console.error("Error initializing Supabase client:",o)}})()}checkExistingSession(){var r=this;return w(function*(){const o=localStorage.getItem("currentUser");if(o)try{const i=JSON.parse(o);r.currentUserSubject.next(i)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("currentUser")}})()}signInFallback(r,o){var i=this;return w(function*(){try{const a=[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r&&l.password===o);return a?(localStorage.setItem("currentUser",JSON.stringify(a)),i.currentUserSubject.next(a),{user:a,error:null}):{user:null,error:"Invalid username or password"}}catch(s){return console.error("Fallback sign in error:",s),{user:null,error:"Sign in failed. Please try again."}}})()}signIn(r,o){var i=this;return w(function*(){try{i.isInitialized||(yield new Promise(l=>{const c=()=>{i.isInitialized?l(void 0):setTimeout(c,50)};c()})),yield new Promise(l=>setTimeout(l,100));const{data:s,error:a}=yield i.supabase.from("profiles").select("*").eq("username",r).eq("password",o).single();return a?(console.error("Database query error:",a),console.log("Trying fallback authentication..."),yield i.signInFallback(r,o)):s?(localStorage.setItem("currentUser",JSON.stringify(s)),i.currentUserSubject.next(s),{user:s,error:null}):{user:null,error:"User not found"}}catch(s){if(console.error("Sign in error:",s),s&&"object"==typeof s&&"message"in s){const a=s.message;if(a.includes("NavigatorLockAcquireTimeoutError")||a.includes("lock"))return console.log("Lock error detected, using fallback authentication..."),yield i.signInFallback(r,o)}return console.log("Error occurred, trying fallback authentication..."),yield i.signInFallback(r,o)}})()}signOut(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getCurrentUser(){return this.currentUserSubject.value}isSignedIn(){return null!==this.currentUserSubject.value}getProfileByUsername(r){var o=this;return w(function*(){try{o.isInitialized||(yield new Promise(a=>{const l=()=>{o.isInitialized?a():setTimeout(l,50)};l()}));const{data:i,error:s}=yield o.supabase.from("profiles").select("*").eq("username",r).maybeSingle();return s?(console.warn("getProfileByUsername fallback due to error:",s.message),[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r)||null):i||null}catch(i){return console.error("Error in getProfileByUsername:",i),null}})()}getUserCards(r,o){var i=this;return w(function*(){try{const s=parseInt(r);if(isNaN(s))return{cards:[],error:"Invalid user ID format"};const a=1e3;let l=0,c=[],u=!0;for(;u;){const{data:d,error:h}=yield i.supabase.from("user_cards").select("*").eq("user_id",s).range(l,l+a-1);if(h)return{cards:[],error:h.message};d&&d.length>0?(c=c.concat(d),l+=a,u=d.length===a,o&&o(c.length)):u=!1}return{cards:c,error:null}}catch(s){return console.error("Error fetching user cards:",s),{cards:[],error:"Failed to fetch user cards"}}})()}updateCardQuantity(r,o,i){var s=this;return w(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};if(i<=0){const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a).eq("card_def_key",o);if(l)return{success:!1,error:l.message}}else{const{data:l,error:c}=yield s.supabase.from("user_cards").select("*").eq("user_id",a).eq("card_def_key",o).maybeSingle();if(c)return console.error("Error checking existing card:",c),{success:!1,error:c.message};if(l){const{error:u}=yield s.supabase.from("user_cards").update({quantity:i}).eq("user_id",a).eq("card_def_key",o);if(u)return{success:!1,error:u.message}}else{const{error:u}=yield s.supabase.from("user_cards").insert({user_id:a,card_def_key:o,quantity:i});if(u)return{success:!1,error:u.message}}}return{success:!0,error:null}}catch(a){return console.error("Error updating card quantity:",a),{success:!1,error:"Failed to update card quantity"}}})()}getCardQuantity(r,o){var i=this;return w(function*(){try{const{data:s,error:a}=yield i.supabase.from("user_cards").select("quantity").eq("user_id",r).eq("card_def_key",o).single();return a||!s?0:s.quantity||0}catch(s){return console.error("Error fetching card quantity:",s),0}})()}syncUserCollection(r,o){var i=this;return w(function*(){try{const{cards:s,error:a}=yield i.getUserCards(r,o);if(a)return console.error("Error syncing user collection:",a),{};const l={};return s.forEach(c=>{l[c.card_def_key]=c.quantity}),l}catch(s){return console.error("Error syncing user collection:",s),{}}})()}bulkReplaceUserCollection(r,o){var i=this;return w(function*(){try{const s=parseInt(r);if(isNaN(s))return{success:!1,error:"Invalid user ID format"};const{error:a}=yield i.supabase.from("user_cards").delete().eq("user_id",s);if(a)return console.error("Error deleting existing cards:",a),{success:!1,error:a.message};const l=Object.entries(o).filter(([c,u])=>u>0).map(([c,u])=>({user_id:s,card_def_key:c,quantity:u}));if(l.length>0){const{error:c}=yield i.supabase.from("user_cards").insert(l);if(c)return console.error("Error inserting new cards:",c),{success:!1,error:c.message};console.log(`\u2705 Bulk sync completed: ${l.length} cards inserted`)}else console.log("\u2705 Bulk sync completed: No cards to insert (collection is empty)");return{success:!0,error:null}}catch(s){return console.error("Error in bulk replace user collection:",s),{success:!1,error:"Failed to bulk replace user collection"}}})()}};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),n})(),WD=(()=>{const t=class{constructor(){this.rarityMap=new Map([["C",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["U",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["R",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["RR",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["AR",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["SR",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["SAR",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["IM",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["UR",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["CR",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["S",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["SSR",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}],["Common",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["Uncommon",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["Rare",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["Double Rare",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["Art Rare",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["Super Rare",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Special Art Rare",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Immersive Rare",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["Ultimate Rare",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["Crown Rare",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["Shiny",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["Shiny Super Rare",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}]])}getRarityInfo(r){return this.rarityMap.get(r)}getDisplayName(r){const o=this.getRarityInfo(r);return o?o.displayName:r}getSymbol(r){const o=this.getRarityInfo(r);return o?o.symbol:r}getAllRarities(){return Array.from(this.rarityMap.values()).filter(r=>!r.code.includes(" ")).sort((r,o)=>r.order-o.order)}getRarityOrder(r){const o=this.getRarityInfo(r);return o?o.order:999}sortRarities(r){return r.sort((o,i)=>this.getRarityOrder(o)-this.getRarityOrder(i))}isRare(r){return["IM","UR","SSR"].includes(r)}isSuperRare(r){return["SR","SAR","IM","UR","SSR"].includes(r)}getNormalizedCode(r){const o=this.getRarityInfo(r);return o?"SAR"===o.code||"Special Art Rare"===r?"SR":o.code:r}getStandardizedDisplayName(r){const o=this.getNormalizedCode(r),i=this.getRarityInfo(o);return i?i.displayName:r}getUnifiedRarities(){return this.getAllRarities().filter(o=>"SAR"!==o.code)}getCodeFromSymbol(r){for(const[,o]of this.rarityMap)if(o.symbol===r)return o.code;return r}groupCardsByNormalizedRarity(r){const o=new Map;return r.forEach(i=>{if(!i.rarity)return;const s=this.getCodeFromSymbol(i.rarity),a=this.getNormalizedCode(s);o.has(a)||o.set(a,[]),o.get(a).push(i)}),o}};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function SV(n,t){if(1&n&&(m(0,"div",4),v(1),g()),2&n){const e=O();C(1),xe(" ",e.error," ")}}function EV(n,t){1&n&&(m(0,"div",5)(1,"h2"),v(2,"Loading your collection..."),g(),Be(3,"div",6),g())}function xV(n,t){if(1&n&&(m(0,"span",28),v(1),g()),2&n){const e=O(2).$implicit;C(1),mn("[",e.primarySetCode,"] - ",e.primarySetName,"")}}function MV(n,t){if(1&n&&(m(0,"div",20)(1,"div",21)(2,"span",22),v(3),g(),m(4,"strong"),v(5),g()(),m(6,"div",23),z(7,xV,2,2,"span",24),m(8,"span",25),v(9),g(),m(10,"span",26),v(11),g(),m(12,"span",27),v(13),g()()()),2&n){const e=O(),r=e.index,o=e.$implicit;et("top-pick",0===r),C(3),xe("#",r+1,""),C(2),He(o.packName),C(2),P("ngIf",o.primarySetCode),C(2),xe("",o.missingCards," missing cards"),C(2),xe("",o.completionPercentage,"% complete"),C(2),mn("(",o.ownedCards,"/",o.totalCards,")")}}function OV(n,t){if(1&n&&(Gr(0),z(1,MV,14,9,"div",19),qr()),2&n){const e=t.$implicit,r=O(3);C(1),P("ngIf",!r.excludeDeluxePack||!r.isDeluxeA4B(e.packName))}}function TV(n,t){if(1&n&&(m(0,"div",14)(1,"details",15)(2,"summary"),v(3,"\u{1f381} Pack Opening Suggestions"),g(),m(4,"p",16),v(5,"Optimized recommendations based on your missing cards"),g(),m(6,"div",17),z(7,OV,2,1,"ng-container",18),g()()()),2&n){const e=O(2);C(7),P("ngForOf",e.packSuggestions)}}function IV(n,t){if(1&n&&(m(0,"div",42)(1,"span",43),v(2),g(),m(3,"div",44)(4,"div",45),Be(5,"div",46),g(),m(6,"span",47),v(7),g()()()),2&n){const e=t.$implicit;P("ngClass","rarity-"+e.code),Tt("title",e.name+": "+e.owned+"/"+e.total+" ("+e.percentage+"%)"),C(2),He(e.name),C(3),Fs("width",e.percentage,"%"),C(2),mn("",e.owned,"/",e.total,"")}}function AV(n,t){if(1&n&&(m(0,"div",39)(1,"h5"),v(2,"Rarity Progress:"),g(),m(3,"div",40),z(4,IV,8,7,"div",41),g()()),2&n){const e=O(2).$implicit;C(4),P("ngForOf",e.rarityBreakdown)}}function PV(n,t){if(1&n&&(m(0,"div",32)(1,"div",33)(2,"h4"),v(3),g(),m(4,"span",34),v(5),g()(),m(6,"div",35),Be(7,"div",36),g(),m(8,"p",37),v(9),g(),z(10,AV,5,1,"div",38),g()),2&n){const e=O().$implicit;C(3),mn("[",e.code,"] - ",e.name,""),C(2),xe("",e.percentage,"%"),C(2),Fs("width",e.percentage,"%"),C(2),mn("",e.owned,"/",e.total," cards"),C(1),P("ngIf",e.rarityBreakdown&&e.rarityBreakdown.length>0)}}function kV(n,t){if(1&n&&(Gr(0),z(1,PV,11,8,"div",31),qr()),2&n){const e=t.$implicit;C(1),P("ngIf",e.total>0)}}function RV(n,t){if(1&n&&(m(0,"div",29)(1,"details")(2,"summary"),v(3,"\u{1f4e6} Set Completion Progress"),g(),m(4,"div",30),z(5,kV,2,1,"ng-container",18),g()()()),2&n){const e=O(2);C(5),P("ngForOf",e.setProgress)}}function NV(n,t){if(1&n&&(m(0,"div",51)(1,"div",52)(2,"h4"),v(3),g(),m(4,"span",53),v(5),g()(),m(6,"div",54)(7,"div",55),Be(8,"div",56),g(),m(9,"span",57),v(10),g()()()),2&n){const e=O().$implicit;P("ngClass","rarity-"+e.code),Tt("title",e.name+": "+e.owned+"/"+e.total+" ("+e.percentage+"%)"),C(3),He(e.name),C(2),mn("",e.owned,"/",e.total,""),C(3),Fs("width",e.percentage,"%"),C(2),xe("",e.percentage,"%")}}function FV(n,t){if(1&n&&(Gr(0),z(1,NV,11,8,"div",50),qr()),2&n){const e=t.$implicit;C(1),P("ngIf",e.total>0)}}function LV(n,t){if(1&n&&(m(0,"div",48)(1,"details")(2,"summary"),v(3,"\u2b50 Collection by Rarity"),g(),m(4,"div",49),z(5,FV,2,1,"ng-container",18),g()()()),2&n){const e=O(2);C(5),P("ngForOf",e.userRarityStats)}}function jV(n,t){if(1&n){const e=Je();m(0,"div",7)(1,"div",8)(2,"label",9)(3,"input",10),V("ngModelChange",function(o){return q(e),W(O().excludeDeluxePack=o)})("ngModelChange",function(){return q(e),W(O().excludeModelChange())}),g(),v(4," Exclude A4B - DELUXE PACK "),g()(),z(5,TV,8,1,"div",11),z(6,RV,6,1,"div",12),z(7,LV,6,1,"div",13),g()}if(2&n){const e=O();C(3),P("ngModel",e.excludeDeluxePack),C(2),P("ngIf",e.packSuggestions.length>0),C(1),P("ngIf",e.setProgress.length>0),C(1),P("ngIf",e.userRarityStats.length>0)}}let VV=(()=>{const t=class{constructor(r,o,i,s){this.dataManager=r,this.supabaseService=o,this.router=i,this.rarityService=s,this.title="Pokemon TCG Pocket Collector",this.cards=[],this.sets=[],this.rarityStats=[],this.packStats=[],this.loading=!1,this.error=null,this.dataLoaded=!1,this.userCollectionLoaded=!1,this.userCards=[],this.userStats={totalOwned:0,uniqueCards:0,completionPercentage:0,rareCards:0,recentSetsOwned:0,missingCommons:0,missingRares:0},this.setProgress=[],this.userRarityStats=[],this.recentCards=[],this.nearestCompleteSet=null,this.packSuggestions=[],this.excludeDeluxePack=!0}getCardRarityCode(r){const o=this.rarityService.getUnifiedRarities();for(const i of o)if(i.symbol===r.rarity)return i.code;return r.rarity||"Unknown"}ngOnInit(){this.supabaseService.isSignedIn()?this.loadAllData():this.router.navigate(["/signin"])}loadCards(){this.loading=!0,this.error=null,this.dataManager.initializeCardData().subscribe({next:r=>{this.cards=r,this.loading=!1},error:r=>{this.error="Failed to load cards data",this.loading=!1,console.error("Error loading cards:",r)}})}loadAllData(){this.loading=!0,this.error=null,this.dataManager.loadAllPokemonData().subscribe({next:r=>{this.cards=r.cards,this.sets=r.sets,this.dataLoaded=!0,this.loading=!1,this.loadStats(),this.loadUserCollection()},error:r=>{this.error="Failed to load Pokemon data",this.loading=!1,console.error("Error loading data:",r)}})}loadStats(){this.dataManager.getRarityStats().subscribe({next:r=>{this.rarityStats=r},error:r=>console.error("Error loading rarity stats:",r)}),this.dataManager.getPackStats().subscribe({next:r=>{this.packStats=r.slice(0,10)},error:r=>console.error("Error loading pack stats:",r)})}downloadCardsFile(){this.dataManager.downloadCardsFile()}getStorageInstructions(){const r=this.dataManager.getStorageInstructions();alert(r)}showComprehensiveStats(){this.dataManager.getComprehensiveStats().subscribe({next:r=>{alert(`Comprehensive Statistics loaded!\n\nSummary:\n- ${r.totalCards} total cards\n- ${r.totalSets} sets\n- ${r.totalRarities} rarity types\n- Date range: ${r.dateRange.earliest} to ${r.dateRange.latest}`)},error:r=>{console.error("Error loading comprehensive stats:",r),alert("Failed to load comprehensive statistics")}})}loadUserCollection(){var r=this;return w(function*(){const o=yield r.supabaseService.getCurrentUser();if(o)try{const i=yield r.supabaseService.syncUserCollection(o.id);r.userCards=Object.entries(i).map(([s,a])=>({card_def_key:s,quantity:a})),r.userCollectionLoaded=!0,r.calculateSetProgress(),r.calculateUserRarityStats(),r.calculatePackSuggestions()}catch(i){console.error("Error loading user collection:",i)}})()}excludeModelChange(){this.calculateSetProgress(),this.calculateUserRarityStats(),this.calculatePackSuggestions()}getCardId(r){return`${r.set}-${r.number}`}calculateSetProgress(){if(!this.userCards||!this.sets.length||!this.cards.length)return;const r=new Map;this.userCards.forEach(o=>{r.set(o.card_def_key,!0)}),this.setProgress=this.sets.map(o=>{const i=this.cards.filter(u=>u.set===o.code),s=this.excludeDeluxePack?i.filter(u=>!(u.packs&&u.packs.some(d=>this.isDeluxeA4B(d)))):i,a=s.filter(u=>r.has(this.getCardId(u))),l=s.length>0?Math.round(a.length/s.length*100):0,c=this.calculateSetRarityBreakdown(s,r);return{name:o.name||o.code,code:o.code,owned:a.length,total:s.length,percentage:l,rarityBreakdown:c}}).sort((o,i)=>o.code.localeCompare(i.code)),this.nearestCompleteSet=this.setProgress.find(o=>o.percentage<100)||this.setProgress[0]}calculateSetRarityBreakdown(r,o){const i=this.rarityService.groupCardsByNormalizedRarity(r),s=[];return i.forEach((a,l)=>{const c=a.filter(h=>o.has(this.getCardId(h))),u=a.length>0?Math.round(c.length/a.length*100):0,d=this.rarityService.getStandardizedDisplayName(l);s.push({name:d,code:l,owned:c.length,total:a.length,percentage:u})}),s.sort((a,l)=>this.rarityService.getRarityOrder(a.code)-this.rarityService.getRarityOrder(l.code))}calculateUserRarityStats(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(l=>{r.set(l.card_def_key,!0)});const o=this.excludeDeluxePack?this.cards.filter(l=>!(l.packs&&l.packs.some(c=>this.isDeluxeA4B(c)))):this.cards,i=this.rarityService.groupCardsByNormalizedRarity(o),s=[];i.forEach((l,c)=>{const u=l.filter(f=>r.has(this.getCardId(f))),d=l.length>0?Math.round(u.length/l.length*100):0,h=this.rarityService.getStandardizedDisplayName(c);s.push({name:h,code:c,owned:u.length,total:l.length,percentage:d})});const a=new Map;s.forEach(l=>{const c=a.get(l.code);c?(c.owned+=l.owned,c.total+=l.total):a.set(l.code,{name:l.name,code:l.code,owned:l.owned,total:l.total})}),this.userRarityStats=Array.from(a.values()).map(l=>({name:l.name,code:l.code,owned:l.owned,total:l.total,percentage:l.total>0?Math.round(l.owned/l.total*100):0})),this.userRarityStats.sort((l,c)=>this.rarityService.getRarityOrder(l.code)-this.rarityService.getRarityOrder(c.code))}loadRecentCards(){!this.userCards||!this.cards.length||(this.recentCards=this.userCards.slice(0,6).map(r=>({...this.cards.find(i=>this.getCardId(i)===r.card_def_key),quantity:r.quantity})).filter(r=>r))}calculatePackSuggestions(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(s=>{r.set(s.card_def_key,!0)});const o=new Set;this.cards.forEach(s=>{s.packs&&s.packs.length>0&&s.packs.forEach(a=>{this.excludeDeluxePack&&this.isDeluxeA4B(a)||o.add(a)})});const i=Array.from(o).map(s=>{const a=this.cards.filter(y=>y.packs&&y.packs.includes(s)),l=new Map;a.forEach(y=>{y.set&&l.set(y.set,(l.get(y.set)||0)+1)});let c=null,u=0;l.forEach((y,_)=>{y>u&&(u=y,c=_)});let d="";if(c){const y=this.sets.find(_=>_.code===c);d=y?.name||y?.code||c}const h=a.filter(y=>!r.has(this.getCardId(y))),f=new Map;h.forEach(y=>{const _=this.getCardRarityCode(y),b=this.rarityService.getNormalizedCode(_),x=f.get(b)||0;f.set(b,x+1)});let p=0;return f.forEach((y,_)=>{const b=this.rarityService.getRarityOrder(_),x=Math.max(1,10-b);p+=y*x}),{packName:s,primarySetCode:c,primarySetName:d,totalCards:a.length,missingCards:h.length,ownedCards:a.length-h.length,completionPercentage:a.length>0?Math.round((a.length-h.length)/a.length*100):100,rarityBreakdown:Array.from(f.entries()).map(([y,_])=>({code:y,count:_,displayName:this.rarityService.getDisplayName(y),symbol:this.rarityService.getSymbol(y)})).sort((y,_)=>this.rarityService.getRarityOrder(y.code)-this.rarityService.getRarityOrder(_.code)),score:p,missingCardsList:h.slice(0,5)}});this.packSuggestions=i.filter(s=>s.missingCards>0).sort((s,a)=>a.score-s.score).slice(0,5)}isDeluxeA4B(r){return!!r&&r.toUpperCase().replace(/[\u2012\u2013\u2014\u2015\-]/g,"-").replace(/\s+/g," ").trim().includes("DELUXE")}exportCollection(){if(!this.userCollectionLoaded)return void alert("Collection not loaded yet. Please wait...");const r=this.generateCollectionCSV(),o=new Blob(["\ufeff"+r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),s=URL.createObjectURL(o);i.setAttribute("href",s),i.setAttribute("download","pokemon_collection.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}generateCollectionCSV(){const o=[["Card Name","Set","Number","Rarity","Quantity"].join(",")];return this.userCards.forEach(i=>{const s=this.cards.find(a=>this.getCardId(a)===i.card_def_key);if(s){const a=[`"${s.label?.eng||s.name||""}"`,`"${s.set||""}"`,`"${s.number||""}"`,`"${s.rarity||""}"`,i.quantity.toString()];o.push(a.join(","))}}),o.join("\n")}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}};let n=t;return t.\u0275fac=function(o){return new(o||t)(A(hp),A(es),A(Ct),A(WD))},t.\u0275cmp=Br({type:t,selectors:[["app-dashboard"]],decls:4,vars:3,consts:[[1,"container"],["class","error",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"error"],[1,"loading-state"],[1,"loading-spinner"],[1,"dashboard-content"],[1,"suggestion-controls",2,"display","flex","justify-content","flex-end","align-items","center","gap","12px"],[2,"display","inline-flex","align-items","center","gap","8px","cursor","pointer"],["type","checkbox",3,"ngModel","ngModelChange"],["class","pack-suggestions",4,"ngIf"],["class","set-progress",4,"ngIf"],["class","rarity-breakdown",4,"ngIf"],[1,"pack-suggestions"],["open",""],[1,"suggestion-subtitle"],[1,"suggestions-list"],[4,"ngFor","ngForOf"],["class","suggestion-item",3,"top-pick",4,"ngIf"],[1,"suggestion-item"],[1,"suggestion-header"],[1,"rank-number"],[1,"suggestion-summary"],["class","pack-set",4,"ngIf"],[1,"missing-count"],[1,"completion-rate"],[1,"progress-count"],[1,"pack-set"],[1,"set-progress"],[1,"progress-list"],["class","progress-item",4,"ngIf"],[1,"progress-item"],[1,"progress-header"],[1,"progress-percentage"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-details"],["class","set-rarity-breakdown",4,"ngIf"],[1,"set-rarity-breakdown"],[1,"set-rarity-grid"],["class","set-rarity-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"set-rarity-item",3,"ngClass"],[1,"rarity-name"],[1,"rarity-mini-progress"],[1,"rarity-mini-bar"],[1,"rarity-mini-fill"],[1,"rarity-mini-text"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-card",3,"ngClass",4,"ngIf"],[1,"rarity-card",3,"ngClass"],[1,"rarity-header"],[1,"rarity-count"],[1,"rarity-progress"],[1,"rarity-bar"],[1,"rarity-fill"],[1,"percentage"]],template:function(o,i){1&o&&(m(0,"div",0),z(1,SV,2,1,"div",1),z(2,EV,4,0,"div",2),z(3,jV,8,4,"div",3),g()),2&o&&(C(1),P("ngIf",i.error),C(1),P("ngIf",i.loading),C(1),P("ngIf",!i.loading))},dependencies:[Hh,ec,xi,ta,na,Pi],styles:['.container[_ngcontent-%COMP%]{position:relative;max-width:1280px;margin:30px auto 0;min-height:100vh;color:var(--text);background:transparent;overflow:visible;border-radius:0;box-shadow:none;padding:0 20px;box-sizing:border-box;width:100%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{color:var(--text);margin-bottom:12px;font-weight:600}.dashboard-content[_ngcontent-%COMP%]{display:grid;gap:32px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.stat-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.22);border-radius:20px;padding:22px;display:flex;flex-direction:column;gap:12px;box-shadow:0 16px 32px #0c142447;transition:transform .16s ease,border-color .16s ease}.stat-card.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(91,168,255,.25),rgba(34,46,70,.85))}.stat-icon[_ngcontent-%COMP%]{font-size:2rem}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--text-muted);letter-spacing:.02em}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0}.stat-detail[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem}.error[_ngcontent-%COMP%]{background:rgba(255,107,107,.12);color:var(--danger);border:1px solid rgba(255,107,107,.35);padding:18px 22px;border-radius:14px;text-align:center;font-weight:500}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:80px 0;color:var(--text)}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;margin:24px auto;border-radius:50%;border:4px solid rgba(91,168,255,.2);border-top-color:var(--accent);animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:clamp(20px,2.4vw,28px);box-shadow:0 18px 36px #070c1859;transition:transform .16s ease,box-shadow .16s ease,border-color .18s ease;max-width:100%;box-sizing:border-box}.pack-suggestions[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]{width:100%}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;list-style:none;cursor:pointer;font-size:clamp(1.25rem,2vw,1.55rem);font-weight:700;color:var(--text);padding-bottom:18px;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:22px}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{content:"";width:11px;height:11px;border-radius:50%;background:var(--accent);box-shadow:0 0 18px #5ba8ffa6}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker{display:none}.pack-suggestions[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{background:var(--accent-strong)}.suggestion-subtitle[_ngcontent-%COMP%]{color:var(--text-muted);margin-bottom:18px;font-size:.95rem;font-style:italic}.suggestions-list[_ngcontent-%COMP%]{display:grid;gap:14px}.suggestion-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:18px;padding:18px 20px;border:1px solid rgba(91,168,255,.2);transition:transform .16s ease,border-color .16s ease,box-shadow .16s ease}.suggestion-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#5ba8ff8c;box-shadow:0 14px 28px #101c3459}.suggestion-item.top-pick[_ngcontent-%COMP%]{border:1px solid rgba(241,196,15,.65);background:linear-gradient(120deg,rgba(241,196,15,.22),rgba(44,62,80,.45))}.suggestion-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.pack-set[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;font-weight:700}.rank-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:32px;padding:4px 10px;border-radius:999px;background:rgba(91,168,255,.2);color:var(--accent);font-weight:600}.top-pick-badge[_ngcontent-%COMP%]{font-size:.72rem;letter-spacing:.12em;text-transform:uppercase;padding:4px 10px;border-radius:999px;background:rgba(241,196,15,.16);color:var(--warning)}.suggestion-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:14px;color:var(--text-muted);font-size:.92rem}.missing-count[_ngcontent-%COMP%]{color:var(--danger);font-weight:600}.completion-rate[_ngcontent-%COMP%]{color:var(--success);font-weight:600}.progress-count[_ngcontent-%COMP%]{color:var(--accent);font-weight:600}.progress-list[_ngcontent-%COMP%]{display:grid;gap:18px}.progress-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:20px;padding:20px 22px;border:1px solid rgba(91,168,255,.18);transition:transform .16s ease,border-color .16s ease}.progress-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.progress-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;color:var(--text)}.progress-percentage[_ngcontent-%COMP%]{color:var(--success);font-weight:700}.progress-bar[_ngcontent-%COMP%]{background:rgba(91,168,255,.14);border-radius:999px;height:10px;overflow:hidden;margin-bottom:10px}.progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent-strong));transition:width .22s ease-in-out}.progress-details[_ngcontent-%COMP%]{color:var(--text-muted);margin:0;font-size:.92rem}.set-rarity-breakdown[_ngcontent-%COMP%]{margin-top:18px}.set-rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:12px;color:var(--text-muted);font-weight:600;letter-spacing:.02em}.set-rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.set-rarity-item[_ngcontent-%COMP%]{background:rgba(13,19,33,.7);border:1px solid rgba(91,168,255,.14);border-radius:16px;padding:12px 14px;text-align:center;box-shadow:inset 0 1px #ffffff0a,0 6px 14px #080c1659;display:flex;flex-direction:column;min-height:96px}.rarity-name[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:.8rem;font-weight:600;color:var(--text)}.rarity-mini-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:auto}.rarity-mini-bar[_ngcontent-%COMP%]{flex:1;height:8px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(91,168,255,.12));border:1px solid rgba(91,168,255,.22);overflow:hidden;position:relative}.rarity-mini-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--rarity-start, var(--accent)) 0%,var(--rarity-end, var(--accent-strong)) 100%);border-radius:999px;box-shadow:0 0 8px var(--rarity-glow, rgba(76, 138, 255, .6));transition:width .26s ease}.rarity-mini-text[_ngcontent-%COMP%]{font-size:.72rem;color:var(--text);background:rgba(255,255,255,.06);border:1px solid rgba(91,168,255,.18);padding:2px 8px;border-radius:999px;font-weight:600;letter-spacing:.01em;font-variant-numeric:tabular-nums}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.rarity-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.18);border-radius:18px;padding:20px;display:flex;flex-direction:column;gap:14px;min-height:140px;transition:transform .16s ease,border-color .16s ease}.rarity-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.rarity-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.rarity-count[_ngcontent-%COMP%]{font-weight:700;color:var(--accent)}.rarity-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:auto}.rarity-bar[_ngcontent-%COMP%]{flex:1;height:10px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(91,168,255,.12));border:1px solid rgba(91,168,255,.22);overflow:hidden}.rarity-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--rarity-start, var(--accent)) 0%,var(--rarity-end, var(--accent-strong)) 100%);border-radius:999px;box-shadow:0 0 10px var(--rarity-glow, rgba(76, 138, 255, .65));transition:width .26s ease-in-out}.percentage[_ngcontent-%COMP%]{min-width:48px;text-align:right;font-weight:700;color:var(--success);background:rgba(46,204,113,.1);border:1px solid rgba(46,204,113,.25);padding:2px 8px;border-radius:999px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding-left:16px!important;padding-right:16px!important}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{margin-inline:8px}.suggestion-summary[_ngcontent-%COMP%], .progress-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.suggestions-list[_ngcontent-%COMP%]{gap:10px}.suggestion-item[_ngcontent-%COMP%]{padding:14px 16px;box-sizing:border-box;max-width:100%}.suggestion-item.top-pick[_ngcontent-%COMP%]{padding:12px 14px;border-radius:16px}.suggestion-header[_ngcontent-%COMP%]{gap:10px}.top-pick-badge[_ngcontent-%COMP%]{font-size:.68rem;padding:3px 8px}.pack-set[_ngcontent-%COMP%]{font-size:.85rem}.rarity-grid[_ngcontent-%COMP%], .set-rarity-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.rank-number[_ngcontent-%COMP%]{min-width:24px;padding:3px 8px;font-size:.9rem}.suggestion-summary[_ngcontent-%COMP%]{gap:10px;font-size:.88rem;overflow-wrap:anywhere;word-break:break-word}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{padding:clamp(18px,2.16vw,25px);font-size:.9em}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{font-size:.9em}.suggestion-item[_ngcontent-%COMP%]{padding:12px 14px}.suggestion-item.top-pick[_ngcontent-%COMP%]{padding:10px 12px}.progress-item[_ngcontent-%COMP%]{padding:18px 20px}.rarity-card[_ngcontent-%COMP%]{padding:18px}.suggestion-summary[_ngcontent-%COMP%]{font-size:.8rem}.top-pick-badge[_ngcontent-%COMP%]{font-size:.62rem;padding:3px 7px}.rank-number[_ngcontent-%COMP%]{min-width:22px;padding:2px 7px;font-size:.82rem}.pack-set[_ngcontent-%COMP%]{font-size:.78rem}}']}),n})(),$V=(()=>{const t=class{constructor(r){this.http=r,this.BASE_IMAGE_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-exchange/main/public/images/cards",this.imageCache=new Map}getCardImageUrl(r){return`${this.BASE_IMAGE_URL}/${r}`}checkImageExists(r){if(this.imageCache.has(r))return ee(this.imageCache.get(r));const o=this.getCardImageUrl(r);return this.http.head(o,{observe:"response"}).pipe(N(i=>{const s=200===i.status;return this.imageCache.set(r,s),s}),Jn(()=>(this.imageCache.set(r,!1),ee(!1))))}preloadImage(r){return new Promise(o=>{const i=new Image;i.onload=()=>{this.imageCache.set(r,!0),o(!0)},i.onerror=()=>{this.imageCache.set(r,!1),o(!1)},i.src=this.getCardImageUrl(r)})}getPlaceholderImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDIwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExNi41NjkgMTQwIDEzMCAxMjYuNTY5IDEzMCAxMTBDMTMwIDkzLjQzMTUgMTE2LjU2OSA4MCAxMDAgODBDODMuNDMxNSA4MCA3MCA5My40MzE1IDcwIDExMEM3MCAxMjYuNTY5IDgzLjQzMTUgMTQwIDEwMCAxNDBaIiBmaWxsPSIjOUI5QkE4Ii8+CjxwYXRoIGQ9Ik0xMDAgMTAwQzEwNS41MjMgMTAwIDExMCAxMDQuNDc3IDExMCAxMTBDMTEwIDExNS41MjMgMTA1LjUyMyAxMjAgMTAwIDEyMEM5NC40NzcgMTIwIDkwIDExNS41MjMgOTAgMTEwQzkwIDEwNC40NzcgOTQuNDc3IDEwMCAxMDAgMTAwWiIgZmlsbD0iI0Y5RkFGQiIvPgo8L3N2Zz4K"}};let n=t;return t.\u0275fac=function(o){return new(o||t)(K(Mi))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),n})();function UV(n,t){if(1&n){const e=Je();m(0,"div",64)(1,"div",65),v(2,"Viewing "),m(3,"strong"),v(4),g(),v(5,"'s collection (read-only)"),g(),m(6,"button",66),V("click",function(){return q(e),W(O().backToMyCollection())}),v(7,"Back to my collection"),g()()}if(2&n){const e=O();C(4),He(null==e.viewingUser?null:e.viewingUser.username)}}function BV(n,t){if(1&n&&(m(0,"option",67),v(1),g()),2&n){const e=t.$implicit;P("value",e),C(1),He(e)}}function HV(n,t){if(1&n&&(m(0,"option",67),v(1),g()),2&n){const e=t.$implicit,r=O();P("value",e),C(1),He(r.getSetName(e))}}function zV(n,t){if(1&n&&(m(0,"option",67),v(1),g()),2&n){const e=t.$implicit;P("value",e),C(1),He(e)}}function GV(n,t){if(1&n){const e=Je();m(0,"button",68),V("click",function(){const i=q(e).$implicit;return W(O().toggleRarity(i.symbol))}),v(1),g()}if(2&n){const e=t.$implicit;et("active",O().isRaritySelected(e.symbol)),P("title",e.displayName),C(1),xe(" ",e.symbol," ")}}const qV=function(n,t,e){return{"trainer-item":n,"trainer-tool":t,"trainer-supporter":e}};function WV(n,t){if(1&n&&(Gr(0),m(1,"span",72),v(2),g(),qr()),2&n){const e=O().$implicit;C(1),P("ngClass",Tv(2,qV,"Item"===e,"Tool"===e,"Supporter"===e)),C(1),xe(" ",e," ")}}function KV(n,t){if(1&n&&Be(0,"img",73),2&n){const e=O().$implicit;P("src","assets/energy/"+e.toLowerCase()+".webp",Ms)("alt",e)}}const JV=function(){return["Item","Tool","Supporter"]};function YV(n,t){if(1&n){const e=Je();m(0,"button",69),V("click",function(){const i=q(e).$implicit;return W(O().toggleType(i))}),z(1,WV,3,6,"ng-container",70),z(2,KV,1,2,"ng-template",null,71,ch),g()}if(2&n){const e=t.$implicit,r=xl(3);et("active",O().isTypeSelected(e)),P("title",e),C(1),P("ngIf",bi(5,JV).includes(e))("ngIfElse",r)}}function QV(n,t){if(1&n){const e=Je();m(0,"div",12)(1,"label",74),v(2,"Group By"),g(),m(3,"select",75),V("ngModelChange",function(o){return q(e),W(O().groupBy=o)})("change",function(){return q(e),W(O().onGroupByChange())}),m(4,"option",76),v(5,"No Grouping"),g(),m(6,"option",77),v(7,"Rarity"),g(),m(8,"option",78),v(9,"Pack"),g(),m(10,"option",79),v(11,"Type"),g()()()}if(2&n){const e=O();C(3),P("ngModel",e.groupBy)}}function ZV(n,t){1&n&&(m(0,"div",80),Be(1,"div",81),m(2,"p"),v(3,"Loading Pokemon cards..."),g()())}function XV(n,t){if(1&n){const e=Je();m(0,"div",82)(1,"p"),v(2),g(),m(3,"button",83),V("click",function(){return q(e),W(O().loadAllData())}),v(4,"Retry"),g()()}if(2&n){const e=O();C(2),He(e.error)}}function e$(n,t){if(1&n&&(m(0,"div",90),v(1),g()),2&n){const e=O(2);C(1),xe("",e.syncProgress," cards loaded")}}function t$(n,t){if(1&n&&(m(0,"div",84)(1,"div",85)(2,"div",86),v(3,"\u23f3"),g(),m(4,"div",87)(5,"div",88),v(6),g(),z(7,e$,2,1,"div",89),g()()()),2&n){const e=O();C(6),He(e.syncMessage),C(1),P("ngIf",e.syncProgress>0)}}function n$(n,t){if(1&n&&(m(0,"span",104),v(1),g()),2&n){const e=O().$implicit,r=O(2);C(1),xe(" \u25ca ",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)," ")}}function r$(n,t){if(1&n&&(m(0,"span",105),v(1),g()),2&n){const e=O().$implicit,r=O(2);C(1),xe(" \u2606 ",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)," ")}}function o$(n,t){if(1&n&&(m(0,"span",106),v(1),g()),2&n){const e=O().$implicit,r=O(2);C(1),xe(" \u2735 ",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)," ")}}function i$(n,t){if(1&n&&(m(0,"span",107),v(1),g()),2&n){const e=O().$implicit,r=O(2);C(1),xe(" \u{1f451} ",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)," ")}}function s$(n,t){if(1&n){const e=Je();Gr(0),m(1,"input",117),V("ngModelChange",function(o){return q(e),W(O(4).editingCountValue=o)})("keydown.enter",function(){q(e);const o=O().$implicit;return W(O(3).commitCount(o))})("keydown",function(o){q(e);const i=O().$implicit;return W(O(3).onCountInputKeydown(o,i))})("keydown.escape",function(){return q(e),W(O(4).cancelEditingCount())})("blur",function(){q(e);const o=O().$implicit;return W(O(3).commitCount(o))}),g(),qr()}if(2&n){const e=O(4);C(1),P("ngModel",e.editingCountValue)}}function a$(n,t){if(1&n){const e=Je();m(0,"button",118),V("click",function(){q(e);const o=O().$implicit,i=O(3);return W(i.isViewingOther?null:i.startEditingCount(o))}),v(1),g()}if(2&n){const e=O().$implicit,r=O(3);P("disabled",r.isViewingOther),C(1),xe(" ",r.getOwnedCount(e)," ")}}function l$(n,t){if(1&n){const e=Je();m(0,"div",108)(1,"div",109)(2,"img",110),V("error",function(o){const s=q(e).$implicit;return W(O(3).onImageError(o,s))})("click",function(){const i=q(e).$implicit;return W(O(3).openCardModal(i))}),g()(),m(3,"div",111)(4,"div",112),v(5),g(),m(6,"div",113)(7,"button",114),V("click",function(){const i=q(e).$implicit;return W(O(3).decreaseOwned(i))}),v(8," \u2212 "),g(),z(9,s$,2,1,"ng-container",70),z(10,a$,2,2,"ng-template",null,115,ch),m(12,"button",116),V("click",function(){const i=q(e).$implicit;return W(O(3).increaseOwned(i))}),v(13," + "),g()()()()}if(2&n){const e=t.$implicit,r=xl(11),o=O(3);et("no-quantity",0===o.getOwnedCount(e)),Tt("data-cardid",o.getCardId(e)),C(1),et("no-quantity",0===o.getOwnedCount(e)),C(1),et("no-quantity",0===o.getOwnedCount(e)),P("src",o.getCardImageUrl(e.imageName),Ms)("alt",e.label.eng+" Pokemon Card"),C(3),He(o.getCardDisplayName(e)),C(2),P("disabled",o.isViewingOther||0===o.getOwnedCount(e)),C(2),P("ngIf",o.editingCardId===o.getCardId(e))("ngIfElse",r),C(3),P("disabled",o.isViewingOther)}}function c$(n,t){if(1&n&&(m(0,"div",93)(1,"div",94)(2,"h3",95),v(3),g(),m(4,"div",96),z(5,n$,2,1,"span",97),z(6,r$,2,1,"span",98),z(7,o$,2,1,"span",99),z(8,i$,2,1,"span",100),m(9,"span",101),v(10),g()()(),m(11,"div",102),z(12,l$,14,14,"div",103),g()()),2&n){const e=t.$implicit,r=O(2);Tt("id","set-"+e.groupTitle),C(3),He(r.getGroupDisplayName(e.groupTitle,e.cards)),C(2),P("ngIf",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle).endsWith("/0")),C(1),P("ngIf",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle).endsWith("/0")),C(1),P("ngIf",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle).endsWith("/0")),C(1),P("ngIf",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle).endsWith("/0")),C(2),xe("",r.getGroupCollectedCount(e.cards)," cards"),C(2),P("ngForOf",e.cards)("ngForTrackBy",r.trackByCardInGroup)}}function u$(n,t){if(1&n&&(m(0,"div",91),z(1,c$,13,9,"div",92),g()),2&n){const e=O();C(1),P("ngForOf",e.getGroupedCards())("ngForTrackBy",e.trackByGroupTitle)}}function d$(n,t){if(1&n){const e=Je();m(0,"div",119)(1,"div",120),v(2,"\u{1f50d}"),g(),m(3,"h3"),v(4,"No cards found"),g(),m(5,"p"),v(6,"Try adjusting your search or filter criteria"),g(),m(7,"button",83),V("click",function(){return q(e),W(O().clearFilters())}),v(8,"Clear All Filters"),g()()}}function h$(n,t){if(1&n){const e=Je();m(0,"div",121),V("click",function(){return q(e),W(O().closeViewOthersModal())}),m(1,"div",122),V("click",function(o){return o.stopPropagation()}),m(2,"div",123)(3,"h3"),v(4,"View Others Collection"),g(),m(5,"button",124),V("click",function(){return q(e),W(O().closeViewOthersModal())}),v(6,"\xd7"),g()(),m(7,"div",125)(8,"div",126)(9,"div",127)(10,"label",128),v(11,"Username:"),g(),m(12,"input",129),V("ngModelChange",function(o){return q(e),W(O().otherUsername=o)})("keydown.enter",function(){return q(e),W(O().viewOtherCollectionFromModal())}),g(),m(13,"span",130),v(14,"Enter the username of the collection you want to view"),g()()()(),m(15,"div",131)(16,"button",66),V("click",function(){return q(e),W(O().closeViewOthersModal())}),v(17,"Cancel"),g(),m(18,"button",132),V("click",function(){return q(e),W(O().viewOtherCollectionFromModal())}),v(19," \u{1f464} View Collection "),g()()()()}if(2&n){const e=O();C(12),P("ngModel",e.otherUsername),C(6),P("disabled",!e.otherUsername.trim())}}function f$(n,t){if(1&n&&(m(0,"span"),v(1),g()),2&n){const e=O(2);C(1),xe("All Sets Selected (",e.availableTradeSets.length,")")}}function p$(n,t){1&n&&(m(0,"span"),v(1,"No Sets Selected"),g())}function g$(n,t){1&n&&(m(0,"span"),v(1,"1 Set Selected"),g())}function m$(n,t){if(1&n&&(m(0,"span"),v(1),g()),2&n){const e=O(2);C(1),xe("",e.selectedLFsets.length," Sets Selected")}}const KD=function(){return{background:"var(--header-gradient)",color:"#fff"}},JD=function(){return{background:"transparent",color:"var(--text)"}};function y$(n,t){if(1&n){const e=Je();m(0,"button",162),V("click",function(){const i=q(e).$implicit;return W(O(3).toggleLFSet(i))}),m(1,"span",163),v(2),g(),m(3,"span"),v(4),g()()}if(2&n){const e=t.$implicit,r=O(3);P("ngStyle",r.isLFSetSelected(e)?bi(5,KD):bi(6,JD)),Tt("aria-selected",r.isLFSetSelected(e)),C(2),He(r.isLFSetSelected(e)?"\u2714":""),C(2),mn("",e," \u2013 ",r.getSetName(e),"")}}function _$(n,t){1&n&&(m(0,"div",164),v(1,"No sets available"),g())}function v$(n,t){if(1&n){const e=Je();m(0,"div",156)(1,"div",157)(2,"button",158),V("click",function(){return q(e),W(O(2).clearLFsets())}),v(3,"Clear"),g(),m(4,"button",158),V("click",function(){return q(e),W(O(2).selectAllLFsets())}),v(5,"All"),g()(),m(6,"div",159),z(7,y$,5,7,"button",160),z(8,_$,2,0,"div",161),g()()}if(2&n){const e=O(2);C(7),P("ngForOf",e.availableTradeSets),C(1),P("ngIf",0===e.availableTradeSets.length)}}function C$(n,t){if(1&n&&(m(0,"span"),v(1),g()),2&n){const e=O(2);C(1),xe("All Sets Selected (",e.availableTradeSets.length,")")}}function b$(n,t){1&n&&(m(0,"span"),v(1,"No Sets Selected"),g())}function w$(n,t){1&n&&(m(0,"span"),v(1,"1 Set Selected"),g())}function D$(n,t){if(1&n&&(m(0,"span"),v(1),g()),2&n){const e=O(2);C(1),xe("",e.selectedFTsets.length," Sets Selected")}}function S$(n,t){if(1&n){const e=Je();m(0,"button",162),V("click",function(){const i=q(e).$implicit;return W(O(3).toggleFTSet(i))}),m(1,"span",163),v(2),g(),m(3,"span"),v(4),g()()}if(2&n){const e=t.$implicit,r=O(3);P("ngStyle",r.isFTSetSelected(e)?bi(5,KD):bi(6,JD)),Tt("aria-selected",r.isFTSetSelected(e)),C(2),He(r.isFTSetSelected(e)?"\u2714":""),C(2),mn("",e," \u2013 ",r.getSetName(e),"")}}function E$(n,t){1&n&&(m(0,"div",164),v(1,"No sets available"),g())}function x$(n,t){if(1&n){const e=Je();m(0,"div",156)(1,"div",157)(2,"button",158),V("click",function(){return q(e),W(O(2).clearFTsets())}),v(3,"Clear"),g(),m(4,"button",158),V("click",function(){return q(e),W(O(2).selectAllFTsets())}),v(5,"All"),g()(),m(6,"div",159),z(7,S$,5,7,"button",160),z(8,E$,2,0,"div",161),g()()}if(2&n){const e=O(2);C(7),P("ngForOf",e.availableTradeSets),C(1),P("ngIf",0===e.availableTradeSets.length)}}function M$(n,t){if(1&n){const e=Je();m(0,"button",68),V("click",function(){const i=q(e).$implicit;return W(O(2).toggleTradeRarity(i.symbol))}),v(1),g()}if(2&n){const e=t.$implicit;et("active",O(2).isTradeRaritySelected(e.symbol)),P("title",e.displayName),C(1),xe(" ",e.symbol," ")}}const YD=function(n,t){return{"fa-chevron-down":n,"fa-chevron-up":t}};function O$(n,t){if(1&n){const e=Je();m(0,"div",121),V("click",function(){return q(e),W(O().closeTradeModal())}),m(1,"div",133),V("click",function(o){return o.stopPropagation()}),m(2,"div",123)(3,"h3"),v(4,"Copy For Trade"),g(),m(5,"button",124),V("click",function(){return q(e),W(O().closeTradeModal())}),v(6,"\xd7"),g()(),m(7,"div",125)(8,"div",134)(9,"div",127)(10,"label",135)(11,"input",136),V("ngModelChange",function(o){return q(e),W(O().excludeSpecialPacks=o)})("ngModelChange",function(){return q(e),W(O().onExcludeSpecialPacksToggle())}),g(),v(12,' Exclude "PROMO" and "Deluxe packs" '),g()(),m(13,"div",127)(14,"label",137),v(15,"Include sets (Looking For):"),g(),m(16,"div",138)(17,"button",139),V("click",function(){q(e);const o=O();return W(o.lfSetDropdownOpen=!o.lfSetDropdownOpen)}),z(18,f$,2,1,"span",140),z(19,p$,2,0,"span",140),z(20,g$,2,0,"span",140),z(21,m$,2,1,"span",140),Be(22,"i",141),g(),z(23,v$,9,2,"div",142),g()(),m(24,"div",127)(25,"label",143),v(26,"Include sets (For Trade):"),g(),m(27,"div",144)(28,"button",139),V("click",function(){q(e);const o=O();return W(o.ftSetDropdownOpen=!o.ftSetDropdownOpen)}),z(29,C$,2,1,"span",140),z(30,b$,2,0,"span",140),z(31,w$,2,0,"span",140),z(32,D$,2,1,"span",140),Be(33,"i",141),g(),z(34,x$,9,2,"div",142),g()(),m(35,"div",127)(36,"label",145),v(37,"Include rarities:"),g(),m(38,"div",146)(39,"button",147),V("click",function(){return q(e),W(O().clearTradeRarities())}),v(40,"ALL"),g(),z(41,M$,2,4,"button",25),g()(),m(42,"div",127)(43,"label",145),v(44,"Output format:"),g(),m(45,"div",148)(46,"button",149),V("click",function(){return q(e),W(O().outputFormat="discord")}),v(47,"DISCORD"),g(),m(48,"button",149),V("click",function(){return q(e),W(O().outputFormat="details")}),v(49,"DETAILS"),g()()(),m(50,"div",127)(51,"label",150),v(52,"Trade cards (quantity \u2265):"),g(),m(53,"input",151),V("ngModelChange",function(o){return q(e),W(O().tradeQuantityMin=o)}),g()(),m(54,"div",127)(55,"label",152),v(56,"Friend Code:"),g(),m(57,"input",153),V("ngModelChange",function(o){return q(e),W(O().tradeFriendCode=o)}),g()(),m(58,"div",127)(59,"label",154),v(60,"Template text:"),g(),m(61,"textarea",155),V("ngModelChange",function(o){return q(e),W(O().tradeTemplateText=o)}),g()()()(),m(62,"div",131)(63,"button",66),V("click",function(){return q(e),W(O().closeTradeModal())}),v(64,"Cancel"),g(),m(65,"button",83),V("click",function(){return q(e),W(O().generateAndCopyTradeText())}),v(66,"\u{1f4cb} Copy Trade Text"),g()()()()}if(2&n){const e=O();C(11),P("ngModel",e.excludeSpecialPacks),C(7),P("ngIf",e.selectedLFsets.length===e.availableTradeSets.length),C(1),P("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&0===e.selectedLFsets.length),C(1),P("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&1===e.selectedLFsets.length),C(1),P("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&e.selectedLFsets.length>1),C(1),P("ngClass",eh(23,YD,!e.lfSetDropdownOpen,e.lfSetDropdownOpen)),C(1),P("ngIf",e.lfSetDropdownOpen),C(6),P("ngIf",e.selectedFTsets.length===e.availableTradeSets.length),C(1),P("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&0===e.selectedFTsets.length),C(1),P("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&1===e.selectedFTsets.length),C(1),P("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&e.selectedFTsets.length>1),C(1),P("ngClass",eh(26,YD,!e.ftSetDropdownOpen,e.ftSetDropdownOpen)),C(1),P("ngIf",e.ftSetDropdownOpen),C(5),et("active",0===e.selectedTradeRarities.length),C(2),P("ngForOf",e.getAvailableTradeRaritySymbols()),C(5),et("active","discord"===e.outputFormat),C(2),et("active","details"===e.outputFormat),C(5),P("ngModel",e.tradeQuantityMin),C(4),P("ngModel",e.tradeFriendCode),C(4),P("ngModel",e.tradeTemplateText)}}function T$(n,t){if(1&n&&(m(0,"span",178),v(1),g()),2&n){const e=t.$implicit;C(1),He(e)}}function I$(n,t){if(1&n&&(m(0,"div",176),z(1,T$,2,1,"span",177),g()),2&n){const e=O(2);C(1),P("ngForOf",e.selectedCardForModal.packs)}}function A$(n,t){if(1&n){const e=Je();m(0,"div",165),V("click",function(){return q(e),W(O().closeCardModal())}),m(1,"div",166),V("click",function(o){return o.stopPropagation()}),m(2,"button",167),V("click",function(){return q(e),W(O().closeCardModal())}),v(3,"\xd7"),g(),m(4,"div",168)(5,"button",169),V("click",function(o){return q(e),W(O().showPrevCardInModal(o))}),Be(6,"i",170),g(),Be(7,"img",171),m(8,"button",172),V("click",function(o){return q(e),W(O().showNextCardInModal(o))}),Be(9,"i",173),g()(),m(10,"div",174)(11,"h3"),v(12),g(),z(13,I$,2,1,"div",175),g()()()}if(2&n){const e=O();C(7),P("src",e.getCardImageUrl(e.selectedCardForModal.imageName),Ms)("alt",e.getCardDisplayName(e.selectedCardForModal)),C(5),He(e.getCardDisplayName(e.selectedCardForModal)),C(1),P("ngIf",e.selectedCardForModal.packs&&e.selectedCardForModal.packs.length>0)}}let P$=(()=>{const t=class{constructor(r,o,i,s,a,l,c,u){this.pokemonDataService=r,this.dataManager=o,this.imageService=i,this.supabaseService=s,this.router=a,this.route=l,this.cdr=c,this.rarityService=u,this.touchStartX=null,this.touchEndX=null,this.handleModalTouchStart=d=>{1===d.touches.length&&(this.touchStartX=d.touches[0].clientX)},this.handleModalTouchEnd=d=>{if(null===this.touchStartX)return;this.touchEndX=d.changedTouches[0].clientX;const h=this.touchEndX-this.touchStartX;Math.abs(h)>50&&(h<0?this.showNextCardInModal():this.showPrevCardInModal()),this.touchStartX=null,this.touchEndX=null},this.cards=[],this.filteredCards=[],this.sets=[],this.rarityMapping={},this.ownedCards={},this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.groupBy="none",this.availableSets=[],this.availableSeries=[],this.availableRarities=[],this.availableRaritySymbols=[],this.availableTypes=[],this.availablePacks=[],this.loading=!0,this.loadingOwnedCards=!1,this.syncingCards=!1,this.syncProgress=0,this.syncMessage="",this.error=null,this.viewMode="grid",this.editingCardId=null,this.editingCountValue=0,this.lastFlatOrder=[],this.selectedCardForModal=null,this.isViewingOther=!1,this.otherUsername="",this.viewingUser=null,this.totalCards=0,this.ownedCount=0,this.uniqueOwned=0,this.completionPercentage=0,this.currentUser=null,this.filtersOpen=!1,this.showTradeModal=!1,this.selectedTradeRarities=[],this.availableTradeSets=[],this.selectedLFsets=[],this.selectedFTsets=[],this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.tradeQuantityMin=2,this.tradeFriendCode="",this.tradeTemplateText="Please ping me if there is any possible trades. \nENGLISH cards only please.",this.excludedTradeSymbols=new Set(["\u2606\u2606\u2606","\u{1f451}"]),this.excludeSpecialPacks=!0,this.outputFormat="discord",this.showViewOthersModal=!1,this.handleModalKeydown=d=>{"Escape"===d.key&&this.selectedCardForModal&&this.closeCardModal()},this.trackByCardId=(d,h)=>this.getCardId(h),this.trackByGroupTitle=(d,h)=>h.groupTitle,this.trackByCardInGroup=(d,h)=>this.getCardId(h)}getOwnedRarityCount(r,o,i){if(!r)return"0/0";const a=i.split(" - ")[0].trim().toUpperCase(),l={"\u25ca":["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca"],"\u2606":["\u2606","\u2606\u2606","\u2606\u2606\u2606"],"\u2735":["\u2735","\u2735\u2735"]}[o]||[o],c=r.filter(d=>{if(!d)return!1;const h=l.includes(d.rarity),f="all"===i||d.set&&d.set.toUpperCase()===a;return h&&f});return`${c.filter(d=>this.getOwnedCount(d)>0).length}/${c.length}`}openCardModal(r){this.selectedCardForModal=r,document.body.style.overflow="hidden",document.addEventListener("keydown",this.handleModalKeydown),setTimeout(()=>{const o=document.querySelector(".modal-content.card-modal");o&&(o.addEventListener("touchstart",i=>this.handleModalTouchStart(i),{passive:!0}),o.addEventListener("touchend",i=>this.handleModalTouchEnd(i),{passive:!0}))},0)}closeCardModal(){this.selectedCardForModal=null,document.body.style.overflow="auto",document.removeEventListener("keydown",this.handleModalKeydown);const r=document.querySelector(".modal-content.card-modal");if(r){const o=r.cloneNode(!0);r.parentNode?.replaceChild(o,r)}}showPrevCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s>0?o[s-1]:o[o.length-1],this.cdr.markForCheck()}showNextCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s<o.length-1?o[s+1]:o[0],this.cdr.markForCheck()}getAllModalCards(){const r=this.getGroupedCards();return Array.isArray(r)?r.flatMap(o=>o.cards):[]}ngOnInit(){if(this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser){try{typeof window<"u"&&window?.innerWidth<=768&&(this.filtersOpen=!1)}catch{}this.loadAllData()}else this.router.navigate(["/signin"])}loadAllData(){this.loading=!0,this.error=null,this.pokemonDataService.loadAllData().subscribe({next:r=>{this.cards=r.cards,this.filteredCards=[...this.cards],this.sets=r.sets,this.rarityMapping=r.rarities,this.extractFilterOptions(),this.calculateStatistics(),this.loading=!1,this.cdr.detectChanges(),this.applyQueryParamsIfAny().then(()=>{this.isViewingOther||this.loadOwnedCards()})},error:r=>{this.error="Failed to load card collection",this.loading=!1,this.cdr.detectChanges(),console.error("Error loading card collection:",r)}})}applyQueryParamsIfAny(){var r=this;return w(function*(){const o=r.route.snapshot.queryParams||{},i=o.series,s=o.set,a=o.pack,l=o.rarity,c=o.otherUser;let u=!1;"string"==typeof i&&i.trim()&&(r.selectedSeries=i,u=!0),r.extractAvailableSets(),"string"==typeof s&&s.trim()&&(r.selectedSet=s,u=!0),r.extractAvailablePacks(),"string"==typeof a&&a.trim()&&(r.selectedPack=a,u=!0),"string"==typeof l&&l.trim()&&(r.selectedRarities=[l],u=!0),u&&(r.applyFilters(),r.cdr.detectChanges()),"string"==typeof c&&c.trim()&&(r.otherUsername=c.trim(),yield r.viewOtherCollection())})()}extractFilterOptions(){this.availableSeries=[...new Set(this.cards.map(l=>l.series).filter(l=>!!l))];const r=[...new Set(this.cards.map(l=>l.rarity).filter(l=>l))],o=this.createRaritySymbolToCodeMap();this.availableRarities=r.map(l=>o.get(l)||l),this.availableRaritySymbols=[];const i=new Set;this.cards.forEach(l=>{if(l.rarity){const c=o.get(l.rarity);if(c){const u=this.rarityService.getNormalizedCode(c);i.add(u)}}});const s=new Map;this.rarityService.getUnifiedRarities().forEach(l=>{i.has(l.code)&&s.set(l.symbol,{symbol:l.symbol,rarities:[l.code],displayName:l.displayName})}),this.availableRaritySymbols=Array.from(s.values()).sort((l,c)=>this.rarityService.getRarityOrder(l.rarities[0])-this.rarityService.getRarityOrder(c.rarities[0])),this.extractAvailablePacks(),this.extractAvailableTypes(),this.extractAvailableSets()}extractAvailableSets(){this.availableSets="all"===this.selectedSeries?[...new Set(this.cards.map(r=>r.set))]:[...new Set(this.cards.filter(r=>r.series===this.selectedSeries).map(r=>r.set))]}createRaritySymbolToCodeMap(){const r=new Map,o=this.rarityService.getUnifiedRarities();for(const i of o)r.set(i.symbol,i.code);return r}getCardRarityCode(r){return this.createRaritySymbolToCodeMap().get(r.rarity)||r.rarity}convertRarityNameToCode(r){return{Common:"C",Uncommon:"U",Rare:"R","Double Rare":"RR","Art Rare":"AR","Super Rare":"SR","Special Art Rare":"SAR","Immersive Rare":"IM","Crown Rare":"UR",Shiny:"S","Shiny Super Rare":"SSR"}[r]||r}extractAvailablePacks(){let r=this.cards;"all"!==this.selectedSeries&&(r=r.filter(i=>i.series===this.selectedSeries)),"all"!==this.selectedSet&&(r=r.filter(i=>i.set===this.selectedSet));const o=r.flatMap(i=>Array.isArray(i.packs)?i.packs:[]).filter(i=>"string"==typeof i&&i.trim());this.availablePacks=[...new Set(o)],"all"!==this.selectedPack&&!this.availablePacks.includes(this.selectedPack)&&(this.selectedPack="all")}extractAvailableTypes(){const r=this.cards.flatMap(i=>Array.isArray(i.types)?i.types:[]).filter(i=>"string"==typeof i&&i.trim()),o=["Item","Tool","Supporter"];this.availableTypes=[...new Set(r)].sort((i,s)=>{const a=o.includes(i),l=o.includes(s);return a&&!l?1:!a&&l?-1:i.localeCompare(s)})}applyFilters(){this.filteredCards=this.cards.filter(i=>{if("all"!==this.selectedSet&&i.set!==this.selectedSet||"all"!==this.selectedSeries&&i.series!==this.selectedSeries)return!1;if(this.selectedRarities.length>0){const s=this.getCardRarityCode(i),a=s?this.rarityService.getSymbol(s):"";if(!a||!this.selectedRarities.includes(a))return!1}return!(this.selectedTypes.length>0&&!(Array.isArray(i.types)?i.types:[]).some(l=>this.selectedTypes.includes(l))||"all"!==this.selectedSet&&"all"!==this.selectedPack&&!(Array.isArray(i.packs)?i.packs:[]).includes(this.selectedPack)||this.searchTerm&&!i.label.eng.toLowerCase().includes(this.searchTerm.toLowerCase())||"missing"===this.ownershipFilter&&this.getOwnedCount(i)>0||"owned"===this.ownershipFilter&&0===this.getOwnedCount(i))});const r=i=>this.isSpecialSet(i),o=(i,s)=>{const a=/^([A-Z]+)(\d+)([a-z]*)$/,l=(i||"").match(a),c=(s||"").match(a);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return(i||"").localeCompare(s||"")};this.filteredCards.sort("oldest"===this.sortBy?(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(i.set,s.set);return 0!==c?c:i.number-s.number}:(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(s.set,i.set);return 0!==c?c:s.number-i.number})}onFilterChange(){this.extractAvailablePacks(),this.applyFilters()}onSetChange(){this.extractAvailablePacks(),"all"===this.selectedSet&&(this.selectedPack="all",this.groupBy="none"),this.applyFilters()}onSeriesChange(){this.extractAvailableSets(),this.selectedSet="all",this.selectedPack="all",this.groupBy="none",this.extractAvailablePacks(),this.applyFilters()}onSearchChange(){this.applyFilters()}onGroupByChange(){this.applyFilters()}clearFilters(){this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.groupBy="none",this.extractAvailableSets(),this.extractAvailablePacks(),this.applyFilters()}toggleFilters(){this.filtersOpen=!this.filtersOpen,this.cdr.detectChanges(),this.filtersOpen&&setTimeout(()=>{const r=document.querySelector(".filters-panel");if(r){const o=r.getBoundingClientRect().top+window.scrollY-8;window.scrollTo({top:o,behavior:"smooth"})}})}isSpecialSet(r){const o=(r||"").toUpperCase();return o.startsWith("P-")||o.endsWith("-P")||"P-A"===o||o.startsWith("PROMO")||o.startsWith("A4B")}openTradeModal(){this.isViewingOther||(this.tradeFriendCode=this.currentUser?.friend_code||"",this.selectedTradeRarities=this.selectedTradeRarities.filter(r=>!this.isTradeRarityDisabled(r)),this.refreshAvailableTradeSets(),this.selectedLFsets=this.selectedLFsets&&0!==this.selectedLFsets.length&&this.selectedLFsets.length===this.availableTradeSets.length?this.selectedLFsets.filter(r=>this.availableTradeSets.includes(r)):[...this.availableTradeSets],this.selectedFTsets=this.selectedFTsets&&0!==this.selectedFTsets.length&&this.selectedFTsets.length===this.availableTradeSets.length?this.selectedFTsets.filter(r=>this.availableTradeSets.includes(r)):[...this.availableTradeSets],this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.showTradeModal=!0,this.cdr.detectChanges())}closeTradeModal(){this.showTradeModal=!1,this.cdr.detectChanges()}isTradeRaritySelected(r){return this.selectedTradeRarities.includes(r)}toggleTradeRarity(r){if(this.isTradeRarityDisabled(r))return;const o=this.selectedTradeRarities.indexOf(r);o>=0?this.selectedTradeRarities.splice(o,1):this.selectedTradeRarities.push(r),this.cdr.detectChanges()}isTradeRarityDisabled(r){return this.excludedTradeSymbols.has(r)}getAvailableTradeRaritySymbols(){return(this.availableRaritySymbols||[]).filter(r=>!this.excludedTradeSymbols.has(r.symbol))}clearTradeRarities(){this.selectedTradeRarities=[],this.cdr.detectChanges()}refreshAvailableTradeSets(){const o=(this.sets||[]).map(s=>s.code).filter(s=>!(!s||this.excludeSpecialPacks&&this.isSpecialSet(s))),i=/^([A-Z]+)(\d+)([a-z]*)$/;o.sort((s,a)=>{const l=s.match(i),c=a.match(i);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return s.localeCompare(a)}),this.availableTradeSets=o}onExcludeSpecialPacksToggle(){this.refreshAvailableTradeSets();const r=this.selectedLFsets&&this.selectedLFsets.length===this.availableTradeSets.length,o=this.selectedFTsets&&this.selectedFTsets.length===this.availableTradeSets.length;this.selectedLFsets=(this.selectedLFsets||[]).filter(i=>this.availableTradeSets.includes(i)),this.selectedFTsets=(this.selectedFTsets||[]).filter(i=>this.availableTradeSets.includes(i)),r&&(this.selectedLFsets=[...this.availableTradeSets]),o&&(this.selectedFTsets=[...this.availableTradeSets]),this.cdr.detectChanges()}isLFSetSelected(r){return this.selectedLFsets.includes(r)}toggleLFSet(r){const o=this.selectedLFsets.indexOf(r);o>=0?this.selectedLFsets.splice(o,1):this.selectedLFsets.push(r),this.cdr.detectChanges()}clearLFsets(){this.selectedLFsets=[],this.cdr.detectChanges()}selectAllLFsets(){this.selectedLFsets=[...this.availableTradeSets],this.cdr.detectChanges()}isFTSetSelected(r){return this.selectedFTsets.includes(r)}toggleFTSet(r){const o=this.selectedFTsets.indexOf(r);o>=0?this.selectedFTsets.splice(o,1):this.selectedFTsets.push(r),this.cdr.detectChanges()}clearFTsets(){this.selectedFTsets=[],this.cdr.detectChanges()}selectAllFTsets(){this.selectedFTsets=[...this.availableTradeSets],this.cdr.detectChanges()}openViewOthersModal(){this.isViewingOther||(this.showViewOthersModal=!0,this.cdr.detectChanges())}closeViewOthersModal(){this.showViewOthersModal=!1,this.cdr.detectChanges()}viewOtherCollectionFromModal(){var r=this;return w(function*(){r.openOtherCollectionInNewTab(),r.closeViewOthersModal()})()}openOtherCollectionInNewTab(){const r=(this.otherUsername||"").trim();if(!r)return void alert("Please enter a username");const o=this.router.createUrlTree(["/collection"],{queryParams:{otherUser:r}}),i=this.router.serializeUrl(o),a=(document.querySelector("base")?.getAttribute("href")||"/").trim();let l;/^https?:\/\//i.test(a),l=a.replace(/\/$/,"")+i,window.open(l,"_blank","noopener")}onDocumentClickCloseTradeDropdowns(r){if(!this.showTradeModal)return;const o=r.target,i=document.getElementById("lf-set-multiselect"),s=document.getElementById("ft-set-multiselect"),a=!!(i&&o&&i.contains(o)),l=!!(s&&o&&s.contains(o));!a&&this.lfSetDropdownOpen&&(this.lfSetDropdownOpen=!1,this.cdr.detectChanges()),!l&&this.ftSetDropdownOpen&&(this.ftSetDropdownOpen=!1,this.cdr.detectChanges())}generateAndCopyTradeText(){var r=this;return w(function*(){try{const o=r.generateTradeText();yield navigator.clipboard.writeText(o)}catch(o){console.error("Failed to copy to clipboard:",o),alert("Failed to copy to clipboard. Please try again.")}})()}generateTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],s=this.cards.filter(_=>{if(this.excludeSpecialPacks&&this.isSpecialSet(_.set))return!1;const b=this.getCardRarityCode(_),x=b?this.rarityService.getSymbol(b):"";return!(x&&!o.includes(x)||this.selectedLFsets.length>0&&!this.selectedLFsets.includes(_.set))&&0===this.getOwnedCount(_)}).reduce((_,b)=>((_[b.set]||=[]).push(b),_),{});let a="";if("details"===this.outputFormat)return this.generateDetailsTradeText();const l=_=>{const b=_.map(x=>x.label?.eng||"");return 0===b.length?"":1===b.length?b[0]:2===b.length?`${b[0]} & ${b[1]}`:b.join(", ")};a+="LF:\n";const c=Object.entries(s).filter(([,_])=>_.length>0).sort((_,b)=>this.compareSetCodesAsc(_[0],b[0]));for(const[_,b]of c){const x=this.getSetShortName(_);b.sort((R,F)=>R.number-F.number||R.label.eng.localeCompare(F.label.eng));const D=l(b);D&&(a+=`[${x}] ${D}\n`)}a+="\nFT:\n";const d=this.cards.filter(_=>{if(this.excludeSpecialPacks&&this.isSpecialSet(_.set))return!1;const b=this.getCardRarityCode(_),x=b?this.rarityService.getSymbol(b):"";return!(x&&!o.includes(x)||x&&this.excludedTradeSymbols.has(x)||this.selectedFTsets.length>0&&!this.selectedFTsets.includes(_.set))&&this.getOwnedCount(_)>=this.tradeQuantityMin}).reduce((_,b)=>((_[b.set]||=[]).push(b),_),{}),h=Object.entries(d).filter(([,_])=>_.length>0).sort((_,b)=>this.compareSetCodesAsc(_[0],b[0]));for(const[_,b]of h){const x=this.getSetShortName(_);b.sort((R,F)=>R.number-F.number||R.label.eng.localeCompare(F.label.eng));const D=l(b);D&&(a+=`[${x}] ${D}\n`)}const f=(this.tradeTemplateText||"").trim(),p=(this.tradeFriendCode||"").trim(),y=(this.currentUser?.username||"").trim();return a+="\n=============================================================================",f&&(a+=`\n${f}\n`),(p||y)&&(y&&(a+=`\nIGN: ${y}`),p&&(a+=`\nFriend code: ${p}`)),a.trim()}compareSetCodesAsc(r,o){const i=/^([A-Z]+)(\d+)([a-z]*)$/,s=(r||"").match(i),a=(o||"").match(i);if(s&&a){if(s[1]!==a[1])return s[1].localeCompare(a[1]);const l=parseInt(s[2],10),c=parseInt(a[2],10);return l!==c?l-c:(s[3]||"").localeCompare(a[3]||"")}return(r||"").localeCompare(o||"")}generateDetailsTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],i=this.cards.filter(d=>{if(this.excludeSpecialPacks&&this.isSpecialSet(d.set)||this.selectedLFsets.length>0&&!this.selectedLFsets.includes(d.set))return!1;const h=this.getCardRarityCode(d),f=h?this.rarityService.getSymbol(h):"";return!(f&&!o.includes(f))&&0===this.getOwnedCount(d)}),s={};for(const d of i){const h=d.set,f=this.getCardRarityCode(d),p=f?this.rarityService.getSymbol(f):"Unknown";s[h]||(s[h]={}),s[h][p]||(s[h][p]=[]),s[h][p].push(d)}const a=d=>{const f=["\u25ca\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca","\u25ca","\u2606\u2606","\u2606","\u2735\u2735","\u2735"].indexOf(d);return f>=0?f:999},l=[],c=Object.keys(s).sort((d,h)=>this.compareSetCodesAsc(d,h)),u=(d,h)=>`${(d||h).toLowerCase().replace(/\s+/g,"")}(${h.toLowerCase()}):`;for(const d of c){const h=this.getSetShortName(d),f=s[d],p=Object.keys(f).sort((y,_)=>a(y)-a(_));for(const y of p){const _=u(h,d);l.push(_);const b=f[y].sort((x,D)=>x.number-D.number||x.label.eng.localeCompare(D.label.eng));for(const x of b)l.push(`${y} ${x.set}-${x.number} - ${x.label.eng}`);l.push("")}}return l.join("\n").trim()}loadOwnedCards(){var r=this;return w(function*(){r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}loadOwnedCardsForUser(r,o){var i=this;return w(function*(){i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage=o?`Loading ${o}'s collection...`:"Starting sync...",i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage="Starting sync...";try{const s=yield i.supabaseService.syncUserCollection(r,a=>{i.syncProgress=a,i.syncMessage=`Syncing cards... ${a} loaded`,i.cdr.detectChanges()});i.ownedCards=s,i.calculateStatistics(),i.syncMessage=`Sync completed! ${Object.keys(s).length} cards loaded`,i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},1500)}catch(s){console.error("Error loading owned cards:",s),i.syncMessage="Sync failed, using local data...";const a=localStorage.getItem("ownedPokemonCards");a&&(i.ownedCards=JSON.parse(a),i.calculateStatistics()),i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},2e3)}finally{i.loadingOwnedCards=!1}})()}saveOwnedCards(){var r=this;return w(function*(){localStorage.setItem("ownedPokemonCards",JSON.stringify(r.ownedCards)),r.calculateStatistics()})()}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}increaseOwned(r){var o=this;return w(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r),a=s+1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}decreaseOwned(r){var o=this;return w(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r);if(0===s)return;const a=s-1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}startEditingCount(r){this.isViewingOther||(this.editingCardId=this.getCardId(r),this.editingCountValue=this.getOwnedCount(r),this.cdr.detectChanges(),this.focusEditingInput())}cancelEditingCount(){this.editingCardId=null,this.editingCountValue=0,this.cdr.detectChanges()}commitCount(r){var o=this;return w(function*(){if(o.isViewingOther)return void o.cancelEditingCount();if(!o.currentUser)return;const i=o.getCardId(r);if(o.editingCardId!==i)return;const s=Math.max(0,Math.floor(Number(o.editingCountValue)||0)),a=o.getOwnedCount(r);s!==a?(o.updateLocalQuantity(i,s),yield o.persistQuantity(i,s,a),o.cancelEditingCount()):o.cancelEditingCount()})()}onCountInputKeydown(r,o){if("Tab"!==r.key)return;r.preventDefault();const i=this.getFlatOrderedCards(),s=this.getCardId(o),a=i.findIndex(c=>this.getCardId(c)===s);if(-1===a)return;const l=r.shiftKey?a-1:a+1;this.commitCount(o).then(()=>{const c=i[l];c&&this.startEditingCount(c)})}focusEditingInput(){const r=this.editingCardId;r&&setTimeout(()=>{const o=document.querySelector(`.card-item[data-cardid="${r}"] .count-input`);o&&(o.focus(),o.select())})}getFlatOrderedCards(){const r=this.getGroupedCards();return this.lastFlatOrder=r.flatMap(o=>o.cards),this.lastFlatOrder}updateLocalQuantity(r,o){o<=0?delete this.ownedCards[r]:this.ownedCards[r]=o,this.saveOwnedCards(),this.cdr.detectChanges()}persistQuantity(r,o,i){var s=this;return w(function*(){if(s.currentUser)try{yield s.supabaseService.updateCardQuantity(s.currentUser.id,r,o)}catch(a){console.error("Error updating card quantity in database:",a),i<=0?delete s.ownedCards[r]:s.ownedCards[r]=i,s.saveOwnedCards(),s.cdr.detectChanges()}})()}calculateStatistics(){this.totalCards=this.cards.length,this.ownedCount=Object.values(this.ownedCards).reduce((r,o)=>r+o,0),this.uniqueOwned=Object.keys(this.ownedCards).length,this.completionPercentage=this.totalCards>0?Math.round(this.uniqueOwned/this.totalCards*100):0}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.name:r}getSetShortName(r){const o=this.sets.find(i=>i.code===r);return o?o.shortName:r}getFullRarityName(r){return this.rarityService.getStandardizedDisplayName(r)}getRarityClass(r){return{Common:"rarity-common",Uncommon:"rarity-uncommon",Rare:"rarity-rare","Double Rare":"rarity-double-rare","Art Rare":"rarity-art-rare","Super Rare":"rarity-super-rare","Special Art Rare":"rarity-special-art-rare","Immersive Rare":"rarity-immersive-rare","Crown Rare":"rarity-crown-rare",Shiny:"rarity-shiny","Shiny Super Rare":"rarity-shiny-super-rare"}[r]||"rarity-default"}toggleViewMode(){this.viewMode="grid"===this.viewMode?"list":"grid"}exportCollection(){if(this.isViewingOther)return void alert("Export is disabled when viewing another user's collection");let r="\ufeff";r+="Id,CardName,NumberOwn,Expansion,Pack,Rarity\n",this.cards.forEach(s=>{const a=this.getCardId(s),l=this.getOwnedCount(s),c=this.getCardRarityCode(s),u=c?this.rarityService.getSymbol(c):"Unknown",d=s.packs&&s.packs.length>0?s.packs[0]:"",h=s.label.eng.replace(/,/g,'""');r+=`${a},"${h}",${l},${s.set},"${d}",${u}\n`});const o=new Blob([r],{type:"text/csv;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="pokemon-tcg-collection.csv",i.click()}importCollection(r){var o=this;if(this.isViewingOther)return void alert("Import is disabled when viewing another user's collection");const i=r.target.files[0];if(i){const s=new FileReader;s.onload=function(){var a=w(function*(l){try{const d=(l.target?.result||"").split(/\r?\n/).filter(F=>F.trim().length>0);if(0===d.length)return void alert("CSV file appears to be empty.");const h=new Map;o.cards.forEach(F=>{const Y=o.getCardId(F);h.set(o.normalizeId(Y),Y)});const f=o.parseCSVLine(d[0]),p=/(id|card|name|expansion|set|rarity|qty|quantity|owned|count|number|no)/i,y=f.some(F=>p.test(F)),_=y?1:0,b=y?o.buildHeaderMap(f):null;let x=0,D=0,R=0;for(let F=_;F<d.length;F++){const Y=d[F];try{const Zt=o.parseCSVLine(Y),{cardId:Pe,quantity:ft}=o.resolveCsvRow(Zt,b);if(!Pe){D++;continue}const Zn=Math.max(0,Math.floor(Number(ft))||0),bn=h.get(o.normalizeId(Pe))||null;bn?(Zn>0?o.ownedCards[bn]=Zn:delete o.ownedCards[bn],x++):(console.log(Pe),R++)}catch(Zt){console.error(`Error parsing line: ${Y}`,Zt),D++}}if(o.saveOwnedCards(),o.currentUser)try{const F=yield o.supabaseService.bulkReplaceUserCollection(o.currentUser.id,o.ownedCards);if(F.success){let Y=`Import completed!\n${x} cards updated`;Y+="\nCollection synced to database successfully",R>0&&(Y+=`\n${R} rows referenced unknown cards (skipped)`),D>0&&(Y+=`\n${D} parse errors encountered`),yield o.loadOwnedCards(),alert(Y)}else{console.error("\u274c Failed to sync collection to database:",F.error);let Y=`Import completed!\n${x} cards updated locally`;Y+=`\nDatabase sync failed: ${F.error}`,R>0&&(Y+=`\n${R} unknown cards (skipped)`),D>0&&(Y+=`\n${D} parse errors encountered`),alert(Y)}}catch(F){console.error("\u274c Error during bulk sync:",F);let Y=`Import completed!\n${x} cards updated locally`;Y+="\nDatabase sync failed - please try again",R>0&&(Y+=`\n${R} unknown cards (skipped)`),D>0&&(Y+=`\n${D} parse errors encountered`),alert(Y)}else{let F=`Import completed!\n${x} cards updated`;R>0&&(F+=`\n${R} unknown cards (skipped)`),D>0&&(F+=`\n${D} parse errors encountered`),alert(F)}}catch(c){console.error("Failed to import collection:",c),alert("Failed to import collection. Please check the CSV file format.")}});return function(l){return a.apply(this,arguments)}}(),s.readAsText(i)}}viewOtherCollection(){var r=this;return w(function*(){const o=(r.otherUsername||"").trim();if(!o)return void alert("Please enter a username");if(r.currentUser&&o===r.currentUser.username)return void r.backToMyCollection();const i=yield r.supabaseService.getProfileByUsername(o);i?(r.isViewingOther=!0,r.viewingUser=i,yield r.loadOwnedCardsForUser(i.id,i.username)):alert(`User '${o}' not found`)})()}backToMyCollection(){var r=this;return w(function*(){r.isViewingOther=!1,r.viewingUser=null,r.otherUsername="",r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}buildHeaderMap(r){const o={};return r.forEach((i,s)=>{const a=i.trim().toLowerCase();o[a]=s}),o}resolveCsvRow(r,o){const i=c=>{if(o)for(const u of c){const d=o[u];if(void 0!==d&&d>=0&&d<r.length){const h=(r[d]||"").trim();if(h)return h}}},s=i(["numberown","quantity","qty","owned","count","number own","number_owned"]);let a=0;void 0!==s?a=Math.max(0,Math.floor(Number(s)||0)):r.length>=3&&(a=Math.max(0,Math.floor(Number(r[2])||0)));let l=i(["id","cardid","card id"]);if(!l){let c=i(["set","expansion"]),u=i(["number","no","card number","card no","card#"]);if(!c&&r.length>=4&&(c=(r[3]||"").trim()),!u&&r.length>=1){const d=(r[1]||"").trim();/^\d+/.test(d)&&(u=d)}if(c&&u){const d=this.mapToSetCode(c),h=this.extractLeadingInt(u);d&&null!==h&&(l=`${d}-${h}`)}}if(!l&&r.length>0){const c=(r[0]||"").trim();c&&(l=c)}return{cardId:l||null,quantity:a}}extractLeadingInt(r){const o=(r||"").match(/\d+/);return o?parseInt(o[0],10):null}mapToSetCode(r){const i=(r||"").trim().toUpperCase();if("PROMO-A"===i)return"P-A";const s=this.sets.find(l=>(l.code||"").toUpperCase()===i);if(s)return s.code;const a=this.sets.find(l=>(l.name||"").toUpperCase()===i);return a?a.code:null}normalizeId(r){let o=(r||"").trim().toUpperCase();return o=o.replace(/^PROMO-A(?=-)/,"P-A"),o}parseCSVLine(r){const o=[];let i="",s=!1;for(let a=0;a<r.length;a++){const l=r[a];'"'===l?s=!s:","!==l||s?i+=l:(o.push(i),i="")}return o.push(i),o}getCardImageUrl(r){return this.imageService.getCardImageUrl(r)}getCardDisplayName(r){return`${r.set}-${r.number} \u2013 ${r.label.eng}`}onImageError(r,o){console.error("\u274c Image failed to load:",o.imageName),r.target.src=this.imageService.getPlaceholderImageUrl()}getGroupedCards(){if("all"!==this.selectedSet&&"none"!==this.groupBy)return this.getGroupedCardsByCategory();const r={};this.filteredCards.forEach(a=>{const l=a.set;r[l]||(r[l]=[]),r[l].push(a)});const o=(a,l)=>{const c=a.match(/^([A-Z]+)(\d+)([a-z]*)$/),u=l.match(/^([A-Z]+)(\d+)([a-z]*)$/);if(c&&u){if(c[1]!==u[1])return c[1].localeCompare(u[1]);const d=parseInt(c[2],10),h=parseInt(u[2],10);return d!==h?d-h:(c[3]||"").localeCompare(u[3]||"")}return a.localeCompare(l)},s=(a,l)=>a.number!==l.number?a.number-l.number:a.label.eng.localeCompare(l.label.eng);return Object.keys(r).sort((a,l)=>{const c=h=>this.isSpecialSet(h),u=c(a),d=c(l);return u&&!d?1:!u&&d?-1:"latest"===this.sortBy?o(l,a):o(a,l)}).map(a=>({groupTitle:a,cards:r[a].sort(s)}))}getGroupedCardsByCategory(){const r={};this.filteredCards.forEach(s=>{let a;switch(this.groupBy){case"rarity":const l=this.getCardRarityCode(s);a=`${l?this.rarityService.getSymbol(l):"Unknown"} ${l?this.rarityService.getDisplayName(l):"Unknown"}`;break;case"pack":a=s.packs&&s.packs.length>0?s.packs[0]:"No Pack";break;case"type":a=s.types&&s.types.length>0?s.types[0]:"No Type";break;default:a="All Cards"}r[a]||(r[a]=[]),r[a].push(s)});const o=Object.keys(r).sort((s,a)=>{if("rarity"===this.groupBy){const l=c=>{const u=c.split(" ")[0];return this.rarityService.getRarityOrder(u)||999};return l(s)-l(a)}return s.localeCompare(a)}),i=(s,a)=>s.number!==a.number?s.number-a.number:s.label.eng.localeCompare(a.label.eng);return o.map(s=>({groupTitle:s,cards:r[s].sort(i)}))}getGroupDisplayName(r,o){const i=this.getSetName(r);return i&&i!==r?`${r} - ${i}`:`Set ${r}`}getGroupCollectedCount(r){return`${r.filter(s=>this.getOwnedCount(s)>0).length}/${r.length}`}setOwnership(r){this.ownershipFilter!==r&&(this.ownershipFilter=r,this.applyFilters(),this.cdr.detectChanges())}isRaritySelected(r){return this.selectedRarities.includes(r)}toggleRarity(r){const o=this.selectedRarities.indexOf(r);o>=0?this.selectedRarities.splice(o,1):this.selectedRarities.push(r),this.applyFilters(),this.cdr.detectChanges()}clearRarity(){this.selectedRarities.length>0&&(this.selectedRarities=[],this.applyFilters(),this.cdr.detectChanges())}isTypeSelected(r){return this.selectedTypes.includes(r)}toggleType(r){const o=this.selectedTypes.indexOf(r);o>=0?this.selectedTypes.splice(o,1):this.selectedTypes.push(r),this.applyFilters(),this.cdr.detectChanges()}clearTypes(){this.selectedTypes.length>0&&(this.selectedTypes=[],this.applyFilters(),this.cdr.detectChanges())}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){const r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);window.scrollTo({top:r,behavior:"smooth"})}getSetElements(){return Array.from(document.querySelectorAll(".cards-container .card-group"))}getCurrentSetIndex(r=80){const o=window.scrollY||window.pageYOffset||0,i=this.getSetElements();let s=-1;for(let a=0;a<i.length&&i[a].getBoundingClientRect().top+window.scrollY-r<=o;a++)s=a;return s}scrollToNextSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),i=Math.min(o+1,r.length-1);if(i>=0){const a=r[i].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}}scrollToPrevSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),a=r[Math.max(o-1,0)].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}ngOnDestroy(){this.selectedCardForModal&&(document.removeEventListener("keydown",this.handleModalKeydown),document.body.style.overflow="auto")}};let n=t;return t.\u0275fac=function(o){return new(o||t)(A(dp),A(hp),A($V),A(es),A(Ct),A(io),A(Si),A(WD))},t.\u0275cmp=Br({type:t,selectors:[["app-card-collection"]],hostBindings:function(o,i){1&o&&V("click",function(a){return i.onDocumentClickCloseTradeDropdowns(a)},0,sy)},decls:96,vars:42,consts:[[1,"collection-container"],[1,"collection-actions"],[1,"actions-left"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","import-btn"],["type","file","accept",".csv","hidden","",3,"change"],[1,"btn","btn-secondary",3,"disabled","click"],["class","view-other-banner","style","margin-bottom:12px; padding:10px 14px; border-radius:12px; background:rgba(46,204,113,0.12); border:1px solid rgba(46,204,113,0.35); display:flex; align-items:center; justify-content:space-between; gap:12px;",4,"ngIf"],["role","region","aria-label","Collection filters",1,"filters-panel"],[1,"filters-row"],["type","text","placeholder","Search cards\u2026","aria-label","Search cards",1,"filter-input",3,"ngModel","ngModelChange","input"],[1,"filters-row","wrap","sets-row"],[1,"sort-group"],["for","series-select"],["id","series-select","aria-label","Select series",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["for","set-select"],["id","set-select","aria-label","Select set",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["for","pack-select"],["id","pack-select","aria-label","Select pack",1,"filter-select","compact",3,"disabled","ngModel","ngModelChange","change"],[1,"filters-row","rarity-row"],["for","rarity-chips",1,"filter-label"],["id","rarity-chips","aria-label","Rarity filter",1,"segmented","multi","chips-scroll"],["type","button","title","All rarities",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","types-row"],["for","types-chips",1,"filter-label"],["id","types-chips","aria-label","Types filter",1,"segmented","multi","chips-scroll"],["type","button","title","All types",1,"chip",3,"click"],["type","button","class","chip type-chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","wrap"],["for","sort-select"],["id","sort-select","aria-label","Sort order",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","latest"],["value","oldest"],["class","sort-group",4,"ngIf"],["role","tablist","aria-label","Ownership filter",1,"segmented","ownership"],["type","button",3,"click"],[1,"row-spacer"],["type","button","aria-label","Reset filters",1,"btn","btn-outline","reset-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","sync-progress",4,"ngIf"],["class","cards-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["aria-label","Collection navigation controls",1,"fab-stack"],["type","button","title","Top",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-up"],["type","button","title","Previous set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-up"],["type","button","title","Next set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-down"],["type","button","title","Bottom",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-down"],["aria-label","Filter controls",1,"fab-stack-left"],["type","button","title","Filters",1,"fab","mobile-only",3,"click"],["aria-hidden","true",1,"fa","fa-filter"],["type","button","title","Copy For Trade",1,"fab","mobile-only",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-exchange-alt"],["type","button","title","View Others Collection",1,"fab","mobile-only",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-user"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"view-other-banner",2,"margin-bottom","12px","padding","10px 14px","border-radius","12px","background","rgba(46,204,113,0.12)","border","1px solid rgba(46,204,113,0.35)","display","flex","align-items","center","justify-content","space-between","gap","12px"],[2,"background-color","transparent"],[1,"btn","btn-outline",3,"click"],[3,"value"],["type","button",1,"chip",3,"title","click"],["type","button",1,"chip","type-chip",3,"title","click"],[4,"ngIf","ngIfElse"],["normalType",""],[1,"trainer-label",3,"ngClass"],[1,"type-icon",3,"src","alt"],["for","group-select"],["id","group-select","aria-label","Group by",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","none"],["value","rarity"],["value","pack"],["value","type"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"btn","btn-primary",3,"click"],[1,"sync-progress"],[1,"sync-message"],[1,"sync-icon"],[1,"sync-text"],[1,"sync-title"],["class","sync-count",4,"ngIf"],[1,"sync-count"],[1,"cards-container"],["class","card-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-group"],[1,"group-header"],[1,"group-title"],[1,"group-stats"],["class","group-count","style","margin-left:10px; color:#b9eaff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffe066;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#f7a6ff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffd700;",4,"ngIf"],[1,"group-count"],[1,"cards-grid"],["class","card-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group-count",2,"margin-left","10px","color","#b9eaff"],[1,"group-count",2,"margin-left","10px","color","#ffe066"],[1,"group-count",2,"margin-left","10px","color","#f7a6ff"],[1,"group-count",2,"margin-left","10px","color","#ffd700"],[1,"card-item"],[1,"card-image"],["loading","lazy",1,"pokemon-card-img",2,"cursor","pointer",3,"src","alt","error","click"],[1,"card-info"],[1,"card-title"],[1,"ownership-controls"],[1,"count-btn","decrease",3,"disabled","click"],["displayCount",""],[1,"count-btn","increase",3,"disabled","click"],["type","number","min","0",1,"count-input",3,"ngModel","ngModelChange","keydown.enter","keydown","keydown.escape","blur"],["type","button",1,"count-display",3,"disabled","click"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-backdrop",3,"click"],[1,"modal-content","view-others-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"view-others-config"],[1,"config-section"],["for","other-username-input",1,"config-label"],["type","text","id","other-username-input","placeholder","Enter username to view their collection\u2026",1,"config-input-wide",3,"ngModel","ngModelChange","keydown.enter"],[1,"config-hint"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],[1,"modal-content","trade-modal",3,"click"],[1,"trade-config"],["for","exclude-special-toggle",1,"config-label"],["type","checkbox","id","exclude-special-toggle",3,"ngModel","ngModelChange"],["for","lf-set-multiselect",1,"config-label"],["id","lf-set-multiselect",2,"position","relative","display","inline-block","width","100%"],["type","button",2,"width","100%","background","rgba(255,255,255,0.08)","border","1px solid rgba(255,255,255,0.18)","color","var(--text)","padding","6px 10px","border-radius","8px","display","flex","align-items","center","justify-content","space-between","cursor","pointer","font-size","14px",3,"click"],[4,"ngIf"],[1,"fa",3,"ngClass"],["style","position:absolute; left:0; right:0; top: calc(100% + 4px); background: #1e2533; border:1px solid rgba(255,255,255,0.18); border-radius:10px; padding:8px 8px 10px; box-shadow:0 6px 16px rgba(0,0,0,0.45); z-index:50; max-height:260px; overflow-y:auto;",4,"ngIf"],["for","ft-set-multiselect",1,"config-label"],["id","ft-set-multiselect",2,"position","relative","display","inline-block","width","100%"],[1,"config-label"],[1,"rarity-chips"],["type","button",1,"chip",3,"click"],["role","tablist","aria-label","Output format",1,"segmented"],["type","button","role","tab",3,"click"],["for","trade-qty-min",1,"config-label"],["type","number","id","trade-qty-min","min","1","max","10",1,"config-input",3,"ngModel","ngModelChange"],["for","friend-code-input",1,"config-label"],["type","text","id","friend-code-input","placeholder","Enter your friend code to include in the copy\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],["for","trade-template-text",1,"config-label"],["id","trade-template-text","rows","2","placeholder","Add an extra note to include in the copied text\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],[2,"position","absolute","left","0","right","0","top","calc(100% + 4px)","background","#1e2533","border","1px solid rgba(255,255,255,0.18)","border-radius","10px","padding","8px 8px 10px","box-shadow","0 6px 16px rgba(0,0,0,0.45)","z-index","50","max-height","260px","overflow-y","auto"],[2,"display","flex","gap","8px","margin-bottom","6px"],["type","button",1,"btn","btn-outline",2,"padding","4px 8px","font-size","11px","line-height","1",3,"click"],["role","listbox",2,"display","flex","flex-direction","column","gap","2px"],["type","button","style","border:none; text-align:left; padding:4px 6px; border-radius:6px; font-size:12px; cursor:pointer; display:flex; align-items:center; gap:6px;",3,"ngStyle","click",4,"ngFor","ngForOf"],["style","font-size:12px; opacity:0.7; padding:4px;",4,"ngIf"],["type","button",2,"border","none","text-align","left","padding","4px 6px","border-radius","6px","font-size","12px","cursor","pointer","display","flex","align-items","center","gap","6px",3,"ngStyle","click"],[2,"width","16px","display","inline-block"],[2,"font-size","12px","opacity","0.7","padding","4px"],[1,"modal-overlay",3,"click"],[1,"modal-content","card-modal",3,"click"],["aria-label","Close modal",1,"modal-close",3,"click"],[1,"card-modal-image",2,"display","flex","align-items","center","justify-content","center","gap","16px"],["aria-label","Previous card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"modal-card-image",3,"src","alt"],["aria-label","Next card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"card-modal-info"],["class","modal-pack-badges",4,"ngIf"],[1,"modal-pack-badges"],["class","pack-badge",4,"ngFor","ngForOf"],[1,"pack-badge"]],template:function(o,i){1&o&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),V("click",function(){return i.exportCollection()}),v(4," \u{1f4e4} Export Collection "),g(),m(5,"label",4),v(6," \u{1f4e5} Import Collection "),m(7,"input",5),V("change",function(a){return i.importCollection(a)}),g()(),m(8,"button",6),V("click",function(){return i.openTradeModal()}),v(9," \u{1f4cb} Copy For Trade "),g(),m(10,"button",6),V("click",function(){return i.openViewOthersModal()}),v(11," \u{1f464} View Others Collection "),g()()(),z(12,UV,8,1,"div",7),m(13,"div",8)(14,"div",9)(15,"input",10),V("ngModelChange",function(a){return i.searchTerm=a})("input",function(){return i.onSearchChange()}),g()(),m(16,"div",11)(17,"div",12)(18,"label",13),v(19,"Series"),g(),m(20,"select",14),V("ngModelChange",function(a){return i.selectedSeries=a})("change",function(){return i.onSeriesChange()}),m(21,"option",15),v(22,"All Series"),g(),z(23,BV,2,2,"option",16),g()(),m(24,"div",12)(25,"label",17),v(26),g(),m(27,"select",18),V("ngModelChange",function(a){return i.selectedSet=a})("change",function(){return i.onSetChange()}),m(28,"option",15),v(29),g(),z(30,HV,2,2,"option",16),g()(),m(31,"div",12)(32,"label",19),v(33),g(),m(34,"select",20),V("ngModelChange",function(a){return i.selectedPack=a})("change",function(){return i.applyFilters()}),m(35,"option",15),v(36),g(),z(37,zV,2,2,"option",16),g()()(),m(38,"div",21)(39,"label",22),v(40,"Rarity"),g(),m(41,"div",23)(42,"button",24),V("click",function(){return i.clearRarity()}),v(43,"ALL"),g(),z(44,GV,2,4,"button",25),g()(),m(45,"div",26)(46,"label",27),v(47,"Types"),g(),m(48,"div",28)(49,"button",29),V("click",function(){return i.clearTypes()}),v(50," ALL "),g(),z(51,YV,4,6,"button",30),g()(),m(52,"div",31)(53,"div",12)(54,"label",32),v(55,"Sort By"),g(),m(56,"select",33),V("ngModelChange",function(a){return i.sortBy=a})("change",function(){return i.applyFilters()}),m(57,"option",34),v(58,"Latest Set"),g(),m(59,"option",35),v(60,"Oldest Set"),g()()(),z(61,QV,12,1,"div",36),m(62,"div",37)(63,"button",38),V("click",function(){return i.setOwnership("all")}),v(64,"ALL"),g(),m(65,"button",38),V("click",function(){return i.setOwnership("missing")}),v(66,"MISSING"),g(),m(67,"button",38),V("click",function(){return i.setOwnership("owned")}),v(68,"OWNED"),g()(),Be(69,"div",39),m(70,"button",40),V("click",function(){return i.clearFilters()}),v(71,"Reset"),g()()(),z(72,ZV,4,0,"div",41),z(73,XV,5,1,"div",42),z(74,t$,8,2,"div",43),z(75,u$,2,2,"div",44),z(76,d$,9,0,"div",45),m(77,"div",46)(78,"button",47),V("click",function(){return i.scrollToTop()}),Be(79,"i",48),g(),m(80,"button",49),V("click",function(){return i.scrollToPrevSet()}),Be(81,"i",50),g(),m(82,"button",51),V("click",function(){return i.scrollToNextSet()}),Be(83,"i",52),g(),m(84,"button",53),V("click",function(){return i.scrollToBottom()}),Be(85,"i",54),g()(),m(86,"div",55)(87,"button",56),V("click",function(){return i.toggleFilters()}),Be(88,"i",57),g(),m(89,"button",58),V("click",function(){return i.openTradeModal()}),Be(90,"i",59),g(),m(91,"button",60),V("click",function(){return i.openViewOthersModal()}),Be(92,"i",61),g()(),z(93,h$,20,2,"div",62),z(94,O$,67,29,"div",62),z(95,A$,14,4,"div",63),g()),2&o&&(C(8),P("disabled",i.isViewingOther),C(2),P("disabled",i.isViewingOther),C(2),P("ngIf",i.isViewingOther),C(1),et("collapsed",!i.filtersOpen),C(2),P("ngModel",i.searchTerm),C(5),P("ngModel",i.selectedSeries),C(3),P("ngForOf",i.availableSeries),C(3),xe("Set ","all"!==i.selectedSeries?"(in "+i.selectedSeries+")":"",""),C(1),P("ngModel",i.selectedSet),C(2),He("all"!==i.selectedSeries?"All Sets in "+i.selectedSeries:"All Sets"),C(1),P("ngForOf",i.availableSets),C(3),xe("Pack ","all"!==i.selectedSet?"(in "+i.getSetName(i.selectedSet)+")":"(select a set first)",""),C(1),P("disabled","all"===i.selectedSet)("ngModel",i.selectedPack),C(2),He("all"!==i.selectedSet?"All Packs in "+i.getSetName(i.selectedSet):"Select a set first"),C(1),P("ngForOf",i.availablePacks),C(5),et("active",0===i.selectedRarities.length),C(2),P("ngForOf",i.availableRaritySymbols),C(5),et("active",0===i.selectedTypes.length),C(2),P("ngForOf",i.availableTypes),C(5),P("ngModel",i.sortBy),C(5),P("ngIf","all"!==i.selectedSet),C(2),et("active","all"===i.ownershipFilter),C(2),et("active","missing"===i.ownershipFilter),C(2),et("active","owned"===i.ownershipFilter),C(5),P("ngIf",i.loading),C(1),P("ngIf",i.error),C(1),P("ngIf",i.syncingCards),C(1),P("ngIf",!i.loading&&!i.error),C(1),P("ngIf",!i.loading&&!i.error&&0===i.getGroupedCards().length),C(11),Tt("aria-pressed",i.filtersOpen),C(2),P("disabled",i.isViewingOther),C(2),P("disabled",i.isViewingOther),C(2),P("ngIf",i.showViewOthersModal),C(1),P("ngIf",i.showTradeModal),C(1),P("ngIf",i.selectedCardForModal))},dependencies:[Hh,ec,xi,ib,Tf,Af,Ti,Sf,ta,aa,na,kf,Pf,Pi],styles:['.group-header[_ngcontent-%COMP%]{flex-wrap:wrap}.group-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.group-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1rem;padding:2px 8px;border-radius:6px;background:rgba(255,255,255,.04);margin-bottom:2px}@media (max-width: 600px){.group-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.group-stats[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:6px;font-size:.95rem;margin-top:4px}.group-count[_ngcontent-%COMP%]{font-size:.95rem;padding:2px 6px;margin-bottom:2px}}.chip.active[_ngcontent-%COMP%]   .trainer-item[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-tool[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-supporter[_ngcontent-%COMP%]{color:#fff!important}.trainer-item[_ngcontent-%COMP%], .trainer-tool[_ngcontent-%COMP%], .trainer-supporter[_ngcontent-%COMP%]{font-family:Roboto Condensed,Arial Narrow,sans-serif;font-weight:1000;font-style:italic;font-size:13px;text-transform:uppercase;letter-spacing:1px;-webkit-font-smoothing:antialiased;display:inline-block;margin:0 2px;-webkit-user-select:none;user-select:none;transition:filter .15s ease-in-out;filter:brightness(1.12)}.trainer-item[_ngcontent-%COMP%]{color:#2596be}.trainer-tool[_ngcontent-%COMP%]{color:#78619a}.trainer-supporter[_ngcontent-%COMP%]{color:#dc6c40}.collection-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:transparent;min-height:100vh;color:#fff}.sync-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,#1a4d3a 0%,#0f2d1f 100%);border:1px solid #28a745;border-radius:10px;padding:16px 22px;margin-bottom:20px;box-shadow:0 4px 18px #28a74540}.sync-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.sync-icon[_ngcontent-%COMP%]{font-size:22px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.sync-text[_ngcontent-%COMP%]{flex:1}.sync-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#28a745;margin-bottom:2px}.sync-count[_ngcontent-%COMP%]{font-size:12px;color:#9fb8aa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.collection-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:30px;flex-wrap:wrap}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.view-other-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.view-other-controls[_ngcontent-%COMP%]   .search-input.compact[_ngcontent-%COMP%]{width:auto;max-width:240px;min-width:200px;padding:8px 12px;border-radius:8px}@media (max-width: 768px){.collection-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{justify-content:space-between}}.import-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d;border:1px solid #404040}.filters-panel[_ngcontent-%COMP%]{border:1px solid #666;border-radius:10px;padding:14px;margin-bottom:20px;background-color:#12151c;background:#12151c;box-shadow:0 8px 18px #00000059}.filters-header[_ngcontent-%COMP%]{color:#ddd;font-weight:600;margin-bottom:10px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.filters-row.wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.rarity-row[_ngcontent-%COMP%]{align-items:flex-start;gap:10px}.filters-row.rarity-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filters-row.footer[_ngcontent-%COMP%]{justify-content:space-between}.filter-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.filter-select.compact[_ngcontent-%COMP%]{width:240px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.sort-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#cfcfcf;margin-right:8px}.segmented[_ngcontent-%COMP%]{display:inline-flex;background:#1b1e24;border:1px solid #4a4f5a;border-radius:6px;overflow:hidden}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;background:transparent;color:#cfd6e4;border:none;cursor:pointer}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-left:1px solid #4a4f5a}.segmented[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff}.segmented.multi[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;background:transparent;border:none;overflow-x:auto;padding:4px 2px 2px;-webkit-overflow-scrolling:touch}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#3a3f48;border-radius:4px}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{border:1px solid #3d4350;background:#171a20;color:#cfd6e4;border-radius:999px;padding:6px 10px;font-size:12px;line-height:1}.segmented.multi[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);border-color:#7056b1;color:#fff}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4b90ff;outline-offset:2px}.type-chip[_ngcontent-%COMP%]{padding:6px 8px!important;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.type-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:contain}.ownership[_ngcontent-%COMP%]{margin-left:4px}.row-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.reset-btn[_ngcontent-%COMP%]{white-space:nowrap}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;align-items:center;justify-content:center;padding:16px}.modal-content[_ngcontent-%COMP%]{width:min(520px,92vw);max-height:85vh;overflow:auto;background:#121317;border:1px solid #3e4654;border-radius:10px;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #2c3240}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#eaeaea}.modal-close[_ngcontent-%COMP%]{background:transparent;border:none;color:#aaa;font-size:18px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #2c3240}.trade-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.trade-config[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.config-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.config-label[_ngcontent-%COMP%]{font-weight:600;color:#ddd;font-size:14px}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #4a4f5a;border-radius:6px;background:#1b1e24;color:#cfd6e4;cursor:pointer;transition:all .2s ease}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.rarity-chips[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:var(--header-gradient);border-color:#6f79d9;color:#fff}.config-input[_ngcontent-%COMP%]{width:80px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-input-wide[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-hint[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:420px;margin:0 auto}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #444;border-radius:25px;background-color:#333;color:#fff;font-size:16px;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 10px #007bff4d}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ccc;letter-spacing:.5px}.filter-dependency[_ngcontent-%COMP%]{font-size:11px;color:#007bff;font-weight:400;text-transform:none;font-style:italic}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #444;border-radius:8px;background-color:#333;color:#fff;font-size:14px;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:hover{border-color:#555;background-color:#3a3a3a}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff33}.filter-select[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background-color:#2a2a2a;border-color:#333;color:#888}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.results-info[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:12px 20px;border-radius:8px;text-align:center;border:1px solid #333}.results-text[_ngcontent-%COMP%]{color:#ccc;font-size:14px;font-weight:500}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #333;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.cards-container[_ngcontent-%COMP%]{width:100%}.card-group[_ngcontent-%COMP%]{margin-bottom:40px}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:2px solid #333;flex-wrap:wrap;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin:0;text-shadow:1px 1px 2px rgba(0,0,0,.5);flex:1;min-width:280px;position:relative;line-height:1.3}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-shrink:0}.group-count[_ngcontent-%COMP%]{color:#ccc;font-size:14px;padding:4px 8px;background-color:#333;border-radius:4px;white-space:nowrap}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:18px}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;overflow:hidden;transition:transform .2s ease}.card-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2 / 3;overflow:hidden;padding:10px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.pokemon-card-img[_ngcontent-%COMP%]{width:90%;object-fit:cover;object-position:center;border-radius:10px;transition:transform .3s ease,opacity .3s ease;background-color:#222}.card-item[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{transform:scale(1.05)}.pokemon-card-img[_ngcontent-%COMP%]:not([src]), .pokemon-card-img[src=""][_ngcontent-%COMP%]{opacity:.5;background:linear-gradient(45deg,#333,#555,#333);background-size:200% 200%;animation:_ngcontent-%COMP%_loading-shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loading-shimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.card-item.no-quantity[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.9}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(0%) opacity(.8)}.card-item.no-quantity[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{color:#888}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]:hover   .count-display[_ngcontent-%COMP%]{color:#bbb}.card-info[_ngcontent-%COMP%]{padding:10px 0;text-align:center}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pack-badges[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.pack-badge[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff;padding:2px 6px;border-radius:10px;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.ownership-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.count-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #555;border-radius:4px;background-color:#444;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;transition:all .2s ease}.count-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#555;border-color:#666}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.count-btn.decrease[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;border-color:#dc3545}.count-btn.increase[_ngcontent-%COMP%]:hover{background-color:#28a745;border-color:#28a745}.count-display[_ngcontent-%COMP%]{min-width:32px;padding:4px 10px;border-radius:6px;border:1px dashed #666;background:rgba(51,51,51,.65);color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.count-display[_ngcontent-%COMP%]:hover, .count-display[_ngcontent-%COMP%]:focus-visible{border-color:#007bff;background:rgba(0,123,255,.2);outline:none}.count-input[_ngcontent-%COMP%]{width:56px;padding:4px 8px;border-radius:6px;border:1px solid #777;background:rgba(24,24,24,.95);color:#fff;font-size:14px;font-weight:600;text-align:center;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.count-input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 6px #007bff4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.pokemon-card-img.lazy-loading[_ngcontent-%COMP%]{opacity:.6;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.pokemon-card-img.lazy-loaded[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}.pokemon-card-img.lazy-error[_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 1200px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (max-width: 768px){.collection-container[_ngcontent-%COMP%]{padding:15px}.filters-panel[_ngcontent-%COMP%]{border-radius:10px;padding:12px}.filters-header[_ngcontent-%COMP%]{margin-bottom:8px}.filters-row[_ngcontent-%COMP%]{gap:10px}.filter-select.compact[_ngcontent-%COMP%]{width:100%}.filter-input[_ngcontent-%COMP%]{min-width:0}.rarity-row[_ngcontent-%COMP%], .types-row[_ngcontent-%COMP%]{flex-direction:column}.chips-scroll[_ngcontent-%COMP%]{width:100%}.ownership[_ngcontent-%COMP%]{width:100%;justify-content:space-between;display:flex}.collection-actions[_ngcontent-%COMP%]   .actions-left[_ngcontent-%COMP%], .filters-panel.collapsed[_ngcontent-%COMP%]{display:none}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}.ownership-controls[_ngcontent-%COMP%]{gap:8px}.filters-section[_ngcontent-%COMP%]{padding:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-box[_ngcontent-%COMP%]{max-width:100%}.group-header[_ngcontent-%COMP%]{padding:10px 0}.group-title[_ngcontent-%COMP%]{font-size:1.3rem;padding-left:24px}.group-title[_ngcontent-%COMP%]:before{font-size:1rem}}@media (max-width: 540px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.filters-row[_ngcontent-%COMP%]{margin-bottom:8px}.reset-btn[_ngcontent-%COMP%]{width:100%}.count-display[_ngcontent-%COMP%], .count-input[_ngcontent-%COMP%]{width:48px}.filters-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.filter-label[_ngcontent-%COMP%]{font-size:12px}.group-title[_ngcontent-%COMP%]{font-size:1.15rem}.group-title[_ngcontent-%COMP%]:before{font-size:.9rem}}.fab-stack[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:24px;display:flex;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}.fab[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:1px solid rgba(255,255,255,.18);background:var(--header-gradient);color:#fff;font-size:18px;cursor:pointer;box-shadow:0 10px 24px #070c1859;display:inline-flex;align-items:center;justify-content:center;transition:transform .14s ease,box-shadow .14s ease,border-color .14s ease,filter .14s ease}.fab[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 14px 28px #070c1873;filter:brightness(1.05)}.fab-stack-left[_ngcontent-%COMP%]{position:fixed;left:24px;bottom:24px;display:none;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{right:16px;bottom:16px;gap:8px}.fab[_ngcontent-%COMP%]{width:44px;height:44px}.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.fab-stack-left[_ngcontent-%COMP%]{display:flex;left:16px;bottom:16px}}.fab.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex!important}.fab-stack-left[_ngcontent-%COMP%]{display:flex!important}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px}.modal-content.card-modal[_ngcontent-%COMP%]{background:#2a2d3a;border-radius:12px;max-width:500px;max-height:90vh;width:100%;position:relative;overflow:hidden;box-shadow:0 20px 40px #00000080}.modal-close[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:rgba(0,0,0,.7);border:none;border-radius:50%;width:32px;height:32px;color:#fff;font-size:18px;cursor:pointer;z-index:10001;display:flex;align-items:center;justify-content:center;transition:background .2s ease}.modal-close[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.9)}.card-modal-image[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px 20px 10px}.modal-card-image[_ngcontent-%COMP%]{max-width:100%;height:auto;max-height:60vh;border-radius:8px;box-shadow:0 8px 16px #0000004d}.card-modal-info[_ngcontent-%COMP%]{padding:10px 20px 20px;text-align:center}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px;font-weight:600}.modal-pack-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}.modal-pack-badges[_ngcontent-%COMP%]   .pack-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content.card-modal[_ngcontent-%COMP%]{max-width:100%;max-height:95vh}.modal-card-image[_ngcontent-%COMP%]{max-height:70vh}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}'],changeDetection:0}),n})();function k$(n,t){1&n&&(m(0,"div",9),Be(1,"div",10),m(2,"p"),v(3,"Calculating pack suggestions..."),g()())}function R$(n,t){1&n&&(m(0,"div",11)(1,"p"),v(2,"Please sign in to get personalized pack suggestions."),g()())}function N$(n,t){if(1&n&&(m(0,"option",19),v(1),g()),2&n){const e=t.$implicit;P("value",e),C(1),He(e)}}function F$(n,t){if(1&n){const e=Je();m(0,"div",39),V("click",function(){const i=q(e).$implicit,s=O(2).$implicit;return W(O(2).onRarityClick(s,i))}),m(1,"span",40),v(2),g(),m(3,"span",41),v(4),g(),m(5,"span",42),v(6),g()()}if(2&n){const e=t.$implicit,r=O(4);et("complete",100===e.percentage),C(1),P("title",r.getRarityDisplayName(e.rarity)),C(1),xe(" ",e.rarity," "),C(2),mn(" ",e.owned,"/",e.total," "),C(1),et("complete",100===e.percentage),C(1),xe(" ",e.percentage.toFixed(0),"% ")}}function L$(n,t){if(1&n&&(m(0,"div",36)(1,"h5"),v(2,"Rarity Breakdown:"),g(),m(3,"div",37),z(4,F$,7,9,"div",38),g()()),2&n){const e=O().$implicit;C(4),P("ngForOf",e.rarityBreakdown)}}function j$(n,t){if(1&n&&(m(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"h4",24),v(5),g()(),m(6,"div",25)(7,"span",26),v(8),g(),m(9,"span",27),v(10),g()()(),m(11,"div",28)(12,"div",29)(13,"span",30),v(14,"Score"),g(),m(15,"span",31),v(16),g()(),m(17,"div",29)(18,"span",30),v(19,"New Card Chance"),g(),m(20,"span",32),v(21),g()(),m(22,"div",29)(23,"span",30),v(24,"Missing Cards"),g(),m(25,"span",33),v(26),g()(),m(27,"div",29)(28,"span",30),v(29,"Collection"),g(),m(30,"span",34),v(31),g()()(),z(32,L$,5,1,"div",35),g()()),2&n){const e=t.$implicit,r=t.index;C(5),mn("",r+1,". ",e.packName,""),C(3),He(e.setCode),C(2),He(e.setName),C(6),He(e.score),C(5),xe("",e.newCardChance.toFixed(1),"%"),C(5),mn("",e.missingCards,"/",e.totalCards,""),C(5),xe("",e.percentage.toFixed(1),"% complete"),C(1),P("ngIf",e.rarityBreakdown.length>0)}}function V$(n,t){if(1&n){const e=Je();m(0,"div",12)(1,"div",13)(2,"h3"),v(3),g(),m(4,"select",14),V("ngModelChange",function(o){return q(e),W(O().selectedSeriesFilter=o)})("change",function(){return q(e),W(O().onSeriesFilterChange())}),m(5,"option",15),v(6,"Top 3 Suggestions"),g(),m(7,"optgroup",16),z(8,N$,2,2,"option",17),g()()(),z(9,j$,33,10,"div",18),g()}if(2&n){const e=O();C(3),xe("Recommended Packs (",e.packSuggestions.length," available)"),C(1),P("ngModel",e.selectedSeriesFilter),C(4),P("ngForOf",e.seriesList),C(1),P("ngForOf",e.packSuggestions)}}function $$(n,t){1&n&&(m(0,"div",43)(1,"p"),v(2,"\u{1f389} Congratulations! You have completed your collection according to the selected algorithm."),g(),m(3,"p"),v(4,"Try a different algorithm to find more cards to collect."),g()())}function U$(n,t){if(1&n){const e=Je();m(0,"div",44),V("click",function(){return q(e),W(O().toggleAlgorithmSelection())}),m(1,"div",45),V("click",function(o){return o.stopPropagation()}),m(2,"div",46)(3,"h3"),v(4,"\u2699\ufe0f Algorithm Selection"),g(),m(5,"button",47),V("click",function(){return q(e),W(O().toggleAlgorithmSelection())}),v(6,"\xd7"),g()(),m(7,"div",48)(8,"div",49)(9,"label",50)(10,"input",51),V("ngModelChange",function(o){return q(e),W(O().selectedAlgorithm=o)})("change",function(){return q(e),W(O().onAlgorithmChange())}),g(),m(11,"span",52)(12,"strong"),v(13,"All Cards"),g(),m(14,"small"),v(15),g()()(),m(16,"label",50)(17,"input",53),V("ngModelChange",function(o){return q(e),W(O().selectedAlgorithm=o)})("change",function(){return q(e),W(O().onAlgorithmChange())}),g(),m(18,"span",52)(19,"strong"),v(20,"Tradables Only"),g(),m(21,"small"),v(22),g()()(),m(23,"label",50)(24,"input",54),V("ngModelChange",function(o){return q(e),W(O().selectedAlgorithm=o)})("change",function(){return q(e),W(O().onAlgorithmChange())}),g(),m(25,"span",52)(26,"strong"),v(27,"Priority Easy First"),g(),m(28,"small"),v(29),g()()()(),m(30,"div",55)(31,"label",56)(32,"input",57),V("ngModelChange",function(o){return q(e),W(O().excludeSpecialPacks=o)})("change",function(){return q(e),W(O().onExcludeSpecialPacksChange())}),g(),m(33,"span",58)(34,"strong"),v(35,"Exclude Special Packs"),g(),m(36,"small"),v(37,"Hide Deluxe and promo packs from suggestions"),g()()()()(),m(38,"div",59)(39,"button",60),V("click",function(){return q(e),W(O().toggleAlgorithmSelection())}),v(40,"Apply"),g()()()()}if(2&n){const e=O();C(10),P("ngModel",e.selectedAlgorithm),C(5),He(e.getAlgorithmDescription("all-cards")),C(2),P("ngModel",e.selectedAlgorithm),C(5),He(e.getAlgorithmDescription("tradables-only")),C(2),P("ngModel",e.selectedAlgorithm),C(5),He(e.getAlgorithmDescription("priority-easy")),C(3),P("ngModel",e.excludeSpecialPacks)}}function B$(n,t){if(1&n){const e=Je();m(0,"div",44),V("click",function(){return q(e),W(O().toggleAlgorithmExplanation())}),m(1,"div",45),V("click",function(o){return o.stopPropagation()}),m(2,"div",46)(3,"h3"),v(4,"Algorithm Explanation"),g(),m(5,"button",47),V("click",function(){return q(e),W(O().toggleAlgorithmExplanation())}),v(6,"\xd7"),g()(),m(7,"div",48)(8,"div",61)(9,"h4"),v(10,"\u{1f3af} All Cards Algorithm"),g(),m(11,"p"),v(12,"Considers every card in the game, including crown cards (\u{1f451}). Best for completionist collectors who want to collect everything."),g(),m(13,"ul")(14,"li"),v(15,"Prioritizes packs with the most missing cards across all rarities"),g(),m(16,"li"),v(17,"Crown cards receive the highest priority bonus (20 points)"),g(),m(18,"li"),v(19,"Calculates new card chance based on all available cards"),g()()(),m(20,"div",61)(21,"h4"),v(22,"\u{1f48e} Tradables Only Algorithm"),g(),m(23,"p"),v(24,"Focuses only on tradable cards (excludes crown cards). Perfect for players who prioritize trading and competitive play."),g(),m(25,"ul")(26,"li"),v(27,"Excludes crown rarities from consideration"),g(),m(28,"li"),v(29,"Prioritizes cards that can be traded with other players"),g(),m(30,"li"),v(31,"Best for building competitive decks"),g()()(),m(32,"div",61)(33,"h4"),v(34,"\u{1f4c8} Priority Easy First Algorithm"),g(),m(35,"p"),v(36,"Completes easier rarities before moving to harder ones. Great for steady progression and completion satisfaction."),g(),m(37,"ul")(38,"li")(39,"strong"),v(40,"Step 1:"),g(),v(41," Complete all Diamond rarities (\u25ca \u2192 \u25ca\u25ca \u2192 \u25ca\u25ca\u25ca \u2192 \u25ca\u25ca\u25ca\u25ca)"),g(),m(42,"li")(43,"strong"),v(44,"Step 2:"),g(),v(45," Complete all Star rarities (\u2606 \u2192 \u2606\u2606 \u2192 \u2606\u2606\u2606)"),g(),m(46,"li")(47,"strong"),v(48,"Step 3:"),g(),v(49," Complete all Shiny rarities (\u2735 \u2192 \u2735\u2735)"),g(),m(50,"li")(51,"strong"),v(52,"Step 4:"),g(),v(53," Complete Crown rarities (\u{1f451})"),g()(),m(54,"p")(55,"em"),v(56,"Only suggests packs for your current priority level until that rarity group is complete."),g()()(),m(57,"div",62)(58,"h4"),v(59,"\u{1f4ca} How Scoring Works"),g(),m(60,"p"),v(61,"Each pack receives a score based on:"),g(),m(62,"ol")(63,"li")(64,"strong"),v(65,"Missing Card Percentage:"),g(),v(66," Higher percentage = better score"),g(),m(67,"li")(68,"strong"),v(69,"Rarity Bonus:"),g(),v(70," Each missing card adds points based on rarity"),g(),m(71,"li")(72,"strong"),v(73,"Pack Density:"),g(),v(74," Bonus for packs containing more relevant cards"),g()(),m(75,"div",63)(76,"h5"),v(77,"Rarity Point Values:"),g(),m(78,"div",64)(79,"span"),v(80,"\u25ca Common: +1"),g(),m(81,"span"),v(82,"\u25ca\u25ca Uncommon: +2"),g(),m(83,"span"),v(84,"\u25ca\u25ca\u25ca Rare: +4"),g(),m(85,"span"),v(86,"\u25ca\u25ca\u25ca\u25ca Double Rare: +6"),g(),m(87,"span"),v(88,"\u2606 Art Rare: +8"),g(),m(89,"span"),v(90,"\u2606\u2606 Super/Special Art: +12"),g(),m(91,"span"),v(92,"\u2606\u2606\u2606 Immersive: +16"),g(),m(93,"span"),v(94,"\u{1f451} Crown: +20"),g(),m(95,"span"),v(96,"\u2735 Shiny: +10"),g(),m(97,"span"),v(98,"\u2735\u2735 Shiny Super: +15"),g()()()()(),m(99,"div",59)(100,"button",60),V("click",function(){return q(e),W(O().toggleAlgorithmExplanation())}),v(101,"Got it!"),g()()()()}}let H$=(()=>{const t=class{constructor(r,o,i,s,a){this.pokemonDataService=r,this.dataManager=o,this.supabaseService=i,this.cdr=s,this.router=a,this.cards=[],this.sets=[],this.rarityMapping={},this.currentUser=null,this.ownedCards={},this.selectedAlgorithm="all-cards",this.excludeSpecialPacks=!0,this.selectedSeriesFilter="top-3",this.seriesList=[],this.showAlgorithmSelection=!1,this.showAlgorithmExplanation=!1,this.packSuggestions=[],this.isLoading=!0,this.RARITY_PRIORITIES={"all-cards":["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2606\u2606\u2606","\u{1f451}","\u2735","\u2735\u2735"],"tradables-only":["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2606\u2606\u2606","\u2735","\u2735\u2735"],"priority-easy":["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca"]}}ngOnInit(){this.loadData()}onRarityClick(r,o){const s=this.sets.find(a=>a.code===r.setCode)?.series||"all";this.router.navigate(["/collection"],{queryParams:{series:s,set:r.setCode,pack:r.packName,rarity:o.rarity}})}loadData(){var r=this;return w(function*(){r.isLoading=!0;try{r.currentUser=yield r.supabaseService.getCurrentUser();const o=yield r.pokemonDataService.loadAllData().toPromise();o&&(r.cards=o.cards,r.sets=o.sets,r.rarityMapping=o.rarities),r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id)),r.seriesList=Array.from(new Set(r.sets.map(i=>i.series))).sort(),r.calculateSuggestions()}catch(o){console.error("Error loading data:",o)}finally{r.isLoading=!1,r.cdr.markForCheck()}})()}onAlgorithmChange(){this.calculateSuggestions(),this.cdr.markForCheck()}onExcludeSpecialPacksChange(){this.calculateSuggestions(),this.cdr.markForCheck()}onSeriesFilterChange(){this.calculateSuggestions(),this.cdr.markForCheck()}toggleAlgorithmSelection(){this.showAlgorithmSelection=!this.showAlgorithmSelection,this.cdr.markForCheck()}toggleAlgorithmExplanation(){this.showAlgorithmExplanation=!this.showAlgorithmExplanation,this.cdr.markForCheck()}calculateSuggestions(){if(!this.cards.length||!this.sets.length)return;const r=[],o="top-3"===this.selectedSeriesFilter?this.sets:this.sets.filter(a=>a.series===this.selectedSeriesFilter),i=new Set;o.forEach(a=>{a.packs?.forEach(l=>{this.excludeSpecialPacks&&this.isSpecialPack(l)||i.add(l)})}),i.forEach(a=>{const l=this.calculatePackSuggestion(a);l&&r.push(l)});const s=r.sort((a,l)=>l.score-a.score);this.packSuggestions="top-3"===this.selectedSeriesFilter?s.slice(0,3):s}calculatePackSuggestion(r){const o=this.cards.filter(p=>p.packs&&p.packs.includes(r));if(0===o.length)return null;const i=this.sets.find(p=>p.packs&&p.packs.includes(r));if(!i)return null;const s=this.getRelevantCards(o),a=s.filter(p=>0===this.getOwnedCount(p)),l=a.length,c=s.length,u=c>0?(c-l)/c*100:0,d=c>0?l/c*100:0,h=this.calculateScore(a,s,o),f=this.calculateRarityBreakdown(s);return{setCode:i.code,setName:i.name,packName:r,score:h,missingCards:l,totalCards:c,percentage:u,newCardChance:d,rarityBreakdown:f}}getRelevantCards(r){switch(this.selectedAlgorithm){case"all-cards":default:return r;case"tradables-only":return r.filter(i=>!i.rarity.includes("\u{1f451}"));case"priority-easy":const o=this.getCurrentPriorityRarities();return r.filter(i=>o.includes(i.rarity))}}getCurrentPriorityRarities(){const r=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca"],o=["\u2606","\u2606\u2606","\u2606\u2606\u2606"],i=["\u2735","\u2735\u2735"],a=this.isRarityGroupComplete(r),l=this.isRarityGroupComplete(o),c=this.isRarityGroupComplete(i);return a?l?c?["\u{1f451}"]:i:o:r}isRarityGroupComplete(r){return this.cards.filter(i=>r.includes(i.rarity)).every(i=>this.getOwnedCount(i)>0)}calculateScore(r,o,i){if(0===o.length)return 0;let s=0;return s+=r.length/o.length*100,s+=this.calculateRarityBonus(r),s+=o.length/i.length*10,Math.round(100*s)/100}calculateRarityBonus(r){let o=0;return r.forEach(i=>{switch(i.rarity){case"\u25ca":default:o+=1;break;case"\u25ca\u25ca":o+=2;break;case"\u25ca\u25ca\u25ca":o+=4;break;case"\u25ca\u25ca\u25ca\u25ca":o+=6;break;case"\u2606":o+=8;break;case"\u2606\u2606":o+=12;break;case"\u2606\u2606\u2606":o+=16;break;case"\u{1f451}":o+=20;break;case"\u2735":o+=10;break;case"\u2735\u2735":o+=15}}),o}calculateRarityBreakdown(r){const o=[...new Set(r.map(s=>s.rarity))],i=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2606\u2606\u2606","\u{1f451}","\u2735","\u2735\u2735"];return o.sort((s,a)=>{const l=i.indexOf(s),c=i.indexOf(a);return(-1===l?999:l)-(-1===c?999:c)}),o.map(s=>{const a=r.filter(d=>d.rarity===s),l=a.filter(d=>this.getOwnedCount(d)>0).length,c=a.length;return{rarity:s,owned:l,total:c,percentage:c>0?l/c*100:0}})}getOwnedCount(r){return this.currentUser&&this.ownedCards[this.getCardId(r)]||0}loadOwnedCardsForUser(r){var o=this;return w(function*(){try{const i=yield o.supabaseService.syncUserCollection(r);o.ownedCards=i}catch(i){console.error("Error loading owned cards:",i),o.ownedCards={}}})()}getCardId(r){return`${r.set}-${r.number}`}isSpecialPack(r){return[/Deluxe/i,/vol/i].some(i=>i.test(r))}getRarityDisplayName(r){for(const[o,i]of Object.entries(this.rarityMapping))if(i.split(" - ")[0]===r)return i;return r}getAlgorithmDescription(r){switch(r){case"all-cards":return"Considers all cards including crown cards";case"tradables-only":return"Prioritizes tradable cards (excludes crown cards)";case"priority-easy":return"Focuses on completing easier rarities first (diamond \u2192 star \u2192 shiny \u2192 crown)";default:return""}}};let n=t;return t.\u0275fac=function(o){return new(o||t)(A(dp),A(hp),A(es),A(Si),A(Ct))},t.\u0275cmp=Br({type:t,selectors:[["app-suggestion"]],decls:12,vars:6,consts:[[1,"suggestion-container"],[1,"filter-section"],["class","loading-state",4,"ngIf"],["class","no-user-state",4,"ngIf"],["class","suggestions-list",4,"ngIf"],["class","no-suggestions",4,"ngIf"],["title","Algorithm Selection",1,"fab","algorithm-fab",3,"click"],["title","Algorithm Explanation",1,"fab","help-fab",3,"click"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"no-user-state"],[1,"suggestions-list"],[1,"suggestions-header-row"],[1,"set-filter",3,"ngModel","ngModelChange","change"],["value","top-3"],["label","Series"],[3,"value",4,"ngFor","ngForOf"],["class","suggestion-item",4,"ngFor","ngForOf"],[3,"value"],[1,"suggestion-item"],[1,"suggestion-content"],[1,"suggestion-header"],[1,"header-left"],[1,"pack-name"],[1,"header-right"],[1,"set-code"],[1,"set-name"],[1,"suggestion-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","score"],[1,"stat-value","chance"],[1,"stat-value","missing"],[1,"stat-value","percentage"],["class","rarity-breakdown",4,"ngIf"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-item clickable","tabindex","0",3,"complete","click",4,"ngFor","ngForOf"],["tabindex","0",1,"rarity-item","clickable",3,"click"],[1,"rarity-symbol",3,"title"],[1,"rarity-count"],[1,"rarity-percentage"],[1,"no-suggestions"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-button",3,"click"],[1,"modal-body"],[1,"algorithm-selector"],[1,"radio-option"],["type","radio","name","algorithm","value","all-cards",3,"ngModel","ngModelChange","change"],[1,"radio-label"],["type","radio","name","algorithm","value","tradables-only",3,"ngModel","ngModelChange","change"],["type","radio","name","algorithm","value","priority-easy",3,"ngModel","ngModelChange","change"],[1,"modal-filter",2,"margin-top","100px"],[1,"checkbox-option"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkbox-label"],[1,"modal-footer"],[1,"modal-button",3,"click"],[1,"algorithm-detail"],[1,"scoring-detail"],[1,"rarity-points"],[1,"points-grid"]],template:function(o,i){1&o&&(m(0,"div",0)(1,"div",1),z(2,k$,4,0,"div",2),z(3,R$,3,0,"div",3),z(4,V$,10,4,"div",4),g(),z(5,$$,5,0,"div",5),m(6,"button",6),V("click",function(){return i.toggleAlgorithmSelection()}),v(7," \u2699\ufe0f "),g(),m(8,"button",7),V("click",function(){return i.toggleAlgorithmExplanation()}),v(9," \u2753 "),g(),z(10,U$,41,7,"div",8),z(11,B$,102,0,"div",8),g()),2&o&&(C(2),P("ngIf",i.isLoading),C(1),P("ngIf",!i.isLoading&&!i.currentUser),C(1),P("ngIf",!i.isLoading&&i.currentUser&&i.packSuggestions.length>0),C(1),P("ngIf",!i.isLoading&&i.currentUser&&0===i.packSuggestions.length),C(5),P("ngIf",i.showAlgorithmSelection),C(1),P("ngIf",i.showAlgorithmExplanation))},dependencies:[ec,xi,Tf,Af,Ti,ta,aa,Ef,na,Pi],styles:['.suggestion-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:var(--text)}.suggestion-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:8px;font-size:2.2rem}.suggestion-header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem;margin:0}.filter-section[_ngcontent-%COMP%]{background:var(--surface);border-radius:12px;padding:15px;margin-bottom:20px;border:1px solid var(--border)}.filter-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;flex-wrap:wrap}.checkbox-option.compact[_ngcontent-%COMP%]{padding:6px 8px;gap:8px}.checkbox-option.compact[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{transform:scale(.9)}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.9rem}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.set-filter[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;background:var(--surface) url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%236c757d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>\') no-repeat right 8px center;border:1px solid var(--border);border-radius:8px;padding:8px 32px 8px 12px;font-size:.9rem;color:var(--text);cursor:pointer}.set-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px #5ba8ff26}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:15px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.radio-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-label[_ngcontent-%COMP%]{color:var(--text)}.radio-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.radio-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.radio-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.radio-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.filter-options[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid var(--border)}.checkbox-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:12px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.checkbox-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkbox-label[_ngcontent-%COMP%]{color:var(--text)}.checkbox-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.checkbox-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.loading-state[_ngcontent-%COMP%], .no-user-state[_ngcontent-%COMP%], .no-suggestions[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background:var(--surface);border:1px solid var(--border);border-radius:12px;margin:20px 0}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.08);border-top:4px solid var(--accent);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.suggestions-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text);margin-bottom:20px;font-size:1.4rem}.suggestions-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}.suggestion-item[_ngcontent-%COMP%]{display:block;background:rgb(14 21 37 / 85%);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:20px;transition:all .2s ease;box-shadow:0 2px 6px #00000040}.suggestion-content[_ngcontent-%COMP%]{width:100%}.suggestion-header[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;text-align:right}.pack-name[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text);margin:0;font-weight:1000;text-align:left}.set-code[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:2px 8px;border-radius:4px;font-size:.8rem;font-weight:500}.set-name[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem}.suggestion-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:15px}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-muted);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.stat-value.score[_ngcontent-%COMP%]{color:#3498db}.stat-value.chance[_ngcontent-%COMP%]{color:#e74c3c}.stat-value.missing[_ngcontent-%COMP%]{color:#f39c12}.stat-value.percentage[_ngcontent-%COMP%]{color:#27ae60}.rarity-breakdown[_ngcontent-%COMP%]{margin-top:15px;padding-top:15px;border-top:1px solid var(--border)}.rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 10px;color:var(--text);font-size:.9rem;font-weight:600}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px}.rarity-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:8px;background:rgba(255,255,255,.03);border-radius:6px;border:1px solid var(--border);gap:4px}.rarity-item.complete[_ngcontent-%COMP%]{background:rgba(39,174,96,.15);border-color:#27ae60}.rarity-item.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:transform .15s ease,box-shadow .15s ease}.rarity-item.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-1px)}.rarity-symbol[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--text)}.rarity-count[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);font-weight:500}.rarity-percentage[_ngcontent-%COMP%]{font-size:.75rem;color:#f39c12;font-weight:600}.rarity-percentage.complete[_ngcontent-%COMP%]{color:#27ae60}.exclude-toggle-fixed[_ngcontent-%COMP%]{position:fixed;top:16px;right:16px;z-index:1500;background:var(--surface);border-color:var(--border);box-shadow:0 4px 12px #0003}@media (max-width: 768px){.exclude-toggle-fixed[_ngcontent-%COMP%]{top:12px;right:12px;transform:scale(.95)}}@media (max-width: 768px){.suggestion-container[_ngcontent-%COMP%]{padding:15px}.suggestion-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.header-left[_ngcontent-%COMP%]{width:100%}.header-right[_ngcontent-%COMP%]{width:100%;text-align:left}.set-name[_ngcontent-%COMP%]{text-align:left;margin-left:0;width:100%}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.algorithm-selector[_ngcontent-%COMP%]{gap:8px}.radio-option[_ngcontent-%COMP%]{padding:12px}.filter-toolbar[_ngcontent-%COMP%]{justify-content:space-between}.rarity-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:6px}.rarity-item[_ngcontent-%COMP%]{padding:6px}}@media (max-width: 480px){.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.pack-name[_ngcontent-%COMP%]{font-size:1.1rem}}.fab[_ngcontent-%COMP%]{position:fixed;width:56px;height:56px;border-radius:50%;color:#fff;border:none;font-size:1.5rem;cursor:pointer;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;z-index:1000;display:flex;align-items:center;justify-content:center}.algorithm-fab[_ngcontent-%COMP%]{bottom:90px;right:20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.algorithm-fab[_ngcontent-%COMP%]:hover{background:#34495e;transform:scale(1.1)}.help-fab[_ngcontent-%COMP%]{bottom:20px;right:20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.help-fab[_ngcontent-%COMP%]:hover{background:#2980b9;transform:scale(1.1)}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:2000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:var(--surface-strong);color:var(--text);border:1px solid var(--border);border-radius:12px;max-width:800px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0006}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text);font-size:1.5rem}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8rem;color:#7f8c8d;cursor:pointer;padding:0;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.close-button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.06);color:var(--text)}.modal-body[_ngcontent-%COMP%]{padding:24px}.modal-filter[_ngcontent-%COMP%]{margin-top:12px}.algorithm-detail[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:20px;border-bottom:1px solid var(--border)}.algorithm-detail[_ngcontent-%COMP%]:last-child, .scoring-detail[_ngcontent-%COMP%]:last-child, .filter-detail[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.algorithm-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1.2rem}.algorithm-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text-muted);line-height:1.6}.algorithm-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:8px 0 0;padding-left:20px;color:#495057}.algorithm-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;line-height:1.5}.rarity-points[_ngcontent-%COMP%]{background:rgba(255,255,255,.05);padding:16px;border-radius:8px;margin-top:12px}.rarity-points[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1rem}.points-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px}.points-grid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--surface);padding:6px 10px;border-radius:4px;font-size:.85rem;color:var(--text);border:1px solid var(--border)}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end}.modal-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:10px 20px;border-radius:6px;font-size:1rem;cursor:pointer;transition:background .2s ease}.modal-button[_ngcontent-%COMP%]:hover{filter:brightness(.9)}.algorithm-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{max-height:95vh}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:16px}.points-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fab[_ngcontent-%COMP%]{bottom:16px;right:16px;width:48px;height:48px;font-size:1.3rem}}'],changeDetection:0}),n})();function z$(n,t){if(1&n&&(m(0,"div",19),v(1),g()),2&n){const e=O();C(1),xe(" ",e.error," ")}}function G$(n,t){1&n&&Be(0,"span",20)}function K$(n,t){if(1&n){const e=Je();m(0,"div",17)(1,"span",18),v(2),g(),m(3,"button",19),V("click",function(){return q(e),W(O().signOut())}),v(4,"Sign Out"),g()()}if(2&n){const e=O();C(2),xe("\u{1f464} ",e.currentUser.username,"")}}function J$(n,t){if(1&n&&(m(0,"div",20)(1,"span",18),v(2),g()()),2&n){const e=O();C(2),xe("\u{1f464} ",e.currentUser.username,"")}}function Y$(n,t){if(1&n){const e=Je();m(0,"button",21),V("click",function(){q(e);const o=O();return o.signOut(),W(o.closeMobileMenu())}),v(1," \u{1f6aa} Sign Out "),g()}}const Q$=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:(()=>{const t=class{constructor(r,o,i){this.supabaseService=r,this.router=o,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/collection"}ngOnInit(){this.supabaseService.isSignedIn()?this.router.navigate([this.returnUrl]):this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/collection"}get isFormValid(){return this.username.trim().length>0&&this.password.trim().length>0}onSubmit(){var r=this;return w(function*(){if(r.isFormValid){r.loading=!0,r.error="";try{const{user:o,error:i}=yield r.supabaseService.signIn(r.username.trim(),r.password.trim());i?(r.error=i,i.includes("Please wait a moment")&&(r.error+=" This usually resolves itself quickly.")):o&&r.router.navigate([r.returnUrl])}catch(o){if(console.error("Sign in error:",o),o&&"object"==typeof o&&"message"in o){const i=o.message;r.error=i.includes("NavigatorLockAcquireTimeoutError")||i.includes("lock")?"Please wait a moment and try signing in again.":"An unexpected error occurred"}else r.error="An unexpected error occurred"}finally{r.loading=!1}}else r.error="Please enter both username and password"})()}onUsernameChange(){this.error=""}onPasswordChange(){this.error=""}};let n=t;return t.\u0275fac=function(o){return new(o||t)(A(es),A(Ct),A(io))},t.\u0275cmp=Br({type:t,selectors:[["app-signin"]],decls:26,vars:8,consts:[[1,"signin-container"],[1,"signin-card"],[1,"signin-header"],[1,"signin-title"],[1,"signin-subtitle"],[1,"signin-form",3,"ngSubmit"],["signinForm","ngForm"],[1,"form-group"],["for","username"],["id","username","name","username","type","text","placeholder","Enter your username","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["usernameInput","ngModel"],["for","password"],["id","password","name","password","type","password","placeholder","Enter your password","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["passwordInput","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"signin-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"signin-footer"],[1,"invite-note"],[1,"error-message"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),v(4,"\u{1f0cf} Pokemon TCG Pocket"),g(),m(5,"p",4),v(6,"Collection Manager"),g()(),m(7,"form",5,6),V("ngSubmit",function(){return i.onSubmit()}),m(9,"div",7)(10,"label",8),v(11,"Username"),g(),m(12,"input",9,10),V("ngModelChange",function(a){return i.username=a})("input",function(){return i.onUsernameChange()}),g()(),m(14,"div",7)(15,"label",11),v(16,"Password"),g(),m(17,"input",12,13),V("ngModelChange",function(a){return i.password=a})("input",function(){return i.onPasswordChange()}),g()(),z(19,z$,2,1,"div",14),m(20,"button",15),z(21,G$,1,0,"span",16),v(22),g()(),m(23,"div",17)(24,"p",18),v(25," \u{1f4e7} This is an invite-only system. Contact your administrator if you need access. "),g()()()()),2&o){const s=xl(8);C(12),P("ngModel",i.username)("disabled",i.loading),C(5),P("ngModel",i.password)("disabled",i.loading),C(2),P("ngIf",i.error),C(1),P("disabled",i.loading||!s.valid),C(1),P("ngIf",i.loading),C(1),xe(" ",i.loading?"Signing In...":"Sign In"," ")}},dependencies:[xi,N0,Ti,na,b0,Cc,Pi,vc],styles:[".signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px}.signin-card[_ngcontent-%COMP%]{background:#333;border-radius:12px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 30px #0000004d;border:1px solid #444}.signin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signin-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.signin-subtitle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin:0;opacity:.8}.signin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #555;border-radius:6px;background-color:#444;color:#fff;font-size:16px;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;background-color:#555}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:#888}.error-message[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:10px 12px;border-radius:6px;font-size:14px;text-align:center;margin-top:-10px}.signin-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}.signin-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px)}.signin-btn[_ngcontent-%COMP%]:disabled{background-color:#666;cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signin-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.invite-note[_ngcontent-%COMP%]{color:#888;font-size:12px;line-height:1.4;margin:0;padding:15px;background-color:#2a2a2a;border-radius:6px;border-left:3px solid #007bff}@media (max-width: 480px){.signin-container[_ngcontent-%COMP%]{padding:10px}.signin-card[_ngcontent-%COMP%]{padding:30px 20px}.signin-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),n})()},{path:"",component:(()=>{const t=class{constructor(r,o){this.supabaseService=r,this.router=o,this.currentUser=null,this.appVersion="1.3.9",this.isMobileMenuOpen=!1}ngOnInit(){this.supabaseService.currentUser$.subscribe(r=>{this.currentUser=r}),this.router.events.subscribe(()=>{this.isMobileMenuOpen=!1})}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}};let n=t;return t.\u0275fac=function(o){return new(o||t)(A(es),A(Ct))},t.\u0275cmp=Br({type:t,selectors:[["app-main-layout"]],decls:28,vars:7,consts:[[1,"app-layout"],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],[1,"nav-center","desktop-only"],[1,"nav-links"],["routerLink","/suggestion","routerLinkActive","active",1,"nav-link"],["routerLink","/collection","routerLinkActive","active",1,"nav-link"],["class","nav-user desktop-only",4,"ngIf"],["type","button","aria-controls","mobileMenu","aria-label","Menu",1,"hamburger","mobile-only",3,"click"],["id","mobileMenu",1,"mobile-menu","mobile-only"],["class","mobile-menu-header",4,"ngIf"],["routerLink","/dashboard","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/collection","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/suggestion","routerLinkActive","active",1,"mobile-link",3,"click"],["class","mobile-link signout",3,"click",4,"ngIf"],[1,"main-content"],[1,"nav-user","desktop-only"],[1,"username"],[1,"btn-signout",3,"click"],[1,"mobile-menu-header"],[1,"mobile-link","signout",3,"click"]],template:function(o,i){1&o&&(m(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"h2"),v(5,"Pokemon TCGP Collector"),g(),m(6,"p"),v(7),g()(),m(8,"div",4)(9,"div",5)(10,"a",6),v(11," \u{1f4ca} Suggestion "),g(),m(12,"a",7),v(13," \u{1f5c2}\ufe0f Collection "),g()()(),z(14,K$,5,1,"div",8),m(15,"button",9),V("click",function(){return i.toggleMobileMenu()}),v(16," \u2630 "),g()(),m(17,"div",10),z(18,J$,3,1,"div",11),m(19,"a",12),V("click",function(){return i.closeMobileMenu()}),v(20," \u{1f4ca} Dashboard "),g(),m(21,"a",13),V("click",function(){return i.closeMobileMenu()}),v(22," \u{1f5c2}\ufe0f Collection "),g(),m(23,"a",14),V("click",function(){return i.closeMobileMenu()}),v(24," \u{1f4e6} Suggestion "),g(),z(25,Y$,2,0,"button",15),g()(),m(26,"main",16),Be(27,"router-outlet"),g()()),2&o&&(C(7),xe("v",i.appVersion,""),C(7),P("ngIf",i.currentUser),C(1),Tt("aria-expanded",i.isMobileMenuOpen),C(2),et("open",i.isMobileMenuOpen),C(1),P("ngIf",i.currentUser),C(7),P("ngIf",i.currentUser))},dependencies:[xi,Rc,zc,eD],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#1d1b1b}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:0 20px;box-shadow:0 2px 10px #0000001a;position:relative}.nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff}.nav-brand[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f0f0f0;opacity:.9;font-size:.95rem}.nav-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;border-radius:5px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:0 2px 5px #0003}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.username[_ngcontent-%COMP%]{color:#f0f0f0;font-size:14px;font-weight:500}.btn-signout[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background-color:transparent;color:#fff;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-signout[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#1d1b1b}.desktop-only[_ngcontent-%COMP%]{display:flex}.mobile-only[_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.35);color:#fff;border-radius:6px;padding:6px 10px;font-size:18px;cursor:pointer}.mobile-menu[_ngcontent-%COMP%]{display:none!important;position:absolute;right:12px;top:100%;margin-top:8px;width:220px;z-index:100;flex-direction:column;gap:8px;padding:10px 12px 12px;border:1px solid rgba(255,255,255,.16);border-radius:10px;background:#1b1f2a;box-shadow:0 10px 28px #00000059}.mobile-menu.open[_ngcontent-%COMP%]{display:flex!important}.mobile-menu[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin-bottom:4px;display:inline-block;opacity:.9}.mobile-link[_ngcontent-%COMP%]{text-align:left;color:#fff;text-decoration:none;padding:10px 12px;border:1px solid rgba(255,255,255,.12);border-radius:6px;background:rgba(255,255,255,.05);font-size:14px}.mobile-link.signout[_ngcontent-%COMP%]{border-color:#dc3545;background:rgba(220,53,69,.15)}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.nav-container[_ngcontent-%COMP%]{padding:8px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}"]}),n})(),canActivate:[(()=>{const t=class{constructor(r,o){this.supabaseService=r,this.router=o}canActivate(r,o){const i=this.supabaseService.isSignedIn(),s=this.supabaseService.getCurrentUser();return!(!i||!s)||(this.router.navigate(["/signin"],{queryParams:{returnUrl:o.url}}),!1)}};let n=t;return t.\u0275fac=function(o){return new(o||t)(K(es),K(Ct))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),n})()],children:[{path:"dashboard",component:VV},{path:"collection",component:P$},{path:"suggestion",component:H$}]},{path:"**",redirectTo:"/signin"}];let Z$=(()=>{const t=class{};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=jn({type:t}),t.\u0275inj=xn({imports:[up.forRoot(Q$),up]}),n})(),X$=(()=>{const t=class{};let n=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=jn({type:t,bootstrap:[oL]}),t.\u0275inj=xn({imports:[Yk,xR,AN,up,Z$]}),n})();Jk().bootstrapModule(X$).catch(n=>console.error(n))},397:(It,de,te)=>{"use strict";te.r(de),te.d(de,{Headers:()=>I,Request:()=>k,Response:()=>H,default:()=>Ge,fetch:()=>Ne});var ve=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const Ne=ve.fetch,Ge=ve.fetch.bind(ve),I=ve.Headers,k=ve.Request,H=ve.Response},369:(It,de,te)=>{"use strict";var oe=te(156).default;Object.defineProperty(de,"__esModule",{value:!0});const ve=te(582),Ne=ve.__importDefault(te(397)),Ge=ve.__importDefault(te(839));de.default=class I{constructor(H){var Q,ne;this.shouldThrowOnError=!1,this.method=H.method,this.url=H.url,this.headers=new Headers(H.headers),this.schema=H.schema,this.body=H.body,this.shouldThrowOnError=null!==(Q=H.shouldThrowOnError)&&void 0!==Q&&Q,this.signal=H.signal,this.isMaybeSingle=null!==(ne=H.isMaybeSingle)&&void 0!==ne&&ne,this.fetch=H.fetch?H.fetch:typeof fetch>"u"?Ne.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(H,Q){return this.headers=new Headers(this.headers),this.headers.set(H,Q),this}then(H,Q){var ne=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Re=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var De=oe(function*(Fe){var st,zt,At,Ze;let at=null,Mt=null,Xn=null,Xt=Fe.status,wn=Fe.statusText;if(Fe.ok){if("HEAD"!==ne.method){const Vr=yield Fe.text();""===Vr||(Mt="text/csv"===ne.headers.get("Accept")||ne.headers.get("Accept")&&null!==(st=ne.headers.get("Accept"))&&void 0!==st&&st.includes("application/vnd.pgrst.plan+text")?Vr:JSON.parse(Vr))}const en=null===(zt=ne.headers.get("Prefer"))||void 0===zt?void 0:zt.match(/count=(exact|planned|estimated)/),Dn=null===(At=Fe.headers.get("content-range"))||void 0===At?void 0:At.split("/");en&&Dn&&Dn.length>1&&(Xn=parseInt(Dn[1])),ne.isMaybeSingle&&"GET"===ne.method&&Array.isArray(Mt)&&(Mt.length>1?(at={code:"PGRST116",details:`Results contain ${Mt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Mt=null,Xn=null,Xt=406,wn="Not Acceptable"):Mt=1===Mt.length?Mt[0]:null)}else{const en=yield Fe.text();try{at=JSON.parse(en),Array.isArray(at)&&404===Fe.status&&(Mt=[],at=null,Xt=200,wn="OK")}catch{404===Fe.status&&""===en?(Xt=204,wn="No Content"):at={message:en}}if(at&&ne.isMaybeSingle&&!(null===(Ze=at?.details)||void 0===Ze)&&Ze.includes("0 rows")&&(at=null,Xt=200,wn="OK"),at&&ne.shouldThrowOnError)throw new Ge.default(at)}return{error:at,data:Mt,count:Xn,status:Xt,statusText:wn}});return function(Fe){return De.apply(this,arguments)}}());return this.shouldThrowOnError||(Re=Re.catch(De=>{var Fe,st,zt;return{error:{message:`${null!==(Fe=De?.name)&&void 0!==Fe?Fe:"FetchError"}: ${De?.message}`,details:`${null!==(st=De?.stack)&&void 0!==st?st:""}`,hint:"",code:`${null!==(zt=De?.code)&&void 0!==zt?zt:""}`},data:null,count:null,status:0,statusText:""}})),Re.then(H,Q)}returns(){return this}overrideTypes(){return this}}},851:(It,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const oe=te(582),ve=oe.__importDefault(te(241)),Ne=oe.__importDefault(te(105));class Ge{constructor(k,{headers:H={},schema:Q,fetch:ne}={}){this.url=k,this.headers=new Headers(H),this.schemaName=Q,this.fetch=ne}from(k){const H=new URL(`${this.url}/${k}`);return new ve.default(H,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(k){return new Ge(this.url,{headers:this.headers,schema:k,fetch:this.fetch})}rpc(k,H={},{head:Q=!1,get:ne=!1,count:Ee}={}){var Re;let De;const Fe=new URL(`${this.url}/rpc/${k}`);let st;Q||ne?(De=Q?"HEAD":"GET",Object.entries(H).filter(([At,Ze])=>void 0!==Ze).map(([At,Ze])=>[At,Array.isArray(Ze)?`{${Ze.join(",")}}`:`${Ze}`]).forEach(([At,Ze])=>{Fe.searchParams.append(At,Ze)})):(De="POST",st=H);const zt=new Headers(this.headers);return Ee&&zt.set("Prefer",`count=${Ee}`),new Ne.default({method:De,url:Fe,headers:zt,schema:this.schemaName,body:st,fetch:null!==(Re=this.fetch)&&void 0!==Re?Re:fetch})}}de.default=Ge},839:(It,de)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});class te extends Error{constructor(ve){super(ve.message),this.name="PostgrestError",this.details=ve.details,this.hint=ve.hint,this.code=ve.code}}de.default=te},105:(It,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const ve=te(582).__importDefault(te(594));de.default=class Ne extends ve.default{eq(I,k){return this.url.searchParams.append(I,`eq.${k}`),this}neq(I,k){return this.url.searchParams.append(I,`neq.${k}`),this}gt(I,k){return this.url.searchParams.append(I,`gt.${k}`),this}gte(I,k){return this.url.searchParams.append(I,`gte.${k}`),this}lt(I,k){return this.url.searchParams.append(I,`lt.${k}`),this}lte(I,k){return this.url.searchParams.append(I,`lte.${k}`),this}like(I,k){return this.url.searchParams.append(I,`like.${k}`),this}likeAllOf(I,k){return this.url.searchParams.append(I,`like(all).{${k.join(",")}}`),this}likeAnyOf(I,k){return this.url.searchParams.append(I,`like(any).{${k.join(",")}}`),this}ilike(I,k){return this.url.searchParams.append(I,`ilike.${k}`),this}ilikeAllOf(I,k){return this.url.searchParams.append(I,`ilike(all).{${k.join(",")}}`),this}ilikeAnyOf(I,k){return this.url.searchParams.append(I,`ilike(any).{${k.join(",")}}`),this}is(I,k){return this.url.searchParams.append(I,`is.${k}`),this}in(I,k){const H=Array.from(new Set(k)).map(Q=>"string"==typeof Q&&new RegExp("[,()]").test(Q)?`"${Q}"`:`${Q}`).join(",");return this.url.searchParams.append(I,`in.(${H})`),this}contains(I,k){return"string"==typeof k?this.url.searchParams.append(I,`cs.${k}`):Array.isArray(k)?this.url.searchParams.append(I,`cs.{${k.join(",")}}`):this.url.searchParams.append(I,`cs.${JSON.stringify(k)}`),this}containedBy(I,k){return"string"==typeof k?this.url.searchParams.append(I,`cd.${k}`):Array.isArray(k)?this.url.searchParams.append(I,`cd.{${k.join(",")}}`):this.url.searchParams.append(I,`cd.${JSON.stringify(k)}`),this}rangeGt(I,k){return this.url.searchParams.append(I,`sr.${k}`),this}rangeGte(I,k){return this.url.searchParams.append(I,`nxl.${k}`),this}rangeLt(I,k){return this.url.searchParams.append(I,`sl.${k}`),this}rangeLte(I,k){return this.url.searchParams.append(I,`nxr.${k}`),this}rangeAdjacent(I,k){return this.url.searchParams.append(I,`adj.${k}`),this}overlaps(I,k){return this.url.searchParams.append(I,"string"==typeof k?`ov.${k}`:`ov.{${k.join(",")}}`),this}textSearch(I,k,{config:H,type:Q}={}){let ne="";return"plain"===Q?ne="pl":"phrase"===Q?ne="ph":"websearch"===Q&&(ne="w"),this.url.searchParams.append(I,`${ne}fts${void 0===H?"":`(${H})`}.${k}`),this}match(I){return Object.entries(I).forEach(([k,H])=>{this.url.searchParams.append(k,`eq.${H}`)}),this}not(I,k,H){return this.url.searchParams.append(I,`not.${k}.${H}`),this}or(I,{foreignTable:k,referencedTable:H=k}={}){return this.url.searchParams.append(H?`${H}.or`:"or",`(${I})`),this}filter(I,k,H){return this.url.searchParams.append(I,`${k}.${H}`),this}}},241:(It,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const ve=te(582).__importDefault(te(105));de.default=class Ne{constructor(I,{headers:k={},schema:H,fetch:Q}){this.url=I,this.headers=new Headers(k),this.schema=H,this.fetch=Q}select(I,k){const{head:H=!1,count:Q}=k??{},ne=H?"HEAD":"GET";let Ee=!1;const Re=(I??"*").split("").map(De=>/\s/.test(De)&&!Ee?"":('"'===De&&(Ee=!Ee),De)).join("");return this.url.searchParams.set("select",Re),Q&&this.headers.append("Prefer",`count=${Q}`),new ve.default({method:ne,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(I,{count:k,defaultToNull:H=!0}={}){var Q;if(k&&this.headers.append("Prefer",`count=${k}`),H||this.headers.append("Prefer","missing=default"),Array.isArray(I)){const Ee=I.reduce((Re,De)=>Re.concat(Object.keys(De)),[]);if(Ee.length>0){const Re=[...new Set(Ee)].map(De=>`"${De}"`);this.url.searchParams.set("columns",Re.join(","))}}return new ve.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(Q=this.fetch)&&void 0!==Q?Q:fetch})}upsert(I,{onConflict:k,ignoreDuplicates:H=!1,count:Q,defaultToNull:ne=!0}={}){var Ee;if(this.headers.append("Prefer",`resolution=${H?"ignore":"merge"}-duplicates`),void 0!==k&&this.url.searchParams.set("on_conflict",k),Q&&this.headers.append("Prefer",`count=${Q}`),ne||this.headers.append("Prefer","missing=default"),Array.isArray(I)){const De=I.reduce((Fe,st)=>Fe.concat(Object.keys(st)),[]);if(De.length>0){const Fe=[...new Set(De)].map(st=>`"${st}"`);this.url.searchParams.set("columns",Fe.join(","))}}return new ve.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(Ee=this.fetch)&&void 0!==Ee?Ee:fetch})}update(I,{count:k}={}){var H;return k&&this.headers.append("Prefer",`count=${k}`),new ve.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(H=this.fetch)&&void 0!==H?H:fetch})}delete({count:I}={}){var k;return I&&this.headers.append("Prefer",`count=${I}`),new ve.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(k=this.fetch)&&void 0!==k?k:fetch})}}},594:(It,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});const ve=te(582).__importDefault(te(369));de.default=class Ne extends ve.default{select(I){let k=!1;const H=(I??"*").split("").map(Q=>/\s/.test(Q)&&!k?"":('"'===Q&&(k=!k),Q)).join("");return this.url.searchParams.set("select",H),this.headers.append("Prefer","return=representation"),this}order(I,{ascending:k=!0,nullsFirst:H,foreignTable:Q,referencedTable:ne=Q}={}){const Ee=ne?`${ne}.order`:"order",Re=this.url.searchParams.get(Ee);return this.url.searchParams.set(Ee,`${Re?`${Re},`:""}${I}.${k?"asc":"desc"}${void 0===H?"":H?".nullsfirst":".nullslast"}`),this}limit(I,{foreignTable:k,referencedTable:H=k}={}){return this.url.searchParams.set(typeof H>"u"?"limit":`${H}.limit`,`${I}`),this}range(I,k,{foreignTable:H,referencedTable:Q=H}={}){const Ee=typeof Q>"u"?"limit":`${Q}.limit`;return this.url.searchParams.set(typeof Q>"u"?"offset":`${Q}.offset`,`${I}`),this.url.searchParams.set(Ee,""+(k-I+1)),this}abortSignal(I){return this.signal=I,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:I=!1,verbose:k=!1,settings:H=!1,buffers:Q=!1,wal:ne=!1,format:Ee="text"}={}){var Re;const De=[I?"analyze":null,k?"verbose":null,H?"settings":null,Q?"buffers":null,ne?"wal":null].filter(Boolean).join("|"),Fe=null!==(Re=this.headers.get("Accept"))&&void 0!==Re?Re:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${Ee}; for="${Fe}"; options=${De};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(I){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${I}`),this}}},358:(It,de,te)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0}),de.PostgrestError=de.PostgrestBuilder=de.PostgrestTransformBuilder=de.PostgrestFilterBuilder=de.PostgrestQueryBuilder=de.PostgrestClient=void 0;const oe=te(582),ve=oe.__importDefault(te(851));de.PostgrestClient=ve.default;const Ne=oe.__importDefault(te(241));de.PostgrestQueryBuilder=Ne.default;const Ge=oe.__importDefault(te(105));de.PostgrestFilterBuilder=Ge.default;const I=oe.__importDefault(te(594));de.PostgrestTransformBuilder=I.default;const k=oe.__importDefault(te(369));de.PostgrestBuilder=k.default;const H=oe.__importDefault(te(839));de.PostgrestError=H.default,de.default={PostgrestClient:ve.default,PostgrestQueryBuilder:Ne.default,PostgrestFilterBuilder:Ge.default,PostgrestTransformBuilder:I.default,PostgrestBuilder:k.default,PostgrestError:H.default}},156:It=>{function de(oe,ve,Ne,Ge,I,k,H){try{var Q=oe[k](H),ne=Q.value}catch(Ee){return void Ne(Ee)}Q.done?ve(ne):Promise.resolve(ne).then(Ge,I)}It.exports=function te(oe){return function(){var ve=this,Ne=arguments;return new Promise(function(Ge,I){var k=oe.apply(ve,Ne);function H(ne){de(k,Ge,I,H,Q,"next",ne)}function Q(ne){de(k,Ge,I,H,Q,"throw",ne)}H(void 0)})}},It.exports.__esModule=!0,It.exports.default=It.exports},582:(It,de,te)=>{"use strict";te.r(de),te.d(de,{__addDisposableResource:()=>qe,__assign:()=>Ne,__asyncDelegator:()=>ts,__asyncGenerator:()=>wn,__asyncValues:()=>en,__await:()=>Xt,__awaiter:()=>De,__classPrivateFieldGet:()=>er,__classPrivateFieldIn:()=>ns,__classPrivateFieldSet:()=>Ta,__createBinding:()=>st,__decorate:()=>I,__disposeResources:()=>Aa,__esDecorate:()=>H,__exportStar:()=>zt,__extends:()=>ve,__generator:()=>Fe,__importDefault:()=>Fo,__importStar:()=>Oa,__makeTemplateObject:()=>Dn,__metadata:()=>Re,__param:()=>k,__propKey:()=>ne,__read:()=>Ze,__rest:()=>Ge,__rewriteRelativeImportExtension:()=>Pa,__runInitializers:()=>Q,__setFunctionName:()=>Ee,__spread:()=>at,__spreadArray:()=>Xn,__spreadArrays:()=>Mt,__values:()=>At,default:()=>nu});var oe=function(S,M){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,E){T.__proto__=E}||function(T,E){for(var L in E)Object.prototype.hasOwnProperty.call(E,L)&&(T[L]=E[L])})(S,M)};function ve(S,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function T(){this.constructor=S}oe(S,M),S.prototype=null===M?Object.create(M):(T.prototype=M.prototype,new T)}var Ne=function(){return Ne=Object.assign||function(M){for(var T,E=1,L=arguments.length;E<L;E++)for(var B in T=arguments[E])Object.prototype.hasOwnProperty.call(T,B)&&(M[B]=T[B]);return M},Ne.apply(this,arguments)};function Ge(S,M){var T={};for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&M.indexOf(E)<0&&(T[E]=S[E]);if(null!=S&&"function"==typeof Object.getOwnPropertySymbols){var L=0;for(E=Object.getOwnPropertySymbols(S);L<E.length;L++)M.indexOf(E[L])<0&&Object.prototype.propertyIsEnumerable.call(S,E[L])&&(T[E[L]]=S[E[L]])}return T}function I(S,M,T,E){var N,L=arguments.length,B=L<3?M:null===E?E=Object.getOwnPropertyDescriptor(M,T):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(S,M,T,E);else for(var $=S.length-1;$>=0;$--)(N=S[$])&&(B=(L<3?N(B):L>3?N(M,T,B):N(M,T))||B);return L>3&&B&&Object.defineProperty(M,T,B),B}function k(S,M){return function(T,E){M(T,E,S)}}function H(S,M,T,E,L,B){function N(tr){if(void 0!==tr&&"function"!=typeof tr)throw new TypeError("Function expected");return tr}for(var Dt,$=E.kind,Ot="getter"===$?"get":"setter"===$?"set":"value",ue=!M&&S?E.static?S:S.prototype:null,Ye=M||(ue?Object.getOwnPropertyDescriptor(ue,E.name):{}),$r=!1,Ve=T.length-1;Ve>=0;Ve--){var Lt={};for(var tn in E)Lt[tn]="access"===tn?{}:E[tn];for(var tn in E.access)Lt.access[tn]=E.access[tn];Lt.addInitializer=function(tr){if($r)throw new TypeError("Cannot add initializers after decoration has completed");B.push(N(tr||null))};var Sn=(0,T[Ve])("accessor"===$?{get:Ye.get,set:Ye.set}:Ye[Ot],Lt);if("accessor"===$){if(void 0===Sn)continue;if(null===Sn||"object"!=typeof Sn)throw new TypeError("Object expected");(Dt=N(Sn.get))&&(Ye.get=Dt),(Dt=N(Sn.set))&&(Ye.set=Dt),(Dt=N(Sn.init))&&L.unshift(Dt)}else(Dt=N(Sn))&&("field"===$?L.unshift(Dt):Ye[Ot]=Dt)}ue&&Object.defineProperty(ue,E.name,Ye),$r=!0}function Q(S,M,T){for(var E=arguments.length>2,L=0;L<M.length;L++)T=E?M[L].call(S,T):M[L].call(S);return E?T:void 0}function ne(S){return"symbol"==typeof S?S:"".concat(S)}function Ee(S,M,T){return"symbol"==typeof M&&(M=M.description?"[".concat(M.description,"]"):""),Object.defineProperty(S,"name",{configurable:!0,value:T?"".concat(T," ",M):M})}function Re(S,M){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(S,M)}function De(S,M,T,E){return new(T||(T=Promise))(function(B,N){function $(Ye){try{ue(E.next(Ye))}catch(Dt){N(Dt)}}function Ot(Ye){try{ue(E.throw(Ye))}catch(Dt){N(Dt)}}function ue(Ye){Ye.done?B(Ye.value):function L(B){return B instanceof T?B:new T(function(N){N(B)})}(Ye.value).then($,Ot)}ue((E=E.apply(S,M||[])).next())})}function Fe(S,M){var E,L,B,T={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},N=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return N.next=$(0),N.throw=$(1),N.return=$(2),"function"==typeof Symbol&&(N[Symbol.iterator]=function(){return this}),N;function $(ue){return function(Ye){return function Ot(ue){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,ue[0]&&(T=0)),T;)try{if(E=1,L&&(B=2&ue[0]?L.return:ue[0]?L.throw||((B=L.return)&&B.call(L),0):L.next)&&!(B=B.call(L,ue[1])).done)return B;switch(L=0,B&&(ue=[2&ue[0],B.value]),ue[0]){case 0:case 1:B=ue;break;case 4:return T.label++,{value:ue[1],done:!1};case 5:T.label++,L=ue[1],ue=[0];continue;case 7:ue=T.ops.pop(),T.trys.pop();continue;default:if(!(B=(B=T.trys).length>0&&B[B.length-1])&&(6===ue[0]||2===ue[0])){T=0;continue}if(3===ue[0]&&(!B||ue[1]>B[0]&&ue[1]<B[3])){T.label=ue[1];break}if(6===ue[0]&&T.label<B[1]){T.label=B[1],B=ue;break}if(B&&T.label<B[2]){T.label=B[2],T.ops.push(ue);break}B[2]&&T.ops.pop(),T.trys.pop();continue}ue=M.call(S,T)}catch(Ye){ue=[6,Ye],L=0}finally{E=B=0}if(5&ue[0])throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}([ue,Ye])}}}var st=Object.create?function(S,M,T,E){void 0===E&&(E=T);var L=Object.getOwnPropertyDescriptor(M,T);(!L||("get"in L?!M.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return M[T]}}),Object.defineProperty(S,E,L)}:function(S,M,T,E){void 0===E&&(E=T),S[E]=M[T]};function zt(S,M){for(var T in S)"default"!==T&&!Object.prototype.hasOwnProperty.call(M,T)&&st(M,S,T)}function At(S){var M="function"==typeof Symbol&&Symbol.iterator,T=M&&S[M],E=0;if(T)return T.call(S);if(S&&"number"==typeof S.length)return{next:function(){return S&&E>=S.length&&(S=void 0),{value:S&&S[E++],done:!S}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ze(S,M){var T="function"==typeof Symbol&&S[Symbol.iterator];if(!T)return S;var L,N,E=T.call(S),B=[];try{for(;(void 0===M||M-- >0)&&!(L=E.next()).done;)B.push(L.value)}catch($){N={error:$}}finally{try{L&&!L.done&&(T=E.return)&&T.call(E)}finally{if(N)throw N.error}}return B}function at(){for(var S=[],M=0;M<arguments.length;M++)S=S.concat(Ze(arguments[M]));return S}function Mt(){for(var S=0,M=0,T=arguments.length;M<T;M++)S+=arguments[M].length;var E=Array(S),L=0;for(M=0;M<T;M++)for(var B=arguments[M],N=0,$=B.length;N<$;N++,L++)E[L]=B[N];return E}function Xn(S,M,T){if(T||2===arguments.length)for(var B,E=0,L=M.length;E<L;E++)(B||!(E in M))&&(B||(B=Array.prototype.slice.call(M,0,E)),B[E]=M[E]);return S.concat(B||Array.prototype.slice.call(M))}function Xt(S){return this instanceof Xt?(this.v=S,this):new Xt(S)}function wn(S,M,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L,E=T.apply(S,M||[]),B=[];return L=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),$("next"),$("throw"),$("return",function N(Ve){return function(Lt){return Promise.resolve(Lt).then(Ve,Dt)}}),L[Symbol.asyncIterator]=function(){return this},L;function $(Ve,Lt){E[Ve]&&(L[Ve]=function(tn){return new Promise(function(Sn,tr){B.push([Ve,tn,Sn,tr])>1||Ot(Ve,tn)})},Lt&&(L[Ve]=Lt(L[Ve])))}function Ot(Ve,Lt){try{!function ue(Ve){Ve.value instanceof Xt?Promise.resolve(Ve.value.v).then(Ye,Dt):$r(B[0][2],Ve)}(E[Ve](Lt))}catch(tn){$r(B[0][3],tn)}}function Ye(Ve){Ot("next",Ve)}function Dt(Ve){Ot("throw",Ve)}function $r(Ve,Lt){Ve(Lt),B.shift(),B.length&&Ot(B[0][0],B[0][1])}}function ts(S){var M,T;return M={},E("next"),E("throw",function(L){throw L}),E("return"),M[Symbol.iterator]=function(){return this},M;function E(L,B){M[L]=S[L]?function(N){return(T=!T)?{value:Xt(S[L](N)),done:!1}:B?B(N):N}:B}}function en(S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,M=S[Symbol.asyncIterator];return M?M.call(S):(S=At(S),T={},E("next"),E("throw"),E("return"),T[Symbol.asyncIterator]=function(){return this},T);function E(B){T[B]=S[B]&&function(N){return new Promise(function($,Ot){!function L(B,N,$,Ot){Promise.resolve(Ot).then(function(ue){B({value:ue,done:$})},N)}($,Ot,(N=S[B](N)).done,N.value)})}}}function Dn(S,M){return Object.defineProperty?Object.defineProperty(S,"raw",{value:M}):S.raw=M,S}var Vr=Object.create?function(S,M){Object.defineProperty(S,"default",{enumerable:!0,value:M})}:function(S,M){S.default=M},fo=function(S){return(fo=Object.getOwnPropertyNames||function(M){var T=[];for(var E in M)Object.prototype.hasOwnProperty.call(M,E)&&(T[T.length]=E);return T})(S)};function Oa(S){if(S&&S.__esModule)return S;var M={};if(null!=S)for(var T=fo(S),E=0;E<T.length;E++)"default"!==T[E]&&st(M,S,T[E]);return Vr(M,S),M}function Fo(S){return S&&S.__esModule?S:{default:S}}function er(S,M,T,E){if("a"===T&&!E)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof M?S!==M||!E:!M.has(S))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===T?E:"a"===T?E.call(S):E?E.value:M.get(S)}function Ta(S,M,T,E,L){if("m"===E)throw new TypeError("Private method is not writable");if("a"===E&&!L)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof M?S!==M||!L:!M.has(S))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===E?L.call(S,T):L?L.value=T:M.set(S,T),T}function ns(S,M){if(null===M||"object"!=typeof M&&"function"!=typeof M)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof S?M===S:S.has(M)}function qe(S,M,T){if(null!=M){if("object"!=typeof M&&"function"!=typeof M)throw new TypeError("Object expected.");var E,L;if(T){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");E=M[Symbol.asyncDispose]}if(void 0===E){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");E=M[Symbol.dispose],T&&(L=E)}if("function"!=typeof E)throw new TypeError("Object not disposable.");L&&(E=function(){try{L.call(this)}catch(B){return Promise.reject(B)}}),S.stack.push({value:M,dispose:E,async:T})}else T&&S.stack.push({async:!0});return M}var Ia="function"==typeof SuppressedError?SuppressedError:function(S,M,T){var E=new Error(T);return E.name="SuppressedError",E.error=S,E.suppressed=M,E};function Aa(S){function M(B){S.error=S.hasError?new Ia(B,S.error,"An error was suppressed during disposal."):B,S.hasError=!0}var T,E=0;return function L(){for(;T=S.stack.pop();)try{if(!T.async&&1===E)return E=0,S.stack.push(T),Promise.resolve().then(L);if(T.dispose){var B=T.dispose.call(T.value);if(T.async)return E|=2,Promise.resolve(B).then(L,function(N){return M(N),L()})}else E|=1}catch(N){M(N)}if(1===E)return S.hasError?Promise.reject(S.error):Promise.resolve();if(S.hasError)throw S.error}()}function Pa(S,M){return"string"==typeof S&&/^\.\.?\//.test(S)?S.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(T,E,L,B,N){return E?M?".jsx":".js":!L||B&&N?L+B+"."+N.toLowerCase()+"js":T}):S}const nu={__extends:ve,__assign:Ne,__rest:Ge,__decorate:I,__param:k,__esDecorate:H,__runInitializers:Q,__propKey:ne,__setFunctionName:Ee,__metadata:Re,__awaiter:De,__generator:Fe,__createBinding:st,__exportStar:zt,__values:At,__read:Ze,__spread:at,__spreadArrays:Mt,__spreadArray:Xn,__await:Xt,__asyncGenerator:wn,__asyncDelegator:ts,__asyncValues:en,__makeTemplateObject:Dn,__importStar:Oa,__importDefault:Fo,__classPrivateFieldGet:er,__classPrivateFieldSet:Ta,__classPrivateFieldIn:ns,__addDisposableResource:qe,__disposeResources:Aa,__rewriteRelativeImportExtension:Pa}}},It=>{It(It.s=219)}]);