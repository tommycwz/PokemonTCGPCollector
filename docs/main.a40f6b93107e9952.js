(self.webpackChunkPokemonTCGPCollector=self.webpackChunkPokemonTCGPCollector||[]).push([[179],{538:(Dt,se,J)=>{"use strict";function Q(t){return"function"==typeof t}function ge(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Te=ge(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ve(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class M{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Q(r))try{r()}catch(i){e=i instanceof Te?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{z(i)}catch(s){e=e??[],s instanceof Te?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Te(e)}}add(e){var n;if(e&&e!==this)if(this.closed)z(e);else{if(e instanceof M){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ve(n,e)}remove(e){const{_finalizers:n}=this;n&&Ve(n,e),e instanceof M&&e._removeParent(this)}}M.EMPTY=(()=>{const t=new M;return t.closed=!0,t})();const I=M.EMPTY;function U(t){return t instanceof M||t&&"closed"in t&&Q(t.remove)&&Q(t.add)&&Q(t.unsubscribe)}function z(t){Q(t)?t():t.unsubscribe()}const K={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},be={setTimeout(t,e,...n){const{delegate:r}=be;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=be;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ae(t){be.setTimeout(()=>{const{onUnhandledError:e}=K;if(!e)throw t;e(t)})}function _e(){}const Oe=Et("C",void 0,void 0);function Et(t,e,n){return{kind:t,value:e,error:n}}let qe=null;function et(t){if(K.useDeprecatedSynchronousErrorHandling){const e=!qe;if(e&&(qe={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=qe;if(qe=null,n)throw r}}else t()}class Gn extends M{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,U(e)&&e.add(this)):this.destination=ba}static create(e,n,r){return new qt(e,n,r)}next(e){this.isStopped?io(function Lt(t){return Et("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?io(function Xe(t){return Et("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?io(Oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Gt=Function.prototype.bind;function hn(t,e){return Gt.call(t,e)}class Yi{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){fn(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){fn(r)}else fn(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){fn(n)}}}class qt extends Gn{constructor(e,n,r){let o;if(super(),Q(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&K.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&hn(e.next,i),error:e.error&&hn(e.error,i),complete:e.complete&&hn(e.complete,i)}):o=e}this.destination=new Yi(o)}}function fn(t){K.useDeprecatedSynchronousErrorHandling?function bt(t){K.useDeprecatedSynchronousErrorHandling&&qe&&(qe.errorThrown=!0,qe.error=t)}(t):Ae(t)}function io(t,e){const{onStoppedNotification:n}=K;n&&be.setTimeout(()=>n(t,e))}const ba={closed:!0,next:_e,error:function Nr(t){throw t},complete:_e},ko="function"==typeof Symbol&&Symbol.observable||"@@observable";function qn(t){return t}function Qi(t){return 0===t.length?qn:1===t.length?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}let Ue=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){const i=function Sa(t){return t&&t instanceof Gn||function Ea(t){return t&&Q(t.next)&&Q(t.error)&&Q(t.complete)}(t)&&U(t)}(n)?n:new qt(n,r,o);return et(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Da(r))((o,i)=>{const s=new qt({next:a=>{try{n(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ko](){return this}pipe(...n){return Qi(n)(this)}toPromise(n){return new(n=Da(n))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function Da(t){var e;return null!==(e=t??K.Promise)&&void 0!==e?e:Promise}const Kc=ge(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let _=(()=>{class t extends Ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new D(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Kc}next(n){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){et(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:o,observers:i}=this;return r||o?I:(this.currentObservers=null,i.push(n),new M(()=>{this.currentObservers=null,Ve(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){const n=new Ue;return n.source=this,n}}return t.create=(e,n)=>new D(e,n),t})();class D extends _{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:I}}function S(t){return Q(t?.lift)}function b(t){return e=>{if(S(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function P(t,e,n,r,o){return new L(t,e,n,r,o)}class L extends Gn{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function O(t,e){return b((n,r)=>{let o=0;n.subscribe(P(r,i=>{r.next(t.call(e,i,o++))}))})}var N=J(582);const wt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function oe(t){return Q(t?.then)}function He(t){return Q(t[ko])}function gt(t){return Symbol.asyncIterator&&Q(t?.[Symbol.asyncIterator])}function Fr(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Tt=function ke(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Wt(t){return Q(t?.[Tt])}function pn(t){return(0,N.__asyncGenerator)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:o}=yield(0,N.__await)(n.read());if(o)return yield(0,N.__await)(void 0);yield yield(0,N.__await)(r)}}finally{n.releaseLock()}})}function Wn(t){return Q(t?.getReader)}function In(t){if(t instanceof Ue)return t;if(null!=t){if(He(t))return function $D(t){return new Ue(e=>{const n=t[ko]();if(Q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(wt(t))return function BD(t){return new Ue(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(oe(t))return function HD(t){return new Ue(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ae)})}(t);if(gt(t))return Fp(t);if(Wt(t))return function zD(t){return new Ue(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Wn(t))return function GD(t){return Fp(pn(t))}(t)}throw Fr(t)}function Fp(t){return new Ue(e=>{(function qD(t,e){var n,r,o,i;return(0,N.__awaiter)(this,void 0,void 0,function*(){try{for(n=(0,N.__asyncValues)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function hr(t,e,n,r=0,o=!1){const i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function St(t,e,n=1/0){return Q(e)?St((r,o)=>O((i,s)=>e(r,i,o,s))(In(t(r,o))),n):("number"==typeof e&&(n=e),b((r,o)=>function WD(t,e,n,r,o,i,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{i&&e.next(g),c++;let y=!1;In(n(g,u++)).subscribe(P(e,v=>{o?.(v),i?f(v):e.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<r;){const v=l.shift();s?hr(e,s,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(P(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,t,n)))}function No(t=1/0){return St(qn,t)}const Jn=new Ue(t=>t.complete());function Yc(t){return t[t.length-1]}function Lp(t){return Q(Yc(t))?t.pop():void 0}function Zi(t){return function KD(t){return t&&Q(t.schedule)}(Yc(t))?t.pop():void 0}function jp(t,e=0){return b((n,r)=>{n.subscribe(P(r,o=>hr(r,t,()=>r.next(o),e),()=>hr(r,t,()=>r.complete(),e),o=>hr(r,t,()=>r.error(o),e)))})}function Vp(t,e=0){return b((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Up(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ue(n=>{hr(n,e,()=>{const r=t[Symbol.asyncIterator]();hr(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function at(t,e){return e?function nE(t,e){if(null!=t){if(He(t))return function QD(t,e){return In(t).pipe(Vp(e),jp(e))}(t,e);if(wt(t))return function XD(t,e){return new Ue(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(oe(t))return function ZD(t,e){return In(t).pipe(Vp(e),jp(e))}(t,e);if(gt(t))return Up(t,e);if(Wt(t))return function eE(t,e){return new Ue(n=>{let r;return hr(n,e,()=>{r=t[Tt](),hr(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void n.error(s)}i?n.complete():n.next(o)},0,!0)}),()=>Q(r?.return)&&r.return()})}(t,e);if(Wn(t))return function tE(t,e){return Up(pn(t),e)}(t,e)}throw Fr(t)}(t,e):In(t)}function Qc(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new qt({next:()=>{r.unsubscribe(),t()}});return e(...n).subscribe(r)}function Pe(t){for(let e in t)if(t[e]===Pe)return e;throw Error("Could not find renamed property on target object.")}function Zc(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ne(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ne).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Xc(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const iE=Pe({__forward_ref__:Pe});function Fe(t){return t.__forward_ref__=Fe,t.toString=function(){return Ne(this())},t}function X(t){return eu(t)?t():t}function eu(t){return"function"==typeof t&&t.hasOwnProperty(iE)&&t.__forward_ref__===Fe}function tu(t){return t&&!!t.\u0275providers}const $p="https://g.co/ng/security#xss";class F extends Error{constructor(e,n){super(Ma(e,n)),this.code=e}}function Ma(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}function ae(t){return"string"==typeof t?t:null==t?"":String(t)}function Ia(t,e){throw new F(-201,!1)}function gn(t,e){null==t&&function Se(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mn(t){return{providers:t.providers||[],imports:t.imports||[]}}function xa(t){return Bp(t,Aa)||Bp(t,zp)}function Bp(t,e){return t.hasOwnProperty(e)?t[e]:null}function Hp(t){return t&&(t.hasOwnProperty(nu)||t.hasOwnProperty(fE))?t[nu]:null}const Aa=Pe({\u0275prov:Pe}),nu=Pe({\u0275inj:Pe}),zp=Pe({ngInjectableDef:Pe}),fE=Pe({ngInjectorDef:Pe});var ee=(()=>((ee=ee||{})[ee.Default=0]="Default",ee[ee.Host=1]="Host",ee[ee.Self=2]="Self",ee[ee.SkipSelf=4]="SkipSelf",ee[ee.Optional=8]="Optional",ee))();let ru;function yn(t){const e=ru;return ru=t,e}function Gp(t,e,n){const r=xa(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ee.Optional?null:void 0!==e?e:void Ia(Ne(t))}const $e=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Xi={},ou="__NG_DI_FLAG__",Ta="ngTempTokenPath",gE="ngTokenPath",mE=/\n/gm,yE="\u0275",qp="__source";let es;function Fo(t){const e=es;return es=t,e}function vE(t,e=ee.Default){if(void 0===es)throw new F(-203,!1);return null===es?Gp(t,void 0,e):es.get(t,e&ee.Optional?null:void 0,e)}function B(t,e=ee.Default){return(function pE(){return ru}()||vE)(X(t),e)}function me(t,e=ee.Default){return B(t,Oa(e))}function Oa(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function iu(t){const e=[];for(let n=0;n<t.length;n++){const r=X(t[n]);if(Array.isArray(r)){if(0===r.length)throw new F(900,!1);let o,i=ee.Default;for(let s=0;s<r.length;s++){const a=r[s],l=_E(a);"number"==typeof l?-1===l?o=a.token:i|=l:o=a}e.push(B(o,i))}else e.push(B(r))}return e}function ts(t,e){return t[ou]=e,t.prototype[ou]=e,t}function _E(t){return t[ou]}function fr(t){return{toString:t}.toString()}var Kn=(()=>((Kn=Kn||{})[Kn.OnPush=0]="OnPush",Kn[Kn.Default=1]="Default",Kn))(),Yn=(()=>{return(t=Yn||(Yn={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Yn;var t})();const pr={},De=[],Pa=Pe({\u0275cmp:Pe}),su=Pe({\u0275dir:Pe}),au=Pe({\u0275pipe:Pe}),Jp=Pe({\u0275mod:Pe}),gr=Pe({\u0275fac:Pe}),ns=Pe({__NG_ELEMENT_ID__:Pe});let wE=0;function jr(t){return fr(()=>{const e=Yp(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Kn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,data:t.data||{},encapsulation:t.encapsulation||Yn.Emulated,id:"c"+wE++,styles:t.styles||De,_:null,schemas:t.schemas||null,tView:null};Qp(n);const r=t.dependencies;return n.directiveDefs=Ra(r,!1),n.pipeDefs=Ra(r,!0),n})}function EE(t){return Me(t)||Ot(t)}function SE(t){return null!==t}function xn(t){return fr(()=>({type:t.type,bootstrap:t.bootstrap||De,declarations:t.declarations||De,imports:t.imports||De,exports:t.exports||De,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Kp(t,e){if(null==t)return pr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let o=t[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,e&&(e[o]=i)}return n}function re(t){return fr(()=>{const e=Yp(t);return Qp(e),e})}function Me(t){return t[Pa]||null}function Ot(t){return t[su]||null}function Kt(t){return t[au]||null}function tn(t,e){const n=t[Jp]||null;if(!n&&!0===e)throw new Error(`Type ${Ne(t)} does not have '\u0275mod' property.`);return n}function Yp(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,exportAs:t.exportAs||null,standalone:!0===t.standalone,selectors:t.selectors||De,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Kp(t.inputs,e),outputs:Kp(t.outputs)}}function Qp(t){t.features?.forEach(e=>e(t))}function Ra(t,e){if(!t)return null;const n=e?Kt:EE;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(SE)}const mr=0,H=1,fe=2,Ye=3,An=4,so=5,Pt=6,jo=7,tt=8,ka=9,Na=10,ye=11,lu=12,rs=13,Zp=14,Vo=15,Rt=16,os=17,Uo=18,Qn=19,is=20,Xp=21,Be=22,cu=1,eg=2,Fa=7,La=8,$o=9,jt=10;function nn(t){return Array.isArray(t)&&"object"==typeof t[cu]}function Tn(t){return Array.isArray(t)&&!0===t[cu]}function uu(t){return 0!=(4&t.flags)}function ss(t){return t.componentOffset>-1}function ja(t){return 1==(1&t.flags)}function On(t){return!!t.template}function IE(t){return 0!=(256&t[fe])}function ao(t,e){return t.hasOwnProperty(gr)?t[gr]:null}class TE{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function vn(){return rg}function rg(t){return t.type.prototype.ngOnChanges&&(t.setInput=PE),OE}function OE(){const t=ig(this),e=t?.current;if(e){const n=t.previous;if(n===pr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function PE(t,e,n,r){const o=this.declaredInputs[n],i=ig(t)||function RE(t,e){return t[og]=e}(t,{previous:pr,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[o];s[o]=new TE(l&&l.currentValue,e,a===pr),t[r]=e}vn.ngInherit=!0;const og="__ngSimpleChanges__";function ig(t){return t[og]||null}const _n=function(t,e,n){};function Mt(t){for(;Array.isArray(t);)t=t[mr];return t}function Va(t,e){return Mt(e[t])}function rn(t,e){return Mt(e[t.index])}function lg(t,e){return t.data[e]}function Yt(t,e){const n=e[t];return nn(n)?n:n[mr]}function Ua(t){return 64==(64&t[fe])}function Vr(t,e){return null==e?null:t[e]}function cg(t){t[Uo]=0}function hu(t,e){t[so]+=e;let n=t,r=t[Ye];for(;null!==r&&(1===e&&1===n[so]||-1===e&&0===n[so]);)r[so]+=e,n=r,r=r[Ye]}const le={lFrame:_g(null),bindingsEnabled:!0};function dg(){return le.bindingsEnabled}function R(){return le.lFrame.lView}function we(){return le.lFrame.tView}function lo(t){return le.lFrame.contextLView=t,t[tt]}function co(t){return le.lFrame.contextLView=null,t}function It(){let t=hg();for(;null!==t&&64===t.type;)t=t.parent;return t}function hg(){return le.lFrame.currentTNode}function Zn(t,e){const n=le.lFrame;n.currentTNode=t,n.isParent=e}function fu(){return le.lFrame.isParent}function Ho(){return le.lFrame.bindingIndex++}function vr(t){const e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function qE(t,e){const n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,gu(e)}function gu(t){le.lFrame.currentDirectiveIndex=t}function mg(){return le.lFrame.currentQueryIndex}function yu(t){le.lFrame.currentQueryIndex=t}function JE(t){const e=t[H];return 2===e.type?e.declTNode:1===e.type?t[Pt]:null}function yg(t,e,n){if(n&ee.SkipSelf){let o=e,i=t;for(;!(o=o.parent,null!==o||n&ee.Host||(o=JE(i),null===o||(i=i[Vo],10&o.type))););if(null===o)return!1;e=o,t=i}const r=le.lFrame=vg();return r.currentTNode=e,r.lView=t,!0}function vu(t){const e=vg(),n=t[H];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function vg(){const t=le.lFrame,e=null===t?null:t.child;return null===e?_g(t):e}function _g(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Cg(){const t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const bg=Cg;function _u(){const t=Cg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ut(){return le.lFrame.selectedIndex}function uo(t){le.lFrame.selectedIndex=t}function We(){const t=le.lFrame;return lg(t.tView,t.selectedIndex)}function $a(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(t.contentHooks??(t.contentHooks=[])).push(-n,s),a&&((t.contentHooks??(t.contentHooks=[])).push(n,a),(t.contentCheckHooks??(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks??(t.viewHooks=[])).push(-n,l),c&&((t.viewHooks??(t.viewHooks=[])).push(n,c),(t.viewCheckHooks??(t.viewCheckHooks=[])).push(n,c)),null!=u&&(t.destroyHooks??(t.destroyHooks=[])).push(n,u)}}function Ba(t,e,n){wg(t,e,3,n)}function Ha(t,e,n,r){(3&t[fe])===n&&wg(t,e,n,r)}function Cu(t,e){let n=t[fe];(3&n)===e&&(n&=2047,n+=1,t[fe]=n)}function wg(t,e,n,r){const i=r??-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&t[Uo]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[Uo]+=65536),(a<i||-1==i)&&(rS(t,n,e,l),t[Uo]=(4294901760&t[Uo])+l+2),l++}function rS(t,e,n,r){const o=n[r]<0,i=n[r+1],a=t[o?-n[r]:n[r]];if(o){if(t[fe]>>11<t[Uo]>>16&&(3&t[fe])===e){t[fe]+=2048,_n(4,a,i);try{i.call(a)}finally{_n(5,a,i)}}}else{_n(4,a,i);try{i.call(a)}finally{_n(5,a,i)}}}const zo=-1;class ls{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function wu(t,e,n){let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{const i=o,s=n[++r];Eg(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}return r}function Dg(t){return 3===t||4===t||6===t}function Eg(t){return 64===t.charCodeAt(0)}function cs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?n=o:0===n||Sg(t,n,o,null,-1===n||2===n?e[++r]:null)}}return t}function Sg(t,e,n,r,o){let i=0,s=t.length;if(-1===e)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==o&&(t[i+1]=o));if(r===t[i+1])return void(t[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==o&&t.splice(i++,0,o)}function Mg(t){return t!==zo}function za(t){return 32767&t}function Ga(t,e){let n=function aS(t){return t>>16}(t),r=e;for(;n>0;)r=r[Vo],n--;return r}let Du=!0;function qa(t){const e=Du;return Du=t,e}const Ig=255,xg=5;let lS=0;const Xn={};function Wa(t,e){const n=Ag(t,e);if(-1!==n)return n;const r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,Eu(r.data,t),Eu(e,null),Eu(r.blueprint,null));const o=Su(t,e),i=t.injectorIndex;if(Mg(o)){const s=za(o),a=Ga(o,e),l=a[H].data;for(let c=0;c<8;c++)e[i+c]=a[s+c]|l[s+c]}return e[i+8]=o,i}function Eu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ag(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Su(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;null!==o;){if(r=Fg(o),null===r)return zo;if(n++,o=o[Vo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return zo}function Mu(t,e,n){!function cS(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ns)&&(r=n[ns]),null==r&&(r=n[ns]=lS++);const o=r&Ig;e.data[t+(o>>xg)]|=1<<o}(t,e,n)}function Tg(t,e,n){if(n&ee.Optional||void 0!==t)return t;Ia()}function Og(t,e,n,r){if(n&ee.Optional&&void 0===r&&(r=null),!(n&(ee.Self|ee.Host))){const o=t[ka],i=yn(void 0);try{return o?o.get(e,r,n&ee.Optional):Gp(e,r,n&ee.Optional)}finally{yn(i)}}return Tg(r,0,n)}function Pg(t,e,n,r=ee.Default,o){if(null!==t){if(1024&e[fe]){const s=function pS(t,e,n,r,o){let i=t,s=e;for(;null!==i&&null!==s&&1024&s[fe]&&!(256&s[fe]);){const a=Rg(i,s,n,r|ee.Self,Xn);if(a!==Xn)return a;let l=i.parent;if(!l){const c=s[Xp];if(c){const u=c.get(n,Xn,r);if(u!==Xn)return u}l=Fg(s),s=s[Vo]}i=l}return o}(t,e,n,r,Xn);if(s!==Xn)return s}const i=Rg(t,e,n,r,Xn);if(i!==Xn)return i}return Og(e,n,r,o)}function Rg(t,e,n,r,o){const i=function hS(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ns)?t[ns]:void 0;return"number"==typeof e?e>=0?e&Ig:fS:e}(n);if("function"==typeof i){if(!yg(e,t,r))return r&ee.Host?Tg(o,0,r):Og(e,n,r,o);try{const s=i(r);if(null!=s||r&ee.Optional)return s;Ia()}finally{bg()}}else if("number"==typeof i){let s=null,a=Ag(t,e),l=zo,c=r&ee.Host?e[Rt][Pt]:null;for((-1===a||r&ee.SkipSelf)&&(l=-1===a?Su(t,e):e[a+8],l!==zo&&Ng(r,!1)?(s=e[H],a=za(l),e=Ga(l,e)):a=-1);-1!==a;){const u=e[H];if(kg(i,a,u.data)){const d=dS(a,e,n,s,r,c);if(d!==Xn)return d}l=e[a+8],l!==zo&&Ng(r,e[H].data[a+8]===c)&&kg(i,a,e)?(s=u,a=za(l),e=Ga(l,e)):a=-1}}return o}function dS(t,e,n,r,o,i){const s=e[H],a=s.data[t+8],u=Ja(a,s,n,null==r?ss(a)&&Du:r!=s&&0!=(3&a.type),o&ee.Host&&i===a);return null!==u?ho(e,s,u,a):Xn}function Ja(t,e,n,r,o){const i=t.providerIndexes,s=e.data,a=1048575&i,l=t.directiveStart,u=i>>20,h=o?a+u:t.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(o){const f=s[l];if(f&&On(f)&&f.type===n)return l}return null}function ho(t,e,n,r){let o=t[n];const i=e.data;if(function oS(t){return t instanceof ls}(o)){const s=o;s.resolving&&function sE(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new F(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ee(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ae(t)}(i[n]));const a=qa(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?yn(s.injectImpl):null;yg(t,r,ee.Default);try{o=t[n]=s.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function nS(t,e,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=rg(e);(n.preOrderHooks??(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks??(n.preOrderHooks=[])).push(0-t,o),i&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t,i))}(n,i[n],e)}finally{null!==l&&yn(l),qa(a),s.resolving=!1,bg()}}return o}function kg(t,e,n){return!!(n[e+(t>>xg)]&1<<t)}function Ng(t,e){return!(t&ee.Self||t&ee.Host&&e)}class Go{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Pg(this._tNode,this._lView,e,Oa(r),n)}}function fS(){return new Go(It(),R())}function xt(t){return fr(()=>{const e=t.prototype.constructor,n=e[gr]||Iu(e),r=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){const i=o[gr]||Iu(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Iu(t){return eu(t)?()=>{const e=Iu(X(t));return e&&e()}:ao(t)}function Fg(t){const e=t[H],n=e.type;return 2===n?e.declTNode:1===n?t[Pt]:null}const Wo="__parameters__";function Ko(t,e,n){return fr(()=>{const r=function xu(t){return function(...n){if(t){const r=t(...n);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Wo)?l[Wo]:Object.defineProperty(l,Wo,{value:[]})[Wo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class q{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function fo(t,e){t.forEach(n=>Array.isArray(n)?fo(n,e):e(n))}function jg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ya(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function on(t,e,n){let r=Yo(t,e);return r>=0?t[1|r]=n:(r=~r,function vS(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(1===o)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;)t[o]=t[o-2],o--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Tu(t,e){const n=Yo(t,e);if(n>=0)return t[1|n]}function Yo(t,e){return function Vg(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){const i=r+(o-r>>1),s=t[i<<n];if(e===s)return i<<n;s>e?o=i:r=i+1}return~(o<<n)}(t,e,1)}const fs=ts(Ko("Optional"),8),ps=ts(Ko("SkipSelf"),4);var Qt=(()=>((Qt=Qt||{})[Qt.Important=1]="Important",Qt[Qt.DashCase=2]="DashCase",Qt))();const Fu=new Map;let US=0;const ju="__ngContext__";function kt(t,e){nn(e)?(t[ju]=e[is],function BS(t){Fu.set(t[is],t)}(e)):t[ju]=e}let Vu;function Uu(t,e){return Vu(t,e)}function vs(t){const e=t[Ye];return Tn(e)?e[Ye]:e}function $u(t){return im(t[rs])}function Bu(t){return im(t[An])}function im(t){for(;null!==t&&!Tn(t);)t=t[An];return t}function Zo(t,e,n,r,o){if(null!=r){let i,s=!1;Tn(r)?i=r:nn(r)&&(s=!0,r=r[mr]);const a=Mt(r);0===t&&null!==n?null==o?dm(e,n,a):po(e,n,a,o||null,!0):1===t&&null!==n?po(e,n,a,o||null,!0):2===t?function Ku(t,e,n){const r=el(t,e);r&&function lM(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=i&&function dM(t,e,n,r,o){const i=n[Fa];i!==Mt(n)&&Zo(e,t,r,i,o);for(let a=jt;a<n.length;a++){const l=n[a];_s(l[H],l,t,e,r,i)}}(e,t,i,n,o)}}function zu(t,e,n){return t.createElement(e,n)}function am(t,e){const n=t[$o],r=n.indexOf(e),o=e[Ye];512&e[fe]&&(e[fe]&=-513,hu(o,-1)),n.splice(r,1)}function Gu(t,e){if(t.length<=jt)return;const n=jt+e,r=t[n];if(r){const o=r[os];null!==o&&o!==t&&am(o,r),e>0&&(t[n-1][An]=r[An]);const i=Ya(t,jt+e);!function eM(t,e){_s(t,e,e[ye],2,null,null),e[mr]=null,e[Pt]=null}(r[H],r);const s=i[Qn];null!==s&&s.detachView(i[H]),r[Ye]=null,r[An]=null,r[fe]&=-65}return r}function lm(t,e){if(!(128&e[fe])){const n=e[ye];n.destroyNode&&_s(t,e,n,3,null,null),function rM(t){let e=t[rs];if(!e)return qu(t[H],t);for(;e;){let n=null;if(nn(e))n=e[rs];else{const r=e[jt];r&&(n=r)}if(!n){for(;e&&!e[An]&&e!==t;)nn(e)&&qu(e[H],e),e=e[Ye];null===e&&(e=t),nn(e)&&qu(e[H],e),n=e&&e[An]}e=n}}(e)}}function qu(t,e){if(!(128&e[fe])){e[fe]&=-65,e[fe]|=128,function aM(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const o=e[n[r]];if(!(o instanceof ls)){const i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],l=i[s+1];_n(4,a,l);try{l.call(a)}finally{_n(5,a,l)}}else{_n(4,o,i);try{i.call(o)}finally{_n(5,o,i)}}}}}(t,e),function sM(t,e){const n=t.cleanup,r=e[jo];let o=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const s=n[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=n[i+1]];n[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();e[jo]=null}}(t,e),1===e[H].type&&e[ye].destroy();const n=e[os];if(null!==n&&Tn(e[Ye])){n!==e[Ye]&&am(n,e);const r=e[Qn];null!==r&&r.detachView(t)}!function HS(t){Fu.delete(t[is])}(e)}}function cm(t,e,n){return function um(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[mr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=t.data[r.directiveStart+o];if(i===Yn.None||i===Yn.Emulated)return null}return rn(r,n)}}(t,e.parent,n)}function po(t,e,n,r,o){t.insertBefore(e,n,r,o)}function dm(t,e,n){t.appendChild(e,n)}function hm(t,e,n,r,o){null!==r?po(t,e,n,r,o):dm(t,e,n)}function el(t,e){return t.parentNode(e)}let Wu,Zu,ol,gm=function pm(t,e,n){return 40&t.type?rn(t,n):null};function tl(t,e,n,r){const o=cm(t,r,e),i=e[ye],a=function fm(t,e,n){return gm(t,e,n)}(r.parent||e[Pt],r,e);if(null!=o)if(Array.isArray(n))for(let l=0;l<n.length;l++)hm(i,o,n[l],a,!1);else hm(i,o,n,a,!1);void 0!==Wu&&Wu(i,r,e,n,o)}function nl(t,e){if(null!==e){const n=e.type;if(3&n)return rn(e,t);if(4&n)return Ju(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return nl(t,r);{const o=t[e.index];return Tn(o)?Ju(-1,o):Mt(o)}}if(32&n)return Uu(e,t)()||Mt(t[e.index]);{const r=ym(t,e);return null!==r?Array.isArray(r)?r[0]:nl(vs(t[Rt]),r):nl(t,e.next)}}return null}function ym(t,e){return null!==e?t[Rt][Pt].projection[e.projection]:null}function Ju(t,e){const n=jt+t+1;if(n<e.length){const r=e[n],o=r[H].firstChild;if(null!==o)return nl(r,o)}return e[Fa]}function Yu(t,e,n,r,o,i,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&kt(Mt(a),r),n.flags|=2),32!=(32&n.flags))if(8&l)Yu(t,e,n.child,r,o,i,!1),Zo(e,t,o,a,i);else if(32&l){const c=Uu(n,r);let u;for(;u=c();)Zo(e,t,o,u,i);Zo(e,t,o,a,i)}else 16&l?vm(t,e,r,n,o,i):Zo(e,t,o,a,i);n=s?n.projectionNext:n.next}}function _s(t,e,n,r,o,i){Yu(n,r,t.firstChild,e,o,i,!1)}function vm(t,e,n,r,o,i){const s=n[Rt],l=s[Pt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Zo(e,t,o,l[c],i);else Yu(t,e,l,s[Ye],o,i,!0)}function _m(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Cm(t,e,n){const{mergedAttrs:r,classes:o,styles:i}=n;null!==r&&wu(t,e,r),null!==o&&_m(t,e,o),null!==i&&function fM(t,e,n){t.setAttribute(e,"style",n)}(t,e,i)}function Em(t){return function Xu(){if(void 0===ol&&(ol=null,$e.trustedTypes))try{ol=$e.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ol}()?.createScriptURL(t)||t}class Sm{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$p})`}}function Ur(t){return t instanceof Sm?t.changingThisBreaksApplicationSecurity:t}function Cs(t,e){const n=function DM(t){return t instanceof Sm&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${$p})`)}return n===e}const IM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var lt=(()=>((lt=lt||{})[lt.NONE=0]="NONE",lt[lt.HTML=1]="HTML",lt[lt.STYLE=2]="STYLE",lt[lt.SCRIPT=3]="SCRIPT",lt[lt.URL=4]="URL",lt[lt.RESOURCE_URL=5]="RESOURCE_URL",lt))();function od(t){const e=ws();return e?e.sanitize(lt.URL,t)||"":Cs(t,"URL")?Ur(t):function ed(t){return(t=String(t)).match(IM)?t:"unsafe:"+t}(ae(t))}function Pm(t){const e=ws();if(e)return Em(e.sanitize(lt.RESOURCE_URL,t)||"");if(Cs(t,"ResourceURL"))return Em(Ur(t));throw new F(904,!1)}function ws(){const t=R();return t&&t[lu]}const sl=new q("ENVIRONMENT_INITIALIZER"),km=new q("INJECTOR",-1),Nm=new q("INJECTOR_DEF_TYPES");class Fm{get(e,n=Xi){if(n===Xi){const r=new Error(`NullInjectorError: No provider for ${Ne(e)}!`);throw r.name="NullInjectorError",r}return n}}function $M(...t){return{\u0275providers:Lm(0,t),\u0275fromNgModule:!0}}function Lm(t,...e){const n=[],r=new Set;let o;return fo(e,i=>{const s=i;id(s,n,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&jm(o,n),n}function jm(t,e){for(let n=0;n<t.length;n++){const{providers:o}=t[n];sd(o,i=>{e.push(i)})}}function id(t,e,n,r){if(!(t=X(t)))return!1;let o=null,i=Hp(t);const s=!i&&Me(t);if(i||s){if(s&&!s.standalone)return!1;o=t}else{const l=t.ngModule;if(i=Hp(l),!i)return!1;o=l}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)id(c,e,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{fo(i.imports,u=>{id(u,e,n,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&jm(c,e)}if(!a){const c=ao(o)||(()=>new o);e.push({provide:o,useFactory:c,deps:De},{provide:Nm,useValue:o,multi:!0},{provide:sl,useValue:()=>B(o),multi:!0})}const l=i.providers;null==l||a||sd(l,u=>{e.push(u)})}}return o!==t&&void 0!==t.providers}function sd(t,e){for(let n of t)tu(n)&&(n=n.\u0275providers),Array.isArray(n)?sd(n,e):e(n)}const BM=Pe({provide:String,useValue:Pe});function ad(t){return null!==t&&"object"==typeof t&&BM in t}function go(t){return"function"==typeof t}const ld=new q("Set Injector scope."),al={},zM={};let cd;function ll(){return void 0===cd&&(cd=new Fm),cd}class er{}class $m extends er{get destroyed(){return this._destroyed}constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dd(e,s=>this.processProvider(s)),this.records.set(km,ei(void 0,this)),o.has("environment")&&this.records.set(er,ei(void 0,this));const i=this.records.get(ld);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Nm.multi,De,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=Fo(this),r=yn(void 0);try{return e()}finally{Fo(n),yn(r)}}get(e,n=Xi,r=ee.Default){this.assertNotDestroyed(),r=Oa(r);const o=Fo(this),i=yn(void 0);try{if(!(r&ee.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function KM(t){return"function"==typeof t||"object"==typeof t&&t instanceof q}(e)&&xa(e);a=l&&this.injectableDefInScope(l)?ei(ud(e),al):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&ee.Self?ll():this.parent).get(e,n=r&ee.Optional&&n===Xi?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Ta]=s[Ta]||[]).unshift(Ne(e)),o)throw s;return function CE(t,e,n,r){const o=t[Ta];throw e[qp]&&o.unshift(e[qp]),t.message=function bE(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==yE?t.slice(2):t;let o=Ne(e);if(Array.isArray(e))o=e.map(Ne).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Ne(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(mE,"\n  ")}`}("\n"+t.message,o,n,r),t[gE]=o,t[Ta]=null,t}(s,e,"R3InjectorError",this.source)}throw s}finally{yn(i),Fo(o)}}resolveInjectorInitializers(){const e=Fo(this),n=yn(void 0);try{const r=this.get(sl.multi,De,ee.Self);for(const o of r)o()}finally{Fo(e),yn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ne(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(e){let n=go(e=X(e))?e:X(e&&e.provide);const r=function qM(t){return ad(t)?ei(void 0,t.useValue):ei(Bm(t),al)}(e);if(go(e)||!0!==e.multi)this.records.get(n);else{let o=this.records.get(n);o||(o=ei(void 0,al,!0),o.factory=()=>iu(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===al&&(n.value=zM,n.value=n.factory()),"object"==typeof n.value&&n.value&&function JM(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=X(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function ud(t){const e=xa(t),n=null!==e?e.factory:ao(t);if(null!==n)return n;if(t instanceof q)throw new F(204,!1);if(t instanceof Function)return function GM(t){const e=t.length;if(e>0)throw function hs(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new F(204,!1);const n=function hE(t){return t&&(t[Aa]||t[zp])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new F(204,!1)}function Bm(t,e,n){let r;if(go(t)){const o=X(t);return ao(o)||ud(o)}if(ad(t))r=()=>X(t.useValue);else if(function Um(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...iu(t.deps||[]));else if(function Vm(t){return!(!t||!t.useExisting)}(t))r=()=>B(X(t.useExisting));else{const o=X(t&&(t.useClass||t.provide));if(!function WM(t){return!!t.deps}(t))return ao(o)||ud(o);r=()=>new o(...iu(t.deps))}return r}function ei(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function dd(t,e){for(const n of t)Array.isArray(n)?dd(n,e):n&&tu(n)?dd(n.\u0275providers,e):e(n)}class YM{}class Hm{}class ZM{resolveComponentFactory(e){throw function QM(t){const e=Error(`No component factory found for ${Ne(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let Ds=(()=>{class t{}return t.NULL=new ZM,t})();function XM(){return ti(It(),R())}function ti(t,e){return new sn(rn(t,e))}let sn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=XM,t})();function eI(t){return t instanceof sn?t.nativeElement:t}class Gm{}let Cr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function tI(){const t=R(),n=Yt(It().index,t);return(nn(n)?n:t)[ye]}(),t})(),nI=(()=>{class t{}return t.\u0275prov=G({token:t,providedIn:"root",factory:()=>null}),t})();class Es{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const rI=new Es("15.2.10"),hd={},fd="ngOriginalError";function pd(t){return t[fd]}class ni{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&pd(e);for(;n&&pd(n);)n=pd(n);return n||null}}function br(t){return t instanceof Function?t():t}function Wm(t,e,n){let r=t.length;for(;;){const o=t.indexOf(e,n);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}const Jm="ng-template";function pI(t,e,n){let r=0,o=!0;for(;r<t.length;){let i=t[r++];if("string"==typeof i&&o){const s=t[r++];if(n&&"class"===i&&-1!==Wm(s.toLowerCase(),e,0))return!0}else{if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function Km(t){return 4===t.type&&t.value!==Jm}function gI(t,e,n){return e===(4!==t.type||n?t.value:Jm)}function mI(t,e,n){let r=4;const o=t.attrs||[],i=function _I(t){for(let e=0;e<t.length;e++)if(Dg(t[e]))return e;return t.length}(o);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!gI(t,l,n)||""===l&&1===e.length){if(Pn(r))return!1;s=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!pI(t.attrs,c,n)){if(Pn(r))return!1;s=!0}continue}const d=yI(8&r?"class":l,o,Km(t),n);if(-1===d){if(Pn(r))return!1;s=!0;continue}if(""!==c){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==Wm(f,c,0)||2&r&&c!==h){if(Pn(r))return!1;s=!0}}}}else{if(!s&&!Pn(r)&&!Pn(l))return!1;if(s&&Pn(l))continue;s=!1,r=l|1&r}}return Pn(r)||s}function Pn(t){return 0==(1&t)}function yI(t,e,n,r){if(null===e)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){const s=e[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function CI(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ym(t,e,n=!1){for(let r=0;r<e.length;r++)if(mI(t,e[r],n))return!0;return!1}function Qm(t,e){return t?":not("+e.trim()+")":e}function wI(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Pn(s)&&(e+=Qm(i,o),o=""),r=s,i=i||!Pn(r);n++}return""!==o&&(e+=Qm(i,o)),e}const ce={};function V(t){Zm(we(),R(),Ut()+t,!1)}function Zm(t,e,n,r){if(!r)if(3==(3&e[fe])){const i=t.preOrderCheckHooks;null!==i&&Ba(e,i,n)}else{const i=t.preOrderHooks;null!==i&&Ha(e,i,0,n)}uo(n)}function ny(t,e=null,n=null,r){const o=ry(t,e,n,r);return o.resolveInjectorInitializers(),o}function ry(t,e=null,n=null,r,o=new Set){const i=[n||De,$M(t)];return r=r||("object"==typeof t?void 0:Ne(t)),new $m(i,e||ll(),r||null,o)}let tr=(()=>{class t{static create(n,r){if(Array.isArray(n))return ny({name:""},r,n,"");{const o=n.name??"";return ny({name:o},n.parent,n.providers,o)}}}return t.THROW_IF_NOT_FOUND=Xi,t.NULL=new Fm,t.\u0275prov=G({token:t,providedIn:"any",factory:()=>B(km)}),t.__NG_ELEMENT_ID__=-1,t})();function x(t,e=ee.Default){const n=R();return null===n?B(t,e):Pg(It(),n,X(t),e)}function dy(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r+1];if(-1!==i){const s=t.data[i];yu(n[r]),s.contentQueries(2,e[i],i)}}}function ul(t,e,n,r,o,i,s,a,l,c,u){const d=e.blueprint.slice();return d[mr]=o,d[fe]=76|r,(null!==u||t&&1024&t[fe])&&(d[fe]|=1024),cg(d),d[Ye]=d[Vo]=t,d[tt]=n,d[Na]=s||t&&t[Na],d[ye]=a||t&&t[ye],d[lu]=l||t&&t[lu]||null,d[ka]=c||t&&t[ka]||null,d[Pt]=i,d[is]=function $S(){return US++}(),d[Xp]=u,d[Rt]=2==e.type?t[Rt]:d,d}function ii(t,e,n,r,o){let i=t.data[e];if(null===i)i=function _d(t,e,n,r,o){const i=hg(),s=fu(),l=t.data[e]=function JI(t,e,n,r,o,i){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,e,r,o);return null===t.firstChild&&(t.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(t,e,n,r,o),function GE(){return le.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=function as(){const t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return Zn(i,!0),i}function Ss(t,e,n,r){if(0===n)return-1;const o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Cd(t,e,n){vu(e);try{const r=t.viewQuery;null!==r&&Ad(1,r,n);const o=t.template;null!==o&&hy(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&dy(t,e),t.staticViewQueries&&Ad(2,t.viewQuery,n);const i=t.components;null!==i&&function GI(t,e){for(let n=0;n<e.length;n++)px(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[fe]&=-5,_u()}}function dl(t,e,n,r){const o=e[fe];if(128!=(128&o)){vu(e);try{cg(e),function pg(t){return le.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&hy(t,e,n,2,r);const s=3==(3&o);if(s){const c=t.preOrderCheckHooks;null!==c&&Ba(e,c,null)}else{const c=t.preOrderHooks;null!==c&&Ha(e,c,0,null),Cu(e,0)}if(function hx(t){for(let e=$u(t);null!==e;e=Bu(e)){if(!e[eg])continue;const n=e[$o];for(let r=0;r<n.length;r++){const o=n[r];512&o[fe]||hu(o[Ye],1),o[fe]|=512}}}(e),function dx(t){for(let e=$u(t);null!==e;e=Bu(e))for(let n=jt;n<e.length;n++){const r=e[n],o=r[H];Ua(r)&&dl(o,r,o.template,r[tt])}}(e),null!==t.contentQueries&&dy(t,e),s){const c=t.contentCheckHooks;null!==c&&Ba(e,c)}else{const c=t.contentHooks;null!==c&&Ha(e,c,1),Cu(e,1)}!function HI(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)uo(~o);else{const i=o,s=n[++r],a=n[++r];qE(s,i),a(2,e[i])}}}finally{uo(-1)}}(t,e);const a=t.components;null!==a&&function zI(t,e){for(let n=0;n<e.length;n++)fx(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&Ad(2,l,r),s){const c=t.viewCheckHooks;null!==c&&Ba(e,c)}else{const c=t.viewHooks;null!==c&&Ha(e,c,2),Cu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[fe]&=-41,512&e[fe]&&(e[fe]&=-513,hu(e[Ye],-1))}finally{_u()}}}function hy(t,e,n,r,o){const i=Ut(),s=2&r;try{uo(-1),s&&e.length>Be&&Zm(t,e,Be,!1),_n(s?2:0,o),n(r,o)}finally{uo(i),_n(s?3:1,o)}}function bd(t,e,n){if(uu(e)){const o=e.directiveEnd;for(let i=e.directiveStart;i<o;i++){const s=t.data[i];s.contentQueries&&s.contentQueries(1,n[i],i)}}}function wd(t,e,n){dg()&&(function tx(t,e,n,r){const o=n.directiveStart,i=n.directiveEnd;ss(n)&&function lx(t,e,n){const r=rn(e,t),o=fy(n),i=t[Na],s=hl(t,ul(t,o,null,n.onPush?32:16,r,e,i,i.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||Wa(n,e),kt(r,e);const s=n.initialInputs;for(let a=o;a<i;a++){const l=t.data[a],c=ho(e,t,a,n);kt(c,e),null!==s&&cx(0,a-o,c,l,0,s),On(l)&&(Yt(n.index,e)[tt]=ho(e,t,a,n))}}(t,e,n,rn(n,e)),64==(64&n.flags)&&vy(t,e,n))}function Dd(t,e,n=rn){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?n(e,t):t[s];t[o++]=a}}}function fy(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ed(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ed(t,e,n,r,o,i,s,a,l,c){const u=Be+r,d=u+o,h=function qI(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ce);return n}(u,d),f="function"==typeof c?c():c;return h[H]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function py(t,e,n,r){const o=Cy(e);null===n?o.push(r):(o.push(n),t.firstCreatePass&&by(t).push(r,o.length-1))}function gy(t,e,n,r){for(let o in t)if(t.hasOwnProperty(o)){n=null===n?{}:n;const i=t[o];null===r?my(n,e,o,i):r.hasOwnProperty(o)&&my(n,e,r[o],i)}return n}function my(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Sd(t,e,n,r){if(dg()){const o=null===r?null:{"":-1},i=function rx(t,e){const n=t.directiveRegistry;let r=null,o=null;if(n)for(let i=0;i<n.length;i++){const s=n[i];if(Ym(e,s.selectors,!1))if(r||(r=[]),On(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Md(t,e,a.length)}else r.unshift(s),Md(t,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(t,n);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&yy(t,e,n,s,o,a),o&&function ox(t,e,n){if(e){const r=t.localNames=[];for(let o=0;o<e.length;o+=2){const i=n[e[o+1]];if(null==i)throw new F(-301,!1);r.push(e[o],i)}}}(n,r,o)}n.mergedAttrs=cs(n.mergedAttrs,n.attrs)}function yy(t,e,n,r,o,i){for(let c=0;c<r.length;c++)Mu(Wa(n,e),t,r[c].type);!function sx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Ss(t,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];n.mergedAttrs=cs(n.mergedAttrs,u.hostAttrs),ax(t,n,e,l,u),ix(l,u,o),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function KI(t,e,n){const o=e.directiveEnd,i=t.data,s=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<o;u++){const d=i[u],h=n?n.get(d):null,p=h?h.outputs:null;l=gy(d.inputs,u,l,h?h.inputs:null),c=gy(d.outputs,u,c,p);const g=null===l||null===s||Km(e)?null:ux(l,u,s);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,i)}function vy(t,e,n){const r=n.directiveStart,o=n.directiveEnd,i=n.index,s=function WE(){return le.lFrame.currentDirectiveIndex}();try{uo(i);for(let a=r;a<o;a++){const l=t.data[a],c=e[a];gu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&nx(l,c)}}finally{uo(-1),gu(s)}}function nx(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Md(t,e,n){e.componentOffset=n,(t.components??(t.components=[])).push(e.index)}function ix(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;On(e)&&(n[""]=t)}}function ax(t,e,n,r,o){t.data[r]=o;const i=o.factory||(o.factory=ao(o.type)),s=new ls(i,On(o),x);t.blueprint[r]=s,n[r]=s,function XI(t,e,n,r,o){const i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function ex(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,i)}}(t,e,r,Ss(t,n,o.hostVars,ce),o)}function nr(t,e,n,r,o,i){const s=rn(t,e);!function Id(t,e,n,r,o,i,s){if(null==i)t.removeAttribute(e,o,n);else{const a=null==s?ae(i):s(i,r||"",o);t.setAttribute(e,o,a,n)}}(e[ye],s,i,t.value,n,r,o)}function cx(t,e,n,r,o,i){const s=i[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(n,d,c,u):n[u]=d}}}function ux(t,e,n){let r=null,o=0;for(;o<n.length;){const i=n[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(t.hasOwnProperty(i)){null===r&&(r=[]);const s=t[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],n[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function _y(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null]}function fx(t,e){const n=Yt(e,t);if(Ua(n)){const r=n[H];48&n[fe]?dl(r,n,r.template,n[tt]):n[so]>0&&xd(n)}}function xd(t){for(let r=$u(t);null!==r;r=Bu(r))for(let o=jt;o<r.length;o++){const i=r[o];if(Ua(i))if(512&i[fe]){const s=i[H];dl(s,i,s.template,i[tt])}else i[so]>0&&xd(i)}const n=t[H].components;if(null!==n)for(let r=0;r<n.length;r++){const o=Yt(n[r],t);Ua(o)&&o[so]>0&&xd(o)}}function px(t,e){const n=Yt(e,t),r=n[H];(function gx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Cd(r,n,n[tt])}function hl(t,e){return t[rs]?t[Zp][An]=e:t[rs]=e,t[Zp]=e,e}function fl(t){for(;t;){t[fe]|=32;const e=vs(t);if(IE(t)&&!e)return t;t=e}return null}function pl(t,e,n,r=!0){const o=e[Na];o.begin&&o.begin();try{dl(t,e,t.template,n)}catch(s){throw r&&Dy(e,s),s}finally{o.end&&o.end()}}function Ad(t,e,n){yu(0),e(t,n)}function Cy(t){return t[jo]||(t[jo]=[])}function by(t){return t.cleanup||(t.cleanup=[])}function Dy(t,e){const n=t[ka],r=n?n.get(ni,null):null;r&&r.handleError(e)}function Td(t,e,n,r,o){for(let i=0;i<n.length;){const s=n[i++],a=n[i++],l=e[s],c=t.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function wr(t,e,n){const r=Va(e,t);!function sm(t,e,n){t.setValue(e,n)}(t[ye],r,n)}function gl(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=Xc(o,a):2==i&&(r=Xc(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function ml(t,e,n,r,o=!1){for(;null!==n;){const i=e[n.index];if(null!==i&&r.push(Mt(i)),Tn(i))for(let a=jt;a<i.length;a++){const l=i[a],c=l[H].firstChild;null!==c&&ml(l[H],l,c,r)}const s=n.type;if(8&s)ml(t,e,n.child,r);else if(32&s){const a=Uu(n,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=ym(e,n);if(Array.isArray(a))r.push(...a);else{const l=vs(e[Rt]);ml(l[H],l,a,r,!0)}}n=o?n.projectionNext:n.next}return r}class Ms{get rootNodes(){const e=this._lView,n=e[H];return ml(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tt]}set context(e){this._lView[tt]=e}get destroyed(){return 128==(128&this._lView[fe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ye];if(Tn(e)){const n=e[La],r=n?n.indexOf(this):-1;r>-1&&(Gu(e,r),Ya(n,r))}this._attachedToViewContainer=!1}lm(this._lView[H],this._lView)}onDestroy(e){py(this._lView[H],this._lView,null,e)}markForCheck(){fl(this._cdRefInjectingView||this._lView)}detach(){this._lView[fe]&=-65}reattach(){this._lView[fe]|=64}detectChanges(){pl(this._lView[H],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nM(t,e){_s(t,e,e[ye],2,null,null)}(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e}}class mx extends Ms{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;pl(e[H],e,e[tt],!1)}checkNoChanges(){}get context(){return null}}class Ey extends Ds{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Me(e);return new Is(n,this.ngModule)}}function Sy(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class vx{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Oa(r);const o=this.injector.get(e,hd,r);return o!==hd||n===hd?o:this.parentInjector.get(e,n,r)}}class Is extends Hm{get inputs(){return Sy(this.componentDef.inputs)}get outputs(){return Sy(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function DI(t){return t.map(wI).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,o){let i=(o=o||this.ngModule)instanceof er?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new vx(e,i):e,a=s.get(Gm,null);if(null===a)throw new F(407,!1);const l=s.get(nI,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function WI(t,e,n){return t.selectRootElement(e,n===Yn.ShadowDom)}(c,r,this.componentDef.encapsulation):zu(c,u,function yx(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Ed(0,null,null,1,0,null,null,null,null,null),p=ul(null,f,null,h,null,null,a,c,l,s,null);let g,y;vu(p);try{const v=this.componentDef;let T,C=null;v.findHostDirectiveDefs?(T=[],C=new Map,v.findHostDirectiveDefs(v,T,C),T.push(v)):T=[v];const k=function Cx(t,e){const n=t[H],r=Be;return t[r]=e,ii(n,r,2,"#host",null)}(p,d),j=function bx(t,e,n,r,o,i,s,a){const l=o[H];!function wx(t,e,n,r){for(const o of t)e.mergedAttrs=cs(e.mergedAttrs,o.hostAttrs);null!==e.mergedAttrs&&(gl(e,e.mergedAttrs,!0),null!==n&&Cm(r,n,e))}(r,t,e,s);const c=i.createRenderer(e,n),u=ul(o,fy(n),null,n.onPush?32:16,o[t.index],t,i,c,a||null,null,null);return l.firstCreatePass&&Md(l,t,r.length-1),hl(o,u),o[t.index]=u}(k,d,v,T,p,a,c);y=lg(f,Be),d&&function Ex(t,e,n,r){if(r)wu(t,n,["ng-version",rI.full]);else{const{attrs:o,classes:i}=function EI(t){const e=[],n=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&e.push(i,t[++r]):8===o&&n.push(i);else{if(!Pn(o))break;o=i}r++}return{attrs:e,classes:n}}(e.selectors[0]);o&&wu(t,n,o),i&&i.length>0&&_m(t,n,i.join(" "))}}(c,v,d,r),void 0!==n&&function Sx(t,e,n){const r=t.projection=[];for(let o=0;o<e.length;o++){const i=n[o];r.push(null!=i?Array.from(i):null)}}(y,this.ngContentSelectors,n),g=function Dx(t,e,n,r,o,i){const s=It(),a=o[H],l=rn(s,o);yy(a,o,s,n,null,r);for(let u=0;u<n.length;u++)kt(ho(o,a,s.directiveStart+u,s),o);vy(a,o,s),l&&kt(l,o);const c=ho(o,a,s.directiveStart+s.componentOffset,s);if(t[tt]=o[tt]=c,null!==i)for(const u of i)u(c,e);return bd(a,s,t),c}(j,v,T,C,p,[Mx]),Cd(f,p,null)}finally{_u()}return new _x(this.componentType,g,ti(y,p),p,y)}}class _x extends YM{constructor(e,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=n,this.hostView=this.changeDetectorRef=new mx(o),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[e])){const i=this._rootLView;Td(i[H],i,o,e,n),fl(Yt(this._tNode.index,i))}}get injector(){return new Go(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Mx(){const t=It();$a(R()[H],t)}function xe(t){let e=function My(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let o;if(On(t))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);o=e.\u0275dir}if(o){if(n){r.push(o);const s=t;s.inputs=Od(t.inputs),s.declaredInputs=Od(t.declaredInputs),s.outputs=Od(t.outputs);const a=o.hostBindings;a&&Tx(t,a);const l=o.viewQuery,c=o.contentQueries;if(l&&xx(t,l),c&&Ax(t,c),Zc(t.inputs,o.inputs),Zc(t.declaredInputs,o.declaredInputs),Zc(t.outputs,o.outputs),On(o)&&o.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(t),a===xe&&(n=!1)}}e=Object.getPrototypeOf(e)}!function Ix(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const o=t[r];o.hostVars=e+=o.hostVars,o.hostAttrs=cs(o.hostAttrs,n=cs(n,o.hostAttrs))}}(r)}function Od(t){return t===pr?{}:t===De?[]:t}function xx(t,e){const n=t.viewQuery;t.viewQuery=n?(r,o)=>{e(r,o),n(r,o)}:e}function Ax(t,e){const n=t.contentQueries;t.contentQueries=n?(r,o,i)=>{e(r,o,i),n(r,o,i)}:e}function Tx(t,e){const n=t.hostBindings;t.hostBindings=n?(r,o)=>{e(r,o),n(r,o)}:e}function yl(t){return!!function Pd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Nt(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function or(t,e,n,r){const o=R();return Nt(o,Ho(),e)&&(we(),nr(We(),o,t,e,n,r)),or}function li(t,e,n,r,o,i){const a=function mo(t,e,n,r){const o=Nt(t,e,n);return Nt(t,e+1,r)||o}(t,function yr(){return le.lFrame.bindingIndex}(),n,o);return vr(2),a?e+ae(n)+r+ae(o)+i:ce}function Ie(t,e,n,r,o,i,s,a){const l=R(),c=we(),u=t+Be,d=c.firstCreatePass?function Ux(t,e,n,r,o,i,s,a,l){const c=e.consts,u=ii(e,t,4,s||null,Vr(c,a));Sd(e,n,u,Vr(c,l)),$a(e,u);const d=u.tView=Ed(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,n,r,o,i,s):c.data[u];Zn(d,!1);const h=l[ye].createComment("");tl(c,l,h,d),kt(h,l),hl(l,l[u]=_y(h,l,h,d)),ja(d)&&wd(c,l,d),null!=s&&Dd(l,d,a)}function te(t,e,n){const r=R();return Nt(r,Ho(),e)&&function an(t,e,n,r,o,i,s,a){const l=rn(e,n);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(Td(t,n,u,r,o),ss(e)&&function QI(t,e){const n=Yt(e,t);16&n[fe]||(n[fe]|=32)}(n,e.index)):3&e.type&&(r=function YI(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),o=null!=s?s(o,e.value||"",r):o,i.setProperty(l,r,o))}(we(),We(),r,t,e,r[ye],n,!1),te}function Rd(t,e,n,r,o){const s=o?"class":"style";Td(t,n,e.inputs[s],s,r)}function E(t,e,n,r){const o=R(),i=we(),s=Be+t,a=o[ye],l=i.firstCreatePass?function Bx(t,e,n,r,o,i){const s=e.consts,l=ii(e,t,2,r,Vr(s,o));return Sd(e,n,l,Vr(s,i)),null!==l.attrs&&gl(l,l.attrs,!1),null!==l.mergedAttrs&&gl(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,i,o,e,n,r):i.data[s],c=o[s]=zu(a,e,function tS(){return le.lFrame.currentNamespace}()),u=ja(l);return Zn(l,!0),Cm(a,c,l),32!=(32&l.flags)&&tl(i,o,c,l),0===function VE(){return le.lFrame.elementDepthCount}()&&kt(c,o),function UE(){le.lFrame.elementDepthCount++}(),u&&(wd(i,o,l),bd(i,l,o)),null!==r&&Dd(o,l),E}function w(){let t=It();fu()?function pu(){le.lFrame.isParent=!1}():(t=t.parent,Zn(t,!1));const e=t;!function $E(){le.lFrame.elementDepthCount--}();const n=we();return n.firstCreatePass&&($a(n,t),uu(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function iS(t){return 0!=(8&t.flags)}(e)&&Rd(n,e,R(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function sS(t){return 0!=(16&t.flags)}(e)&&Rd(n,e,R(),e.stylesWithoutHost,!1),w}function Rn(t,e,n,r){return E(t,e,n,r),w(),Rn}function As(){return R()}function Ts(t){return!!t&&"function"==typeof t.then}const Fd=function $y(t){return!!t&&"function"==typeof t.subscribe};function de(t,e,n,r){const o=R(),i=we(),s=It();return function Hy(t,e,n,r,o,i,s){const a=ja(r),c=t.firstCreatePass&&by(t),u=e[tt],d=Cy(e);let h=!0;if(3&r.type||s){const g=rn(r,e),y=s?s(g):g,v=d.length,T=s?k=>s(Mt(k[r.index])):r.index;let C=null;if(!s&&a&&(C=function zx(t,e,n,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===n&&o[i+1]===r){const a=e[jo],l=o[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(t,e,o,r.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=i,C.__ngLastListenerFn__=i,h=!1;else{i=Gy(r,e,u,i,!1);const k=n.listen(y,o,i);d.push(i,k),c&&c.push(o,T,v,v+1)}}else i=Gy(r,e,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const g=p.length;if(g)for(let y=0;y<g;y+=2){const j=e[p[y]][p[y+1]].subscribe(i),ie=d.length;d.push(i,j),c&&c.push(o,r.index,ie,-(ie+1))}}}(i,o,o[ye],s,t,e,r),de}function zy(t,e,n,r){try{return _n(6,e,n),!1!==n(r)}catch(o){return Dy(t,o),!1}finally{_n(7,e,n)}}function Gy(t,e,n,r,o){return function i(s){if(s===Function)return r;fl(t.componentOffset>-1?Yt(t.index,e):e);let l=zy(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)l=zy(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function ze(t=1){return function KE(t){return(le.lFrame.contextLView=function YE(t,e){for(;t>0;)e=e[Vo],t--;return e}(t,le.lFrame.contextLView))[tt]}(t)}function _l(t,e){return t<<17|e<<2}function $r(t){return t>>17&32767}function jd(t){return 2|t}function yo(t){return(131068&t)>>2}function Vd(t,e){return-131069&t|e<<2}function Ud(t){return 1|t}function tv(t,e,n,r,o){const i=t[n+1],s=null===e;let a=r?$r(i):yo(i),l=!1;for(;0!==a&&(!1===l||s);){const u=t[a+1];Xx(t[a],e)&&(l=!0,t[a+1]=r?Ud(u):jd(u)),a=r?$r(u):yo(u)}l&&(t[n+1]=r?jd(i):Ud(i))}function Xx(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Yo(t,e)>=0}function Os(t,e,n){return kn(t,e,n,!1),Os}function Dr(t,e){return kn(t,e,null,!0),Dr}function kn(t,e,n,r){const o=R(),i=we(),s=vr(2);i.firstUpdatePass&&function cv(t,e,n,r){const o=t.data;if(null===o[n+1]){const i=o[Ut()],s=function lv(t,e){return e>=t.expandoStartIndex}(t,n);(function fv(t,e){return 0!=(t.flags&(e?8:16))})(i,r)&&null===e&&!s&&(e=!1),e=function lA(t,e,n,r){const o=function mu(t){const e=le.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=r?e.residualClasses:e.residualStyles;if(null===o)0===(r?e.classBindings:e.styleBindings)&&(n=Ps(n=$d(null,t,e,n,r),e.attrs,r),i=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==o)if(n=$d(o,t,e,n,r),null===i){let l=function cA(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==yo(r))return t[$r(r)]}(t,e,r);void 0!==l&&Array.isArray(l)&&(l=$d(null,t,e,l[1],r),l=Ps(l,e.attrs,r),function uA(t,e,n,r){t[$r(n?e.classBindings:e.styleBindings)]=r}(t,e,r,l))}else i=function dA(t,e,n){let r;const o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++)r=Ps(r,t[i].hostAttrs,n);return Ps(r,e.attrs,n)}(t,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),n}(o,i,e,r),function Qx(t,e,n,r,o,i){let s=i?e.classBindings:e.styleBindings,a=$r(s),l=yo(s);t[r]=n;let u,c=!1;if(Array.isArray(n)?(u=n[1],(null===u||Yo(n,u)>0)&&(c=!0)):u=n,o)if(0!==l){const h=$r(t[a+1]);t[r+1]=_l(h,a),0!==h&&(t[h+1]=Vd(t[h+1],r)),t[a+1]=function Kx(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=_l(a,0),0!==a&&(t[a+1]=Vd(t[a+1],r)),a=r;else t[r+1]=_l(l,0),0===a?a=r:t[l+1]=Vd(t[l+1],r),l=r;c&&(t[r+1]=jd(t[r+1])),tv(t,u,r,!0),tv(t,u,r,!1),function Zx(t,e,n,r,o){const i=o?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&Yo(i,e)>=0&&(n[r+1]=Ud(n[r+1]))}(e,u,t,r,i),s=_l(a,l),i?e.classBindings=s:e.styleBindings=s}(o,i,e,n,s,r)}}(i,t,s,r),e!==ce&&Nt(o,s,e)&&function dv(t,e,n,r,o,i,s,a){if(!(3&e.type))return;const l=t.data,c=l[a+1],u=function Yx(t){return 1==(1&t)}(c)?hv(l,e,n,o,yo(c),s):void 0;Cl(u)||(Cl(i)||function Jx(t){return 2==(2&t)}(c)&&(i=hv(l,null,n,o,a,s)),function hM(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let i=-1===r.indexOf("-")?void 0:Qt.DashCase;null==o?t.removeStyle(n,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Qt.Important),t.setStyle(n,r,o,i))}}(r,s,Va(Ut(),n),o,i))}(i,i.data[Ut()],o,o[ye],t,o[s+1]=function gA(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ne(Ur(t)))),t}(e,n),r,s)}function $d(t,e,n,r,o){let i=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(i=e[a],r=Ps(r,i.hostAttrs,o),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ps(t,e,n){const r=n?1:2;let o=-1;if(null!==e)for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?o=s:o===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),on(t,s,!!n||e[++i]))}return void 0===t?null:t}function hv(t,e,n,r,o,i){const s=null===e;let a;for(;o>0;){const l=t[o],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=n[o+1];h===ce&&(h=d?De:void 0);let f=d?Tu(h,r):u===r?h:void 0;if(c&&!Cl(f)&&(f=Tu(l,r)),Cl(f)&&(a=f,s))return a;const p=t[o+1];o=s?$r(p):yo(p)}if(null!==e){let l=i?e.residualClasses:e.residualStyles;null!=l&&(a=Tu(l,r))}return a}function Cl(t){return void 0!==t}function A(t,e=""){const n=R(),r=we(),o=t+Be,i=r.firstCreatePass?ii(r,o,1,e,null):r.data[o],s=n[o]=function Hu(t,e){return t.createText(e)}(n[ye],e);tl(r,n,s,i),Zn(i,!1)}function Fn(t){return nt("",t,""),Fn}function nt(t,e,n){const r=R(),o=function ai(t,e,n,r){return Nt(t,Ho(),n)?e+ae(n)+r:ce}(r,t,e,n);return o!==ce&&wr(r,Ut(),o),nt}function Er(t,e,n,r,o){const i=R(),s=li(i,t,e,n,r,o);return s!==ce&&wr(i,Ut(),s),Er}const yi="en-US";let kv=yi;function zd(t,e,n,r,o){if(t=X(t),Array.isArray(t))for(let i=0;i<t.length;i++)zd(t[i],e,n,r,o);else{const i=we(),s=R();let a=go(t)?t:X(t.provide),l=Bm(t);const c=It(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(go(t)||!t.multi){const f=new ls(l,o,x),p=qd(a,e,o?u:u+h,d);-1===p?(Mu(Wa(c,s),i,a),Gd(i,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{const f=qd(a,e,u+h,d),p=qd(a,e,u,u+h),y=p>=0&&n[p];if(o&&!y||!o&&!(f>=0&&n[f])){Mu(Wa(c,s),i,a);const v=function RT(t,e,n,r,o){const i=new ls(t,n,x);return i.multi=[],i.index=e,i.componentProviders=0,i_(i,o,r&&!n),i}(o?PT:OT,n.length,o,r,l);!o&&y&&(n[p].providerFactory=v),Gd(i,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),n.push(v),s.push(v)}else Gd(i,t,f>-1?f:p,i_(n[o?p:f],l,!o&&r));!o&&r&&y&&n[p].componentProviders++}}}function Gd(t,e,n,r){const o=go(e),i=function HM(t){return!!t.useClass}(e);if(o||i){const l=(i?X(e.useClass):e).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&e.multi){const u=c.indexOf(n);-1===u?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function i_(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function qd(t,e,n,r){for(let o=n;o<r;o++)if(e[o]===t)return o;return-1}function OT(t,e,n,r){return Wd(this.multi,[])}function PT(t,e,n,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=ho(n,n[H],this.providerFactory.index,r);i=a.slice(0,s),Wd(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],Wd(o,i);return i}function Wd(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ge(t,e=[]){return n=>{n.providersResolver=(r,o)=>function TT(t,e,n){const r=we();if(r.firstCreatePass){const o=On(t);zd(n,r.data,r.blueprint,o,!0),zd(e,r.data,r.blueprint,o,!1)}}(r,o?o(t):t,e)}}class vi{}class s_{}class a_ extends vi{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ey(this);const r=tn(e);this._bootstrapComponents=br(r.bootstrap),this._r3Injector=ry(e,n,[{provide:vi,useValue:this},{provide:Ds,useValue:this.componentFactoryResolver}],Ne(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Jd extends s_{constructor(e){super(),this.moduleType=e}create(e){return new a_(this.moduleType,e)}}class NT extends vi{constructor(e,n,r){super(),this.componentFactoryResolver=new Ey(this),this.instance=null;const o=new $m([...e,{provide:vi,useValue:this},{provide:Ds,useValue:this.componentFactoryResolver}],n||ll(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Sl(t,e,n=null){return new NT(t,e,n).injector}let FT=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=Lm(0,n.type),o=r.length>0?Sl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,o)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=G({token:t,providedIn:"environment",factory:()=>new t(B(er))}),t})();function l_(t){t.getStandaloneInjector=e=>e.get(FT).getOrCreateStandaloneInjector(t)}function Yd(t){return e=>{setTimeout(t,void 0,e)}}const Ze=class lO extends _{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&"object"==typeof e){const l=e;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=Yd(i),o&&(o=Yd(o)),s&&(s=Yd(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof M&&e.add(a),a}};function cO(){return this._results[Symbol.iterator]()}class Qd{get changes(){return this._changes||(this._changes=new Ze)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Qd.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=cO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const r=this;r.dirty=!1;const o=function Cn(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function mS(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=e[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}(r._results,o,n))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Sr=(()=>{class t{}return t.__NG_ELEMENT_ID__=hO,t})();const uO=Sr,dO=class extends uO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tView,o=ul(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);o[os]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[Qn];return null!==s&&(o[Qn]=s.createEmbeddedView(r)),Cd(r,o,e),new Ms(o)}};function hO(){return Ml(It(),R())}function Ml(t,e){return 4&t.type?new dO(e,t,ti(t,e)):null}let Ln=(()=>{class t{}return t.__NG_ELEMENT_ID__=fO,t})();function fO(){return w_(It(),R())}const pO=Ln,C_=class extends pO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ti(this._hostTNode,this._hostLView)}get injector(){return new Go(this._hostTNode,this._hostLView)}get parentInjector(){const e=Su(this._hostTNode,this._hostLView);if(Mg(e)){const n=Ga(e,this._hostLView),r=za(e);return new Go(n[H].data[r+8],n)}return new Go(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=b_(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-jt}createEmbeddedView(e,n,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=e.createEmbeddedView(n||{},i);return this.insert(s,o),s}createComponent(e,n,r,o,i){const s=e&&!function ds(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const d=n||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const l=s?e:new Is(Me(e)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const h=(s?c:this.parentInjector).get(er,null);h&&(i=h)}const u=l.create(c,o,void 0,i);return this.insert(u.hostView,a),u}insert(e,n){const r=e._lView,o=r[H];if(function jE(t){return Tn(t[Ye])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[Ye],h=new C_(d,d[Pt],d[Ye]);h.detach(h.indexOf(e))}}const i=this._adjustIndex(n),s=this._lContainer;!function oM(t,e,n,r){const o=jt+r,i=n.length;r>0&&(n[o-1][An]=e),r<i-jt?(e[An]=n[o],jg(n,jt+r,e)):(n.push(e),e[An]=null),e[Ye]=n;const s=e[os];null!==s&&n!==s&&function iM(t,e){const n=t[$o];e[Rt]!==e[Ye][Ye][Rt]&&(t[eg]=!0),null===n?t[$o]=[e]:n.push(e)}(s,e);const a=e[Qn];null!==a&&a.insertView(t),e[fe]|=64}(o,r,s,i);const a=Ju(i,s),l=r[ye],c=el(l,s[Fa]);return null!==c&&function tM(t,e,n,r,o,i){r[mr]=o,r[Pt]=e,_s(t,r,n,1,o,i)}(o,s[Pt],l,r,c,a),e.attachToViewContainerRef(),jg(Zd(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=b_(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Gu(this._lContainer,n);r&&(Ya(Zd(this._lContainer),n),lm(r[H],r))}detach(e){const n=this._adjustIndex(e,-1),r=Gu(this._lContainer,n);return r&&null!=Ya(Zd(this._lContainer),n)?new Ms(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function b_(t){return t[La]}function Zd(t){return t[La]||(t[La]=[])}function w_(t,e){let n;const r=e[t.index];if(Tn(r))n=r;else{let o;if(8&t.type)o=Mt(r);else{const i=e[ye];o=i.createComment("");const s=rn(t,e);po(i,el(i,s),o,function cM(t,e){return t.nextSibling(e)}(i,s),!1)}e[t.index]=n=_y(r,e,o,t),hl(e,n)}return new C_(n,t,e)}class Xd{constructor(e){this.queryList=e,this.matches=null}clone(){return new Xd(this.queryList)}setDirty(){this.queryList.setDirty()}}class eh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){const s=n.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new eh(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==T_(e,n).matches&&this.queries[n].setDirty()}}class D_{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}}class th{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const o=null!==n?n.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,null!==n?n.push(i):n=[i])}return null!==n?new th(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class nh{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new nh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(e,n,gO(n,i)),this.matchTNodeWithReadOption(e,n,Ja(n,e,i,!1,!1))}else r===Sr?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ja(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===sn||o===Ln||o===Sr&&4&n.type)this.addMatch(n.index,-2);else{const i=Ja(n,e,o,!1,!1);null!==i&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function gO(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function yO(t,e,n,r){return-1===n?function mO(t,e){return 11&t.type?ti(t,e):4&t.type?Ml(t,e):null}(e,t):-2===n?function vO(t,e,n){return n===sn?ti(e,t):n===Sr?Ml(e,t):n===Ln?w_(e,t):void 0}(t,e,r):ho(t,t[H],n,e)}function E_(t,e,n,r){const o=e[Qn].queries[r];if(null===o.matches){const i=t.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:yO(e,i[c],s[l+1],n.metadata.read))}o.matches=a}return o.matches}function rh(t,e,n,r){const o=t.queries.getByIndex(n),i=o.matches;if(null!==i){const s=E_(t,e,o,n);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(s[a/2]);else{const c=i[a+1],u=e[-l];for(let d=jt;d<u.length;d++){const h=u[d];h[os]===h[Ye]&&rh(h[H],h,c,r)}if(null!==u[$o]){const d=u[$o];for(let h=0;h<d.length;h++){const f=d[h];rh(f[H],f,c,r)}}}}}return r}function S_(t){const e=R(),n=we(),r=mg();yu(r+1);const o=T_(n,r);if(t.dirty&&function LE(t){return 4==(4&t[fe])}(e)===(2==(2&o.metadata.flags))){if(null===o.matches)t.reset([]);else{const i=o.crossesNgTemplate?rh(n,e,r,[]):E_(n,e,o,r);t.reset(i,eI),t.notifyOnChanges()}return!0}return!1}function M_(t,e,n,r){const o=we();if(o.firstCreatePass){const i=It();(function A_(t,e,n){null===t.queries&&(t.queries=new th),t.queries.track(new nh(e,n))})(o,new D_(e,n,r),i.index),function bO(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(o,t),2==(2&n)&&(o.staticContentQueries=!0)}!function x_(t,e,n){const r=new Qd(4==(4&n));py(t,e,r,r.destroy),null===e[Qn]&&(e[Qn]=new eh),e[Qn].queries.push(new Xd(r))}(o,R(),n)}function T_(t,e){return t.queries.getByIndex(e)}function xl(...t){}const Al=new q("Application Initializer");let Tl=(()=>{class t{constructor(n){this.appInits=n,this.resolve=xl,this.reject=xl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(Ts(i))n.push(i);else if(Fd(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(B(Al,8))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const $s=new q("AppId",{providedIn:"root",factory:function J_(){return`${ch()}${ch()}${ch()}`}});function ch(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const K_=new q("Platform Initializer"),uh=new q("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let BO=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Mr=new q("LocaleId",{providedIn:"root",factory:()=>me(Mr,ee.Optional|ee.SkipSelf)||function HO(){return typeof $localize<"u"&&$localize.locale||yi}()});class GO{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Y_=(()=>{class t{compileModuleSync(n){return new Jd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=br(tn(n).declarations).reduce((s,a)=>{const l=Me(a);return l&&s.push(new Is(l)),s},[]);return new GO(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const JO=(()=>Promise.resolve(0))();function dh(t){typeof Zone>"u"?JO.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class rt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1),typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function KO(){let t=$e.requestAnimationFrame,e=$e.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function ZO(t){const e=()=>{!function QO(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call($e,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fh(t),t.isCheckStableRunning=!0,hh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{try{return X_(t),n.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),eC(t)}},onInvoke:(n,r,o,i,s,a,l)=>{try{return X_(t),n.invoke(o,i,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),eC(t)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,fh(t),hh(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rt.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(rt.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,YO,xl,xl);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const YO={};function hh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function X_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function eC(t){t._nesting--,hh(t)}class XO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ze,this.onMicrotaskEmpty=new Ze,this.onStable=new Ze,this.onError=new Ze}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}}const tC=new q(""),Ol=new q("");let mh,ph=(()=>{class t{constructor(n,r,o){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,mh||(function e1(t){mh=t}(o),o.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rt.assertNotInAngularZone(),dh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,o){return[]}}return t.\u0275fac=function(n){return new(n||t)(B(rt),B(gh),B(Ol))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),gh=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return mh?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Ir=!1;let Br=null;const nC=new q("AllowMultipleToken"),yh=new q("PlatformDestroyListeners"),rC=new q("appBootstrapListener");class oC{constructor(e,n){this.name=e,this.token=n}}function sC(t,e,n=[]){const r=`Platform: ${e}`,o=new q(r);return(i=[])=>{let s=vh();if(!s||s.injector.get(nC,!1)){const a=[...n,...i,{provide:o,useValue:!0}];t?t(a):function r1(t){if(Br&&!Br.get(nC,!1))throw new F(400,!1);Br=t;const e=t.get(lC);(function iC(t){const e=t.get(K_,null);e&&e.forEach(n=>n())})(t)}(function aC(t=[],e){return tr.create({name:e,providers:[{provide:ld,useValue:"platform"},{provide:yh,useValue:new Set([()=>Br=null])},...t]})}(a,r))}return function i1(t){const e=vh();if(!e)throw new F(401,!1);return e}()}}function vh(){return Br?.get(lC)??null}let lC=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const o=function uC(t,e){let n;return n="noop"===t?new XO:("zone.js"===t?void 0:t)||new rt(e),n}(r?.ngZone,function cC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:rt,useValue:o}];return o.run(()=>{const s=tr.create({providers:i,parent:this.injector,name:n.moduleType.name}),a=n.create(s),l=a.injector.get(ni,null);if(!l)throw new F(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Rl(this._modules,a),c.unsubscribe()})}),function dC(t,e,n){try{const r=n();return Ts(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(l,o,()=>{const c=a.injector.get(Tl);return c.runInitializers(),c.donePromise.then(()=>(function Nv(t){gn(t,"Expected localeId to be defined"),"string"==typeof t&&(kv=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Mr,yi)||yi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const o=hC({},r);return function t1(t,e,n){const r=new Jd(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(n){const r=n.injector.get(Pl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new F(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new F(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(yh,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(B(tr))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function hC(t,e){return Array.isArray(e)?e.reduce(hC,t):{...t,...e}}let Pl=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,o){this._zone=n,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new Ue(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new Ue(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{rt.assertNotInAngularZone(),dh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{rt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function rE(...t){const e=Zi(t),n=function YD(t,e){return"number"==typeof Yc(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?In(r[0]):No(n)(at(r,e)):Jn}(i,s.pipe(function oE(t={}){const{connector:e=(()=>new _),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const g=s;f(),g?.unsubscribe()};return b((g,y)=>{c++,!d&&!u&&h();const v=l=l??e();y.add(()=>{c--,0===c&&!d&&!u&&(a=Qc(p,o))}),v.subscribe(y),!s&&c>0&&(s=new qt({next:T=>v.next(T),error:T=>{d=!0,h(),a=Qc(f,n,T),v.error(T)},complete:()=>{u=!0,h(),a=Qc(f,r),v.complete()}}),In(g).subscribe(s))})(i)}}()))}bootstrap(n,r){const o=n instanceof Hm;if(!this._injector.get(Tl).done){!o&&function Lo(t){const e=Me(t)||Ot(t)||Kt(t);return null!==e&&e.standalone}(n);throw new F(405,Ir)}let s;s=o?n:this._injector.get(Ds).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function n1(t){return t.isBoundToModule}(s)?void 0:this._injector.get(vi),c=s.create(tr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(tC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Rl(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new F(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Rl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(rC,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Rl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new F(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(B(rt),B(er),B(ni))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Rl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let bi=(()=>{class t{}return t.__NG_ELEMENT_ID__=a1,t})();function a1(t){return function l1(t,e,n){if(ss(t)&&!n){const r=Yt(t.index,e);return new Ms(r,r)}return 47&t.type?new Ms(e[Rt],e):null}(It(),R(),16==(16&t))}class yC{constructor(){}supports(e){return yl(e)}create(e){return new p1(e)}}const f1=(t,e)=>e;class p1{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||f1}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){const s=!r||n&&n.currentIndex<_C(r,o,i)?n:r,a=_C(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,u=l-o;if(c!=u){for(let h=0;h<c;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<c&&(i[h]=f+1)}i[s.previousIndex]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!yl(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let o,i,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,s,a),r=!0),n=n._next}else o=0,function Lx(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(o,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,o),r=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,o){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,o)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,o)):e=this._addAfter(new g1(n,r),i,o),e}_verifyReinsertion(e,n,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const o=e._prevRemoved,i=e._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const o=null===n?this._itHead:n._next;return e._next=o,e._prev=n,null===o?this._itTail=e:o._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new vC),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class g1{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class m1{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class vC{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new m1,this.map.set(n,r)),r.add(e)}get(e,n){const o=this.map.get(e);return o?o.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _C(t,e,n){const r=t.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+e+o}function bC(){return new Fl([new yC])}let Fl=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||bC()),deps:[[t,new ps,new fs]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(null!=r)return r;throw new F(901,!1)}}return t.\u0275prov=G({token:t,providedIn:"root",factory:bC}),t})();const b1=sC(null,"core",[]);let w1=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(B(Pl))},t.\u0275mod=xn({type:t}),t.\u0275inj=mn({}),t})();function wi(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Dh=null;function xr(){return Dh}class S1{}const Ht=new q("DocumentToken");let Eh=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:function(){return function M1(){return B(DC)}()},providedIn:"platform"}),t})();const I1=new q("Location Initialized");let DC=(()=>{class t extends Eh{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xr().getBaseHref(this._doc)}onPopState(n){const r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){EC()?this._history.pushState(n,r,o):this._location.hash=o}replaceState(n,r,o){EC()?this._history.replaceState(n,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(B(Ht))},t.\u0275prov=G({token:t,factory:function(){return function x1(){return new DC(B(Ht))}()},providedIn:"platform"}),t})();function EC(){return!!window.history.pushState}function Sh(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function SC(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ar(t){return t&&"?"!==t[0]?"?"+t:t}let Co=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:function(){return me(IC)},providedIn:"root"}),t})();const MC=new q("appBaseHref");let IC=(()=>{class t extends Co{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??me(Ht).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Sh(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ar(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){const s=this.prepareExternalUrl(o+Ar(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){const s=this.prepareExternalUrl(o+Ar(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(B(Eh),B(MC,8))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A1=(()=>{class t extends Co{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Sh(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+Ar(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+Ar(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(B(Eh),B(MC,8))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),Mh=(()=>{class t{constructor(n){this._subject=new Ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function P1(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(SC(xC(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ar(r))}normalize(n){return t.stripTrailingSlash(function O1(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,xC(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ar(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ar(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}}return t.normalizeQueryParams=Ar,t.joinWithSlash=Sh,t.stripTrailingSlash=SC,t.\u0275fac=function(n){return new(n||t)(B(Co))},t.\u0275prov=G({token:t,factory:function(){return function T1(){return new Mh(B(Co))}()},providedIn:"root"}),t})();function xC(t){return t.replace(/\/index.html$/,"")}function LC(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[o,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}class yP{constructor(e,n,r,o){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lh=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new yP(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),$C(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{$C(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(x(Ln),x(Sr),x(Fl))},t.\u0275dir=re({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function $C(t,e){t.context.$implicit=e.item}let Di=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new _P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){BC("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){BC("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(x(Ln),x(Sr))},t.\u0275dir=re({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class _P{constructor(){this.$implicit=null,this.ngIf=null}}function BC(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ne(e)}'.`)}let zP=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=xn({type:t}),t.\u0275inj=mn({}),t})();let JP=(()=>{class t{}return t.\u0275prov=G({token:t,providedIn:"root",factory:()=>new KP(B(Ht),window)}),t})();class KP{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function YP(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qC(this.window.history)||qC(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function qC(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class WC{}class DR extends S1{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class zh extends DR{static makeCurrent(){!function E1(t){Dh||(Dh=t)}(new zh)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function ER(){return qs=qs||document.querySelector("base"),qs?qs.getAttribute("href"):null}();return null==n?null:function SR(t){Jl=Jl||document.createElement("a"),Jl.setAttribute("href",t);const e=Jl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return LC(document.cookie,e)}}let Jl,qs=null;const ZC=new q("TRANSITION_ID"),IR=[{provide:Al,useFactory:function MR(t,e,n){return()=>{n.get(Tl).donePromise.then(()=>{const r=xr(),o=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[ZC,Ht,tr],multi:!0}];let AR=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const Kl=new q("EventManagerPlugins");let Yl=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}addGlobalEventListener(n,r,o){return this._findPluginFor(r).addGlobalEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(B(Kl),B(rt))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();class XC{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const o=xr().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${n}`);return this.addEventListener(o,n,r)}}let eb=(()=>{class t{constructor(){this.usageCount=new Map}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,r){const o=this.usageCount;let i=o.get(n)??0;return i+=r,i>0?o.set(n,i):o.delete(n),i}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),Ws=(()=>{class t extends eb{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.forEach(i=>i.remove()),r.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,r){const o=this.doc.createElement("style");o.textContent=r,n.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return t.\u0275fac=function(n){return new(n||t)(B(Ht))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const Gh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qh=/%COMP%/g,rb=new q("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ob(t,e){return e.flat(100).map(n=>n.replace(qh,t))}function ib(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wh=(()=>{class t{constructor(n,r,o,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new Jh(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(n,r);return o instanceof lb?o.applyToHost(n):o instanceof Kh&&o.applyStyles(),o}getOrCreateRenderer(n,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case Yn.Emulated:i=new lb(s,a,r,this.appId,l);break;case Yn.ShadowDom:return new FR(s,a,n,r);default:i=new Kh(s,a,r,l)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(B(Yl),B(Ws),B($s),B(rb))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();class Jh{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(Gh[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(ab(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ab(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;const i=Gh[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const o=Gh[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(Qt.DashCase|Qt.Important)?e.style.setProperty(n,r,o&Qt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Qt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,ib(r)):this.eventManager.addEventListener(e,n,ib(r))}}function ab(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class FR extends Jh{constructor(e,n,r,o){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=ob(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Kh extends Jh{constructor(e,n,r,o,i=r.id){super(e),this.sharedStylesHost=n,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=ob(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class lb extends Kh{constructor(e,n,r,o,i){const s=o+"-"+r.id;super(e,n,r,i,s),this.contentAttr=function RR(t){return"_ngcontent-%COMP%".replace(qh,t)}(s),this.hostAttr=function kR(t){return"_nghost-%COMP%".replace(qh,t)}(s)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let LR=(()=>{class t extends XC{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}}return t.\u0275fac=function(n){return new(n||t)(B(Ht))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const cb=["alt","control","meta","shift"],jR={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},VR={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let UR=(()=>{class t extends XC{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,o){const i=t.parseEventName(r),s=t.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xr().onAndCancel(n,i.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),cb.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let o=jR[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),cb.forEach(s=>{s!==o&&(0,VR[s])(n)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{t.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(B(Ht))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const zR=sC(b1,"browser",[{provide:uh,useValue:"browser"},{provide:K_,useValue:function $R(){zh.makeCurrent()},multi:!0},{provide:Ht,useFactory:function HR(){return function yM(t){Zu=t}(document),document},deps:[]}]),hb=new q(""),fb=[{provide:Ol,useClass:class xR{addToWindow(e){$e.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},$e.getAllAngularTestabilities=()=>e.getAllTestabilities(),$e.getAllAngularRootElements=()=>e.getAllRootElements(),$e.frameworkStabilizers||($e.frameworkStabilizers=[]),$e.frameworkStabilizers.push(r=>{const o=$e.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(l){s=s||l,i--,0==i&&r(s)};o.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?xr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:tC,useClass:ph,deps:[rt,gh,Ol]},{provide:ph,useClass:ph,deps:[rt,gh,Ol]}],pb=[{provide:ld,useValue:"root"},{provide:ni,useFactory:function BR(){return new ni},deps:[]},{provide:Kl,useClass:LR,multi:!0,deps:[Ht,rt,uh]},{provide:Kl,useClass:UR,multi:!0,deps:[Ht]},{provide:Wh,useClass:Wh,deps:[Yl,Ws,$s,rb]},{provide:Gm,useExisting:Wh},{provide:eb,useExisting:Ws},{provide:Ws,useClass:Ws,deps:[Ht]},{provide:Yl,useClass:Yl,deps:[Kl,rt]},{provide:WC,useClass:AR,deps:[]},[]];let GR=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:$s,useValue:n.appId},{provide:ZC,useExisting:$s},IR]}}}return t.\u0275fac=function(n){return new(n||t)(B(hb,12))},t.\u0275mod=xn({type:t}),t.\u0275inj=mn({providers:[...pb,...fb],imports:[zP,w1]}),t})(),gb=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(B(Ht))},t.\u0275prov=G({token:t,factory:function(n){let r=null;return r=n?new n:function WR(){return new gb(B(Ht))}(),r},providedIn:"root"}),t})();function W(...t){return at(t,Zi(t))}function zr(t,e){return Q(e)?St(t,e,1):St(t,1)}function Or(t,e){return b((n,r)=>{let o=0;n.subscribe(P(r,i=>t.call(e,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class Ql{}class Zh{}class Pr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const o=n.slice(0,r),i=o.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=n.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(n,i)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Pr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Pr;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Pr?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const o=("a"===e.op?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class XR{encodeKey(e){return vb(e)}encodeValue(e){return vb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tk=/%(\d[a-f0-9])/gi,nk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vb(t){return encodeURIComponent(t).replace(tk,(e,n)=>nk[n]??e)}function Zl(t){return`${t}`}class Gr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new XR,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ek(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],o=Array.isArray(r)?r.map(Zl):[Zl(r)];this.map.set(n,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Gr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(Zl(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Zl(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rk{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function _b(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Cb(t){return typeof Blob<"u"&&t instanceof Blob}function bb(t){return typeof FormData<"u"&&t instanceof FormData}class Js{constructor(e,n,r,o){let i;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function ok(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Pr),this.context||(this.context=new rk),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Gr,this.urlWithParams=n}serializeBody(){return null===this.body?null:_b(this.body)||Cb(this.body)||bb(this.body)||function ik(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bb(this.body)?null:Cb(this.body)?this.body.type||null:_b(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new Js(n,r,i,{params:c,headers:l,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var dt=(()=>((dt=dt||{})[dt.Sent=0]="Sent",dt[dt.UploadProgress=1]="UploadProgress",dt[dt.ResponseHeader=2]="ResponseHeader",dt[dt.DownloadProgress=3]="DownloadProgress",dt[dt.Response=4]="Response",dt[dt.User=5]="User",dt))();class Xh{constructor(e,n=200,r="OK"){this.headers=e.headers||new Pr,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ef extends Xh{constructor(e={}){super(e),this.type=dt.ResponseHeader}clone(e={}){return new ef({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xl extends Xh{constructor(e={}){super(e),this.type=dt.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Xl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class wb extends Xh{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function tf(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let bo=(()=>{class t{constructor(n){this.handler=n}request(n,r,o={}){let i;if(n instanceof Js)i=n;else{let l,c;l=o.headers instanceof Pr?o.headers:new Pr(o.headers),o.params&&(c=o.params instanceof Gr?o.params:new Gr({fromObject:o.params})),i=new Js(n,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=W(i).pipe(zr(l=>this.handler.handle(l)));if(n instanceof Js||"events"===o.observe)return s;const a=s.pipe(Or(l=>l instanceof Xl));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(O(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(O(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(O(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(O(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Gr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,tf(o,r))}post(n,r,o={}){return this.request("POST",n,tf(o,r))}put(n,r,o={}){return this.request("PUT",n,tf(o,r))}}return t.\u0275fac=function(n){return new(n||t)(B(Ql))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();function Db(t,e){return e(t)}function sk(t,e){return(n,r)=>e.intercept(n,{handle:o=>t(o,r)})}const lk=new q("HTTP_INTERCEPTORS"),Ks=new q("HTTP_INTERCEPTOR_FNS");function ck(){let t=null;return(e,n)=>(null===t&&(t=(me(lk,{optional:!0})??[]).reduceRight(sk,Db)),t(e,n))}let Eb=(()=>{class t extends Ql{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Ks)));this.chain=r.reduceRight((o,i)=>function ak(t,e,n){return(r,o)=>n.runInContext(()=>e(r,i=>t(i,o)))}(o,i,this.injector),Db)}return this.chain(n,r=>this.backend.handle(r))}}return t.\u0275fac=function(n){return new(n||t)(B(Zh),B(er))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const fk=/^\)\]\}',?\n/;let Mb=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ue(r=>{const o=this.xhrFactory.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((f,p)=>o.setRequestHeader(f,p.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const f=n.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(n.responseType){const f=n.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",p=new Pr(o.getAllResponseHeaders()),g=function pk(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||n.url;return s=new ef({headers:p,status:o.status,statusText:f,url:g}),s},l=()=>{let{headers:f,status:p,statusText:g,url:y}=a(),v=null;204!==p&&(v=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=v?200:0);let T=p>=200&&p<300;if("json"===n.responseType&&"string"==typeof v){const C=v;v=v.replace(fk,"");try{v=""!==v?JSON.parse(v):null}catch(k){v=C,T&&(T=!1,v={error:k,text:v})}}T?(r.next(new Xl({body:v,headers:f,status:p,statusText:g,url:y||void 0})),r.complete()):r.error(new wb({error:v,headers:f,status:p,statusText:g,url:y||void 0}))},c=f=>{const{url:p}=a(),g=new wb({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});r.error(g)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:dt.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===n.responseType&&o.responseText&&(p.partialText=o.responseText),r.next(p)},h=f=>{let p={type:dt.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return o.addEventListener("load",l),o.addEventListener("error",c),o.addEventListener("timeout",c),o.addEventListener("abort",c),n.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:dt.Sent}),()=>{o.removeEventListener("error",c),o.removeEventListener("abort",c),o.removeEventListener("load",l),o.removeEventListener("timeout",c),n.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return t.\u0275fac=function(n){return new(n||t)(B(WC))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const nf=new q("XSRF_ENABLED"),Ib=new q("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),xb=new q("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Ab{}let yk=(()=>{class t{constructor(n,r,o){this.doc=n,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=LC(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(B(Ht),B(uh),B(Ib))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();function vk(t,e){const n=t.url.toLowerCase();if(!me(nf)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=me(Ab).getToken(),o=me(xb);return null!=r&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),e(t)}var st=(()=>((st=st||{})[st.Interceptors=0]="Interceptors",st[st.LegacyInterceptors=1]="LegacyInterceptors",st[st.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",st[st.NoXsrfProtection=3]="NoXsrfProtection",st[st.JsonpSupport=4]="JsonpSupport",st[st.RequestsMadeViaParent=5]="RequestsMadeViaParent",st))();function Ei(t,e){return{\u0275kind:t,\u0275providers:e}}function _k(...t){const e=[bo,Mb,Eb,{provide:Ql,useExisting:Eb},{provide:Zh,useExisting:Mb},{provide:Ks,useValue:vk,multi:!0},{provide:nf,useValue:!0},{provide:Ab,useClass:yk}];for(const n of t)e.push(...n.\u0275providers);return function UM(t){return{\u0275providers:t}}(e)}const Tb=new q("LEGACY_INTERCEPTOR_FN");let bk=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=xn({type:t}),t.\u0275inj=mn({providers:[_k(Ei(st.LegacyInterceptors,[{provide:Tb,useFactory:ck},{provide:Ks,useExisting:Tb,multi:!0}]))]}),t})();const{isArray:wk}=Array,{getPrototypeOf:Dk,prototype:Ek,keys:Sk}=Object;function Ob(t){if(1===t.length){const e=t[0];if(wk(e))return{args:e,keys:null};if(function Mk(t){return t&&"object"==typeof t&&Dk(t)===Ek}(e)){const n=Sk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Ik}=Array;function Pb(t){return O(e=>function xk(t,e){return Ik(e)?t(...e):t(e)}(t,e))}function Rb(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function wo(...t){const e=Lp(t),{args:n,keys:r}=Ob(t),o=new Ue(i=>{const{length:s}=n;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;In(n[u]).subscribe(P(i,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?Rb(r,a):a),i.complete())}))}});return e?o.pipe(Pb(e)):o}let kb=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(x(Cr),x(sn))},t.\u0275dir=re({type:t}),t})(),Do=(()=>{class t extends kb{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=xt(t)))(r||t)}}(),t.\u0275dir=re({type:t,features:[xe]}),t})();const ar=new q("NgValueAccessor"),Tk={provide:ar,useExisting:Fe(()=>Si),multi:!0},Pk=new q("CompositionEventMode");let Si=(()=>{class t extends kb{constructor(n,r,o){super(n,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ok(){const t=xr()?xr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(x(Cr),x(sn),x(Pk,8))},t.\u0275dir=re({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&de("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[Ge([Tk]),xe]}),t})();const Rk=!1;const Ft=new q("NgValidators"),Wr=new q("NgAsyncValidators");function Vb(t){return function qr(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}(t.value)?{required:!0}:null}function ec(t){return null}function Gb(t){return null!=t}function qb(t){const e=Ts(t)?at(t):t;if(Rk&&!Fd(e)){let n="Expected async validator to return Promise or Observable.";throw"object"==typeof t&&(n+=" Are you using a synchronous validator where an async validator is expected?"),new F(-1101,n)}return e}function Wb(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function Jb(t,e){return e.map(n=>n(t))}function Kb(t){return t.map(e=>function Nk(t){return!t.validate}(e)?e:n=>e.validate(n))}function rf(t){return null!=t?function Yb(t){if(!t)return null;const e=t.filter(Gb);return 0==e.length?null:function(n){return Wb(Jb(n,e))}}(Kb(t)):null}function sf(t){return null!=t?function Qb(t){if(!t)return null;const e=t.filter(Gb);return 0==e.length?null:function(n){return wo(Jb(n,e).map(qb)).pipe(O(Wb))}}(Kb(t)):null}function Zb(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function af(t){return t?Array.isArray(t)?t:[t]:[]}function tc(t,e){return Array.isArray(t)?t.includes(e):t===e}function tw(t,e){const n=af(e);return af(t).forEach(o=>{tc(n,o)||n.push(o)}),n}function nw(t,e){return af(e).filter(n=>!tc(t,n))}class rw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class zt extends rw{get formDirective(){return null}get path(){return null}}class Jr extends rw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ow{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let nc=(()=>{class t extends ow{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(x(Jr,2))},t.\u0275dir=re({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&Dr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[xe]}),t})(),iw=(()=>{class t extends ow{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(x(zt,10))},t.\u0275dir=re({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&Dr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[xe]}),t})();function sw(t,e){return t?`with name: '${e}'`:`at index: ${e}`}const uf=!1,Ys="VALID",oc="INVALID",Mi="PENDING",Qs="DISABLED";function df(t){return(ic(t)?t.validators:t)||null}function hf(t,e){return(ic(e)?e.asyncValidators:t)||null}function ic(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class cw{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ys}get invalid(){return this.status===oc}get pending(){return this.status==Mi}get disabled(){return this.status===Qs}get enabled(){return this.status!==Qs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nw(e,this._rawAsyncValidators))}hasValidator(e){return tc(this._rawValidators,e)}hasAsyncValidator(e){return tc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Mi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Qs,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Ys,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ys||this.status===Mi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qs:Ys}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Mi,this._hasOwnPendingAsyncValidator=!0;const n=qb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?Qs:this.errors?oc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mi)?Mi:this._anyControlsHaveStatus(oc)?oc:Ys}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ic(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Bk(t){return Array.isArray(t)?rf(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Hk(t){return Array.isArray(t)?sf(t):t||null}(this._rawAsyncValidators)}}class ff extends cw{constructor(e,n,r){super(df(n),hf(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function lw(t,e,n){t._forEachChild((r,o)=>{if(void 0===n[o])throw new F(1002,uf?function $k(t,e){return`Must supply a value for form control ${sw(t,e)}`}(e,o):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function aw(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new F(1e3,uf?function Vk(t){return`\n    There are no form controls registered with this ${t?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[n])throw new F(1001,uf?function Uk(t,e){return`Cannot find form control ${sw(t,e)}`}(e,n):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,o)=>((r.enabled||this.disabled)&&(n[o]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((o,i)=>{r=n(r,o,i)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ii=new q("CallSetDisabledState",{providedIn:"root",factory:()=>sc}),sc="always";function Zs(t,e,n=sc){pf(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function qk(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&uw(t,e)})}(t,e),function Jk(t,e){const n=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Wk(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&uw(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Gk(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function cc(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function pf(t,e){const n=function Xb(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Zb(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function ew(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Zb(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const o=()=>t.updateValueAndValidity();cc(e._rawValidators,o),cc(e._rawAsyncValidators,o)}function uw(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Xk={provide:zt,useExisting:Fe(()=>dc)},Xs=(()=>Promise.resolve())();let dc=(()=>{class t extends zt{constructor(n,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ze,this.form=new ff({},rf(n),sf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Xs.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Zs(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Xs.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Xs.then(()=>{const r=this._findContainer(n.path),o=new ff({});(function dw(t,e){pf(t,e)})(o,n),r.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Xs.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Xs.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function hw(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return t.\u0275fac=function(n){return new(n||t)(x(Ft,10),x(Wr,10),x(Ii,8))},t.\u0275dir=re({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){1&n&&de("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ge([Xk]),xe]}),t})();function fw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function pw(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const gw=class extends cw{constructor(e=null,n,r){super(df(n),hf(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ic(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=pw(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){pw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},nN={provide:Jr,useExisting:Fe(()=>ea)},vw=(()=>Promise.resolve())();let ea=(()=>{class t extends Jr{constructor(n,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new gw,this._registered=!1,this.update=new Ze,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function yf(t,e){if(!e)return null;let n,r,o;return Array.isArray(e),e.forEach(i=>{i.constructor===Si?n=i:function Qk(t){return Object.getPrototypeOf(t.constructor)===Do}(i)?r=i:o=i}),o||r||n||null}(0,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function mf(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zs(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){vw.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,o=0!==r&&wi(r);vw.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function ac(t,e){return[...e.path,t]}(n,this._parent):[n]}}return t.\u0275fac=function(n){return new(n||t)(x(zt,9),x(Ft,10),x(Wr,10),x(ar,10),x(bi,8),x(Ii,8))},t.\u0275dir=re({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ge([nN]),xe,vn]}),t})(),_w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=re({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),bw=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=xn({type:t}),t.\u0275inj=mn({}),t})();const hN={provide:ar,useExisting:Fe(()=>hc),multi:!0};function xw(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let hc=(()=>{class t extends Do{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const o=xw(this._getOptionId(n),n);this.setProperty("value",o)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function fN(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=xt(t)))(r||t)}}(),t.\u0275dir=re({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){1&n&&de("change",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ge([hN]),xe]}),t})(),Aw=(()=>{class t{constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(xw(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(n){return new(n||t)(x(sn),x(Cr),x(hc,9))},t.\u0275dir=re({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const pN={provide:ar,useExisting:Fe(()=>bf),multi:!0};function Tw(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let bf=(()=>{class t extends Do{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const o=n.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);o.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,n(o)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function gN(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=xt(t)))(r||t)}}(),t.\u0275dir=re({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){1&n&&de("change",function(i){return r.onChange(i.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ge([pN]),xe]}),t})(),Ow=(()=>{class t{constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(Tw(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Tw(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(n){return new(n||t)(x(sn),x(Cr),x(bf,9))},t.\u0275dir=re({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),Eo=(()=>{class t{constructor(){this._validator=ec}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ec,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=re({type:t,features:[vn]}),t})();const vN={provide:Ft,useExisting:Fe(()=>fc),multi:!0};let fc=(()=>{class t extends Eo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=wi,this.createValidator=n=>Vb}enabled(n){return n}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=xt(t)))(r||t)}}(),t.\u0275dir=re({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){2&n&&or("required",r._enabled?"":null)},inputs:{required:"required"},features:[Ge([vN]),xe]}),t})(),EN=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=xn({type:t}),t.\u0275inj=mn({imports:[bw]}),t})(),MN=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Ii,useValue:n.callSetDisabledState??sc}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=xn({type:t}),t.\u0275inj=mn({imports:[EN]}),t})();class En extends _{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const pc=ge(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function $w(...t){const e=Zi(t),n=Lp(t),{args:r,keys:o}=Ob(t);if(0===r.length)return at([],e);const i=new Ue(function IN(t,e,n=qn){return r=>{Bw(e,()=>{const{length:o}=t,i=new Array(o);let s=o,a=o;for(let l=0;l<o;l++)Bw(e,()=>{const c=at(t[l],e);let u=!1;c.subscribe(P(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>Rb(o,s):qn));return n?i.pipe(Pb(n)):i}function Bw(t,e,n){t?hr(n,t,e):e()}function wf(...t){return function xN(){return No(1)}()(at(t,Zi(t)))}function Hw(t){return new Ue(e=>{In(t()).subscribe(e)})}function xi(t,e){const n=Q(t)?t:()=>t,r=o=>o.error(n());return new Ue(e?o=>e.schedule(r,0,o):r)}function Df(){return b((t,e)=>{let n=null;t._refCount++;const r=P(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const o=t._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class zw extends Ue{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,S(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new M;const n=this.getSubject();e.add(this.source.subscribe(P(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=M.EMPTY)}return e}refCount(){return Df()(this)}}function lr(t,e){return b((n,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();n.subscribe(P(r,l=>{o?.unsubscribe();let c=0;const u=i++;In(t(l,u)).subscribe(o=P(r,d=>r.next(e?e(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Ai(t){return t<=0?()=>Jn:b((e,n)=>{let r=0;e.subscribe(P(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function gc(t){return b((e,n)=>{let r=!1;e.subscribe(P(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function Gw(t=TN){return b((e,n)=>{let r=!1;e.subscribe(P(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function TN(){return new pc}function Kr(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Or((o,i)=>t(o,i,r)):qn,Ai(1),n?gc(e):Gw(()=>new pc))}function ht(t,e,n){const r=Q(t)||e||n?{next:t,error:e,complete:n}:t;return r?b((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(P(i,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),i.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),i.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),i.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):qn}function $n(t){return b((e,n)=>{let i,r=null,o=!1;r=e.subscribe(P(n,void 0,void 0,s=>{i=In(t(s,$n(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function qw(t,e){return b(function ON(t,e,n,r,o){return(i,s)=>{let a=n,l=e,c=0;i.subscribe(P(s,u=>{const d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}(t,e,arguments.length>=2,!0))}function Ef(t){return t<=0?()=>Jn:b((e,n)=>{let r=[];e.subscribe(P(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(const o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Ww(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Or((o,i)=>t(o,i,r)):qn,Ef(1),n?gc(e):Gw(()=>new pc))}function Sf(t){return b((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const he="primary",ta=Symbol("RouteTitle");class kN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Ti(t){return new kN(t)}function NN(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=t[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function cr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!Jw(t[o],e[o]))return!1;return!0}function Jw(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}return t===e}function Kw(t){return Array.prototype.concat.apply([],t)}function Yw(t){return t.length>0?t[t.length-1]:null}function At(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Yr(t){return Fd(t)?t:Ts(t)?at(Promise.resolve(t)):W(t)}const mc=!1,LN={exact:function Xw(t,e,n){if(!So(t.segments,e.segments)||!yc(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!Xw(t.children[r],e.children[r],n))return!1;return!0},subset:e0},Qw={exact:function jN(t,e){return cr(t,e)},subset:function VN(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Jw(t[n],e[n]))},ignored:()=>!0};function Zw(t,e,n){return LN[n.paths](t.root,e.root,n.matrixParams)&&Qw[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function e0(t,e,n){return t0(t,e,e.segments,n)}function t0(t,e,n,r){if(t.segments.length>n.length){const o=t.segments.slice(0,n.length);return!(!So(o,n)||e.hasChildren()||!yc(o,n,r))}if(t.segments.length===n.length){if(!So(t.segments,n)||!yc(t.segments,n,r))return!1;for(const o in e.children)if(!t.children[o]||!e0(t.children[o],e.children[o],r))return!1;return!0}{const o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!(So(t.segments,o)&&yc(t.segments,o,r)&&t.children[he])&&t0(t.children[he],e,i,r)}}function yc(t,e,n){return e.every((r,o)=>Qw[n](t[o].parameters,r.parameters))}class Qr{constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return BN.serialize(this)}}class ve{constructor(e,n){this.segments=e,this.children=n,this.parent=null,At(n,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vc(this)}}class na{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Ti(this.parameters)),this._parameterMap}toString(){return o0(this)}}function So(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let ra=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:function(){return new Mf},providedIn:"root"}),t})();class Mf{parse(e){const n=new QN(e);return new Qr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${oa(e.root,!0)}`,r=function GN(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(o=>`${_c(n)}=${_c(o)}`).join("&"):`${_c(n)}=${_c(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function HN(t){return encodeURI(t)}(e.fragment)}`:""}`}}const BN=new Mf;function vc(t){return t.segments.map(e=>o0(e)).join("/")}function oa(t,e){if(!t.hasChildren())return vc(t);if(e){const n=t.children[he]?oa(t.children[he],!1):"",r=[];return At(t.children,(o,i)=>{i!==he&&r.push(`${i}:${oa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function $N(t,e){let n=[];return At(t.children,(r,o)=>{o===he&&(n=n.concat(e(r,o)))}),At(t.children,(r,o)=>{o!==he&&(n=n.concat(e(r,o)))}),n}(t,(r,o)=>o===he?[oa(t.children[he],!1)]:[`${o}:${oa(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[he]?`${vc(t)}/${n[0]}`:`${vc(t)}/(${n.join("//")})`}}function n0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _c(t){return n0(t).replace(/%3B/gi,";")}function If(t){return n0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cc(t){return decodeURIComponent(t)}function r0(t){return Cc(t.replace(/\+/g,"%20"))}function o0(t){return`${If(t.path)}${function zN(t){return Object.keys(t).map(e=>`;${If(e)}=${If(t[e])}`).join("")}(t.parameters)}`}const qN=/^[^\/()?;=#]+/;function bc(t){const e=t.match(qN);return e?e[0]:""}const WN=/^[^=?&#]+/,KN=/^[^&#]+/;class QN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[he]=new ve(e,n)),r}parseSegment(){const e=bc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new F(4009,mc);return this.capture(e),new na(Cc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=bc(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=bc(this.remaining);o&&(r=o,this.capture(r))}e[Cc(n)]=Cc(r)}parseQueryParam(e){const n=function JN(t){const e=t.match(WN);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function YN(t){const e=t.match(KN);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=r0(n),i=r0(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new F(4010,mc);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=he);const s=this.parseChildren();n[i]=1===Object.keys(s).length?s[he]:new ve([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new F(4011,mc)}}function xf(t){return t.segments.length>0?new ve([],{[he]:t}):t}function wc(t){const e={};for(const r of Object.keys(t.children)){const i=wc(t.children[r]);(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function ZN(t){if(1===t.numberOfChildren&&t.children[he]){const e=t.children[he];return new ve(t.segments.concat(e.segments),e.children)}return t}(new ve(t.segments,e))}function Mo(t){return t instanceof Qr}const Af=!1;function XN(t,e,n,r,o){if(0===n.length)return Oi(e.root,e.root,e.root,r,o);const i=function u0(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new c0(!0,0,t);let e=0,n=!1;const r=t.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return At(i.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new c0(n,e,r)}(n);return i.toRoot()?Oi(e.root,e.root,new ve([],{}),r,o):function s(l){const c=function tF(t,e,n,r){if(t.isAbsolute)return new Pi(e.root,!0,0);if(-1===r)return new Pi(n,n===e.root,0);return function d0(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new F(4005,Af&&"Invalid number of '../'");o=r.segments.length}return new Pi(r,!1,o-i)}(n,r+(ia(t.commands[0])?0:1),t.numberOfDoubleDots)}(i,e,t.snapshot?._urlSegment,l),u=c.processChildren?Ri(c.segmentGroup,c.index,i.commands):Tf(c.segmentGroup,c.index,i.commands);return Oi(e.root,c.segmentGroup,u,r,o)}(t.snapshot?._lastPathIndex)}function ia(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function sa(t){return"object"==typeof t&&null!=t&&t.outlets}function Oi(t,e,n,r,o){let s,i={};r&&At(r,(l,c)=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=t===e?n:l0(t,e,n);const a=xf(wc(s));return new Qr(a,i,o)}function l0(t,e,n){const r={};return At(t.children,(o,i)=>{r[i]=o===e?n:l0(o,e,n)}),new ve(t.segments,r)}class c0{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ia(r[0]))throw new F(4003,Af&&"Root segment cannot have matrix parameters");const o=r.find(sa);if(o&&o!==Yw(r))throw new F(4004,Af&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pi{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function Tf(t,e,n){if(t||(t=new ve([],{})),0===t.segments.length&&t.hasChildren())return Ri(t,e,n);const r=function rF(t,e,n){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;const s=t.segments[o],a=n[r];if(sa(a))break;const l=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!f0(l,c,s))return i;r+=2}else{if(!f0(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new ve(t.segments.slice(0,r.pathIndex),{});return i.children[he]=new ve(t.segments.slice(r.pathIndex),t.children),Ri(i,0,o)}return r.match&&0===o.length?new ve(t.segments,{}):r.match&&!t.hasChildren()?Of(t,e,n):r.match?Ri(t,0,o):Of(t,e,n)}function Ri(t,e,n){if(0===n.length)return new ve(t.segments,{});{const r=function nF(t){return sa(t[0])?t[0].outlets:{[he]:t}}(n),o={};if(!r[he]&&t.children[he]&&1===t.numberOfChildren&&0===t.children[he].segments.length){const i=Ri(t.children[he],e,n);return new ve(t.segments,i.children)}return At(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=Tf(t.children[s],e,i))}),At(t.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new ve(t.segments,o)}}function Of(t,e,n){const r=t.segments.slice(0,e);let o=0;for(;o<n.length;){const i=n[o];if(sa(i)){const l=oF(i.outlets);return new ve(r,l)}if(0===o&&ia(n[0])){r.push(new na(t.segments[e].path,h0(n[0]))),o++;continue}const s=sa(i)?i.outlets[he]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&ia(a)?(r.push(new na(s,h0(a))),o+=2):(r.push(new na(s,{})),o++)}return new ve(r,{})}function oF(t){const e={};return At(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=Of(new ve([],{}),0,n))}),e}function h0(t){const e={};return At(t,(n,r)=>e[r]=`${n}`),e}function f0(t,e,n){return t==n.path&&cr(e,n.parameters)}const aa="imperative";class ur{constructor(e,n){this.id=e,this.url=n}}class Pf extends ur{constructor(e,n,r="imperative",o=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Io extends ur{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Dc extends ur{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ec extends ur{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=16}}class Rf extends ur{constructor(e,n,r,o){super(e,n),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iF extends ur{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sF extends ur{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aF extends ur{constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lF extends ur{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cF extends ur{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uF{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dF{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hF{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fF{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pF{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gF{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p0{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let vF=(()=>{class t{createUrlTree(n,r,o,i,s,a){return XN(n||r.root,o,i,s,a)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),CF=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:function(e){return vF.\u0275fac(e)},providedIn:"root"}),t})();class g0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=kf(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=kf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Nf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Nf(e,this._root).map(n=>n.value)}}function kf(t,e){if(t===e.value)return e;for(const n of e.children){const r=kf(t,n);if(r)return r}return null}function Nf(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Nf(t,n);if(r.length)return r.unshift(e),r}return[]}class Rr{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function ki(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class m0 extends g0{constructor(e,n){super(e),this.snapshot=n,Ff(this,e)}toString(){return this.snapshot.toString()}}function y0(t,e){const n=function bF(t,e){const s=new Sc([],{},{},"",{},he,e,null,t.root,-1,{});return new _0("",new Rr(s,[]))}(t,e),r=new En([new na("",{})]),o=new En({}),i=new En({}),s=new En({}),a=new En(""),l=new xo(r,o,s,a,i,he,e,n.root);return l.snapshot=n.root,new m0(new Rr(l,[]),n)}class xo{constructor(e,n,r,o,i,s,a,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(O(c=>c[ta]))??W(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(O(e=>Ti(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(O(e=>Ti(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function v0(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const o=n[r],i=n[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function wF(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Sc{get title(){return this.data?.[ta]}constructor(e,n,r,o,i,s,a,l,c,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _0 extends g0{constructor(e,n){super(n),this.url=e,Ff(this,n)}toString(){return C0(this._root)}}function Ff(t,e){e.value._routerState=t,e.children.forEach(n=>Ff(t,n))}function C0(t){const e=t.children.length>0?` { ${t.children.map(C0).join(", ")} } `:"";return`${t.value}${e}`}function Lf(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,cr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),cr(e.params,n.params)||t.params.next(n.params),function FN(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!cr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),cr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function jf(t,e){const n=cr(t.params,e.params)&&function UN(t,e){return So(t,e)&&t.every((n,r)=>cr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||jf(t.parent,e.parent))}function la(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const o=function EF(t,e,n){return e.children.map(r=>{for(const o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return la(t,r,o);return la(t,r)})}(t,e,n);return new Rr(r,o)}{if(t.shouldAttach(e.value)){const i=t.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>la(t,a)),s}}const r=function SF(t){return new xo(new En(t.url),new En(t.params),new En(t.queryParams),new En(t.fragment),new En(t.data),t.outlet,t.component,t)}(e.value),o=e.children.map(i=>la(t,i));return new Rr(r,o)}}const Vf="ngNavigationCancelingError";function b0(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Mo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=w0(!1,0,e);return o.url=n,o.navigationBehaviorOptions=r,o}function w0(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[Vf]=!0,r.cancellationCode=e,n&&(r.url=n),r}function D0(t){return E0(t)&&Mo(t.url)}function E0(t){return t&&t[Vf]}class MF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ca,this.attachRef=null}}let ca=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new MF,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Mc=!1;let Ic=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new Ze,this.deactivateEvents=new Ze,this.attachEvents=new Ze,this.detachEvents=new Ze,this.parentContexts=me(ca),this.location=me(Ln),this.changeDetector=me(bi),this.environmentInjector=me(er)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,Mc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,Mc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,Mc);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new F(4013,Mc);this._activatedRoute=n;const o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new IF(n,a,o.injector);if(r&&function xF(t){return!!t.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=o.createComponent(c,o.length,l)}else this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=re({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vn]}),t})();class IF{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===xo?this.route:e===ca?this.childContexts:this.parent.get(e,n)}}let Uf=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=jr({type:t,selectors:[["ng-component"]],standalone:!0,features:[l_],decls:1,vars:0,template:function(n,r){1&n&&Rn(0,"router-outlet")},dependencies:[Ic],encapsulation:2}),t})();function S0(t,e){return t.providers&&!t._injector&&(t._injector=Sl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Bf(t){const e=t.children&&t.children.map(Bf),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==he&&(n.component=Uf),n}function Sn(t){return t.outlet||he}function M0(t,e){const n=t.filter(r=>Sn(r)===e);return n.push(...t.filter(r=>Sn(r)!==e)),n}function ua(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class RF{constructor(e,n,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Lf(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const o=ki(n);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),At(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=ki(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=ki(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const o=ki(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new gF(i.value.snapshot))}),e.children.length&&this.forwardEvent(new fF(e.value.snapshot))}activateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(Lf(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Lf(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=ua(o.snapshot),l=a?.get(Ds)??null;s.attachRef=null,s.route=o,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class I0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xc{constructor(e,n){this.component=e,this.route=n}}function kF(t,e,n){const r=t._root;return da(r,e?e._root:null,n,[r.value])}function Ni(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function dE(t){return null!==xa(t)}(t)?e.get(t):t:r}function da(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=ki(e);return t.children.forEach(s=>{(function FF(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function LF(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!So(t.url,e.url);case"pathParamsOrQueryParamsChange":return!So(t.url,e.url)||!cr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jf(t,e)||!cr(t.queryParams,e.queryParams);default:return!jf(t,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new I0(r)):(i.data=s.data,i._resolvedData=s._resolvedData),da(t,e,i.component?a?a.children:null:n,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new xc(a.outlet.component,s))}else s&&ha(e,a,o),o.canActivateChecks.push(new I0(r)),da(t,null,i.component?a?a.children:null:n,r,o)})(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),At(i,(s,a)=>ha(s,n.getContext(a),o)),o}function ha(t,e,n){const r=ki(t),o=t.value;At(r,(i,s)=>{ha(i,o.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new xc(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function fa(t){return"function"==typeof t}function Hf(t){return t instanceof pc||"EmptyError"===t?.name}const Ac=Symbol("INITIAL_VALUE");function Fi(){return lr(t=>$w(t.map(e=>e.pipe(Ai(1),function AN(...t){const e=Zi(t);return b((n,r)=>{(e?wf(t,n,e):wf(t,n)).subscribe(r)})}(Ac)))).pipe(O(e=>{for(const n of e)if(!0!==n){if(n===Ac)return Ac;if(!1===n||n instanceof Qr)return n}return!0}),Or(e=>e!==Ac),Ai(1)))}function x0(t){return function wa(...t){return Qi(t)}(ht(e=>{if(Mo(e))throw b0(0,e)}),O(e=>!0===e))}const zf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function A0(t,e,n,r,o){const i=Gf(t,e,n);return i.matched?function eL(t,e,n,r){const o=e.canMatch;return o&&0!==o.length?W(o.map(s=>{const a=Ni(s,t);return Yr(function HF(t){return t&&fa(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Fi(),x0()):W(!0)}(r=S0(e,r),e,n).pipe(O(s=>!0===s?i:{...zf})):W(i)}function Gf(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...zf}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(e.matcher||NN)(n,t,e);if(!o)return{...zf};const i={};At(o.posParams,(a,l)=>{i[l]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Tc(t,e,n,r){if(n.length>0&&function rL(t,e,n){return n.some(r=>Oc(t,e,r)&&Sn(r)!==he)}(t,n,r)){const i=new ve(e,function nL(t,e,n,r){const o={};o[he]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&Sn(i)!==he){const s=new ve([],{});s._sourceSegment=t,s._segmentIndexShift=e.length,o[Sn(i)]=s}return o}(t,e,r,new ve(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function oL(t,e,n){return n.some(r=>Oc(t,e,r))}(t,n,r)){const i=new ve(t.segments,function tL(t,e,n,r,o){const i={};for(const s of r)if(Oc(t,n,s)&&!o[Sn(s)]){const a=new ve([],{});a._sourceSegment=t,a._segmentIndexShift=e.length,i[Sn(s)]=a}return{...o,...i}}(t,e,n,r,t.children));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}const o=new ve(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Oc(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function T0(t,e,n,r){return!!(Sn(t)===r||r!==he&&Oc(e,n,t))&&("**"===t.path||Gf(e,t,n).matched)}function O0(t,e,n){return 0===e.length&&!t.children[n]}const Pc=!1;class Rc{constructor(e){this.segmentGroup=e||null}}class P0{constructor(e){this.urlTree=e}}function pa(t){return xi(new Rc(t))}function R0(t){return xi(new P0(t))}class lL{constructor(e,n,r,o,i){this.injector=e,this.configLoader=n,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const e=Tc(this.urlTree.root,[],[],this.config).segmentGroup,n=new ve(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,he).pipe(O(i=>this.createUrlTree(wc(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe($n(i=>{if(i instanceof P0)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof Rc?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,he).pipe(O(o=>this.createUrlTree(wc(o),e.queryParams,e.fragment))).pipe($n(o=>{throw o instanceof Rc?this.noMatchError(o):o}))}noMatchError(e){return new F(4002,Pc)}createUrlTree(e,n,r){const o=xf(e);return new Qr(o,n,r)}expandSegmentGroup(e,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(O(i=>new ve([],i))):this.expandSegment(e,r,n,r.segments,o,!0)}expandChildren(e,n,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return at(o).pipe(zr(i=>{const s=r.children[i],a=M0(n,i);return this.expandSegmentGroup(e,a,s,i).pipe(O(l=>({segment:l,outlet:i})))}),qw((i,s)=>(i[s.outlet]=s.segment,i),{}),Ww())}expandSegment(e,n,r,o,i,s){return at(r).pipe(zr(a=>this.expandSegmentAgainstRoute(e,n,r,a,o,i,s).pipe($n(c=>{if(c instanceof Rc)return W(null);throw c}))),Kr(a=>!!a),$n((a,l)=>{if(Hf(a))return O0(n,o,i)?W(new ve([],{})):pa(n);throw a}))}expandSegmentAgainstRoute(e,n,r,o,i,s,a){return T0(o,n,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,n,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s):pa(n):pa(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?R0(i):this.lineralizeSegments(r,i).pipe(St(s=>{const a=new ve(s,{});return this.expandSegment(e,a,n,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Gf(n,o,i);if(!a)return pa(n);const d=this.applyRedirectCommands(l,o.redirectTo,u);return o.redirectTo.startsWith("/")?R0(d):this.lineralizeSegments(o,d).pipe(St(h=>this.expandSegment(e,n,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,n,r,o,i){return"**"===r.path?(e=S0(r,e),r.loadChildren?(r._loadedRoutes?W({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(O(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new ve(o,{})))):W(new ve(o,{}))):A0(n,r,o,e).pipe(lr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(e=r._injector??e,r,o).pipe(St(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=Tc(n,a,l,h),g=new ve(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(O(C=>new ve(a,C)));if(0===h.length&&0===p.length)return W(new ve(a,{}));const y=Sn(r)===i;return this.expandSegment(d,g,h,p,y?he:i,!0).pipe(O(T=>new ve(a.concat(T.segments),T.children)))})):pa(n)))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?W({routes:n._loadedRoutes,injector:n._loadedInjector}):function XF(t,e,n,r){const o=e.canLoad;return void 0===o||0===o.length?W(!0):W(o.map(s=>{const a=Ni(s,t);return Yr(function VF(t){return t&&fa(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Fi(),x0())}(e,n,r).pipe(St(o=>o?this.configLoader.loadChildren(e,n).pipe(ht(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):function sL(t){return xi(w0(Pc,3))}())):W({routes:[],injector:e})}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return W(r);if(o.numberOfChildren>1||!o.children[he])return e.redirectTo,xi(new F(4e3,Pc));o=o.children[he]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,o){const i=this.createSegmentGroup(e,n.root,r,o);return new Qr(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return At(e,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,o){const i=this.createSegments(e,n.segments,r,o);let s={};return At(n.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,r,o)}),new ve(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){const o=r[n.path.substring(1)];if(!o)throw new F(4001,Pc);return o}findOrReturn(e,n){let r=0;for(const o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}}class uL{}class fL{constructor(e,n,r,o,i,s,a){this.injector=e,this.rootComponentType=n,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=Tc(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,he).pipe(O(n=>{if(null===n)return null;const r=new Sc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},he,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Rr(r,n),i=new _0(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(e){const n=e.value,r=v0(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,o)}processChildren(e,n,r){return at(Object.keys(r.children)).pipe(zr(o=>{const i=r.children[o],s=M0(n,o);return this.processSegmentGroup(e,s,i,o)}),qw((o,i)=>o&&i?(o.push(...i),o):null),function PN(t,e=!1){return b((n,r)=>{let o=0;n.subscribe(P(r,i=>{const s=t(i,o++);(s||e)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),gc(null),Ww(),O(o=>{if(null===o)return null;const i=N0(o);return function pL(t){t.sort((e,n)=>e.value.outlet===he?-1:n.value.outlet===he?1:e.value.outlet.localeCompare(n.value.outlet))}(i),i}))}processSegment(e,n,r,o,i){return at(n).pipe(zr(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,o,i)),Kr(s=>!!s),$n(s=>{if(Hf(s))return O0(r,o,i)?W([]):W(null);throw s}))}processSegmentAgainstRoute(e,n,r,o,i){if(n.redirectTo||!T0(n,r,o,i))return W(null);let s;if("**"===n.path){const a=o.length>0?Yw(o).parameters:{},l=L0(r)+o.length;s=W({snapshot:new Sc(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j0(n),Sn(n),n.component??n._loadedComponent??null,n,F0(r),l,V0(n)),consumedSegments:[],remainingSegments:[]})}else s=A0(r,n,o,e).pipe(O(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=L0(r)+l.length;return{snapshot:new Sc(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j0(n),Sn(n),n.component??n._loadedComponent??null,n,F0(r),d,V0(n)),consumedSegments:l,remainingSegments:c}}));return s.pipe(lr(a=>{if(null===a)return W(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=n._injector??e;const d=n._loadedInjector??e,h=function gL(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(n),{segmentGroup:f,slicedSegments:p}=Tc(r,c,u,h.filter(y=>void 0===y.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(O(y=>null===y?null:[new Rr(l,y)]));if(0===h.length&&0===p.length)return W([new Rr(l,[])]);const g=Sn(n)===i;return this.processSegment(d,h,f,p,g?he:i).pipe(O(y=>null===y?null:[new Rr(l,y)]))}))}}function mL(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function N0(t){const e=[],n=new Set;for(const r of t){if(!mL(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):e.push(r)}for(const r of n){const o=N0(r.children);e.push(new Rr(r.value,o))}return e.filter(r=>!n.has(r))}function F0(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function L0(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function j0(t){return t.data||{}}function V0(t){return t.resolve||{}}function U0(t){return"string"==typeof t.title||null===t.title}function qf(t){return lr(e=>{const n=t(e);return n?at(n).pipe(O(()=>e)):W(e)})}const Li=new q("ROUTES");let Wf=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=me(Y_)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return W(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Yr(n.loadComponent()).pipe(O(B0),ht(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),Sf(()=>{this.componentLoaders.delete(n)})),o=new zw(r,()=>new _).pipe(Df());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(O(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(n).injector,c=Kw(l.get(Li,[],ee.Self|ee.Optional)));return{routes:c.map(Bf),injector:l}}),Sf(()=>{this.childrenLoaders.delete(r)})),s=new zw(i,()=>new _).pipe(Df());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(n){return Yr(n()).pipe(O(B0),St(r=>r instanceof s_||Array.isArray(r)?W(r):at(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function B0(t){return function EL(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Nc=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new _,this.configLoader=me(Wf),this.environmentInjector=me(er),this.urlSerializer=me(ra),this.rootContexts=me(ca),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new dF(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new uF(o))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new En({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:aa,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Or(r=>0!==r.id),O(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),lr(r=>{let o=!1,i=!1;return W(r).pipe(ht(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),lr(s=>{const a=n.browserUrlTree.toString(),l=!n.navigated||s.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const u="";return this.events.next(new Ec(s.id,n.serializeUrl(r.rawUrl),u,0)),n.rawUrlTree=s.rawUrl,s.resolve(null),Jn}if(n.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return H0(s.source)&&(n.browserUrlTree=s.extractedUrl),W(s).pipe(lr(u=>{const d=this.transitions?.getValue();return this.events.next(new Pf(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?Jn:Promise.resolve(u)}),function cL(t,e,n,r){return lr(o=>function aL(t,e,n,r,o){return new lL(t,e,n,r,o).apply()}(t,e,n,o.extractedUrl,r).pipe(O(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),ht(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function vL(t,e,n,r,o){return St(i=>function hL(t,e,n,r,o,i,s="emptyOnly"){return new fL(t,e,n,r,o,s,i).recognize().pipe(lr(a=>null===a?function dL(t){return new Ue(e=>e.error(t))}(new uL):W(a)))}(t,e,n,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(O(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),ht(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=n.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);n.setBrowserUrl(h,u)}n.browserUrlTree=u.urlAfterRedirects}const d=new iF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,g=new Pf(u,this.urlSerializer.serialize(d),h,f);this.events.next(g);const y=y0(d,this.rootComponentType).snapshot;return W(r={...s,targetSnapshot:y,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Ec(s.id,n.serializeUrl(r.extractedUrl),u,1)),n.rawUrlTree=s.rawUrl,s.resolve(null),Jn}}),ht(s=>{const a=new sF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),O(s=>r={...s,guards:kF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function GF(t,e){return St(n=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return 0===s.length&&0===i.length?W({...n,guardsResult:!0}):function qF(t,e,n,r){return at(t).pipe(St(o=>function ZF(t,e,n,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?W(i.map(a=>{const l=ua(e)??o,c=Ni(a,l);return Yr(function BF(t){return t&&fa(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):l.runInContext(()=>c(t,e,n,r))).pipe(Kr())})).pipe(Fi()):W(!0)}(o.component,o.route,n,e,r)),Kr(o=>!0!==o,!0))}(s,r,o,t).pipe(St(a=>a&&function jF(t){return"boolean"==typeof t}(a)?function WF(t,e,n,r){return at(e).pipe(zr(o=>wf(function KF(t,e){return null!==t&&e&&e(new hF(t)),W(!0)}(o.route.parent,r),function JF(t,e){return null!==t&&e&&e(new pF(t)),W(!0)}(o.route,r),function QF(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function NF(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Hw(()=>W(s.guards.map(l=>{const c=ua(s.node)??n,u=Ni(l,c);return Yr(function $F(t){return t&&fa(t.canActivateChild)}(u)?u.canActivateChild(r,t):c.runInContext(()=>u(r,t))).pipe(Kr())})).pipe(Fi())));return W(i).pipe(Fi())}(t,o.path,n),function YF(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return W(!0);const o=r.map(i=>Hw(()=>{const s=ua(e)??n,a=Ni(i,s);return Yr(function UF(t){return t&&fa(t.canActivate)}(a)?a.canActivate(e,t):s.runInContext(()=>a(e,t))).pipe(Kr())}));return W(o).pipe(Fi())}(t,o.route,n))),Kr(o=>!0!==o,!0))}(r,i,t,e):W(a)),O(a=>({...n,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),ht(s=>{if(r.guardsResult=s.guardsResult,Mo(s.guardsResult))throw b0(0,s.guardsResult);const a=new aF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Or(s=>!!s.guardsResult||(n.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),qf(s=>{if(s.guards.canActivateChecks.length)return W(s).pipe(ht(a=>{const l=new lF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),lr(a=>{let l=!1;return W(a).pipe(function _L(t,e){return St(n=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return W(n);let i=0;return at(o).pipe(zr(s=>function CL(t,e,n,r){const o=t.routeConfig,i=t._resolve;return void 0!==o?.title&&!U0(o)&&(i[ta]=o.title),function bL(t,e,n,r){const o=function wL(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===o.length)return W({});const i={};return at(o).pipe(St(s=>function DL(t,e,n,r){const o=ua(e)??r,i=Ni(t,o);return Yr(i.resolve?i.resolve(e,n):o.runInContext(()=>i(e,n)))}(t[s],e,n,r).pipe(Kr(),ht(a=>{i[s]=a}))),Ef(1),function RN(t){return O(()=>t)}(i),$n(s=>Hf(s)?Jn:xi(s)))}(i,t,e,r).pipe(O(s=>(t._resolvedData=s,t.data=v0(t,n).resolve,o&&U0(o)&&(t.data[ta]=o.title),null)))}(s.route,r,t,e)),ht(()=>i++),Ef(1),St(s=>i===o.length?W(n):Jn))})}(n.paramsInheritanceStrategy,this.environmentInjector),ht({next:()=>l=!0,complete:()=>{l||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),ht(a=>{const l=new cF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),qf(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(ht(u=>{l.component=u}),O(()=>{})));for(const u of l.children)c.push(...a(u));return c};return $w(a(s.targetSnapshot.root)).pipe(gc(),Ai(1))}),qf(()=>this.afterPreactivation()),O(s=>{const a=function DF(t,e,n){const r=la(t,e._root,n?n._root:void 0);return new m0(r,e)}(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),ht(s=>{n.currentUrlTree=s.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),n.routerState=s.targetRouterState,"deferred"===n.urlUpdateStrategy&&(s.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,s),n.browserUrlTree=s.urlAfterRedirects)}),((t,e,n)=>O(r=>(new RF(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s)),Ai(1),ht({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new Io(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Sf(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),$n(s=>{if(i=!0,E0(s)){D0(s)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new Dc(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),D0(s)){const l=n.urlHandlingStrategy.merge(s.url,n.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||H0(r.source)};n.scheduleNavigation(l,aa,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new Rf(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(s))}catch(l){r.reject(l)}}return Jn}))}))}cancelNavigationTransition(n,r,o){const i=new Dc(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function H0(t){return t!==aa}let z0=(()=>{class t{buildTitle(n){let r,o=n.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===he);return r}getResolvedTitleForRoute(n){return n.data[ta]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:function(){return me(SL)},providedIn:"root"}),t})(),SL=(()=>{class t extends z0{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(B(gb))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ML=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:function(){return me(xL)},providedIn:"root"}),t})();class IL{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let xL=(()=>{class t extends IL{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=xt(t)))(r||t)}}(),t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Fc=new q("",{providedIn:"root",factory:()=>({})});let TL=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:function(){return me(OL)},providedIn:"root"}),t})(),OL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function PL(t){throw t}function RL(t,e,n){return e.parse("/")}const kL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _t=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=me(BO),this.isNgZoneEnabled=!1,this.options=me(Fc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||PL,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||RL,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=me(TL),this.routeReuseStrategy=me(ML),this.urlCreationStrategy=me(CF),this.titleStrategy=me(z0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Kw(me(Li,{optional:!0})??[]),this.navigationTransitions=me(Nc),this.urlSerializer=me(ra),this.location=me(Mh),this.isNgZoneEnabled=me(rt)instanceof rt&&rt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Qr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=y0(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),aa,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Bf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,n,u,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const o=Mo(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,aa,null,r)}navigate(n,r={skipLocationChange:!1}){return function FL(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new F(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,n)}return r}isActive(n,r){let o;if(o=!0===r?{...kL}:!1===r?{...NL}:r,Mo(n))return Zw(this.currentUrlTree,n,o);const i=this.parseUrl(n);return Zw(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.keys(n).reduce((r,o)=>{const i=n[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Lc=(()=>{class t{constructor(n,r,o,i,s,a){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new _;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=n.events.subscribe(c=>{c instanceof Io&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(n){this._preserveFragment=wi(n)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(n){this._skipLocationChange=wi(n)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(n){this._replaceUrl=wi(n)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function Rm(t,e,n){return function VM(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?Pm:od}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,n,r):o.removeAttribute(i,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return t.\u0275fac=function(n){return new(n||t)(x(_t),x(xo),function Ka(t){return function uS(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let o=0;for(;o<r;){const i=n[o];if(Dg(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof n[o];)o++;else{if(i===e)return n[o+1];o+=2}}}return null}(It(),t)}("tabindex"),x(Cr),x(sn),x(Co))},t.\u0275dir=re({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){1&n&&de("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&n&&or("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[vn]}),t})(),G0=(()=>{class t{get isActive(){return this._isActive}constructor(n,r,o,i,s){this.router=n,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ze,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Io&&this.update()})}ngAfterContentInit(){W(this.links.changes,W(null)).pipe(No()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=at(n).pipe(No()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const n=this.hasActiveLinks();this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function LL(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&n.isActive(o.urlTree,r)}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}}return t.\u0275fac=function(n){return new(n||t)(x(_t),x(sn),x(Cr),x(bi),x(Lc,8))},t.\u0275dir=re({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(n,r,o){if(1&n&&M_(o,Lc,5),2&n){let i;S_(i=function I_(){return function CO(t,e){return t[Qn].queries[e].queryList}(R(),mg())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[vn]}),t})();class q0{}let jL=(()=>{class t{constructor(n,r,o,i,s){this.router=n,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Or(n=>n instanceof Io),zr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=Sl(i.providers,n,`Route: ${i.path}`));const s=i._injector??n,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return at(o).pipe(No())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):W(null);const i=o.pipe(St(s=>null===s?W(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?at([i,this.loader.loadComponent(r)]).pipe(No()):i})}}return t.\u0275fac=function(n){return new(n||t)(B(_t),B(Y_),B(er),B(q0),B(Wf))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Kf=new q("");let W0=(()=>{class t{constructor(n,r,o,i,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Pf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Io&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof p0&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new p0(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){!function uy(){throw new Error("invalid")}()},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();var ln=(()=>((ln=ln||{})[ln.COMPLETE=0]="COMPLETE",ln[ln.FAILED=1]="FAILED",ln[ln.REDIRECTING=2]="REDIRECTING",ln))();const ji=!1;function Zr(t,e){return{\u0275kind:t,\u0275providers:e}}const Yf=new q("",{providedIn:"root",factory:()=>!1});function K0(){const t=me(tr);return e=>{const n=t.get(Pl);if(e!==n.components[0])return;const r=t.get(_t),o=t.get(Y0);1===t.get(Qf)&&r.initialNavigation(),t.get(Q0,null,ee.Optional)?.setUpPreloading(),t.get(Kf,null,ee.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const Y0=new q(ji?"bootstrap done indicator":"",{factory:()=>new _}),Qf=new q(ji?"initial navigation":"",{providedIn:"root",factory:()=>1});function HL(){let t=[];return t=ji?[{provide:sl,multi:!0,useFactory:()=>{const e=me(_t);return()=>e.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function mF(t){if(!("type"in t))return`Unknown Router Event: ${t.constructor.name}`;switch(t.type){case 14:return`ActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state}, shouldActivate: ${t.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 2:return`NavigationCancel(id: ${t.id}, url: '${t.url}')`;case 16:return`NavigationSkipped(id: ${t.id}, url: '${t.url}')`;case 1:return`NavigationEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${t.id}, url: '${t.url}', error: ${t.error})`;case 0:return`NavigationStart(id: ${t.id}, url: '${t.url}')`;case 6:return`ResolveEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 5:return`ResolveStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 10:return`RouteConfigLoadEnd(path: ${t.route.path})`;case 9:return`RouteConfigLoadStart(path: ${t.route.path})`;case 4:return`RoutesRecognized(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 15:return`Scroll(anchor: '${t.anchor}', position: '${t.position?`${t.position[0]}, ${t.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],Zr(1,t)}const Q0=new q(ji?"router preloader":"");function zL(t){return Zr(0,[{provide:Q0,useExisting:jL},{provide:q0,useExisting:t}])}const ga=!1,Z0=new q(ga?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),GL=[Mh,{provide:ra,useClass:Mf},_t,ca,{provide:xo,useFactory:function J0(t){return t.routerState.root},deps:[_t]},Wf,ga?{provide:Yf,useValue:!0}:[]];function qL(){return new oC("Router",_t)}let Zf=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[GL,ga&&r?.enableTracing?HL().\u0275providers:[],{provide:Li,multi:!0,useValue:n},{provide:Z0,useFactory:YL,deps:[[_t,new fs,new ps]]},{provide:Fc,useValue:r||{}},r?.useHash?{provide:Co,useClass:A1}:{provide:Co,useClass:IC},{provide:Kf,useFactory:()=>{const t=me(JP),e=me(rt),n=me(Fc),r=me(Nc),o=me(ra);return n.scrollOffset&&t.setOffset(n.scrollOffset),new W0(o,r,t,e,n)}},r?.preloadingStrategy?zL(r.preloadingStrategy).\u0275providers:[],{provide:oC,multi:!0,useFactory:qL},r?.initialNavigation?QL(r):[],[{provide:X0,useFactory:K0},{provide:rC,multi:!0,useExisting:X0}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Li,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(B(Z0,8))},t.\u0275mod=xn({type:t}),t.\u0275inj=mn({imports:[Uf]}),t})();function YL(t){if(ga&&t)throw new F(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function QL(t){return["disabled"===t.initialNavigation?Zr(3,[{provide:Al,multi:!0,useFactory:()=>{const e=me(_t);return()=>{e.setUpLocationChangeListener()}}},{provide:Qf,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Zr(2,[{provide:Qf,useValue:0},{provide:Al,multi:!0,deps:[tr],useFactory:e=>{const n=e.get(I1,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const o=e.get(_t),i=e.get(Y0);(function VL(t,e){t.events.pipe(Or(n=>n instanceof Io||n instanceof Dc||n instanceof Rf||n instanceof Ec),O(n=>n instanceof Io||n instanceof Ec?ln.COMPLETE:n instanceof Dc&&(0===n.code||1===n.code)?ln.REDIRECTING:ln.FAILED),Or(n=>n!==ln.REDIRECTING),Ai(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get(Nc).afterPreactivation=()=>(r(!0),i.closed?W(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const X0=new q(ga?"Router Initializer":"");let XL=(()=>{const e=class{constructor(){this.title="Pokemon TCG Pocket Collector"}};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=jr({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){1&o&&Rn(0,"router-outlet")},dependencies:[Ic],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background-color:#000;min-height:100vh}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.data-overview[_ngcontent-%COMP%]{margin-top:30px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 6px #0000001a}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;opacity:.9}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0}.section[_ngcontent-%COMP%]{margin:40px 0;padding:20px 0;border-top:2px solid #e9ecef}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:20px}.sets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.set-card[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.set-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px}.rarity-stats[_ngcontent-%COMP%], .pack-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.rarity-item[_ngcontent-%COMP%], .pack-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#000;border-radius:5px;border-left:4px solid #007bff}.rarity-name[_ngcontent-%COMP%], .pack-name[_ngcontent-%COMP%]{font-weight:600;color:#fff}.rarity-count[_ngcontent-%COMP%], .pack-count[_ngcontent-%COMP%]{color:#ccc}.rarity-percentage[_ngcontent-%COMP%], .pack-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0}.feature[_ngcontent-%COMP%]{background-color:#000;padding:20px;border-radius:8px;border-left:4px solid #17a2b8}.feature[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0;font-size:14px}.api-info[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:20px}.api-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0}.api-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;margin:0}.api-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;color:#ff6b6b}.error[_ngcontent-%COMP%]{background-color:#000;color:#ff6b6b;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center;border:1px solid #ff6b6b}.card-info[_ngcontent-%COMP%]{margin-top:30px}.card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}.card-item[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.card-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin:0 0 10px;font-size:16px}.card-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#ccc}.note[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#ccc;margin-top:20px}.instructions[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:30px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:#fff}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace}.data-info[_ngcontent-%COMP%]{background-color:#000;border-left:4px solid #007bff;padding:15px;margin-top:20px}.data-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:200px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),t})();function eD(t,e,n,r,o,i,s){try{var a=t[i](s),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(r,o)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(l){eD(i,r,o,s,a,"next",l)}function a(l){eD(i,r,o,s,a,"throw",l)}s(void 0)})}}let ej=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json",this.LOCAL_CARDS_PATH="assets/cards/cards.json"}fetchCardsFromAPI(){return this.http.get(this.CARDS_API_URL)}downloadAndStoreCards(){return this.fetchCardsFromAPI().pipe(ht(r=>{localStorage.setItem("pokemonCards",JSON.stringify(r))}))}getStoredCards(){const r=localStorage.getItem("pokemonCards");return r?JSON.parse(r):null}loadCards(){return this.http.get(this.LOCAL_CARDS_PATH).pipe(O(r=>r||[]))}getCardsBySet(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.set===r)))}getCardsByType(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.type===r)))}getCardsByRarity(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.rarity===r)))}searchCardsByName(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.label.eng.toLowerCase().includes(r.toLowerCase()))))}getUniqueSets(){return this.loadCards().pipe(O(r=>[...new Set(r.map(o=>o.set))]))}getUniqueTypes(){return this.loadCards().pipe(O(r=>[...new Set(r.map(o=>o.type).filter(o=>!!o))]))}getUniqueRarities(){return this.loadCards().pipe(O(r=>[...new Set(r.map(o=>o.rarity))]))}getUniquePacks(){return this.loadCards().pipe(O(r=>[...new Set(r.flatMap(o=>o.packs))]))}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(bo))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),tj=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsData(){return this.http.get(this.CARDS_API_URL).pipe($n(r=>(console.error("Error downloading cards data:",r),xi(()=>new Error("Failed to download cards data")))))}downloadCardsAsBlob(){return this.downloadCardsData().pipe(O(r=>{const o=JSON.stringify(r,null,2);return new Blob([o],{type:"application/json"})}))}triggerDownload(){this.downloadCardsAsBlob().subscribe({next:r=>{const o=window.URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download="cards.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},error:r=>{console.error("Failed to download cards data:",r)}})}getStorageInstructions(){return"\nTo store the cards data locally:\n\n1. Create a 'cards' folder in src/assets/\n2. Use the downloadCardsAsBlob() method to get the data\n3. Save the file as 'cards.json' in src/assets/cards/\n\nAlternative: Use triggerDownload() to download the file and manually move it to the assets folder.\n\nNote: In a production environment, you would typically have a backend service \nto handle file storage and serving.\n    "}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(bo))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),nj=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsJson(){this.http.get(this.CARDS_API_URL).subscribe({next:r=>{const o=JSON.stringify(r,null,2),i=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="cards.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`Downloaded ${r.length} cards to cards.json\n\nPlease move the file to: src/assets/cards/cards.json`)},error:r=>{console.error("Failed to download cards data:",r),alert("Failed to download cards data. Please check your internet connection.")}})}showSetupInstructions(){return`\n=== Pokemon TCG Pocket Collector Setup Instructions ===\n\n1. AUTOMATIC DOWNLOAD (Recommended):\n   - Click "Download cards.json" button\n   - Move the downloaded file to: src/assets/cards/cards.json\n   - Restart the development server\n\n2. MANUAL DOWNLOAD:\n   - Go to: ${this.CARDS_API_URL}\n   - Right-click and "Save As" to src/assets/cards/cards.json\n   - Restart the development server\n\n3. VERIFY SETUP:\n   - Click "Load Cards Data" to test the service\n   - Check browser console for detailed information\n   - Data will be cached in localStorage for offline use\n\n=== Service Features ===\n- \u2705 Fetch cards from Pokemon TCG Pocket database\n- \u2705 Store data locally for offline access\n- \u2705 Filter by set, type, rarity\n- \u2705 Search cards by name\n- \u2705 Get unique values for filters\n- \u2705 Automatic fallback to localStorage\n\nFor more information, check the browser console when using the services.\n    `}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(bo))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),tD=(()=>{const e=class{constructor(r){this.http=r,this.BASE_PATH="assets/cards/",this.API_BASE="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/"}loadSets(){return this.http.get(`${this.BASE_PATH}sets.json`)}loadRarities(){return this.http.get(`${this.BASE_PATH}rarity.json`)}loadCards(){return this.http.get(`${this.BASE_PATH}cards.json`)}loadAllData(){return wo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(ht(r=>{}))}getSetByCode(r){return this.loadSets().pipe(O(o=>o.find(i=>i.code===r)))}getRarityName(r){return this.loadRarities().pipe(O(o=>o[r]))}getCardsBySetWithInfo(r){return wo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(O(({cards:o,sets:i,rarities:s})=>{const a=i.find(l=>l.code===r);return o.filter(l=>l.set===r).map(l=>({...l,setInfo:a,fullRarityName:s[l.rarityCode]||l.rarity}))}))}getSetsWithCardCounts(){return wo({cards:this.loadCards(),sets:this.loadSets()}).pipe(O(({cards:r,sets:o})=>o.map(i=>{const s=r.filter(a=>a.set===i.code).length;return{...i,actualCardCount:s}})))}getRarityDistribution(){return wo({cards:this.loadCards(),rarities:this.loadRarities()}).pipe(O(({cards:r,rarities:o})=>{const i={};r.forEach(a=>{const l=a.rarityCode;i[l]=(i[l]||0)+1});const s=r.length;return Object.entries(i).map(([a,l])=>({code:a,name:o[a]||a,count:l,percentage:Math.round(l/s*100*100)/100})).sort((a,l)=>l.count-a.count)}))}getPackDistribution(){return this.loadCards().pipe(O(r=>{const o={};r.forEach(s=>{s.packs.forEach(a=>{a&&a.trim()&&(o[a]=(o[a]||0)+1)})});const i=Object.values(o).reduce((s,a)=>s+a,0);return Object.entries(o).map(([s,a])=>({pack:s,count:a,percentage:Math.round(a/i*100*100)/100})).sort((s,a)=>a.count-s.count)}))}searchCardsEnhanced(r){return wo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(O(({cards:o,sets:i,rarities:s})=>o.filter(l=>l.label.eng.toLowerCase().includes(r.toLowerCase())).map(l=>{const c=i.find(u=>u.code===l.set);return{...l,setInfo:c,fullRarityName:s[l.rarityCode]||l.rarity}})))}getComprehensiveStats(){return wo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(O(({cards:r,sets:o,rarities:i})=>({totalCards:r.length,totalSets:o.length,totalRarities:Object.keys(i).length,setBreakdown:o.map(a=>({...a,actualCardCount:r.filter(l=>l.set===a.code).length})),rarityBreakdown:Object.entries(i).map(([a,l])=>({code:a,name:l,count:r.filter(c=>c.rarityCode===a).length})),packBreakdown:this.calculatePackDistribution(r),dateRange:{earliest:o.reduce((a,l)=>new Date(l.releaseDate)<new Date(a)?l.releaseDate:a,o[0]?.releaseDate||""),latest:o.reduce((a,l)=>new Date(l.releaseDate)>new Date(a)?l.releaseDate:a,o[0]?.releaseDate||"")}})))}calculatePackDistribution(r){const o={};return r.forEach(i=>{i.packs.forEach(s=>{s&&s.trim()&&(o[s]=(o[s]||0)+1)})}),Object.entries(o).map(([i,s])=>({pack:i,count:s})).sort((i,s)=>s.count-i.count)}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(bo))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),nD=(()=>{const e=class{constructor(r,o,i,s){this.cardDataService=r,this.fileStorageService=o,this.assetsHelper=i,this.pokemonDataService=s}initializeCardData(){return this.cardDataService.downloadAndStoreCards().pipe(ht(r=>{this.logDataSummary(r)}),$n(r=>(console.error("Failed to initialize card data:",r),W(this.cardDataService.getStoredCards()||[]))))}downloadCardsFile(){this.assetsHelper.downloadCardsJson()}getStorageInstructions(){return this.assetsHelper.showSetupInstructions()}logDataSummary(r){new Set(r.map(a=>a.set)),new Set(r.map(a=>a.rarity)),new Set(r.flatMap(a=>a.packs))}getAllCards(){return this.cardDataService.loadCards()}getCardsBySet(r){return this.cardDataService.getCardsBySet(r)}getCardsByType(r){return this.cardDataService.getCardsByType(r)}getCardsByPack(r){return this.cardDataService.loadCards().pipe(O(o=>o.filter(i=>i.packs.includes(r))))}searchCards(r){return this.cardDataService.searchCardsByName(r)}getFilterOptions(){return new Ue(r=>{Promise.all([this.cardDataService.getUniqueSets().toPromise(),this.cardDataService.getUniqueTypes().toPromise(),this.cardDataService.getUniqueRarities().toPromise(),this.cardDataService.getUniquePacks().toPromise()]).then(([o,i,s,a])=>{r.next({sets:o||[],types:i||[],rarities:s||[],packs:a||[]}),r.complete()}).catch(o=>{r.error(o)})})}loadAllPokemonData(){return this.pokemonDataService.loadAllData().pipe(ht(r=>{this.logEnhancedDataSummary(r)}))}getAllSets(){return this.pokemonDataService.loadSets()}getSetsWithCounts(){return this.pokemonDataService.getSetsWithCardCounts()}getRarityMapping(){return this.pokemonDataService.loadRarities()}getSetInfo(r){return this.pokemonDataService.getSetByCode(r)}getCardsBySetEnhanced(r){return this.pokemonDataService.getCardsBySetWithInfo(r)}searchCardsEnhanced(r){return this.pokemonDataService.searchCardsEnhanced(r)}getRarityStats(){return this.pokemonDataService.getRarityDistribution()}getPackStats(){return this.pokemonDataService.getPackDistribution()}getComprehensiveStats(){return this.pokemonDataService.getComprehensiveStats()}logEnhancedDataSummary(r){}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(ej),B(tj),B(nj),B(tD))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class Xf extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class rD extends Xf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oD extends Xf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class iD extends Xf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var jc=(()=>{return(t=jc||(jc={})).Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2",jc;var t})();class oj{constructor(e,{headers:n={},customFetch:r,region:o=jc.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=(t=>{let e;return e=t||(typeof fetch>"u"?(...n)=>Promise.resolve().then(J.bind(J,397)).then(({default:r})=>r(...n)):fetch),(...n)=>e(...n)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,N.__awaiter)(this,arguments,void 0,function*(n,r={}){var o;try{const{headers:i,method:s,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${n}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):"string"==typeof a?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(v=>{throw"AbortError"===v.name?v:new rD(v)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new oD(f);if(!f.ok)throw new iD(f);let y,g=(null!==(o=f.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return y="application/json"===g?yield f.json():"application/octet-stream"===g||"application/pdf"===g?yield f.blob():"text/event-stream"===g?f:"multipart/form-data"===g?yield f.formData():yield f.text(),{data:y,error:null,response:f}}catch(i){return i instanceof Error&&"AbortError"===i.name?{data:null,error:new rD(i)}:{data:null,error:i,response:i instanceof iD||i instanceof oD?i.context:void 0}}})}}var ij=J(358);const{PostgrestClient:sD}=ij,hj=class dj{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(e=navigator.userAgent)&&void 0!==e&&e.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=parseInt(n.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`\n\nSuggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){return new(this.getWebSocketConstructor())(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch{return!1}}};var Vi=(()=>{return(t=Vi||(Vi={}))[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",Vi;var t})(),ft=(()=>{return(t=ft||(ft={})).closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving",ft;var t})(),Mn=(()=>{return(t=Mn||(Mn={})).close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token",Mn;var t})(),Vc=(()=>((Vc||(Vc={})).websocket="websocket",Vc))(),Xr=(()=>{return(t=Xr||(Xr={})).Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed",Xr;var t})();class yj{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),i=n.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(e.slice(s,s+o));s+=o;const l=r.decode(e.slice(s,s+i));return s+=i,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class aD{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Re=(()=>{return(t=Re||(Re={})).abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange",Re;var t})();const lD=(t,e,n={})=>{var r;const o=null!==(r=n.skipTypes)&&void 0!==r?r:[];return e?Object.keys(e).reduce((i,s)=>(i[s]=vj(s,t,e,o),i),{}):{}},vj=(t,e,n,r)=>{const i=e.find(a=>a.name===t)?.type,s=n[t];return i&&!r.includes(i)?cD(i,s):tp(s)},cD=(t,e)=>{if("_"===t.charAt(0)){const n=t.slice(1,t.length);return wj(e,n)}switch(t){case Re.bool:return _j(e);case Re.float4:case Re.float8:case Re.int2:case Re.int4:case Re.int8:case Re.numeric:case Re.oid:return Cj(e);case Re.json:case Re.jsonb:return bj(e);case Re.timestamp:return Dj(e);default:return tp(e)}},tp=t=>t,_j=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Cj=t=>{if("string"==typeof t){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},bj=t=>{if("string"==typeof t)try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},wj=(t,e)=>{if("string"!=typeof t)return t;const n=t.length-1;if("{"===t[0]&&"}"===t[n]){let i;const s=t.slice(1,n);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>cD(e,a))}return t},Dj=t=>"string"==typeof t?t.replace(" ","T"):t,uD=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname=""===e.pathname||"/"===e.pathname?"/api/broadcast":e.pathname+"/api/broadcast",e.href};class np{constructor(e,n,r={},o=1e4){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class ma{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ma.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=ma.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ma.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const i=this.cloneDeep(e),s=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[c]=p),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(e,n,r,o){const{joins:i,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=e[a])&&void 0!==c?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,o(a,c,l),0===c.length&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return n[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ui=(()=>{return(t=Ui||(Ui={})).BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",Ui;var t})(),dr=(()=>{return(t=dr||(dr={})).SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR",dr;var t})();class rp{constructor(e,n={config:{}},r){var o,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new np(this,Mn.join,this.params,this.timeout),this.rejoinTimer=new aD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mn.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new ma(this),this.broadcastEndpointURL=uD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(p=>p.filter))&&void 0!==i?i:[],d=!!this.bindings[Ui.PRESENCE]&&this.bindings[Ui.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(dr.CHANNEL_ERROR,p)),this._onClose(()=>e?.(dr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",function(){var p=m(function*({postgres_changes:g}){var y;if(r.socket.setAuth(),void 0!==g){const v=r.bindings.postgres_changes,T=null!==(y=v?.length)&&void 0!==y?y:0,C=[];for(let k=0;k<T;k++){const j=v[k],{filter:{event:ie,schema:zn,table:je,filter:Ct}}=j,oo=g&&g[k];if(!oo||oo.event!==ie||oo.schema!==zn||oo.table!==je||oo.filter!==Ct)return r.unsubscribe(),r.state=ft.errored,void e?.(dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));C.push(Object.assign(Object.assign({},j),{id:oo.id}))}return r.bindings.postgres_changes=C,void(e&&e(dr.SUBSCRIBED))}e?.(dr.SUBSCRIBED)});return function(g){return p.apply(this,arguments)}}()).receive("error",p=>{this.state=ft.errored,e?.(dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(e){var n=this;return m(function*(r,o={}){return yield n.send({type:"presence",event:"track",payload:r},o.timeout||n.timeout)}).apply(this,arguments)}untrack(){var e=this;return m(function*(n={}){return yield e.send({type:"presence",event:"untrack"},n)}).apply(this,arguments)}on(e,n,r){return this.state===ft.joined&&e===Ui.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}httpSend(e,n){var r=this;return m(function*(o,i,s={}){var a;const l=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,c,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const h=yield u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(e){var n=this;return m(function*(r,o={}){var i,s;if(n._canPush()||"broadcast"!==r.type)return new Promise(a=>{var l,c,u;const d=n._push(r.type,r,o.timeout||n.timeout);"broadcast"===r.type&&!(null!==(u=null===(c=null===(l=n.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=r,u={method:"POST",headers:{Authorization:n.socket.accessTokenValue?`Bearer ${n.socket.accessTokenValue}`:"",apikey:n.socket.apiKey?n.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:n.subTopic,event:a,payload:l,private:n.private}]})};try{const d=yield n._fetchWithTimeout(n.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:n.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ft.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new np(this,Mn.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}_fetchWithTimeout(e,n,r){var o=this;return m(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a})()}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new np(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,i;const s=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Mn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(f=>{var p,g,y;return"*"===(null===(p=f.filter)||void 0===p?void 0:p.event)||(null===(y=null===(g=f.filter)||void 0===g?void 0:g.event)||void 0===y?void 0:y.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):null===(i=this.bindings[s])||void 0===i||i.filter(f=>{var p,g,y,v,T,C;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in f){const k=f.id,j=null===(p=f.filter)||void 0===p?void 0:p.event;return k&&(null===(g=n.ids)||void 0===g?void 0:g.includes(k))&&("*"===j||j?.toLocaleLowerCase()===(null===(y=n.data)||void 0===y?void 0:y.type.toLocaleLowerCase()))}{const k=null===(T=null===(v=f?.filter)||void 0===v?void 0:v.event)||void 0===T?void 0:T.toLocaleLowerCase();return"*"===k||k===(null===(C=n?.event)||void 0===C?void 0:C.toLocaleLowerCase())}}return f.type.toLocaleLowerCase()===s}).map(f=>{if("object"==typeof h&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:v,type:T,errors:C}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:v,eventType:T,new:{},old:{},errors:C}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),i={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&rp.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Mn.close,{},e)}_onError(e){this._on(Mn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(n.new=lD(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(n.old=lD(e.columns,e.old_record)),n}}const op=()=>{},Ej=[1e3,2e3,5e3,1e4];class Ij{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=op,this.ref=0,this.reconnectTimer=null,this.logger=op,this.conn=null,this.sendBuffer=[],this.serializer=new yj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return i=o||(typeof fetch>"u"?(...s)=>Promise.resolve().then(J.bind(J,397)).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...s)=>i(...s)},null===(r=n?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Vc.websocket}`,this.httpEndpoint=uD(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hj.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){var n=this;return m(function*(){const r=yield e.unsubscribe();return 0===n.channels.length&&n.disconnect(),r})()}removeAllChannels(){var e=this;return m(function*(){const n=yield Promise.all(e.channels.map(r=>r.unsubscribe()));return e.channels=[],e.disconnect(),n})()}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vi.connecting:return Xr.Connecting;case Vi.open:return Xr.Open;case Vi.closing:return Xr.Closing;default:return Xr.Closed}}isConnected(){return this.connectionState()===Xr.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new rp(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:o,ref:i}=e,s=()=>{this.encode(e,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${n} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var e=this;return m(function*(n=null){e._authPromise=e._performAuth(n);try{yield e._authPromise}finally{e._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var e=this;return m(function*(){var n;if(e.isConnected()){if(e.pendingHeartbeatRef){e.pendingHeartbeatRef=null,e.log("transport","heartbeat timeout. Attempting to re-establish connection");try{e.heartbeatCallback("timeout")}catch(r){e.log("error","error in heartbeat callback",r)}return e._wasManualDisconnect=!1,null===(n=e.conn)||void 0===n||n.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;e.isConnected()||null===(r=e.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}e.pendingHeartbeatRef=e._makeRef(),e.push({topic:"phoenix",event:"heartbeat",payload:{},ref:e.pendingHeartbeatRef});try{e.heartbeatCallback("sent")}catch(r){e.log("error","error in heartbeat callback",r)}e._setAuthSafely("heartbeat")}else try{e.heartbeatCallback("disconnected")}catch(r){e.log("error","error in heartbeat callback",r)}})()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return this.ref=e===this.ref?0:e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if("phoenix"===n.topic&&"phx_reply"===n.event)try{this.heartbeatCallback("ok"===n.payload.status?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=n;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,i,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(n=this.reconnectTimer)||void 0===n||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{"keepAlive"===n.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(n=this.reconnectTimer)||void 0===n||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Mn.error))}_appendParams(e,n){if(0===Object.keys(n).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(n)}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=n)}_performAuth(){var e=this;return m(function*(n=null){let r;r=n||(e.accessToken?yield e.accessToken():e.accessTokenValue),e.accessTokenValue!=r&&(e.accessTokenValue=r,e.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.76.1"}),o.joinedOnce&&o._isJoined()&&o._push(Mn.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var e=this;return m(function*(){e._authPromise&&(yield e._authPromise)})()}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){var e=this;this.reconnectTimer=new aD(m(function*(){setTimeout(m(function*(){yield e._waitForAuthIfNeeded(),e.isConnected()||e.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,i,s,a,l,c,u;if(this.transport=null!==(n=e?.transport)&&void 0!==n?n:null,this.timeout=null!==(r=e?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=e?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=e?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=e?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=e?.heartbeatCallback)&&void 0!==a?a:op,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=e?.reconnectAfterMs)&&void 0!==l?l:d=>Ej[d-1]||1e4,this.encode=null!==(c=e?.encode)&&void 0!==c?c:(d,h)=>h(JSON.stringify(d)),this.decode=null!==(u=e?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class ip extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ke(t){return"object"==typeof t&&null!==t&&"__isStorageError"in t}class xj extends ip{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sp extends ip{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const ap=t=>{let e;return e=t||(typeof fetch>"u"?(...n)=>Promise.resolve().then(J.bind(J,397)).then(({default:r})=>r(...n)):fetch),(...n)=>e(...n)},lp=t=>{if(Array.isArray(t))return t.map(n=>lp(n));if("function"==typeof t||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[o]=lp(r)}),e},cp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Oj=(t,e,n)=>(0,N.__awaiter)(void 0,void 0,void 0,function*(){const r=yield(0,N.__awaiter)(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(J.bind(J,397))).Response:Response});t instanceof r&&!n?.noResolveJson?t.json().then(o=>{const i=t.status||500,s=o?.statusCode||i+"";e(new xj(cp(o),i,s))}).catch(o=>{e(new sp(cp(o),o))}):e(new sp(cp(t),t))}),Pj=(t,e,n,r)=>{const o={method:t,headers:e?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n)):o};function ya(t,e,n,r,o,i){return(0,N.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(n,Pj(e,r,o,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>Oj(l,a,r))})})}function va(t,e,n,r){return(0,N.__awaiter)(this,void 0,void 0,function*(){return ya(t,"GET",e,n,r)})}function Bn(t,e,n,r,o){return(0,N.__awaiter)(this,void 0,void 0,function*(){return ya(t,"POST",e,r,o,n)})}function up(t,e,n,r,o){return(0,N.__awaiter)(this,void 0,void 0,function*(){return ya(t,"PUT",e,r,o,n)})}function dp(t,e,n,r,o){return(0,N.__awaiter)(this,void 0,void 0,function*(){return ya(t,"DELETE",e,r,o,n)})}class kj{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}}var dD;dD=Symbol.toStringTag;const Lj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jj{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=ap(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},hD),o);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield("PUT"==e?up:Bn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}upload(e,n,r){return(0,N.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return(0,N.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:hD.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(yield up(this.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ke(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const i=yield Bn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new ip("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}update(e,n,r){return(0,N.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}copy(e,n,r){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Bn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),i=yield Bn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{const o=yield Bn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(n?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(e);return new class Nj{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[dD]="BlobDownloadBuilder",this.promise=null}asStream(){return new kj(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}}(()=>va(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield va(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:lp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}exists(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield function Rj(t,e,n,r){return(0,N.__awaiter)(this,void 0,void 0,function*(){return ya(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r)&&r instanceof sp&&[400,404].includes(r.originalError?.status))return{data:!1,error:r};throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],i=n?.download?`download=${!0===n.download?"":n.download}`:"";""!==i&&o.push(i);const a=typeof n?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(n?.transform||{});""!==l&&o.push(l);let c=o.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}list(e,n,r){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Lj),n),{prefix:e||""});return{data:yield Bn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}listV2(e,n){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Bn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const pD={"X-Client-Info":"storage-js/2.76.1"};class Vj{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const i=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pD),n),this.fetch=ap(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}createBucket(e){return(0,N.__awaiter)(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Bn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield up(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}emptyBucket(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}}class Uj{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pD),n),this.fetch=ap(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}listBuckets(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{const n=new URLSearchParams;void 0!==e?.limit&&n.set("limit",e.limit.toString()),void 0!==e?.offset&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const r=n.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield va(this.fetch,o,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}}const hp={"X-Client-Info":"storage-js/2.76.1","Content-Type":"application/json"};class gD extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function cn(t){return"object"==typeof t&&null!==t&&"__isStorageVectorsError"in t}class fp extends gD{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $j extends gD{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}const pp=t=>{let e;return e=t||(typeof fetch>"u"?(...n)=>Promise.resolve().then(J.bind(J,397)).then(({default:r})=>r(...n)):fetch),(...n)=>e(...n)},mD=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Hj=(t,e,n)=>(0,N.__awaiter)(void 0,void 0,void 0,function*(){if(t&&"object"==typeof t&&"status"in t&&"ok"in t&&"number"==typeof t.status&&!n?.noResolveJson){const o=t.status||500,i=t;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";e(new fp(mD(s),o,a))}).catch(()=>{e(new fp(i.statusText||`HTTP ${o} error`,o,o+""))}):e(new fp(i.statusText||`HTTP ${o} error`,o,o+""))}else e(new $j(mD(t),t))}),zj=(t,e,n,r)=>{const o={method:t,headers:e?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),n)):o};function un(t,e,n,r,o){return(0,N.__awaiter)(this,void 0,void 0,function*(){return function $c(t,e,n,r,o,i){return(0,N.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(n,zj(e,r,o,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return c&&c.includes("application/json")?l.json():{}}).then(l=>s(l)).catch(l=>Hj(l,a,r))})})}(t,"POST",e,r,o,n)})}class Gj{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hp),n),this.fetch=pp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield un(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}})}listIndexes(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield un(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}})}}class qj{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hp),n),this.fetch=pp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield un(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}getVectors(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}listVectors(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield un(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}queryVectors(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield un(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}}class Wj{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hp),n),this.fetch=pp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield un(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}getBucket(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}listBuckets(){return(0,N.__awaiter)(this,arguments,void 0,function*(e={}){try{return{data:yield un(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return(0,N.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield un(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}})}}class Jj extends Wj{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Kj(this.url,this.headers,e,this.fetch)}}class Kj extends Gj{constructor(e,n,r,o){super(e,n,o),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,N.__awaiter)(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,N.__awaiter)(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,N.__awaiter)(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,N.__awaiter)(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Yj(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Yj extends qj{constructor(e,n,r,o,i){super(e,n,i),this.vectorBucketName=r,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,N.__awaiter)(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,N.__awaiter)(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,N.__awaiter)(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,N.__awaiter)(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,N.__awaiter)(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Qj extends Vj{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new jj(this.url,this.headers,e,this.fetch)}get vectors(){return new Jj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Uj(this.url+"/iceberg",this.headers,this.fetch)}}let _a="";_a=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const Xj={headers:{"X-Client-Info":`supabase-js-${_a}/2.76.1`}},e2={schema:"public"},t2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n2={};var yD=J(397);const i2=(t,e,n)=>{const r=(t=>{let e;return e=t||(typeof fetch>"u"?yD.default:fetch),(...n)=>e(...n)})(n),o=typeof Headers>"u"?yD.Headers:Headers;return function(){var i=m(function*(s,a){var l;const c=null!==(l=yield e())&&void 0!==l?l:t;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},$i=3e4,yp="X-Supabase-Api-Version",_D={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},h2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ca extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Y(t){return"object"==typeof t&&null!==t&&"__isAuthError"in t}class p2 extends Ca{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}class Ao extends Ca{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class eo extends Ca{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class to extends eo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Bi extends eo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bc extends eo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hc extends eo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class CD extends eo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vp extends eo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function _p(t){return Y(t)&&"AuthRetryableFetchError"===t.name}class bD extends eo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Cp extends eo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wD=" \t\n\r=".split(""),v2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<wD.length;e+=1)t[wD[e].charCodeAt(0)]=-2;for(let e=0;e<zc.length;e+=1)t[zc[e].charCodeAt(0)]=e;return t})();function Gc(t,e,n){if(null!==t)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;)n(zc[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6;else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;)n(zc[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6}function DD(t,e,n){const r=v2[t];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8}function ED(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function C2(t,e,n){if(0===e.utf8seq){if(t<=127)return void n(t);for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(2===e.utf8seq)e.codepoint=31&t;else if(3===e.utf8seq)e.codepoint=15&t;else{if(4!==e.utf8seq)throw new Error("Invalid UTF-8 sequence");e.codepoint=7&t}e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|63&t,e.utf8seq-=1,0===e.utf8seq&&n(e.codepoint)}}(s,r,n)};for(let s=0;s<t.length;s+=1)DD(t.charCodeAt(s),o,i);return e.join("")}function _2(t,e){if(!(t<=127)){if(t<=2047)return e(192|t>>6),void e(128|63&t);if(t<=65535)return e(224|t>>12),e(128|t>>6&63),void e(128|63&t);if(t<=1114111)return e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),void e(128|63&t);throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}e(t)}function Hi(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)DD(t.charCodeAt(o),n,r);return new Uint8Array(e)}function To(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>Gc(o,n,r)),Gc(null,n,r),e.join("")}const dn=()=>typeof window<"u"&&typeof document<"u",Oo={tested:!1,writable:!1},MD=()=>{if(!dn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Oo.tested)return Oo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Oo.tested=!0,Oo.writable=!0}catch{Oo.tested=!0,Oo.writable=!1}return Oo.writable},ID=t=>{let e;return e=t||(typeof fetch>"u"?(...n)=>Promise.resolve().then(J.bind(J,397)).then(({default:r})=>r(...n)):fetch),(...n)=>e(...n)},S2=t=>"object"==typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json,zi=function(){var t=m(function*(e,n,r){yield e.setItem(n,JSON.stringify(r))});return function(n,r,o){return t.apply(this,arguments)}}(),Po=function(){var t=m(function*(e,n){const r=yield e.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(n,r){return t.apply(this,arguments)}}(),no=function(){var t=m(function*(e,n){yield e.removeItem(n)});return function(n,r){return t.apply(this,arguments)}}();class qc{constructor(){this.promise=new qc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}function bp(t){const e=t.split(".");if(3!==e.length)throw new Cp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!h2.test(e[r]))throw new Cp("JWT not in base64url format");return{header:JSON.parse(ED(e[0])),payload:JSON.parse(ED(e[1])),signature:Hi(e[2]),raw:{header:e[0],payload:e[1]}}}function wp(){return(wp=m(function*(t){return yield new Promise(e=>{setTimeout(()=>e(null),t)})})).apply(this,arguments)}function x2(t){return("0"+t.toString(16)).substr(-2)}function Dp(){return(Dp=m(function*(t){const n=(new TextEncoder).encode(t),r=yield crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function Ep(){return Ep=m(function*(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=yield function T2(t){return Dp.apply(this,arguments)}(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Ep.apply(this,arguments)}function Gi(t,e){return Sp.apply(this,arguments)}function Sp(){return Sp=m(function*(t,e,n=!1){const r=function A2(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let i=0;i<56;i++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,x2).join("")}();let o=r;n&&(o+="/PASSWORD_RECOVERY"),yield zi(t,`${e}-code-verifier`,o);const i=yield function O2(t){return Ep.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),Sp.apply(this,arguments)}qc.promiseConstructor=Promise;const P2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,F2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qi(t){if(!F2.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Mp(){return new Proxy({},{get:(e,n)=>{if("__isUserNotAvailableProxy"===n)return!0;if("symbol"==typeof n){const r=n.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xD(t){return JSON.parse(JSON.stringify(t))}const Ro=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),L2=[502,503,504];function AD(t){return Ip.apply(this,arguments)}function Ip(){return(Ip=m(function*(t){var e;if(!S2(t))throw new vp(Ro(t),0);if(L2.includes(t.status))throw new vp(Ro(t),t.status);let n,r;try{n=yield t.json()}catch(i){throw new Ao(Ro(i),i)}const o=function R2(t){const e=t.headers.get(yp);if(!e||!e.match(P2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}(t);if(o&&o.getTime()>=_D["2024-01-01"].timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?r=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(r=n.error_code),r){if("weak_password"===r)throw new bD(Ro(n),t.status,(null===(e=n.weak_password)||void 0===e?void 0:e.reasons)||[]);if("session_not_found"===r)throw new to}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new bD(Ro(n),t.status,n.weak_password.reasons);throw new p2(Ro(n),t.status||500,r)})).apply(this,arguments)}const j2=(t,e,n,r)=>{const o={method:t,headers:e?.headers||{}};return"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};function ue(t,e,n,r){return xp.apply(this,arguments)}function xp(){return xp=m(function*(t,e,n,r){var o;const i=Object.assign({},r?.headers);i[yp]||(i[yp]=_D["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield function V2(t,e,n,r,o,i){return Ap.apply(this,arguments)}(t,e,n+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),xp.apply(this,arguments)}function Ap(){return(Ap=m(function*(t,e,n,r,o,i){const s=j2(e,r,o,i);let a;try{a=yield t(n,Object.assign({},s))}catch(l){throw console.error(l),new vp(Ro(l),0)}if(a.ok||(yield AD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield AD(l)}})).apply(this,arguments)}function Hn(t){var e;let n=null;return function B2(t){return t.access_token&&t.refresh_token&&t.expires_in}(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=function w2(t){return Math.round(Date.now()/1e3)+t}(t.expires_in))),{data:{session:n,user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function TD(t){const e=Hn(t);return!e.error&&t.weak_password&&"object"==typeof t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&"string"==typeof t.weak_password.message&&t.weak_password.reasons.reduce((n,r)=>n&&"string"==typeof r,!0)&&(e.data.weak_password=t.weak_password),e}function ro(t){var e;return{data:{user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function U2(t){return{data:t,error:null}}function $2(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i}=t,s=(0,N.__rest)(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function OD(t){return t}const Tp=["global","local","others"];class H2{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=ID(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(e){var n=this;return m(function*(r,o=Tp[0]){if(Tp.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tp.join(", ")}`);try{return yield ue(n.fetch,"POST",`${n.url}/logout?scope=${o}`,{headers:n.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(e){var n=this;return m(function*(r,o={}){try{return yield ue(n.fetch,"POST",`${n.url}/invite`,{body:{email:r,data:o.data},headers:n.headers,redirectTo:o.redirectTo,xform:ro})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(e){var n=this;return m(function*(){try{const{options:r}=e,o=(0,N.__rest)(e,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield ue(n.fetch,"POST",`${n.url}/admin/generate_link`,{body:i,headers:n.headers,xform:$2,redirectTo:r?.redirectTo})}catch(r){if(Y(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(e){var n=this;return m(function*(){try{return yield ue(n.fetch,"POST",`${n.url}/admin/users`,{body:e,headers:n.headers,xform:ro})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}})()}listUsers(e){var n=this;return m(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield ue(n.fetch,"GET",`${n.url}/admin/users`,{headers:n.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=e?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:OD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Y(u))return{data:{users:[]},error:u};throw u}})()}getUserById(e){var n=this;return m(function*(){qi(e);try{return yield ue(n.fetch,"GET",`${n.url}/admin/users/${e}`,{headers:n.headers,xform:ro})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}})()}updateUserById(e,n){var r=this;return m(function*(){qi(e);try{return yield ue(r.fetch,"PUT",`${r.url}/admin/users/${e}`,{body:n,headers:r.headers,xform:ro})}catch(o){if(Y(o))return{data:{user:null},error:o};throw o}})()}deleteUser(e){var n=this;return m(function*(r,o=!1){qi(r);try{return yield ue(n.fetch,"DELETE",`${n.url}/admin/users/${r}`,{headers:n.headers,body:{should_soft_delete:o},xform:ro})}catch(i){if(Y(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(e){var n=this;return m(function*(){qi(e.userId);try{const{data:r,error:o}=yield ue(n.fetch,"GET",`${n.url}/admin/users/${e.userId}/factors`,{headers:n.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(Y(r))return{data:null,error:r};throw r}})()}_deleteFactor(e){var n=this;return m(function*(){qi(e.userId),qi(e.id);try{return{data:yield ue(n.fetch,"DELETE",`${n.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:n.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})()}_listOAuthClients(e){var n=this;return m(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield ue(n.fetch,"GET",`${n.url}/admin/oauth/clients`,{headers:n.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=e?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:OD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Y(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(e){var n=this;return m(function*(){try{return yield ue(n.fetch,"POST",`${n.url}/admin/oauth/clients`,{body:e,headers:n.headers,xform:r=>({data:r,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}})()}_getOAuthClient(e){var n=this;return m(function*(){try{return yield ue(n.fetch,"GET",`${n.url}/admin/oauth/clients/${e}`,{headers:n.headers,xform:r=>({data:r,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}})()}_deleteOAuthClient(e){var n=this;return m(function*(){try{return yield ue(n.fetch,"DELETE",`${n.url}/admin/oauth/clients/${e}`,{headers:n.headers,xform:r=>({data:r,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(e){var n=this;return m(function*(){try{return yield ue(n.fetch,"POST",`${n.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:n.headers,xform:r=>({data:r,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}})()}}function PD(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Wi={debug:!!(globalThis&&MD()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class RD extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class z2 extends RD{}function q2(t,e,n){return Op.apply(this,arguments)}function Op(){return Op=m(function*(t,e,n){Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(t,0===e?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=m(function*(i){if(!i){if(0===e)throw Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new z2(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Wi.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield n()}Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return yield n()}finally{Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),Op.apply(this,arguments)}function ND(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function K2(t){const e=(new TextEncoder).encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}class pt extends Error{constructor({message:e,code:n,cause:r,name:o}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=n}}class Wc extends pt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Q2({error:t,options:e}){var n,r,o;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal instanceof AbortSignal)return new pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(n=i.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===e.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if("SecurityError"===t.name){const s=window.location.hostname;if(!FD(s))return new pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rp.id!==s)return new pt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Z2({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal instanceof AbortSignal)return new pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const r=window.location.hostname;if(!FD(r))return new pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(n.rpId!==r)return new pt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const eV=new class X2{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function tV(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,o=(0,N.__rest)(t,["challenge","user","excludeCredentials"]),i=Hi(e).buffer,s=Object.assign(Object.assign({},n),{id:Hi(n.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Hi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function nV(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=(0,N.__rest)(t,["challenge","allowCredentials"]),o=Hi(e).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const a=n[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Hi(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function rV(t){var e;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:To(new Uint8Array(t.response.attestationObject)),clientDataJSON:To(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:null!==(e=n.authenticatorAttachment)&&void 0!==e?e:void 0}}function oV(t){var e;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const n=t,r=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:To(new Uint8Array(o.authenticatorData)),clientDataJSON:To(new Uint8Array(o.clientDataJSON)),signature:To(new Uint8Array(o.signature)),userHandle:o.userHandle?To(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(e=n.authenticatorAttachment)&&void 0!==e?e:void 0}}function FD(t){return"localhost"===t||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function LD(){var t,e;return!!(dn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(t=navigator?.credentials)||void 0===t?void 0:t.create)&&"function"==typeof(null===(e=navigator?.credentials)||void 0===e?void 0:e.get))}function Rp(){return(Rp=m(function*(t){try{const e=yield navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wc("Browser returned unexpected credential type",e)}:{data:null,error:new Wc("Empty credential response",e)}}catch(e){return{data:null,error:Q2({error:e,options:t})}}})).apply(this,arguments)}function kp(){return(kp=m(function*(t){try{const e=yield navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wc("Browser returned unexpected credential type",e)}:{data:null,error:new Wc("Empty credential response",e)}}catch(e){return{data:null,error:Z2({error:e,options:t})}}})).apply(this,arguments)}const aV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},lV={userVerification:"preferred",hints:["security-key"]};function Jc(...t){const e=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of t)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(n(s))r[i]=s;else if(e(s)){const a=r[i];r[i]=e(a)?Jc(a,s):Jc(s)}else r[i]=s}return r}class dV{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(e){var n=this;return m(function*(){return n.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))})()}_challenge(e,n){var r=this;return m(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!c)return{data:null,error:u};const d=a??eV.createNewAbortSignal();if("create"===c.webauthn.type){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=function cV(t,e){return Jc(aV,t,e||{})}(c.webauthn.credential_options.publicKey,l?.create),{data:f,error:p}=yield function iV(t){return Rp.apply(this,arguments)}({publicKey:h,signal:d});return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=function uV(t,e){return Jc(lV,t,e||{})}(c.webauthn.credential_options.publicKey,l?.request),{data:f,error:p}=yield function sV(t){return kp.apply(this,arguments)}(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(c){return Y(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in challenge",c)}}}).apply(this,arguments)}_verify(e){var n=this;return m(function*({challengeId:r,factorId:o,webauthn:i}){return n.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(e,n){var r=this;return m(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}},l){if(!i)return{data:null,error:new Ca("rpId is required for WebAuthn authentication")};try{if(!LD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:u};const{webauthn:d}=c;return r._verify({factorId:o,challengeId:c.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return Y(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in authenticate",c)}}}).apply(this,arguments)}_register(e,n){var r=this;return m(function*({friendlyName:o,rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a},l){if(!i)return{data:null,error:new Ca("rpId is required for WebAuthn registration")};try{if(!LD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r._enroll({friendlyName:o});if(!c)return yield r.client.mfa.listFactors().then(f=>{var p;return null===(p=f.data)||void 0===p?void 0:p.all.find(g=>"webauthn"===g.factor_type&&g.friendly_name===o&&"unverified"!==g.status)}).then(f=>f?r.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:d,error:h}=yield r._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return d?r._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(c){return Y(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in register",c)}}}).apply(this,arguments)}}!function W2(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const hV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.76.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function jD(t,e,n){return Np.apply(this,arguments)}function Np(){return(Np=m(function*(t,e,n){return yield n()})).apply(this,arguments)}const Ji={},pV=(()=>{class t{get jwks(){var n,r;return null!==(r=null===(n=Ji[this.storageKey])||void 0===n?void 0:n.jwks)&&void 0!==r?r:{keys:[]}}set jwks(n){Ji[this.storageKey]=Object.assign(Object.assign({},Ji[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return null!==(r=null===(n=Ji[this.storageKey])||void 0===n?void 0:n.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ji[this.storageKey]=Object.assign(Object.assign({},Ji[this.storageKey]),{cachedAt:n})}constructor(n){var o,i,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=t.nextInstanceID,t.nextInstanceID+=1,this.instanceID>0&&dn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},hV),n);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new H2({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ID(s.fetch),this.lock=s.lock||jD,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.lock=s.lock?s.lock:dn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?q2:jD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dV(this)},this.persistSession?(s.storage?this.storage=s.storage:MD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=PD(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=PD(this.memoryStorage)),dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=m(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.76.1) ${(new Date).toISOString()}`,...n),this}initialize(){var n=this;return m(function*(){return n.initializePromise||(n.initializePromise=m(function*(){return yield n._acquireLock(-1,m(function*(){return yield n._initialize()}))})()),yield n.initializePromise})()}_initialize(){var n=this;return m(function*(){var r;try{const o=function E2(t){const e={},n=new URL(t);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((o,i)=>{e[i]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}(window.location.href);let i="none";if(n._isImplicitGrantCallback(o)?i="implicit":(yield n._isPKCECallback(o))&&(i="pkce"),dn()&&n.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield n._getSessionFromURL(o,i);if(a){if(n._debug("#_initialize()","error detecting session from URL",a),function y2(t){return Y(t)&&"AuthImplicitGrantRedirectError"===t.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield n._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return n._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield n._saveSession(l),setTimeout(m(function*(){"recovery"===c?yield n._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield n._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield n._recoverAndRefresh(),{error:null}}catch(o){return Y(o)?{error:o}:{error:new Ao("Unexpected error during initialization",o)}}finally{yield n._handleVisibilityChange(),n._debug("#_initialize()","end")}})()}signInAnonymously(n){var r=this;return m(function*(){var o,i,s;try{const a=yield ue(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=n?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=n?.options)||void 0===s?void 0:s.captchaToken}},xform:Hn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(n){var r=this;return m(function*(){var o,i,s;try{let a;if("email"in n){const{email:h,password:f,options:p}=n;let g=null,y=null;"pkce"===r.flowType&&([g,y]=yield Gi(r.storage,r.storageKey)),a=yield ue(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:null!==(o=p?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:y},xform:Hn})}else{if(!("phone"in n))throw new Bc("You must provide either an email or phone number and a password");{const{phone:h,password:f,options:p}=n;a=yield ue(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:h,password:f,data:null!==(i=p?.data)&&void 0!==i?i:{},channel:null!==(s=p?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Hn})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(n){var r=this;return m(function*(){try{let o;if("email"in n){const{email:a,password:l,options:c}=n;o=yield ue(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:TD})}else{if(!("phone"in n))throw new Bc("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=n;o=yield ue(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:TD})}}const{data:i,error:s}=o;return s?{data:{user:null,session:null},error:s}:i&&i.session&&i.user?(i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Bi}}catch(o){if(Y(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(n){var r=this;return m(function*(){var o,i,s,a;return yield r._handleProviderSignIn(n.provider,{redirectTo:null===(o=n.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=n.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=n.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=n.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(n){var r=this;return m(function*(){return yield r.initializePromise,r._acquireLock(-1,m(function*(){return r._exchangeCodeForSession(n)}))})()}signInWithWeb3(n){var r=this;return m(function*(){const{chain:o}=n;switch(o){case"ethereum":return yield r.signInWithEthereum(n);case"solana":return yield r.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(n){var r=this;return m(function*(){var o,i,s,a,l,c,u,d,h,f,p;let g,y;if("message"in n)g=n.message,y=n.signature;else{const{wallet:T,statement:C,options:k}=n;let j;if(dn())if("object"==typeof T)j=T;else{const kr=window;if(!("ethereum"in kr)||"object"!=typeof kr.ethereum||!("request"in kr.ethereum)||"function"!=typeof kr.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");j=kr.ethereum}else{if("object"!=typeof T||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=T}const ie=new URL(null!==(o=k?.url)&&void 0!==o?o:window.location.href),zn=yield j.request({method:"eth_requestAccounts"}).then(kr=>kr).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!zn||0===zn.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const je=ND(zn[0]);let Ct=null===(i=k?.signInWithEthereum)||void 0===i?void 0:i.chainId;Ct||(Ct=function J2(t){return parseInt(t,16)}(yield j.request({method:"eth_chainId"}))),g=function Y2(t){var e;const{chainId:n,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=t;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null!==(e=t.statement)&&void 0!==e&&e.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`);const y=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${ND(t.address)}\n\n${t.statement?`${t.statement}\n`:""}`;let v=`URI: ${d}\nVersion: ${h}\nChain ID: ${n}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(v+=`\nExpiration Time: ${o.toISOString()}`),a&&(v+=`\nNot Before: ${a.toISOString()}`),l&&(v+=`\nRequest ID: ${l}`),c){let T="\nResources:";for(const C of c){if(!C||"string"!=typeof C)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);T+=`\n- ${C}`}v+=T}return`${y}\n${v}`}({domain:ie.host,address:je,statement:C,uri:ie.href,version:"1",chainId:Ct,nonce:null===(s=k?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(l=null===(a=k?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==l?l:new Date,expirationTime:null===(c=k?.signInWithEthereum)||void 0===c?void 0:c.expirationTime,notBefore:null===(u=k?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=k?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(h=k?.signInWithEthereum)||void 0===h?void 0:h.resources}),y=yield j.request({method:"personal_sign",params:[K2(g),je]})}try{const{data:v,error:T}=yield ue(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},null!==(f=n.options)&&void 0!==f&&f.captchaToken?{gotrue_meta_security:{captcha_token:null===(p=n.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Hn});if(T)throw T;return v&&v.session&&v.user?(v.session&&(yield r._saveSession(v.session),yield r._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:T}):{data:{user:null,session:null},error:new Bi}}catch(v){if(Y(v))return{data:{user:null,session:null},error:v};throw v}})()}signInWithSolana(n){var r=this;return m(function*(){var o,i,s,a,l,c,u,d,h,f,p,g;let y,v;if("message"in n)y=n.message,v=n.signature;else{const{wallet:C,statement:k,options:j}=n;let ie;if(dn())if("object"==typeof C)ie=C;else{const je=window;if(!("solana"in je)||"object"!=typeof je.solana||!("signIn"in je.solana&&"function"==typeof je.solana.signIn||"signMessage"in je.solana&&"function"==typeof je.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");ie=je.solana}else{if("object"!=typeof C||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ie=C}const zn=new URL(null!==(o=j?.url)&&void 0!==o?o:window.location.href);if("signIn"in ie&&ie.signIn){const je=yield ie.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},j?.signInWithSolana),{version:"1",domain:zn.host,uri:zn.href}),k?{statement:k}:null));let Ct;if(Array.isArray(je)&&je[0]&&"object"==typeof je[0])Ct=je[0];else{if(!(je&&"object"==typeof je&&"signedMessage"in je&&"signature"in je))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");Ct=je}if(!("signedMessage"in Ct&&"signature"in Ct&&("string"==typeof Ct.signedMessage||Ct.signedMessage instanceof Uint8Array)&&Ct.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");y="string"==typeof Ct.signedMessage?Ct.signedMessage:(new TextDecoder).decode(Ct.signedMessage),v=Ct.signature}else{if(!("signMessage"in ie&&"function"==typeof ie.signMessage&&"publicKey"in ie&&"object"==typeof ie&&ie.publicKey&&"toBase58"in ie.publicKey&&"function"==typeof ie.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${zn.host} wants you to sign in with your Solana account:`,ie.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${zn.href}`,`Issued At: ${null!==(s=null===(i=j?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=j?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...null!==(l=j?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...null!==(c=j?.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...null!==(u=j?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...null!==(d=j?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...null!==(f=null===(h=j?.signInWithSolana)||void 0===h?void 0:h.resources)&&void 0!==f&&f.length?["Resources",...j.signInWithSolana.resources.map(Ct=>`- ${Ct}`)]:[]].join("\n");const je=yield ie.signMessage((new TextEncoder).encode(y),"utf8");if(!(je&&je instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=je}}try{const{data:T,error:C}=yield ue(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:y,signature:To(v)},null!==(p=n.options)&&void 0!==p&&p.captchaToken?{gotrue_meta_security:{captcha_token:null===(g=n.options)||void 0===g?void 0:g.captchaToken}}:null),xform:Hn});if(C)throw C;return T&&T.session&&T.user?(T.session&&(yield r._saveSession(T.session),yield r._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:C}):{data:{user:null,session:null},error:new Bi}}catch(T){if(Y(T))return{data:{user:null,session:null},error:T};throw T}})()}_exchangeCodeForSession(n){var r=this;return m(function*(){const o=yield Po(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:l}=yield ue(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:n,code_verifier:i},xform:Hn});if(yield no(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Bi}}catch(a){if(Y(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(n){var r=this;return m(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:l}=n,c=yield ue(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Hn}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new Bi}}catch(o){if(Y(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(n){var r=this;return m(function*(){var o,i,s,a,l;try{if("email"in n){const{email:c,options:u}=n;let d=null,h=null;"pkce"===r.flowType&&([d,h]=yield Gi(r.storage,r.storageKey));const{error:f}=yield ue(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:c,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in n){const{phone:c,options:u}=n,{data:d,error:h}=yield ue(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:c,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(l=u?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new Bc("You must provide either an email or phone number.")}catch(c){if(Y(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(n){var r=this;return m(function*(){var o,i;try{let s,a;"options"in n&&(s=null===(o=n.options)||void 0===o?void 0:o.redirectTo,a=null===(i=n.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield ue(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Hn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,d=l.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==n.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithSSO(n){var r=this;return m(function*(){var o,i,s;try{let a=null,l=null;return"pkce"===r.flowType&&([a,l]=yield Gi(r.storage,r.storageKey)),yield ue(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:null!==(i=null===(o=n.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=n?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:U2})}catch(a){if(Y(a))return{data:null,error:a};throw a}})()}reauthenticate(){var n=this;return m(function*(){return yield n.initializePromise,yield n._acquireLock(-1,m(function*(){return yield n._reauthenticate()}))})()}_reauthenticate(){var n=this;return m(function*(){try{return yield n._useSession(function(){var r=m(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new to;const{error:a}=yield ue(n.fetch,"GET",`${n.url}/reauthenticate`,{headers:n.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(n){var r=this;return m(function*(){try{const o=`${r.url}/resend`;if("email"in n){const{email:i,type:s,options:a}=n,{error:l}=yield ue(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in n){const{phone:i,type:s,options:a}=n,{data:l,error:c}=yield ue(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new Bc("You must provide either an email or phone number and a type")}catch(o){if(Y(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var n=this;return m(function*(){return yield n.initializePromise,yield n._acquireLock(-1,m(function*(){return n._useSession(function(){var o=m(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(n,r){var o=this;return m(function*(){o._debug("#_acquireLock","begin",n);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=m(function*(){return yield i,yield r()})();return o.pendingInLock.push(m(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,n,m(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(m(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(n){var r=this;return m(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield n(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var n=this;return m(function*(){n._debug("#__loadSession()","begin"),n.lockAcquired||n._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield Po(n.storage,n.storageKey);if(n._debug("#getSession()","session from storage",o),null!==o&&(n._isValidSession(o)?r=o:(n._debug("#getSession()","session from storage is not valid"),yield n._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(n._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(n.userStorage){const l=yield Po(n.userStorage,n.storageKey+"-user");r.user=l?.user?l.user:Mp()}if(n.storage.isServer&&r.user){let l=n.suppressGetSessionWarning;r=new Proxy(r,{get:(u,d,h)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,n.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:r},error:null}}const{data:s,error:a}=yield n._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{n._debug("#__loadSession()","end")}})()}getUser(n){var r=this;return m(function*(){return n?yield r._getUser(n):(yield r.initializePromise,yield r._acquireLock(-1,m(function*(){return yield r._getUser()})))})()}_getUser(n){var r=this;return m(function*(){try{return n?yield ue(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:n,xform:ro}):yield r._useSession(function(){var o=m(function*(i){var s,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(s=c.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield ue(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:ro}):{data:{user:null},error:new to}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Y(o))return function m2(t){return Y(t)&&"AuthSessionMissingError"===t.name}(o)&&(yield r._removeSession(),yield no(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(n){var r=this;return m(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,m(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(n){var r=this;return m(function*(o,i={}){try{return yield r._useSession(function(){var s=m(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new to;const u=l.session;let d=null,h=null;"pkce"===r.flowType&&null!=o.email&&([d,h]=yield Gi(r.storage,r.storageKey));const{data:f,error:p}=yield ue(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:ro});if(p)throw p;return u.user=f.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return s.apply(this,arguments)}}())}catch(s){if(Y(s))return{data:{user:null},error:s};throw s}}).apply(this,arguments)}setSession(n){var r=this;return m(function*(){return yield r.initializePromise,yield r._acquireLock(-1,m(function*(){return yield r._setSession(n)}))})()}_setSession(n){var r=this;return m(function*(){try{if(!n.access_token||!n.refresh_token)throw new to;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:l}=bp(n.access_token);if(l.exp&&(i=l.exp,s=i<=o),s){const{data:c,error:u}=yield r._callRefreshToken(n.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield r._getUser(n.access_token);if(u)throw u;a={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(o){if(Y(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(n){var r=this;return m(function*(){return yield r.initializePromise,yield r._acquireLock(-1,m(function*(){return yield r._refreshSession(n)}))})()}_refreshSession(n){var r=this;return m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s;if(!n){const{data:c,error:u}=i;if(u)throw u;n=null!==(s=c.session)&&void 0!==s?s:void 0}if(!n?.refresh_token)throw new to;const{data:a,error:l}=yield r._callRefreshToken(n.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Y(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(n,r){var o=this;return m(function*(){try{if(!dn())throw new Hc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Hc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new CD("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new Hc("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new CD("No code detected.");const{data:k,error:j}=yield o._exchangeCodeForSession(n.code);if(j)throw j;const ie=new URL(window.location.href);return ie.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ie.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:d}=n;if(!(a&&c&&l&&d))throw new Hc("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let p=h+f;u&&(p=parseInt(u));const g=p-h;1e3*g<=$i&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const y=p-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,h);const{data:v,error:T}=yield o._getUser(a);if(T)throw T;const C={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:d,user:v.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:n.type},error:null}}catch(i){if(Y(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(n){return Boolean(n.access_token||n.error_description)}_isPKCECallback(n){var r=this;return m(function*(){const o=yield Po(r.storage,`${r.storageKey}-code-verifier`);return!(!n.code||!o)})()}signOut(){var n=this;return m(function*(r={scope:"global"}){return yield n.initializePromise,yield n._acquireLock(-1,m(function*(){return yield n._signOut(r)}))}).apply(this,arguments)}_signOut(){var n=this;return m(function*({scope:r}={scope:"global"}){return yield n._useSession(function(){var o=m(function*(i){var s;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(s=a.session)||void 0===s?void 0:s.access_token;if(c){const{error:u}=yield n.admin.signOut(c,r);if(u&&(!function g2(t){return Y(t)&&"AuthApiError"===t.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==r&&(yield n._removeSession(),yield no(n.storage,`${n.storageKey}-code-verifier`)),{error:null}});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(n){var r=this;const o=function D2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}(),i={id:o,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),m(function*(){yield r.initializePromise,yield r._acquireLock(-1,m(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(n){var r=this;return m(function*(){return yield r._useSession(function(){var o=m(function*(i){var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(s=r.stateChangeEmitters.get(n))||void 0===s?void 0:s.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",n,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(n))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",n,"error",l),console.error(l)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(n){var r=this;return m(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield Gi(r.storage,r.storageKey,!0));try{return yield ue(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(l){if(Y(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var n=this;return m(function*(){var r;try{const{data:o,error:i}=yield n.getUser();if(i)throw i;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(Y(o))return{data:null,error:o};throw o}})()}linkIdentity(n){var r=this;return m(function*(){return"token"in n?r.linkIdentityIdToken(n):r.linkIdentityOAuth(n)})()}linkIdentityOAuth(n){var r=this;return m(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=m(function*(l){var c,u,d,h,f;const{data:p,error:g}=l;if(g)throw g;const y=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,n.provider,{redirectTo:null===(c=n.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=n.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=n.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield ue(r.fetch,"GET",y,{headers:r.headers,jwt:null!==(f=null===(h=p.session)||void 0===h?void 0:h.access_token)&&void 0!==f?f:void 0})});return function(l){return a.apply(this,arguments)}}());if(s)throw s;return dn()&&!(null!==(o=n.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(Y(i))return{data:{provider:n.provider,url:null},error:i};throw i}})()}linkIdentityIdToken(n){var r=this;return m(function*(){return yield r._useSession(function(){var o=m(function*(i){var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:u,token:d,access_token:h,nonce:f}=n,p=yield ue(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=l?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Hn}),{data:g,error:y}=p;return y?{data:{user:null,session:null},error:y}:g&&g.session&&g.user?(g.session&&(yield r._saveSession(g.session),yield r._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:y}):{data:{user:null,session:null},error:new Bi}}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(n){var r=this;return m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s,a;const{data:l,error:c}=i;if(c)throw c;return yield ue(r.fetch,"DELETE",`${r.url}/user/identities/${n.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=l.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Y(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(n){var r=this;return m(function*(){const o=`#_refreshAccessToken(${n.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function I2(t,e){return new Promise((r,o)=>{m(function*(){for(let i=0;i<1/0;i++)try{const s=yield t(i);if(!e(i,null,s))return void r(s)}catch(s){if(!e(i,s))return void o(s)}})()})}(function(){var s=m(function*(a){return a>0&&(yield function M2(t){return wp.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield ue(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:r.headers,xform:Hn})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const l=200*Math.pow(2,s);return a&&_p(a)&&Date.now()+l-i<$i})}catch(i){if(r._debug(o,"error",i),Y(i))return{data:{session:null,user:null},error:i};throw i}finally{r._debug(o,"end")}})()}_isValidSession(n){return"object"==typeof n&&null!==n&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}_handleProviderSignIn(n,r){var o=this;return m(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),dn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}})()}_recoverAndRefresh(){var n=this;return m(function*(){var r,o;const i="#_recoverAndRefresh()";n._debug(i,"begin");try{const s=yield Po(n.storage,n.storageKey);if(s&&n.userStorage){let l=yield Po(n.userStorage,n.storageKey+"-user");!n.storage.isServer&&Object.is(n.storage,n.userStorage)&&!l&&(l={user:s.user},yield zi(n.userStorage,n.storageKey+"-user",l)),s.user=null!==(r=l?.user)&&void 0!==r?r:Mp()}else if(s&&!s.user&&!s.user){const l=yield Po(n.storage,n.storageKey+"-user");l&&l?.user?(s.user=l.user,yield no(n.storage,n.storageKey+"-user"),yield zi(n.storage,n.storageKey,s)):s.user=Mp()}if(n._debug(i,"session from storage",s),!n._isValidSession(s))return n._debug(i,"session is not valid"),void(null!==s&&(yield n._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(n._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(n.autoRefreshToken&&s.refresh_token){const{error:l}=yield n._callRefreshToken(s.refresh_token);l&&(console.error(l),_p(l)||(n._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield n._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield n._getUser(s.access_token);!c&&l?.user?(s.user=l.user,yield n._saveSession(s),yield n._notifyAllSubscribers("SIGNED_IN",s)):n._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),n._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield n._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return n._debug(i,"error",s),void console.error(s)}finally{n._debug(i,"end")}})()}_callRefreshToken(n){var r=this;return m(function*(){var o,i;if(!n)throw new to;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${n.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new qc;const{data:a,error:l}=yield r._refreshAccessToken(n);if(l)throw l;if(!a.session)throw new to;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return r.refreshingDeferred.resolve(c),c}catch(a){if(r._debug(s,"error",a),Y(a)){const l={data:null,error:a};return _p(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(n,r){var o=this;return m(function*(i,s,a=!0){const l=`#_notifyAllSubscribers(${i})`;o._debug(l,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const c=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=m(function*(h){try{yield h.callback(i,s)}catch(f){c.push(f)}});return function(h){return d.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(n){var r=this;return m(function*(){r._debug("#_saveSession()",n),r.suppressGetSessionWarning=!0;const o=Object.assign({},n);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield zi(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=xD(s);yield zi(r.storage,r.storageKey,a)}else{const s=xD(o);yield zi(r.storage,r.storageKey,s)}})()}_removeSession(){var n=this;return m(function*(){n._debug("#_removeSession()"),yield no(n.storage,n.storageKey),yield no(n.storage,n.storageKey+"-code-verifier"),yield no(n.storage,n.storageKey+"-user"),n.userStorage&&(yield no(n.userStorage,n.storageKey+"-user")),yield n._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&dn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var n=this;return m(function*(){yield n._stopAutoRefresh(),n._debug("#_startAutoRefresh()");const r=setInterval(()=>n._autoRefreshTokenTick(),$i);n.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(m(function*(){yield n.initializePromise,yield n._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var n=this;return m(function*(){n._debug("#_stopAutoRefresh()");const r=n.autoRefreshTicker;n.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var n=this;return m(function*(){n._removeVisibilityChangedCallback(),yield n._startAutoRefresh()})()}stopAutoRefresh(){var n=this;return m(function*(){n._removeVisibilityChangedCallback(),yield n._stopAutoRefresh()})()}_autoRefreshTokenTick(){var n=this;return m(function*(){n._debug("#_autoRefreshTokenTick()","begin");try{yield n._acquireLock(0,m(function*(){try{const r=Date.now();try{return yield n._useSession(function(){var o=m(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void n._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/$i);n._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield n._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{n._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof RD))throw r;n._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var n=this;return m(function*(){if(n._debug("#_handleVisibilityChange()"),!dn()||!window?.addEventListener)return n.autoRefreshToken&&n.startAutoRefresh(),!1;try{n.visibilityChangedCallback=m(function*(){return yield n._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",n.visibilityChangedCallback),yield n._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(n){var r=this;return m(function*(){const o=`#_onVisibilityChanged(${n})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),n||(yield r.initializePromise,yield r._acquireLock(-1,m(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(n,r,o){var i=this;return m(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,l]=yield Gi(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${s.join("&")}`})()}_unenroll(n){var r=this;return m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s;const{data:a,error:l}=i;return l?{data:null,error:l}:yield ue(r.fetch,"DELETE",`${r.url}/factors/${n.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Y(o))return{data:null,error:o};throw o}})()}_enroll(n){var r=this;return m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},"phone"===n.factorType?{phone:n.phone}:"totp"===n.factorType?{issuer:n.issuer}:{}),{data:d,error:h}=yield ue(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=l?.session)||void 0===s?void 0:s.access_token});return h?{data:null,error:h}:("totp"===n.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Y(o))return{data:null,error:o};throw o}})()}_verify(n){var r=this;return m(function*(){return r._acquireLock(-1,m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:"create"===n.webauthn.type?rV(n.webauthn.credential_response):oV(n.webauthn.credential_response)})}:{code:n.code}),{data:u,error:d}=yield ue(r.fetch,"POST",`${r.url}/factors/${n.factorId}/verify`,{body:c,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?{data:null,error:d}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Y(o))return{data:null,error:o};throw o}}))})()}_challenge(n){var r=this;return m(function*(){return r._acquireLock(-1,m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=yield ue(r.fetch,"POST",`${r.url}/factors/${n.factorId}/challenge`,{body:n,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:tV(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:nV(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Y(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(n){var r=this;return m(function*(){const{data:o,error:i}=yield r._challenge({factorId:n.factorId});return i?{data:null,error:i}:yield r._verify({factorId:n.factorId,challengeId:o.id,code:n.code})})()}_listFactors(){var n=this;return m(function*(){var r;const{data:{user:o},error:i}=yield n.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var n=this;return m(function*(){return n._acquireLock(-1,m(function*(){return yield n._useSession(function(){var r=m(function*(o){var i,s;const{data:{session:a},error:l}=o;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=bp(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;return(null!==(s=null===(i=a.user.factors)||void 0===i?void 0:i.filter(p=>"verified"===p.status))&&void 0!==s?s:[]).length>0&&(d="aal2"),{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:c.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(n){var r=this;return m(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:l,error:c}=yield ue(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=a,s=l.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(n){var r=this;return m(function*(o,i={}){try{let s=o;if(!s){const{data:y,error:v}=yield r.getSession();if(v||!y.session)return{data:null,error:v};s=y.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:d}}=bp(s);i?.allowExpired||function k2(t){if(!t)throw new Error("Missing exp claim");if(t<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const h=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!h){const{error:y}=yield r.getUser(s);if(y)throw y;return{data:{claims:l,header:a,signature:c},error:null}}const f=function N2(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),p=yield crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!(yield crypto.subtle.verify(f,p,c,function b2(t){const e=[];return function SD(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(t.charCodeAt(n+1)-56320&65535|o),n+=1}_2(r,e)}}(t,n=>e.push(n)),new Uint8Array(e)}(`${u}.${d}`))))throw new Cp("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}}).apply(this,arguments)}}return t.nextInstanceID=0,t})();class gV extends pV{constructor(e){super(e)}}class mV{constructor(e,n,r){var o,i,s;this.supabaseUrl=e,this.supabaseKey=n;const a=function l2(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function s2(t){return t.endsWith("/")?t:t+"/"}(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function a2(t,e){var n,r;const{db:o,auth:i,realtime:s,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(n=d?.headers)&&void 0!==n?n:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(f=m(function*(){return""}),function(){return f.apply(this,arguments)})};var f;return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}(r??{},{db:e2,realtime:n2,auth:Object.assign(Object.assign({},t2),{storageKey:l}),global:Xj});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=i2(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new sD(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Qj(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new oj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e=this;return m(function*(){var n,r;if(e.accessToken)return yield e.accessToken();const{data:o}=yield e.auth.getSession();return null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:e.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c},u,d){return new gV({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>"authorization"===f.toLowerCase())})}_initRealtimeClient(e){return new Ij(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==n&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function vV(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(null==t)return!1;const e=t.match(/^v(\d+)\./);return!!e&&parseInt(e[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const VD_supabase_url="https://hpqwzclyjrfivcmkzwpo.supabase.co",VD_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwcXd6Y2x5anJmaXZjbWt6d3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2ODMzMjUsImV4cCI6MjA3NjI1OTMyNX0.pN-NPncmQCJoiBlYnFk77bAdxXEu5NAn3Fi8bk_c4wI";let Ki=(()=>{const e=class{constructor(){this.currentUserSubject=new En(null),this.currentUser$=this.currentUserSubject.asObservable(),this.isInitialized=!1,this.initializeClient()}initializeClient(){var r=this;return m(function*(){try{r.supabase=((t,e,n)=>new mV(t,e,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))(VD_supabase_url,VD_supabase_anonKey),r.isInitialized=!0,yield r.checkExistingSession()}catch(o){console.error("Error initializing Supabase client:",o)}})()}checkExistingSession(){var r=this;return m(function*(){const o=localStorage.getItem("currentUser");if(o)try{const i=JSON.parse(o);r.currentUserSubject.next(i)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("currentUser")}})()}signInFallback(r,o){var i=this;return m(function*(){try{const a=[{id:"1",username:"test",password:"test",role:"user",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",created_at:(new Date).toISOString()}].find(l=>l.username===r&&l.password===o);return a?(localStorage.setItem("currentUser",JSON.stringify(a)),i.currentUserSubject.next(a),{user:a,error:null}):{user:null,error:"Invalid username or password"}}catch(s){return console.error("Fallback sign in error:",s),{user:null,error:"Sign in failed. Please try again."}}})()}signIn(r,o){var i=this;return m(function*(){try{i.isInitialized||(yield new Promise(l=>{const c=()=>{i.isInitialized?l(void 0):setTimeout(c,50)};c()})),yield new Promise(l=>setTimeout(l,100));const{data:s,error:a}=yield i.supabase.from("profiles").select("*").eq("username",r).eq("password",o).single();return a?(console.error("Database query error:",a),console.log("Trying fallback authentication..."),yield i.signInFallback(r,o)):s?(localStorage.setItem("currentUser",JSON.stringify(s)),i.currentUserSubject.next(s),{user:s,error:null}):{user:null,error:"User not found"}}catch(s){if(console.error("Sign in error:",s),s&&"object"==typeof s&&"message"in s){const a=s.message;if(a.includes("NavigatorLockAcquireTimeoutError")||a.includes("lock"))return console.log("Lock error detected, using fallback authentication..."),yield i.signInFallback(r,o)}return console.log("Error occurred, trying fallback authentication..."),yield i.signInFallback(r,o)}})()}signOut(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getCurrentUser(){return this.currentUserSubject.value}isSignedIn(){return null!==this.currentUserSubject.value}getUserCards(r,o){var i=this;return m(function*(){try{const s=parseInt(r);if(isNaN(s))return{cards:[],error:"Invalid user ID format"};const a=1e3;let l=0,c=[],u=!0;for(;u;){const{data:d,error:h}=yield i.supabase.from("user_cards").select("*").eq("user_id",s).range(l,l+a-1);if(h)return{cards:[],error:h.message};d&&d.length>0?(c=c.concat(d),l+=a,u=d.length===a,o&&o(c.length)):u=!1}return{cards:c,error:null}}catch(s){return console.error("Error fetching user cards:",s),{cards:[],error:"Failed to fetch user cards"}}})()}updateCardQuantity(r,o,i){var s=this;return m(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};if(i<=0){const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a).eq("card_def_key",o);if(l)return{success:!1,error:l.message}}else{const{data:l,error:c}=yield s.supabase.from("user_cards").select("*").eq("user_id",a).eq("card_def_key",o).maybeSingle();if(c)return console.error("Error checking existing card:",c),{success:!1,error:c.message};if(l){const{error:u}=yield s.supabase.from("user_cards").update({quantity:i}).eq("user_id",a).eq("card_def_key",o);if(u)return{success:!1,error:u.message}}else{const{error:u}=yield s.supabase.from("user_cards").insert({user_id:a,card_def_key:o,quantity:i});if(u)return{success:!1,error:u.message}}}return{success:!0,error:null}}catch(a){return console.error("Error updating card quantity:",a),{success:!1,error:"Failed to update card quantity"}}})()}getCardQuantity(r,o){var i=this;return m(function*(){try{const{data:s,error:a}=yield i.supabase.from("user_cards").select("quantity").eq("user_id",r).eq("card_def_key",o).single();return a||!s?0:s.quantity||0}catch(s){return console.error("Error fetching card quantity:",s),0}})()}syncUserCollection(r,o){var i=this;return m(function*(){try{const{cards:s,error:a}=yield i.getUserCards(r,o);if(a)return console.error("Error syncing user collection:",a),{};const l={};return s.forEach(c=>{l[c.card_def_key]=c.quantity}),l}catch(s){return console.error("Error syncing user collection:",s),{}}})()}bulkReplaceUserCollection(r,o){var i=this;return m(function*(){try{const s=parseInt(r);if(isNaN(s))return{success:!1,error:"Invalid user ID format"};const{error:a}=yield i.supabase.from("user_cards").delete().eq("user_id",s);if(a)return console.error("Error deleting existing cards:",a),{success:!1,error:a.message};const l=Object.entries(o).filter(([c,u])=>u>0).map(([c,u])=>({user_id:s,card_def_key:c,quantity:u}));if(l.length>0){const{error:c}=yield i.supabase.from("user_cards").insert(l);if(c)return console.error("Error inserting new cards:",c),{success:!1,error:c.message};console.log(`\u2705 Bulk sync completed: ${l.length} cards inserted`)}else console.log("\u2705 Bulk sync completed: No cards to insert (collection is empty)");return{success:!0,error:null}}catch(s){return console.error("Error in bulk replace user collection:",s),{success:!1,error:"Failed to bulk replace user collection"}}})()}};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),UD=(()=>{const e=class{constructor(){this.rarityMap=new Map([["C",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["U",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["R",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["RR",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["AR",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["SR",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["SAR",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["IM",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["UR",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["CR",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["S",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["SSR",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}],["Common",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["Uncommon",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["Rare",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["Double Rare",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["Art Rare",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["Super Rare",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Special Art Rare",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Immersive Rare",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["Ultimate Rare",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["Crown Rare",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["Shiny",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["Shiny Super Rare",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}]])}getRarityInfo(r){return this.rarityMap.get(r)}getDisplayName(r){const o=this.getRarityInfo(r);return o?o.displayName:r}getSymbol(r){const o=this.getRarityInfo(r);return o?o.symbol:r}getAllRarities(){return Array.from(this.rarityMap.values()).filter(r=>!r.code.includes(" ")).sort((r,o)=>r.order-o.order)}getRarityOrder(r){const o=this.getRarityInfo(r);return o?o.order:999}sortRarities(r){return r.sort((o,i)=>this.getRarityOrder(o)-this.getRarityOrder(i))}isRare(r){return["IM","UR","SSR"].includes(r)}isSuperRare(r){return["SR","SAR","IM","UR","SSR"].includes(r)}getNormalizedCode(r){const o=this.getRarityInfo(r);return o?"SAR"===o.code||"Special Art Rare"===r?"SR":o.code:r}getStandardizedDisplayName(r){const o=this.getNormalizedCode(r),i=this.getRarityInfo(o);return i?i.displayName:r}getUnifiedRarities(){return this.getAllRarities().filter(o=>"SAR"!==o.code)}groupCardsByNormalizedRarity(r){const o=new Map;return r.forEach(i=>{if(!i.rarityCode)return;const s=this.getNormalizedCode(i.rarityCode);o.has(s)||o.set(s,[]),o.get(s).push(i)}),o}};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function _V(t,e){if(1&t&&(E(0,"div",4),A(1),w()),2&t){const n=ze();V(1),nt(" ",n.error," ")}}function CV(t,e){1&t&&(E(0,"div",5)(1,"h2"),A(2,"Loading your collection..."),w(),Rn(3,"div",6),w())}function bV(t,e){1&t&&(E(0,"span",24),A(1,"\u{1f3c6} TOP PICK"),w())}function wV(t,e){if(1&t&&(E(0,"div",16)(1,"div",17)(2,"span",18),A(3),w(),Ie(4,bV,2,0,"span",19),E(5,"strong"),A(6),w()(),E(7,"div",20)(8,"span",21),A(9),w(),E(10,"span",22),A(11),w(),E(12,"span",23),A(13),w()()()),2&t){const n=e.$implicit,r=e.index;Dr("top-pick",0===r),V(3),nt("#",r+1,""),V(1),te("ngIf",0===r),V(2),Fn(n.packName),V(3),nt("",n.missingCards," missing cards"),V(2),nt("",n.completionPercentage,"% complete"),V(2),Er("(",n.ownedCards,"/",n.totalCards,")")}}function DV(t,e){if(1&t&&(E(0,"div",11)(1,"details",12)(2,"summary"),A(3,"\u{1f381} Pack Opening Suggestions"),w(),E(4,"p",13),A(5,"Optimized recommendations based on your missing cards"),w(),E(6,"div",14),Ie(7,wV,14,9,"div",15),w()()()),2&t){const n=ze(2);V(7),te("ngForOf",n.packSuggestions)}}function EV(t,e){if(1&t&&(E(0,"div",38)(1,"span",39),A(2),w(),E(3,"div",40)(4,"div",41),Rn(5,"div",42),w(),E(6,"span",43),A(7),w()()()),2&t){const n=e.$implicit;V(2),Fn(n.name),V(3),Os("width",n.percentage,"%"),V(2),Er("",n.owned,"/",n.total,"")}}function SV(t,e){if(1&t&&(E(0,"div",35)(1,"h5"),A(2,"Rarity Progress:"),w(),E(3,"div",36),Ie(4,EV,8,5,"div",37),w()()),2&t){const n=ze().$implicit;V(4),te("ngForOf",n.rarityBreakdown)}}function MV(t,e){if(1&t&&(E(0,"div",28)(1,"div",29)(2,"h4"),A(3),w(),E(4,"span",30),A(5),w()(),E(6,"div",31),Rn(7,"div",32),w(),E(8,"p",33),A(9),w(),Ie(10,SV,5,1,"div",34),w()),2&t){const n=e.$implicit;V(3),Er("[",n.code,"] - ",n.name,""),V(2),nt("",n.percentage,"%"),V(2),Os("width",n.percentage,"%"),V(2),Er("",n.owned,"/",n.total," cards"),V(1),te("ngIf",n.rarityBreakdown&&n.rarityBreakdown.length>0)}}function IV(t,e){if(1&t&&(E(0,"div",25)(1,"details",12)(2,"summary"),A(3,"\u{1f4e6} Set Completion Progress"),w(),E(4,"div",26),Ie(5,MV,11,8,"div",27),w()()()),2&t){const n=ze(2);V(5),te("ngForOf",n.setProgress)}}function xV(t,e){if(1&t&&(E(0,"div",47)(1,"div",48)(2,"h4"),A(3),w(),E(4,"span",49),A(5),w()(),E(6,"div",50)(7,"div",51),Rn(8,"div",52),w(),E(9,"span",53),A(10),w()()()),2&t){const n=e.$implicit;V(3),Fn(n.name),V(2),Er("",n.owned,"/",n.total,""),V(3),Os("width",n.percentage,"%"),V(2),nt("",n.percentage,"%")}}function AV(t,e){if(1&t&&(E(0,"div",44)(1,"details",12)(2,"summary"),A(3,"\u2b50 Collection by Rarity"),w(),E(4,"div",45),Ie(5,xV,11,6,"div",46),w()()()),2&t){const n=ze(2);V(5),te("ngForOf",n.userRarityStats)}}function TV(t,e){if(1&t&&(E(0,"div",7),Ie(1,DV,8,1,"div",8),Ie(2,IV,6,1,"div",9),Ie(3,AV,6,1,"div",10),w()),2&t){const n=ze();V(1),te("ngIf",n.packSuggestions.length>0),V(1),te("ngIf",n.setProgress.length>0),V(1),te("ngIf",n.rarityStats.length>0)}}let OV=(()=>{const e=class{constructor(r,o,i,s){this.dataManager=r,this.supabaseService=o,this.router=i,this.rarityService=s,this.title="Pokemon TCG Pocket Collector",this.cards=[],this.sets=[],this.rarityStats=[],this.packStats=[],this.loading=!1,this.error=null,this.dataLoaded=!1,this.userCollectionLoaded=!1,this.userCards=[],this.userStats={totalOwned:0,uniqueCards:0,completionPercentage:0,rareCards:0,recentSetsOwned:0,missingCommons:0,missingRares:0},this.setProgress=[],this.userRarityStats=[],this.recentCards=[],this.nearestCompleteSet=null,this.packSuggestions=[]}ngOnInit(){this.supabaseService.isSignedIn()?this.loadAllData():this.router.navigate(["/signin"])}loadCards(){this.loading=!0,this.error=null,this.dataManager.initializeCardData().subscribe({next:r=>{this.cards=r,this.loading=!1},error:r=>{this.error="Failed to load cards data",this.loading=!1,console.error("Error loading cards:",r)}})}loadAllData(){this.loading=!0,this.error=null,this.dataManager.loadAllPokemonData().subscribe({next:r=>{this.cards=r.cards,this.sets=r.sets,this.dataLoaded=!0,this.loading=!1,this.loadStats(),this.loadUserCollection()},error:r=>{this.error="Failed to load Pokemon data",this.loading=!1,console.error("Error loading data:",r)}})}loadStats(){this.dataManager.getRarityStats().subscribe({next:r=>{this.rarityStats=r},error:r=>console.error("Error loading rarity stats:",r)}),this.dataManager.getPackStats().subscribe({next:r=>{this.packStats=r.slice(0,10)},error:r=>console.error("Error loading pack stats:",r)})}downloadCardsFile(){this.dataManager.downloadCardsFile()}getStorageInstructions(){const r=this.dataManager.getStorageInstructions();alert(r)}showComprehensiveStats(){this.dataManager.getComprehensiveStats().subscribe({next:r=>{alert(`Comprehensive Statistics loaded!\n\nSummary:\n- ${r.totalCards} total cards\n- ${r.totalSets} sets\n- ${r.totalRarities} rarity types\n- Date range: ${r.dateRange.earliest} to ${r.dateRange.latest}`)},error:r=>{console.error("Error loading comprehensive stats:",r),alert("Failed to load comprehensive statistics")}})}loadUserCollection(){var r=this;return m(function*(){const o=yield r.supabaseService.getCurrentUser();if(o)try{const i=yield r.supabaseService.syncUserCollection(o.id);r.userCards=Object.entries(i).map(([s,a])=>({card_def_key:s,quantity:a})),r.userCollectionLoaded=!0,r.calculateUserStats(),r.calculateSetProgress(),r.calculateUserRarityStats(),r.loadRecentCards(),r.calculatePackSuggestions()}catch(i){console.error("Error loading user collection:",i)}})()}getCardId(r){return`${r.set}-${r.number}`}calculateUserStats(){if(!this.userCards||!this.cards.length)return;const r=new Map;let o=0;this.userCards.forEach(f=>{r.set(f.card_def_key,f.quantity),o+=f.quantity});const i=this.userCards.length,s=Math.round(i/this.cards.length*100),a=this.userCards.filter(f=>{const p=this.cards.find(y=>this.getCardId(y)===f.card_def_key);if(!p||!p.rarityCode)return!1;const g=this.rarityService.getNormalizedCode(p.rarityCode);return this.rarityService.isSuperRare(g)}).length,l=this.sets.slice(-3).map(f=>f.code),c=this.userCards.filter(f=>{const p=this.cards.find(g=>this.getCardId(g)===f.card_def_key);return p&&l.includes(p.set)}).length,u=this.cards.filter(f=>!r.has(this.getCardId(f))),d=u.filter(f=>!!f.rarityCode&&"C"===this.rarityService.getNormalizedCode(f.rarityCode)).length,h=u.filter(f=>{if(!f.rarityCode)return!1;const p=this.rarityService.getNormalizedCode(f.rarityCode);return this.rarityService.isSuperRare(p)}).length;this.userStats={totalOwned:o,uniqueCards:i,completionPercentage:s,rareCards:a,recentSetsOwned:c,missingCommons:d,missingRares:h}}calculateSetProgress(){if(!this.userCards||!this.sets.length||!this.cards.length)return;const r=new Map;this.userCards.forEach(o=>{r.set(o.card_def_key,!0)}),this.setProgress=this.sets.map(o=>{const i=this.cards.filter(c=>c.set===o.code),s=i.filter(c=>r.has(this.getCardId(c))),a=i.length>0?Math.round(s.length/i.length*100):0,l=this.calculateSetRarityBreakdown(i,r);return{name:o.label?.en||o.code,code:o.code,owned:s.length,total:i.length,percentage:a,rarityBreakdown:l}}).sort((o,i)=>o.code.localeCompare(i.code)),this.nearestCompleteSet=this.setProgress.find(o=>o.percentage<100)||this.setProgress[0]}calculateSetRarityBreakdown(r,o){const i=this.rarityService.groupCardsByNormalizedRarity(r),s=[];return i.forEach((a,l)=>{const c=a.filter(h=>o.has(this.getCardId(h))),u=a.length>0?Math.round(c.length/a.length*100):0,d=this.rarityService.getStandardizedDisplayName(l);s.push({name:d,code:l,owned:c.length,total:a.length,percentage:u})}),s.sort((a,l)=>this.rarityService.getRarityOrder(a.code)-this.rarityService.getRarityOrder(l.code))}calculateUserRarityStats(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(i=>{r.set(i.card_def_key,!0)});const o=this.rarityService.groupCardsByNormalizedRarity(this.cards);this.userRarityStats=[],o.forEach((i,s)=>{const a=i.filter(u=>r.has(this.getCardId(u))),l=i.length>0?Math.round(a.length/i.length*100):0,c=this.rarityService.getStandardizedDisplayName(s);this.userRarityStats.push({name:c,code:s,owned:a.length,total:i.length,percentage:l})}),this.userRarityStats.sort((i,s)=>this.rarityService.getRarityOrder(i.code)-this.rarityService.getRarityOrder(s.code))}loadRecentCards(){!this.userCards||!this.cards.length||(this.recentCards=this.userCards.slice(0,6).map(r=>({...this.cards.find(i=>this.getCardId(i)===r.card_def_key),quantity:r.quantity})).filter(r=>r))}calculatePackSuggestions(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(s=>{r.set(s.card_def_key,!0)});const o=new Set;this.cards.forEach(s=>{s.packs&&s.packs.length>0&&s.packs.forEach(a=>o.add(a))});const i=Array.from(o).map(s=>{const a=this.cards.filter(d=>d.packs&&d.packs.includes(s)),l=a.filter(d=>!r.has(this.getCardId(d))),c=new Map;l.forEach(d=>{const f=this.rarityService.getNormalizedCode(d.rarityCode||"Unknown"),p=c.get(f)||0;c.set(f,p+1)});let u=0;return c.forEach((d,h)=>{const f=this.rarityService.getRarityOrder(h),p=Math.max(1,10-f);u+=d*p}),{packName:s,totalCards:a.length,missingCards:l.length,ownedCards:a.length-l.length,completionPercentage:a.length>0?Math.round((a.length-l.length)/a.length*100):100,rarityBreakdown:Array.from(c.entries()).map(([d,h])=>({code:d,count:h,displayName:this.rarityService.getDisplayName(d),symbol:this.rarityService.getSymbol(d)})).sort((d,h)=>this.rarityService.getRarityOrder(d.code)-this.rarityService.getRarityOrder(h.code)),score:u,missingCardsList:l.slice(0,5)}});this.packSuggestions=i.filter(s=>s.missingCards>0).sort((s,a)=>a.score-s.score).slice(0,5)}exportCollection(){if(!this.userCollectionLoaded)return void alert("Collection not loaded yet. Please wait...");const r=this.generateCollectionCSV(),o=new Blob(["\ufeff"+r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),s=URL.createObjectURL(o);i.setAttribute("href",s),i.setAttribute("download","pokemon_collection.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}generateCollectionCSV(){const o=[["Card Name","Set","Number","Rarity","Quantity"].join(",")];return this.userCards.forEach(i=>{const s=this.cards.find(a=>this.getCardId(a)===i.card_def_key);if(s){const a=[`"${s.label?.eng||s.name||""}"`,`"${s.set||""}"`,`"${s.number||""}"`,`"${s.rarity||""}"`,i.quantity.toString()];o.push(a.join(","))}}),o.join("\n")}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}};let t=e;return e.\u0275fac=function(o){return new(o||e)(x(nD),x(Ki),x(_t),x(UD))},e.\u0275cmp=jr({type:e,selectors:[["app-dashboard"]],decls:4,vars:3,consts:[[1,"container"],["class","error",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"error"],[1,"loading-state"],[1,"loading-spinner"],[1,"dashboard-content"],["class","pack-suggestions",4,"ngIf"],["class","set-progress",4,"ngIf"],["class","rarity-breakdown",4,"ngIf"],[1,"pack-suggestions"],["open",""],[1,"suggestion-subtitle"],[1,"suggestions-list"],["class","suggestion-item",3,"top-pick",4,"ngFor","ngForOf"],[1,"suggestion-item"],[1,"suggestion-header"],[1,"rank-number"],["class","top-pick-badge",4,"ngIf"],[1,"suggestion-summary"],[1,"missing-count"],[1,"completion-rate"],[1,"progress-count"],[1,"top-pick-badge"],[1,"set-progress"],[1,"progress-list"],["class","progress-item",4,"ngFor","ngForOf"],[1,"progress-item"],[1,"progress-header"],[1,"progress-percentage"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-details"],["class","set-rarity-breakdown",4,"ngIf"],[1,"set-rarity-breakdown"],[1,"set-rarity-grid"],["class","set-rarity-item",4,"ngFor","ngForOf"],[1,"set-rarity-item"],[1,"rarity-name"],[1,"rarity-mini-progress"],[1,"rarity-mini-bar"],[1,"rarity-mini-fill"],[1,"rarity-mini-text"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-card",4,"ngFor","ngForOf"],[1,"rarity-card"],[1,"rarity-header"],[1,"rarity-count"],[1,"rarity-progress"],[1,"rarity-bar"],[1,"rarity-fill"],[1,"percentage"]],template:function(o,i){1&o&&(E(0,"div",0),Ie(1,_V,2,1,"div",1),Ie(2,CV,4,0,"div",2),Ie(3,TV,4,3,"div",3),w()),2&o&&(V(1),te("ngIf",i.error),V(1),te("ngIf",i.loading),V(1),te("ngIf",!i.loading))},dependencies:[Lh,Di],styles:['[_ngcontent-%COMP%]:root{--dashboard-bg: radial-gradient(circle at top, #1b2b4b 0%, #0b1224 45%, #070910 100%);--surface: rgba(21, 29, 46, .85);--surface-strong: rgba(27, 38, 61, .95);--border: rgba(98, 120, 161, .35);--accent: #5ba8ff;--accent-strong: #4c8aff;--text: #f5f7ff;--text-muted: #adb9d9;--success: #2ecc71;--warning: #f1c40f;--danger: #ff6b6b}.container[_ngcontent-%COMP%]{position:relative;padding:32px clamp(16px,3vw,40px) 48px;max-width:1280px;margin:0 auto;min-height:100vh;color:var(--text);background:var(--dashboard-bg);overflow:hidden;border-radius:28px;box-shadow:0 30px 80px #070c1899}.container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;backdrop-filter:blur(24px) saturate(135%);opacity:.9}.container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{color:var(--text);margin-bottom:12px;font-weight:600}.dashboard-content[_ngcontent-%COMP%]{display:grid;gap:32px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.stat-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.22);border-radius:20px;padding:22px;display:flex;flex-direction:column;gap:12px;box-shadow:0 16px 32px #0c142447;transition:transform .16s ease,border-color .16s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#5ba8ff73}.stat-card.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(91,168,255,.25),rgba(34,46,70,.85))}.stat-icon[_ngcontent-%COMP%]{font-size:2rem}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--text-muted);letter-spacing:.02em}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0}.stat-detail[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem}.error[_ngcontent-%COMP%]{background:rgba(255,107,107,.12);color:var(--danger);border:1px solid rgba(255,107,107,.35);padding:18px 22px;border-radius:14px;text-align:center;font-weight:500}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:80px 0;color:var(--text)}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;margin:24px auto;border-radius:50%;border:4px solid rgba(91,168,255,.2);border-top-color:var(--accent);animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:clamp(20px,2.4vw,28px);box-shadow:0 18px 36px #070c1859;transition:transform .16s ease,box-shadow .16s ease,border-color .18s ease}.pack-suggestions[_ngcontent-%COMP%]:hover, .set-progress[_ngcontent-%COMP%]:hover, .rarity-breakdown[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 24px 48px #0c162973;border-color:#5ba8ff8c}.pack-suggestions[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]{width:100%}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;list-style:none;cursor:pointer;font-size:clamp(1.25rem,2vw,1.55rem);font-weight:700;color:var(--text);padding-bottom:18px;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:22px}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{content:"";width:11px;height:11px;border-radius:50%;background:var(--accent);box-shadow:0 0 18px #5ba8ffa6}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker{display:none}.pack-suggestions[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{background:var(--accent-strong)}.suggestion-subtitle[_ngcontent-%COMP%]{color:var(--text-muted);margin-bottom:18px;font-size:.95rem;font-style:italic}.suggestions-list[_ngcontent-%COMP%]{display:grid;gap:14px}.suggestion-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:18px;padding:18px 20px;border:1px solid rgba(91,168,255,.2);transition:transform .16s ease,border-color .16s ease,box-shadow .16s ease}.suggestion-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#5ba8ff8c;box-shadow:0 14px 28px #101c3459}.suggestion-item.top-pick[_ngcontent-%COMP%]{border:1px solid rgba(241,196,15,.65);background:linear-gradient(120deg,rgba(241,196,15,.22),rgba(44,62,80,.45))}.suggestion-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.rank-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:32px;padding:4px 10px;border-radius:999px;background:rgba(91,168,255,.2);color:var(--accent);font-weight:600}.top-pick-badge[_ngcontent-%COMP%]{font-size:.72rem;letter-spacing:.12em;text-transform:uppercase;padding:4px 10px;border-radius:999px;background:rgba(241,196,15,.16);color:var(--warning)}.suggestion-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:14px;color:var(--text-muted);font-size:.92rem}.missing-count[_ngcontent-%COMP%]{color:var(--danger);font-weight:600}.completion-rate[_ngcontent-%COMP%]{color:var(--success);font-weight:600}.progress-count[_ngcontent-%COMP%]{color:var(--accent);font-weight:600}.progress-list[_ngcontent-%COMP%]{display:grid;gap:18px}.progress-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:20px;padding:20px 22px;border:1px solid rgba(91,168,255,.18);transition:transform .16s ease,border-color .16s ease}.progress-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.progress-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;color:var(--text)}.progress-percentage[_ngcontent-%COMP%]{color:var(--success);font-weight:700}.progress-bar[_ngcontent-%COMP%]{background:rgba(91,168,255,.14);border-radius:999px;height:10px;overflow:hidden;margin-bottom:10px}.progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent-strong));transition:width .22s ease-in-out}.progress-details[_ngcontent-%COMP%]{color:var(--text-muted);margin:0;font-size:.92rem}.set-rarity-breakdown[_ngcontent-%COMP%]{margin-top:18px}.set-rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:12px;color:var(--text-muted);font-weight:600;letter-spacing:.02em}.set-rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.set-rarity-item[_ngcontent-%COMP%]{background:rgba(13,19,33,.7);border:1px solid rgba(91,168,255,.14);border-radius:16px;padding:12px 14px;text-align:center}.rarity-name[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:.8rem;font-weight:600;color:var(--text)}.rarity-mini-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.rarity-mini-bar[_ngcontent-%COMP%]{flex:1;height:6px;border-radius:999px;background:rgba(91,168,255,.18);overflow:hidden}.rarity-mini-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent) 0%,var(--accent-strong) 100%);border-radius:999px}.rarity-mini-text[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted)}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.rarity-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.18);border-radius:18px;padding:20px;display:grid;gap:14px;transition:transform .16s ease,border-color .16s ease}.rarity-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.rarity-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.rarity-count[_ngcontent-%COMP%]{font-weight:700;color:var(--accent)}.rarity-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.rarity-bar[_ngcontent-%COMP%]{flex:1;height:8px;border-radius:999px;background:rgba(91,168,255,.18);overflow:hidden}.rarity-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent) 0%,var(--accent-strong) 100%);border-radius:999px;transition:width .22s ease-in-out}.percentage[_ngcontent-%COMP%]{min-width:44px;text-align:right;font-weight:700;color:var(--success)}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:24px clamp(12px,4vw,20px);border-radius:18px}.suggestion-summary[_ngcontent-%COMP%], .progress-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.rarity-grid[_ngcontent-%COMP%], .set-rarity-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.rank-number[_ngcontent-%COMP%]{min-width:28px}}']}),t})(),PV=(()=>{const e=class{constructor(r){this.http=r,this.BASE_IMAGE_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-exchange/main/public/images/cards",this.imageCache=new Map}getCardImageUrl(r){return`${this.BASE_IMAGE_URL}/${r}`}checkImageExists(r){if(this.imageCache.has(r))return W(this.imageCache.get(r));const o=this.getCardImageUrl(r);return this.http.head(o,{observe:"response"}).pipe(O(i=>{const s=200===i.status;return this.imageCache.set(r,s),s}),$n(()=>(this.imageCache.set(r,!1),W(!1))))}preloadImage(r){return new Promise(o=>{const i=new Image;i.onload=()=>{this.imageCache.set(r,!0),o(!0)},i.onerror=()=>{this.imageCache.set(r,!1),o(!1)},i.src=this.getCardImageUrl(r)})}getPlaceholderImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDIwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExNi41NjkgMTQwIDEzMCAxMjYuNTY5IDEzMCAxMTBDMTMwIDkzLjQzMTUgMTE2LjU2OSA4MCAxMDAgODBDODMuNDMxNSA4MCA3MCA5My40MzE1IDcwIDExMEM3MCAxMjYuNTY5IDgzLjQzMTUgMTQwIDEwMCAxNDBaIiBmaWxsPSIjOUI5QkE4Ii8+CjxwYXRoIGQ9Ik0xMDAgMTAwQzEwNS41MjMgMTAwIDExMCAxMDQuNDc3IDExMCAxMTBDMTEwIDExNS41MjMgMTA1LjUyMyAxMjAgMTAwIDEyMEM5NC40NzcgMTIwIDkwIDExNS41MjMgOTAgMTEwQzkwIDEwNC40NzcgOTQuNDc3IDEwMCAxMDAgMTAwWiIgZmlsbD0iI0Y5RkFGQiIvPgo8L3N2Zz4K"}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(bo))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function RV(t,e){if(1&t&&(E(0,"div",30),A(1),w()),2&t){const n=ze(2);V(1),nt("",n.syncProgress," cards loaded")}}function kV(t,e){if(1&t&&(E(0,"div",24)(1,"div",25)(2,"div",26),A(3,"\u23f3"),w(),E(4,"div",27)(5,"div",28),A(6),w(),Ie(7,RV,2,1,"div",29),w()()()),2&t){const n=ze();V(6),Fn(n.syncMessage),V(1),te("ngIf",n.syncProgress>0)}}function NV(t,e){if(1&t&&(E(0,"option",31),A(1),w()),2&t){const n=e.$implicit,r=ze();te("value",n),V(1),Er(" ",r.getSetName(n)," (",n,") ")}}function FV(t,e){if(1&t&&(E(0,"option",31),A(1),w()),2&t){const n=e.$implicit;te("value",n.symbol),V(1),nt(" ",n.displayName," ")}}function LV(t,e){if(1&t&&(E(0,"span",32),A(1),w()),2&t){const n=ze();V(1),nt("(filtered by ",n.getSetName(n.selectedSet),")")}}function jV(t,e){if(1&t&&(E(0,"option",31),A(1),w()),2&t){const n=e.$implicit;te("value",n),V(1),nt(" ",n," ")}}function VV(t,e){1&t&&(E(0,"div",33),Rn(1,"div",34),E(2,"p"),A(3,"Loading Pokemon cards..."),w()())}function UV(t,e){if(1&t){const n=As();E(0,"div",35)(1,"p"),A(2),w(),E(3,"button",36),de("click",function(){return lo(n),co(ze().loadAllData())}),A(4,"Retry"),w()()}if(2&t){const n=ze();V(2),Fn(n.error)}}function $V(t,e){if(1&t){const n=As();E(0,"div",46)(1,"div",47)(2,"img",48),de("error",function(o){const s=lo(n).$implicit;return co(ze(3).onImageError(o,s))}),w()(),E(3,"div",49)(4,"div",50),A(5),w(),E(6,"div",51)(7,"button",52),de("click",function(){const i=lo(n).$implicit;return co(ze(3).decreaseOwned(i))}),A(8," \u2212 "),w(),E(9,"span",53),A(10),w(),E(11,"button",54),de("click",function(){const i=lo(n).$implicit;return co(ze(3).increaseOwned(i))}),A(12," + "),w()()()()}if(2&t){const n=e.$implicit,r=ze(3);Dr("no-quantity",0===r.getOwnedCount(n)),V(1),Dr("no-quantity",0===r.getOwnedCount(n)),V(1),Dr("no-quantity",0===r.getOwnedCount(n)),te("src",r.getCardImageUrl(n.imageName),od)("alt",n.label.eng+" Pokemon Card"),V(3),Fn(r.getCardDisplayName(n)),V(2),te("disabled",0===r.getOwnedCount(n)),V(3),Fn(r.getOwnedCount(n))}}function BV(t,e){if(1&t&&(E(0,"div",39)(1,"div",40)(2,"h3",41),A(3),w(),E(4,"div",42)(5,"span",43),A(6),w()()(),E(7,"div",44),Ie(8,$V,13,11,"div",45),w()()),2&t){const n=e.$implicit,r=ze(2);V(3),Fn(r.getGroupDisplayName(n.groupTitle,n.cards)),V(3),Er("",n.cards.length," card",1!==n.cards.length?"s":"",""),V(2),te("ngForOf",n.cards)("ngForTrackBy",r.trackByCardInGroup)}}function HV(t,e){if(1&t&&(E(0,"div",37),Ie(1,BV,9,5,"div",38),w()),2&t){const n=ze();V(1),te("ngForOf",n.getGroupedCards())("ngForTrackBy",n.trackByGroupTitle)}}function zV(t,e){if(1&t){const n=As();E(0,"div",55)(1,"div",56),A(2,"\u{1f50d}"),w(),E(3,"h3"),A(4,"No cards found"),w(),E(5,"p"),A(6,"Try adjusting your search or filter criteria"),w(),E(7,"button",36),de("click",function(){return lo(n),co(ze().clearFilters())}),A(8,"Clear All Filters"),w()()}}let GV=(()=>{const e=class{constructor(r,o,i,s,a,l,c){this.pokemonDataService=r,this.dataManager=o,this.imageService=i,this.supabaseService=s,this.router=a,this.cdr=l,this.rarityService=c,this.cards=[],this.filteredCards=[],this.sets=[],this.rarityMapping={},this.ownedCards={},this.selectedSet="all",this.selectedRarity="all",this.selectedPack="all",this.searchTerm="",this.availableSets=[],this.availableRarities=[],this.availableRaritySymbols=[],this.availablePacks=[],this.loading=!0,this.loadingOwnedCards=!1,this.syncingCards=!1,this.syncProgress=0,this.syncMessage="",this.error=null,this.viewMode="grid",this.totalCards=0,this.ownedCount=0,this.uniqueOwned=0,this.completionPercentage=0,this.currentUser=null,this.trackByCardId=(u,d)=>this.getCardId(d),this.trackByGroupTitle=(u,d)=>d.groupTitle,this.trackByCardInGroup=(u,d)=>this.getCardId(d)}ngOnInit(){this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser?this.loadAllData():this.router.navigate(["/signin"])}loadAllData(){this.loading=!0,this.error=null,this.pokemonDataService.loadAllData().subscribe({next:r=>{this.cards=r.cards,this.filteredCards=[...this.cards],this.sets=r.sets,this.rarityMapping=r.rarities,this.extractFilterOptions(),this.calculateStatistics(),this.loading=!1,this.cdr.detectChanges(),this.loadOwnedCards()},error:r=>{this.error="Failed to load card collection",this.loading=!1,this.cdr.detectChanges(),console.error("Error loading card collection:",r)}})}extractFilterOptions(){this.availableSets=[...new Set(this.cards.map(a=>a.set))];const r=[...new Set(this.cards.map(a=>a.rarityCode).filter(a=>a))];this.availableRarities=r,this.availableRaritySymbols=[];const o=new Set;this.cards.forEach(a=>{if(a.rarityCode){const l=this.rarityService.getNormalizedCode(a.rarityCode);o.add(l)}});const i=new Map;this.rarityService.getUnifiedRarities().forEach(a=>{o.has(a.code)&&i.set(a.symbol,{symbol:a.symbol,rarities:[a.code],displayName:a.displayName})}),this.availableRaritySymbols=Array.from(i.values()).sort((a,l)=>this.rarityService.getRarityOrder(a.rarities[0])-this.rarityService.getRarityOrder(l.rarities[0])),this.extractAvailablePacks()}convertRarityNameToCode(r){return{Common:"C",Uncommon:"U",Rare:"R","Double Rare":"RR","Art Rare":"AR","Super Rare":"SR","Special Art Rare":"SAR","Immersive Rare":"IM","Crown Rare":"UR",Shiny:"S","Shiny Super Rare":"SSR"}[r]||r}extractAvailablePacks(){let r=this.cards;"all"!==this.selectedSet&&(r=this.cards.filter(i=>i.set===this.selectedSet));const o=r.flatMap(i=>i.packs).filter(i=>i&&i.trim());this.availablePacks=[...new Set(o)],"all"!==this.selectedPack&&!this.availablePacks.includes(this.selectedPack)&&(this.selectedPack="all")}applyFilters(){this.filteredCards=this.cards.filter(r=>{if("all"!==this.selectedSet&&r.set!==this.selectedSet)return!1;if("all"!==this.selectedRarity){const o=this.availableRaritySymbols.find(i=>i.symbol===this.selectedRarity);if(o){const i=r.rarityCode?this.rarityService.getNormalizedCode(r.rarityCode):"";if(!o.rarities.includes(i))return!1}else if((r.rarityCode?this.rarityService.getSymbol(r.rarityCode):"")!==this.selectedRarity)return!1}return!("all"!==this.selectedPack&&!r.packs.includes(this.selectedPack)||this.searchTerm&&!r.label.eng.toLowerCase().includes(this.searchTerm.toLowerCase()))})}onFilterChange(){this.extractAvailablePacks(),this.applyFilters()}onSetChange(){this.extractAvailablePacks(),this.applyFilters()}onSearchChange(){this.applyFilters()}clearFilters(){this.selectedSet="all",this.selectedRarity="all",this.selectedPack="all",this.searchTerm="",this.applyFilters()}loadOwnedCards(){var r=this;return m(function*(){if(r.currentUser){r.loadingOwnedCards=!0,r.syncingCards=!0,r.syncProgress=0,r.syncMessage="Starting sync...";try{const o=yield r.supabaseService.syncUserCollection(r.currentUser.id,i=>{r.syncProgress=i,r.syncMessage=`Syncing cards... ${i} loaded`,r.cdr.detectChanges()});r.ownedCards=o,r.calculateStatistics(),r.syncMessage=`Sync completed! ${Object.keys(o).length} cards loaded`,r.cdr.detectChanges(),setTimeout(()=>{r.syncingCards=!1,r.syncMessage="",r.cdr.detectChanges()},1500)}catch(o){console.error("Error loading owned cards:",o),r.syncMessage="Sync failed, using local data...";const i=localStorage.getItem("ownedPokemonCards");i&&(r.ownedCards=JSON.parse(i),r.calculateStatistics()),r.cdr.detectChanges(),setTimeout(()=>{r.syncingCards=!1,r.syncMessage="",r.cdr.detectChanges()},2e3)}finally{r.loadingOwnedCards=!1}}})()}saveOwnedCards(){var r=this;return m(function*(){localStorage.setItem("ownedPokemonCards",JSON.stringify(r.ownedCards)),r.calculateStatistics()})()}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}increaseOwned(r){var o=this;return m(function*(){if(!o.currentUser)return;const i=o.getCardId(r),s=(o.ownedCards[i]||0)+1;o.ownedCards[i]=s,o.saveOwnedCards(),o.cdr.detectChanges();try{yield o.supabaseService.updateCardQuantity(o.currentUser.id,i,s)}catch(a){console.error("Error updating card quantity in database:",a),o.ownedCards[i]=s-1,0===o.ownedCards[i]&&delete o.ownedCards[i],o.saveOwnedCards(),o.cdr.detectChanges()}})()}decreaseOwned(r){var o=this;return m(function*(){if(!o.currentUser)return;const i=o.getCardId(r),s=o.ownedCards[i]||0;if(s>0){const a=s-1;0===a?delete o.ownedCards[i]:o.ownedCards[i]=a,o.saveOwnedCards(),o.cdr.detectChanges();try{yield o.supabaseService.updateCardQuantity(o.currentUser.id,i,a)}catch(l){console.error("Error updating card quantity in database:",l),o.ownedCards[i]=s,o.saveOwnedCards(),o.cdr.detectChanges()}}})()}calculateStatistics(){this.totalCards=this.cards.length,this.ownedCount=Object.values(this.ownedCards).reduce((r,o)=>r+o,0),this.uniqueOwned=Object.keys(this.ownedCards).length,this.completionPercentage=this.totalCards>0?Math.round(this.uniqueOwned/this.totalCards*100):0}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.label.en:r}getFullRarityName(r){return this.rarityService.getStandardizedDisplayName(r)}getRarityClass(r){return{Common:"rarity-common",Uncommon:"rarity-uncommon",Rare:"rarity-rare","Double Rare":"rarity-double-rare","Art Rare":"rarity-art-rare","Super Rare":"rarity-super-rare","Special Art Rare":"rarity-special-art-rare","Immersive Rare":"rarity-immersive-rare","Crown Rare":"rarity-crown-rare",Shiny:"rarity-shiny","Shiny Super Rare":"rarity-shiny-super-rare"}[r]||"rarity-default"}toggleViewMode(){this.viewMode="grid"===this.viewMode?"list":"grid"}exportCollection(){let r="\ufeff";r+="Id,CardName,NumberOwn,Expansion,Pack,Rarity\n",this.cards.forEach(s=>{const a=this.getCardId(s),l=this.getOwnedCount(s),c=s.rarityCode?this.rarityService.getSymbol(s.rarityCode):"Unknown",u=s.packs&&s.packs.length>0?s.packs[0]:"",d=s.label.eng.replace(/,/g,'""');r+=`${a},"${d}",${l},${s.set},"${u}",${c}\n`});const o=new Blob([r],{type:"text/csv;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="pokemon-tcg-collection.csv",i.click()}importCollection(r){var o=this;const i=r.target.files[0];if(i){const s=new FileReader;s.onload=function(){var a=m(function*(l){try{const d=l.target?.result.split("\n").slice(1).filter(p=>p.trim());let h=0,f=0;if(d.forEach(p=>{try{const g=o.parseCSVLine(p);if(g.length>=3){const y=g[0].trim(),v=parseInt(g[2].trim());y&&!isNaN(v)&&v>=0?o.cards.some(C=>o.getCardId(C)===y)?(v>0?o.ownedCards[y]=v:delete o.ownedCards[y],h++):(console.warn(`Card ID ${y} not found in collection`),f++):(console.warn(`Invalid data in line: ${p}`),f++)}}catch(g){console.error(`Error parsing line: ${p}`,g),f++}}),o.saveOwnedCards(),o.currentUser)try{const p=yield o.supabaseService.bulkReplaceUserCollection(o.currentUser.id,o.ownedCards);if(p.success){let g=`Import completed!\n${h} cards updated`;g+="\nCollection synced to database successfully",f>0&&(g+=`\n${f} import errors encountered`),alert(g)}else{console.error("\u274c Failed to sync collection to database:",p.error);let g=`Import completed!\n${h} cards updated locally`;g+=`\nDatabase sync failed: ${p.error}`,f>0&&(g+=`\n${f} import errors encountered`),alert(g)}}catch(p){console.error("\u274c Error during bulk sync:",p);let g=`Import completed!\n${h} cards updated locally`;g+="\nDatabase sync failed - please try again",f>0&&(g+=`\n${f} import errors encountered`),alert(g)}else{let p=`Import completed!\n${h} cards updated`;f>0&&(p+=`\n${f} errors encountered`),alert(p)}}catch(c){console.error("Failed to import collection:",c),alert("Failed to import collection. Please check the CSV file format.")}});return function(l){return a.apply(this,arguments)}}(),s.readAsText(i)}}parseCSVLine(r){const o=[];let i="",s=!1;for(let a=0;a<r.length;a++){const l=r[a];'"'===l?s=!s:","!==l||s?i+=l:(o.push(i),i="")}return o.push(i),o}getCardImageUrl(r){return this.imageService.getCardImageUrl(r)}getCardDisplayName(r){return`${r.set}-${r.number} \u2013 ${r.label.eng}`}onImageError(r,o){console.error("\u274c Image failed to load:",o.imageName),r.target.src=this.imageService.getPlaceholderImageUrl()}getGroupedCards(){const r={};return this.filteredCards.forEach(o=>{const i=o.set;r[i]||(r[i]=[]),r[i].push(o)}),Object.keys(r).sort((o,i)=>{const s=o.match(/^([A-Z]+)(\d+)([a-z]*)$/),a=i.match(/^([A-Z]+)(\d+)([a-z]*)$/);if(s&&a){if(s[1]!==a[1])return s[1].localeCompare(a[1]);const l=parseInt(s[2]),c=parseInt(a[2]);return l!==c?l-c:(s[3]||"").localeCompare(a[3]||"")}return o.localeCompare(i)}).map(o=>({groupTitle:o,cards:r[o].sort((i,s)=>i.number!==s.number?i.number-s.number:i.label.eng.localeCompare(s.label.eng))}))}getGroupDisplayName(r,o){const i=this.getSetName(r);return i&&i!==r?`${r} - ${i}`:`Set ${r}`}};let t=e;return e.\u0275fac=function(o){return new(o||e)(x(tD),x(nD),x(PV),x(Ki),x(_t),x(bi),x(UD))},e.\u0275cmp=jr({type:e,selectors:[["app-card-collection"]],decls:44,vars:13,consts:[[1,"collection-container"],[1,"collection-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","import-btn"],["type","file","accept",".csv","hidden","",3,"change"],["class","sync-progress",4,"ngIf"],[1,"filters-section"],[1,"search-container"],[1,"search-box"],["type","text","placeholder","\u{1f50d} Search Pokemon cards...",1,"search-input",3,"ngModel","ngModelChange","input"],[1,"filter-controls"],[1,"filter-group"],[1,"filter-label"],[1,"filter-select",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["class","filter-dependency",4,"ngIf"],[1,"filter-actions"],[1,"btn","btn-outline",3,"click"],[1,"btn-icon"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","cards-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"sync-progress"],[1,"sync-message"],[1,"sync-icon"],[1,"sync-text"],[1,"sync-title"],["class","sync-count",4,"ngIf"],[1,"sync-count"],[3,"value"],[1,"filter-dependency"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"btn","btn-primary",3,"click"],[1,"cards-container"],["class","card-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-group"],[1,"group-header"],[1,"group-title"],[1,"group-stats"],[1,"group-count"],[1,"cards-grid"],["class","card-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-item"],[1,"card-image"],["loading","lazy",1,"pokemon-card-img",3,"src","alt","error"],[1,"card-info"],[1,"card-title"],[1,"ownership-controls"],[1,"count-btn","decrease",3,"disabled","click"],[1,"count"],[1,"count-btn","increase",3,"click"],[1,"empty-state"],[1,"empty-icon"]],template:function(o,i){1&o&&(E(0,"div",0)(1,"div",1)(2,"button",2),de("click",function(){return i.exportCollection()}),A(3," \u{1f4e4} Export Collection "),w(),E(4,"label",3),A(5," \u{1f4e5} Import Collection "),E(6,"input",4),de("change",function(a){return i.importCollection(a)}),w()()(),Ie(7,kV,8,2,"div",5),E(8,"div",6)(9,"div",7)(10,"div",8)(11,"input",9),de("ngModelChange",function(a){return i.searchTerm=a})("input",function(){return i.onSearchChange()}),w()()(),E(12,"div",10)(13,"div",11)(14,"label",12),A(15,"Set"),w(),E(16,"select",13),de("ngModelChange",function(a){return i.selectedSet=a})("change",function(){return i.onSetChange()}),E(17,"option",14),A(18,"All Sets"),w(),Ie(19,NV,2,3,"option",15),w()(),E(20,"div",11)(21,"label",12),A(22,"Rarity"),w(),E(23,"select",13),de("ngModelChange",function(a){return i.selectedRarity=a})("change",function(){return i.onFilterChange()}),E(24,"option",14),A(25,"All Rarities"),w(),Ie(26,FV,2,2,"option",15),w()(),E(27,"div",11)(28,"label",12),A(29," Pack "),Ie(30,LV,2,1,"span",16),w(),E(31,"select",13),de("ngModelChange",function(a){return i.selectedPack=a})("change",function(){return i.onFilterChange()}),E(32,"option",14),A(33,"All Packs"),w(),Ie(34,jV,2,2,"option",15),w()(),E(35,"div",17)(36,"button",18),de("click",function(){return i.clearFilters()}),E(37,"span",19),A(38,"\u{1f5d1}\ufe0f"),w(),A(39," Clear Filters "),w()()()(),Ie(40,VV,4,0,"div",20),Ie(41,UV,5,1,"div",21),Ie(42,HV,2,2,"div",22),Ie(43,zV,9,0,"div",23),w()),2&o&&(V(7),te("ngIf",i.syncingCards),V(4),te("ngModel",i.searchTerm),V(5),te("ngModel",i.selectedSet),V(3),te("ngForOf",i.availableSets),V(4),te("ngModel",i.selectedRarity),V(3),te("ngForOf",i.availableRaritySymbols),V(4),te("ngIf","all"!==i.selectedSet),V(1),te("ngModel",i.selectedPack),V(3),te("ngForOf",i.availablePacks),V(6),te("ngIf",i.loading),V(1),te("ngIf",i.error),V(1),te("ngIf",!i.loading&&!i.error),V(1),te("ngIf",!i.loading&&!i.error&&0===i.getGroupedCards().length))},dependencies:[Lh,Di,Aw,Ow,Si,hc,nc,ea],styles:['.collection-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:#000;min-height:100vh;color:#fff}.sync-progress[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a4d3a 0%,#0f2d1f 100%);border:1px solid #28a745;border-radius:8px;padding:15px 20px;margin-bottom:20px;box-shadow:0 2px 10px #28a74533}.sync-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.sync-icon[_ngcontent-%COMP%]{font-size:20px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.sync-text[_ngcontent-%COMP%]{flex:1}.sync-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#28a745;margin-bottom:2px}.sync-count[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.collection-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #444;border-radius:6px;background-color:#333;color:#fff;cursor:pointer;font-size:14px;transition:all .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#444;border-color:#555}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.btn-outline-small[_ngcontent-%COMP%]{padding:4px 12px;border:1px solid #666;border-radius:4px;background-color:transparent;color:#ccc;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-outline-small[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;color:#fff}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d;border:1px solid #404040}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:400px;margin:0 auto}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #444;border-radius:25px;background-color:#333;color:#fff;font-size:16px;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 10px #007bff4d}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ccc;text-transform:uppercase;letter-spacing:.5px}.filter-dependency[_ngcontent-%COMP%]{font-size:11px;color:#007bff;font-weight:400;text-transform:none;font-style:italic}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #444;border-radius:8px;background-color:#333;color:#fff;font-size:14px;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff33}.filter-select[_ngcontent-%COMP%]:hover{border-color:#555;background-color:#3a3a3a}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.btn-icon[_ngcontent-%COMP%]{margin-right:6px}.results-info[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:12px 20px;border-radius:8px;text-align:center;border:1px solid #333}.results-text[_ngcontent-%COMP%]{color:#ccc;font-size:14px;font-weight:500}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #333;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.cards-container[_ngcontent-%COMP%]{width:100%}.card-group[_ngcontent-%COMP%]{margin-bottom:40px}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:15px 0;border-bottom:2px solid #333;flex-wrap:wrap;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin:0;text-shadow:1px 1px 2px rgba(0,0,0,.5);flex:1;min-width:300px;position:relative;padding-left:30px;line-height:1.3}.group-title[_ngcontent-%COMP%]:before{content:"\\1f4cb";position:absolute;left:0;top:50%;transform:translateY(-50%);font-size:1.2rem}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-shrink:0}.group-count[_ngcontent-%COMP%]{color:#ccc;font-size:14px;padding:4px 8px;background-color:#333;border-radius:4px;white-space:nowrap}@media (max-width: 768px){.group-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.3rem;min-width:unset;padding-left:25px;line-height:1.2}.group-title[_ngcontent-%COMP%]:before{font-size:1rem}.group-stats[_ngcontent-%COMP%]{align-self:flex-end}}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:20px;padding:20px 0}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:transparent;border-radius:8px;overflow:hidden;transition:transform .2s ease}.card-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2/3;overflow:hidden;border-radius:8px;background:transparent}.pokemon-card-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center;border-radius:8px;transition:transform .3s ease,opacity .3s ease;background-color:#222;min-height:200px}.pokemon-card-img[_ngcontent-%COMP%]:not([src]){opacity:.5;background:linear-gradient(45deg,#333,#555,#333);background-size:200% 200%;animation:_ngcontent-%COMP%_loading-shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loading-shimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.pokemon-card-img.no-quantity[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5);transition:filter .3s ease,transform .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .pokemon-card-img.no-quantity[_ngcontent-%COMP%]{filter:grayscale(0%) opacity(.8)}.card-item.no-quantity[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.9}.card-item.no-quantity[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#888;transition:color .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%]{color:#bbb}.card-item.no-quantity[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#888;transition:color .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .count[_ngcontent-%COMP%]{color:#bbb}.card-info[_ngcontent-%COMP%]{padding:10px 0;text-align:center}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ownership-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.count-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #555;border-radius:4px;background-color:#444;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;transition:all .2s ease}.count-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#555;border-color:#666}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.count-btn.decrease[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;border-color:#dc3545}.count-btn.increase[_ngcontent-%COMP%]:hover{background-color:#28a745;border-color:#28a745}.count[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#fff;min-width:20px;text-align:center}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}@media (max-width: 1200px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:15px}}@media (max-width: 768px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}.collection-container[_ngcontent-%COMP%]{padding:15px}.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.title-section[_ngcontent-%COMP%]{align-items:center}.collection-title[_ngcontent-%COMP%]{font-size:2rem}.collection-stats[_ngcontent-%COMP%]{gap:20px;font-size:.9rem}}@media (max-width: 480px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.card-title[_ngcontent-%COMP%]{font-size:12px}.count-btn[_ngcontent-%COMP%]{width:20px;height:20px;font-size:12px}}.pokemon-card-img.lazy-loading[_ngcontent-%COMP%]{opacity:.6;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.pokemon-card-img.lazy-loaded[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}.pokemon-card-img.lazy-error[_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 768px){.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.search-box[_ngcontent-%COMP%]{max-width:100%}.filters-section[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 480px){.filters-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.filter-label[_ngcontent-%COMP%]{font-size:12px}}'],changeDetection:0}),t})();function qV(t,e){if(1&t&&(E(0,"div",19),A(1),w()),2&t){const n=ze();V(1),nt(" ",n.error," ")}}function WV(t,e){1&t&&Rn(0,"span",20)}function KV(t,e){1&t&&(E(0,"a",11),A(1," \u{1f527} Admin "),w())}function YV(t,e){if(1&t){const n=As();E(0,"div",12)(1,"span",13),A(2),w(),E(3,"button",14),de("click",function(){return lo(n),co(ze().signOut())}),A(4,"Sign Out"),w()()}if(2&t){const n=ze();V(2),nt("\u{1f464} ",n.currentUser.username,"")}}function ZV(t,e){if(1&t&&(E(0,"div",20),A(1),w()),2&t){const n=ze();Dr("success","success"===n.messageType)("error","error"===n.messageType),V(1),nt(" ",n.message," ")}}const XV=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:(()=>{const e=class{constructor(r,o,i){this.supabaseService=r,this.router=o,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/collection"}ngOnInit(){this.supabaseService.isSignedIn()?this.router.navigate([this.returnUrl]):this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/collection"}get isFormValid(){return this.username.trim().length>0&&this.password.trim().length>0}onSubmit(){var r=this;return m(function*(){if(r.isFormValid){r.loading=!0,r.error="";try{const{user:o,error:i}=yield r.supabaseService.signIn(r.username.trim(),r.password.trim());i?(r.error=i,i.includes("Please wait a moment")&&(r.error+=" This usually resolves itself quickly.")):o&&r.router.navigate([r.returnUrl])}catch(o){if(console.error("Sign in error:",o),o&&"object"==typeof o&&"message"in o){const i=o.message;r.error=i.includes("NavigatorLockAcquireTimeoutError")||i.includes("lock")?"Please wait a moment and try signing in again.":"An unexpected error occurred"}else r.error="An unexpected error occurred"}finally{r.loading=!1}}else r.error="Please enter both username and password"})()}onUsernameChange(){this.error=""}onPasswordChange(){this.error=""}};let t=e;return e.\u0275fac=function(o){return new(o||e)(x(Ki),x(_t),x(xo))},e.\u0275cmp=jr({type:e,selectors:[["app-signin"]],decls:26,vars:8,consts:[[1,"signin-container"],[1,"signin-card"],[1,"signin-header"],[1,"signin-title"],[1,"signin-subtitle"],[1,"signin-form",3,"ngSubmit"],["signinForm","ngForm"],[1,"form-group"],["for","username"],["id","username","name","username","type","text","placeholder","Enter your username","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["usernameInput","ngModel"],["for","password"],["id","password","name","password","type","password","placeholder","Enter your password","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["passwordInput","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"signin-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"signin-footer"],[1,"invite-note"],[1,"error-message"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(E(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),A(4,"\u{1f0cf} Pokemon TCG Pocket"),w(),E(5,"p",4),A(6,"Collection Manager"),w()(),E(7,"form",5,6),de("ngSubmit",function(){return i.onSubmit()}),E(9,"div",7)(10,"label",8),A(11,"Username"),w(),E(12,"input",9,10),de("ngModelChange",function(a){return i.username=a})("input",function(){return i.onUsernameChange()}),w()(),E(14,"div",7)(15,"label",11),A(16,"Password"),w(),E(17,"input",12,13),de("ngModelChange",function(a){return i.password=a})("input",function(){return i.onPasswordChange()}),w()(),Ie(19,qV,2,1,"div",14),E(20,"button",15),Ie(21,WV,1,0,"span",16),A(22),w()(),E(23,"div",17)(24,"p",18),A(25," \u{1f4e7} This is an invite-only system. Contact your administrator if you need access. "),w()()()()),2&o){const s=function Vy(t){return function Bo(t,e){return t[e]}(function zE(){return le.lFrame.contextLView}(),Be+t)}(8);V(12),te("ngModel",i.username)("disabled",i.loading),V(5),te("ngModel",i.password)("disabled",i.loading),V(2),te("ngIf",i.error),V(1),te("disabled",i.loading||!s.valid),V(1),te("ngIf",i.loading),V(1),nt(" ",i.loading?"Signing In...":"Sign In"," ")}},dependencies:[Di,_w,Si,nc,iw,fc,ea,dc],styles:[".signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px}.signin-card[_ngcontent-%COMP%]{background:#333;border-radius:12px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 30px #0000004d;border:1px solid #444}.signin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signin-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.signin-subtitle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin:0;opacity:.8}.signin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #555;border-radius:6px;background-color:#444;color:#fff;font-size:16px;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;background-color:#555}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:#888}.error-message[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:10px 12px;border-radius:6px;font-size:14px;text-align:center;margin-top:-10px}.signin-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}.signin-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px)}.signin-btn[_ngcontent-%COMP%]:disabled{background-color:#666;cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signin-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.invite-note[_ngcontent-%COMP%]{color:#888;font-size:12px;line-height:1.4;margin:0;padding:15px;background-color:#2a2a2a;border-radius:6px;border-left:3px solid #007bff}@media (max-width: 480px){.signin-container[_ngcontent-%COMP%]{padding:10px}.signin-card[_ngcontent-%COMP%]{padding:30px 20px}.signin-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),t})()},{path:"",component:(()=>{const e=class{constructor(r,o){this.supabaseService=r,this.router=o,this.currentUser=null}ngOnInit(){this.supabaseService.currentUser$.subscribe(r=>{this.currentUser=r})}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}};let t=e;return e.\u0275fac=function(o){return new(o||e)(x(Ki),x(_t))},e.\u0275cmp=jr({type:e,selectors:[["app-main-layout"]],decls:16,vars:2,consts:[[1,"app-layout"],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],[1,"nav-center"],[1,"nav-links"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],["routerLink","/collection","routerLinkActive","active",1,"nav-link"],["routerLink","/admin","routerLinkActive","active","class","nav-link admin-link",4,"ngIf"],["class","nav-user",4,"ngIf"],[1,"main-content"],["routerLink","/admin","routerLinkActive","active",1,"nav-link","admin-link"],[1,"nav-user"],[1,"username"],[1,"btn-signout",3,"click"]],template:function(o,i){1&o&&(E(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"h2"),A(5,"Pokemon TCG Pocket Collector"),w()(),E(6,"div",4)(7,"div",5)(8,"a",6),A(9," \u{1f4ca} Dashboard "),w(),E(10,"a",7),A(11," \u{1f5c2}\ufe0f Collection "),w(),Ie(12,KV,2,0,"a",8),w()(),Ie(13,YV,5,1,"div",9),w()(),E(14,"main",10),Rn(15,"router-outlet"),w()()),2&o&&(V(12),te("ngIf","admin"===(null==i.currentUser?null:i.currentUser.role)),V(1),te("ngIf",i.currentUser))},dependencies:[Di,Ic,Lc,G0],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#000}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:0 20px;box-shadow:0 2px 10px #0000001a}.nav-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:15px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff}.nav-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;border-radius:5px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:0 2px 5px #0003}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.username[_ngcontent-%COMP%]{color:#f0f0f0;font-size:14px;font-weight:500}.btn-signout[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background-color:transparent;color:#fff;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-signout[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#000}@media (max-width: 768px){.nav-container[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.nav-center[_ngcontent-%COMP%]{order:3}.nav-user[_ngcontent-%COMP%]{order:2}.nav-links[_ngcontent-%COMP%]{gap:15px}.nav-link[_ngcontent-%COMP%]{padding:8px 15px;font-size:14px}}"]}),t})(),canActivate:[(()=>{const e=class{constructor(r,o){this.supabaseService=r,this.router=o}canActivate(r,o){const i=this.supabaseService.isSignedIn(),s=this.supabaseService.getCurrentUser();return!(!i||!s)||(this.router.navigate(["/signin"],{queryParams:{returnUrl:o.url}}),!1)}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(Ki),B(_t))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"}),t})()],children:[{path:"dashboard",component:OV},{path:"collection",component:GV},{path:"admin",component:(()=>{const e=class{constructor(r,o,i,s){this.supabaseService=r,this.router=o,this.http=i,this.cdr=s,this.currentUser=null,this.cardsJson="",this.rarityJson="",this.setsJson="",this.loadingCards=!1,this.loadingRarity=!1,this.loadingSets=!1,this.message="",this.messageType=""}ngOnInit(){this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser?"admin"===this.currentUser.role?this.loadAllJsonFiles():this.router.navigate(["/collection"]):this.router.navigate(["/signin"])}loadAllJsonFiles(){var r=this;return m(function*(){yield Promise.all([r.loadCardsJson(),r.loadRarityJson(),r.loadSetsJson()])})()}loadCardsJson(){var r=this;return m(function*(){r.loadingCards=!0,r.cdr.detectChanges();try{const o=yield r.http.get("/assets/cards/cards.json",{responseType:"text"}).toPromise();r.cardsJson=o||"",r.showMessage("Cards JSON loaded successfully","success")}catch(o){console.error("Error loading cards.json:",o),r.showMessage("Error loading cards.json","error"),r.cardsJson="[]"}finally{r.loadingCards=!1,r.cdr.detectChanges()}})()}loadRarityJson(){var r=this;return m(function*(){r.loadingRarity=!0,r.cdr.detectChanges();try{const o=yield r.http.get("/assets/cards/rarity.json",{responseType:"text"}).toPromise();r.rarityJson=o||"",r.showMessage("Rarity JSON loaded successfully","success")}catch(o){console.error("Error loading rarity.json:",o),r.showMessage("Error loading rarity.json","error"),r.rarityJson="{}"}finally{r.loadingRarity=!1,r.cdr.detectChanges()}})()}loadSetsJson(){var r=this;return m(function*(){r.loadingSets=!0,r.cdr.detectChanges();try{const o=yield r.http.get("/assets/cards/sets.json",{responseType:"text"}).toPromise();r.setsJson=o||"",r.showMessage("Sets JSON loaded successfully","success")}catch(o){console.error("Error loading sets.json:",o),r.showMessage("Error loading sets.json","error"),r.setsJson="[]"}finally{r.loadingSets=!1,r.cdr.detectChanges()}})()}downloadCardsJson(){this.downloadFile(this.cardsJson,"cards.json","application/json")}downloadRarityJson(){this.downloadFile(this.rarityJson,"rarity.json","application/json")}downloadSetsJson(){this.downloadFile(this.setsJson,"sets.json","application/json")}copyCardsToClipboard(){this.validateJson(this.cardsJson)?this.copyToClipboard(this.cardsJson,"Cards JSON copied to clipboard"):this.showMessage("Invalid JSON format for cards","error")}copyRarityToClipboard(){this.validateJson(this.rarityJson)?this.copyToClipboard(this.rarityJson,"Rarity JSON copied to clipboard"):this.showMessage("Invalid JSON format for rarity","error")}copySetsToClipboard(){this.validateJson(this.setsJson)?this.copyToClipboard(this.setsJson,"Sets JSON copied to clipboard"):this.showMessage("Invalid JSON format for sets","error")}validateJson(r){try{return JSON.parse(r),!0}catch{return!1}}copyToClipboard(r,o){navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(r).then(()=>{this.showMessage(o,"success")}).catch(()=>{this.fallbackCopyToClipboard(r,o)}):this.fallbackCopyToClipboard(r,o)}fallbackCopyToClipboard(r,o){const i=document.createElement("textarea");i.value=r,i.style.position="fixed",i.style.left="-999999px",i.style.top="-999999px",document.body.appendChild(i),i.focus(),i.select();try{document.execCommand("copy"),this.showMessage(o,"success")}catch{this.showMessage("Failed to copy to clipboard","error")}finally{document.body.removeChild(i)}}downloadFile(r,o,i){const s=new Blob([r],{type:i}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download=o,a.click(),URL.revokeObjectURL(a.href),this.showMessage(`${o} downloaded successfully`,"success")}showMessage(r,o){this.message=r,this.messageType=o,this.cdr.detectChanges(),setTimeout(()=>{this.message="",this.messageType="",this.cdr.detectChanges()},3e3)}formatJson(r){try{const o=JSON.parse(r),i=JSON.stringify(o,null,2);r===this.cardsJson?this.cardsJson=i:r===this.rarityJson?this.rarityJson=i:r===this.setsJson&&(this.setsJson=i),this.cdr.detectChanges(),this.showMessage("JSON formatted successfully","success")}catch{this.showMessage("Invalid JSON format","error")}}};let t=e;return e.\u0275fac=function(o){return new(o||e)(x(Ki),x(_t),x(bo),x(bi))},e.\u0275cmp=jr({type:e,selectors:[["app-admin"]],decls:119,vars:15,consts:[[1,"admin-container"],[1,"user-info"],[1,"role-badge"],["class","message",3,"success","error",4,"ngIf"],[1,"json-management"],[1,"json-section"],[1,"json-header"],[1,"json-actions"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-info",3,"click"],[1,"json-editor"],["placeholder","Cards JSON content will appear here...",1,"json-textarea",3,"ngModel","readonly","ngModelChange"],["placeholder","Rarity JSON content will appear here...",1,"json-textarea",3,"ngModel","readonly","ngModelChange"],["placeholder","Sets JSON content will appear here...",1,"json-textarea",3,"ngModel","readonly","ngModelChange"],[1,"instructions"],[1,"workflow-steps"],[1,"workflow-note"],[1,"warning"],[1,"message"]],template:function(o,i){1&o&&(E(0,"div",0)(1,"h1"),A(2,"\u{1f527} Admin Panel"),w(),E(3,"div",1)(4,"span"),A(5),w(),E(6,"span",2),A(7),w()(),Ie(8,ZV,2,5,"div",3),E(9,"div",4)(10,"h2"),A(11,"\u{1f4c1} JSON File Management"),w(),E(12,"div",5)(13,"div",6)(14,"h3"),A(15,"\u{1f0cf} Cards JSON"),w(),E(16,"div",7)(17,"button",8),de("click",function(){return i.loadCardsJson()}),A(18),w(),E(19,"button",9),de("click",function(){return i.downloadCardsJson()}),A(20," \u{1f4e5} Download "),w(),E(21,"button",10),de("click",function(){return i.formatJson(i.cardsJson)}),A(22," \u2728 Format "),w(),E(23,"button",11),de("click",function(){return i.copyCardsToClipboard()}),A(24," \ufffd Copy "),w()()(),E(25,"div",12)(26,"textarea",13),de("ngModelChange",function(a){return i.cardsJson=a}),A(27,"        "),w()()(),E(28,"div",5)(29,"div",6)(30,"h3"),A(31,"\u2b50 Rarity JSON"),w(),E(32,"div",7)(33,"button",8),de("click",function(){return i.loadRarityJson()}),A(34),w(),E(35,"button",9),de("click",function(){return i.downloadRarityJson()}),A(36," \u{1f4e5} Download "),w(),E(37,"button",10),de("click",function(){return i.formatJson(i.rarityJson)}),A(38," \u2728 Format "),w(),E(39,"button",11),de("click",function(){return i.copyRarityToClipboard()}),A(40," \ufffd Copy "),w()()(),E(41,"div",12)(42,"textarea",14),de("ngModelChange",function(a){return i.rarityJson=a}),A(43,"        "),w()()(),E(44,"div",5)(45,"div",6)(46,"h3"),A(47,"\u{1f4e6} Sets JSON"),w(),E(48,"div",7)(49,"button",8),de("click",function(){return i.loadSetsJson()}),A(50),w(),E(51,"button",9),de("click",function(){return i.downloadSetsJson()}),A(52," \u{1f4e5} Download "),w(),E(53,"button",10),de("click",function(){return i.formatJson(i.setsJson)}),A(54," \u2728 Format "),w(),E(55,"button",11),de("click",function(){return i.copySetsToClipboard()}),A(56," \ufffd Copy "),w()()(),E(57,"div",12)(58,"textarea",15),de("ngModelChange",function(a){return i.setsJson=a}),A(59,"        "),w()()()(),E(60,"div",16)(61,"h3"),A(62,"\u{1f4cb} GitHub Pages Deployment Workflow"),w(),E(63,"div",17)(64,"h4"),A(65,"\u{1f527} Editing JSON Files:"),w(),E(66,"ol")(67,"li")(68,"strong"),A(69,"\u{1f4e5} Download:"),w(),A(70," Download current JSON files to your computer"),w(),E(71,"li")(72,"strong"),A(73,"\u270f\ufe0f Edit:"),w(),A(74," Modify the JSON content in the text areas above"),w(),E(75,"li")(76,"strong"),A(77,"\u2728 Format:"),w(),A(78," Use Format button for proper JSON indentation"),w(),E(79,"li")(80,"strong"),A(81,"\u{1f4cb} Copy:"),w(),A(82," Copy formatted JSON to clipboard for easy pasting"),w()(),E(83,"h4"),A(84,"\u{1f680} Deploying Changes:"),w(),E(85,"ol")(86,"li")(87,"strong"),A(88,"\u{1f4be} Save Files:"),w(),A(89," Replace JSON files in your local "),E(90,"code"),A(91,"src/assets/cards/"),w(),A(92," folder"),w(),E(93,"li")(94,"strong"),A(95,"\u{1f4dd} Commit:"),w(),A(96," Add and commit changes to your Git repository"),w(),E(97,"li")(98,"strong"),A(99,"\u2b06\ufe0f Push:"),w(),A(100," Push changes to GitHub main/master branch"),w(),E(101,"li")(102,"strong"),A(103,"\u{1f504} Wait:"),w(),A(104," GitHub Pages will automatically rebuild and deploy"),w(),E(105,"li")(106,"strong"),A(107,"\u2705 Live:"),w(),A(108," Changes will be live in 1-5 minutes"),w()()(),E(109,"div",18),A(110," \u{1f4a1} "),E(111,"strong"),A(112,"Pro Tip:"),w(),A(113," Always validate your JSON before deploying to avoid breaking the application! "),w(),E(114,"div",19),A(115," \u26a0\ufe0f "),E(116,"strong"),A(117,"GitHub Pages Limitation:"),w(),A(118," JSON files cannot be updated directly from the web interface. Manual file replacement and deployment is required for changes to take effect. "),w()()()),2&o&&(V(5),nt("Welcome, ",null==i.currentUser?null:i.currentUser.username,""),V(2),Fn(null==i.currentUser?null:i.currentUser.role),V(1),te("ngIf",i.message),V(9),te("disabled",i.loadingCards),V(1),nt(" ",i.loadingCards?"\u23f3 Loading...":"\u{1f504} Reload"," "),V(8),te("ngModel",i.cardsJson)("readonly",i.loadingCards),V(7),te("disabled",i.loadingRarity),V(1),nt(" ",i.loadingRarity?"\u23f3 Loading...":"\u{1f504} Reload"," "),V(8),te("ngModel",i.rarityJson)("readonly",i.loadingRarity),V(7),te("disabled",i.loadingSets),V(1),nt(" ",i.loadingSets?"\u23f3 Loading...":"\u{1f504} Reload"," "),V(8),te("ngModel",i.setsJson)("readonly",i.loadingSets))},dependencies:[Di,Si,nc,ea],styles:[".admin-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:#000;min-height:100vh;color:#fff}.admin-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;background:linear-gradient(45deg,#ff6b6b,#4ecdc4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-size:2.5rem;font-weight:700}.user-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:15px;margin-bottom:30px;padding:15px;background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);border-radius:10px;border:1px solid #404040}.role-badge[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff6b6b,#ff8787);color:#fff;padding:5px 12px;border-radius:20px;font-size:12px;font-weight:700;text-transform:uppercase}.message[_ngcontent-%COMP%]{padding:12px 20px;margin-bottom:20px;border-radius:8px;text-align:center;font-weight:500}.message.success[_ngcontent-%COMP%]{background-color:#1a4d3a;border:1px solid #28a745;color:#28a745}.message.error[_ngcontent-%COMP%]{background-color:#4d1a1a;border:1px solid #dc3545;color:#dc3545}.json-management[_ngcontent-%COMP%]{margin-bottom:40px}.json-management[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center;color:#4ecdc4}.json-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);border-radius:12px;border:1px solid #404040;margin-bottom:30px;overflow:hidden}.json-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:linear-gradient(135deg,#333 0%,#2a2a2a 100%);border-bottom:1px solid #404040}.json-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.2rem}.json-actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;display:inline-flex;align-items:center;gap:5px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#0056b3,#004085);transform:translateY(-1px)}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#6c757d,#5a6268);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#5a6268,#495057);transform:translateY(-1px)}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#1e7e34);color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#1e7e34,#155724);transform:translateY(-1px)}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(45deg,#17a2b8,#138496);color:#fff}.btn-info[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#138496,#117a8b);transform:translateY(-1px)}.json-editor[_ngcontent-%COMP%]{padding:0}.json-textarea[_ngcontent-%COMP%]{width:100%;min-height:300px;max-height:500px;padding:20px;background-color:#1a1a1a;color:#e0e0e0;border:none;font-family:Courier New,monospace;font-size:14px;line-height:1.5;resize:vertical;outline:none;box-sizing:border-box}.json-textarea[_ngcontent-%COMP%]:focus{background-color:#222}.json-textarea[_ngcontent-%COMP%]:readonly{background-color:#0f0f0f;color:#999}.instructions[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);border-radius:12px;border:1px solid #404040;padding:25px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;color:#4ecdc4}.instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:20px}.instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;line-height:1.5}.instructions[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.workflow-steps[_ngcontent-%COMP%]{margin-bottom:25px}.workflow-steps[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#4ecdc4;margin-bottom:15px;margin-top:20px}.workflow-steps[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin-bottom:20px;padding-left:20px}.workflow-steps[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;line-height:1.6}.workflow-steps[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 6px;border-radius:4px;color:#e0e0e0;font-family:Courier New,monospace;font-size:12px}.workflow-note[_ngcontent-%COMP%]{background-color:#1a4d3a;border:1px solid #28a745;color:#28a745;padding:15px;border-radius:8px;font-size:14px;margin-bottom:15px}.warning[_ngcontent-%COMP%]{background-color:#4d3319;border:1px solid #ffc107;color:#ffc107;padding:15px;border-radius:8px;font-size:14px}@media (max-width: 768px){.admin-container[_ngcontent-%COMP%]{padding:15px}.json-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.json-actions[_ngcontent-%COMP%]{justify-content:center}.btn[_ngcontent-%COMP%]{flex:1;justify-content:center}.admin-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}"],changeDetection:0}),t})()}]},{path:"**",redirectTo:"/signin"}];let eU=(()=>{const e=class{};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=xn({type:e}),e.\u0275inj=mn({imports:[Zf.forRoot(XV),Zf]}),t})(),tU=(()=>{const e=class{};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=xn({type:e,bootstrap:[XL]}),e.\u0275inj=mn({imports:[GR,bk,MN,Zf,eU]}),t})();zR().bootstrapModule(tU).catch(t=>console.error(t))},397:(Dt,se,J)=>{"use strict";J.r(se),J.d(se,{Headers:()=>M,Request:()=>I,Response:()=>U,default:()=>Ve,fetch:()=>Te});var ge=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const Te=ge.fetch,Ve=ge.fetch.bind(ge),M=ge.Headers,I=ge.Request,U=ge.Response},369:(Dt,se,J)=>{"use strict";var Q=J(156).default;Object.defineProperty(se,"__esModule",{value:!0});const ge=J(582),Te=ge.__importDefault(J(397)),Ve=ge.__importDefault(J(839));se.default=class M{constructor(U){var z,K;this.shouldThrowOnError=!1,this.method=U.method,this.url=U.url,this.headers=new Headers(U.headers),this.schema=U.schema,this.body=U.body,this.shouldThrowOnError=null!==(z=U.shouldThrowOnError)&&void 0!==z&&z,this.signal=U.signal,this.isMaybeSingle=null!==(K=U.isMaybeSingle)&&void 0!==K&&K,this.fetch=U.fetch?U.fetch:typeof fetch>"u"?Te.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(U,z){return this.headers=new Headers(this.headers),this.headers.set(U,z),this}then(U,z){var K=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Ae=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var _e=Q(function*(Oe){var Xe,Lt,Et,qe;let et=null,bt=null,Gn=null,Gt=Oe.status,hn=Oe.statusText;if(Oe.ok){if("HEAD"!==K.method){const Nr=yield Oe.text();""===Nr||(bt="text/csv"===K.headers.get("Accept")||K.headers.get("Accept")&&null!==(Xe=K.headers.get("Accept"))&&void 0!==Xe&&Xe.includes("application/vnd.pgrst.plan+text")?Nr:JSON.parse(Nr))}const qt=null===(Lt=K.headers.get("Prefer"))||void 0===Lt?void 0:Lt.match(/count=(exact|planned|estimated)/),fn=null===(Et=Oe.headers.get("content-range"))||void 0===Et?void 0:Et.split("/");qt&&fn&&fn.length>1&&(Gn=parseInt(fn[1])),K.isMaybeSingle&&"GET"===K.method&&Array.isArray(bt)&&(bt.length>1?(et={code:"PGRST116",details:`Results contain ${bt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},bt=null,Gn=null,Gt=406,hn="Not Acceptable"):bt=1===bt.length?bt[0]:null)}else{const qt=yield Oe.text();try{et=JSON.parse(qt),Array.isArray(et)&&404===Oe.status&&(bt=[],et=null,Gt=200,hn="OK")}catch{404===Oe.status&&""===qt?(Gt=204,hn="No Content"):et={message:qt}}if(et&&K.isMaybeSingle&&!(null===(qe=et?.details)||void 0===qe)&&qe.includes("0 rows")&&(et=null,Gt=200,hn="OK"),et&&K.shouldThrowOnError)throw new Ve.default(et)}return{error:et,data:bt,count:Gn,status:Gt,statusText:hn}});return function(Oe){return _e.apply(this,arguments)}}());return this.shouldThrowOnError||(Ae=Ae.catch(_e=>{var Oe,Xe,Lt;return{error:{message:`${null!==(Oe=_e?.name)&&void 0!==Oe?Oe:"FetchError"}: ${_e?.message}`,details:`${null!==(Xe=_e?.stack)&&void 0!==Xe?Xe:""}`,hint:"",code:`${null!==(Lt=_e?.code)&&void 0!==Lt?Lt:""}`},data:null,count:null,status:0,statusText:""}})),Ae.then(U,z)}returns(){return this}overrideTypes(){return this}}},851:(Dt,se,J)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});const Q=J(582),ge=Q.__importDefault(J(241)),Te=Q.__importDefault(J(105));class Ve{constructor(I,{headers:U={},schema:z,fetch:K}={}){this.url=I,this.headers=new Headers(U),this.schemaName=z,this.fetch=K}from(I){const U=new URL(`${this.url}/${I}`);return new ge.default(U,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(I){return new Ve(this.url,{headers:this.headers,schema:I,fetch:this.fetch})}rpc(I,U={},{head:z=!1,get:K=!1,count:be}={}){var Ae;let _e;const Oe=new URL(`${this.url}/rpc/${I}`);let Xe;z||K?(_e=z?"HEAD":"GET",Object.entries(U).filter(([Et,qe])=>void 0!==qe).map(([Et,qe])=>[Et,Array.isArray(qe)?`{${qe.join(",")}}`:`${qe}`]).forEach(([Et,qe])=>{Oe.searchParams.append(Et,qe)})):(_e="POST",Xe=U);const Lt=new Headers(this.headers);return be&&Lt.set("Prefer",`count=${be}`),new Te.default({method:_e,url:Oe,headers:Lt,schema:this.schemaName,body:Xe,fetch:null!==(Ae=this.fetch)&&void 0!==Ae?Ae:fetch})}}se.default=Ve},839:(Dt,se)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});class J extends Error{constructor(ge){super(ge.message),this.name="PostgrestError",this.details=ge.details,this.hint=ge.hint,this.code=ge.code}}se.default=J},105:(Dt,se,J)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});const ge=J(582).__importDefault(J(594));se.default=class Te extends ge.default{eq(M,I){return this.url.searchParams.append(M,`eq.${I}`),this}neq(M,I){return this.url.searchParams.append(M,`neq.${I}`),this}gt(M,I){return this.url.searchParams.append(M,`gt.${I}`),this}gte(M,I){return this.url.searchParams.append(M,`gte.${I}`),this}lt(M,I){return this.url.searchParams.append(M,`lt.${I}`),this}lte(M,I){return this.url.searchParams.append(M,`lte.${I}`),this}like(M,I){return this.url.searchParams.append(M,`like.${I}`),this}likeAllOf(M,I){return this.url.searchParams.append(M,`like(all).{${I.join(",")}}`),this}likeAnyOf(M,I){return this.url.searchParams.append(M,`like(any).{${I.join(",")}}`),this}ilike(M,I){return this.url.searchParams.append(M,`ilike.${I}`),this}ilikeAllOf(M,I){return this.url.searchParams.append(M,`ilike(all).{${I.join(",")}}`),this}ilikeAnyOf(M,I){return this.url.searchParams.append(M,`ilike(any).{${I.join(",")}}`),this}is(M,I){return this.url.searchParams.append(M,`is.${I}`),this}in(M,I){const U=Array.from(new Set(I)).map(z=>"string"==typeof z&&new RegExp("[,()]").test(z)?`"${z}"`:`${z}`).join(",");return this.url.searchParams.append(M,`in.(${U})`),this}contains(M,I){return"string"==typeof I?this.url.searchParams.append(M,`cs.${I}`):Array.isArray(I)?this.url.searchParams.append(M,`cs.{${I.join(",")}}`):this.url.searchParams.append(M,`cs.${JSON.stringify(I)}`),this}containedBy(M,I){return"string"==typeof I?this.url.searchParams.append(M,`cd.${I}`):Array.isArray(I)?this.url.searchParams.append(M,`cd.{${I.join(",")}}`):this.url.searchParams.append(M,`cd.${JSON.stringify(I)}`),this}rangeGt(M,I){return this.url.searchParams.append(M,`sr.${I}`),this}rangeGte(M,I){return this.url.searchParams.append(M,`nxl.${I}`),this}rangeLt(M,I){return this.url.searchParams.append(M,`sl.${I}`),this}rangeLte(M,I){return this.url.searchParams.append(M,`nxr.${I}`),this}rangeAdjacent(M,I){return this.url.searchParams.append(M,`adj.${I}`),this}overlaps(M,I){return this.url.searchParams.append(M,"string"==typeof I?`ov.${I}`:`ov.{${I.join(",")}}`),this}textSearch(M,I,{config:U,type:z}={}){let K="";return"plain"===z?K="pl":"phrase"===z?K="ph":"websearch"===z&&(K="w"),this.url.searchParams.append(M,`${K}fts${void 0===U?"":`(${U})`}.${I}`),this}match(M){return Object.entries(M).forEach(([I,U])=>{this.url.searchParams.append(I,`eq.${U}`)}),this}not(M,I,U){return this.url.searchParams.append(M,`not.${I}.${U}`),this}or(M,{foreignTable:I,referencedTable:U=I}={}){return this.url.searchParams.append(U?`${U}.or`:"or",`(${M})`),this}filter(M,I,U){return this.url.searchParams.append(M,`${I}.${U}`),this}}},241:(Dt,se,J)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});const ge=J(582).__importDefault(J(105));se.default=class Te{constructor(M,{headers:I={},schema:U,fetch:z}){this.url=M,this.headers=new Headers(I),this.schema=U,this.fetch=z}select(M,I){const{head:U=!1,count:z}=I??{},K=U?"HEAD":"GET";let be=!1;const Ae=(M??"*").split("").map(_e=>/\s/.test(_e)&&!be?"":('"'===_e&&(be=!be),_e)).join("");return this.url.searchParams.set("select",Ae),z&&this.headers.append("Prefer",`count=${z}`),new ge.default({method:K,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(M,{count:I,defaultToNull:U=!0}={}){var z;if(I&&this.headers.append("Prefer",`count=${I}`),U||this.headers.append("Prefer","missing=default"),Array.isArray(M)){const be=M.reduce((Ae,_e)=>Ae.concat(Object.keys(_e)),[]);if(be.length>0){const Ae=[...new Set(be)].map(_e=>`"${_e}"`);this.url.searchParams.set("columns",Ae.join(","))}}return new ge.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:M,fetch:null!==(z=this.fetch)&&void 0!==z?z:fetch})}upsert(M,{onConflict:I,ignoreDuplicates:U=!1,count:z,defaultToNull:K=!0}={}){var be;if(this.headers.append("Prefer",`resolution=${U?"ignore":"merge"}-duplicates`),void 0!==I&&this.url.searchParams.set("on_conflict",I),z&&this.headers.append("Prefer",`count=${z}`),K||this.headers.append("Prefer","missing=default"),Array.isArray(M)){const _e=M.reduce((Oe,Xe)=>Oe.concat(Object.keys(Xe)),[]);if(_e.length>0){const Oe=[...new Set(_e)].map(Xe=>`"${Xe}"`);this.url.searchParams.set("columns",Oe.join(","))}}return new ge.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:M,fetch:null!==(be=this.fetch)&&void 0!==be?be:fetch})}update(M,{count:I}={}){var U;return I&&this.headers.append("Prefer",`count=${I}`),new ge.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:M,fetch:null!==(U=this.fetch)&&void 0!==U?U:fetch})}delete({count:M}={}){var I;return M&&this.headers.append("Prefer",`count=${M}`),new ge.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(I=this.fetch)&&void 0!==I?I:fetch})}}},594:(Dt,se,J)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});const ge=J(582).__importDefault(J(369));se.default=class Te extends ge.default{select(M){let I=!1;const U=(M??"*").split("").map(z=>/\s/.test(z)&&!I?"":('"'===z&&(I=!I),z)).join("");return this.url.searchParams.set("select",U),this.headers.append("Prefer","return=representation"),this}order(M,{ascending:I=!0,nullsFirst:U,foreignTable:z,referencedTable:K=z}={}){const be=K?`${K}.order`:"order",Ae=this.url.searchParams.get(be);return this.url.searchParams.set(be,`${Ae?`${Ae},`:""}${M}.${I?"asc":"desc"}${void 0===U?"":U?".nullsfirst":".nullslast"}`),this}limit(M,{foreignTable:I,referencedTable:U=I}={}){return this.url.searchParams.set(typeof U>"u"?"limit":`${U}.limit`,`${M}`),this}range(M,I,{foreignTable:U,referencedTable:z=U}={}){const be=typeof z>"u"?"limit":`${z}.limit`;return this.url.searchParams.set(typeof z>"u"?"offset":`${z}.offset`,`${M}`),this.url.searchParams.set(be,""+(I-M+1)),this}abortSignal(M){return this.signal=M,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:M=!1,verbose:I=!1,settings:U=!1,buffers:z=!1,wal:K=!1,format:be="text"}={}){var Ae;const _e=[M?"analyze":null,I?"verbose":null,U?"settings":null,z?"buffers":null,K?"wal":null].filter(Boolean).join("|"),Oe=null!==(Ae=this.headers.get("Accept"))&&void 0!==Ae?Ae:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${be}; for="${Oe}"; options=${_e};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(M){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${M}`),this}}},358:(Dt,se,J)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.PostgrestError=se.PostgrestBuilder=se.PostgrestTransformBuilder=se.PostgrestFilterBuilder=se.PostgrestQueryBuilder=se.PostgrestClient=void 0;const Q=J(582),ge=Q.__importDefault(J(851));se.PostgrestClient=ge.default;const Te=Q.__importDefault(J(241));se.PostgrestQueryBuilder=Te.default;const Ve=Q.__importDefault(J(105));se.PostgrestFilterBuilder=Ve.default;const M=Q.__importDefault(J(594));se.PostgrestTransformBuilder=M.default;const I=Q.__importDefault(J(369));se.PostgrestBuilder=I.default;const U=Q.__importDefault(J(839));se.PostgrestError=U.default,se.default={PostgrestClient:ge.default,PostgrestQueryBuilder:Te.default,PostgrestFilterBuilder:Ve.default,PostgrestTransformBuilder:M.default,PostgrestBuilder:I.default,PostgrestError:U.default}},156:Dt=>{function se(Q,ge,Te,Ve,M,I,U){try{var z=Q[I](U),K=z.value}catch(be){return void Te(be)}z.done?ge(K):Promise.resolve(K).then(Ve,M)}Dt.exports=function J(Q){return function(){var ge=this,Te=arguments;return new Promise(function(Ve,M){var I=Q.apply(ge,Te);function U(K){se(I,Ve,M,U,z,"next",K)}function z(K){se(I,Ve,M,U,z,"throw",K)}U(void 0)})}},Dt.exports.__esModule=!0,Dt.exports.default=Dt.exports},582:(Dt,se,J)=>{"use strict";J.r(se),J.d(se,{__addDisposableResource:()=>Ue,__assign:()=>Te,__asyncDelegator:()=>Yi,__asyncGenerator:()=>hn,__asyncValues:()=>qt,__await:()=>Gt,__awaiter:()=>_e,__classPrivateFieldGet:()=>qn,__classPrivateFieldIn:()=>Qi,__classPrivateFieldSet:()=>wa,__createBinding:()=>Xe,__decorate:()=>M,__disposeResources:()=>Ea,__esDecorate:()=>U,__exportStar:()=>Lt,__extends:()=>ge,__generator:()=>Oe,__importDefault:()=>ko,__importStar:()=>ba,__makeTemplateObject:()=>fn,__metadata:()=>Ae,__param:()=>I,__propKey:()=>K,__read:()=>qe,__rest:()=>Ve,__rewriteRelativeImportExtension:()=>Sa,__runInitializers:()=>z,__setFunctionName:()=>be,__spread:()=>et,__spreadArray:()=>Gn,__spreadArrays:()=>bt,__values:()=>Et,default:()=>Kc});var Q=function(_,D){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,b){S.__proto__=b}||function(S,b){for(var P in b)Object.prototype.hasOwnProperty.call(b,P)&&(S[P]=b[P])})(_,D)};function ge(_,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function S(){this.constructor=_}Q(_,D),_.prototype=null===D?Object.create(D):(S.prototype=D.prototype,new S)}var Te=function(){return Te=Object.assign||function(D){for(var S,b=1,P=arguments.length;b<P;b++)for(var L in S=arguments[b])Object.prototype.hasOwnProperty.call(S,L)&&(D[L]=S[L]);return D},Te.apply(this,arguments)};function Ve(_,D){var S={};for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&D.indexOf(b)<0&&(S[b]=_[b]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var P=0;for(b=Object.getOwnPropertySymbols(_);P<b.length;P++)D.indexOf(b[P])<0&&Object.prototype.propertyIsEnumerable.call(_,b[P])&&(S[b[P]]=_[b[P]])}return S}function M(_,D,S,b){var O,P=arguments.length,L=P<3?D:null===b?b=Object.getOwnPropertyDescriptor(D,S):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)L=Reflect.decorate(_,D,S,b);else for(var N=_.length-1;N>=0;N--)(O=_[N])&&(L=(P<3?O(L):P>3?O(D,S,L):O(D,S))||L);return P>3&&L&&Object.defineProperty(D,S,L),L}function I(_,D){return function(S,b){D(S,b,_)}}function U(_,D,S,b,P,L){function O(Wn){if(void 0!==Wn&&"function"!=typeof Wn)throw new TypeError("Function expected");return Wn}for(var gt,N=b.kind,wt="getter"===N?"get":"setter"===N?"set":"value",oe=!D&&_?b.static?_:_.prototype:null,He=D||(oe?Object.getOwnPropertyDescriptor(oe,b.name):{}),Fr=!1,ke=S.length-1;ke>=0;ke--){var Tt={};for(var Wt in b)Tt[Wt]="access"===Wt?{}:b[Wt];for(var Wt in b.access)Tt.access[Wt]=b.access[Wt];Tt.addInitializer=function(Wn){if(Fr)throw new TypeError("Cannot add initializers after decoration has completed");L.push(O(Wn||null))};var pn=(0,S[ke])("accessor"===N?{get:He.get,set:He.set}:He[wt],Tt);if("accessor"===N){if(void 0===pn)continue;if(null===pn||"object"!=typeof pn)throw new TypeError("Object expected");(gt=O(pn.get))&&(He.get=gt),(gt=O(pn.set))&&(He.set=gt),(gt=O(pn.init))&&P.unshift(gt)}else(gt=O(pn))&&("field"===N?P.unshift(gt):He[wt]=gt)}oe&&Object.defineProperty(oe,b.name,He),Fr=!0}function z(_,D,S){for(var b=arguments.length>2,P=0;P<D.length;P++)S=b?D[P].call(_,S):D[P].call(_);return b?S:void 0}function K(_){return"symbol"==typeof _?_:"".concat(_)}function be(_,D,S){return"symbol"==typeof D&&(D=D.description?"[".concat(D.description,"]"):""),Object.defineProperty(_,"name",{configurable:!0,value:S?"".concat(S," ",D):D})}function Ae(_,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(_,D)}function _e(_,D,S,b){return new(S||(S=Promise))(function(L,O){function N(He){try{oe(b.next(He))}catch(gt){O(gt)}}function wt(He){try{oe(b.throw(He))}catch(gt){O(gt)}}function oe(He){He.done?L(He.value):function P(L){return L instanceof S?L:new S(function(O){O(L)})}(He.value).then(N,wt)}oe((b=b.apply(_,D||[])).next())})}function Oe(_,D){var b,P,L,S={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]},O=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return O.next=N(0),O.throw=N(1),O.return=N(2),"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function N(oe){return function(He){return function wt(oe){if(b)throw new TypeError("Generator is already executing.");for(;O&&(O=0,oe[0]&&(S=0)),S;)try{if(b=1,P&&(L=2&oe[0]?P.return:oe[0]?P.throw||((L=P.return)&&L.call(P),0):P.next)&&!(L=L.call(P,oe[1])).done)return L;switch(P=0,L&&(oe=[2&oe[0],L.value]),oe[0]){case 0:case 1:L=oe;break;case 4:return S.label++,{value:oe[1],done:!1};case 5:S.label++,P=oe[1],oe=[0];continue;case 7:oe=S.ops.pop(),S.trys.pop();continue;default:if(!(L=(L=S.trys).length>0&&L[L.length-1])&&(6===oe[0]||2===oe[0])){S=0;continue}if(3===oe[0]&&(!L||oe[1]>L[0]&&oe[1]<L[3])){S.label=oe[1];break}if(6===oe[0]&&S.label<L[1]){S.label=L[1],L=oe;break}if(L&&S.label<L[2]){S.label=L[2],S.ops.push(oe);break}L[2]&&S.ops.pop(),S.trys.pop();continue}oe=D.call(_,S)}catch(He){oe=[6,He],P=0}finally{b=L=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,He])}}}var Xe=Object.create?function(_,D,S,b){void 0===b&&(b=S);var P=Object.getOwnPropertyDescriptor(D,S);(!P||("get"in P?!D.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return D[S]}}),Object.defineProperty(_,b,P)}:function(_,D,S,b){void 0===b&&(b=S),_[b]=D[S]};function Lt(_,D){for(var S in _)"default"!==S&&!Object.prototype.hasOwnProperty.call(D,S)&&Xe(D,_,S)}function Et(_){var D="function"==typeof Symbol&&Symbol.iterator,S=D&&_[D],b=0;if(S)return S.call(_);if(_&&"number"==typeof _.length)return{next:function(){return _&&b>=_.length&&(_=void 0),{value:_&&_[b++],done:!_}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function qe(_,D){var S="function"==typeof Symbol&&_[Symbol.iterator];if(!S)return _;var P,O,b=S.call(_),L=[];try{for(;(void 0===D||D-- >0)&&!(P=b.next()).done;)L.push(P.value)}catch(N){O={error:N}}finally{try{P&&!P.done&&(S=b.return)&&S.call(b)}finally{if(O)throw O.error}}return L}function et(){for(var _=[],D=0;D<arguments.length;D++)_=_.concat(qe(arguments[D]));return _}function bt(){for(var _=0,D=0,S=arguments.length;D<S;D++)_+=arguments[D].length;var b=Array(_),P=0;for(D=0;D<S;D++)for(var L=arguments[D],O=0,N=L.length;O<N;O++,P++)b[P]=L[O];return b}function Gn(_,D,S){if(S||2===arguments.length)for(var L,b=0,P=D.length;b<P;b++)(L||!(b in D))&&(L||(L=Array.prototype.slice.call(D,0,b)),L[b]=D[b]);return _.concat(L||Array.prototype.slice.call(D))}function Gt(_){return this instanceof Gt?(this.v=_,this):new Gt(_)}function hn(_,D,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,b=S.apply(_,D||[]),L=[];return P=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),N("next"),N("throw"),N("return",function O(ke){return function(Tt){return Promise.resolve(Tt).then(ke,gt)}}),P[Symbol.asyncIterator]=function(){return this},P;function N(ke,Tt){b[ke]&&(P[ke]=function(Wt){return new Promise(function(pn,Wn){L.push([ke,Wt,pn,Wn])>1||wt(ke,Wt)})},Tt&&(P[ke]=Tt(P[ke])))}function wt(ke,Tt){try{!function oe(ke){ke.value instanceof Gt?Promise.resolve(ke.value.v).then(He,gt):Fr(L[0][2],ke)}(b[ke](Tt))}catch(Wt){Fr(L[0][3],Wt)}}function He(ke){wt("next",ke)}function gt(ke){wt("throw",ke)}function Fr(ke,Tt){ke(Tt),L.shift(),L.length&&wt(L[0][0],L[0][1])}}function Yi(_){var D,S;return D={},b("next"),b("throw",function(P){throw P}),b("return"),D[Symbol.iterator]=function(){return this},D;function b(P,L){D[P]=_[P]?function(O){return(S=!S)?{value:Gt(_[P](O)),done:!1}:L?L(O):O}:L}}function qt(_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S,D=_[Symbol.asyncIterator];return D?D.call(_):(_=Et(_),S={},b("next"),b("throw"),b("return"),S[Symbol.asyncIterator]=function(){return this},S);function b(L){S[L]=_[L]&&function(O){return new Promise(function(N,wt){!function P(L,O,N,wt){Promise.resolve(wt).then(function(oe){L({value:oe,done:N})},O)}(N,wt,(O=_[L](O)).done,O.value)})}}}function fn(_,D){return Object.defineProperty?Object.defineProperty(_,"raw",{value:D}):_.raw=D,_}var Nr=Object.create?function(_,D){Object.defineProperty(_,"default",{enumerable:!0,value:D})}:function(_,D){_.default=D},io=function(_){return(io=Object.getOwnPropertyNames||function(D){var S=[];for(var b in D)Object.prototype.hasOwnProperty.call(D,b)&&(S[S.length]=b);return S})(_)};function ba(_){if(_&&_.__esModule)return _;var D={};if(null!=_)for(var S=io(_),b=0;b<S.length;b++)"default"!==S[b]&&Xe(D,_,S[b]);return Nr(D,_),D}function ko(_){return _&&_.__esModule?_:{default:_}}function qn(_,D,S,b){if("a"===S&&!b)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof D?_!==D||!b:!D.has(_))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===S?b:"a"===S?b.call(_):b?b.value:D.get(_)}function wa(_,D,S,b,P){if("m"===b)throw new TypeError("Private method is not writable");if("a"===b&&!P)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof D?_!==D||!P:!D.has(_))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===b?P.call(_,S):P?P.value=S:D.set(_,S),S}function Qi(_,D){if(null===D||"object"!=typeof D&&"function"!=typeof D)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof _?D===_:_.has(D)}function Ue(_,D,S){if(null!=D){if("object"!=typeof D&&"function"!=typeof D)throw new TypeError("Object expected.");var b,P;if(S){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");b=D[Symbol.asyncDispose]}if(void 0===b){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");b=D[Symbol.dispose],S&&(P=b)}if("function"!=typeof b)throw new TypeError("Object not disposable.");P&&(b=function(){try{P.call(this)}catch(L){return Promise.reject(L)}}),_.stack.push({value:D,dispose:b,async:S})}else S&&_.stack.push({async:!0});return D}var Da="function"==typeof SuppressedError?SuppressedError:function(_,D,S){var b=new Error(S);return b.name="SuppressedError",b.error=_,b.suppressed=D,b};function Ea(_){function D(L){_.error=_.hasError?new Da(L,_.error,"An error was suppressed during disposal."):L,_.hasError=!0}var S,b=0;return function P(){for(;S=_.stack.pop();)try{if(!S.async&&1===b)return b=0,_.stack.push(S),Promise.resolve().then(P);if(S.dispose){var L=S.dispose.call(S.value);if(S.async)return b|=2,Promise.resolve(L).then(P,function(O){return D(O),P()})}else b|=1}catch(O){D(O)}if(1===b)return _.hasError?Promise.reject(_.error):Promise.resolve();if(_.hasError)throw _.error}()}function Sa(_,D){return"string"==typeof _&&/^\.\.?\//.test(_)?_.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(S,b,P,L,O){return b?D?".jsx":".js":!P||L&&O?P+L+"."+O.toLowerCase()+"js":S}):_}const Kc={__extends:ge,__assign:Te,__rest:Ve,__decorate:M,__param:I,__esDecorate:U,__runInitializers:z,__propKey:K,__setFunctionName:be,__metadata:Ae,__awaiter:_e,__generator:Oe,__createBinding:Xe,__exportStar:Lt,__values:Et,__read:qe,__spread:et,__spreadArrays:bt,__spreadArray:Gn,__await:Gt,__asyncGenerator:hn,__asyncDelegator:Yi,__asyncValues:qt,__makeTemplateObject:fn,__importStar:ba,__importDefault:ko,__classPrivateFieldGet:qn,__classPrivateFieldSet:wa,__classPrivateFieldIn:Qi,__addDisposableResource:Ue,__disposeResources:Ea,__rewriteRelativeImportExtension:Sa}}},Dt=>{Dt(Dt.s=538)}]);