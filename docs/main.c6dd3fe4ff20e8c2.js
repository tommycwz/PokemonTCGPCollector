(self.webpackChunkPokemonTCGPCollector=self.webpackChunkPokemonTCGPCollector||[]).push([[179],{734:(Ot,he,ee)=>{"use strict";function re(t){return"function"==typeof t}function Ce(t){const e=t(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const je=Ce(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function qe(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class k{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const i of e)i.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(re(r))try{r()}catch(i){n=i instanceof je?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{Y(i)}catch(s){n=n??[],s instanceof je?n=[...n,...s.errors]:n.push(s)}}if(n)throw new je(n)}}add(n){var e;if(n&&n!==this)if(this.closed)Y(n);else{if(n instanceof k){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&qe(e,n)}remove(n){const{_finalizers:e}=this;e&&qe(e,n),n instanceof k&&n._removeParent(this)}}k.EMPTY=(()=>{const t=new k;return t.closed=!0,t})();const R=k.EMPTY;function q(t){return t instanceof k||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function Y(t){re(t)?t():t.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Te={setTimeout(t,n,...e){const{delegate:r}=Te;return r?.setTimeout?r.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=Te;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Le(t){Te.setTimeout(()=>{const{onUnhandledError:n}=te;if(!n)throw t;n(t)})}function Ee(){}const Ve=It("C",void 0,void 0);function It(t,n,e){return{kind:t,value:n,error:e}}let Xe=null;function lt(t){if(te.useDeprecatedSynchronousErrorHandling){const n=!Xe;if(n&&(Xe={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:r}=Xe;if(Xe=null,e)throw r}}else t()}class Xn extends k{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,q(n)&&n.add(this)):this.destination=ka}static create(n,e,r){return new en(n,e,r)}next(n){this.isStopped?fo(function Gt(t){return It("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?fo(function at(t){return It("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?fo(Ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xt=Function.prototype.bind;function wn(t,n){return Xt.call(t,n)}class ss{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(r){Dn(r)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(r){Dn(r)}else Dn(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Dn(e)}}}class en extends Xn{constructor(n,e,r){let o;if(super(),re(n)||!n)o={next:n??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&te.useDeprecatedNextContext?(i=Object.create(n),i.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&wn(n.next,i),error:n.error&&wn(n.error,i),complete:n.complete&&wn(n.complete,i)}):o=n}this.destination=new ss(o)}}function Dn(t){te.useDeprecatedSynchronousErrorHandling?function Mt(t){te.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=t)}(t):Le(t)}function fo(t,n){const{onStoppedNotification:e}=te;e&&Te.setTimeout(()=>e(t,n))}const ka={closed:!0,next:Ee,error:function Ur(t){throw t},complete:Ee},Fo="function"==typeof Symbol&&Symbol.observable||"@@observable";function er(t){return t}function as(t){return 0===t.length?er:1===t.length?t[0]:function(e){return t.reduce((r,o)=>o(r),e)}}let We=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new t;return r.source=this,r.operator=e,r}subscribe(e,r,o){const i=function Fa(t){return t&&t instanceof Xn||function Na(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}(t)&&q(t)}(e)?e:new en(e,r,o);return lt(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=Ra(r))((o,i)=>{const s=new en({next:a=>{try{e(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[Fo](){return this}pipe(...e){return as(e)(this)}toPromise(e){return new(e=Ra(e))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=n=>new t(n),t})();function Ra(t){var n;return null!==(n=t??te.Promise)&&void 0!==n?n:Promise}const fu=Ce(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let E=(()=>{class t extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new O(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new fu}next(e){lt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){lt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){lt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:o,observers:i}=this;return r||o?R:(this.currentObservers=null,i.push(e),new k(()=>{this.currentObservers=null,qe(i,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:o,isStopped:i}=this;r?e.error(o):i&&e.complete()}asObservable(){const e=new We;return e.source=this,e}}return t.create=(n,e)=>new O(n,e),t})();class O extends E{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,n)}error(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==r?r:R}}function I(t){return re(t?.lift)}function M(t){return n=>{if(I(n))return n.lift(function(e){try{return t(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function L(t,n,e,r,o){return new B(t,n,e,r,o)}class B extends Xn{constructor(n,e,r,o,i,s){super(n),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){n.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function F(t,n){return M((e,r)=>{let o=0;e.subscribe(L(r,i=>{r.next(t.call(n,i,o++))}))})}var V=ee(582);const Tt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function de(t){return re(t?.then)}function Ye(t){return re(t[Fo])}function wt(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function Br(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Lt=function Be(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tn(t){return re(t?.[Lt])}function Sn(t){return(0,V.__asyncGenerator)(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:r,done:o}=yield(0,V.__await)(e.read());if(o)return yield(0,V.__await)(void 0);yield yield(0,V.__await)(r)}}finally{e.releaseLock()}})}function tr(t){return re(t?.getReader)}function jn(t){if(t instanceof We)return t;if(null!=t){if(Ye(t))return function dS(t){return new We(n=>{const e=t[Fo]();if(re(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Tt(t))return function hS(t){return new We(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(de(t))return function fS(t){return new We(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,Le)})}(t);if(wt(t))return tg(t);if(tn(t))return function pS(t){return new We(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(tr(t))return function gS(t){return tg(Sn(t))}(t)}throw Br(t)}function tg(t){return new We(n=>{(function mS(t,n){var e,r,o,i;return(0,V.__awaiter)(this,void 0,void 0,function*(){try{for(e=(0,V.__asyncValues)(t);!(r=yield e.next()).done;)if(n.next(r.value),n.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(o)throw o.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function Cr(t,n,e,r=0,o=!1){const i=n.schedule(function(){e(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function At(t,n,e=1/0){return re(n)?At((r,o)=>F((i,s)=>n(r,i,o,s))(jn(t(r,o))),e):("number"==typeof n&&(e=n),M((r,o)=>function _S(t,n,e,r,o,i,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&n.complete()},f=v=>c<r?p(v):l.push(v),p=v=>{i&&n.next(v),c++;let y=!1;jn(e(v,u++)).subscribe(L(n,w=>{o?.(w),i?f(w):n.next(w)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<r;){const w=l.shift();s?Cr(n,s,()=>p(w)):p(w)}h()}catch(w){n.error(w)}}))};return t.subscribe(L(n,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,t,e)))}function Lo(t=1/0){return At(er,t)}const nr=new We(t=>t.complete());function pu(t){return t[t.length-1]}function ng(t){return re(pu(t))?t.pop():void 0}function ls(t){return function vS(t){return t&&re(t.schedule)}(pu(t))?t.pop():void 0}function rg(t,n=0){return M((e,r)=>{e.subscribe(L(r,o=>Cr(r,t,()=>r.next(o),n),()=>Cr(r,t,()=>r.complete(),n),o=>Cr(r,t,()=>r.error(o),n)))})}function og(t,n=0){return M((e,r)=>{r.add(t.schedule(()=>e.subscribe(r),n))})}function ig(t,n){if(!t)throw new Error("Iterable cannot be null");return new We(e=>{Cr(e,n,()=>{const r=t[Symbol.asyncIterator]();Cr(e,n,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function pt(t,n){return n?function xS(t,n){if(null!=t){if(Ye(t))return function bS(t,n){return jn(t).pipe(og(n),rg(n))}(t,n);if(Tt(t))return function DS(t,n){return new We(e=>{let r=0;return n.schedule(function(){r===t.length?e.complete():(e.next(t[r++]),e.closed||this.schedule())})})}(t,n);if(de(t))return function wS(t,n){return jn(t).pipe(og(n),rg(n))}(t,n);if(wt(t))return ig(t,n);if(tn(t))return function SS(t,n){return new We(e=>{let r;return Cr(e,n,()=>{r=t[Lt](),Cr(e,n,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void e.error(s)}i?e.complete():e.next(o)},0,!0)}),()=>re(r?.return)&&r.return()})}(t,n);if(tr(t))return function ES(t,n){return ig(Sn(t),n)}(t,n)}throw Br(t)}(t,n):jn(t)}function gu(t,n,...e){if(!0===n)return void t();if(!1===n)return;const r=new en({next:()=>{r.unsubscribe(),t()}});return n(...e).subscribe(r)}function $e(t){for(let n in t)if(t[n]===$e)return n;throw Error("Could not find renamed property on target object.")}function mu(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function He(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(He).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function _u(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const OS=$e({__forward_ref__:$e});function ze(t){return t.__forward_ref__=ze,t.toString=function(){return He(this())},t}function ie(t){return yu(t)?t():t}function yu(t){return"function"==typeof t&&t.hasOwnProperty(OS)&&t.__forward_ref__===ze}function vu(t){return t&&!!t.\u0275providers}const sg="https://g.co/ng/security#xss";class U extends Error{constructor(n,e){super(La(n,e)),this.code=n}}function La(t,n){return`NG0${Math.abs(t)}${n?": "+n.trim():""}`}function fe(t){return"string"==typeof t?t:null==t?"":String(t)}function ja(t,n){throw new U(-201,!1)}function En(t,n){null==t&&function Re(t,n,e,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${e} ${r} ${n} <=Actual]`))}(n,t,null,"!=")}function Q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function xn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Va(t){return ag(t,$a)||ag(t,cg)}function ag(t,n){return t.hasOwnProperty(n)?t[n]:null}function lg(t){return t&&(t.hasOwnProperty(Cu)||t.hasOwnProperty(LS))?t[Cu]:null}const $a=$e({\u0275prov:$e}),Cu=$e({\u0275inj:$e}),cg=$e({ngInjectableDef:$e}),LS=$e({ngInjectorDef:$e});var se=(()=>((se=se||{})[se.Default=0]="Default",se[se.Host=1]="Host",se[se.Self=2]="Self",se[se.SkipSelf=4]="SkipSelf",se[se.Optional=8]="Optional",se))();let bu;function Mn(t){const n=bu;return bu=t,n}function ug(t,n,e){const r=Va(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&se.Optional?null:void 0!==n?n:void ja(He(t))}const Ke=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),cs={},wu="__NG_DI_FLAG__",Ua="ngTempTokenPath",VS="ngTokenPath",$S=/\n/gm,US="\u0275",dg="__source";let us;function jo(t){const n=us;return us=t,n}function BS(t,n=se.Default){if(void 0===us)throw new U(-203,!1);return null===us?ug(t,void 0,n):us.get(t,n&se.Optional?null:void 0,n)}function K(t,n=se.Default){return(function jS(){return bu}()||BS)(ie(t),n)}function be(t,n=se.Default){return K(t,Ba(n))}function Ba(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Du(t){const n=[];for(let e=0;e<t.length;e++){const r=ie(t[e]);if(Array.isArray(r)){if(0===r.length)throw new U(900,!1);let o,i=se.Default;for(let s=0;s<r.length;s++){const a=r[s],l=HS(a);"number"==typeof l?-1===l?o=a.token:i|=l:o=a}n.push(K(o,i))}else n.push(K(r))}return n}function ds(t,n){return t[wu]=n,t.prototype[wu]=n,t}function HS(t){return t[wu]}function br(t){return{toString:t}.toString()}var rr=(()=>((rr=rr||{})[rr.OnPush=0]="OnPush",rr[rr.Default=1]="Default",rr))(),or=(()=>{return(t=or||(or={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",or;var t})();const wr={},ke=[],Ha=$e({\u0275cmp:$e}),Su=$e({\u0275dir:$e}),Eu=$e({\u0275pipe:$e}),fg=$e({\u0275mod:$e}),Dr=$e({\u0275fac:$e}),hs=$e({__NG_ELEMENT_ID__:$e});let qS=0;function zr(t){return br(()=>{const n=gg(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===rr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,data:t.data||{},encapsulation:t.encapsulation||or.Emulated,id:"c"+qS++,styles:t.styles||ke,_:null,schemas:t.schemas||null,tView:null};mg(e);const r=t.dependencies;return e.directiveDefs=za(r,!1),e.pipeDefs=za(r,!0),e})}function KS(t){return Ne(t)||jt(t)}function JS(t){return null!==t}function Vn(t){return br(()=>({type:t.type,bootstrap:t.bootstrap||ke,declarations:t.declarations||ke,imports:t.imports||ke,exports:t.exports||ke,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function pg(t,n){if(null==t)return wr;const e={};for(const r in t)if(t.hasOwnProperty(r)){let o=t[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),e[o]=r,n&&(n[o]=i)}return e}function ce(t){return br(()=>{const n=gg(t);return mg(n),n})}function Ne(t){return t[Ha]||null}function jt(t){return t[Su]||null}function rn(t){return t[Eu]||null}function un(t,n){const e=t[fg]||null;if(!e&&!0===n)throw new Error(`Type ${He(t)} does not have '\u0275mod' property.`);return e}function gg(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,exportAs:t.exportAs||null,standalone:!0===t.standalone,selectors:t.selectors||ke,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pg(t.inputs,n),outputs:pg(t.outputs)}}function mg(t){t.features?.forEach(n=>n(t))}function za(t,n){if(!t)return null;const e=n?rn:KS;return()=>("function"==typeof t?t():t).map(r=>e(r)).filter(JS)}const Sr=0,J=1,ye=2,rt=3,$n=4,po=5,Vt=6,$o=7,ct=8,Ga=9,qa=10,we=11,xu=12,fs=13,_g=14,Uo=15,$t=16,ps=17,Bo=18,ir=19,gs=20,yg=21,Je=22,Mu=1,vg=2,Wa=7,Ka=8,Ho=9,qt=10;function dn(t){return Array.isArray(t)&&"object"==typeof t[Mu]}function Un(t){return Array.isArray(t)&&!0===t[Mu]}function Tu(t){return 0!=(4&t.flags)}function ms(t){return t.componentOffset>-1}function Ja(t){return 1==(1&t.flags)}function Bn(t){return!!t.template}function QS(t){return 0!=(256&t[ye])}function go(t,n){return t.hasOwnProperty(Dr)?t[Dr]:null}class e1{constructor(n,e,r){this.previousValue=n,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Tn(){return wg}function wg(t){return t.type.prototype.ngOnChanges&&(t.setInput=n1),t1}function t1(){const t=Sg(this),n=t?.current;if(n){const e=t.previous;if(e===wr)t.previous=n;else for(let r in n)e[r]=n[r];t.current=null,this.ngOnChanges(n)}}function n1(t,n,e,r){const o=this.declaredInputs[e],i=Sg(t)||function r1(t,n){return t[Dg]=n}(t,{previous:wr,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[o];s[o]=new e1(l&&l.currentValue,n,a===wr),t[r]=n}Tn.ngInherit=!0;const Dg="__ngSimpleChanges__";function Sg(t){return t[Dg]||null}const On=function(t,n,e){};function kt(t){for(;Array.isArray(t);)t=t[Sr];return t}function Ya(t,n){return kt(n[t])}function hn(t,n){return kt(n[t.index])}function Mg(t,n){return t.data[n]}function on(t,n){const e=n[t];return dn(e)?e:e[Sr]}function Qa(t){return 64==(64&t[ye])}function Gr(t,n){return null==n?null:t[n]}function Tg(t){t[Bo]=0}function Iu(t,n){t[po]+=n;let e=t,r=t[rt];for(;null!==r&&(1===n&&1===e[po]||-1===n&&0===e[po]);)r[po]+=n,e=r,r=r[rt]}const pe={lFrame:jg(null),bindingsEnabled:!0};function Ig(){return pe.bindingsEnabled}function j(){return pe.lFrame.lView}function Ie(){return pe.lFrame.tView}function z(t){return pe.lFrame.contextLView=t,t[ct]}function G(t){return pe.lFrame.contextLView=null,t}function Pt(){let t=Ag();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ag(){return pe.lFrame.currentTNode}function sr(t,n){const e=pe.lFrame;e.currentTNode=t,e.isParent=n}function Au(){return pe.lFrame.isParent}function ku(){pe.lFrame.isParent=!1}function Wt(){const t=pe.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Go(){return pe.lFrame.bindingIndex++}function xr(t){const n=pe.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function m1(t,n){const e=pe.lFrame;e.bindingIndex=e.bindingRootIndex=t,Pu(n)}function Pu(t){pe.lFrame.currentDirectiveIndex=t}function Ng(){return pe.lFrame.currentQueryIndex}function Nu(t){pe.lFrame.currentQueryIndex=t}function y1(t){const n=t[J];return 2===n.type?n.declTNode:1===n.type?t[Vt]:null}function Fg(t,n,e){if(e&se.SkipSelf){let o=n,i=t;for(;!(o=o.parent,null!==o||e&se.Host||(o=y1(i),null===o||(i=i[Uo],10&o.type))););if(null===o)return!1;n=o,t=i}const r=pe.lFrame=Lg();return r.currentTNode=n,r.lView=t,!0}function Fu(t){const n=Lg(),e=t[J];pe.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Lg(){const t=pe.lFrame,n=null===t?null:t.child;return null===n?jg(t):n}function jg(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Vg(){const t=pe.lFrame;return pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const $g=Vg;function Lu(){const t=Vg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Kt(){return pe.lFrame.selectedIndex}function mo(t){pe.lFrame.selectedIndex=t}function et(){const t=pe.lFrame;return Mg(t.tView,t.selectedIndex)}function Za(t,n){for(let e=n.directiveStart,r=n.directiveEnd;e<r;e++){const i=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(t.contentHooks??(t.contentHooks=[])).push(-e,s),a&&((t.contentHooks??(t.contentHooks=[])).push(e,a),(t.contentCheckHooks??(t.contentCheckHooks=[])).push(e,a)),l&&(t.viewHooks??(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks??(t.viewHooks=[])).push(e,c),(t.viewCheckHooks??(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks??(t.destroyHooks=[])).push(e,u)}}function Xa(t,n,e){Ug(t,n,3,e)}function el(t,n,e,r){(3&t[ye])===e&&Ug(t,n,e,r)}function ju(t,n){let e=t[ye];(3&e)===n&&(e&=2047,e+=1,t[ye]=e)}function Ug(t,n,e,r){const i=r??-1,s=n.length-1;let a=0;for(let l=void 0!==r?65535&t[Bo]:0;l<s;l++)if("number"==typeof n[l+1]){if(a=n[l],null!=r&&a>=r)break}else n[l]<0&&(t[Bo]+=65536),(a<i||-1==i)&&(M1(t,e,n,l),t[Bo]=(4294901760&t[Bo])+l+2),l++}function M1(t,n,e,r){const o=e[r]<0,i=e[r+1],a=t[o?-e[r]:e[r]];if(o){if(t[ye]>>11<t[Bo]>>16&&(3&t[ye])===n){t[ye]+=2048,On(4,a,i);try{i.call(a)}finally{On(5,a,i)}}}else{On(4,a,i);try{i.call(a)}finally{On(5,a,i)}}}const qo=-1;class ys{constructor(n,e,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function $u(t,n,e){let r=0;for(;r<e.length;){const o=e[r];if("number"==typeof o){if(0!==o)break;r++;const i=e[r++],s=e[r++],a=e[r++];t.setAttribute(n,s,a,i)}else{const i=o,s=e[++r];Hg(i)?t.setProperty(n,i,s):t.setAttribute(n,i,s),r++}}return r}function Bg(t){return 3===t||4===t||6===t}function Hg(t){return 64===t.charCodeAt(0)}function vs(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let r=0;r<n.length;r++){const o=n[r];"number"==typeof o?e=o:0===e||zg(t,e,o,null,-1===e||2===e?n[++r]:null)}}return t}function zg(t,n,e,r,o){let i=0,s=t.length;if(-1===n)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===n){s=-1;break}if(a>n){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==o&&(t[i+1]=o));if(r===t[i+1])return void(t[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(t.splice(s,0,n),i=s+1),t.splice(i++,0,e),null!==r&&t.splice(i++,0,r),null!==o&&t.splice(i++,0,o)}function Gg(t){return t!==qo}function tl(t){return 32767&t}function nl(t,n){let e=function A1(t){return t>>16}(t),r=n;for(;e>0;)r=r[Uo],e--;return r}let Uu=!0;function rl(t){const n=Uu;return Uu=t,n}const qg=255,Wg=5;let k1=0;const ar={};function ol(t,n){const e=Kg(t,n);if(-1!==e)return e;const r=n[J];r.firstCreatePass&&(t.injectorIndex=n.length,Bu(r.data,t),Bu(n,null),Bu(r.blueprint,null));const o=Hu(t,n),i=t.injectorIndex;if(Gg(o)){const s=tl(o),a=nl(o,n),l=a[J].data;for(let c=0;c<8;c++)n[i+c]=a[s+c]|l[s+c]}return n[i+8]=o,i}function Bu(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Kg(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Hu(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,r=null,o=n;for(;null!==o;){if(r=tm(o),null===r)return qo;if(e++,o=o[Uo],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return qo}function zu(t,n,e){!function P1(t,n,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(hs)&&(r=e[hs]),null==r&&(r=e[hs]=k1++);const o=r&qg;n.data[t+(o>>Wg)]|=1<<o}(t,n,e)}function Jg(t,n,e){if(e&se.Optional||void 0!==t)return t;ja()}function Yg(t,n,e,r){if(e&se.Optional&&void 0===r&&(r=null),!(e&(se.Self|se.Host))){const o=t[Ga],i=Mn(void 0);try{return o?o.get(n,r,e&se.Optional):ug(n,r,e&se.Optional)}finally{Mn(i)}}return Jg(r,0,e)}function Qg(t,n,e,r=se.Default,o){if(null!==t){if(1024&n[ye]){const s=function j1(t,n,e,r,o){let i=t,s=n;for(;null!==i&&null!==s&&1024&s[ye]&&!(256&s[ye]);){const a=Zg(i,s,e,r|se.Self,ar);if(a!==ar)return a;let l=i.parent;if(!l){const c=s[yg];if(c){const u=c.get(e,ar,r);if(u!==ar)return u}l=tm(s),s=s[Uo]}i=l}return o}(t,n,e,r,ar);if(s!==ar)return s}const i=Zg(t,n,e,r,ar);if(i!==ar)return i}return Yg(n,e,r,o)}function Zg(t,n,e,r,o){const i=function F1(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(hs)?t[hs]:void 0;return"number"==typeof n?n>=0?n&qg:L1:n}(e);if("function"==typeof i){if(!Fg(n,t,r))return r&se.Host?Jg(o,0,r):Yg(n,e,r,o);try{const s=i(r);if(null!=s||r&se.Optional)return s;ja()}finally{$g()}}else if("number"==typeof i){let s=null,a=Kg(t,n),l=qo,c=r&se.Host?n[$t][Vt]:null;for((-1===a||r&se.SkipSelf)&&(l=-1===a?Hu(t,n):n[a+8],l!==qo&&em(r,!1)?(s=n[J],a=tl(l),n=nl(l,n)):a=-1);-1!==a;){const u=n[J];if(Xg(i,a,u.data)){const d=N1(a,n,e,s,r,c);if(d!==ar)return d}l=n[a+8],l!==qo&&em(r,n[J].data[a+8]===c)&&Xg(i,a,n)?(s=u,a=tl(l),n=nl(l,n)):a=-1}}return o}function N1(t,n,e,r,o,i){const s=n[J],a=s.data[t+8],u=il(a,s,e,null==r?ms(a)&&Uu:r!=s&&0!=(3&a.type),o&se.Host&&i===a);return null!==u?_o(n,s,u,a):ar}function il(t,n,e,r,o){const i=t.providerIndexes,s=n.data,a=1048575&i,l=t.directiveStart,u=i>>20,h=o?a+u:t.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(o){const f=s[l];if(f&&Bn(f)&&f.type===e)return l}return null}function _o(t,n,e,r){let o=t[e];const i=n.data;if(function T1(t){return t instanceof ys}(o)){const s=o;s.resolving&&function IS(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new U(-200,`Circular dependency in DI detected for ${t}${e}`)}(function Pe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():fe(t)}(i[e]));const a=rl(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Mn(s.injectImpl):null;Fg(t,r,se.Default);try{o=t[e]=s.factory(void 0,i,t,r),n.firstCreatePass&&e>=r.directiveStart&&function x1(t,n,e){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=n.type.prototype;if(r){const s=wg(n);(e.preOrderHooks??(e.preOrderHooks=[])).push(t,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,s)}o&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-t,o),i&&((e.preOrderHooks??(e.preOrderHooks=[])).push(t,i),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,i))}(e,i[e],n)}finally{null!==l&&Mn(l),rl(a),s.resolving=!1,$g()}}return o}function Xg(t,n,e){return!!(e[n+(t>>Wg)]&1<<t)}function em(t,n){return!(t&se.Self||t&se.Host&&n)}class Wo{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,r){return Qg(this._tNode,this._lView,n,Ba(r),e)}}function L1(){return new Wo(Pt(),j())}function Rt(t){return br(()=>{const n=t.prototype.constructor,e=n[Dr]||Gu(n),r=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){const i=o[Dr]||Gu(o);if(i&&i!==e)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Gu(t){return yu(t)?()=>{const n=Gu(ie(t));return n&&n()}:go(t)}function tm(t){const n=t[J],e=n.type;return 2===e?n.declTNode:1===e?t[Vt]:null}const Jo="__parameters__";function Qo(t,n,e){return br(()=>{const r=function qu(t){return function(...e){if(t){const r=t(...e);for(const o in r)this[o]=r[o]}}}(n);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Jo)?l[Jo]:Object.defineProperty(l,Jo,{value:[]})[Jo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class Z{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Q({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function yo(t,n){t.forEach(e=>Array.isArray(e)?yo(e,n):n(e))}function rm(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function al(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function fn(t,n,e){let r=Zo(t,n);return r>=0?t[1|r]=e:(r=~r,function B1(t,n,e,r){let o=t.length;if(o==n)t.push(e,r);else if(1===o)t.push(r,t[0]),t[0]=e;else{for(o--,t.push(t[o-1],t[o]);o>n;)t[o]=t[o-2],o--;t[n]=e,t[n+1]=r}}(t,r,n,e)),r}function Ku(t,n){const e=Zo(t,n);if(e>=0)return t[1|e]}function Zo(t,n){return function om(t,n,e){let r=0,o=t.length>>e;for(;o!==r;){const i=r+(o-r>>1),s=t[i<<e];if(n===s)return i<<e;s>n?o=i:r=i+1}return~(o<<e)}(t,n,1)}const Ds=ds(Qo("Optional"),8),Ss=ds(Qo("SkipSelf"),4);var sn=(()=>((sn=sn||{})[sn.Important=1]="Important",sn[sn.DashCase=2]="DashCase",sn))();const ed=new Map;let uE=0;const nd="__ngContext__";function Ut(t,n){dn(n)?(t[nd]=n[gs],function hE(t){ed.set(t[gs],t)}(n)):t[nd]=n}let rd;function od(t,n){return rd(t,n)}function Ts(t){const n=t[rt];return Un(n)?n[rt]:n}function id(t){return Sm(t[fs])}function sd(t){return Sm(t[$n])}function Sm(t){for(;null!==t&&!Un(t);)t=t[$n];return t}function ei(t,n,e,r,o){if(null!=r){let i,s=!1;Un(r)?i=r:dn(r)&&(s=!0,r=r[Sr]);const a=kt(r);0===t&&null!==e?null==o?Im(n,e,a):vo(n,e,a,o||null,!0):1===t&&null!==e?vo(n,e,a,o||null,!0):2===t?function fd(t,n,e){const r=dl(t,n);r&&function kE(t,n,e,r){t.removeChild(n,e,r)}(t,r,n,e)}(n,a,s):3===t&&n.destroyNode(a),null!=i&&function NE(t,n,e,r,o){const i=e[Wa];i!==kt(e)&&ei(n,t,r,i,o);for(let a=qt;a<e.length;a++){const l=e[a];Os(l[J],l,t,n,r,i)}}(n,t,i,e,o)}}function ld(t,n,e){return t.createElement(n,e)}function xm(t,n){const e=t[Ho],r=e.indexOf(n),o=n[rt];512&n[ye]&&(n[ye]&=-513,Iu(o,-1)),e.splice(r,1)}function cd(t,n){if(t.length<=qt)return;const e=qt+n,r=t[e];if(r){const o=r[ps];null!==o&&o!==t&&xm(o,r),n>0&&(t[e-1][$n]=r[$n]);const i=al(t,qt+n);!function SE(t,n){Os(t,n,n[we],2,null,null),n[Sr]=null,n[Vt]=null}(r[J],r);const s=i[ir];null!==s&&s.detachView(i[J]),r[rt]=null,r[$n]=null,r[ye]&=-65}return r}function Mm(t,n){if(!(128&n[ye])){const e=n[we];e.destroyNode&&Os(t,n,e,3,null,null),function ME(t){let n=t[fs];if(!n)return ud(t[J],t);for(;n;){let e=null;if(dn(n))e=n[fs];else{const r=n[qt];r&&(e=r)}if(!e){for(;n&&!n[$n]&&n!==t;)dn(n)&&ud(n[J],n),n=n[rt];null===n&&(n=t),dn(n)&&ud(n[J],n),e=n&&n[$n]}n=e}}(n)}}function ud(t,n){if(!(128&n[ye])){n[ye]&=-65,n[ye]|=128,function AE(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let r=0;r<e.length;r+=2){const o=n[e[r]];if(!(o instanceof ys)){const i=e[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],l=i[s+1];On(4,a,l);try{l.call(a)}finally{On(5,a,l)}}else{On(4,o,i);try{i.call(o)}finally{On(5,o,i)}}}}}(t,n),function IE(t,n){const e=t.cleanup,r=n[$o];let o=-1;if(null!==e)for(let i=0;i<e.length-1;i+=2)if("string"==typeof e[i]){const s=e[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=e[i+1]];e[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();n[$o]=null}}(t,n),1===n[J].type&&n[we].destroy();const e=n[ps];if(null!==e&&Un(n[rt])){e!==n[rt]&&xm(e,n);const r=n[ir];null!==r&&r.detachView(t)}!function fE(t){ed.delete(t[gs])}(n)}}function Tm(t,n,e){return function Om(t,n,e){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return e[Sr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=t.data[r.directiveStart+o];if(i===or.None||i===or.Emulated)return null}return hn(r,e)}}(t,n.parent,e)}function vo(t,n,e,r,o){t.insertBefore(n,e,r,o)}function Im(t,n,e){t.appendChild(n,e)}function Am(t,n,e,r,o){null!==r?vo(t,n,e,r,o):Im(t,n,e)}function dl(t,n){return t.parentNode(n)}let dd,md,gl,Rm=function Pm(t,n,e){return 40&t.type?hn(t,e):null};function hl(t,n,e,r){const o=Tm(t,r,n),i=n[we],a=function km(t,n,e){return Rm(t,n,e)}(r.parent||n[Vt],r,n);if(null!=o)if(Array.isArray(e))for(let l=0;l<e.length;l++)Am(i,o,e[l],a,!1);else Am(i,o,e,a,!1);void 0!==dd&&dd(i,r,n,e,o)}function fl(t,n){if(null!==n){const e=n.type;if(3&e)return hn(n,t);if(4&e)return hd(-1,t[n.index]);if(8&e){const r=n.child;if(null!==r)return fl(t,r);{const o=t[n.index];return Un(o)?hd(-1,o):kt(o)}}if(32&e)return od(n,t)()||kt(t[n.index]);{const r=Fm(t,n);return null!==r?Array.isArray(r)?r[0]:fl(Ts(t[$t]),r):fl(t,n.next)}}return null}function Fm(t,n){return null!==n?t[$t][Vt].projection[n.projection]:null}function hd(t,n){const e=qt+t+1;if(e<n.length){const r=n[e],o=r[J].firstChild;if(null!==o)return fl(r,o)}return n[Wa]}function pd(t,n,e,r,o,i,s){for(;null!=e;){const a=r[e.index],l=e.type;if(s&&0===n&&(a&&Ut(kt(a),r),e.flags|=2),32!=(32&e.flags))if(8&l)pd(t,n,e.child,r,o,i,!1),ei(n,t,o,a,i);else if(32&l){const c=od(e,r);let u;for(;u=c();)ei(n,t,o,u,i);ei(n,t,o,a,i)}else 16&l?Lm(t,n,r,e,o,i):ei(n,t,o,a,i);e=s?e.projectionNext:e.next}}function Os(t,n,e,r,o,i){pd(e,r,t.firstChild,n,o,i,!1)}function Lm(t,n,e,r,o,i){const s=e[$t],l=s[Vt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ei(n,t,o,l[c],i);else pd(t,n,l,s[rt],o,i,!0)}function jm(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function Vm(t,n,e){const{mergedAttrs:r,classes:o,styles:i}=e;null!==r&&$u(t,n,r),null!==o&&jm(t,n,o),null!==i&&function LE(t,n,e){t.setAttribute(n,"style",e)}(t,n,i)}function Hm(t){return function _d(){if(void 0===gl&&(gl=null,Ke.trustedTypes))try{gl=Ke.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gl}()?.createScriptURL(t)||t}class zm{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sg})`}}function qr(t){return t instanceof zm?t.changingThisBreaksApplicationSecurity:t}function Is(t,n){const e=function WE(t){return t instanceof zm&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${sg})`)}return e===n}const QE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var gt=(()=>((gt=gt||{})[gt.NONE=0]="NONE",gt[gt.HTML=1]="HTML",gt[gt.STYLE=2]="STYLE",gt[gt.SCRIPT=3]="SCRIPT",gt[gt.URL=4]="URL",gt[gt.RESOURCE_URL=5]="RESOURCE_URL",gt))();function ni(t){const n=ks();return n?n.sanitize(gt.URL,t)||"":Is(t,"URL")?qr(t):function yd(t){return(t=String(t)).match(QE)?t:"unsafe:"+t}(fe(t))}function Qm(t){const n=ks();if(n)return Hm(n.sanitize(gt.RESOURCE_URL,t)||"");if(Is(t,"ResourceURL"))return Hm(qr(t));throw new U(904,!1)}function ks(){const t=j();return t&&t[xu]}const _l=new Z("ENVIRONMENT_INITIALIZER"),Xm=new Z("INJECTOR",-1),e_=new Z("INJECTOR_DEF_TYPES");class t_{get(n,e=cs){if(e===cs){const r=new Error(`NullInjectorError: No provider for ${He(n)}!`);throw r.name="NullInjectorError",r}return e}}function dx(...t){return{\u0275providers:n_(0,t),\u0275fromNgModule:!0}}function n_(t,...n){const e=[],r=new Set;let o;return yo(n,i=>{const s=i;wd(s,e,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&r_(o,e),e}function r_(t,n){for(let e=0;e<t.length;e++){const{providers:o}=t[e];Dd(o,i=>{n.push(i)})}}function wd(t,n,e,r){if(!(t=ie(t)))return!1;let o=null,i=lg(t);const s=!i&&Ne(t);if(i||s){if(s&&!s.standalone)return!1;o=t}else{const l=t.ngModule;if(i=lg(l),!i)return!1;o=l}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)wd(c,n,e,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{yo(i.imports,u=>{wd(u,n,e,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&r_(c,n)}if(!a){const c=go(o)||(()=>new o);n.push({provide:o,useFactory:c,deps:ke},{provide:e_,useValue:o,multi:!0},{provide:_l,useValue:()=>K(o),multi:!0})}const l=i.providers;null==l||a||Dd(l,u=>{n.push(u)})}}return o!==t&&void 0!==t.providers}function Dd(t,n){for(let e of t)vu(e)&&(e=e.\u0275providers),Array.isArray(e)?Dd(e,n):n(e)}const hx=$e({provide:String,useValue:$e});function Sd(t){return null!==t&&"object"==typeof t&&hx in t}function Co(t){return"function"==typeof t}const Ed=new Z("Set Injector scope."),yl={},px={};let xd;function vl(){return void 0===xd&&(xd=new t_),xd}class lr{}class s_ extends lr{get destroyed(){return this._destroyed}constructor(n,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Td(n,s=>this.processProvider(s)),this.records.set(Xm,ri(void 0,this)),o.has("environment")&&this.records.set(lr,ri(void 0,this));const i=this.records.get(Ed);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(e_.multi,ke,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const e=jo(this),r=Mn(void 0);try{return n()}finally{jo(e),Mn(r)}}get(n,e=cs,r=se.Default){this.assertNotDestroyed(),r=Ba(r);const o=jo(this),i=Mn(void 0);try{if(!(r&se.SkipSelf)){let a=this.records.get(n);if(void 0===a){const l=function vx(t){return"function"==typeof t||"object"==typeof t&&t instanceof Z}(n)&&Va(n);a=l&&this.injectableDefInScope(l)?ri(Md(n),yl):null,this.records.set(n,a)}if(null!=a)return this.hydrate(n,a)}return(r&se.Self?vl():this.parent).get(n,e=r&se.Optional&&e===cs?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[Ua]=s[Ua]||[]).unshift(He(n)),o)throw s;return function zS(t,n,e,r){const o=t[Ua];throw n[dg]&&o.unshift(n[dg]),t.message=function GS(t,n,e,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==US?t.slice(2):t;let o=He(n);if(Array.isArray(n))o=n.map(He).join(" -> ");else if("object"==typeof n){let i=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):He(a)))}o=`{${i.join(", ")}}`}return`${e}${r?"("+r+")":""}[${o}]: ${t.replace($S,"\n  ")}`}("\n"+t.message,o,e,r),t[VS]=o,t[Ua]=null,t}(s,n,"R3InjectorError",this.source)}throw s}finally{Mn(i),jo(o)}}resolveInjectorInitializers(){const n=jo(this),e=Mn(void 0);try{const r=this.get(_l.multi,ke,se.Self);for(const o of r)o()}finally{jo(n),Mn(e)}}toString(){const n=[],e=this.records;for(const r of e.keys())n.push(He(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(n){let e=Co(n=ie(n))?n:ie(n&&n.provide);const r=function mx(t){return Sd(t)?ri(void 0,t.useValue):ri(a_(t),yl)}(n);if(Co(n)||!0!==n.multi)this.records.get(e);else{let o=this.records.get(e);o||(o=ri(void 0,yl,!0),o.factory=()=>Du(o.multi),this.records.set(e,o)),e=n,o.multi.push(n)}this.records.set(e,r)}hydrate(n,e){return e.value===yl&&(e.value=px,e.value=e.factory()),"object"==typeof e.value&&e.value&&function yx(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=ie(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Md(t){const n=Va(t),e=null!==n?n.factory:go(t);if(null!==e)return e;if(t instanceof Z)throw new U(204,!1);if(t instanceof Function)return function gx(t){const n=t.length;if(n>0)throw function ws(t,n){const e=[];for(let r=0;r<t;r++)e.push(n);return e}(n,"?"),new U(204,!1);const e=function FS(t){return t&&(t[$a]||t[cg])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new U(204,!1)}function a_(t,n,e){let r;if(Co(t)){const o=ie(t);return go(o)||Md(o)}if(Sd(t))r=()=>ie(t.useValue);else if(function i_(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Du(t.deps||[]));else if(function o_(t){return!(!t||!t.useExisting)}(t))r=()=>K(ie(t.useExisting));else{const o=ie(t&&(t.useClass||t.provide));if(!function _x(t){return!!t.deps}(t))return go(o)||Md(o);r=()=>new o(...Du(t.deps))}return r}function ri(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Td(t,n){for(const e of t)Array.isArray(e)?Td(e,n):e&&vu(e)?Td(e.\u0275providers,n):n(e)}class Cx{}class l_{}class wx{resolveComponentFactory(n){throw function bx(t){const n=Error(`No component factory found for ${He(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Ps=(()=>{class t{}return t.NULL=new wx,t})();function Dx(){return oi(Pt(),j())}function oi(t,n){return new pn(hn(t,n))}let pn=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=Dx,t})();function Sx(t){return t instanceof pn?t.nativeElement:t}class u_{}let Tr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function Ex(){const t=j(),e=on(Pt().index,t);return(dn(e)?e:t)[we]}(),t})(),xx=(()=>{class t{}return t.\u0275prov=Q({token:t,providedIn:"root",factory:()=>null}),t})();class Rs{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Mx=new Rs("15.2.10"),Od={},Id="ngOriginalError";function Ad(t){return t[Id]}class ii{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&Ad(n);for(;e&&Ad(e);)e=Ad(e);return e||null}}function d_(t){return t.ownerDocument}function Or(t){return t instanceof Function?t():t}function f_(t,n,e){let r=t.length;for(;;){const o=t.indexOf(n,e);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=n.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}e=o+1}}const p_="ng-template";function Lx(t,n,e){let r=0,o=!0;for(;r<t.length;){let i=t[r++];if("string"==typeof i&&o){const s=t[r++];if(e&&"class"===i&&-1!==f_(s.toLowerCase(),n,0))return!0}else{if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===n)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function g_(t){return 4===t.type&&t.value!==p_}function jx(t,n,e){return n===(4!==t.type||e?t.value:p_)}function Vx(t,n,e){let r=4;const o=t.attrs||[],i=function Bx(t){for(let n=0;n<t.length;n++)if(Bg(t[n]))return n;return t.length}(o);let s=!1;for(let a=0;a<n.length;a++){const l=n[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!jx(t,l,e)||""===l&&1===n.length){if(Hn(r))return!1;s=!0}}else{const c=8&r?l:n[++a];if(8&r&&null!==t.attrs){if(!Lx(t.attrs,c,e)){if(Hn(r))return!1;s=!0}continue}const d=$x(8&r?"class":l,o,g_(t),e);if(-1===d){if(Hn(r))return!1;s=!0;continue}if(""!==c){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==f_(f,c,0)||2&r&&c!==h){if(Hn(r))return!1;s=!0}}}}else{if(!s&&!Hn(r)&&!Hn(l))return!1;if(s&&Hn(l))continue;s=!1,r=l|1&r}}return Hn(r)||s}function Hn(t){return 0==(1&t)}function $x(t,n,e,r){if(null===n)return-1;let o=0;if(r||!e){let i=!1;for(;o<n.length;){const s=n[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=n[++o];for(;"string"==typeof a;)a=n[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function Hx(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const r=t[e];if("number"==typeof r)return-1;if(r===n)return e;e++}return-1}(n,t)}function m_(t,n,e=!1){for(let r=0;r<n.length;r++)if(Vx(t,n[r],e))return!0;return!1}function __(t,n){return t?":not("+n.trim()+")":n}function Gx(t){let n=t[0],e=1,r=2,o="",i=!1;for(;e<t.length;){let s=t[e];if("string"==typeof s)if(2&r){const a=t[++e];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Hn(s)&&(n+=__(i,o),o=""),r=s,i=i||!Hn(r);e++}return""!==o&&(n+=__(i,o)),n}const ge={};function _(t){y_(Ie(),j(),Kt()+t,!1)}function y_(t,n,e,r){if(!r)if(3==(3&n[ye])){const i=t.preOrderCheckHooks;null!==i&&Xa(n,i,e)}else{const i=t.preOrderHooks;null!==i&&el(n,i,0,e)}mo(e)}function w_(t,n=null,e=null,r){const o=D_(t,n,e,r);return o.resolveInjectorInitializers(),o}function D_(t,n=null,e=null,r,o=new Set){const i=[e||ke,dx(t)];return r=r||("object"==typeof t?void 0:He(t)),new s_(i,n||vl(),r||null,o)}let cr=(()=>{class t{static create(e,r){if(Array.isArray(e))return w_({name:""},r,e,"");{const o=e.name??"";return w_({name:o},e.parent,e.providers,o)}}}return t.THROW_IF_NOT_FOUND=cs,t.NULL=new t_,t.\u0275prov=Q({token:t,providedIn:"any",factory:()=>K(Xm)}),t.__NG_ELEMENT_ID__=-1,t})();function N(t,n=se.Default){const e=j();return null===e?K(t,n):Qg(Pt(),e,ie(t),n)}function A_(t,n){const e=t.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const i=e[r+1];if(-1!==i){const s=t.data[i];Nu(e[r]),s.contentQueries(2,n[i],i)}}}function bl(t,n,e,r,o,i,s,a,l,c,u){const d=n.blueprint.slice();return d[Sr]=o,d[ye]=76|r,(null!==u||t&&1024&t[ye])&&(d[ye]|=1024),Tg(d),d[rt]=d[Uo]=t,d[ct]=e,d[qa]=s||t&&t[qa],d[we]=a||t&&t[we],d[xu]=l||t&&t[xu]||null,d[Ga]=c||t&&t[Ga]||null,d[Vt]=i,d[gs]=function dE(){return uE++}(),d[yg]=u,d[$t]=2==n.type?t[$t]:d,d}function li(t,n,e,r,o){let i=t.data[n];if(null===i)i=function Fd(t,n,e,r,o){const i=Ag(),s=Au(),l=t.data[n]=function _M(t,n,e,r,o,i){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,e,n,r,o);return null===t.firstChild&&(t.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(t,n,e,r,o),function g1(){return pe.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=e,i.value=r,i.attrs=o;const s=function _s(){const t=pe.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return sr(i,!0),i}function Ns(t,n,e,r){if(0===e)return-1;const o=n.length;for(let i=0;i<e;i++)n.push(r),t.blueprint.push(r),t.data.push(null);return o}function Ld(t,n,e){Fu(n);try{const r=t.viewQuery;null!==r&&qd(1,r,e);const o=t.template;null!==o&&k_(t,n,o,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&A_(t,n),t.staticViewQueries&&qd(2,t.viewQuery,e);const i=t.components;null!==i&&function pM(t,n){for(let e=0;e<n.length;e++)LM(t,n[e])}(n,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[ye]&=-5,Lu()}}function wl(t,n,e,r){const o=n[ye];if(128!=(128&o)){Fu(n);try{Tg(n),function Pg(t){return pe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&k_(t,n,e,2,r);const s=3==(3&o);if(s){const c=t.preOrderCheckHooks;null!==c&&Xa(n,c,null)}else{const c=t.preOrderHooks;null!==c&&el(n,c,0,null),ju(n,0)}if(function NM(t){for(let n=id(t);null!==n;n=sd(n)){if(!n[vg])continue;const e=n[Ho];for(let r=0;r<e.length;r++){const o=e[r];512&o[ye]||Iu(o[rt],1),o[ye]|=512}}}(n),function RM(t){for(let n=id(t);null!==n;n=sd(n))for(let e=qt;e<n.length;e++){const r=n[e],o=r[J];Qa(r)&&wl(o,r,o.template,r[ct])}}(n),null!==t.contentQueries&&A_(t,n),s){const c=t.contentCheckHooks;null!==c&&Xa(n,c)}else{const c=t.contentHooks;null!==c&&el(n,c,1),ju(n,1)}!function hM(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const o=e[r];if(o<0)mo(~o);else{const i=o,s=e[++r],a=e[++r];m1(s,i),a(2,n[i])}}}finally{mo(-1)}}(t,n);const a=t.components;null!==a&&function fM(t,n){for(let e=0;e<n.length;e++)FM(t,n[e])}(n,a);const l=t.viewQuery;if(null!==l&&qd(2,l,r),s){const c=t.viewCheckHooks;null!==c&&Xa(n,c)}else{const c=t.viewHooks;null!==c&&el(n,c,2),ju(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[ye]&=-41,512&n[ye]&&(n[ye]&=-513,Iu(n[rt],-1))}finally{Lu()}}}function k_(t,n,e,r,o){const i=Kt(),s=2&r;try{mo(-1),s&&n.length>Je&&y_(t,n,Je,!1),On(s?2:0,o),e(r,o)}finally{mo(i),On(s?3:1,o)}}function jd(t,n,e){if(Tu(n)){const o=n.directiveEnd;for(let i=n.directiveStart;i<o;i++){const s=t.data[i];s.contentQueries&&s.contentQueries(1,e[i],i)}}}function Vd(t,n,e){Ig()&&(function SM(t,n,e,r){const o=e.directiveStart,i=e.directiveEnd;ms(e)&&function AM(t,n,e){const r=hn(n,t),o=P_(e),i=t[qa],s=Dl(t,bl(t,o,null,e.onPush?32:16,r,n,i,i.createRenderer(r,e),null,null,null));t[n.index]=s}(n,e,t.data[o+e.componentOffset]),t.firstCreatePass||ol(e,n),Ut(r,n);const s=e.initialInputs;for(let a=o;a<i;a++){const l=t.data[a],c=_o(n,t,a,e);Ut(c,n),null!==s&&kM(0,a-o,c,l,0,s),Bn(l)&&(on(e.index,n)[ct]=_o(n,t,a,e))}}(t,n,e,hn(e,n)),64==(64&e.flags)&&j_(t,n,e))}function $d(t,n,e=hn){const r=n.localNames;if(null!==r){let o=n.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?e(n,t):t[s];t[o++]=a}}}function P_(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Ud(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Ud(t,n,e,r,o,i,s,a,l,c){const u=Je+r,d=u+o,h=function gM(t,n){const e=[];for(let r=0;r<n;r++)e.push(r<t?null:ge);return e}(u,d),f="function"==typeof c?c():c;return h[J]={type:t,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function R_(t,n,e,r){const o=$_(n);null===e?o.push(r):(o.push(e),t.firstCreatePass&&U_(t).push(r,o.length-1))}function N_(t,n,e,r){for(let o in t)if(t.hasOwnProperty(o)){e=null===e?{}:e;const i=t[o];null===r?F_(e,n,o,i):r.hasOwnProperty(o)&&F_(e,n,r[o],i)}return e}function F_(t,n,e,r){t.hasOwnProperty(e)?t[e].push(n,r):t[e]=[n,r]}function Bd(t,n,e,r){if(Ig()){const o=null===r?null:{"":-1},i=function xM(t,n){const e=t.directiveRegistry;let r=null,o=null;if(e)for(let i=0;i<e.length;i++){const s=e[i];if(m_(n,s.selectors,!1))if(r||(r=[]),Bn(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Hd(t,n,a.length)}else r.unshift(s),Hd(t,n,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(t,e);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&L_(t,n,e,s,o,a),o&&function MM(t,n,e){if(n){const r=t.localNames=[];for(let o=0;o<n.length;o+=2){const i=e[n[o+1]];if(null==i)throw new U(-301,!1);r.push(n[o],i)}}}(e,r,o)}e.mergedAttrs=vs(e.mergedAttrs,e.attrs)}function L_(t,n,e,r,o,i){for(let c=0;c<r.length;c++)zu(ol(e,n),t,r[c].type);!function OM(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Ns(t,n,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];e.mergedAttrs=vs(e.mergedAttrs,u.hostAttrs),IM(t,e,n,l,u),TM(l,u,o),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??(t.preOrderHooks=[])).push(e.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function yM(t,n,e){const o=n.directiveEnd,i=t.data,s=n.attrs,a=[];let l=null,c=null;for(let u=n.directiveStart;u<o;u++){const d=i[u],h=e?e.get(d):null,p=h?h.outputs:null;l=N_(d.inputs,u,l,h?h.inputs:null),c=N_(d.outputs,u,c,p);const v=null===l||null===s||g_(n)?null:PM(l,u,s);a.push(v)}null!==l&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=l,n.outputs=c}(t,e,i)}function j_(t,n,e){const r=e.directiveStart,o=e.directiveEnd,i=e.index,s=function _1(){return pe.lFrame.currentDirectiveIndex}();try{mo(i);for(let a=r;a<o;a++){const l=t.data[a],c=n[a];Pu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&EM(l,c)}}finally{mo(-1),Pu(s)}}function EM(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Hd(t,n,e){n.componentOffset=e,(t.components??(t.components=[])).push(n.index)}function TM(t,n,e){if(e){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)e[n.exportAs[r]]=t;Bn(n)&&(e[""]=t)}}function IM(t,n,e,r,o){t.data[r]=o;const i=o.factory||(o.factory=go(o.type)),s=new ys(i,Bn(o),N);t.blueprint[r]=s,e[r]=s,function wM(t,n,e,r,o){const i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~n.index;(function DM(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,r,i)}}(t,n,r,Ns(t,e,o.hostVars,ge),o)}function ur(t,n,e,r,o,i){const s=hn(t,n);!function zd(t,n,e,r,o,i,s){if(null==i)t.removeAttribute(n,o,e);else{const a=null==s?fe(i):s(i,r||"",o);t.setAttribute(n,o,a,e)}}(n[we],s,i,t.value,e,r,o)}function kM(t,n,e,r,o,i){const s=i[n];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(e,d,c,u):e[u]=d}}}function PM(t,n,e){let r=null,o=0;for(;o<e.length;){const i=e[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(t.hasOwnProperty(i)){null===r&&(r=[]);const s=t[i];for(let a=0;a<s.length;a+=2)if(s[a]===n){r.push(i,s[a+1],e[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function V_(t,n,e,r){return[t,!0,!1,n,null,0,r,e,null,null]}function FM(t,n){const e=on(n,t);if(Qa(e)){const r=e[J];48&e[ye]?wl(r,e,r.template,e[ct]):e[po]>0&&Gd(e)}}function Gd(t){for(let r=id(t);null!==r;r=sd(r))for(let o=qt;o<r.length;o++){const i=r[o];if(Qa(i))if(512&i[ye]){const s=i[J];wl(s,i,s.template,i[ct])}else i[po]>0&&Gd(i)}const e=t[J].components;if(null!==e)for(let r=0;r<e.length;r++){const o=on(e[r],t);Qa(o)&&o[po]>0&&Gd(o)}}function LM(t,n){const e=on(n,t),r=e[J];(function jM(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(r,e),Ld(r,e,e[ct])}function Dl(t,n){return t[fs]?t[_g][$n]=n:t[fs]=n,t[_g]=n,n}function Sl(t){for(;t;){t[ye]|=32;const n=Ts(t);if(QS(t)&&!n)return t;t=n}return null}function El(t,n,e,r=!0){const o=n[qa];o.begin&&o.begin();try{wl(t,n,t.template,e)}catch(s){throw r&&H_(n,s),s}finally{o.end&&o.end()}}function qd(t,n,e){Nu(0),n(t,e)}function $_(t){return t[$o]||(t[$o]=[])}function U_(t){return t.cleanup||(t.cleanup=[])}function H_(t,n){const e=t[Ga],r=e?e.get(ii,null):null;r&&r.handleError(n)}function Wd(t,n,e,r,o){for(let i=0;i<e.length;){const s=e[i++],a=e[i++],l=n[s],c=t.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function Ir(t,n,e){const r=Ya(n,t);!function Em(t,n,e){t.setValue(n,e)}(t[we],r,e)}function xl(t,n,e){let r=e?t.styles:null,o=e?t.classes:null,i=0;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?i=a:1==i?o=_u(o,a):2==i&&(r=_u(r,a+": "+n[++s]+";"))}e?t.styles=r:t.stylesWithoutHost=r,e?t.classes=o:t.classesWithoutHost=o}function Ml(t,n,e,r,o=!1){for(;null!==e;){const i=n[e.index];if(null!==i&&r.push(kt(i)),Un(i))for(let a=qt;a<i.length;a++){const l=i[a],c=l[J].firstChild;null!==c&&Ml(l[J],l,c,r)}const s=e.type;if(8&s)Ml(t,n,e.child,r);else if(32&s){const a=od(e,n);let l;for(;l=a();)r.push(l)}else if(16&s){const a=Fm(n,e);if(Array.isArray(a))r.push(...a);else{const l=Ts(n[$t]);Ml(l[J],l,a,r,!0)}}e=o?e.projectionNext:e.next}return r}class Fs{get rootNodes(){const n=this._lView,e=n[J];return Ml(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ct]}set context(n){this._lView[ct]=n}get destroyed(){return 128==(128&this._lView[ye])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[rt];if(Un(n)){const e=n[Ka],r=e?e.indexOf(this):-1;r>-1&&(cd(n,r),al(e,r))}this._attachedToViewContainer=!1}Mm(this._lView[J],this._lView)}onDestroy(n){R_(this._lView[J],this._lView,null,n)}markForCheck(){Sl(this._cdRefInjectingView||this._lView)}detach(){this._lView[ye]&=-65}reattach(){this._lView[ye]|=64}detectChanges(){El(this._lView[J],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xE(t,n){Os(t,n,n[we],2,null,null)}(this._lView[J],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=n}}class VM extends Fs{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;El(n[J],n,n[ct],!1)}checkNoChanges(){}get context(){return null}}class z_ extends Ps{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Ne(n);return new Ls(e,this.ngModule)}}function G_(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class UM{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,r){r=Ba(r);const o=this.injector.get(n,Od,r);return o!==Od||e===Od?o:this.parentInjector.get(n,e,r)}}class Ls extends l_{get inputs(){return G_(this.componentDef.inputs)}get outputs(){return G_(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function qx(t){return t.map(Gx).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,r,o){let i=(o=o||this.ngModule)instanceof lr?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new UM(n,i):n,a=s.get(u_,null);if(null===a)throw new U(407,!1);const l=s.get(xx,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function mM(t,n,e){return t.selectRootElement(n,e===or.ShadowDom)}(c,r,this.componentDef.encapsulation):ld(c,u,function $M(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Ud(0,null,null,1,0,null,null,null,null,null),p=bl(null,f,null,h,null,null,a,c,l,s,null);let v,y;Fu(p);try{const w=this.componentDef;let T,D=null;w.findHostDirectiveDefs?(T=[],D=new Map,w.findHostDirectiveDefs(w,T,D),T.push(w)):T=[w];const P=function HM(t,n){const e=t[J],r=Je;return t[r]=n,li(e,r,2,"#host",null)}(p,d),$=function zM(t,n,e,r,o,i,s,a){const l=o[J];!function GM(t,n,e,r){for(const o of t)n.mergedAttrs=vs(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(xl(n,n.mergedAttrs,!0),null!==e&&Vm(r,e,n))}(r,t,n,s);const c=i.createRenderer(n,e),u=bl(o,P_(e),null,e.onPush?32:16,o[t.index],t,i,c,a||null,null,null);return l.firstCreatePass&&Hd(l,t,r.length-1),Dl(o,u),o[t.index]=u}(P,d,w,T,p,a,c);y=Mg(f,Je),d&&function WM(t,n,e,r){if(r)$u(t,e,["ng-version",Mx.full]);else{const{attrs:o,classes:i}=function Wx(t){const n=[],e=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&n.push(i,t[++r]):8===o&&e.push(i);else{if(!Hn(o))break;o=i}r++}return{attrs:n,classes:e}}(n.selectors[0]);o&&$u(t,e,o),i&&i.length>0&&jm(t,e,i.join(" "))}}(c,w,d,r),void 0!==e&&function KM(t,n,e){const r=t.projection=[];for(let o=0;o<n.length;o++){const i=e[o];r.push(null!=i?Array.from(i):null)}}(y,this.ngContentSelectors,e),v=function qM(t,n,e,r,o,i){const s=Pt(),a=o[J],l=hn(s,o);L_(a,o,s,e,null,r);for(let u=0;u<e.length;u++)Ut(_o(o,a,s.directiveStart+u,s),o);j_(a,o,s),l&&Ut(l,o);const c=_o(o,a,s.directiveStart+s.componentOffset,s);if(t[ct]=o[ct]=c,null!==i)for(const u of i)u(c,n);return jd(a,s,t),c}($,w,T,D,p,[JM]),Ld(f,p,null)}finally{Lu()}return new BM(this.componentType,v,oi(y,p),p,y)}}class BM extends Cx{constructor(n,e,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new VM(o),this.componentType=n}setInput(n,e){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[n])){const i=this._rootLView;Wd(i[J],i,o,n,e),Sl(on(this._tNode.index,i))}}get injector(){return new Wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function JM(){const t=Pt();Za(j()[J],t)}function Fe(t){let n=function q_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const r=[t];for(;n;){let o;if(Bn(t))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new U(903,!1);o=n.\u0275dir}if(o){if(e){r.push(o);const s=t;s.inputs=Kd(t.inputs),s.declaredInputs=Kd(t.declaredInputs),s.outputs=Kd(t.outputs);const a=o.hostBindings;a&&XM(t,a);const l=o.viewQuery,c=o.contentQueries;if(l&&QM(t,l),c&&ZM(t,c),mu(t.inputs,o.inputs),mu(t.declaredInputs,o.declaredInputs),mu(t.outputs,o.outputs),Bn(o)&&o.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(t),a===Fe&&(e=!1)}}n=Object.getPrototypeOf(n)}!function YM(t){let n=0,e=null;for(let r=t.length-1;r>=0;r--){const o=t[r];o.hostVars=n+=o.hostVars,o.hostAttrs=vs(o.hostAttrs,e=vs(e,o.hostAttrs))}}(r)}function Kd(t){return t===wr?{}:t===ke?[]:t}function QM(t,n){const e=t.viewQuery;t.viewQuery=e?(r,o)=>{n(r,o),e(r,o)}:n}function ZM(t,n){const e=t.contentQueries;t.contentQueries=e?(r,o,i)=>{n(r,o,i),e(r,o,i)}:n}function XM(t,n){const e=t.hostBindings;t.hostBindings=e?(r,o)=>{n(r,o),e(r,o)}:n}function Tl(t){return!!Jd(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Jd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function dr(t,n,e){return t[n]=e}function Bt(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function bo(t,n,e,r){const o=Bt(t,n,e);return Bt(t,n+1,r)||o}function Nt(t,n,e,r){const o=j();return Bt(o,Go(),n)&&(Ie(),ur(et(),o,t,n,e,r)),Nt}function di(t,n,e,r,o,i){const a=bo(t,function Er(){return pe.lFrame.bindingIndex}(),e,o);return xr(2),a?n+fe(e)+r+fe(o)+i:ge}function H(t,n,e,r,o,i,s,a){const l=j(),c=Ie(),u=t+Je,d=c.firstCreatePass?function cT(t,n,e,r,o,i,s,a,l){const c=n.consts,u=li(n,t,4,s||null,Gr(c,a));Bd(n,e,u,Gr(c,l)),Za(n,u);const d=u.tView=Ud(2,u,r,o,i,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,e,r,o,i,s):c.data[u];sr(d,!1);const h=l[we].createComment("");hl(c,l,h,d),Ut(h,l),Dl(l,l[u]=V_(h,l,h,d)),Ja(d)&&Vd(c,l,d),null!=s&&$d(l,d,a)}function Vs(t){return function zo(t,n){return t[n]}(function p1(){return pe.lFrame.contextLView}(),Je+t)}function x(t,n,e){const r=j();return Bt(r,Go(),n)&&function gn(t,n,e,r,o,i,s,a){const l=hn(n,e);let u,c=n.inputs;!a&&null!=c&&(u=c[r])?(Wd(t,e,u,r,o),ms(n)&&function CM(t,n){const e=on(n,t);16&e[ye]||(e[ye]|=32)}(e,n.index)):3&n.type&&(r=function vM(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),o=null!=s?s(o,n.value||"",r):o,i.setProperty(l,r,o))}(Ie(),et(),r,t,n,r[we],e,!1),x}function Yd(t,n,e,r,o){const s=o?"class":"style";Wd(t,e,n.inputs[s],s,r)}function g(t,n,e,r){const o=j(),i=Ie(),s=Je+t,a=o[we],l=i.firstCreatePass?function dT(t,n,e,r,o,i){const s=n.consts,l=li(n,t,2,r,Gr(s,o));return Bd(n,e,l,Gr(s,i)),null!==l.attrs&&xl(l,l.attrs,!1),null!==l.mergedAttrs&&xl(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(s,i,o,n,e,r):i.data[s],c=o[s]=ld(a,n,function E1(){return pe.lFrame.currentNamespace}()),u=Ja(l);return sr(l,!0),Vm(a,c,l),32!=(32&l.flags)&&hl(i,o,c,l),0===function c1(){return pe.lFrame.elementDepthCount}()&&Ut(c,o),function u1(){pe.lFrame.elementDepthCount++}(),u&&(Vd(i,o,l),jd(i,l,o)),null!==r&&$d(o,l),g}function m(){let t=Pt();Au()?ku():(t=t.parent,sr(t,!1));const n=t;!function d1(){pe.lFrame.elementDepthCount--}();const e=Ie();return e.firstCreatePass&&(Za(e,t),Tu(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function O1(t){return 0!=(8&t.flags)}(n)&&Yd(e,n,j(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function I1(t){return 0!=(16&t.flags)}(n)&&Yd(e,n,j(),n.stylesWithoutHost,!1),m}function Qe(t,n,e,r){return g(t,n,e,r),m(),Qe}function yi(t,n,e){const r=j(),o=Ie(),i=t+Je,s=o.firstCreatePass?function hT(t,n,e,r,o){const i=n.consts,s=Gr(i,r),a=li(n,t,8,"ng-container",s);return null!==s&&xl(a,s,!0),Bd(n,e,a,Gr(i,o)),null!==n.queries&&n.queries.elementStart(n,a),a}(i,o,r,n,e):o.data[i];sr(s,!0);const a=r[i]=r[we].createComment("");return hl(o,r,a,s),Ut(a,r),Ja(s)&&(Vd(o,r,s),jd(o,s,r)),null!=e&&$d(r,s),yi}function vi(){let t=Pt();const n=Ie();return Au()?ku():(t=t.parent,sr(t,!1)),n.firstCreatePass&&(Za(n,t),Tu(t)&&n.queries.elementEnd(t)),vi}function Me(){return j()}function $s(t){return!!t&&"function"==typeof t.then}const Qd=function sy(t){return!!t&&"function"==typeof t.subscribe};function A(t,n,e,r){const o=j(),i=Ie(),s=Pt();return function ly(t,n,e,r,o,i,s){const a=Ja(r),c=t.firstCreatePass&&U_(t),u=n[ct],d=$_(n);let h=!0;if(3&r.type||s){const v=hn(r,n),y=s?s(v):v,w=d.length,T=s?P=>s(kt(P[r.index])):r.index;let D=null;if(!s&&a&&(D=function fT(t,n,e,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===e&&o[i+1]===r){const a=n[$o],l=o[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(t,n,o,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=i,D.__ngLastListenerFn__=i,h=!1;else{i=uy(r,n,u,i,!1);const P=e.listen(y,o,i);d.push(i,P),c&&c.push(o,T,w,w+1)}}else i=uy(r,n,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const v=p.length;if(v)for(let y=0;y<v;y+=2){const $=n[p[y]][p[y+1]].subscribe(i),le=d.length;d.push(i,$),c&&c.push(o,r.index,le,-(le+1))}}}(i,o,o[we],s,t,n,r),A}function cy(t,n,e,r){try{return On(6,n,e),!1!==e(r)}catch(o){return H_(t,o),!1}finally{On(7,n,e)}}function uy(t,n,e,r,o){return function i(s){if(s===Function)return r;Sl(t.componentOffset>-1?on(t.index,n):n);let l=cy(n,e,r,s),c=i.__ngNextListenerFn__;for(;c;)l=cy(n,e,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function S(t=1){return function v1(t){return(pe.lFrame.contextLView=function C1(t,n){for(;t>0;)n=n[Uo],t--;return n}(t,pe.lFrame.contextLView))[ct]}(t)}function Il(t,n){return t<<17|n<<2}function Wr(t){return t>>17&32767}function Xd(t){return 2|t}function wo(t){return(131068&t)>>2}function eh(t,n){return-131069&t|n<<2}function th(t){return 1|t}function Cy(t,n,e,r,o){const i=t[e+1],s=null===n;let a=r?Wr(i):wo(i),l=!1;for(;0!==a&&(!1===l||s);){const u=t[a+1];wT(t[a],n)&&(l=!0,t[a+1]=r?th(u):Xd(u)),a=r?Wr(u):wo(u)}l&&(t[e+1]=r?Xd(i):th(i))}function wT(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Zo(t,n)>=0}function Ae(t,n){return function zn(t,n,e,r){const o=j(),i=Ie(),s=xr(2);i.firstUpdatePass&&function Oy(t,n,e,r){const o=t.data;if(null===o[e+1]){const i=o[Kt()],s=function Ty(t,n){return n>=t.expandoStartIndex}(t,e);(function Py(t,n){return 0!=(t.flags&(n?8:16))})(i,r)&&null===n&&!s&&(n=!1),n=function AT(t,n,e,r){const o=function Ru(t){const n=pe.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let i=r?n.residualClasses:n.residualStyles;if(null===o)0===(r?n.classBindings:n.styleBindings)&&(e=Us(e=nh(null,t,n,e,r),n.attrs,r),i=null);else{const s=n.directiveStylingLast;if(-1===s||t[s]!==o)if(e=nh(o,t,n,e,r),null===i){let l=function kT(t,n,e){const r=e?n.classBindings:n.styleBindings;if(0!==wo(r))return t[Wr(r)]}(t,n,r);void 0!==l&&Array.isArray(l)&&(l=nh(null,t,n,l[1],r),l=Us(l,n.attrs,r),function PT(t,n,e,r){t[Wr(e?n.classBindings:n.styleBindings)]=r}(t,n,r,l))}else i=function RT(t,n,e){let r;const o=n.directiveEnd;for(let i=1+n.directiveStylingLast;i<o;i++)r=Us(r,t[i].hostAttrs,e);return Us(r,n.attrs,e)}(t,n,r)}return void 0!==i&&(r?n.residualClasses=i:n.residualStyles=i),e}(o,i,n,r),function CT(t,n,e,r,o,i){let s=i?n.classBindings:n.styleBindings,a=Wr(s),l=wo(s);t[r]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Zo(e,u)>0)&&(c=!0)):u=e,o)if(0!==l){const h=Wr(t[a+1]);t[r+1]=Il(h,a),0!==h&&(t[h+1]=eh(t[h+1],r)),t[a+1]=function yT(t,n){return 131071&t|n<<17}(t[a+1],r)}else t[r+1]=Il(a,0),0!==a&&(t[a+1]=eh(t[a+1],r)),a=r;else t[r+1]=Il(l,0),0===a?a=r:t[l+1]=eh(t[l+1],r),l=r;c&&(t[r+1]=Xd(t[r+1])),Cy(t,u,r,!0),Cy(t,u,r,!1),function bT(t,n,e,r,o){const i=o?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof n&&Zo(i,n)>=0&&(e[r+1]=th(e[r+1]))}(n,u,t,r,i),s=Il(a,l),i?n.classBindings=s:n.styleBindings=s}(o,i,n,e,s,r)}}(i,t,s,r),n!==ge&&Bt(o,s,n)&&function Ay(t,n,e,r,o,i,s,a){if(!(3&n.type))return;const l=t.data,c=l[a+1],u=function vT(t){return 1==(1&t)}(c)?ky(l,n,e,o,wo(c),s):void 0;Al(u)||(Al(i)||function _T(t){return 2==(2&t)}(c)&&(i=ky(l,null,e,o,a,s)),function FE(t,n,e,r,o){if(n)o?t.addClass(e,r):t.removeClass(e,r);else{let i=-1===r.indexOf("-")?void 0:sn.DashCase;null==o?t.removeStyle(e,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=sn.Important),t.setStyle(e,r,o,i))}}(r,s,Ya(Kt(),e),o,i))}(i,i.data[Kt()],o,o[we],t,o[s+1]=function jT(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=He(qr(t)))),t}(n,e),r,s)}(t,n,null,!0),Ae}function nh(t,n,e,r,o){let i=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(i=n[a],r=Us(r,i.hostAttrs,o),i!==t);)a++;return null!==t&&(e.directiveStylingLast=a),r}function Us(t,n,e){const r=e?1:2;let o=-1;if(null!==n)for(let i=0;i<n.length;i++){const s=n[i];"number"==typeof s?o=s:o===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),fn(t,s,!!e||n[++i]))}return void 0===t?null:t}function ky(t,n,e,r,o,i){const s=null===n;let a;for(;o>0;){const l=t[o],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[o+1];h===ge&&(h=d?ke:void 0);let f=d?Ku(h,r):u===r?h:void 0;if(c&&!Al(f)&&(f=Ku(l,r)),Al(f)&&(a=f,s))return a;const p=t[o+1];o=s?Wr(p):wo(p)}if(null!==n){let l=i?n.residualClasses:n.residualStyles;null!=l&&(a=Ku(l,r))}return a}function Al(t){return void 0!==t}function C(t,n=""){const e=j(),r=Ie(),o=t+Je,i=r.firstCreatePass?li(r,o,1,n,null):r.data[o],s=e[o]=function ad(t,n){return t.createText(n)}(e[we],n);hl(r,e,s,i),sr(i,!1)}function ot(t){return Oe("",t,""),ot}function Oe(t,n,e){const r=j(),o=function ui(t,n,e,r){return Bt(t,Go(),e)?n+fe(e)+r:ge}(r,t,n,e);return o!==ge&&Ir(r,Kt(),o),Oe}function pr(t,n,e,r,o){const i=j(),s=di(i,t,n,e,r,o);return s!==ge&&Ir(i,Kt(),s),pr}const wi="en-US";let ev=wi;function ih(t,n,e,r,o){if(t=ie(t),Array.isArray(t))for(let i=0;i<t.length;i++)ih(t[i],n,e,r,o);else{const i=Ie(),s=j();let a=Co(t)?t:ie(t.provide),l=a_(t);const c=Pt(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Co(t)||!t.multi){const f=new ys(l,o,N),p=ah(a,n,o?u:u+h,d);-1===p?(zu(ol(c,s),i,a),sh(i,t,n.length),n.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(f),s.push(f)):(e[p]=f,s[p]=f)}else{const f=ah(a,n,u+h,d),p=ah(a,n,u,u+h),y=p>=0&&e[p];if(o&&!y||!o&&!(f>=0&&e[f])){zu(ol(c,s),i,a);const w=function nI(t,n,e,r,o){const i=new ys(t,e,N);return i.multi=[],i.index=n,i.componentProviders=0,Ev(i,o,r&&!e),i}(o?tI:eI,e.length,o,r,l);!o&&y&&(e[p].providerFactory=w),sh(i,t,n.length,0),n.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),e.push(w),s.push(w)}else sh(i,t,f>-1?f:p,Ev(e[o?p:f],l,!o&&r));!o&&r&&y&&e[p].componentProviders++}}}function sh(t,n,e,r){const o=Co(n),i=function fx(t){return!!t.useClass}(n);if(o||i){const l=(i?ie(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function Ev(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function ah(t,n,e,r){for(let o=e;o<r;o++)if(n[o]===t)return o;return-1}function eI(t,n,e,r){return lh(this.multi,[])}function tI(t,n,e,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=_o(e,e[J],this.providerFactory.index,r);i=a.slice(0,s),lh(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],lh(o,i);return i}function lh(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function Ze(t,n=[]){return e=>{e.providersResolver=(r,o)=>function XO(t,n,e){const r=Ie();if(r.firstCreatePass){const o=Bn(t);ih(e,r.data,r.blueprint,o,!0),ih(n,r.data,r.blueprint,o,!1)}}(r,o?o(t):t,n)}}class Di{}class xv{}class Mv extends Di{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new z_(this);const r=un(n);this._bootstrapComponents=Or(r.bootstrap),this._r3Injector=D_(n,e,[{provide:Di,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],He(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class ch extends xv{constructor(n){super(),this.moduleType=n}create(n){return new Mv(this.moduleType,n)}}class oI extends Di{constructor(n,e,r){super(),this.componentFactoryResolver=new z_(this),this.instance=null;const o=new s_([...n,{provide:Di,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],e||vl(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Fl(t,n,e=null){return new oI(t,n,e).injector}let iI=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const r=n_(0,e.type),o=r.length>0?Fl([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,o)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=Q({token:t,providedIn:"environment",factory:()=>new t(K(lr))}),t})();function Tv(t){t.getStandaloneInjector=n=>n.get(iI).getOrCreateStandaloneInjector(t)}function Si(t,n,e){const r=Wt()+t,o=j();return o[r]===ge?dr(o,r,e?n.call(e):n()):function js(t,n){return t[n]}(o,r)}function Ei(t,n,e,r,o){return function Fv(t,n,e,r,o,i,s){const a=n+e;return bo(t,a,o,i)?dr(t,a+2,s?r.call(s,o,i):r(o,i)):Ws(t,a+2)}(j(),Wt(),t,n,e,r,o)}function dh(t,n,e,r,o,i){return function Lv(t,n,e,r,o,i,s,a){const l=n+e;return function Ol(t,n,e,r,o){const i=bo(t,n,e,r);return Bt(t,n+2,o)||i}(t,l,o,i,s)?dr(t,l+3,a?r.call(a,o,i,s):r(o,i,s)):Ws(t,l+3)}(j(),Wt(),t,n,e,r,o,i)}function Ws(t,n){const e=t[n];return e===ge?void 0:e}function hh(t){return n=>{setTimeout(t,void 0,n)}}const st=class TI extends E{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,r){let o=n,i=e||(()=>null),s=r;if(n&&"object"==typeof n){const l=n;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=hh(i),o&&(o=hh(o)),s&&(s=hh(s)));const a=super.subscribe({next:o,error:i,complete:s});return n instanceof k&&n.add(a),a}};function OI(){return this._results[Symbol.iterator]()}class fh{get changes(){return this._changes||(this._changes=new st)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=fh.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=OI)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const r=this;r.dirty=!1;const o=function In(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function $1(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=n[r];if(e&&(o=e(o),i=e(i)),i!==o)return!1}return!0}(r._results,o,e))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ar=(()=>{class t{}return t.__NG_ELEMENT_ID__=kI,t})();const II=Ar,AI=class extends II{constructor(n,e,r){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(n,e){const r=this._declarationTContainer.tView,o=bl(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,e||null);o[ps]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[ir];return null!==s&&(o[ir]=s.createEmbeddedView(r)),Ld(r,o,n),new Fs(o)}};function kI(){return Ll(Pt(),j())}function Ll(t,n){return 4&t.type?new AI(n,t,oi(t,n)):null}let qn=(()=>{class t{}return t.__NG_ELEMENT_ID__=PI,t})();function PI(){return Bv(Pt(),j())}const RI=qn,$v=class extends RI{constructor(n,e,r){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=r}get element(){return oi(this._hostTNode,this._hostLView)}get injector(){return new Wo(this._hostTNode,this._hostLView)}get parentInjector(){const n=Hu(this._hostTNode,this._hostLView);if(Gg(n)){const e=nl(n,this._hostLView),r=tl(n);return new Wo(e[J].data[r+8],e)}return new Wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=Uv(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-qt}createEmbeddedView(n,e,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=n.createEmbeddedView(e||{},i);return this.insert(s,o),s}createComponent(n,e,r,o,i){const s=n&&!function bs(t){return"function"==typeof t}(n);let a;if(s)a=e;else{const d=e||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const l=s?n:new Ls(Ne(n)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const h=(s?c:this.parentInjector).get(lr,null);h&&(i=h)}const u=l.create(c,o,void 0,i);return this.insert(u.hostView,a),u}insert(n,e){const r=n._lView,o=r[J];if(function l1(t){return Un(t[rt])}(r)){const u=this.indexOf(n);if(-1!==u)this.detach(u);else{const d=r[rt],h=new $v(d,d[Vt],d[rt]);h.detach(h.indexOf(n))}}const i=this._adjustIndex(e),s=this._lContainer;!function TE(t,n,e,r){const o=qt+r,i=e.length;r>0&&(e[o-1][$n]=n),r<i-qt?(n[$n]=e[o],rm(e,qt+r,n)):(e.push(n),n[$n]=null),n[rt]=e;const s=n[ps];null!==s&&e!==s&&function OE(t,n){const e=t[Ho];n[$t]!==n[rt][rt][$t]&&(t[vg]=!0),null===e?t[Ho]=[n]:e.push(n)}(s,n);const a=n[ir];null!==a&&a.insertView(t),n[ye]|=64}(o,r,s,i);const a=hd(i,s),l=r[we],c=dl(l,s[Wa]);return null!==c&&function EE(t,n,e,r,o,i){r[Sr]=o,r[Vt]=n,Os(t,r,e,1,o,i)}(o,s[Vt],l,r,c,a),n.attachToViewContainerRef(),rm(ph(s),i,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=Uv(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),r=cd(this._lContainer,e);r&&(al(ph(this._lContainer),e),Mm(r[J],r))}detach(n){const e=this._adjustIndex(n,-1),r=cd(this._lContainer,e);return r&&null!=al(ph(this._lContainer),e)?new Fs(r):null}_adjustIndex(n,e=0){return n??this.length+e}};function Uv(t){return t[Ka]}function ph(t){return t[Ka]||(t[Ka]=[])}function Bv(t,n){let e;const r=n[t.index];if(Un(r))e=r;else{let o;if(8&t.type)o=kt(r);else{const i=n[we];o=i.createComment("");const s=hn(t,n);vo(i,dl(i,s),o,function PE(t,n){return t.nextSibling(n)}(i,s),!1)}n[t.index]=e=V_(r,n,o,t),Dl(n,e)}return new $v(e,t,n)}class gh{constructor(n){this.queryList=n,this.matches=null}clone(){return new gh(this.queryList)}setDirty(){this.queryList.setDirty()}}class mh{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const r=null!==n.contentQueries?n.contentQueries[0]:e.length,o=[];for(let i=0;i<r;i++){const s=e.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new mh(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==Yv(n,e).matches&&this.queries[e].setDirty()}}class Hv{constructor(n,e,r=null){this.predicate=n,this.flags=e,this.read=r}}class _h{constructor(n=[]){this.queries=n}elementStart(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let r=0;r<this.length;r++){const o=null!==e?e.length:0,i=this.getByIndex(r).embeddedTView(n,o);i&&(i.indexInDeclarationView=r,null!==e?e.push(i):e=[i])}return null!==e?new _h(e):null}template(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class yh{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new yh(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(n,e,NI(e,i)),this.matchTNodeWithReadOption(n,e,il(e,n,i,!1,!1))}else r===Ar?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,il(e,n,r,!1,!1))}matchTNodeWithReadOption(n,e,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===pn||o===qn||o===Ar&&4&e.type)this.addMatch(e.index,-2);else{const i=il(e,n,o,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function NI(t,n){const e=t.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===n)return e[r+1];return null}function LI(t,n,e,r){return-1===e?function FI(t,n){return 11&t.type?oi(t,n):4&t.type?Ll(t,n):null}(n,t):-2===e?function jI(t,n,e){return e===pn?oi(n,t):e===Ar?Ll(n,t):e===qn?Bv(n,t):void 0}(t,n,r):_o(t,t[J],e,n)}function zv(t,n,e,r){const o=n[ir].queries[r];if(null===o.matches){const i=t.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:LI(n,i[c],s[l+1],e.metadata.read))}o.matches=a}return o.matches}function vh(t,n,e,r){const o=t.queries.getByIndex(e),i=o.matches;if(null!==i){const s=zv(t,n,o,e);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(s[a/2]);else{const c=i[a+1],u=n[-l];for(let d=qt;d<u.length;d++){const h=u[d];h[ps]===h[rt]&&vh(h[J],h,c,r)}if(null!==u[Ho]){const d=u[Ho];for(let h=0;h<d.length;h++){const f=d[h];vh(f[J],f,c,r)}}}}}return r}function Gv(t){const n=j(),e=Ie(),r=Ng();Nu(r+1);const o=Yv(e,r);if(t.dirty&&function a1(t){return 4==(4&t[ye])}(n)===(2==(2&o.metadata.flags))){if(null===o.matches)t.reset([]);else{const i=o.crossesNgTemplate?vh(e,n,r,[]):zv(e,n,o,r);t.reset(i,Sx),t.notifyOnChanges()}return!0}return!1}function qv(t,n,e,r){const o=Ie();if(o.firstCreatePass){const i=Pt();(function Jv(t,n,e){null===t.queries&&(t.queries=new _h),t.queries.track(new yh(n,e))})(o,new Hv(n,e,r),i.index),function UI(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(o,t),2==(2&e)&&(o.staticContentQueries=!0)}!function Kv(t,n,e){const r=new fh(4==(4&e));R_(t,n,r,r.destroy),null===n[ir]&&(n[ir]=new mh),n[ir].queries.push(new gh(r))}(o,j(),e)}function Yv(t,n){return t.queries.getByIndex(n)}function jl(t,n){return Ll(t,n)}function $l(...t){}const Ul=new Z("Application Initializer");let Bl=(()=>{class t{constructor(e){this.appInits=e,this.resolve=$l,this.reject=$l,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if($s(i))e.push(i);else if(Qd(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});e.push(s)}}Promise.all(e).then(()=>{r()}).catch(o=>{this.reject(o)}),0===e.length&&r(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(K(Ul,8))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ys=new Z("AppId",{providedIn:"root",factory:function pC(){return`${Eh()}${Eh()}${Eh()}`}});function Eh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gC=new Z("Platform Initializer"),xh=new Z("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let aA=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const kr=new Z("LocaleId",{providedIn:"root",factory:()=>be(kr,se.Optional|se.SkipSelf)||function lA(){return typeof $localize<"u"&&$localize.locale||wi}()});class uA{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let mC=(()=>{class t{compileModuleSync(e){return new ch(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),i=Or(un(e).declarations).reduce((s,a)=>{const l=Ne(a);return l&&s.push(new Ls(l)),s},[]);return new uA(r,i)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const fA=(()=>Promise.resolve(0))();function Mh(t){typeof Zone>"u"?fA.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ut{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new st(!1),this.onMicrotaskEmpty=new st(!1),this.onStable=new st(!1),this.onError=new st(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&e,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function pA(){let t=Ke.requestAnimationFrame,n=Ke.cancelAnimationFrame;if(typeof Zone<"u"&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function _A(t){const n=()=>{!function mA(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ke,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Oh(t),t.isCheckStableRunning=!0,Th(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Oh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,o,i,s,a)=>{try{return vC(t),e.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&n(),CC(t)}},onInvoke:(e,r,o,i,s,a,l)=>{try{return vC(t),e.invoke(o,i,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&n(),CC(t)}},onHasTask:(e,r,o,i)=>{e.hasTask(o,i),r===o&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Oh(t),Th(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,r,o,i)=>(e.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ut.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(ut.isInAngularZone())throw new U(909,!1)}run(n,e,r){return this._inner.run(n,e,r)}runTask(n,e,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,n,gA,$l,$l);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(n,e,r){return this._inner.runGuarded(n,e,r)}runOutsideAngular(n){return this._outer.run(n)}}const gA={};function Th(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Oh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function vC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function CC(t){t._nesting--,Th(t)}class yA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new st,this.onMicrotaskEmpty=new st,this.onStable=new st,this.onError=new st}run(n,e,r){return n.apply(e,r)}runGuarded(n,e,r){return n.apply(e,r)}runOutsideAngular(n){return n()}runTask(n,e,r,o){return n.apply(e,r)}}const bC=new Z(""),Hl=new Z("");let kh,Ih=(()=>{class t{constructor(e,r,o){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kh||(function vA(t){kh=t}(o),o.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ut.assertNotInAngularZone(),Mh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Mh(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:o})}whenStable(e,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,o){return[]}}return t.\u0275fac=function(e){return new(e||t)(K(ut),K(Ah),K(Hl))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})(),Ah=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return kh?.findTestabilityInTree(this,e,r)??null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Pr=!1;let Kr=null;const wC=new Z("AllowMultipleToken"),Ph=new Z("PlatformDestroyListeners"),DC=new Z("appBootstrapListener");class SC{constructor(n,e){this.name=n,this.token=e}}function xC(t,n,e=[]){const r=`Platform: ${n}`,o=new Z(r);return(i=[])=>{let s=Rh();if(!s||s.injector.get(wC,!1)){const a=[...e,...i,{provide:o,useValue:!0}];t?t(a):function wA(t){if(Kr&&!Kr.get(wC,!1))throw new U(400,!1);Kr=t;const n=t.get(TC);(function EC(t){const n=t.get(gC,null);n&&n.forEach(e=>e())})(t)}(function MC(t=[],n){return cr.create({name:n,providers:[{provide:Ed,useValue:"platform"},{provide:Ph,useValue:new Set([()=>Kr=null])},...t]})}(a,r))}return function SA(t){const n=Rh();if(!n)throw new U(401,!1);return n}()}}function Rh(){return Kr?.get(TC)??null}let TC=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const o=function IC(t,n){let e;return e="noop"===t?new yA:("zone.js"===t?void 0:t)||new ut(n),e}(r?.ngZone,function OC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:ut,useValue:o}];return o.run(()=>{const s=cr.create({providers:i,parent:this.injector,name:e.moduleType.name}),a=e.create(s),l=a.injector.get(ii,null);if(!l)throw new U(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Gl(this._modules,a),c.unsubscribe()})}),function AC(t,n,e){try{const r=e();return $s(r)?r.catch(o=>{throw n.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw n.runOutsideAngular(()=>t.handleError(r)),r}}(l,o,()=>{const c=a.injector.get(Bl);return c.runInitializers(),c.donePromise.then(()=>(function tv(t){En(t,"Expected localeId to be defined"),"string"==typeof t&&(ev=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(kr,wi)||wi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,r=[]){const o=kC({},r);return function CA(t,n,e){const r=new ch(e);return Promise.resolve(r)}(0,0,e).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(e){const r=e.injector.get(zl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!e.instance.ngDoBootstrap)throw new U(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(Ph,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(K(cr))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function kC(t,n){return Array.isArray(n)?n.reduce(kC,t):{...t,...n}}let zl=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,r,o){this._zone=e,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new We(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new We(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{ut.assertNotInAngularZone(),Mh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{ut.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function MS(...t){const n=ls(t),e=function CS(t,n){return"number"==typeof pu(t)?t.pop():n}(t,1/0),r=t;return r.length?1===r.length?jn(r[0]):Lo(e)(pt(r,n)):nr}(i,s.pipe(function TS(t={}){const{connector:n=(()=>new E),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const v=s;f(),v?.unsubscribe()};return M((v,y)=>{c++,!d&&!u&&h();const w=l=l??n();y.add(()=>{c--,0===c&&!d&&!u&&(a=gu(p,o))}),w.subscribe(y),!s&&c>0&&(s=new en({next:T=>w.next(T),error:T=>{d=!0,h(),a=gu(f,e,T),w.error(T)},complete:()=>{u=!0,h(),a=gu(f,r),w.complete()}}),jn(v).subscribe(s))})(i)}}()))}bootstrap(e,r){const o=e instanceof l_;if(!this._injector.get(Bl).done){!o&&function Vo(t){const n=Ne(t)||jt(t)||rn(t);return null!==n&&n.standalone}(e);throw new U(405,Pr)}let s;s=o?e:this._injector.get(Ps).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function bA(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Di),c=s.create(cr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(bC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Gl(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new U(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;Gl(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(DC,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Gl(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new U(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(e){return new(e||t)(K(ut),K(lr),K(ii))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Gl(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let Ti=(()=>{class t{}return t.__NG_ELEMENT_ID__=xA,t})();function xA(t){return function MA(t,n,e){if(ms(t)&&!e){const r=on(t.index,n);return new Fs(r,r)}return 47&t.type?new Fs(n[$t],n):null}(Pt(),j(),16==(16&t))}class LC{constructor(){}supports(n){return Tl(n)}create(n){return new PA(n)}}const kA=(t,n)=>n;class PA{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||kA}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,r=this._removalsHead,o=0,i=null;for(;e||r;){const s=!r||e&&e.currentIndex<VC(r,o,i)?e:r,a=VC(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,u=l-o;if(c!=u){for(let h=0;h<c;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<c&&(i[h]=f+1)}i[s.previousIndex]=u-c}}a!==l&&n(s,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Tl(n))throw new U(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,i,s,e=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)i=n[a],s=this._trackByFn(a,i),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,i,s,a)),Object.is(e.item,i)||this._addIdentityChange(e,i)):(e=this._mismatch(e,i,s,a),r=!0),e=e._next}else o=0,function sT(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let r;for(;!(r=e.next()).done;)n(r.value)}}(n,a=>{s=this._trackByFn(o,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,o),r=!0),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,r,o){let i;return null===n?i=this._itTail:(i=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,i,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,i,o)):n=this._addAfter(new RA(e,r),i,o),n}_verifyReinsertion(n,e,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?n=this._reinsertAfter(i,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,i=n._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(n,e,r),this._addToMoves(n,r),n}_moveAfter(n,e,r){return this._unlink(n),this._insertAfter(n,e,r),this._addToMoves(n,r),n}_addAfter(n,e,r){return this._insertAfter(n,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,r){const o=null===e?this._itHead:e._next;return n._next=o,n._prev=e,null===o?this._itTail=n:o._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new jC),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,r=n._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jC),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class RA{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NA{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const e=n._prevDup,r=n._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class jC{constructor(){this.map=new Map}put(n){const e=n.trackById;let r=this.map.get(e);r||(r=new NA,this.map.set(e,r)),r.add(n)}get(n,e){const o=this.map.get(n);return o?o.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VC(t,n,e){const r=t.previousIndex;if(null===r)return r;let o=0;return e&&r<e.length&&(o=e[r]),r+n+o}class $C{constructor(){}supports(n){return n instanceof Map||Jd(n)}create(){return new FA}}class FA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||Jd(n)))throw new U(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(o,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const r=n._prev;return e._next=n,e._prev=r,n._prev=e,r&&(r._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const o=this._records.get(n);this._maybeAddToChanges(o,e);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new LA(n);return this._records.set(n,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(r=>e(n[r],r))}}class LA{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UC(){return new Kl([new LC])}let Kl=(()=>{class t{constructor(e){this.factories=e}static create(e,r){if(null!=r){const o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||UC()),deps:[[t,new Ss,new Ds]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(null!=r)return r;throw new U(901,!1)}}return t.\u0275prov=Q({token:t,providedIn:"root",factory:UC}),t})();function BC(){return new Qs([new $C])}let Qs=(()=>{class t{constructor(e){this.factories=e}static create(e,r){if(r){const o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||BC()),deps:[[t,new Ss,new Ds]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(r)return r;throw new U(901,!1)}}return t.\u0275prov=Q({token:t,providedIn:"root",factory:BC}),t})();const $A=xC(null,"core",[]);let UA=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(K(zl))},t.\u0275mod=Vn({type:t}),t.\u0275inj=xn({}),t})();function Oi(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Vh=null;function Rr(){return Vh}class zA{}const Qt=new Z("DocumentToken");let $h=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:function(){return function GA(){return K(HC)}()},providedIn:"platform"}),t})();const qA=new Z("Location Initialized");let HC=(()=>{class t extends $h{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(e){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){zC()?this._history.pushState(e,r,o):this._location.hash=o}replaceState(e,r,o){zC()?this._history.replaceState(e,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(K(Qt))},t.\u0275prov=Q({token:t,factory:function(){return function WA(){return new HC(K(Qt))}()},providedIn:"platform"}),t})();function zC(){return!!window.history.pushState}function Uh(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function GC(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Nr(t){return t&&"?"!==t[0]?"?"+t:t}let Eo=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:function(){return be(WC)},providedIn:"root"}),t})();const qC=new Z("appBaseHref");let WC=(()=>{class t extends Eo{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??be(Qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Uh(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Nr(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,i){const s=this.prepareExternalUrl(o+Nr(i));this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){const s=this.prepareExternalUrl(o+Nr(i));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(K($h),K(qC,8))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),KA=(()=>{class t extends Eo{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Uh(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+Nr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+Nr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(K($h),K(qC,8))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})(),Bh=(()=>{class t{constructor(e){this._subject=new st,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function QA(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(GC(KC(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Nr(r))}normalize(e){return t.stripTrailingSlash(function YA(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,KC(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Nr(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Nr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r,complete:o})}}return t.normalizeQueryParams=Nr,t.joinWithSlash=Uh,t.stripTrailingSlash=GC,t.\u0275fac=function(e){return new(e||t)(K(Eo))},t.\u0275prov=Q({token:t,factory:function(){return function JA(){return new Bh(K(Eo))}()},providedIn:"root"}),t})();function KC(t){return t.replace(/\/index.html$/,"")}function rb(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const r=e.indexOf("="),[o,i]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===n)return decodeURIComponent(i)}return null}const Zh=/\s+/,ob=[];let oc=(()=>{class t{constructor(e,r,o,i){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this.initialClasses=ob,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Zh):ob}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Zh):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Zh).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return t.\u0275fac=function(e){return new(e||t)(N(Kl),N(Qs),N(pn),N(Tr))},t.\u0275dir=ce({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class Nk{constructor(n,e,r,o){this.$implicit=n,this.ngForOf=e,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ic=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,o){this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Nk(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),ab(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{ab(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,r){return!0}}return t.\u0275fac=function(e){return new(e||t)(N(qn),N(Ar),N(Kl))},t.\u0275dir=ce({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function ab(t,n){t.context.$implicit=n.item}let Ii=(()=>{class t{constructor(e,r){this._viewContainer=e,this._context=new Lk,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){lb("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){lb("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return t.\u0275fac=function(e){return new(e||t)(N(qn),N(Ar))},t.\u0275dir=ce({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class Lk{constructor(){this.$implicit=null,this.ngIf=null}}function lb(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${He(n)}'.`)}let ub=(()=>{class t{constructor(e,r,o){this._ngEl=e,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[o,i]=e.split("."),s=-1===o.indexOf("-")?void 0:sn.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,o,i?`${r}${i}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,o,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(N(pn),N(Qs),N(Tr))},t.\u0275dir=ce({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),t})(),hb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vn({type:t}),t.\u0275inj=xn({}),t})();let hP=(()=>{class t{}return t.\u0275prov=Q({token:t,providedIn:"root",factory:()=>new fP(K(Qt),window)}),t})();class fP{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function pP(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(n)||i.querySelector(`[name="${n}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=pb(this.window.history)||pb(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function pb(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class gb{}class UP extends zA{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class af extends UP{static makeCurrent(){!function HA(t){Vh||(Vh=t)}(new af)}onAndCancel(n,e,r){return n.addEventListener(e,r,!1),()=>{n.removeEventListener(e,r,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function BP(){return ta=ta||document.querySelector("base"),ta?ta.getAttribute("href"):null}();return null==e?null:function HP(t){lc=lc||document.createElement("a"),lc.setAttribute("href",t);const n=lc.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return rb(document.cookie,n)}}let lc,ta=null;const Cb=new Z("TRANSITION_ID"),GP=[{provide:Ul,useFactory:function zP(t,n,e){return()=>{e.get(Bl).donePromise.then(()=>{const r=Rr(),o=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[Cb,Qt,cr],multi:!0}];let WP=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const cc=new Z("EventManagerPlugins");let uc=(()=>{class t{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o){return this._findPluginFor(r).addEventListener(e,r,o)}addGlobalEventListener(e,r,o){return this._findPluginFor(r).addGlobalEventListener(e,r,o)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(K(cc),K(ut))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();class bb{constructor(n){this._doc=n}addGlobalEventListener(n,e,r){const o=Rr().getGlobalEventTarget(this._doc,n);if(!o)throw new Error(`Unsupported event target ${o} for event ${e}`);return this.addEventListener(o,e,r)}}let wb=(()=>{class t{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const o=this.usageCount;let i=o.get(e)??0;return i+=r,i>0?o.set(e,i):o.delete(e),i}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})(),na=(()=>{class t extends wb{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(i=>i.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const o=this.doc.createElement("style");o.textContent=r,e.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return t.\u0275fac=function(e){return new(e||t)(K(Qt))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const lf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cf=/%COMP%/g,Eb=new Z("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function xb(t,n){return n.flat(100).map(e=>e.replace(cf,t))}function Mb(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let uf=(()=>{class t{constructor(e,r,o,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new df(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(e,r);return o instanceof Ib?o.applyToHost(e):o instanceof hf&&o.applyStyles(),o}getOrCreateRenderer(e,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case or.Emulated:i=new Ib(s,a,r,this.appId,l);break;case or.ShadowDom:return new eR(s,a,e,r);default:i=new hf(s,a,r,l)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(K(uc),K(na),K(Ys),K(Eb))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();class df{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(lf[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){(Ob(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(Ob(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,o){if(o){e=o+":"+e;const i=lf[o];i?n.setAttributeNS(i,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){const o=lf[r];o?n.removeAttributeNS(o,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,o){o&(sn.DashCase|sn.Important)?n.style.setProperty(e,r,o&sn.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&sn.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n[e]=r}setValue(n,e){n.nodeValue=e}listen(n,e,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,Mb(r)):this.eventManager.addEventListener(n,e,Mb(r))}}function Ob(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class eR extends df{constructor(n,e,r,o){super(n),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=xb(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hf extends df{constructor(n,e,r,o,i=r.id){super(n),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=xb(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ib extends hf{constructor(n,e,r,o,i){const s=o+"-"+r.id;super(n,e,r,i,s),this.contentAttr=function QP(t){return"_ngcontent-%COMP%".replace(cf,t)}(s),this.hostAttr=function ZP(t){return"_nghost-%COMP%".replace(cf,t)}(s)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}}let tR=(()=>{class t extends bb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o){return e.addEventListener(r,o,!1),()=>this.removeEventListener(e,r,o)}removeEventListener(e,r,o){return e.removeEventListener(r,o)}}return t.\u0275fac=function(e){return new(e||t)(K(Qt))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const Ab=["alt","control","meta","shift"],nR={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rR={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let oR=(()=>{class t extends bb{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,r,o){const i=t.parseEventName(r),s=t.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ab.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let o=nR[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(o=e.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ab.forEach(s=>{s!==o&&(0,rR[s])(e)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(e,r,o){return i=>{t.matchEventFullKeyCode(i,e)&&o.runGuarded(()=>r(i))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(K(Qt))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const lR=xC($A,"browser",[{provide:xh,useValue:"browser"},{provide:gC,useValue:function iR(){af.makeCurrent()},multi:!0},{provide:Qt,useFactory:function aR(){return function UE(t){md=t}(document),document},deps:[]}]),Rb=new Z(""),Nb=[{provide:Hl,useClass:class qP{addToWindow(n){Ke.getAngularTestability=(r,o=!0)=>{const i=n.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},Ke.getAllAngularTestabilities=()=>n.getAllTestabilities(),Ke.getAllAngularRootElements=()=>n.getAllRootElements(),Ke.frameworkStabilizers||(Ke.frameworkStabilizers=[]),Ke.frameworkStabilizers.push(r=>{const o=Ke.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(l){s=s||l,i--,0==i&&r(s)};o.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(n,e,r){return null==e?null:n.getTestability(e)??(r?Rr().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:bC,useClass:Ih,deps:[ut,Ah,Hl]},{provide:Ih,useClass:Ih,deps:[ut,Ah,Hl]}],Fb=[{provide:Ed,useValue:"root"},{provide:ii,useFactory:function sR(){return new ii},deps:[]},{provide:cc,useClass:tR,multi:!0,deps:[Qt,ut,xh]},{provide:cc,useClass:oR,multi:!0,deps:[Qt]},{provide:uf,useClass:uf,deps:[uc,na,Ys,Eb]},{provide:u_,useExisting:uf},{provide:wb,useExisting:na},{provide:na,useClass:na,deps:[Qt]},{provide:uc,useClass:uc,deps:[cc,ut]},{provide:gb,useClass:WP,deps:[]},[]];let cR=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:Ys,useValue:e.appId},{provide:Cb,useExisting:Ys},GP]}}}return t.\u0275fac=function(e){return new(e||t)(K(Rb,12))},t.\u0275mod=Vn({type:t}),t.\u0275inj=xn({providers:[...Fb,...Nb],imports:[hb,UA]}),t})(),Lb=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)(K(Qt))},t.\u0275prov=Q({token:t,factory:function(e){let r=null;return r=e?new e:function dR(){return new Lb(K(Qt))}(),r},providedIn:"root"}),t})();function X(...t){return pt(t,ls(t))}function Yr(t,n){return re(n)?At(t,n,1):At(t,1)}function Lr(t,n){return M((e,r)=>{let o=0;e.subscribe(L(r,i=>t.call(n,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class dc{}class gf{}class jr{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const o=e.slice(0,r),i=o.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=e.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(e,i)}})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof jr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new jr;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof jr?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,e);const o=("a"===n.op?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":const i=n.value;if(i){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class _R{encodeKey(n){return $b(n)}encodeValue(n){return $b(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const vR=/%(\d[a-f0-9])/gi,CR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $b(t){return encodeURIComponent(t).replace(vR,(n,e)=>CR[e]??n)}function hc(t){return`${t}`}class Qr{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new _R,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yR(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,i)),n.decodeValue(o.slice(i+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const r=n.fromObject[e],o=Array.isArray(r)?r.map(hc):[hc(r)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(r=>{const o=n[r];Array.isArray(o)?o.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Qr({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(hc(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const o=r.indexOf(hc(n.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class bR{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function Ub(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Bb(t){return typeof Blob<"u"&&t instanceof Blob}function Hb(t){return typeof FormData<"u"&&t instanceof FormData}class ra{constructor(n,e,r,o){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function wR(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new jr),this.context||(this.context=new bR),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Qr,this.urlWithParams=e}serializeBody(){return null===this.body?null:Ub(this.body)||Bb(this.body)||Hb(this.body)||function DR(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Hb(this.body)?null:Bb(this.body)?this.body.type||null:Ub(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,i=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,a=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let l=n.headers||this.headers,c=n.params||this.params;const u=n.context??this.context;return void 0!==n.setHeaders&&(l=Object.keys(n.setHeaders).reduce((d,h)=>d.set(h,n.setHeaders[h]),l)),n.setParams&&(c=Object.keys(n.setParams).reduce((d,h)=>d.set(h,n.setParams[h]),c)),new ra(e,r,i,{params:c,headers:l,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var yt=(()=>((yt=yt||{})[yt.Sent=0]="Sent",yt[yt.UploadProgress=1]="UploadProgress",yt[yt.ResponseHeader=2]="ResponseHeader",yt[yt.DownloadProgress=3]="DownloadProgress",yt[yt.Response=4]="Response",yt[yt.User=5]="User",yt))();class mf{constructor(n,e=200,r="OK"){this.headers=n.headers||new jr,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class _f extends mf{constructor(n={}){super(n),this.type=yt.ResponseHeader}clone(n={}){return new _f({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class fc extends mf{constructor(n={}){super(n),this.type=yt.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new fc({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class zb extends mf{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function yf(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Ai=(()=>{class t{constructor(e){this.handler=e}request(e,r,o={}){let i;if(e instanceof ra)i=e;else{let l,c;l=o.headers instanceof jr?o.headers:new jr(o.headers),o.params&&(c=o.params instanceof Qr?o.params:new Qr({fromObject:o.params})),i=new ra(e,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=X(i).pipe(Yr(l=>this.handler.handle(l)));if(e instanceof ra||"events"===o.observe)return s;const a=s.pipe(Lr(l=>l instanceof fc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(F(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(F(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(F(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(F(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Qr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,yf(o,r))}post(e,r,o={}){return this.request("POST",e,yf(o,r))}put(e,r,o={}){return this.request("PUT",e,yf(o,r))}}return t.\u0275fac=function(e){return new(e||t)(K(dc))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();function Gb(t,n){return n(t)}function SR(t,n){return(e,r)=>n.intercept(e,{handle:o=>t(o,r)})}const xR=new Z("HTTP_INTERCEPTORS"),oa=new Z("HTTP_INTERCEPTOR_FNS");function MR(){let t=null;return(n,e)=>(null===t&&(t=(be(xR,{optional:!0})??[]).reduceRight(SR,Gb)),t(n,e))}let qb=(()=>{class t extends dc{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(oa)));this.chain=r.reduceRight((o,i)=>function ER(t,n,e){return(r,o)=>e.runInContext(()=>n(r,i=>t(i,o)))}(o,i,this.injector),Gb)}return this.chain(e,r=>this.backend.handle(r))}}return t.\u0275fac=function(e){return new(e||t)(K(gf),K(lr))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const AR=/^\)\]\}',?\n/;let Kb=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new We(r=>{const o=this.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((f,p)=>o.setRequestHeader(f,p.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=e.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",p=new jr(o.getAllResponseHeaders()),v=function kR(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||e.url;return s=new _f({headers:p,status:o.status,statusText:f,url:v}),s},l=()=>{let{headers:f,status:p,statusText:v,url:y}=a(),w=null;204!==p&&(w=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=w?200:0);let T=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof w){const D=w;w=w.replace(AR,"");try{w=""!==w?JSON.parse(w):null}catch(P){w=D,T&&(T=!1,w={error:P,text:w})}}T?(r.next(new fc({body:w,headers:f,status:p,statusText:v,url:y||void 0})),r.complete()):r.error(new zb({error:w,headers:f,status:p,statusText:v,url:y||void 0}))},c=f=>{const{url:p}=a(),v=new zb({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});r.error(v)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:yt.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===e.responseType&&o.responseText&&(p.partialText=o.responseText),r.next(p)},h=f=>{let p={type:yt.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return o.addEventListener("load",l),o.addEventListener("error",c),o.addEventListener("timeout",c),o.addEventListener("abort",c),e.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:yt.Sent}),()=>{o.removeEventListener("error",c),o.removeEventListener("abort",c),o.removeEventListener("load",l),o.removeEventListener("timeout",c),e.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(K(gb))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const vf=new Z("XSRF_ENABLED"),Jb=new Z("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Yb=new Z("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Qb{}let NR=(()=>{class t{constructor(e,r,o){this.doc=e,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=rb(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(K(Qt),K(xh),K(Jb))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();function FR(t,n){const e=t.url.toLowerCase();if(!be(vf)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const r=be(Qb).getToken(),o=be(Yb);return null!=r&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),n(t)}var ft=(()=>((ft=ft||{})[ft.Interceptors=0]="Interceptors",ft[ft.LegacyInterceptors=1]="LegacyInterceptors",ft[ft.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ft[ft.NoXsrfProtection=3]="NoXsrfProtection",ft[ft.JsonpSupport=4]="JsonpSupport",ft[ft.RequestsMadeViaParent=5]="RequestsMadeViaParent",ft))();function ki(t,n){return{\u0275kind:t,\u0275providers:n}}function LR(...t){const n=[Ai,Kb,qb,{provide:dc,useExisting:qb},{provide:gf,useExisting:Kb},{provide:oa,useValue:FR,multi:!0},{provide:vf,useValue:!0},{provide:Qb,useClass:NR}];for(const e of t)n.push(...e.\u0275providers);return function ux(t){return{\u0275providers:t}}(n)}const Zb=new Z("LEGACY_INTERCEPTOR_FN");let VR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vn({type:t}),t.\u0275inj=xn({providers:[LR(ki(ft.LegacyInterceptors,[{provide:Zb,useFactory:MR},{provide:oa,useExisting:Zb,multi:!0}]))]}),t})();const{isArray:$R}=Array,{getPrototypeOf:UR,prototype:BR,keys:HR}=Object;function Xb(t){if(1===t.length){const n=t[0];if($R(n))return{args:n,keys:null};if(function zR(t){return t&&"object"==typeof t&&UR(t)===BR}(n)){const e=HR(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:t,keys:null}}const{isArray:GR}=Array;function e0(t){return F(n=>function qR(t,n){return GR(n)?t(...n):t(n)}(t,n))}function t0(t,n){return t.reduce((e,r,o)=>(e[r]=n[o],e),{})}function xo(...t){const n=ng(t),{args:e,keys:r}=Xb(t),o=new We(i=>{const{length:s}=e;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;jn(e[u]).subscribe(L(i,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?t0(r,a):a),i.complete())}))}});return n?o.pipe(e0(n)):o}let n0=(()=>{class t{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(N(Tr),N(pn))},t.\u0275dir=ce({type:t}),t})(),Mo=(()=>{class t extends n0{}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,features:[Fe]}),t})();const gr=new Z("NgValueAccessor"),WR={provide:gr,useExisting:ze(()=>pc),multi:!0};let pc=(()=>{class t extends Mo{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&A("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[Ze([WR]),Fe]}),t})();const KR={provide:gr,useExisting:ze(()=>Pi),multi:!0},YR=new Z("CompositionEventMode");let Pi=(()=>{class t extends n0{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function JR(){const t=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(N(Tr),N(pn),N(YR,8))},t.\u0275dir=ce({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&A("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[Ze([KR]),Fe]}),t})();const QR=!1;function Zr(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const Ht=new Z("NgValidators"),Xr=new Z("NgAsyncValidators");function a0(t){return Zr(t.value)?{required:!0}:null}function gc(t){return null}function f0(t){return null!=t}function p0(t){const n=$s(t)?pt(t):t;if(QR&&!Qd(n)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof t&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new U(-1101,e)}return n}function g0(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function m0(t,n){return n.map(e=>e(t))}function _0(t){return t.map(n=>function XR(t){return!t.validate}(n)?n:e=>n.validate(e))}function Cf(t){return null!=t?function y0(t){if(!t)return null;const n=t.filter(f0);return 0==n.length?null:function(e){return g0(m0(e,n))}}(_0(t)):null}function bf(t){return null!=t?function v0(t){if(!t)return null;const n=t.filter(f0);return 0==n.length?null:function(e){return xo(m0(e,n).map(p0)).pipe(F(g0))}}(_0(t)):null}function C0(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function wf(t){return t?Array.isArray(t)?t:[t]:[]}function mc(t,n){return Array.isArray(t)?t.includes(n):t===n}function D0(t,n){const e=wf(n);return wf(t).forEach(o=>{mc(e,o)||e.push(o)}),e}function S0(t,n){return wf(n).filter(e=>!mc(t,e))}class E0{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Cf(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=bf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Zt extends E0{get formDirective(){return null}get path(){return null}}class eo extends E0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class x0{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ia=(()=>{class t extends x0{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(N(eo,2))},t.\u0275dir=ce({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&Ae("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Fe]}),t})(),M0=(()=>{class t extends x0{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(N(Zt,10))},t.\u0275dir=ce({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&Ae("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Fe]}),t})();function T0(t,n){return t?`with name: '${n}'`:`at index: ${n}`}const Ef=!1,sa="VALID",yc="INVALID",Ri="PENDING",aa="DISABLED";function xf(t){return(vc(t)?t.validators:t)||null}function Mf(t,n){return(vc(n)?n.asyncValidators:t)||null}function vc(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class A0{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===sa}get invalid(){return this.status===yc}get pending(){return this.status==Ri}get disabled(){return this.status===aa}get enabled(){return this.status!==aa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(D0(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(D0(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(S0(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(S0(n,this._rawAsyncValidators))}hasValidator(n){return mc(this._rawValidators,n)}hasAsyncValidator(n){return mc(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Ri,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=aa,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=sa,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sa||this.status===Ri)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?aa:sa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Ri,this._hasOwnPendingAsyncValidator=!0;const e=p0(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(n,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new st,this.statusChanges=new st}_calculateStatus(){return this._allControlsDisabled()?aa:this.errors?yc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ri)?Ri:this._anyControlsHaveStatus(yc)?yc:sa}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){vc(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function sN(t){return Array.isArray(t)?Cf(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function aN(t){return Array.isArray(t)?bf(t):t||null}(this._rawAsyncValidators)}}class Tf extends A0{constructor(n,e,r){super(xf(e),Mf(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function I0(t,n,e){t._forEachChild((r,o)=>{if(void 0===e[o])throw new U(1002,Ef?function iN(t,n){return`Must supply a value for form control ${T0(t,n)}`}(n,o):"")})})(this,!0,n),Object.keys(n).forEach(r=>{(function O0(t,n,e){const r=t.controls;if(!(n?Object.keys(r):r).length)throw new U(1e3,Ef?function rN(t){return`\n    There are no form controls registered with this ${t?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(n):"");if(!r[e])throw new U(1001,Ef?function oN(t,n){return`Cannot find form control ${T0(t,n)}`}(n,e):"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(r=>{const o=this.controls[r];o&&o.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,o)=>{r.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((o,i)=>{r=e(r,o,i)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const Ni=new Z("CallSetDisabledState",{providedIn:"root",factory:()=>Cc}),Cc="always";function la(t,n,e=Cc){Of(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function uN(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&k0(t,n)})}(t,n),function hN(t,n){const e=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function dN(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&k0(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function cN(t,n){if(n.valueAccessor.setDisabledState){const e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Dc(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Of(t,n){const e=function b0(t){return t._rawValidators}(t);null!==n.validator?t.setValidators(C0(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const r=function w0(t){return t._rawAsyncValidators}(t);null!==n.asyncValidator?t.setAsyncValidators(C0(r,n.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const o=()=>t.updateValueAndValidity();Dc(n._rawValidators,o),Dc(n._rawAsyncValidators,o)}function k0(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const _N={provide:Zt,useExisting:ze(()=>Ec)},ca=(()=>Promise.resolve())();let Ec=(()=>{class t extends Zt{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new st,this.form=new Tf({},Cf(e),bf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ca.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),la(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ca.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ca.then(()=>{const r=this._findContainer(e.path),o=new Tf({});(function P0(t,n){Of(t,n)})(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ca.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){ca.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function R0(t,n){t._syncPendingControls(),n.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(N(Ht,10),N(Xr,10),N(Ni,8))},t.\u0275dir=ce({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&A("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ze([_N]),Fe]}),t})();function N0(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function F0(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const L0=class extends A0{constructor(n=null,e,r){super(xf(e),Mf(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vc(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=F0(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){N0(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){N0(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){F0(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},CN={provide:eo,useExisting:ze(()=>Fi)},$0=(()=>Promise.resolve())();let Fi=(()=>{class t extends eo{constructor(e,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new L0,this._registered=!1,this.update=new st,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function kf(t,n){if(!n)return null;let e,r,o;return Array.isArray(n),n.forEach(i=>{i.constructor===Pi?e=i:function gN(t){return Object.getPrototypeOf(t.constructor)===Mo}(i)?r=i:o=i}),o||r||e||null}(0,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Af(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){la(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){$0.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,o=0!==r&&Oi(r);$0.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function bc(t,n){return[...n.path,t]}(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(N(Zt,9),N(Ht,10),N(Xr,10),N(gr,10),N(Ti,8),N(Ni,8))},t.\u0275dir=ce({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ze([CN]),Fe,Tn]}),t})(),U0=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ce({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const bN={provide:gr,useExisting:ze(()=>xc),multi:!0};let xc=(()=>{class t extends Mo{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,r){1&e&&A("input",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},features:[Ze([bN]),Fe]}),t})(),B0=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vn({type:t}),t.\u0275inj=xn({}),t})();const IN={provide:gr,useExisting:ze(()=>Li),multi:!0};function J0(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Li=(()=>{class t extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=J0(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function AN(t){return t.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&A("change",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ze([IN]),Fe]}),t})(),Mc=(()=>{class t{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(J0(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(N(pn),N(Tr),N(Li,9))},t.\u0275dir=ce({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const kN={provide:gr,useExisting:ze(()=>Ff),multi:!0};function Y0(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Ff=(()=>{class t extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const o=e.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);o.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,e(o)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function PN(t){return t.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&A("change",function(i){return r.onChange(i.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ze([kN]),Fe]}),t})(),Tc=(()=>{class t{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Y0(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Y0(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(N(pn),N(Tr),N(Ff,9))},t.\u0275dir=ce({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function Z0(t){return"number"==typeof t?t:parseFloat(t)}let To=(()=>{class t{constructor(){this._validator=gc}ngOnChanges(e){if(this.inputName in e){const r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gc,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ce({type:t,features:[Tn]}),t})();const RN={provide:Ht,useExisting:ze(()=>Lf),multi:!0};let Lf=(()=>{class t extends To{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>Z0(e),this.createValidator=e=>function s0(t){return n=>{if(Zr(n.value)||Zr(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(e)}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&Nt("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Ze([RN]),Fe]}),t})();const NN={provide:Ht,useExisting:ze(()=>Oc),multi:!0};let Oc=(()=>{class t extends To{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>Z0(e),this.createValidator=e=>function o0(t){return n=>{if(Zr(n.value)||Zr(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(e)}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&Nt("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Ze([NN]),Fe]}),t})();const FN={provide:Ht,useExisting:ze(()=>Ic),multi:!0};let Ic=(()=>{class t extends To{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Oi,this.createValidator=e=>a0}enabled(e){return e}}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275dir=ce({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&Nt("required",r._enabled?"":null)},inputs:{required:"required"},features:[Ze([FN]),Fe]}),t})(),BN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vn({type:t}),t.\u0275inj=xn({imports:[B0]}),t})(),zN=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Ni,useValue:e.callSetDisabledState??Cc}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vn({type:t}),t.\u0275inj=xn({imports:[BN]}),t})();class Rn extends E{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:r}=this;if(n)throw e;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const Ac=Ce(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ow(...t){const n=ls(t),e=ng(t),{args:r,keys:o}=Xb(t);if(0===r.length)return pt([],n);const i=new We(function GN(t,n,e=er){return r=>{iw(n,()=>{const{length:o}=t,i=new Array(o);let s=o,a=o;for(let l=0;l<o;l++)iw(n,()=>{const c=pt(t[l],n);let u=!1;c.subscribe(L(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(e(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,n,o?s=>t0(o,s):er));return e?i.pipe(e0(e)):i}function iw(t,n,e){t?Cr(e,t,n):n()}function jf(...t){return function qN(){return Lo(1)}()(pt(t,ls(t)))}function sw(t){return new We(n=>{jn(t()).subscribe(n)})}function ji(t,n){const e=re(t)?t:()=>t,r=o=>o.error(e());return new We(n?o=>n.schedule(r,0,o):r)}function Vf(){return M((t,n)=>{let e=null;t._refCount++;const r=L(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const o=t._connection,i=e;e=null,o&&(!i||o===i)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(r),r.closed||(e=t.connect())})}class aw extends We{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,I(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new k;const e=this.getSubject();n.add(this.source.subscribe(L(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=k.EMPTY)}return n}refCount(){return Vf()(this)}}function mr(t,n){return M((e,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();e.subscribe(L(r,l=>{o?.unsubscribe();let c=0;const u=i++;jn(t(l,u)).subscribe(o=L(r,d=>r.next(n?n(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Vi(t){return t<=0?()=>nr:M((n,e)=>{let r=0;n.subscribe(L(e,o=>{++r<=t&&(e.next(o),t<=r&&e.complete())}))})}function kc(t){return M((n,e)=>{let r=!1;n.subscribe(L(e,o=>{r=!0,e.next(o)},()=>{r||e.next(t),e.complete()}))})}function lw(t=KN){return M((n,e)=>{let r=!1;n.subscribe(L(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(t())))})}function KN(){return new Ac}function to(t,n){const e=arguments.length>=2;return r=>r.pipe(t?Lr((o,i)=>t(o,i,r)):er,Vi(1),e?kc(n):lw(()=>new Ac))}function vt(t,n,e){const r=re(t)||n||e?{next:t,error:n,complete:e}:t;return r?M((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(L(i,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),i.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),i.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),i.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):er}function Yn(t){return M((n,e)=>{let i,r=null,o=!1;r=n.subscribe(L(e,void 0,void 0,s=>{i=jn(t(s,Yn(t)(n))),r?(r.unsubscribe(),r=null,i.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(e))})}function cw(t,n){return M(function JN(t,n,e,r,o){return(i,s)=>{let a=e,l=n,c=0;i.subscribe(L(s,u=>{const d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}(t,n,arguments.length>=2,!0))}function $f(t){return t<=0?()=>nr:M((n,e)=>{let r=[];n.subscribe(L(e,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(const o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function uw(t,n){const e=arguments.length>=2;return r=>r.pipe(t?Lr((o,i)=>t(o,i,r)):er,$f(1),e?kc(n):lw(()=>new Ac))}function Uf(t){return M((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}const _e="primary",ua=Symbol("RouteTitle");class ZN{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function $i(t){return new ZN(t)}function XN(t,n,e){const r=e.path.split("/");if(r.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||r.length<t.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=t[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function _r(t,n){const e=t?Object.keys(t):void 0,r=n?Object.keys(n):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let i=0;i<e.length;i++)if(o=e[i],!dw(t[o],n[o]))return!1;return!0}function dw(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),r=[...n].sort();return e.every((o,i)=>r[i]===o)}return t===n}function hw(t){return Array.prototype.concat.apply([],t)}function fw(t){return t.length>0?t[t.length-1]:null}function Ft(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function no(t){return Qd(t)?t:$s(t)?pt(Promise.resolve(t)):X(t)}const Pc=!1,tF={exact:function mw(t,n,e){if(!Oo(t.segments,n.segments)||!Rc(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!t.children[r]||!mw(t.children[r],n.children[r],e))return!1;return!0},subset:_w},pw={exact:function nF(t,n){return _r(t,n)},subset:function rF(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>dw(t[e],n[e]))},ignored:()=>!0};function gw(t,n,e){return tF[e.paths](t.root,n.root,e.matrixParams)&&pw[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function _w(t,n,e){return yw(t,n,n.segments,e)}function yw(t,n,e,r){if(t.segments.length>e.length){const o=t.segments.slice(0,e.length);return!(!Oo(o,e)||n.hasChildren()||!Rc(o,e,r))}if(t.segments.length===e.length){if(!Oo(t.segments,e)||!Rc(t.segments,e,r))return!1;for(const o in n.children)if(!t.children[o]||!_w(t.children[o],n.children[o],r))return!1;return!0}{const o=e.slice(0,t.segments.length),i=e.slice(t.segments.length);return!!(Oo(t.segments,o)&&Rc(t.segments,o,r)&&t.children[_e])&&yw(t.children[_e],n,i,r)}}function Rc(t,n,e){return n.every((r,o)=>pw[e](t[o].parameters,r.parameters))}class ro{constructor(n=new Se([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$i(this.queryParams)),this._queryParamMap}toString(){return sF.serialize(this)}}class Se{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Ft(e,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nc(this)}}class da{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=$i(this.parameters)),this._parameterMap}toString(){return bw(this)}}function Oo(t,n){return t.length===n.length&&t.every((e,r)=>e.path===n[r].path)}let ha=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:function(){return new Bf},providedIn:"root"}),t})();class Bf{parse(n){const e=new gF(n);return new ro(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${fa(n.root,!0)}`,r=function cF(t){const n=Object.keys(t).map(e=>{const r=t[e];return Array.isArray(r)?r.map(o=>`${Fc(e)}=${Fc(o)}`).join("&"):`${Fc(e)}=${Fc(r)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${r}${"string"==typeof n.fragment?`#${function aF(t){return encodeURI(t)}(n.fragment)}`:""}`}}const sF=new Bf;function Nc(t){return t.segments.map(n=>bw(n)).join("/")}function fa(t,n){if(!t.hasChildren())return Nc(t);if(n){const e=t.children[_e]?fa(t.children[_e],!1):"",r=[];return Ft(t.children,(o,i)=>{i!==_e&&r.push(`${i}:${fa(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function iF(t,n){let e=[];return Ft(t.children,(r,o)=>{o===_e&&(e=e.concat(n(r,o)))}),Ft(t.children,(r,o)=>{o!==_e&&(e=e.concat(n(r,o)))}),e}(t,(r,o)=>o===_e?[fa(t.children[_e],!1)]:[`${o}:${fa(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[_e]?`${Nc(t)}/${e[0]}`:`${Nc(t)}/(${e.join("//")})`}}function vw(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fc(t){return vw(t).replace(/%3B/gi,";")}function Hf(t){return vw(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lc(t){return decodeURIComponent(t)}function Cw(t){return Lc(t.replace(/\+/g,"%20"))}function bw(t){return`${Hf(t.path)}${function lF(t){return Object.keys(t).map(n=>`;${Hf(n)}=${Hf(t[n])}`).join("")}(t.parameters)}`}const uF=/^[^\/()?;=#]+/;function jc(t){const n=t.match(uF);return n?n[0]:""}const dF=/^[^=?&#]+/,fF=/^[^&#]+/;class gF{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[_e]=new Se(n,e)),r}parseSegment(){const n=jc(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new U(4009,Pc);return this.capture(n),new da(Lc(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=jc(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=jc(this.remaining);o&&(r=o,this.capture(r))}n[Lc(e)]=Lc(r)}parseQueryParam(n){const e=function hF(t){const n=t.match(dF);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const s=function pF(t){const n=t.match(fF);return n?n[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=Cw(e),i=Cw(r);if(n.hasOwnProperty(o)){let s=n[o];Array.isArray(s)||(s=[s],n[o]=s),s.push(i)}else n[o]=i}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new U(4010,Pc);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):n&&(i=_e);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s[_e]:new Se([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new U(4011,Pc)}}function zf(t){return t.segments.length>0?new Se([],{[_e]:t}):t}function Vc(t){const n={};for(const r of Object.keys(t.children)){const i=Vc(t.children[r]);(i.segments.length>0||i.hasChildren())&&(n[r]=i)}return function mF(t){if(1===t.numberOfChildren&&t.children[_e]){const n=t.children[_e];return new Se(t.segments.concat(n.segments),n.children)}return t}(new Se(t.segments,n))}function Io(t){return t instanceof ro}const Gf=!1;function _F(t,n,e,r,o){if(0===e.length)return Ui(n.root,n.root,n.root,r,o);const i=function xw(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ew(!0,0,t);let n=0,e=!1;const r=t.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Ft(i.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?n++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new Ew(e,n,r)}(e);return i.toRoot()?Ui(n.root,n.root,new Se([],{}),r,o):function s(l){const c=function vF(t,n,e,r){if(t.isAbsolute)return new Bi(n.root,!0,0);if(-1===r)return new Bi(e,e===n.root,0);return function Mw(t,n,e){let r=t,o=n,i=e;for(;i>o;){if(i-=o,r=r.parent,!r)throw new U(4005,Gf&&"Invalid number of '../'");o=r.segments.length}return new Bi(r,!1,o-i)}(e,r+(pa(t.commands[0])?0:1),t.numberOfDoubleDots)}(i,n,t.snapshot?._urlSegment,l),u=c.processChildren?Hi(c.segmentGroup,c.index,i.commands):qf(c.segmentGroup,c.index,i.commands);return Ui(n.root,c.segmentGroup,u,r,o)}(t.snapshot?._lastPathIndex)}function pa(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ga(t){return"object"==typeof t&&null!=t&&t.outlets}function Ui(t,n,e,r,o){let s,i={};r&&Ft(r,(l,c)=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=t===n?e:Sw(t,n,e);const a=zf(Vc(s));return new ro(a,i,o)}function Sw(t,n,e){const r={};return Ft(t.children,(o,i)=>{r[i]=o===n?e:Sw(o,n,e)}),new Se(t.segments,r)}class Ew{constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&pa(r[0]))throw new U(4003,Gf&&"Root segment cannot have matrix parameters");const o=r.find(ga);if(o&&o!==fw(r))throw new U(4004,Gf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bi{constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}}function qf(t,n,e){if(t||(t=new Se([],{})),0===t.segments.length&&t.hasChildren())return Hi(t,n,e);const r=function bF(t,n,e){let r=0,o=n;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=e.length)return i;const s=t.segments[o],a=e[r];if(ga(a))break;const l=`${a}`,c=r<e.length-1?e[r+1]:null;if(o>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!Ow(l,c,s))return i;r+=2}else{if(!Ow(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,n,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new Se(t.segments.slice(0,r.pathIndex),{});return i.children[_e]=new Se(t.segments.slice(r.pathIndex),t.children),Hi(i,0,o)}return r.match&&0===o.length?new Se(t.segments,{}):r.match&&!t.hasChildren()?Wf(t,n,e):r.match?Hi(t,0,o):Wf(t,n,e)}function Hi(t,n,e){if(0===e.length)return new Se(t.segments,{});{const r=function CF(t){return ga(t[0])?t[0].outlets:{[_e]:t}}(e),o={};if(!r[_e]&&t.children[_e]&&1===t.numberOfChildren&&0===t.children[_e].segments.length){const i=Hi(t.children[_e],n,e);return new Se(t.segments,i.children)}return Ft(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=qf(t.children[s],n,i))}),Ft(t.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new Se(t.segments,o)}}function Wf(t,n,e){const r=t.segments.slice(0,n);let o=0;for(;o<e.length;){const i=e[o];if(ga(i)){const l=wF(i.outlets);return new Se(r,l)}if(0===o&&pa(e[0])){r.push(new da(t.segments[n].path,Tw(e[0]))),o++;continue}const s=ga(i)?i.outlets[_e]:`${i}`,a=o<e.length-1?e[o+1]:null;s&&a&&pa(a)?(r.push(new da(s,Tw(a))),o+=2):(r.push(new da(s,{})),o++)}return new Se(r,{})}function wF(t){const n={};return Ft(t,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[r]=Wf(new Se([],{}),0,e))}),n}function Tw(t){const n={};return Ft(t,(e,r)=>n[r]=`${e}`),n}function Ow(t,n,e){return t==e.path&&_r(n,e.parameters)}const ma="imperative";class yr{constructor(n,e){this.id=n,this.url=e}}class Kf extends yr{constructor(n,e,r="imperative",o=null){super(n,e),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oo extends yr{constructor(n,e,r){super(n,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $c extends yr{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uc extends yr{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=16}}class Jf extends yr{constructor(n,e,r,o){super(n,e),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class DF extends yr{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SF extends yr{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EF extends yr{constructor(n,e,r,o,i){super(n,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xF extends yr{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MF extends yr{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TF{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class OF{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class IF{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AF{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kF{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PF{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Iw{constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let FF=(()=>{class t{createUrlTree(e,r,o,i,s,a){return _F(e||r.root,o,i,s,a)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})(),jF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:function(n){return FF.\u0275fac(n)},providedIn:"root"}),t})();class Aw{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Yf(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){const e=Yf(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Qf(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return Qf(n,this._root).map(e=>e.value)}}function Yf(t,n){if(t===n.value)return n;for(const e of n.children){const r=Yf(t,e);if(r)return r}return null}function Qf(t,n){if(t===n.value)return[n];for(const e of n.children){const r=Qf(t,e);if(r.length)return r.unshift(n),r}return[]}class Vr{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function zi(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class kw extends Aw{constructor(n,e){super(n),this.snapshot=e,Zf(this,n)}toString(){return this.snapshot.toString()}}function Pw(t,n){const e=function VF(t,n){const s=new Bc([],{},{},"",{},_e,n,null,t.root,-1,{});return new Nw("",new Vr(s,[]))}(t,n),r=new Rn([new da("",{})]),o=new Rn({}),i=new Rn({}),s=new Rn({}),a=new Rn(""),l=new io(r,o,s,a,i,_e,n,e.root);return l.snapshot=e.root,new kw(new Vr(l,[]),e)}class io{constructor(n,e,r,o,i,s,a,l){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(F(c=>c[ua]))??X(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(F(n=>$i(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(F(n=>$i(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rw(t,n="emptyOnly"){const e=t.pathFromRoot;let r=0;if("always"!==n)for(r=e.length-1;r>=1;){const o=e[r],i=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function $F(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Bc{get title(){return this.data?.[ua]}constructor(n,e,r,o,i,s,a,l,c,u,d){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$i(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$i(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nw extends Aw{constructor(n,e){super(e),this.url=n,Zf(this,e)}toString(){return Fw(this._root)}}function Zf(t,n){n.value._routerState=t,n.children.forEach(e=>Zf(t,e))}function Fw(t){const n=t.children.length>0?` { ${t.children.map(Fw).join(", ")} } `:"";return`${t.value}${n}`}function Xf(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,_r(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),_r(n.params,e.params)||t.params.next(e.params),function eF(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!_r(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),_r(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ep(t,n){const e=_r(t.params,n.params)&&function oF(t,n){return Oo(t,n)&&t.every((e,r)=>_r(e.parameters,n[r].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||ep(t.parent,n.parent))}function _a(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=n.value;const o=function BF(t,n,e){return n.children.map(r=>{for(const o of e.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return _a(t,r,o);return _a(t,r)})}(t,n,e);return new Vr(r,o)}{if(t.shouldAttach(n.value)){const i=t.retrieve(n.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>_a(t,a)),s}}const r=function HF(t){return new io(new Rn(t.url),new Rn(t.params),new Rn(t.queryParams),new Rn(t.fragment),new Rn(t.data),t.outlet,t.component,t)}(n.value),o=n.children.map(i=>_a(t,i));return new Vr(r,o)}}const tp="ngNavigationCancelingError";function Lw(t,n){const{redirectTo:e,navigationBehaviorOptions:r}=Io(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=jw(!1,0,n);return o.url=e,o.navigationBehaviorOptions=r,o}function jw(t,n,e){const r=new Error("NavigationCancelingError: "+(t||""));return r[tp]=!0,r.cancellationCode=n,e&&(r.url=e),r}function Vw(t){return $w(t)&&Io(t.url)}function $w(t){return t&&t[tp]}class zF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ya,this.attachRef=null}}let ya=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new zF,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Hc=!1;let zc=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=_e,this.activateEvents=new st,this.deactivateEvents=new st,this.attachEvents=new st,this.detachEvents=new st,this.parentContexts=be(ya),this.location=be(qn),this.changeDetector=be(Ti),this.environmentInjector=be(lr)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,Hc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,Hc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,Hc);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new U(4013,Hc);this._activatedRoute=e;const o=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new GF(e,a,o.injector);if(r&&function qF(t){return!!t.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=o.createComponent(c,o.length,l)}else this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ce({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Tn]}),t})();class GF{constructor(n,e,r){this.route=n,this.childContexts=e,this.parent=r}get(n,e){return n===io?this.route:n===ya?this.childContexts:this.parent.get(n,e)}}let np=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zr({type:t,selectors:[["ng-component"]],standalone:!0,features:[Tv],decls:1,vars:0,template:function(e,r){1&e&&Qe(0,"router-outlet")},dependencies:[zc],encapsulation:2}),t})();function Uw(t,n){return t.providers&&!t._injector&&(t._injector=Fl(t.providers,n,`Route: ${t.path}`)),t._injector??n}function op(t){const n=t.children&&t.children.map(op),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==_e&&(e.component=np),e}function Nn(t){return t.outlet||_e}function Bw(t,n){const e=t.filter(r=>Nn(r)===n);return e.push(...t.filter(r=>Nn(r)!==n)),e}function va(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class QF{constructor(n,e,r,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=o}activate(n){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),Xf(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){const o=zi(e);n.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Ft(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(n,e,r){const o=n.value,i=e?e.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=zi(n);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=zi(n);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,e,r){const o=zi(e);n.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new PF(i.value.snapshot))}),n.children.length&&this.forwardEvent(new AF(n.value.snapshot))}activateRoutes(n,e,r){const o=n.value,i=e?e.value:null;if(Xf(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Xf(a.route.value),this.activateChildRoutes(n,null,s.children)}else{const a=va(o.snapshot),l=a?.get(Ps)??null;s.attachRef=null,s.route=o,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,r)}}class Hw{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Gc{constructor(n,e){this.component=n,this.route=e}}function ZF(t,n,e){const r=t._root;return Ca(r,n?n._root:null,e,[r.value])}function Gi(t,n){const e=Symbol(),r=n.get(t,e);return r===e?"function"!=typeof t||function NS(t){return null!==Va(t)}(t)?n.get(t):t:r}function Ca(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=zi(n);return t.children.forEach(s=>{(function e2(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function t2(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Oo(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Oo(t.url,n.url)||!_r(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ep(t,n)||!_r(t.queryParams,n.queryParams);default:return!ep(t,n)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Hw(r)):(i.data=s.data,i._resolvedData=s._resolvedData),Ca(t,n,i.component?a?a.children:null:e,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Gc(a.outlet.component,s))}else s&&ba(n,a,o),o.canActivateChecks.push(new Hw(r)),Ca(t,null,i.component?a?a.children:null:e,r,o)})(s,i[s.value.outlet],e,r.concat([s.value]),o),delete i[s.value.outlet]}),Ft(i,(s,a)=>ba(s,e.getContext(a),o)),o}function ba(t,n,e){const r=zi(t),o=t.value;Ft(r,(i,s)=>{ba(i,o.component?n?n.children.getContext(s):null:n,e)}),e.canDeactivateChecks.push(new Gc(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function wa(t){return"function"==typeof t}function ip(t){return t instanceof Ac||"EmptyError"===t?.name}const qc=Symbol("INITIAL_VALUE");function qi(){return mr(t=>ow(t.map(n=>n.pipe(Vi(1),function WN(...t){const n=ls(t);return M((e,r)=>{(n?jf(t,e,n):jf(t,e)).subscribe(r)})}(qc)))).pipe(F(n=>{for(const e of n)if(!0!==e){if(e===qc)return qc;if(!1===e||e instanceof ro)return e}return!0}),Lr(n=>n!==qc),Vi(1)))}function zw(t){return function Pa(...t){return as(t)}(vt(n=>{if(Io(n))throw Lw(0,n)}),F(n=>!0===n))}const sp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gw(t,n,e,r,o){const i=ap(t,n,e);return i.matched?function y2(t,n,e,r){const o=n.canMatch;return o&&0!==o.length?X(o.map(s=>{const a=Gi(s,t);return no(function a2(t){return t&&wa(t.canMatch)}(a)?a.canMatch(n,e):t.runInContext(()=>a(n,e)))})).pipe(qi(),zw()):X(!0)}(r=Uw(n,r),n,e).pipe(F(s=>!0===s?i:{...sp})):X(i)}function ap(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...sp}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(n.matcher||XN)(e,t,n);if(!o)return{...sp};const i={};Ft(o.posParams,(a,l)=>{i[l]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Wc(t,n,e,r){if(e.length>0&&function b2(t,n,e){return e.some(r=>Kc(t,n,r)&&Nn(r)!==_e)}(t,e,r)){const i=new Se(n,function C2(t,n,e,r){const o={};o[_e]=r,r._sourceSegment=t,r._segmentIndexShift=n.length;for(const i of e)if(""===i.path&&Nn(i)!==_e){const s=new Se([],{});s._sourceSegment=t,s._segmentIndexShift=n.length,o[Nn(i)]=s}return o}(t,n,r,new Se(e,t.children)));return i._sourceSegment=t,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:[]}}if(0===e.length&&function w2(t,n,e){return e.some(r=>Kc(t,n,r))}(t,e,r)){const i=new Se(t.segments,function v2(t,n,e,r,o){const i={};for(const s of r)if(Kc(t,e,s)&&!o[Nn(s)]){const a=new Se([],{});a._sourceSegment=t,a._segmentIndexShift=n.length,i[Nn(s)]=a}return{...o,...i}}(t,n,e,r,t.children));return i._sourceSegment=t,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:e}}const o=new Se(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:e}}function Kc(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function qw(t,n,e,r){return!!(Nn(t)===r||r!==_e&&Kc(n,e,t))&&("**"===t.path||ap(n,t,e).matched)}function Ww(t,n,e){return 0===n.length&&!t.children[e]}const Jc=!1;class Yc{constructor(n){this.segmentGroup=n||null}}class Kw{constructor(n){this.urlTree=n}}function Da(t){return ji(new Yc(t))}function Jw(t){return ji(new Kw(t))}class x2{constructor(n,e,r,o,i){this.injector=n,this.configLoader=e,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const n=Wc(this.urlTree.root,[],[],this.config).segmentGroup,e=new Se(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,e,_e).pipe(F(i=>this.createUrlTree(Vc(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yn(i=>{if(i instanceof Kw)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof Yc?this.noMatchError(i):i}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,_e).pipe(F(o=>this.createUrlTree(Vc(o),n.queryParams,n.fragment))).pipe(Yn(o=>{throw o instanceof Yc?this.noMatchError(o):o}))}noMatchError(n){return new U(4002,Jc)}createUrlTree(n,e,r){const o=zf(n);return new ro(o,e,r)}expandSegmentGroup(n,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,e,r).pipe(F(i=>new Se([],i))):this.expandSegment(n,r,e,r.segments,o,!0)}expandChildren(n,e,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return pt(o).pipe(Yr(i=>{const s=r.children[i],a=Bw(e,i);return this.expandSegmentGroup(n,a,s,i).pipe(F(l=>({segment:l,outlet:i})))}),cw((i,s)=>(i[s.outlet]=s.segment,i),{}),uw())}expandSegment(n,e,r,o,i,s){return pt(r).pipe(Yr(a=>this.expandSegmentAgainstRoute(n,e,r,a,o,i,s).pipe(Yn(c=>{if(c instanceof Yc)return X(null);throw c}))),to(a=>!!a),Yn((a,l)=>{if(ip(a))return Ww(e,o,i)?X(new Se([],{})):Da(e);throw a}))}expandSegmentAgainstRoute(n,e,r,o,i,s,a){return qw(o,e,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(n,e,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s):Da(e):Da(e)}expandSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Jw(i):this.lineralizeSegments(r,i).pipe(At(s=>{const a=new Se(s,{});return this.expandSegment(n,a,e,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=ap(e,o,i);if(!a)return Da(e);const d=this.applyRedirectCommands(l,o.redirectTo,u);return o.redirectTo.startsWith("/")?Jw(d):this.lineralizeSegments(o,d).pipe(At(h=>this.expandSegment(n,e,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(n,e,r,o,i){return"**"===r.path?(n=Uw(r,n),r.loadChildren?(r._loadedRoutes?X({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(F(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new Se(o,{})))):X(new Se(o,{}))):Gw(e,r,o,n).pipe(mr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(n=r._injector??n,r,o).pipe(At(u=>{const d=u.injector??n,h=u.routes,{segmentGroup:f,slicedSegments:p}=Wc(e,a,l,h),v=new Se(f.segments,f.children);if(0===p.length&&v.hasChildren())return this.expandChildren(d,h,v).pipe(F(D=>new Se(a,D)));if(0===h.length&&0===p.length)return X(new Se(a,{}));const y=Nn(r)===i;return this.expandSegment(d,v,h,p,y?_e:i,!0).pipe(F(T=>new Se(a.concat(T.segments),T.children)))})):Da(e)))}getChildConfig(n,e,r){return e.children?X({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?X({routes:e._loadedRoutes,injector:e._loadedInjector}):function _2(t,n,e,r){const o=n.canLoad;return void 0===o||0===o.length?X(!0):X(o.map(s=>{const a=Gi(s,t);return no(function r2(t){return t&&wa(t.canLoad)}(a)?a.canLoad(n,e):t.runInContext(()=>a(n,e)))})).pipe(qi(),zw())}(n,e,r).pipe(At(o=>o?this.configLoader.loadChildren(n,e).pipe(vt(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):function S2(t){return ji(jw(Jc,3))}())):X({routes:[],injector:n})}lineralizeSegments(n,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return X(r);if(o.numberOfChildren>1||!o.children[_e])return n.redirectTo,ji(new U(4e3,Jc));o=o.children[_e]}}applyRedirectCommands(n,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r)}applyRedirectCreateUrlTree(n,e,r,o){const i=this.createSegmentGroup(n,e.root,r,o);return new ro(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const r={};return Ft(n,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(n,e,r,o){const i=this.createSegments(n,e.segments,r,o);let s={};return Ft(e.children,(a,l)=>{s[l]=this.createSegmentGroup(n,a,r,o)}),new Se(i,s)}createSegments(n,e,r,o){return e.map(i=>i.path.startsWith(":")?this.findPosParam(n,i,o):this.findOrReturn(i,r))}findPosParam(n,e,r){const o=r[e.path.substring(1)];if(!o)throw new U(4001,Jc);return o}findOrReturn(n,e){let r=0;for(const o of e){if(o.path===n.path)return e.splice(r),o;r++}return n}}class T2{}class A2{constructor(n,e,r,o,i,s,a){this.injector=n,this.rootComponentType=e,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const n=Wc(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,_e).pipe(F(e=>{if(null===e)return null;const r=new Bc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_e,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Vr(r,e),i=new Nw(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(n){const e=n.value,r=Rw(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,e,r):this.processSegment(n,e,r,r.segments,o)}processChildren(n,e,r){return pt(Object.keys(r.children)).pipe(Yr(o=>{const i=r.children[o],s=Bw(e,o);return this.processSegmentGroup(n,s,i,o)}),cw((o,i)=>o&&i?(o.push(...i),o):null),function YN(t,n=!1){return M((e,r)=>{let o=0;e.subscribe(L(r,i=>{const s=t(i,o++);(s||n)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),kc(null),uw(),F(o=>{if(null===o)return null;const i=Qw(o);return function k2(t){t.sort((n,e)=>n.value.outlet===_e?-1:e.value.outlet===_e?1:n.value.outlet.localeCompare(e.value.outlet))}(i),i}))}processSegment(n,e,r,o,i){return pt(e).pipe(Yr(s=>this.processSegmentAgainstRoute(s._injector??n,s,r,o,i)),to(s=>!!s),Yn(s=>{if(ip(s))return Ww(r,o,i)?X([]):X(null);throw s}))}processSegmentAgainstRoute(n,e,r,o,i){if(e.redirectTo||!qw(e,r,o,i))return X(null);let s;if("**"===e.path){const a=o.length>0?fw(o).parameters:{},l=Xw(r)+o.length;s=X({snapshot:new Bc(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eD(e),Nn(e),e.component??e._loadedComponent??null,e,Zw(r),l,tD(e)),consumedSegments:[],remainingSegments:[]})}else s=Gw(r,e,o,n).pipe(F(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=Xw(r)+l.length;return{snapshot:new Bc(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eD(e),Nn(e),e.component??e._loadedComponent??null,e,Zw(r),d,tD(e)),consumedSegments:l,remainingSegments:c}}));return s.pipe(mr(a=>{if(null===a)return X(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;n=e._injector??n;const d=e._loadedInjector??n,h=function P2(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:f,slicedSegments:p}=Wc(r,c,u,h.filter(y=>void 0===y.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(F(y=>null===y?null:[new Vr(l,y)]));if(0===h.length&&0===p.length)return X([new Vr(l,[])]);const v=Nn(e)===i;return this.processSegment(d,h,f,p,v?_e:i).pipe(F(y=>null===y?null:[new Vr(l,y)]))}))}}function R2(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function Qw(t){const n=[],e=new Set;for(const r of t){if(!R2(r)){n.push(r);continue}const o=n.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),e.add(o)):n.push(r)}for(const r of e){const o=Qw(r.children);n.push(new Vr(r.value,o))}return n.filter(r=>!e.has(r))}function Zw(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function Xw(t){let n=t,e=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift??0;return e-1}function eD(t){return t.data||{}}function tD(t){return t.resolve||{}}function nD(t){return"string"==typeof t.title||null===t.title}function lp(t){return mr(n=>{const e=t(n);return e?pt(e).pipe(F(()=>n)):X(n)})}const Wi=new Z("ROUTES");let cp=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=be(mC)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return X(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=no(e.loadComponent()).pipe(F(oD),vt(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),Uf(()=>{this.componentLoaders.delete(e)})),o=new aw(r,()=>new E).pipe(Vf());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(F(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(e).injector,c=hw(l.get(Wi,[],se.Self|se.Optional)));return{routes:c.map(op),injector:l}}),Uf(()=>{this.childrenLoaders.delete(r)})),s=new aw(i,()=>new E).pipe(Vf());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(e){return no(e()).pipe(F(oD),At(r=>r instanceof xv||Array.isArray(r)?X(r):pt(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function oD(t){return function B2(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Zc=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new E,this.configLoader=be(cp),this.environmentInjector=be(lr),this.urlSerializer=be(ha),this.rootContexts=be(ya),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new OF(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new TF(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new Rn({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ma,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Lr(r=>0!==r.id),F(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),mr(r=>{let o=!1,i=!1;return X(r).pipe(vt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),mr(s=>{const a=e.browserUrlTree.toString(),l=!e.navigated||s.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const u="";return this.events.next(new Uc(s.id,e.serializeUrl(r.rawUrl),u,0)),e.rawUrlTree=s.rawUrl,s.resolve(null),nr}if(e.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return iD(s.source)&&(e.browserUrlTree=s.extractedUrl),X(s).pipe(mr(u=>{const d=this.transitions?.getValue();return this.events.next(new Kf(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?nr:Promise.resolve(u)}),function M2(t,n,e,r){return mr(o=>function E2(t,n,e,r,o){return new x2(t,n,e,r,o).apply()}(t,n,e,o.extractedUrl,r).pipe(F(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),vt(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function F2(t,n,e,r,o){return At(i=>function I2(t,n,e,r,o,i,s="emptyOnly"){return new A2(t,n,e,r,o,s,i).recognize().pipe(mr(a=>null===a?function O2(t){return new We(n=>n.error(t))}(new T2):X(a)))}(t,n,e,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(F(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),vt(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=e.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);e.setBrowserUrl(h,u)}e.browserUrlTree=u.urlAfterRedirects}const d=new DF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,v=new Kf(u,this.urlSerializer.serialize(d),h,f);this.events.next(v);const y=Pw(d,this.rootComponentType).snapshot;return X(r={...s,targetSnapshot:y,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Uc(s.id,e.serializeUrl(r.extractedUrl),u,1)),e.rawUrlTree=s.rawUrl,s.resolve(null),nr}}),vt(s=>{const a=new SF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),F(s=>r={...s,guards:ZF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function c2(t,n){return At(e=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return 0===s.length&&0===i.length?X({...e,guardsResult:!0}):function u2(t,n,e,r){return pt(t).pipe(At(o=>function m2(t,n,e,r,o){const i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return i&&0!==i.length?X(i.map(a=>{const l=va(n)??o,c=Gi(a,l);return no(function s2(t){return t&&wa(t.canDeactivate)}(c)?c.canDeactivate(t,n,e,r):l.runInContext(()=>c(t,n,e,r))).pipe(to())})).pipe(qi()):X(!0)}(o.component,o.route,e,n,r)),to(o=>!0!==o,!0))}(s,r,o,t).pipe(At(a=>a&&function n2(t){return"boolean"==typeof t}(a)?function d2(t,n,e,r){return pt(n).pipe(Yr(o=>jf(function f2(t,n){return null!==t&&n&&n(new IF(t)),X(!0)}(o.route.parent,r),function h2(t,n){return null!==t&&n&&n(new kF(t)),X(!0)}(o.route,r),function g2(t,n,e){const r=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(s=>function XF(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(s)).filter(s=>null!==s).map(s=>sw(()=>X(s.guards.map(l=>{const c=va(s.node)??e,u=Gi(l,c);return no(function i2(t){return t&&wa(t.canActivateChild)}(u)?u.canActivateChild(r,t):c.runInContext(()=>u(r,t))).pipe(to())})).pipe(qi())));return X(i).pipe(qi())}(t,o.path,e),function p2(t,n,e){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return X(!0);const o=r.map(i=>sw(()=>{const s=va(n)??e,a=Gi(i,s);return no(function o2(t){return t&&wa(t.canActivate)}(a)?a.canActivate(n,t):s.runInContext(()=>a(n,t))).pipe(to())}));return X(o).pipe(qi())}(t,o.route,e))),to(o=>!0!==o,!0))}(r,i,t,n):X(a)),F(a=>({...e,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),vt(s=>{if(r.guardsResult=s.guardsResult,Io(s.guardsResult))throw Lw(0,s.guardsResult);const a=new EF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Lr(s=>!!s.guardsResult||(e.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),lp(s=>{if(s.guards.canActivateChecks.length)return X(s).pipe(vt(a=>{const l=new xF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),mr(a=>{let l=!1;return X(a).pipe(function L2(t,n){return At(e=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return X(e);let i=0;return pt(o).pipe(Yr(s=>function j2(t,n,e,r){const o=t.routeConfig,i=t._resolve;return void 0!==o?.title&&!nD(o)&&(i[ua]=o.title),function V2(t,n,e,r){const o=function $2(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===o.length)return X({});const i={};return pt(o).pipe(At(s=>function U2(t,n,e,r){const o=va(n)??r,i=Gi(t,o);return no(i.resolve?i.resolve(n,e):o.runInContext(()=>i(n,e)))}(t[s],n,e,r).pipe(to(),vt(a=>{i[s]=a}))),$f(1),function QN(t){return F(()=>t)}(i),Yn(s=>ip(s)?nr:ji(s)))}(i,t,n,r).pipe(F(s=>(t._resolvedData=s,t.data=Rw(t,e).resolve,o&&nD(o)&&(t.data[ua]=o.title),null)))}(s.route,r,t,n)),vt(()=>i++),$f(1),At(s=>i===o.length?X(e):nr))})}(e.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),vt(a=>{const l=new MF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),lp(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(vt(u=>{l.component=u}),F(()=>{})));for(const u of l.children)c.push(...a(u));return c};return ow(a(s.targetSnapshot.root)).pipe(kc(),Vi(1))}),lp(()=>this.afterPreactivation()),F(s=>{const a=function UF(t,n,e){const r=_a(t,n._root,e?e._root:void 0);return new kw(r,n)}(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),vt(s=>{e.currentUrlTree=s.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),e.routerState=s.targetRouterState,"deferred"===e.urlUpdateStrategy&&(s.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,s),e.browserUrlTree=s.urlAfterRedirects)}),((t,n,e)=>F(r=>(new QF(n,r.targetRouterState,r.currentRouterState,e).activate(t),r)))(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s)),Vi(1),vt({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new oo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Uf(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Yn(s=>{if(i=!0,$w(s)){Vw(s)||(e.navigated=!0,e.restoreHistory(r,!0));const a=new $c(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),Vw(s)){const l=e.urlHandlingStrategy.merge(s.url,e.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||iD(r.source)};e.scheduleNavigation(l,ma,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const a=new Jf(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(e.errorHandler(s))}catch(l){r.reject(l)}}return nr}))}))}cancelNavigationTransition(e,r,o){const i=new $c(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(i),e.resolve(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function iD(t){return t!==ma}let sD=(()=>{class t{buildTitle(e){let r,o=e.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===_e);return r}getResolvedTitleForRoute(e){return e.data[ua]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:function(){return be(H2)},providedIn:"root"}),t})(),H2=(()=>{class t extends sD{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(e){return new(e||t)(K(Lb))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),z2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:function(){return be(q2)},providedIn:"root"}),t})();class G2{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let q2=(()=>{class t extends G2{}return t.\u0275fac=function(){let n;return function(r){return(n||(n=Rt(t)))(r||t)}}(),t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Xc=new Z("",{providedIn:"root",factory:()=>({})});let K2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:function(){return be(J2)},providedIn:"root"}),t})(),J2=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Y2(t){throw t}function Q2(t,n,e){return n.parse("/")}const Z2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},X2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xt=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=be(aA),this.isNgZoneEnabled=!1,this.options=be(Xc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Y2,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Q2,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=be(K2),this.routeReuseStrategy=be(z2),this.urlCreationStrategy=be(jF),this.titleStrategy=be(sD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=hw(be(Wi,{optional:!0})??[]),this.navigationTransitions=be(Zc),this.urlSerializer=be(ha),this.location=be(Bh),this.isNgZoneEnabled=be(ut)instanceof ut&&ut.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ro,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Pw(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ma,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(op),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){const o=Io(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ma,null,r)}navigate(e,r={skipLocationChange:!1}){return function eL(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new U(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return r}isActive(e,r){let o;if(o=!0===r?{...Z2}:!1===r?{...X2}:r,Io(e))return gw(this.currentUrlTree,e,o);const i=this.parseUrl(e);return gw(this.currentUrlTree,i,o)}removeEmptyProps(e){return Object.keys(e).reduce((r,o)=>{const i=e[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(e,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(e,r){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),eu=(()=>{class t{constructor(e,r,o,i,s,a){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new E;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof oo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=Oi(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=Oi(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=Oi(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function Zm(t,n,e){return function cx(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?Qm:ni}(n,e)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,e,r):o.removeAttribute(i,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return t.\u0275fac=function(e){return new(e||t)(N(xt),N(io),function sl(t){return function R1(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const r=e.length;let o=0;for(;o<r;){const i=e[o];if(Bg(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof e[o];)o++;else{if(i===n)return e[o+1];o+=2}}}return null}(Pt(),t)}("tabindex"),N(Tr),N(pn),N(Eo))},t.\u0275dir=ce({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,r){1&e&&A("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&e&&Nt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Tn]}),t})(),aD=(()=>{class t{get isActive(){return this._isActive}constructor(e,r,o,i,s){this.router=e,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new st,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof oo&&this.update()})}ngAfterContentInit(){X(this.links.changes,X(null)).pipe(Lo()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=pt(e).pipe(Lo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const r=function tL(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&e.isActive(o.urlTree,r)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}}return t.\u0275fac=function(e){return new(e||t)(N(xt),N(pn),N(Tr),N(Ti),N(eu,8))},t.\u0275dir=ce({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(e,r,o){if(1&e&&qv(o,eu,5),2&e){let i;Gv(i=function Wv(){return function $I(t,n){return t[ir].queries[n].queryList}(j(),Ng())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Tn]}),t})();class lD{}let nL=(()=>{class t{constructor(e,r,o,i,s){this.router=e,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Lr(e=>e instanceof oo),Yr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=Fl(i.providers,e,`Route: ${i.path}`));const s=i._injector??e,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return pt(o).pipe(Lo())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):X(null);const i=o.pipe(At(s=>null===s?X(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return r.loadComponent&&!r._loadedComponent?pt([i,this.loader.loadComponent(r)]).pipe(Lo()):i})}}return t.\u0275fac=function(e){return new(e||t)(K(xt),K(mC),K(lr),K(lD),K(cp))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const dp=new Z("");let cD=(()=>{class t{constructor(e,r,o,i,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Kf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof oo&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Iw&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Iw(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(e){!function I_(){throw new Error("invalid")}()},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();var mn=(()=>((mn=mn||{})[mn.COMPLETE=0]="COMPLETE",mn[mn.FAILED=1]="FAILED",mn[mn.REDIRECTING=2]="REDIRECTING",mn))();const Ki=!1;function so(t,n){return{\u0275kind:t,\u0275providers:n}}const hp=new Z("",{providedIn:"root",factory:()=>!1});function dD(){const t=be(cr);return n=>{const e=t.get(zl);if(n!==e.components[0])return;const r=t.get(xt),o=t.get(hD);1===t.get(fp)&&r.initialNavigation(),t.get(fD,null,se.Optional)?.setUpPreloading(),t.get(dp,null,se.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const hD=new Z(Ki?"bootstrap done indicator":"",{factory:()=>new E}),fp=new Z(Ki?"initial navigation":"",{providedIn:"root",factory:()=>1});function aL(){let t=[];return t=Ki?[{provide:_l,multi:!0,useFactory:()=>{const n=be(xt);return()=>n.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function RF(t){if(!("type"in t))return`Unknown Router Event: ${t.constructor.name}`;switch(t.type){case 14:return`ActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state}, shouldActivate: ${t.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 2:return`NavigationCancel(id: ${t.id}, url: '${t.url}')`;case 16:return`NavigationSkipped(id: ${t.id}, url: '${t.url}')`;case 1:return`NavigationEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${t.id}, url: '${t.url}', error: ${t.error})`;case 0:return`NavigationStart(id: ${t.id}, url: '${t.url}')`;case 6:return`ResolveEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 5:return`ResolveStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 10:return`RouteConfigLoadEnd(path: ${t.route.path})`;case 9:return`RouteConfigLoadStart(path: ${t.route.path})`;case 4:return`RoutesRecognized(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 15:return`Scroll(anchor: '${t.anchor}', position: '${t.position?`${t.position[0]}, ${t.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],so(1,t)}const fD=new Z(Ki?"router preloader":"");function lL(t){return so(0,[{provide:fD,useExisting:nL},{provide:lD,useExisting:t}])}const Sa=!1,pD=new Z(Sa?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),cL=[Bh,{provide:ha,useClass:Bf},xt,ya,{provide:io,useFactory:function uD(t){return t.routerState.root},deps:[xt]},cp,Sa?{provide:hp,useValue:!0}:[]];function uL(){return new SC("Router",xt)}let gD=(()=>{class t{constructor(e){}static forRoot(e,r){return{ngModule:t,providers:[cL,Sa&&r?.enableTracing?aL().\u0275providers:[],{provide:Wi,multi:!0,useValue:e},{provide:pD,useFactory:pL,deps:[[xt,new Ds,new Ss]]},{provide:Xc,useValue:r||{}},r?.useHash?{provide:Eo,useClass:KA}:{provide:Eo,useClass:WC},{provide:dp,useFactory:()=>{const t=be(hP),n=be(ut),e=be(Xc),r=be(Zc),o=be(ha);return e.scrollOffset&&t.setOffset(e.scrollOffset),new cD(o,r,t,n,e)}},r?.preloadingStrategy?lL(r.preloadingStrategy).\u0275providers:[],{provide:SC,multi:!0,useFactory:uL},r?.initialNavigation?gL(r):[],[{provide:mD,useFactory:dD},{provide:DC,multi:!0,useExisting:mD}]]}}static forChild(e){return{ngModule:t,providers:[{provide:Wi,multi:!0,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)(K(pD,8))},t.\u0275mod=Vn({type:t}),t.\u0275inj=xn({imports:[np]}),t})();function pL(t){if(Sa&&t)throw new U(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function gL(t){return["disabled"===t.initialNavigation?so(3,[{provide:Ul,multi:!0,useFactory:()=>{const n=be(xt);return()=>{n.setUpLocationChangeListener()}}},{provide:fp,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?so(2,[{provide:fp,useValue:0},{provide:Ul,multi:!0,deps:[cr],useFactory:n=>{const e=n.get(qA,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=n.get(xt),i=n.get(hD);(function rL(t,n){t.events.pipe(Lr(e=>e instanceof oo||e instanceof $c||e instanceof Jf||e instanceof Uc),F(e=>e instanceof oo||e instanceof Uc?mn.COMPLETE:e instanceof $c&&(0===e.code||1===e.code)?mn.REDIRECTING:mn.FAILED),Lr(e=>e!==mn.REDIRECTING),Vi(1)).subscribe(()=>{n()})})(o,()=>{r(!0)}),n.get(Zc).afterPreactivation=()=>(r(!0),i.closed?X(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const mD=new Z(Sa?"Router Initializer":"");let _L=(()=>{const n=class{constructor(r){this.router=r,this.title="Pokemon TCG Pocket Collector"}ngOnInit(){const r=()=>{const o=this.router.url.startsWith("/signin");document.body.classList.toggle("signin-page",o)};r(),this.routerSub=this.router.events.subscribe(o=>{o instanceof oo&&r()})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe?.(),document.body.classList.remove("signin-page")}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(xt))},n.\u0275cmp=zr({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){1&o&&Qe(0,"router-outlet")},dependencies:[zc],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background-color:#000;min-height:100vh}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.data-overview[_ngcontent-%COMP%]{margin-top:30px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 6px #0000001a}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;opacity:.9}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0}.section[_ngcontent-%COMP%]{margin:40px 0;padding:20px 0;border-top:2px solid #e9ecef}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:20px}.sets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.set-card[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.set-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px}.rarity-stats[_ngcontent-%COMP%], .pack-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.rarity-item[_ngcontent-%COMP%], .pack-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#000;border-radius:5px;border-left:4px solid #007bff}.rarity-name[_ngcontent-%COMP%], .pack-name[_ngcontent-%COMP%]{font-weight:600;color:#fff}.rarity-count[_ngcontent-%COMP%], .pack-count[_ngcontent-%COMP%]{color:#ccc}.rarity-percentage[_ngcontent-%COMP%], .pack-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0}.feature[_ngcontent-%COMP%]{background-color:#000;padding:20px;border-radius:8px;border-left:4px solid #17a2b8}.feature[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0;font-size:14px}.api-info[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:20px}.api-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0}.api-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;margin:0}.api-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;color:#ff6b6b}.error[_ngcontent-%COMP%]{background-color:#000;color:#ff6b6b;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center;border:1px solid #ff6b6b}.card-info[_ngcontent-%COMP%]{margin-top:30px}.card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}.card-item[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.card-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin:0 0 10px;font-size:16px}.card-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#ccc}.note[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#ccc;margin-top:20px}.instructions[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:30px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:#fff}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace}.data-info[_ngcontent-%COMP%]{background-color:#000;border-left:4px solid #007bff;padding:15px;margin-top:20px}.data-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:200px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),t})();function _D(t,n,e,r,o,i,s){try{var a=t[i](s),l=a.value}catch(c){return void e(c)}a.done?n(l):Promise.resolve(l).then(r,o)}function b(t){return function(){var n=this,e=arguments;return new Promise(function(r,o){var i=t.apply(n,e);function s(l){_D(i,r,o,s,a,"next",l)}function a(l){_D(i,r,o,s,a,"throw",l)}s(void 0)})}}let tu=(()=>{const n=class{constructor(r){this.http=r,this.BASE_PATH="assets/cards/",this.API_BASE="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/"}getCardRarityCode(r,o){for(const[i,s]of Object.entries(o))if(s.split(" - ")[0]===r.rarity)return i;return r.rarity||"Unknown"}loadSets(){return this.http.get(`${this.BASE_PATH}sets.json`)}loadRarities(){return this.http.get(`${this.BASE_PATH}rarity.json`)}loadCards(){return this.http.get(`${this.BASE_PATH}cards.json`)}loadAllData(){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(vt(r=>{}))}getSetByCode(r){return this.loadSets().pipe(F(o=>o.find(i=>i.code===r)))}getRarityName(r){return this.loadRarities().pipe(F(o=>o[r]))}getCardsBySetWithInfo(r){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(F(({cards:o,sets:i,rarities:s})=>{const a=i.find(l=>l.code===r);return o.filter(l=>l.set===r).map(l=>({...l,setInfo:a,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}))}))}getSetsWithCardCounts(){return xo({cards:this.loadCards(),sets:this.loadSets()}).pipe(F(({cards:r,sets:o})=>o.map(i=>{const s=r.filter(a=>a.set===i.code).length;return{...i,actualCardCount:s}})))}getRarityDistribution(){return xo({cards:this.loadCards(),rarities:this.loadRarities()}).pipe(F(({cards:r,rarities:o})=>{const i={};r.forEach(a=>{const l=this.getCardRarityCode(a,o);i[l]=(i[l]||0)+1});const s=r.length;return Object.entries(i).map(([a,l])=>({code:a,name:o[a]||a,count:l,percentage:Math.round(l/s*100*100)/100})).sort((a,l)=>l.count-a.count)}))}getPackDistribution(){return this.loadCards().pipe(F(r=>{const o={};r.forEach(s=>{(Array.isArray(s.packs)?s.packs:[]).forEach(l=>{l&&l.trim()&&(o[l]=(o[l]||0)+1)})});const i=Object.values(o).reduce((s,a)=>s+a,0);return Object.entries(o).map(([s,a])=>({pack:s,count:a,percentage:i>0?Math.round(a/i*100*100)/100:0})).sort((s,a)=>a.count-s.count)}))}searchCardsEnhanced(r){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(F(({cards:o,sets:i,rarities:s})=>o.filter(l=>l.label.eng.toLowerCase().includes(r.toLowerCase())).map(l=>{const c=i.find(u=>u.code===l.set);return{...l,setInfo:c,fullRarityName:s[this.getCardRarityCode(l,s)]||l.rarity}})))}getComprehensiveStats(){return xo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(F(({cards:r,sets:o,rarities:i})=>({totalCards:r.length,totalSets:o.length,totalRarities:Object.keys(i).length,setBreakdown:o.map(a=>({...a,actualCardCount:r.filter(l=>l.set===a.code).length})),rarityBreakdown:Object.entries(i).map(([a,l])=>({code:a,name:l,count:r.filter(c=>this.getCardRarityCode(c,i)===a).length})),packBreakdown:this.calculatePackDistribution(r),dateRange:{earliest:o.reduce((a,l)=>new Date(l.releaseDate)<new Date(a)?l.releaseDate:a,o[0]?.releaseDate||""),latest:o.reduce((a,l)=>new Date(l.releaseDate)>new Date(a)?l.releaseDate:a,o[0]?.releaseDate||"")}})))}calculatePackDistribution(r){const o={};return r.forEach(i=>{(Array.isArray(i.packs)?i.packs:[]).forEach(a=>{a&&a.trim()&&(o[a]=(o[a]||0)+1)})}),Object.entries(o).map(([i,s])=>({pack:i,count:s})).sort((i,s)=>s.count-i.count)}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Ai))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),yL=(()=>{const n=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json",this.LOCAL_CARDS_PATH="assets/cards/cards.json"}fetchCardsFromAPI(){return this.http.get(this.CARDS_API_URL)}downloadAndStoreCards(){return this.fetchCardsFromAPI().pipe(vt(r=>{localStorage.setItem("pokemonCards",JSON.stringify(r))}))}getStoredCards(){const r=localStorage.getItem("pokemonCards");return r?JSON.parse(r):null}loadCards(){return this.http.get(this.LOCAL_CARDS_PATH).pipe(F(r=>r||[]))}getCardsBySet(r){return this.loadCards().pipe(F(o=>o.filter(i=>i.set===r)))}getCardsByType(r){return this.loadCards().pipe(F(o=>o.filter(i=>i.types&&i.types.includes(r))))}getCardsByRarity(r){return this.loadCards().pipe(F(o=>o.filter(i=>i.rarity===r)))}searchCardsByName(r){return this.loadCards().pipe(F(o=>o.filter(i=>i.label.eng.toLowerCase().includes(r.toLowerCase()))))}getUniqueSets(){return this.loadCards().pipe(F(r=>[...new Set(r.map(o=>o.set))]))}getAvailableTypes(){return this.loadCards().pipe(F(r=>[...new Set(r.flatMap(o=>o.types||[]).filter(o=>!!o))]))}getUniqueRarities(){return this.loadCards().pipe(F(r=>[...new Set(r.map(o=>o.rarity))]))}getUniquePacks(){return this.loadCards().pipe(F(r=>[...new Set(r.flatMap(o=>o.packs))]))}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Ai))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),vL=(()=>{const n=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsData(){return this.http.get(this.CARDS_API_URL).pipe(Yn(r=>(console.error("Error downloading cards data:",r),ji(()=>new Error("Failed to download cards data")))))}downloadCardsAsBlob(){return this.downloadCardsData().pipe(F(r=>{const o=JSON.stringify(r,null,2);return new Blob([o],{type:"application/json"})}))}triggerDownload(){this.downloadCardsAsBlob().subscribe({next:r=>{const o=window.URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download="cards.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},error:r=>{console.error("Failed to download cards data:",r)}})}getStorageInstructions(){return"\nTo store the cards data locally:\n\n1. Create a 'cards' folder in src/assets/\n2. Use the downloadCardsAsBlob() method to get the data\n3. Save the file as 'cards.json' in src/assets/cards/\n\nAlternative: Use triggerDownload() to download the file and manually move it to the assets folder.\n\nNote: In a production environment, you would typically have a backend service \nto handle file storage and serving.\n    "}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Ai))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),CL=(()=>{const n=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsJson(){this.http.get(this.CARDS_API_URL).subscribe({next:r=>{const o=JSON.stringify(r,null,2),i=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="cards.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`Downloaded ${r.length} cards to cards.json\n\nPlease move the file to: src/assets/cards/cards.json`)},error:r=>{console.error("Failed to download cards data:",r),alert("Failed to download cards data. Please check your internet connection.")}})}showSetupInstructions(){return`\n=== Pokemon TCG Pocket Collector Setup Instructions ===\n\n1. AUTOMATIC DOWNLOAD (Recommended):\n   - Click "Download cards.json" button\n   - Move the downloaded file to: src/assets/cards/cards.json\n   - Restart the development server\n\n2. MANUAL DOWNLOAD:\n   - Go to: ${this.CARDS_API_URL}\n   - Right-click and "Save As" to src/assets/cards/cards.json\n   - Restart the development server\n\n3. VERIFY SETUP:\n   - Click "Load Cards Data" to test the service\n   - Check browser console for detailed information\n   - Data will be cached in localStorage for offline use\n\n=== Service Features ===\n- \u2705 Fetch cards from Pokemon TCG Pocket database\n- \u2705 Store data locally for offline access\n- \u2705 Filter by set, type, rarity\n- \u2705 Search cards by name\n- \u2705 Get unique values for filters\n- \u2705 Automatic fallback to localStorage\n\nFor more information, check the browser console when using the services.\n    `}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Ai))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),yD=(()=>{const n=class{constructor(r,o,i,s){this.cardDataService=r,this.fileStorageService=o,this.assetsHelper=i,this.pokemonDataService=s}initializeCardData(){return this.cardDataService.downloadAndStoreCards().pipe(vt(r=>{this.logDataSummary(r)}),Yn(r=>(console.error("Failed to initialize card data:",r),X(this.cardDataService.getStoredCards()||[]))))}downloadCardsFile(){this.assetsHelper.downloadCardsJson()}getStorageInstructions(){return this.assetsHelper.showSetupInstructions()}logDataSummary(r){new Set(r.map(a=>a.set)),new Set(r.map(a=>a.rarity)),new Set(r.flatMap(a=>a.packs))}getAllCards(){return this.cardDataService.loadCards()}getCardsBySet(r){return this.cardDataService.getCardsBySet(r)}getCardsByType(r){return this.cardDataService.getCardsByType(r)}getCardsByPack(r){return this.cardDataService.loadCards().pipe(F(o=>o.filter(i=>i.packs.includes(r))))}searchCards(r){return this.cardDataService.searchCardsByName(r)}getFilterOptions(){return new We(r=>{Promise.all([this.cardDataService.getUniqueSets().toPromise(),this.cardDataService.getAvailableTypes().toPromise(),this.cardDataService.getUniqueRarities().toPromise(),this.cardDataService.getUniquePacks().toPromise()]).then(([o,i,s,a])=>{r.next({sets:o||[],types:i||[],rarities:s||[],packs:a||[]}),r.complete()}).catch(o=>{r.error(o)})})}loadAllPokemonData(){return this.pokemonDataService.loadAllData().pipe(vt(r=>{this.logEnhancedDataSummary(r)}))}getAllSets(){return this.pokemonDataService.loadSets()}getSetsWithCounts(){return this.pokemonDataService.getSetsWithCardCounts()}getRarityMapping(){return this.pokemonDataService.loadRarities()}getSetInfo(r){return this.pokemonDataService.getSetByCode(r)}getCardsBySetEnhanced(r){return this.pokemonDataService.getCardsBySetWithInfo(r)}searchCardsEnhanced(r){return this.pokemonDataService.searchCardsEnhanced(r)}getRarityStats(){return this.pokemonDataService.getRarityDistribution()}getPackStats(){return this.pokemonDataService.getPackDistribution()}getComprehensiveStats(){return this.pokemonDataService.getComprehensiveStats()}logEnhancedDataSummary(r){}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(yL),K(vL),K(CL),K(tu))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),bL=(()=>{const n=class{constructor(r){this.http=r,this.BASE_IMAGE_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-exchange/main/public/images/cards",this.imageCache=new Map}getCardImageUrl(r){return`${this.BASE_IMAGE_URL}/${r}`}checkImageExists(r){if(this.imageCache.has(r))return X(this.imageCache.get(r));const o=this.getCardImageUrl(r);return this.http.head(o,{observe:"response"}).pipe(F(i=>{const s=200===i.status;return this.imageCache.set(r,s),s}),Yn(()=>(this.imageCache.set(r,!1),X(!1))))}preloadImage(r){return new Promise(o=>{const i=new Image;i.onload=()=>{this.imageCache.set(r,!0),o(!0)},i.onerror=()=>{this.imageCache.set(r,!1),o(!1)},i.src=this.getCardImageUrl(r)})}getPlaceholderImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDIwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExNi41NjkgMTQwIDEzMCAxMjYuNTY5IDEzMCAxMTBDMTMwIDkzLjQzMTUgMTE2LjU2OSA4MCAxMDAgODBDODMuNDMxNSA4MCA3MCA5My40MzE1IDcwIDExMEM3MCAxMjYuNTY5IDgzLjQzMTUgMTQwIDEwMCAxNDBaIiBmaWxsPSIjOUI5QkE4Ii8+CjxwYXRoIGQ9Ik0xMDAgMTAwQzEwNS41MjMgMTAwIDExMCAxMDQuNDc3IDExMCAxMTBDMTEwIDExNS41MjMgMTA1LjUyMyAxMjAgMTAwIDEyMEM5NC40NzcgMTIwIDkwIDExNS41MjMgOTAgMTEwQzkwIDEwNC40NzcgOTQuNDc3IDEwMCAxMDAgMTAwWiIgZmlsbD0iI0Y5RkFGQiIvPgo8L3N2Zz4K"}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(Ai))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),t})();class pp extends Error{constructor(n,e="FunctionsError",r){super(n),this.name=e,this.context=r}}class vD extends pp{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class CD extends pp{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class bD extends pp{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var nu=(()=>{return(t=nu||(nu={})).Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2",nu;var t})();class DL{constructor(n,{headers:e={},customFetch:r,region:o=nu.Any}={}){this.url=n,this.headers=e,this.region=o,this.fetch=(t=>{let n;return n=t||(typeof fetch>"u"?(...e)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:r})=>r(...e)):fetch),(...e)=>n(...e)})(r)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return(0,V.__awaiter)(this,arguments,void 0,function*(e,r={}){var o;try{const{headers:i,method:s,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${e}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):"string"==typeof a?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(w=>{throw"AbortError"===w.name?w:new vD(w)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new CD(f);if(!f.ok)throw new bD(f);let y,v=(null!==(o=f.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return y="application/json"===v?yield f.json():"application/octet-stream"===v||"application/pdf"===v?yield f.blob():"text/event-stream"===v?f:"multipart/form-data"===v?yield f.formData():yield f.text(),{data:y,error:null,response:f}}catch(i){return i instanceof Error&&"AbortError"===i.name?{data:null,error:new vD(i)}:{data:null,error:i,response:i instanceof bD||i instanceof CD?i.context:void 0}}})}}var SL=ee(358);const{PostgrestClient:wD}=SL,AL=class IL{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(n=navigator.userAgent)&&void 0!==n&&n.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const o=parseInt(e.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let e=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(e+=`\n\nSuggested solution: ${n.workaround}`),new Error(e)}static createWebSocket(n,e){return new(this.getWebSocketConstructor())(n,e)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return"native"===n.type||"ws"===n.type}catch{return!1}}};var Ji=(()=>{return(t=Ji||(Ji={}))[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",Ji;var t})(),Ct=(()=>{return(t=Ct||(Ct={})).closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving",Ct;var t})(),Fn=(()=>{return(t=Fn||(Fn={})).close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token",Fn;var t})(),ru=(()=>((ru||(ru={})).websocket="websocket",ru))(),ao=(()=>{return(t=ao||(ao={})).Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed",ao;var t})();class FL{constructor(){this.HEADER_LENGTH=1}decode(n,e){return n.constructor===ArrayBuffer?e(this._binaryDecode(n)):e("string"==typeof n?JSON.parse(n):{})}_binaryDecode(n){const e=new DataView(n),r=new TextDecoder;return this._decodeBroadcast(n,e,r)}_decodeBroadcast(n,e,r){const o=e.getUint8(1),i=e.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(n.slice(s,s+o));s+=o;const l=r.decode(n.slice(s,s+i));return s+=i,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(n.slice(s,n.byteLength)))}}}class DD{constructor(n,e){this.callback=n,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue=(()=>{return(t=Ue||(Ue={})).abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange",Ue;var t})();const SD=(t,n,e={})=>{var r;const o=null!==(r=e.skipTypes)&&void 0!==r?r:[];return n?Object.keys(n).reduce((i,s)=>(i[s]=LL(s,t,n,o),i),{}):{}},LL=(t,n,e,r)=>{const i=n.find(a=>a.name===t)?.type,s=e[t];return i&&!r.includes(i)?ED(i,s):mp(s)},ED=(t,n)=>{if("_"===t.charAt(0)){const e=t.slice(1,t.length);return UL(n,e)}switch(t){case Ue.bool:return jL(n);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return VL(n);case Ue.json:case Ue.jsonb:return $L(n);case Ue.timestamp:return BL(n);default:return mp(n)}},mp=t=>t,jL=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},VL=t=>{if("string"==typeof t){const n=parseFloat(t);if(!Number.isNaN(n))return n}return t},$L=t=>{if("string"==typeof t)try{return JSON.parse(t)}catch(n){return console.log(`JSON parse error: ${n}`),t}return t},UL=(t,n)=>{if("string"!=typeof t)return t;const e=t.length-1;if("{"===t[0]&&"}"===t[e]){let i;const s=t.slice(1,e);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>ED(n,a))}return t},BL=t=>"string"==typeof t?t.replace(" ","T"):t,xD=t=>{const n=new URL(t);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname=""===n.pathname||"/"===n.pathname?"/api/broadcast":n.pathname+"/api/broadcast",n.href};class _p{constructor(n,e,r={},o=1e4){this.channel=n,this.event=e,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,e){var r;return this._hasReceived(n)&&e(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:n,callback:e}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(n,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:e}){this.recHooks.filter(r=>r.status===n).forEach(r=>r.callback(e))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}class Ea{constructor(n,e){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ea.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=Ea.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ea.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,e,r,o){const i=this.cloneDeep(n),s=this.transformState(e),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),v=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[c]=p),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(n,e,r,o){const{joins:i,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=n[a])&&void 0!==c?c:[];if(n[a]=this.cloneDeep(l),u.length>0){const d=n[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);n[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=n[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),n[a]=c,o(a,c,l),0===c.length&&delete n[a]}),n}static map(n,e){return Object.getOwnPropertyNames(n).map(r=>e(r,n[r]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((e,r)=>{const o=n[r];return e[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,e},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yi=(()=>{return(t=Yi||(Yi={})).BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",Yi;var t})(),vr=(()=>{return(t=vr||(vr={})).SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR",vr;var t})();class yp{constructor(n,e={config:{}},r){var o,i;if(this.topic=n,this.params=e,this.socket=r,this.bindings={},this.state=Ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new _p(this,Fn.join,this.params,this.timeout),this.rejoinTimer=new DD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ct.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fn.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Ea(this),this.broadcastEndpointURL=xD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,e=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==Ct.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(p=>p.filter))&&void 0!==i?i:[],d=!!this.bindings[Yi.PRESENCE]&&this.bindings[Yi.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>n?.(vr.CHANNEL_ERROR,p)),this._onClose(()=>n?.(vr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",function(){var p=b(function*({postgres_changes:v}){var y;if(r.socket.setAuth(),void 0!==v){const w=r.bindings.postgres_changes,T=null!==(y=w?.length)&&void 0!==y?y:0,D=[];for(let P=0;P<T;P++){const $=w[P],{filter:{event:le,schema:Cn,table:ue,filter:De}}=$,zt=v&&v[P];if(!zt||zt.event!==le||zt.schema!==Cn||zt.table!==ue||zt.filter!==De)return r.unsubscribe(),r.state=Ct.errored,void n?.(vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));D.push(Object.assign(Object.assign({},$),{id:zt.id}))}return r.bindings.postgres_changes=D,void(n&&n(vr.SUBSCRIBED))}n?.(vr.SUBSCRIBED)});return function(v){return p.apply(this,arguments)}}()).receive("error",p=>{this.state=Ct.errored,n?.(vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{n?.(vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(n){var e=this;return b(function*(r,o={}){return yield e.send({type:"presence",event:"track",payload:r},o.timeout||e.timeout)}).apply(this,arguments)}untrack(){var n=this;return b(function*(e={}){return yield n.send({type:"presence",event:"untrack"},e)}).apply(this,arguments)}on(n,e,r){return this.state===Ct.joined&&n===Yi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,e,r)}httpSend(n,e){var r=this;return b(function*(o,i,s={}){var a;const l=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,c,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const h=yield u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(n){var e=this;return b(function*(r,o={}){var i,s;if(e._canPush()||"broadcast"!==r.type)return new Promise(a=>{var l,c,u;const d=e._push(r.type,r,o.timeout||e.timeout);"broadcast"===r.type&&!(null!==(u=null===(c=null===(l=e.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=r,u={method:"POST",headers:{Authorization:e.socket.accessTokenValue?`Bearer ${e.socket.accessTokenValue}`:"",apikey:e.socket.apiKey?e.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:e.subTopic,event:a,payload:l,private:e.private}]})};try{const d=yield e._fetchWithTimeout(e.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:e.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ct.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new _p(this,Fn.leave,{},n),r.receive("ok",()=>{e(),o("ok")}).receive("timeout",()=>{e(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ct.closed,this.bindings={}}_fetchWithTimeout(n,e,r){var o=this;return b(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(n,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(s),a})()}_push(n,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new _p(this,n,e,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(n,e,r){return e}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,e,r){var o,i;const s=n.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Fn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(f=>{var p,v,y;return"*"===(null===(p=f.filter)||void 0===p?void 0:p.event)||(null===(y=null===(v=f.filter)||void 0===v?void 0:v.event)||void 0===y?void 0:y.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):null===(i=this.bindings[s])||void 0===i||i.filter(f=>{var p,v,y,w,T,D;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in f){const P=f.id,$=null===(p=f.filter)||void 0===p?void 0:p.event;return P&&(null===(v=e.ids)||void 0===v?void 0:v.includes(P))&&("*"===$||$?.toLocaleLowerCase()===(null===(y=e.data)||void 0===y?void 0:y.type.toLocaleLowerCase()))}{const P=null===(T=null===(w=f?.filter)||void 0===w?void 0:w.event)||void 0===T?void 0:T.toLocaleLowerCase();return"*"===P||P===(null===(D=e?.event)||void 0===D?void 0:D.toLocaleLowerCase())}}return f.type.toLocaleLowerCase()===s}).map(f=>{if("object"==typeof h&&"ids"in h){const p=h.data,{schema:v,table:y,commit_timestamp:w,type:T,errors:D}=p;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:w,eventType:T,new:{},old:{},errors:D}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Ct.closed}_isJoined(){return this.state===Ct.joined}_isJoining(){return this.state===Ct.joining}_isLeaving(){return this.state===Ct.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,e,r){const o=n.toLocaleLowerCase(),i={type:o,filter:e,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(n,e){const r=n.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&yp.isEqual(o.filter,e))})),this}static isEqual(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(n[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Fn.close,{},n)}_onError(n){this._on(Fn.error,{},e=>n(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ct.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const e={new:{},old:{}};return("INSERT"===n.type||"UPDATE"===n.type)&&(e.new=SD(n.columns,n.record)),("UPDATE"===n.type||"DELETE"===n.type)&&(e.old=SD(n.columns,n.old_record)),e}}const vp=()=>{},HL=[1e3,2e3,5e3,1e4];class qL{constructor(n,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vp,this.ref=0,this.reconnectTimer=null,this.logger=vp,this.conn=null,this.sendBuffer=[],this.serializer=new FL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return i=o||(typeof fetch>"u"?(...s)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...s)=>i(...s)},null===(r=e?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${n}/${ru.websocket}`,this.httpEndpoint=xD(n),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=AL.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const e=n.message;throw e.includes("Node.js")?new Error(`${e}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(n,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},n?this.conn.close(n,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(n){var e=this;return b(function*(){const r=yield n.unsubscribe();return 0===e.channels.length&&e.disconnect(),r})()}removeAllChannels(){var n=this;return b(function*(){const e=yield Promise.all(n.channels.map(r=>r.unsubscribe()));return n.channels=[],n.disconnect(),e})()}log(n,e,r){this.logger(n,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ji.connecting:return ao.Connecting;case Ji.open:return ao.Open;case Ji.closing:return ao.Closing;default:return ao.Closed}}isConnected(){return this.connectionState()===ao.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(n,e={config:{}}){const r=`realtime:${n}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new yp(`realtime:${n}`,e,this);return this.channels.push(i),i}}push(n){const{topic:e,event:r,payload:o,ref:i}=n,s=()=>{this.encode(n,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${e} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var n=this;return b(function*(e=null){n._authPromise=n._performAuth(e);try{yield n._authPromise}finally{n._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var n=this;return b(function*(){var e;if(n.isConnected()){if(n.pendingHeartbeatRef){n.pendingHeartbeatRef=null,n.log("transport","heartbeat timeout. Attempting to re-establish connection");try{n.heartbeatCallback("timeout")}catch(r){n.log("error","error in heartbeat callback",r)}return n._wasManualDisconnect=!1,null===(e=n.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;n.isConnected()||null===(r=n.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}n.pendingHeartbeatRef=n._makeRef(),n.push({topic:"phoenix",event:"heartbeat",payload:{},ref:n.pendingHeartbeatRef});try{n.heartbeatCallback("sent")}catch(r){n.log("error","error in heartbeat callback",r)}n._setAuthSafely("heartbeat")}else try{n.heartbeatCallback("disconnected")}catch(r){n.log("error","error in heartbeat callback",r)}})()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return this.ref=n===this.ref?0:n,this.ref.toString()}_leaveOpenTopic(n){let e=this.channels.find(r=>r.topic===n&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${n}"`),e.unsubscribe())}_remove(n){this.channels=this.channels.filter(e=>e.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=e;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(n){var e;"heartbeat"===n&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===n&&(null===(e=this.reconnectTimer)||void 0===e||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var e;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Fn.error))}_appendParams(n,e){if(0===Object.keys(e).length)return n;const r=n.match(/\?/)?"&":"?";return`${n}${r}${new URLSearchParams(e)}`}_workerObjectUrl(n){let e;if(n)e=n;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(n,e=!1){this._connectionState=n,"connecting"===n?this._wasManualDisconnect=!1:"disconnecting"===n&&(this._wasManualDisconnect=e)}_performAuth(){var n=this;return b(function*(e=null){let r;r=e||(n.accessToken?yield n.accessToken():n.accessTokenValue),n.accessTokenValue!=r&&(n.accessTokenValue=r,n.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.76.1"}),o.joinedOnce&&o._isJoined()&&o._push(Fn.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var n=this;return b(function*(){n._authPromise&&(yield n._authPromise)})()}_setAuthSafely(n="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${n}`,e)})}_triggerStateCallbacks(n,e){try{this.stateChangeCallbacks[n].forEach(r=>{try{r(e)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(r){this.log("error",`error triggering ${n} callbacks`,r)}}_setupReconnectionTimer(){var n=this;this.reconnectTimer=new DD(b(function*(){setTimeout(b(function*(){yield n._waitForAuthIfNeeded(),n.isConnected()||n.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(n){var e,r,o,i,s,a,l,c,u;if(this.transport=null!==(e=n?.transport)&&void 0!==e?e:null,this.timeout=null!==(r=n?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=n?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=n?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=n?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=n?.heartbeatCallback)&&void 0!==a?a:vp,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=n?.reconnectAfterMs)&&void 0!==l?l:d=>HL[d-1]||1e4,this.encode=null!==(c=n?.encode)&&void 0!==c?c:(d,h)=>h(JSON.stringify(d)),this.decode=null!==(u=n?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class Cp extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function nt(t){return"object"==typeof t&&null!==t&&"__isStorageError"in t}class WL extends Cp{constructor(n,e,r){super(n),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bp extends Cp{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}}const wp=t=>{let n;return n=t||(typeof fetch>"u"?(...e)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:r})=>r(...e)):fetch),(...e)=>n(...e)},Dp=t=>{if(Array.isArray(t))return t.map(e=>Dp(e));if("function"==typeof t||t!==Object(t))return t;const n={};return Object.entries(t).forEach(([e,r])=>{const o=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));n[o]=Dp(r)}),n},Sp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),YL=(t,n,e)=>(0,V.__awaiter)(void 0,void 0,void 0,function*(){const r=yield(0,V.__awaiter)(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(ee.bind(ee,397))).Response:Response});t instanceof r&&!e?.noResolveJson?t.json().then(o=>{const i=t.status||500,s=o?.statusCode||i+"";n(new WL(Sp(o),i,s))}).catch(o=>{n(new bp(Sp(o),o))}):n(new bp(Sp(t),t))}),QL=(t,n,e,r)=>{const o={method:t,headers:n?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const n=Object.getPrototypeOf(t);return!(null!==n&&n!==Object.prototype&&null!==Object.getPrototypeOf(n)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(r)):o.body=r,n?.duplex&&(o.duplex=n.duplex),Object.assign(Object.assign({},o),e)):o};function xa(t,n,e,r,o,i){return(0,V.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(e,QL(n,r,o,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>YL(l,a,r))})})}function Ma(t,n,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return xa(t,"GET",n,e,r)})}function Qn(t,n,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return xa(t,"POST",n,r,o,e)})}function Ep(t,n,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return xa(t,"PUT",n,r,o,e)})}function xp(t,n,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return xa(t,"DELETE",n,r,o,e)})}class XL{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}execute(){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}}var MD;MD=Symbol.toStringTag;const nj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},TD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rj{constructor(n,e={},r,o){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=r,this.fetch=wp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},TD),o);let a=Object.assign(Object.assign({},this.headers),"POST"===n&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield("PUT"==n?Ep:Qn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}upload(n,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,e,r)})}uploadToSignedUrl(n,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(n),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l;const c=Object.assign({upsert:TD.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(yield Ep(this.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(nt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(n,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(n);const o=Object.assign({},this.headers);e?.upsert&&(o["x-upsert"]="true");const i=yield Qn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new Cp("No token returned by API");return{data:{signedUrl:s.toString(),path:n,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}update(n,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,e,r)})}move(n,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}copy(n,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}createSignedUrl(n,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),i=yield Qn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}createSignedUrls(n,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const o=yield Qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:n},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}download(n,e){const o=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(n);return new class ej{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[MD]="BlobDownloadBuilder",this.promise=null}asStream(){return new XL(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}}(()=>Ma(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(n);try{const r=yield Ma(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Dp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}exists(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(n);try{return yield function ZL(t,n,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){return xa(t,"HEAD",n,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r)&&r instanceof bp&&[400,404].includes(r.originalError?.status))return{data:!1,error:r};throw r}})}getPublicUrl(n,e){const r=this._getFinalPath(n),o=[],i=e?.download?`download=${!0===e.download?"":e.download}`:"";""!==i&&o.push(i);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});""!==l&&o.push(l);let c=o.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield xp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}list(n,e,r){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},nj),e),{prefix:n||""});return{data:yield Qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}listV2(n,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},n);return{data:yield Qn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}}const ID={"X-Client-Info":"storage-js/2.76.1"};class oj{constructor(n,e={},r,o){this.shouldThrowOnError=!1;const i=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ID),e),this.fetch=wp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}getBucket(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}createBucket(n){return(0,V.__awaiter)(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}updateBucket(n,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}emptyBucket(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}deleteBucket(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield xp(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}}class ij{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ID),e),this.fetch=wp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}listBuckets(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{const e=new URLSearchParams;void 0!==n?.limit&&e.set("limit",n.limit.toString()),void 0!==n?.offset&&e.set("offset",n.offset.toString()),n?.sortColumn&&e.set("sortColumn",n.sortColumn),n?.sortOrder&&e.set("sortOrder",n.sortOrder),n?.search&&e.set("search",n.search);const r=e.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield Ma(this.fetch,o,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}deleteBucket(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield xp(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}}const Mp={"X-Client-Info":"storage-js/2.76.1","Content-Type":"application/json"};class AD extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _n(t){return"object"==typeof t&&null!==t&&"__isStorageVectorsError"in t}class Tp extends AD{constructor(n,e,r){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sj extends AD{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}}const Op=t=>{let n;return n=t||(typeof fetch>"u"?(...e)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:r})=>r(...e)):fetch),(...e)=>n(...e)},kD=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lj=(t,n,e)=>(0,V.__awaiter)(void 0,void 0,void 0,function*(){if(t&&"object"==typeof t&&"status"in t&&"ok"in t&&"number"==typeof t.status&&!e?.noResolveJson){const o=t.status||500,i=t;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";n(new Tp(kD(s),o,a))}).catch(()=>{n(new Tp(i.statusText||`HTTP ${o} error`,o,o+""))}):n(new Tp(i.statusText||`HTTP ${o} error`,o,o+""))}else n(new sj(kD(t),t))}),cj=(t,n,e,r)=>{const o={method:t,headers:n?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const n=Object.getPrototypeOf(t);return!(null!==n&&n!==Object.prototype&&null!==Object.getPrototypeOf(n)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),e)):o};function yn(t,n,e,r,o){return(0,V.__awaiter)(this,void 0,void 0,function*(){return function iu(t,n,e,r,o,i){return(0,V.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(e,cj(n,r,o,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return c&&c.includes("application/json")?l.json():{}}).then(l=>s(l)).catch(l=>lj(l,a,r))})})}(t,"POST",n,r,o,e)})}class uj{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mp),e),this.fetch=Op(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getIndex(n,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}})}listIndexes(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteIndex(n,e){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_n(r))return{data:null,error:r};throw r}})}}class dj{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mp),e),this.fetch=Op(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield yn(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getVectors(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}listVectors(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==n.segmentCount){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==n.segmentIndex&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error("segmentIndex must be between 0 and "+(n.segmentCount-1))}return{data:yield yn(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}queryVectors(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteVectors(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield yn(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}}class hj{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mp),e),this.fetch=Op(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}getBucket(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,V.__awaiter)(this,arguments,void 0,function*(n={}){try{return{data:yield yn(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}deleteBucket(n){return(0,V.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield yn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_n(e))return{data:null,error:e};throw e}})}}class fj extends hj{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new pj(this.url,this.headers,n,this.fetch)}}class pj extends uj{constructor(n,e,r,o){super(n,e,o),this.vectorBucketName=r}createIndex(n){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,V.__awaiter)(this,arguments,void 0,function*(e={}){return n.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new gj(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class gj extends dj{constructor(n,e,r,o,i){super(n,e,i),this.vectorBucketName=r,this.indexName=o}putVectors(n){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,V.__awaiter)(this,arguments,void 0,function*(e={}){return n.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,V.__awaiter)(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class mj extends oj{constructor(n,e={},r,o){super(n,e,r,o)}from(n){return new rj(this.url,this.headers,n,this.fetch)}get vectors(){return new fj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ij(this.url+"/iceberg",this.headers,this.fetch)}}let Ta="";Ta=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const yj={headers:{"X-Client-Info":`supabase-js-${Ta}/2.76.1`}},vj={schema:"public"},Cj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bj={};var PD=ee(397);const Sj=(t,n,e)=>{const r=(t=>{let n;return n=t||(typeof fetch>"u"?PD.default:fetch),(...e)=>n(...e)})(e),o=typeof Headers>"u"?PD.Headers:Headers;return function(){var i=b(function*(s,a){var l;const c=null!==(l=yield n())&&void 0!==l?l:t;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},Qi=3e4,kp="X-Supabase-Api-Version",ND={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Aj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Oa extends Error{constructor(n,e,r){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}}function ne(t){return"object"==typeof t&&null!==t&&"__isAuthError"in t}class Pj extends Oa{constructor(n,e,r){super(n,e,r),this.name="AuthApiError",this.status=e,this.code=r}}class Ao extends Oa{constructor(n,e){super(n),this.name="AuthUnknownError",this.originalError=e}}class lo extends Oa{constructor(n,e,r,o){super(n,r,o),this.name=e,this.status=r}}class co extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Zi extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class su extends lo{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class au extends lo{constructor(n,e=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class FD extends lo{constructor(n,e=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pp extends lo{constructor(n,e){super(n,"AuthRetryableFetchError",e,void 0)}}function Rp(t){return ne(t)&&"AuthRetryableFetchError"===t.name}class LD extends lo{constructor(n,e,r){super(n,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}}class Np extends lo{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const lu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jD=" \t\n\r=".split(""),Lj=(()=>{const t=new Array(128);for(let n=0;n<t.length;n+=1)t[n]=-1;for(let n=0;n<jD.length;n+=1)t[jD[n].charCodeAt(0)]=-2;for(let n=0;n<lu.length;n+=1)t[lu[n].charCodeAt(0)]=n;return t})();function cu(t,n,e){if(null!==t)for(n.queue=n.queue<<8|t,n.queuedBits+=8;n.queuedBits>=6;)e(lu[n.queue>>n.queuedBits-6&63]),n.queuedBits-=6;else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;)e(lu[n.queue>>n.queuedBits-6&63]),n.queuedBits-=6}function VD(t,n,e){const r=Lj[t];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}for(n.queue=n.queue<<6|r,n.queuedBits+=6;n.queuedBits>=8;)e(n.queue>>n.queuedBits-8&255),n.queuedBits-=8}function $D(t){const n=[],e=s=>{n.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function Vj(t,n,e){if(0===n.utf8seq){if(t<=127)return void e(t);for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){n.utf8seq=r;break}if(2===n.utf8seq)n.codepoint=31&t;else if(3===n.utf8seq)n.codepoint=15&t;else{if(4!==n.utf8seq)throw new Error("Invalid UTF-8 sequence");n.codepoint=7&t}n.utf8seq-=1}else if(n.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|63&t,n.utf8seq-=1,0===n.utf8seq&&e(n.codepoint)}}(s,r,e)};for(let s=0;s<t.length;s+=1)VD(t.charCodeAt(s),o,i);return n.join("")}function jj(t,n){if(!(t<=127)){if(t<=2047)return n(192|t>>6),void n(128|63&t);if(t<=65535)return n(224|t>>12),n(128|t>>6&63),void n(128|63&t);if(t<=1114111)return n(240|t>>18),n(128|t>>12&63),n(128|t>>6&63),void n(128|63&t);throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}n(t)}function Xi(t){const n=[],e={queue:0,queuedBits:0},r=o=>{n.push(o)};for(let o=0;o<t.length;o+=1)VD(t.charCodeAt(o),e,r);return new Uint8Array(n)}function ko(t){const n=[],e={queue:0,queuedBits:0},r=o=>{n.push(o)};return t.forEach(o=>cu(o,e,r)),cu(null,e,r),n.join("")}const vn=()=>typeof window<"u"&&typeof document<"u",Po={tested:!1,writable:!1},BD=()=>{if(!vn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Po.tested)return Po.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Po.tested=!0,Po.writable=!0}catch{Po.tested=!0,Po.writable=!1}return Po.writable},HD=t=>{let n;return n=t||(typeof fetch>"u"?(...e)=>Promise.resolve().then(ee.bind(ee,397)).then(({default:r})=>r(...e)):fetch),(...e)=>n(...e)},zj=t=>"object"==typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json,es=function(){var t=b(function*(n,e,r){yield n.setItem(e,JSON.stringify(r))});return function(e,r,o){return t.apply(this,arguments)}}(),Ro=function(){var t=b(function*(n,e){const r=yield n.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(e,r){return t.apply(this,arguments)}}(),uo=function(){var t=b(function*(n,e){yield n.removeItem(e)});return function(e,r){return t.apply(this,arguments)}}();class uu{constructor(){this.promise=new uu.promiseConstructor((n,e)=>{this.resolve=n,this.reject=e})}}function Fp(t){const n=t.split(".");if(3!==n.length)throw new Np("Invalid JWT structure");for(let r=0;r<n.length;r++)if(!Aj.test(n[r]))throw new Np("JWT not in base64url format");return{header:JSON.parse($D(n[0])),payload:JSON.parse($D(n[1])),signature:Xi(n[2]),raw:{header:n[0],payload:n[1]}}}function Lp(){return(Lp=b(function*(t){return yield new Promise(n=>{setTimeout(()=>n(null),t)})})).apply(this,arguments)}function Wj(t){return("0"+t.toString(16)).substr(-2)}function jp(){return(jp=b(function*(t){const e=(new TextEncoder).encode(t),r=yield crypto.subtle.digest("SHA-256",e),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function Vp(){return Vp=b(function*(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=yield function Jj(t){return jp.apply(this,arguments)}(t);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Vp.apply(this,arguments)}function ts(t,n){return $p.apply(this,arguments)}function $p(){return $p=b(function*(t,n,e=!1){const r=function Kj(){const n=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length;let o="";for(let i=0;i<56;i++)o+=e.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(n),Array.from(n,Wj).join("")}();let o=r;e&&(o+="/PASSWORD_RECOVERY"),yield es(t,`${n}-code-verifier`,o);const i=yield function Yj(t){return Vp.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),$p.apply(this,arguments)}uu.promiseConstructor=Promise;const Qj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,tV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ns(t){if(!tV.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Up(){return new Proxy({},{get:(n,e)=>{if("__isUserNotAvailableProxy"===e)return!0;if("symbol"==typeof e){const r=e.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zD(t){return JSON.parse(JSON.stringify(t))}const No=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),nV=[502,503,504];function GD(t){return Bp.apply(this,arguments)}function Bp(){return(Bp=b(function*(t){var n;if(!zj(t))throw new Pp(No(t),0);if(nV.includes(t.status))throw new Pp(No(t),t.status);let e,r;try{e=yield t.json()}catch(i){throw new Ao(No(i),i)}const o=function Zj(t){const n=t.headers.get(kp);if(!n||!n.match(Qj))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}(t);if(o&&o.getTime()>=ND["2024-01-01"].timestamp&&"object"==typeof e&&e&&"string"==typeof e.code?r=e.code:"object"==typeof e&&e&&"string"==typeof e.error_code&&(r=e.error_code),r){if("weak_password"===r)throw new LD(No(e),t.status,(null===(n=e.weak_password)||void 0===n?void 0:n.reasons)||[]);if("session_not_found"===r)throw new co}else if("object"==typeof e&&e&&"object"==typeof e.weak_password&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new LD(No(e),t.status,e.weak_password.reasons);throw new Pj(No(e),t.status||500,r)})).apply(this,arguments)}const rV=(t,n,e,r)=>{const o={method:t,headers:n?.headers||{}};return"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),e))};function me(t,n,e,r){return Hp.apply(this,arguments)}function Hp(){return Hp=b(function*(t,n,e,r){var o;const i=Object.assign({},r?.headers);i[kp]||(i[kp]=ND["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield function oV(t,n,e,r,o,i){return zp.apply(this,arguments)}(t,n,e+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),Hp.apply(this,arguments)}function zp(){return(zp=b(function*(t,n,e,r,o,i){const s=rV(n,r,o,i);let a;try{a=yield t(e,Object.assign({},s))}catch(l){throw console.error(l),new Pp(No(l),0)}if(a.ok||(yield GD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield GD(l)}})).apply(this,arguments)}function Zn(t){var n;let e=null;return function aV(t){return t.access_token&&t.refresh_token&&t.expires_in}(t)&&(e=Object.assign({},t),t.expires_at||(e.expires_at=function Uj(t){return Math.round(Date.now()/1e3)+t}(t.expires_in))),{data:{session:e,user:null!==(n=t.user)&&void 0!==n?n:t},error:null}}function qD(t){const n=Zn(t);return!n.error&&t.weak_password&&"object"==typeof t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&"string"==typeof t.weak_password.message&&t.weak_password.reasons.reduce((e,r)=>e&&"string"==typeof r,!0)&&(n.data.weak_password=t.weak_password),n}function ho(t){var n;return{data:{user:null!==(n=t.user)&&void 0!==n?n:t},error:null}}function iV(t){return{data:t,error:null}}function sV(t){const{action_link:n,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i}=t,s=(0,V.__rest)(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:n,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function WD(t){return t}const Gp=["global","local","others"];class lV{constructor({url:n="",headers:e={},fetch:r}){this.url=n,this.headers=e,this.fetch=HD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(n){var e=this;return b(function*(r,o=Gp[0]){if(Gp.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gp.join(", ")}`);try{return yield me(e.fetch,"POST",`${e.url}/logout?scope=${o}`,{headers:e.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(n){var e=this;return b(function*(r,o={}){try{return yield me(e.fetch,"POST",`${e.url}/invite`,{body:{email:r,data:o.data},headers:e.headers,redirectTo:o.redirectTo,xform:ho})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(n){var e=this;return b(function*(){try{const{options:r}=n,o=(0,V.__rest)(n,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield me(e.fetch,"POST",`${e.url}/admin/generate_link`,{body:i,headers:e.headers,xform:sV,redirectTo:r?.redirectTo})}catch(r){if(ne(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(n){var e=this;return b(function*(){try{return yield me(e.fetch,"POST",`${e.url}/admin/users`,{body:n,headers:e.headers,xform:ho})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}})()}listUsers(n){var e=this;return b(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield me(e.fetch,"GET",`${e.url}/admin/users`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=n?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=n?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:WD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ne(u))return{data:{users:[]},error:u};throw u}})()}getUserById(n){var e=this;return b(function*(){ns(n);try{return yield me(e.fetch,"GET",`${e.url}/admin/users/${n}`,{headers:e.headers,xform:ho})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}})()}updateUserById(n,e){var r=this;return b(function*(){ns(n);try{return yield me(r.fetch,"PUT",`${r.url}/admin/users/${n}`,{body:e,headers:r.headers,xform:ho})}catch(o){if(ne(o))return{data:{user:null},error:o};throw o}})()}deleteUser(n){var e=this;return b(function*(r,o=!1){ns(r);try{return yield me(e.fetch,"DELETE",`${e.url}/admin/users/${r}`,{headers:e.headers,body:{should_soft_delete:o},xform:ho})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(n){var e=this;return b(function*(){ns(n.userId);try{const{data:r,error:o}=yield me(e.fetch,"GET",`${e.url}/admin/users/${n.userId}/factors`,{headers:e.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_deleteFactor(n){var e=this;return b(function*(){ns(n.userId),ns(n.id);try{return{data:yield me(e.fetch,"DELETE",`${e.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:e.headers}),error:null}}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_listOAuthClients(n){var e=this;return b(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield me(e.fetch,"GET",`${e.url}/admin/oauth/clients`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=n?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=n?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:WD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ne(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(n){var e=this;return b(function*(){try{return yield me(e.fetch,"POST",`${e.url}/admin/oauth/clients`,{body:n,headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_getOAuthClient(n){var e=this;return b(function*(){try{return yield me(e.fetch,"GET",`${e.url}/admin/oauth/clients/${n}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_deleteOAuthClient(n){var e=this;return b(function*(){try{return yield me(e.fetch,"DELETE",`${e.url}/admin/oauth/clients/${n}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(n){var e=this;return b(function*(){try{return yield me(e.fetch,"POST",`${e.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}}function KD(t={}){return{getItem:n=>t[n]||null,setItem:(n,e)=>{t[n]=e},removeItem:n=>{delete t[n]}}}const rs={debug:!!(globalThis&&BD()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class JD extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class cV extends JD{}function dV(t,n,e){return qp.apply(this,arguments)}function qp(){return qp=b(function*(t,n,e){rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,n);const r=new globalThis.AbortController;return n>0&&setTimeout(()=>{r.abort(),rs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},n),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(t,0===n?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=b(function*(i){if(!i){if(0===n)throw rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new cV(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(rs.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return yield e()}finally{rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),qp.apply(this,arguments)}function QD(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function pV(t){const n=(new TextEncoder).encode(t);return"0x"+Array.from(n,r=>r.toString(16).padStart(2,"0")).join("")}class bt extends Error{constructor({message:n,code:e,cause:r,name:o}){var i;super(n,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=e}}class du extends bt{constructor(n,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:n}),this.name="WebAuthnUnknownError",this.originalError=e}}function mV({error:t,options:n}){var e,r,o;const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(e=i.authenticatorSelection)||void 0===e?void 0:e.requireResidentKey))return new bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===n.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new bt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if("SecurityError"===t.name){const s=window.location.hostname;if(!ZD(s))return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rp.id!==s)return new bt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function _V({error:t,options:n}){const{publicKey:e}=n;if(!e)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new bt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const r=window.location.hostname;if(!ZD(r))return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(e.rpId!==r)return new bt({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const vV=new class yV{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}};function CV(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:n,user:e,excludeCredentials:r}=t,o=(0,V.__rest)(t,["challenge","user","excludeCredentials"]),i=Xi(n).buffer,s=Object.assign(Object.assign({},e),{id:Xi(e.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Xi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function bV(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:n,allowCredentials:e}=t,r=(0,V.__rest)(t,["challenge","allowCredentials"]),o=Xi(n).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(e&&e.length>0){i.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){const a=e[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Xi(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function wV(t){var n;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const e=t;return{id:t.id,rawId:t.id,response:{attestationObject:ko(new Uint8Array(t.response.attestationObject)),clientDataJSON:ko(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:null!==(n=e.authenticatorAttachment)&&void 0!==n?n:void 0}}function DV(t){var n;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const e=t,r=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ko(new Uint8Array(o.authenticatorData)),clientDataJSON:ko(new Uint8Array(o.clientDataJSON)),signature:ko(new Uint8Array(o.signature)),userHandle:o.userHandle?ko(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(n=e.authenticatorAttachment)&&void 0!==n?n:void 0}}function ZD(t){return"localhost"===t||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function XD(){var t,n;return!!(vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(t=navigator?.credentials)||void 0===t?void 0:t.create)&&"function"==typeof(null===(n=navigator?.credentials)||void 0===n?void 0:n.get))}function Kp(){return(Kp=b(function*(t){try{const n=yield navigator.credentials.create(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new du("Browser returned unexpected credential type",n)}:{data:null,error:new du("Empty credential response",n)}}catch(n){return{data:null,error:mV({error:n,options:t})}}})).apply(this,arguments)}function Jp(){return(Jp=b(function*(t){try{const n=yield navigator.credentials.get(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new du("Browser returned unexpected credential type",n)}:{data:null,error:new du("Empty credential response",n)}}catch(n){return{data:null,error:_V({error:n,options:t})}}})).apply(this,arguments)}const xV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},MV={userVerification:"preferred",hints:["security-key"]};function hu(...t){const n=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),e=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of t)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(e(s))r[i]=s;else if(n(s)){const a=r[i];r[i]=n(a)?hu(a,s):hu(s)}else r[i]=s}return r}class IV{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(n){var e=this;return b(function*(){return e.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))})()}_challenge(n,e){var r=this;return b(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!c)return{data:null,error:u};const d=a??vV.createNewAbortSignal();if("create"===c.webauthn.type){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=function TV(t,n){return hu(xV,t,n||{})}(c.webauthn.credential_options.publicKey,l?.create),{data:f,error:p}=yield function SV(t){return Kp.apply(this,arguments)}({publicKey:h,signal:d});return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=function OV(t,n){return hu(MV,t,n||{})}(c.webauthn.credential_options.publicKey,l?.request),{data:f,error:p}=yield function EV(t){return Jp.apply(this,arguments)}(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in challenge",c)}}}).apply(this,arguments)}_verify(n){var e=this;return b(function*({challengeId:r,factorId:o,webauthn:i}){return e.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(n,e){var r=this;return b(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}},l){if(!i)return{data:null,error:new Oa("rpId is required for WebAuthn authentication")};try{if(!XD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:u};const{webauthn:d}=c;return r._verify({factorId:o,challengeId:c.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in authenticate",c)}}}).apply(this,arguments)}_register(n,e){var r=this;return b(function*({friendlyName:o,rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a},l){if(!i)return{data:null,error:new Oa("rpId is required for WebAuthn registration")};try{if(!XD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r._enroll({friendlyName:o});if(!c)return yield r.client.mfa.listFactors().then(f=>{var p;return null===(p=f.data)||void 0===p?void 0:p.all.find(v=>"webauthn"===v.factor_type&&v.friendly_name===o&&"unverified"!==v.status)}).then(f=>f?r.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:d,error:h}=yield r._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return d?r._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in register",c)}}}).apply(this,arguments)}}!function hV(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const AV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.76.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function eS(t,n,e){return Yp.apply(this,arguments)}function Yp(){return(Yp=b(function*(t,n,e){return yield e()})).apply(this,arguments)}const os={},PV=(()=>{class t{get jwks(){var e,r;return null!==(r=null===(e=os[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==r?r:{keys:[]}}set jwks(e){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return null!==(r=null===(e=os[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{cachedAt:e})}constructor(e){var o,i,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=t.nextInstanceID,t.nextInstanceID+=1,this.instanceID>0&&vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},AV),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new lV({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=HD(s.fetch),this.lock=s.lock||eS,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.lock=s.lock?s.lock:vn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?dV:eS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new IV(this)},this.persistSession?(s.storage?this.storage=s.storage:BD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=KD(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=KD(this.memoryStorage)),vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=b(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.76.1) ${(new Date).toISOString()}`,...e),this}initialize(){var e=this;return b(function*(){return e.initializePromise||(e.initializePromise=b(function*(){return yield e._acquireLock(-1,b(function*(){return yield e._initialize()}))})()),yield e.initializePromise})()}_initialize(){var e=this;return b(function*(){var r;try{const o=function Hj(t){const n={},e=new URL(t);if(e.hash&&"#"===e.hash[0])try{new URLSearchParams(e.hash.substring(1)).forEach((o,i)=>{n[i]=o})}catch{}return e.searchParams.forEach((r,o)=>{n[o]=r}),n}(window.location.href);let i="none";if(e._isImplicitGrantCallback(o)?i="implicit":(yield e._isPKCECallback(o))&&(i="pkce"),vn()&&e.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield e._getSessionFromURL(o,i);if(a){if(e._debug("#_initialize()","error detecting session from URL",a),function Fj(t){return ne(t)&&"AuthImplicitGrantRedirectError"===t.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield e._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return e._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield e._saveSession(l),setTimeout(b(function*(){"recovery"===c?yield e._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield e._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield e._recoverAndRefresh(),{error:null}}catch(o){return ne(o)?{error:o}:{error:new Ao("Unexpected error during initialization",o)}}finally{yield e._handleVisibilityChange(),e._debug("#_initialize()","end")}})()}signInAnonymously(e){var r=this;return b(function*(){var o,i,s;try{const a=yield me(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=e?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=e?.options)||void 0===s?void 0:s.captchaToken}},xform:Zn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(e){var r=this;return b(function*(){var o,i,s;try{let a;if("email"in e){const{email:h,password:f,options:p}=e;let v=null,y=null;"pkce"===r.flowType&&([v,y]=yield ts(r.storage,r.storageKey)),a=yield me(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:null!==(o=p?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:v,code_challenge_method:y},xform:Zn})}else{if(!("phone"in e))throw new su("You must provide either an email or phone number and a password");{const{phone:h,password:f,options:p}=e;a=yield me(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:h,password:f,data:null!==(i=p?.data)&&void 0!==i?i:{},channel:null!==(s=p?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Zn})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(e){var r=this;return b(function*(){try{let o;if("email"in e){const{email:a,password:l,options:c}=e;o=yield me(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:qD})}else{if(!("phone"in e))throw new su("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=e;o=yield me(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:qD})}}const{data:i,error:s}=o;return s?{data:{user:null,session:null},error:s}:i&&i.session&&i.user?(i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Zi}}catch(o){if(ne(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(e){var r=this;return b(function*(){var o,i,s,a;return yield r._handleProviderSignIn(e.provider,{redirectTo:null===(o=e.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=e.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(e){var r=this;return b(function*(){return yield r.initializePromise,r._acquireLock(-1,b(function*(){return r._exchangeCodeForSession(e)}))})()}signInWithWeb3(e){var r=this;return b(function*(){const{chain:o}=e;switch(o){case"ethereum":return yield r.signInWithEthereum(e);case"solana":return yield r.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(e){var r=this;return b(function*(){var o,i,s,a,l,c,u,d,h,f,p;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{wallet:T,statement:D,options:P}=e;let $;if(vn())if("object"==typeof T)$=T;else{const bn=window;if(!("ethereum"in bn)||"object"!=typeof bn.ethereum||!("request"in bn.ethereum)||"function"!=typeof bn.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");$=bn.ethereum}else{if("object"!=typeof T||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=T}const le=new URL(null!==(o=P?.url)&&void 0!==o?o:window.location.href),Cn=yield $.request({method:"eth_requestAccounts"}).then(bn=>bn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Cn||0===Cn.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ue=QD(Cn[0]);let De=null===(i=P?.signInWithEthereum)||void 0===i?void 0:i.chainId;De||(De=function fV(t){return parseInt(t,16)}(yield $.request({method:"eth_chainId"}))),v=function gV(t){var n;const{chainId:e,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=t;if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null!==(n=t.statement)&&void 0!==n&&n.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`);const y=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${QD(t.address)}\n\n${t.statement?`${t.statement}\n`:""}`;let w=`URI: ${d}\nVersion: ${h}\nChain ID: ${e}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(w+=`\nExpiration Time: ${o.toISOString()}`),a&&(w+=`\nNot Before: ${a.toISOString()}`),l&&(w+=`\nRequest ID: ${l}`),c){let T="\nResources:";for(const D of c){if(!D||"string"!=typeof D)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);T+=`\n- ${D}`}w+=T}return`${y}\n${w}`}({domain:le.host,address:ue,statement:D,uri:le.href,version:"1",chainId:De,nonce:null===(s=P?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(l=null===(a=P?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==l?l:new Date,expirationTime:null===(c=P?.signInWithEthereum)||void 0===c?void 0:c.expirationTime,notBefore:null===(u=P?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=P?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(h=P?.signInWithEthereum)||void 0===h?void 0:h.resources}),y=yield $.request({method:"personal_sign",params:[pV(v),ue]})}try{const{data:w,error:T}=yield me(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:v,signature:y},null!==(f=e.options)&&void 0!==f&&f.captchaToken?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Zn});if(T)throw T;return w&&w.session&&w.user?(w.session&&(yield r._saveSession(w.session),yield r._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:T}):{data:{user:null,session:null},error:new Zi}}catch(w){if(ne(w))return{data:{user:null,session:null},error:w};throw w}})()}signInWithSolana(e){var r=this;return b(function*(){var o,i,s,a,l,c,u,d,h,f,p,v;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{wallet:D,statement:P,options:$}=e;let le;if(vn())if("object"==typeof D)le=D;else{const ue=window;if(!("solana"in ue)||"object"!=typeof ue.solana||!("signIn"in ue.solana&&"function"==typeof ue.solana.signIn||"signMessage"in ue.solana&&"function"==typeof ue.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");le=ue.solana}else{if("object"!=typeof D||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");le=D}const Cn=new URL(null!==(o=$?.url)&&void 0!==o?o:window.location.href);if("signIn"in le&&le.signIn){const ue=yield le.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},$?.signInWithSolana),{version:"1",domain:Cn.host,uri:Cn.href}),P?{statement:P}:null));let De;if(Array.isArray(ue)&&ue[0]&&"object"==typeof ue[0])De=ue[0];else{if(!(ue&&"object"==typeof ue&&"signedMessage"in ue&&"signature"in ue))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");De=ue}if(!("signedMessage"in De&&"signature"in De&&("string"==typeof De.signedMessage||De.signedMessage instanceof Uint8Array)&&De.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");y="string"==typeof De.signedMessage?De.signedMessage:(new TextDecoder).decode(De.signedMessage),w=De.signature}else{if(!("signMessage"in le&&"function"==typeof le.signMessage&&"publicKey"in le&&"object"==typeof le&&le.publicKey&&"toBase58"in le.publicKey&&"function"==typeof le.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${Cn.host} wants you to sign in with your Solana account:`,le.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${Cn.href}`,`Issued At: ${null!==(s=null===(i=$?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=$?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${$.signInWithSolana.notBefore}`]:[],...null!==(l=$?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${$.signInWithSolana.expirationTime}`]:[],...null!==(c=$?.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${$.signInWithSolana.chainId}`]:[],...null!==(u=$?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${$.signInWithSolana.nonce}`]:[],...null!==(d=$?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${$.signInWithSolana.requestId}`]:[],...null!==(f=null===(h=$?.signInWithSolana)||void 0===h?void 0:h.resources)&&void 0!==f&&f.length?["Resources",...$.signInWithSolana.resources.map(De=>`- ${De}`)]:[]].join("\n");const ue=yield le.signMessage((new TextEncoder).encode(y),"utf8");if(!(ue&&ue instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=ue}}try{const{data:T,error:D}=yield me(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:y,signature:ko(w)},null!==(p=e.options)&&void 0!==p&&p.captchaToken?{gotrue_meta_security:{captcha_token:null===(v=e.options)||void 0===v?void 0:v.captchaToken}}:null),xform:Zn});if(D)throw D;return T&&T.session&&T.user?(T.session&&(yield r._saveSession(T.session),yield r._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:D}):{data:{user:null,session:null},error:new Zi}}catch(T){if(ne(T))return{data:{user:null,session:null},error:T};throw T}})()}_exchangeCodeForSession(e){var r=this;return b(function*(){const o=yield Ro(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:l}=yield me(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:e,code_verifier:i},xform:Zn});if(yield uo(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Zi}}catch(a){if(ne(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(e){var r=this;return b(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:l}=e,c=yield me(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Zn}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new Zi}}catch(o){if(ne(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(e){var r=this;return b(function*(){var o,i,s,a,l;try{if("email"in e){const{email:c,options:u}=e;let d=null,h=null;"pkce"===r.flowType&&([d,h]=yield ts(r.storage,r.storageKey));const{error:f}=yield me(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:c,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:c,options:u}=e,{data:d,error:h}=yield me(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:c,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(l=u?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new su("You must provide either an email or phone number.")}catch(c){if(ne(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(e){var r=this;return b(function*(){var o,i;try{let s,a;"options"in e&&(s=null===(o=e.options)||void 0===o?void 0:o.redirectTo,a=null===(i=e.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield me(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Zn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,d=l.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithSSO(e){var r=this;return b(function*(){var o,i,s;try{let a=null,l=null;return"pkce"===r.flowType&&([a,l]=yield ts(r.storage,r.storageKey)),yield me(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(i=null===(o=e.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=e?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:iV})}catch(a){if(ne(a))return{data:null,error:a};throw a}})()}reauthenticate(){var e=this;return b(function*(){return yield e.initializePromise,yield e._acquireLock(-1,b(function*(){return yield e._reauthenticate()}))})()}_reauthenticate(){var e=this;return b(function*(){try{return yield e._useSession(function(){var r=b(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new co;const{error:a}=yield me(e.fetch,"GET",`${e.url}/reauthenticate`,{headers:e.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(e){var r=this;return b(function*(){try{const o=`${r.url}/resend`;if("email"in e){const{email:i,type:s,options:a}=e,{error:l}=yield me(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in e){const{phone:i,type:s,options:a}=e,{data:l,error:c}=yield me(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new su("You must provide either an email or phone number and a type")}catch(o){if(ne(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var e=this;return b(function*(){return yield e.initializePromise,yield e._acquireLock(-1,b(function*(){return e._useSession(function(){var o=b(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(e,r){var o=this;return b(function*(){o._debug("#_acquireLock","begin",e);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=b(function*(){return yield i,yield r()})();return o.pendingInLock.push(b(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,e,b(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(b(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(e){var r=this;return b(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield e(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var e=this;return b(function*(){e._debug("#__loadSession()","begin"),e.lockAcquired||e._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield Ro(e.storage,e.storageKey);if(e._debug("#getSession()","session from storage",o),null!==o&&(e._isValidSession(o)?r=o:(e._debug("#getSession()","session from storage is not valid"),yield e._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(e._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(e.userStorage){const l=yield Ro(e.userStorage,e.storageKey+"-user");r.user=l?.user?l.user:Up()}if(e.storage.isServer&&r.user){let l=e.suppressGetSessionWarning;r=new Proxy(r,{get:(u,d,h)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,e.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:r},error:null}}const{data:s,error:a}=yield e._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{e._debug("#__loadSession()","end")}})()}getUser(e){var r=this;return b(function*(){return e?yield r._getUser(e):(yield r.initializePromise,yield r._acquireLock(-1,b(function*(){return yield r._getUser()})))})()}_getUser(e){var r=this;return b(function*(){try{return e?yield me(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:e,xform:ho}):yield r._useSession(function(){var o=b(function*(i){var s,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(s=c.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield me(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:ho}):{data:{user:null},error:new co}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return function Nj(t){return ne(t)&&"AuthSessionMissingError"===t.name}(o)&&(yield r._removeSession(),yield uo(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(e){var r=this;return b(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,b(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(e){var r=this;return b(function*(o,i={}){try{return yield r._useSession(function(){var s=b(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new co;const u=l.session;let d=null,h=null;"pkce"===r.flowType&&null!=o.email&&([d,h]=yield ts(r.storage,r.storageKey));const{data:f,error:p}=yield me(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:ho});if(p)throw p;return u.user=f.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return s.apply(this,arguments)}}())}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}).apply(this,arguments)}setSession(e){var r=this;return b(function*(){return yield r.initializePromise,yield r._acquireLock(-1,b(function*(){return yield r._setSession(e)}))})()}_setSession(e){var r=this;return b(function*(){try{if(!e.access_token||!e.refresh_token)throw new co;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:l}=Fp(e.access_token);if(l.exp&&(i=l.exp,s=i<=o),s){const{data:c,error:u}=yield r._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield r._getUser(e.access_token);if(u)throw u;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(o){if(ne(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(e){var r=this;return b(function*(){return yield r.initializePromise,yield r._acquireLock(-1,b(function*(){return yield r._refreshSession(e)}))})()}_refreshSession(e){var r=this;return b(function*(){try{return yield r._useSession(function(){var o=b(function*(i){var s;if(!e){const{data:c,error:u}=i;if(u)throw u;e=null!==(s=c.session)&&void 0!==s?s:void 0}if(!e?.refresh_token)throw new co;const{data:a,error:l}=yield r._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(e,r){var o=this;return b(function*(){try{if(!vn())throw new au("No browser detected.");if(e.error||e.error_description||e.error_code)throw new au(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new FD("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new au("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new FD("No code detected.");const{data:P,error:$}=yield o._exchangeCodeForSession(e.code);if($)throw $;const le=new URL(window.location.href);return le.searchParams.delete("code"),window.history.replaceState(window.history.state,"",le.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:d}=e;if(!(a&&c&&l&&d))throw new au("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let p=h+f;u&&(p=parseInt(u));const v=p-h;1e3*v<=Qi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const y=p-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,h);const{data:w,error:T}=yield o._getUser(a);if(T)throw T;const D={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:d,user:w.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(i){if(ne(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}_isPKCECallback(e){var r=this;return b(function*(){const o=yield Ro(r.storage,`${r.storageKey}-code-verifier`);return!(!e.code||!o)})()}signOut(){var e=this;return b(function*(r={scope:"global"}){return yield e.initializePromise,yield e._acquireLock(-1,b(function*(){return yield e._signOut(r)}))}).apply(this,arguments)}_signOut(){var e=this;return b(function*({scope:r}={scope:"global"}){return yield e._useSession(function(){var o=b(function*(i){var s;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(s=a.session)||void 0===s?void 0:s.access_token;if(c){const{error:u}=yield e.admin.signOut(c,r);if(u&&(!function Rj(t){return ne(t)&&"AuthApiError"===t.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==r&&(yield e._removeSession(),yield uo(e.storage,`${e.storageKey}-code-verifier`)),{error:null}});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(e){var r=this;const o=function Bj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const n=16*Math.random()|0;return("x"==t?n:3&n|8).toString(16)})}(),i={id:o,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),b(function*(){yield r.initializePromise,yield r._acquireLock(-1,b(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(e){var r=this;return b(function*(){return yield r._useSession(function(){var o=b(function*(i){var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(s=r.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(e){var r=this;return b(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield ts(r.storage,r.storageKey,!0));try{return yield me(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(l){if(ne(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var e=this;return b(function*(){var r;try{const{data:o,error:i}=yield e.getUser();if(i)throw i;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(ne(o))return{data:null,error:o};throw o}})()}linkIdentity(e){var r=this;return b(function*(){return"token"in e?r.linkIdentityIdToken(e):r.linkIdentityOAuth(e)})()}linkIdentityOAuth(e){var r=this;return b(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=b(function*(l){var c,u,d,h,f;const{data:p,error:v}=l;if(v)throw v;const y=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,e.provider,{redirectTo:null===(c=e.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=e.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=e.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield me(r.fetch,"GET",y,{headers:r.headers,jwt:null!==(f=null===(h=p.session)||void 0===h?void 0:h.access_token)&&void 0!==f?f:void 0})});return function(l){return a.apply(this,arguments)}}());if(s)throw s;return vn()&&!(null!==(o=e.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(ne(i))return{data:{provider:e.provider,url:null},error:i};throw i}})()}linkIdentityIdToken(e){var r=this;return b(function*(){return yield r._useSession(function(){var o=b(function*(i){var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:u,token:d,access_token:h,nonce:f}=e,p=yield me(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=l?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Zn}),{data:v,error:y}=p;return y?{data:{user:null,session:null},error:y}:v&&v.session&&v.user?(v.session&&(yield r._saveSession(v.session),yield r._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y}):{data:{user:null,session:null},error:new Zi}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(e){var r=this;return b(function*(){try{return yield r._useSession(function(){var o=b(function*(i){var s,a;const{data:l,error:c}=i;if(c)throw c;return yield me(r.fetch,"DELETE",`${r.url}/user/identities/${e.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=l.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(e){var r=this;return b(function*(){const o=`#_refreshAccessToken(${e.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function qj(t,n){return new Promise((r,o)=>{b(function*(){for(let i=0;i<1/0;i++)try{const s=yield t(i);if(!n(i,null,s))return void r(s)}catch(s){if(!n(i,s))return void o(s)}})()})}(function(){var s=b(function*(a){return a>0&&(yield function Gj(t){return Lp.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield me(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:r.headers,xform:Zn})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const l=200*Math.pow(2,s);return a&&Rp(a)&&Date.now()+l-i<Qi})}catch(i){if(r._debug(o,"error",i),ne(i))return{data:{session:null,user:null},error:i};throw i}finally{r._debug(o,"end")}})()}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){var o=this;return b(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),vn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})()}_recoverAndRefresh(){var e=this;return b(function*(){var r,o;const i="#_recoverAndRefresh()";e._debug(i,"begin");try{const s=yield Ro(e.storage,e.storageKey);if(s&&e.userStorage){let l=yield Ro(e.userStorage,e.storageKey+"-user");!e.storage.isServer&&Object.is(e.storage,e.userStorage)&&!l&&(l={user:s.user},yield es(e.userStorage,e.storageKey+"-user",l)),s.user=null!==(r=l?.user)&&void 0!==r?r:Up()}else if(s&&!s.user&&!s.user){const l=yield Ro(e.storage,e.storageKey+"-user");l&&l?.user?(s.user=l.user,yield uo(e.storage,e.storageKey+"-user"),yield es(e.storage,e.storageKey,s)):s.user=Up()}if(e._debug(i,"session from storage",s),!e._isValidSession(s))return e._debug(i,"session is not valid"),void(null!==s&&(yield e._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(e._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(e.autoRefreshToken&&s.refresh_token){const{error:l}=yield e._callRefreshToken(s.refresh_token);l&&(console.error(l),Rp(l)||(e._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield e._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield e._getUser(s.access_token);!c&&l?.user?(s.user=l.user,yield e._saveSession(s),yield e._notifyAllSubscribers("SIGNED_IN",s)):e._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),e._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield e._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return e._debug(i,"error",s),void console.error(s)}finally{e._debug(i,"end")}})()}_callRefreshToken(e){var r=this;return b(function*(){var o,i;if(!e)throw new co;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new uu;const{data:a,error:l}=yield r._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new co;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return r.refreshingDeferred.resolve(c),c}catch(a){if(r._debug(s,"error",a),ne(a)){const l={data:null,error:a};return Rp(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(e,r){var o=this;return b(function*(i,s,a=!0){const l=`#_notifyAllSubscribers(${i})`;o._debug(l,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const c=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=b(function*(h){try{yield h.callback(i,s)}catch(f){c.push(f)}});return function(h){return d.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(e){var r=this;return b(function*(){r._debug("#_saveSession()",e),r.suppressGetSessionWarning=!0;const o=Object.assign({},e);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield es(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=zD(s);yield es(r.storage,r.storageKey,a)}else{const s=zD(o);yield es(r.storage,r.storageKey,s)}})()}_removeSession(){var e=this;return b(function*(){e._debug("#_removeSession()"),yield uo(e.storage,e.storageKey),yield uo(e.storage,e.storageKey+"-code-verifier"),yield uo(e.storage,e.storageKey+"-user"),e.userStorage&&(yield uo(e.userStorage,e.storageKey+"-user")),yield e._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var e=this;return b(function*(){yield e._stopAutoRefresh(),e._debug("#_startAutoRefresh()");const r=setInterval(()=>e._autoRefreshTokenTick(),Qi);e.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(b(function*(){yield e.initializePromise,yield e._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var e=this;return b(function*(){e._debug("#_stopAutoRefresh()");const r=e.autoRefreshTicker;e.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var e=this;return b(function*(){e._removeVisibilityChangedCallback(),yield e._startAutoRefresh()})()}stopAutoRefresh(){var e=this;return b(function*(){e._removeVisibilityChangedCallback(),yield e._stopAutoRefresh()})()}_autoRefreshTokenTick(){var e=this;return b(function*(){e._debug("#_autoRefreshTokenTick()","begin");try{yield e._acquireLock(0,b(function*(){try{const r=Date.now();try{return yield e._useSession(function(){var o=b(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void e._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/Qi);e._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield e._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{e._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof JD))throw r;e._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var e=this;return b(function*(){if(e._debug("#_handleVisibilityChange()"),!vn()||!window?.addEventListener)return e.autoRefreshToken&&e.startAutoRefresh(),!1;try{e.visibilityChangedCallback=b(function*(){return yield e._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",e.visibilityChangedCallback),yield e._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(e){var r=this;return b(function*(){const o=`#_onVisibilityChanged(${e})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),e||(yield r.initializePromise,yield r._acquireLock(-1,b(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(e,r,o){var i=this;return b(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,l]=yield ts(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${s.join("&")}`})()}_unenroll(e){var r=this;return b(function*(){try{return yield r._useSession(function(){var o=b(function*(i){var s;const{data:a,error:l}=i;return l?{data:null,error:l}:yield me(r.fetch,"DELETE",`${r.url}/factors/${e.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}})()}_enroll(e){var r=this;return b(function*(){try{return yield r._useSession(function(){var o=b(function*(i){var s,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:d,error:h}=yield me(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=l?.session)||void 0===s?void 0:s.access_token});return h?{data:null,error:h}:("totp"===e.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}})()}_verify(e){var r=this;return b(function*(){return r._acquireLock(-1,b(function*(){try{return yield r._useSession(function(){var o=b(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?wV(e.webauthn.credential_response):DV(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=yield me(r.fetch,"POST",`${r.url}/factors/${e.factorId}/verify`,{body:c,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?{data:null,error:d}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}}))})()}_challenge(e){var r=this;return b(function*(){return r._acquireLock(-1,b(function*(){try{return yield r._useSession(function(){var o=b(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=yield me(r.fetch,"POST",`${r.url}/factors/${e.factorId}/challenge`,{body:e,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:CV(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:bV(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(e){var r=this;return b(function*(){const{data:o,error:i}=yield r._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield r._verify({factorId:e.factorId,challengeId:o.id,code:e.code})})()}_listFactors(){var e=this;return b(function*(){var r;const{data:{user:o},error:i}=yield e.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var e=this;return b(function*(){return e._acquireLock(-1,b(function*(){return yield e._useSession(function(){var r=b(function*(o){var i,s;const{data:{session:a},error:l}=o;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Fp(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;return(null!==(s=null===(i=a.user.factors)||void 0===i?void 0:i.filter(p=>"verified"===p.status))&&void 0!==s?s:[]).length>0&&(d="aal2"),{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:c.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(e){var r=this;return b(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:l,error:c}=yield me(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=a,s=l.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(e){var r=this;return b(function*(o,i={}){try{let s=o;if(!s){const{data:y,error:w}=yield r.getSession();if(w||!y.session)return{data:null,error:w};s=y.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:d}}=Fp(s);i?.allowExpired||function Xj(t){if(!t)throw new Error("Missing exp claim");if(t<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const h=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!h){const{error:y}=yield r.getUser(s);if(y)throw y;return{data:{claims:l,header:a,signature:c},error:null}}const f=function eV(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),p=yield crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!(yield crypto.subtle.verify(f,p,c,function $j(t){const n=[];return function UD(t,n){for(let e=0;e<t.length;e+=1){let r=t.charCodeAt(e);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(t.charCodeAt(e+1)-56320&65535|o),e+=1}jj(r,n)}}(t,e=>n.push(e)),new Uint8Array(n)}(`${u}.${d}`))))throw new Np("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}).apply(this,arguments)}}return t.nextInstanceID=0,t})();class RV extends PV{constructor(n){super(n)}}class NV{constructor(n,e,r){var o,i,s;this.supabaseUrl=n,this.supabaseKey=e;const a=function Mj(t){const n=t?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function Ej(t){return t.endsWith("/")?t:t+"/"}(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function xj(t,n){var e,r;const{db:o,auth:i,realtime:s,global:a}=t,{db:l,auth:c,realtime:u,global:d}=n,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(e=d?.headers)&&void 0!==e?e:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(f=b(function*(){return""}),function(){return f.apply(this,arguments)})};var f;return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}(r??{},{db:vj,realtime:bj,auth:Object.assign(Object.assign({},Cj),{storageKey:l}),global:yj});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=Sj(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new wD(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new mj(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new DL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,r)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n=this;return b(function*(){var e,r;if(n.accessToken)return yield n.accessToken();const{data:o}=yield n.auth.getSession();return null!==(r=null===(e=o.session)||void 0===e?void 0:e.access_token)&&void 0!==r?r:n.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c},u,d){return new RV({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:s,autoRefreshToken:n,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>"authorization"===f.toLowerCase())})}_initRealtimeClient(n){return new qL(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(n,e,r){"TOKEN_REFRESHED"!==n&&"SIGNED_IN"!==n||this.changedAccessToken===r?"SIGNED_OUT"===n&&(this.realtime.setAuth(),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function LV(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(null==t)return!1;const n=t.match(/^v(\d+)\./);return!!n&&parseInt(n[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tS_supabase_url="https://hpqwzclyjrfivcmkzwpo.supabase.co",tS_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwcXd6Y2x5anJmaXZjbWt6d3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2ODMzMjUsImV4cCI6MjA3NjI1OTMyNX0.pN-NPncmQCJoiBlYnFk77bAdxXEu5NAn3Fi8bk_c4wI";let is=(()=>{const n=class{constructor(){this.currentUserSubject=new Rn(null),this.currentUser$=this.currentUserSubject.asObservable(),this.isInitialized=!1,this.initializeClient()}initializeClient(){var r=this;return b(function*(){try{r.supabase=((t,n,e)=>new NV(t,n,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))(tS_supabase_url,tS_supabase_anonKey),r.isInitialized=!0,yield r.checkExistingSession()}catch(o){console.error("Error initializing Supabase client:",o)}})()}checkExistingSession(){var r=this;return b(function*(){const o=localStorage.getItem("currentUser");if(o)try{const i=JSON.parse(o);r.currentUserSubject.next(i)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("currentUser")}})()}signInFallback(r,o){var i=this;return b(function*(){try{const a=[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r&&l.password===o);return a?(localStorage.setItem("currentUser",JSON.stringify(a)),i.currentUserSubject.next(a),{user:a,error:null}):{user:null,error:"Invalid username or password"}}catch(s){return console.error("Fallback sign in error:",s),{user:null,error:"Sign in failed. Please try again."}}})()}signIn(r,o){var i=this;return b(function*(){try{i.isInitialized||(yield new Promise(l=>{const c=()=>{i.isInitialized?l(void 0):setTimeout(c,50)};c()})),yield new Promise(l=>setTimeout(l,100));const{data:s,error:a}=yield i.supabase.from("profiles").select("*").eq("username",r).eq("password",o).single();return a?(console.error("Database query error:",a),console.log("Trying fallback authentication..."),yield i.signInFallback(r,o)):s?(localStorage.setItem("currentUser",JSON.stringify(s)),i.currentUserSubject.next(s),{user:s,error:null}):{user:null,error:"User not found"}}catch(s){if(console.error("Sign in error:",s),s&&"object"==typeof s&&"message"in s){const a=s.message;if(a.includes("NavigatorLockAcquireTimeoutError")||a.includes("lock"))return console.log("Lock error detected, using fallback authentication..."),yield i.signInFallback(r,o)}return console.log("Error occurred, trying fallback authentication..."),yield i.signInFallback(r,o)}})()}signOut(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getCurrentUser(){return this.currentUserSubject.value}isSignedIn(){return null!==this.currentUserSubject.value}getProfileByUsername(r){var o=this;return b(function*(){try{o.isInitialized||(yield new Promise(a=>{const l=()=>{o.isInitialized?a():setTimeout(l,50)};l()}));const{data:i,error:s}=yield o.supabase.from("profiles").select("*").eq("username",r).maybeSingle();return s?(console.warn("getProfileByUsername fallback due to error:",s.message),[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r)||null):i||null}catch(i){return console.error("Error in getProfileByUsername:",i),null}})()}getUserCards(r,o){var i=this;return b(function*(){try{const s=parseInt(r);if(isNaN(s))return{cards:[],error:"Invalid user ID format"};const a=1e3;let l=0,c=[],u=!0;for(;u;){const{data:d,error:h}=yield i.supabase.from("user_cards").select("*").eq("user_id",s).range(l,l+a-1);if(h)return{cards:[],error:h.message};d&&d.length>0?(c=c.concat(d),l+=a,u=d.length===a,o&&o(c.length)):u=!1}return{cards:c,error:null}}catch(s){return console.error("Error fetching user cards:",s),{cards:[],error:"Failed to fetch user cards"}}})()}updateCardQuantity(r,o,i){var s=this;return b(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};if(i<=0){const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a).eq("card_def_key",o);if(l)return{success:!1,error:l.message}}else{const{data:l,error:c}=yield s.supabase.from("user_cards").select("*").eq("user_id",a).eq("card_def_key",o).maybeSingle();if(c)return console.error("Error checking existing card:",c),{success:!1,error:c.message};if(l){const{error:u}=yield s.supabase.from("user_cards").update({quantity:i}).eq("user_id",a).eq("card_def_key",o);if(u)return{success:!1,error:u.message}}else{const{error:u}=yield s.supabase.from("user_cards").insert({user_id:a,card_def_key:o,quantity:i,minimum_keep_card:2,allow_trade:!0});if(u)return{success:!1,error:u.message}}}return{success:!0,error:null}}catch(a){return console.error("Error updating card quantity:",a),{success:!1,error:"Failed to update card quantity"}}})()}getCardQuantity(r,o){var i=this;return b(function*(){try{const{data:s,error:a}=yield i.supabase.from("user_cards").select("quantity").eq("user_id",r).eq("card_def_key",o).single();return a||!s?0:s.quantity||0}catch(s){return console.error("Error fetching card quantity:",s),0}})()}syncUserCollection(r,o){var i=this;return b(function*(){try{const{cards:s,error:a}=yield i.getUserCards(r,o);if(a)return console.error("Error syncing user collection:",a),{quantities:{},minimumKeepCounts:{},allowTrade:{}};const l={},c={},u={};return s.forEach(d=>{l[d.card_def_key]=d.quantity,c[d.card_def_key]=d.minimum_keep_card||0,u[d.card_def_key]=!1!==d.allow_trade}),{quantities:l,minimumKeepCounts:c,allowTrade:u}}catch(s){return console.error("Error syncing user collection:",s),{quantities:{},minimumKeepCounts:{},allowTrade:{}}}})()}updateCardMinimumKeepCount(r,o,i){var s=this;return b(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};const{error:l}=yield s.supabase.from("user_cards").update({minimum_keep_card:i}).eq("user_id",a).eq("card_def_key",o);return l?{success:!1,error:l.message}:{success:!0,error:null}}catch(a){return console.error("Error updating minimum keep count:",a),{success:!1,error:"Failed to update minimum keep count"}}})()}toggleAllowTrade(r,o,i){var s=this;return b(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};const{error:l}=yield s.supabase.from("user_cards").update({allow_trade:i}).eq("user_id",a).eq("card_def_key",o);return l?{success:!1,error:l.message}:{success:!0,error:null}}catch(a){return console.error("Error toggling allow trade:",a),{success:!1,error:"Failed to toggle allow trade"}}})()}bulkReplaceUserCollection(r,o,i){var s=this;return b(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a);if(l)return console.error("Error deleting existing cards:",l),{success:!1,error:l.message};const c=Object.entries(o).filter(([u,d])=>d>0).map(([u,d])=>({user_id:a,card_def_key:u,quantity:d,minimum_keep_card:i?.minKeep?.[u]??0,allow_trade:i?.allowTrade?.[u]??!0}));if(c.length>0){const{error:u}=yield s.supabase.from("user_cards").insert(c);if(u)return console.error("Error inserting new cards:",u),{success:!1,error:u.message};console.log(`\u2705 Bulk sync completed: ${c.length} cards inserted`)}else console.log("\u2705 Bulk sync completed: No cards to insert (collection is empty)");return{success:!0,error:null}}catch(a){return console.error("Error in bulk replace user collection:",a),{success:!1,error:"Failed to bulk replace user collection"}}})()}};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),nS=(()=>{const n=class{constructor(){this.rarityMap=new Map([["C",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["U",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["R",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["RR",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["AR",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["SR",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare",order:6}],["SAR",{code:"SAR",symbol:"\u{1f308}",name:"Special Art Rare",displayName:"\u{1f308} - Special Art Rare",order:6}],["IM",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["UR",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["CR",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["S",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["SSR",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}],["Common",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["Uncommon",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["Rare",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["Double Rare",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["Art Rare",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["Super Rare",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare",order:6}],["Special Art Rare",{code:"SAR",symbol:"\u{1f308}",name:"Special Art Rare",displayName:"\u{1f308} - Special Art Rare",order:6}],["Immersive Rare",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["Ultimate Rare",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["Crown Rare",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["Shiny",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["Shiny Super Rare",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}]])}getRarityInfo(r){return this.rarityMap.get(r)}getDisplayName(r){const o=this.getRarityInfo(r);return o?o.displayName:r}getSymbol(r){const o=this.getRarityInfo(r);return o?o.symbol:r}getAllRarities(){return Array.from(this.rarityMap.values()).filter(r=>!r.code.includes(" ")).sort((r,o)=>r.order-o.order)}getRarityOrder(r){const o=this.getRarityInfo(r);return o?o.order:999}sortRarities(r){return r.sort((o,i)=>this.getRarityOrder(o)-this.getRarityOrder(i))}isRare(r){return["IM","UR","SSR"].includes(r)}isSuperRare(r){return["SR","SAR","IM","UR","SSR"].includes(r)}getNormalizedCode(r){const o=this.getRarityInfo(r);return o?o.code:r}getStandardizedDisplayName(r){const o=this.getNormalizedCode(r),i=this.getRarityInfo(o);return i?i.displayName:r}getUnifiedRarities(){const o=this.getAllRarities(),i=new Set;return o.filter(s=>!i.has(s.symbol)&&(i.add(s.symbol),!0))}getCodeFromSymbol(r){for(const[,o]of this.rarityMap)if(o.symbol===r)return o.code;return r}groupCardsByNormalizedRarity(r){const o=new Map;return r.forEach(i=>{if(!i.rarity)return;const s=this.getCodeFromSymbol(i.rarity),a=this.getNormalizedCode(s);o.has(a)||o.set(a,[]),o.get(a).push(i)}),o}};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),t})();function jV(t,n){if(1&t){const e=Me();g(0,"div",68)(1,"div",69),C(2,"Viewing "),g(3,"strong"),C(4),m(),C(5,"'s collection (read-only)"),m(),g(6,"button",70),A("click",function(){return z(e),G(S().backToMyCollection())}),C(7,"Back to my collection"),m()()}if(2&t){const e=S();_(4),ot(null==e.viewingUser?null:e.viewingUser.username)}}function VV(t,n){if(1&t&&(g(0,"option",71),C(1),m()),2&t){const e=n.$implicit;x("value",e),_(1),ot(e)}}function $V(t,n){if(1&t&&(g(0,"option",71),C(1),m()),2&t){const e=n.$implicit,r=S();x("value",e),_(1),ot(r.getSetName(e))}}function UV(t,n){if(1&t&&(g(0,"option",71),C(1),m()),2&t){const e=n.$implicit;x("value",e),_(1),ot(e)}}function BV(t,n){if(1&t){const e=Me();g(0,"button",72),A("click",function(){return z(e),G(S().toggleRarity("\u{1f308}"))}),C(1," \u{1f308} "),m()}2&t&&(Ae("active",S().isRaritySelected("\u{1f308}")),x("title","\u{1f308} - Special Art Rare"))}function HV(t,n){if(1&t){const e=Me();g(0,"button",72),A("click",function(){const i=z(e).$implicit;return G(S().toggleRarity(i.symbol))}),C(1),m()}if(2&t){const e=n.$implicit;Ae("active",S().isRaritySelected(e.symbol)),x("title",e.displayName),_(1),Oe(" ",e.symbol," ")}}const zV=function(t,n,e){return{"trainer-item":t,"trainer-tool":n,"trainer-supporter":e}};function GV(t,n){if(1&t&&(yi(0),g(1,"span",76),C(2),m(),vi()),2&t){const e=S().$implicit;_(1),x("ngClass",dh(2,zV,"Item"===e,"Tool"===e,"Supporter"===e)),_(1),Oe(" ",e," ")}}function qV(t,n){if(1&t&&Qe(0,"img",77),2&t){const e=S().$implicit;x("src","assets/energy/"+e.toLowerCase()+".webp",ni)("alt",e)}}const WV=function(){return["Item","Tool","Supporter"]};function KV(t,n){if(1&t){const e=Me();g(0,"button",73),A("click",function(){const i=z(e).$implicit;return G(S().toggleType(i))}),H(1,GV,3,6,"ng-container",74),H(2,qV,1,2,"ng-template",null,75,jl),m()}if(2&t){const e=n.$implicit,r=Vs(3);Ae("active",S().isTypeSelected(e)),x("title",e),_(1),x("ngIf",Si(5,WV).includes(e))("ngIfElse",r)}}function JV(t,n){if(1&t){const e=Me();g(0,"div",14)(1,"label",78),C(2,"Group By"),m(),g(3,"select",79),A("ngModelChange",function(o){return z(e),G(S().groupBy=o)})("change",function(){return z(e),G(S().onGroupByChange())}),g(4,"option",80),C(5,"No Grouping"),m(),g(6,"option",81),C(7,"Rarity"),m(),g(8,"option",82),C(9,"Pack"),m(),g(10,"option",83),C(11,"Type"),m()()()}if(2&t){const e=S();_(3),x("ngModel",e.groupBy)}}function YV(t,n){1&t&&(g(0,"div",84),Qe(1,"div",85),g(2,"p"),C(3,"Loading Pokemon cards..."),m()())}function QV(t,n){if(1&t){const e=Me();g(0,"div",86)(1,"p"),C(2),m(),g(3,"button",87),A("click",function(){return z(e),G(S().loadAllData())}),C(4,"Retry"),m()()}if(2&t){const e=S();_(2),ot(e.error)}}function ZV(t,n){if(1&t&&(g(0,"div",94),C(1),m()),2&t){const e=S(2);_(1),Oe("",e.syncProgress," cards loaded")}}function XV(t,n){if(1&t&&(g(0,"div",88)(1,"div",89)(2,"div",90),C(3,"\u23f3"),m(),g(4,"div",91)(5,"div",92),C(6),m(),H(7,ZV,2,1,"div",93),m()()()),2&t){const e=S();_(6),ot(e.syncMessage),_(1),x("ngIf",e.syncProgress>0)}}function e$(t,n){if(1&t&&(g(0,"span",108),C(1),m()),2&t){const e=S().$implicit,r=S(2);_(1),Oe(" \u25ca ",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)," ")}}function t$(t,n){if(1&t&&(g(0,"span",109),C(1),m()),2&t){const e=S().$implicit,r=S(2);_(1),Oe(" \u2606 ",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)," ")}}function n$(t,n){if(1&t&&(g(0,"span",110),C(1),m()),2&t){const e=S().$implicit,r=S(2);_(1),Oe(" \u2735 ",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)," ")}}function r$(t,n){if(1&t&&(g(0,"span",111),C(1),m()),2&t){const e=S().$implicit,r=S(2);_(1),Oe(" \u{1f451} ",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)," ")}}function o$(t,n){if(1&t){const e=Me();yi(0),g(1,"input",124),A("ngModelChange",function(o){return z(e),G(S(5).editingCountValue=o)})("keydown.enter",function(){z(e);const o=S().$implicit;return G(S(4).commitCount(o))})("keydown",function(o){z(e);const i=S().$implicit;return G(S(4).onCountInputKeydown(o,i))})("keydown.escape",function(){return z(e),G(S(5).cancelEditingCount())})("blur",function(){z(e);const o=S().$implicit;return G(S(4).commitCount(o))}),m(),vi()}if(2&t){const e=S(5);_(1),x("ngModel",e.editingCountValue)}}function i$(t,n){if(1&t){const e=Me();g(0,"button",125),A("click",function(){z(e);const o=S().$implicit,i=S(4);return G(i.isViewingOther?null:i.startEditingCount(o))}),C(1),m()}if(2&t){const e=S().$implicit,r=S(4);x("disabled",r.isViewingOther),_(1),Oe(" ",r.getOwnedCount(e)," ")}}function s$(t,n){if(1&t){const e=Me();g(0,"div",126)(1,"button",127),A("click",function(){z(e);const o=S().$implicit;return G(S(4).toggleCardAllowTrade(o))}),C(2),m(),g(3,"input",128),A("change",function(o){z(e);const i=S().$implicit;return G(S(4).updateCardMinimumKeepCount(i,+o.target.value))}),m()()}if(2&t){const e=S().$implicit,r=S(4);_(1),x("title",r.isCardAllowTrade(e)?"Click to lock (prevent trade)":"Click to unlock (allow trade)"),_(1),Oe(" ",r.isCardAllowTrade(e)?"\u{1f513}":"\u{1f512}"," "),_(1),x("value",r.getCardMinimumKeepCount(e))("max",r.getOwnedCount(e))("disabled",r.isViewingOther||!r.isCardAllowTrade(e))}}function a$(t,n){if(1&t){const e=Me();g(0,"div",114)(1,"div",115)(2,"img",116),A("error",function(o){const s=z(e).$implicit;return G(S(4).onImageError(o,s))})("click",function(){const i=z(e).$implicit;return G(S(4).openCardModal(i))}),m()(),g(3,"div",117)(4,"div",118),C(5),m(),g(6,"div",119)(7,"button",120),A("click",function(){const i=z(e).$implicit;return G(S(4).decreaseOwned(i))}),C(8," \u2212 "),m(),H(9,o$,2,1,"ng-container",74),H(10,i$,2,2,"ng-template",null,121,jl),g(12,"button",122),A("click",function(){const i=z(e).$implicit;return G(S(4).increaseOwned(i))}),C(13," + "),m()(),H(14,s$,4,5,"div",123),m()()}if(2&t){const e=n.$implicit,r=Vs(11),o=S(4);Ae("no-quantity",0===o.getOwnedCount(e)),Nt("data-cardid",o.getCardId(e)),_(1),Ae("no-quantity",0===o.getOwnedCount(e)),_(1),Ae("no-quantity",0===o.getOwnedCount(e)),x("src",o.getCardImageUrl(e.imageName),ni)("alt",e.label.eng+" Pokemon Card"),_(3),ot(o.getCardDisplayName(e)),_(2),x("disabled",o.isViewingOther||0===o.getOwnedCount(e)),_(2),x("ngIf",o.editingCardId===o.getCardId(e))("ngIfElse",r),_(3),x("disabled",o.isViewingOther),_(2),x("ngIf",o.getOwnedCount(e)>0&&!o.isViewingOther)}}function l$(t,n){if(1&t&&(g(0,"div",112),H(1,a$,15,15,"div",113),m()),2&t){const e=S().$implicit,r=S(2);_(1),x("ngForOf",e.cards)("ngForTrackBy",r.trackByCardInGroup)}}function c$(t,n){if(1&t&&(g(0,"span",143),C(1),m()),2&t){const e=S().$implicit;_(1),Oe(" ",e.packs.join(", ")," ")}}function u$(t,n){if(1&t){const e=Me();yi(0),g(1,"input",124),A("ngModelChange",function(o){return z(e),G(S(5).editingCountValue=o)})("keydown.enter",function(){z(e);const o=S().$implicit;return G(S(4).commitCount(o))})("keydown",function(o){z(e);const i=S().$implicit;return G(S(4).onCountInputKeydown(o,i))})("keydown.escape",function(){return z(e),G(S(5).cancelEditingCount())})("blur",function(){z(e);const o=S().$implicit;return G(S(4).commitCount(o))}),m(),vi()}if(2&t){const e=S(5);_(1),x("ngModel",e.editingCountValue)}}function d$(t,n){if(1&t){const e=Me();g(0,"button",125),A("click",function(){z(e);const o=S().$implicit,i=S(4);return G(i.isViewingOther?null:i.startEditingCount(o))}),C(1),m()}if(2&t){const e=S().$implicit,r=S(4);x("disabled",r.isViewingOther),_(1),Oe(" ",r.getOwnedCount(e)," ")}}function h$(t,n){if(1&t){const e=Me();g(0,"div",144)(1,"button",127),A("click",function(){z(e);const o=S().$implicit;return G(S(4).toggleCardAllowTrade(o))}),C(2),m(),g(3,"input",145),A("change",function(o){z(e);const i=S().$implicit;return G(S(4).updateCardMinimumKeepCount(i,+o.target.value))}),m()()}if(2&t){const e=S().$implicit,r=S(4);_(1),x("title",r.isCardAllowTrade(e)?"Click to lock (prevent trade)":"Click to unlock (allow trade)"),_(1),Oe(" ",r.isCardAllowTrade(e)?"\u{1f513}":"\u{1f512}"," "),_(1),x("value",r.getCardMinimumKeepCount(e))("max",r.getOwnedCount(e))("disabled",r.isViewingOther||!r.isCardAllowTrade(e))}}function f$(t,n){if(1&t){const e=Me();g(0,"div",131)(1,"div",132),A("click",function(){const i=z(e).$implicit;return G(S(4).openCardModal(i))}),g(2,"img",133),A("error",function(o){const s=z(e).$implicit;return G(S(4).onImageError(o,s))}),m()(),g(3,"div",134)(4,"div",135),C(5),m(),g(6,"div",136)(7,"span",137),C(8),m(),H(9,c$,2,1,"span",138),m()(),g(10,"div",139)(11,"div",140)(12,"button",120),A("click",function(){const i=z(e).$implicit;return G(S(4).decreaseOwned(i))}),C(13,"\u2212"),m(),H(14,u$,2,1,"ng-container",74),H(15,d$,2,2,"ng-template",null,141,jl),g(17,"button",122),A("click",function(){const i=z(e).$implicit;return G(S(4).increaseOwned(i))}),C(18,"+"),m()(),H(19,h$,4,5,"div",142),m()()}if(2&t){const e=n.$implicit,r=Vs(16),o=S(4);Ae("no-quantity",0===o.getOwnedCount(e)),Nt("data-cardid",o.getCardId(e)),_(2),Ae("no-quantity",0===o.getOwnedCount(e)),x("src",o.getCardImageUrl(e.imageName),ni)("alt",e.label.eng+" Pokemon Card"),_(3),ot(o.getCardDisplayName(e)),_(3),pr("",e.set,"-",e.number,""),_(1),x("ngIf",e.packs&&e.packs.length>0),_(3),x("disabled",o.isViewingOther||0===o.getOwnedCount(e)),_(2),x("ngIf",o.editingCardId===o.getCardId(e))("ngIfElse",r),_(3),x("disabled",o.isViewingOther),_(2),x("ngIf",o.getOwnedCount(e)>0&&!o.isViewingOther)}}function p$(t,n){if(1&t&&(g(0,"div",129),H(1,f$,20,16,"div",130),m()),2&t){const e=S().$implicit,r=S(2);_(1),x("ngForOf",e.cards)("ngForTrackBy",r.trackByCardInGroup)}}function g$(t,n){if(1&t&&(g(0,"div",97)(1,"div",98)(2,"h3",99),C(3),m(),g(4,"div",100),H(5,e$,2,1,"span",101),H(6,t$,2,1,"span",102),H(7,n$,2,1,"span",103),H(8,r$,2,1,"span",104),g(9,"span",105),C(10),m()()(),H(11,l$,2,2,"div",106),H(12,p$,2,2,"div",107),m()),2&t){const e=n.$implicit,r=S(2);Nt("id","set-"+e.groupTitle),_(3),ot(r.getGroupDisplayName(e.groupTitle,e.cards)),_(2),x("ngIf",r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u25ca",e.groupTitle).endsWith("/0")),_(1),x("ngIf",r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2606",e.groupTitle).endsWith("/0")),_(1),x("ngIf",r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u2735",e.groupTitle).endsWith("/0")),_(1),x("ngIf",r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle)&&!r.getOwnedRarityCount(e.cards,"\u{1f451}",e.groupTitle).endsWith("/0")),_(2),Oe("",r.getGroupCollectedCount(e.cards)," cards"),_(1),x("ngIf","grid"===r.viewMode),_(1),x("ngIf","list"===r.viewMode)}}function m$(t,n){if(1&t&&(g(0,"div",95),H(1,g$,13,9,"div",96),m()),2&t){const e=S();_(1),x("ngForOf",e.getGroupedCards())("ngForTrackBy",e.trackByGroupTitle)}}function _$(t,n){if(1&t){const e=Me();g(0,"div",146)(1,"div",147),C(2,"\u{1f50d}"),m(),g(3,"h3"),C(4,"No cards found"),m(),g(5,"p"),C(6,"Try adjusting your search or filter criteria"),m(),g(7,"button",87),A("click",function(){return z(e),G(S().clearFilters())}),C(8,"Clear All Filters"),m()()}}function y$(t,n){if(1&t){const e=Me();g(0,"div",148),A("click",function(){return z(e),G(S().closeViewOthersModal())}),g(1,"div",149),A("click",function(o){return o.stopPropagation()}),g(2,"div",150)(3,"h3"),C(4,"View Others Collection"),m(),g(5,"button",151),A("click",function(){return z(e),G(S().closeViewOthersModal())}),C(6,"\xd7"),m()(),g(7,"div",152)(8,"div",153)(9,"div",154)(10,"label",155),C(11,"Username:"),m(),g(12,"input",156),A("ngModelChange",function(o){return z(e),G(S().otherUsername=o)})("keydown.enter",function(){return z(e),G(S().viewOtherCollectionFromModal())}),m(),g(13,"span",157),C(14,"Enter the username of the collection you want to view"),m()()()(),g(15,"div",158)(16,"button",70),A("click",function(){return z(e),G(S().closeViewOthersModal())}),C(17,"Cancel"),m(),g(18,"button",159),A("click",function(){return z(e),G(S().viewOtherCollectionFromModal())}),C(19," \u{1f464} View Collection "),m()()()()}if(2&t){const e=S();_(12),x("ngModel",e.otherUsername),_(6),x("disabled",!e.otherUsername.trim())}}function v$(t,n){if(1&t){const e=Me();g(0,"div",154)(1,"label",184)(2,"input",185),A("ngModelChange",function(o){return z(e),G(S(2).tradeDeluxeSpecialOnly=o)})("ngModelChange",function(){return z(e),G(S(2).onDeluxeSpecialToggle())}),m(),C(3," [SPECIAL] - Deluxe packs only "),m()()}if(2&t){const e=S(2);_(2),x("ngModel",e.tradeDeluxeSpecialOnly)}}function C$(t,n){if(1&t&&(g(0,"span"),C(1),m()),2&t){const e=S(2);_(1),Oe("All Sets Selected (",e.availableTradeSets.length,")")}}function b$(t,n){1&t&&(g(0,"span"),C(1,"No Sets Selected"),m())}function w$(t,n){1&t&&(g(0,"span"),C(1,"1 Set Selected"),m())}function D$(t,n){if(1&t&&(g(0,"span"),C(1),m()),2&t){const e=S(2);_(1),Oe("",e.selectedLFsets.length," Sets Selected")}}const rS=function(){return{background:"var(--header-gradient)",color:"#fff"}},oS=function(){return{background:"transparent",color:"var(--text)"}};function S$(t,n){if(1&t){const e=Me();g(0,"button",192),A("click",function(){const i=z(e).$implicit;return G(S(3).toggleLFSet(i))}),g(1,"span",193),C(2),m(),g(3,"span"),C(4),m()()}if(2&t){const e=n.$implicit,r=S(3);x("ngStyle",r.isLFSetSelected(e)?Si(5,rS):Si(6,oS)),Nt("aria-selected",r.isLFSetSelected(e)),_(2),ot(r.isLFSetSelected(e)?"\u2714":""),_(2),pr("",e," \u2013 ",r.getSetName(e),"")}}function E$(t,n){1&t&&(g(0,"div",194),C(1,"No sets available"),m())}function x$(t,n){if(1&t){const e=Me();g(0,"div",186)(1,"div",187)(2,"button",188),A("click",function(){return z(e),G(S(2).clearLFsets())}),C(3,"Clear"),m(),g(4,"button",188),A("click",function(){return z(e),G(S(2).selectAllLFsets())}),C(5,"All"),m()(),g(6,"div",189),H(7,S$,5,7,"button",190),H(8,E$,2,0,"div",191),m()()}if(2&t){const e=S(2);_(7),x("ngForOf",e.availableTradeSets),_(1),x("ngIf",0===e.availableTradeSets.length)}}function M$(t,n){if(1&t&&(g(0,"span"),C(1),m()),2&t){const e=S(2);_(1),Oe("All Sets Selected (",e.availableTradeSets.length,")")}}function T$(t,n){1&t&&(g(0,"span"),C(1,"No Sets Selected"),m())}function O$(t,n){1&t&&(g(0,"span"),C(1,"1 Set Selected"),m())}function I$(t,n){if(1&t&&(g(0,"span"),C(1),m()),2&t){const e=S(2);_(1),Oe("",e.selectedFTsets.length," Sets Selected")}}function A$(t,n){if(1&t){const e=Me();g(0,"button",192),A("click",function(){const i=z(e).$implicit;return G(S(3).toggleFTSet(i))}),g(1,"span",193),C(2),m(),g(3,"span"),C(4),m()()}if(2&t){const e=n.$implicit,r=S(3);x("ngStyle",r.isFTSetSelected(e)?Si(5,rS):Si(6,oS)),Nt("aria-selected",r.isFTSetSelected(e)),_(2),ot(r.isFTSetSelected(e)?"\u2714":""),_(2),pr("",e," \u2013 ",r.getSetName(e),"")}}function k$(t,n){1&t&&(g(0,"div",194),C(1,"No sets available"),m())}function P$(t,n){if(1&t){const e=Me();g(0,"div",186)(1,"div",187)(2,"button",188),A("click",function(){return z(e),G(S(2).clearFTsets())}),C(3,"Clear"),m(),g(4,"button",188),A("click",function(){return z(e),G(S(2).selectAllFTsets())}),C(5,"All"),m()(),g(6,"div",189),H(7,A$,5,7,"button",190),H(8,k$,2,0,"div",191),m()()}if(2&t){const e=S(2);_(7),x("ngForOf",e.availableTradeSets),_(1),x("ngIf",0===e.availableTradeSets.length)}}function R$(t,n){if(1&t){const e=Me();g(0,"button",72),A("click",function(){const i=z(e).$implicit;return G(S(2).toggleTradeRarity(i.symbol))}),C(1),m()}if(2&t){const e=n.$implicit;Ae("active",S(2).isTradeRaritySelected(e.symbol)),x("title",e.displayName),_(1),Oe(" ",e.symbol," ")}}const iS=function(t,n){return{"fa-chevron-down":t,"fa-chevron-up":n}};function N$(t,n){if(1&t){const e=Me();g(0,"div",148),A("click",function(){return z(e),G(S().closeTradeModal())}),g(1,"div",160),A("click",function(o){return o.stopPropagation()}),g(2,"div",150)(3,"h3"),C(4,"Copy For Trade"),m(),g(5,"button",151),A("click",function(){return z(e),G(S().closeTradeModal())}),C(6,"\xd7"),m()(),g(7,"div",152)(8,"div",161)(9,"div",154)(10,"label",162)(11,"input",163),A("ngModelChange",function(o){return z(e),G(S().excludeSpecialPacks=o)})("ngModelChange",function(){return z(e),G(S().onExcludeSpecialPacksToggle())}),m(),C(12,' Exclude "PROMO" and "Deluxe packs" '),m()(),H(13,v$,4,1,"div",164),g(14,"div",154)(15,"label",165),C(16,"Include sets (Looking For):"),m(),g(17,"div",166)(18,"button",167),A("click",function(){z(e);const o=S();return G(o.lfSetDropdownOpen=!o.lfSetDropdownOpen)}),H(19,C$,2,1,"span",168),H(20,b$,2,0,"span",168),H(21,w$,2,0,"span",168),H(22,D$,2,1,"span",168),Qe(23,"i",169),m(),H(24,x$,9,2,"div",170),m()(),g(25,"div",154)(26,"label",171),C(27,"Include sets (For Trade):"),m(),g(28,"div",172)(29,"button",167),A("click",function(){z(e);const o=S();return G(o.ftSetDropdownOpen=!o.ftSetDropdownOpen)}),H(30,M$,2,1,"span",168),H(31,T$,2,0,"span",168),H(32,O$,2,0,"span",168),H(33,I$,2,1,"span",168),Qe(34,"i",169),m(),H(35,P$,9,2,"div",170),m()(),g(36,"div",154)(37,"label",173),C(38,"Include rarities:"),m(),g(39,"div",174)(40,"button",175),A("click",function(){return z(e),G(S().clearTradeRarities())}),C(41,"ALL"),m(),H(42,R$,2,4,"button",28),m()(),g(43,"div",154)(44,"label",173),C(45,"Output format:"),m(),g(46,"div",176)(47,"button",177),A("click",function(){return z(e),G(S().outputFormat="discord")}),C(48,"DISCORD"),m(),g(49,"button",177),A("click",function(){return z(e),G(S().outputFormat="details")}),C(50,"DETAILS"),m()()(),g(51,"div",154)(52,"label",178),C(53,"Trade cards (quantity \u2265):"),m(),g(54,"input",179),A("ngModelChange",function(o){return z(e),G(S().tradeQuantityMin=o)}),m()(),g(55,"div",154)(56,"label",180),C(57,"Friend Code:"),m(),g(58,"input",181),A("ngModelChange",function(o){return z(e),G(S().tradeFriendCode=o)}),m()(),g(59,"div",154)(60,"label",182),C(61,"Template text:"),m(),g(62,"textarea",183),A("ngModelChange",function(o){return z(e),G(S().tradeTemplateText=o)}),m()()()(),g(63,"div",158)(64,"button",70),A("click",function(){return z(e),G(S().closeTradeModal())}),C(65,"Cancel"),m(),g(66,"button",87),A("click",function(){return z(e),G(S().generateAndCopyTradeText())}),C(67,"\u{1f4cb} Copy Trade Text"),m()()()()}if(2&t){const e=S();_(11),x("ngModel",e.excludeSpecialPacks),_(2),x("ngIf",!e.excludeSpecialPacks),_(6),x("ngIf",e.selectedLFsets.length===e.availableTradeSets.length),_(1),x("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&0===e.selectedLFsets.length),_(1),x("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&1===e.selectedLFsets.length),_(1),x("ngIf",e.selectedLFsets.length!==e.availableTradeSets.length&&e.selectedLFsets.length>1),_(1),x("ngClass",Ei(24,iS,!e.lfSetDropdownOpen,e.lfSetDropdownOpen)),_(1),x("ngIf",e.lfSetDropdownOpen),_(6),x("ngIf",e.selectedFTsets.length===e.availableTradeSets.length),_(1),x("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&0===e.selectedFTsets.length),_(1),x("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&1===e.selectedFTsets.length),_(1),x("ngIf",e.selectedFTsets.length!==e.availableTradeSets.length&&e.selectedFTsets.length>1),_(1),x("ngClass",Ei(27,iS,!e.ftSetDropdownOpen,e.ftSetDropdownOpen)),_(1),x("ngIf",e.ftSetDropdownOpen),_(5),Ae("active",0===e.selectedTradeRarities.length),_(2),x("ngForOf",e.getAvailableTradeRaritySymbols()),_(5),Ae("active","discord"===e.outputFormat),_(2),Ae("active","details"===e.outputFormat),_(5),x("ngModel",e.tradeQuantityMin),_(4),x("ngModel",e.tradeFriendCode),_(4),x("ngModel",e.tradeTemplateText)}}function F$(t,n){if(1&t&&(g(0,"span",208),C(1),m()),2&t){const e=n.$implicit;_(1),ot(e)}}function L$(t,n){if(1&t&&(g(0,"div",206),H(1,F$,2,1,"span",207),m()),2&t){const e=S(2);_(1),x("ngForOf",e.selectedCardForModal.packs)}}function j$(t,n){if(1&t){const e=Me();g(0,"div",195),A("click",function(){return z(e),G(S().closeCardModal())}),g(1,"div",196),A("click",function(o){return o.stopPropagation()}),g(2,"button",197),A("click",function(){return z(e),G(S().closeCardModal())}),C(3,"\xd7"),m(),g(4,"div",198)(5,"button",199),A("click",function(o){return z(e),G(S().showPrevCardInModal(o))}),Qe(6,"i",200),m(),Qe(7,"img",201),g(8,"button",202),A("click",function(o){return z(e),G(S().showNextCardInModal(o))}),Qe(9,"i",203),m()(),g(10,"div",204)(11,"h3"),C(12),m(),H(13,L$,2,1,"div",205),m()()()}if(2&t){const e=S();_(7),x("src",e.getCardImageUrl(e.selectedCardForModal.imageName),ni)("alt",e.getCardDisplayName(e.selectedCardForModal)),_(5),ot(e.getCardDisplayName(e.selectedCardForModal)),_(1),x("ngIf",e.selectedCardForModal.packs&&e.selectedCardForModal.packs.length>0)}}let V$=(()=>{const n=class{constructor(r,o,i,s,a,l,c,u){this.pokemonDataService=r,this.dataManager=o,this.imageService=i,this.supabaseService=s,this.router=a,this.route=l,this.cdr=c,this.rarityService=u,this.touchStartX=null,this.touchEndX=null,this.handleModalTouchStart=d=>{1===d.touches.length&&(this.touchStartX=d.touches[0].clientX)},this.handleModalTouchEnd=d=>{if(null===this.touchStartX)return;this.touchEndX=d.changedTouches[0].clientX;const h=this.touchEndX-this.touchStartX;Math.abs(h)>50&&(h<0?this.showNextCardInModal():this.showPrevCardInModal()),this.touchStartX=null,this.touchEndX=null},this.cards=[],this.filteredCards=[],this.sets=[],this.rarityMapping={},this.ownedCards={},this.cardMinimumKeepCount={},this.cardAllowTrade={},this.Math=Math,this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.foilFilter="all",this.groupBy="none",this.availableSets=[],this.availableSeries=[],this.availableRarities=[],this.availableRaritySymbols=[],this.availableTypes=[],this.availablePacks=[],this.loading=!0,this.loadingOwnedCards=!1,this.syncingCards=!1,this.syncProgress=0,this.syncMessage="",this.error=null,this.viewMode="grid",this.editingCardId=null,this.editingCountValue=0,this.lastFlatOrder=[],this.selectedCardForModal=null,this.isViewingOther=!1,this.otherUsername="",this.viewingUser=null,this.totalCards=0,this.ownedCount=0,this.uniqueOwned=0,this.completionPercentage=0,this.currentUser=null,this.filtersOpen=!1,this.showTradeModal=!1,this.selectedTradeRarities=[],this.availableTradeSets=[],this.selectedLFsets=[],this.selectedFTsets=[],this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.tradeQuantityMin=2,this.tradeFriendCode="",this.tradeTemplateText="Please ping me if there is any possible trades. \nENGLISH cards only please.",this.excludedTradeSymbols=new Set(["\u2606\u2606\u2606","\u{1f451}"]),this.excludeSpecialPacks=!0,this.tradeDeluxeSpecialOnly=!1,this.outputFormat="discord",this.showViewOthersModal=!1,this.handleModalKeydown=d=>{"Escape"===d.key&&this.selectedCardForModal&&this.closeCardModal()},this.trackByCardId=(d,h)=>this.getCardId(h),this.trackByGroupTitle=(d,h)=>h.groupTitle,this.trackByCardInGroup=(d,h)=>this.getCardId(h)}getOwnedRarityCount(r,o,i){if(!r)return"0/0";const a=i.split(" - ")[0].trim().toUpperCase(),l={"\u25ca":["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca"],"\u2606":["\u2606","\u2606\u2606","\u2606\u2606\u2606","\u{1f308}"],"\u2735":["\u2735","\u2735\u2735"]}[o]||[o],c=r.filter(d=>{if(!d)return!1;const h=l.includes(d.rarity),f="all"===i||d.set&&d.set.toUpperCase()===a;return h&&f});return`${c.filter(d=>this.getOwnedCount(d)>0).length}/${c.length}`}openCardModal(r){this.selectedCardForModal=r,document.body.style.overflow="hidden",document.addEventListener("keydown",this.handleModalKeydown),setTimeout(()=>{const o=document.querySelector(".modal-content.card-modal");o&&(o.addEventListener("touchstart",i=>this.handleModalTouchStart(i),{passive:!0}),o.addEventListener("touchend",i=>this.handleModalTouchEnd(i),{passive:!0}))},0)}closeCardModal(){this.selectedCardForModal=null,document.body.style.overflow="auto",document.removeEventListener("keydown",this.handleModalKeydown);const r=document.querySelector(".modal-content.card-modal");if(r){const o=r.cloneNode(!0);r.parentNode?.replaceChild(o,r)}}showPrevCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s>0?o[s-1]:o[o.length-1],this.cdr.markForCheck()}showNextCardInModal(r){r&&r.stopPropagation();const o=this.getAllModalCards();if(!this.selectedCardForModal||!o.length||!this.selectedCardForModal)return;const i=this.getCardId(this.selectedCardForModal),s=o.findIndex(a=>this.getCardId(a)===i);this.selectedCardForModal=s<o.length-1?o[s+1]:o[0],this.cdr.markForCheck()}getAllModalCards(){const r=this.getGroupedCards();return Array.isArray(r)?r.flatMap(o=>o.cards):[]}hasRaritySymbol(r){return(this.availableRaritySymbols||[]).some(o=>o.symbol===r)}ngOnInit(){if(this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser){try{typeof window<"u"&&window?.innerWidth<=768&&(this.filtersOpen=!1)}catch{}this.loadAllData()}else this.router.navigate(["/signin"])}loadAllData(){this.loading=!0,this.error=null,this.pokemonDataService.loadAllData().subscribe({next:r=>{this.cards=r.cards,this.filteredCards=[...this.cards],this.sets=r.sets,this.rarityMapping=r.rarities,this.extractFilterOptions(),this.calculateStatistics(),this.loading=!1,this.cdr.detectChanges(),this.applyQueryParamsIfAny().then(()=>{this.isViewingOther||this.loadOwnedCards()})},error:r=>{this.error="Failed to load card collection",this.loading=!1,this.cdr.detectChanges(),console.error("Error loading card collection:",r)}})}applyQueryParamsIfAny(){var r=this;return b(function*(){const o=r.route.snapshot.queryParams||{},i=o.series,s=o.set,a=o.pack,l=o.rarity,c=o.otherUser;let u=!1;"string"==typeof i&&i.trim()&&(r.selectedSeries=i,u=!0),r.extractAvailableSets(),"string"==typeof s&&s.trim()&&(r.selectedSet=s,u=!0),r.extractAvailablePacks(),"string"==typeof a&&a.trim()&&(r.selectedPack=a,u=!0),"string"==typeof l&&l.trim()&&(r.selectedRarities=[l],u=!0),u&&(r.applyFilters(),r.cdr.detectChanges()),"string"==typeof c&&c.trim()&&(r.otherUsername=c.trim(),yield r.viewOtherCollection())})()}extractFilterOptions(){this.availableSeries=[...new Set(this.cards.map(l=>l.series).filter(l=>!!l))];const r=[...new Set(this.cards.map(l=>l.rarity).filter(l=>l))],o=this.createRaritySymbolToCodeMap();this.availableRarities=r.map(l=>o.get(l)||l),this.availableRaritySymbols=[];const i=new Set;this.cards.forEach(l=>{const c=l.rarityCode,u=c&&c.trim()?c.trim():o.get(l.rarity);if(u){const d=this.rarityService.getNormalizedCode(u);i.add(d)}});const s=new Map;this.rarityService.getUnifiedRarities().forEach(l=>{i.has(l.code)&&s.set(l.symbol,{symbol:l.symbol,rarities:[l.code],displayName:l.displayName})}),this.availableRaritySymbols=Array.from(s.values()).sort((l,c)=>this.rarityService.getRarityOrder(l.rarities[0])-this.rarityService.getRarityOrder(c.rarities[0])),this.extractAvailablePacks(),this.extractAvailableTypes(),this.extractAvailableSets()}extractAvailableSets(){this.availableSets="all"===this.selectedSeries?[...new Set(this.cards.map(r=>r.set))]:[...new Set(this.cards.filter(r=>r.series===this.selectedSeries).map(r=>r.set))]}createRaritySymbolToCodeMap(){const r=new Map,o=this.rarityService.getUnifiedRarities();for(const i of o)r.set(i.symbol,i.code);return r}getCardRarityCode(r){const o=r.rarityCode;return"string"==typeof o&&o.trim()?o.trim():this.createRaritySymbolToCodeMap().get(r.rarity)||r.rarity}convertRarityNameToCode(r){return{Common:"C",Uncommon:"U",Rare:"R","Double Rare":"RR","Art Rare":"AR","Super Rare":"SR","Special Art Rare":"SAR","Immersive Rare":"IM","Crown Rare":"UR",Shiny:"S","Shiny Super Rare":"SSR"}[r]||r}extractAvailablePacks(){let r=this.cards;"all"!==this.selectedSeries&&(r=r.filter(i=>i.series===this.selectedSeries)),"all"!==this.selectedSet&&(r=r.filter(i=>i.set===this.selectedSet));const o=r.flatMap(i=>Array.isArray(i.packs)?i.packs:[]).filter(i=>"string"==typeof i&&i.trim());this.availablePacks=[...new Set(o)],"all"!==this.selectedPack&&!this.availablePacks.includes(this.selectedPack)&&(this.selectedPack="all")}extractAvailableTypes(){const r=this.cards.flatMap(i=>Array.isArray(i.types)?i.types:[]).filter(i=>"string"==typeof i&&i.trim()),o=["Item","Tool","Supporter"];this.availableTypes=[...new Set(r)].sort((i,s)=>{const a=o.includes(i),l=o.includes(s);return a&&!l?1:!a&&l?-1:i.localeCompare(s)})}applyFilters(){this.filteredCards=this.cards.filter(i=>{if("all"!==this.selectedSet&&i.set!==this.selectedSet||"all"!==this.selectedSeries&&i.series!==this.selectedSeries)return!1;if(this.selectedRarities.length>0){const a=new Set;for(const c of this.selectedRarities){if("\u{1f308}"===c){a.add("SAR");continue}const u=this.rarityService.getCodeFromSymbol(c);u&&(a.add(u),"SR"===u&&a.add("SAR"),"UR"===u&&a.add("CR"))}const l=this.getCardRarityCode(i);if(!a.has(l))return!1}if(this.selectedTypes.length>0&&!(Array.isArray(i.types)?i.types:[]).some(c=>this.selectedTypes.includes(c))||"all"!==this.selectedSet&&"all"!==this.selectedPack&&!(Array.isArray(i.packs)?i.packs:[]).includes(this.selectedPack)||this.searchTerm&&!i.label.eng.toLowerCase().includes(this.searchTerm.toLowerCase())||"missing"===this.ownershipFilter&&this.getOwnedCount(i)>0||"owned"===this.ownershipFilter&&0===this.getOwnedCount(i))return!1;const s=!0===i.isFoil;return!("no-foil"===this.foilFilter&&s||"foil-only"===this.foilFilter&&!s)});const r=i=>this.isSpecialSet(i),o=(i,s)=>{const a=/^([A-Z]+)(\d+)([a-z]*)$/,l=(i||"").match(a),c=(s||"").match(a);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return(i||"").localeCompare(s||"")};this.filteredCards.sort("oldest"===this.sortBy?(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(i.set,s.set);return 0!==c?c:i.number-s.number}:(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(s.set,i.set);return 0!==c?c:s.number-i.number})}onFilterChange(){this.extractAvailablePacks(),this.applyFilters()}onSetChange(){this.extractAvailablePacks(),"all"===this.selectedSet&&(this.selectedPack="all",this.groupBy="none"),this.applyFilters()}onSeriesChange(){this.extractAvailableSets(),this.selectedSet="all",this.selectedPack="all",this.groupBy="none",this.extractAvailablePacks(),this.applyFilters()}onSearchChange(){this.applyFilters()}onGroupByChange(){this.applyFilters()}clearFilters(){this.selectedSet="all",this.selectedSeries="all",this.selectedRarities=[],this.selectedTypes=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.foilFilter="all",this.groupBy="none",this.extractAvailableSets(),this.extractAvailablePacks(),this.applyFilters()}toggleFilters(){this.filtersOpen=!this.filtersOpen,this.cdr.detectChanges(),this.filtersOpen&&setTimeout(()=>{const r=document.querySelector(".filters-panel");if(r){const o=r.getBoundingClientRect().top+window.scrollY-8;window.scrollTo({top:o,behavior:"smooth"})}})}isSpecialSet(r){const o=(r||"").toUpperCase();return o.startsWith("P-")||o.endsWith("-P")||"P-A"===o||o.startsWith("PROMO")||o.startsWith("A4B")}openTradeModal(){this.isViewingOther||(this.tradeFriendCode=this.currentUser?.friend_code||"",this.selectedTradeRarities=this.selectedTradeRarities.filter(r=>!this.isTradeRarityDisabled(r)),this.refreshAvailableTradeSets(),this.selectedLFsets=this.selectedLFsets&&0!==this.selectedLFsets.length&&this.selectedLFsets.length===this.availableTradeSets.length?this.selectedLFsets.filter(r=>this.availableTradeSets.includes(r)):[...this.availableTradeSets],this.selectedFTsets=this.selectedFTsets&&0!==this.selectedFTsets.length&&this.selectedFTsets.length===this.availableTradeSets.length?this.selectedFTsets.filter(r=>this.availableTradeSets.includes(r)):[...this.availableTradeSets],this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.showTradeModal=!0,this.cdr.detectChanges())}closeTradeModal(){this.showTradeModal=!1,this.cdr.detectChanges()}isTradeRaritySelected(r){return this.selectedTradeRarities.includes(r)}toggleTradeRarity(r){if(this.isTradeRarityDisabled(r))return;const o=this.selectedTradeRarities.indexOf(r);o>=0?this.selectedTradeRarities.splice(o,1):this.selectedTradeRarities.push(r),this.cdr.detectChanges()}isTradeRarityDisabled(r){return this.excludedTradeSymbols.has(r)}getAvailableTradeRaritySymbols(){return(this.availableRaritySymbols||[]).filter(r=>!this.excludedTradeSymbols.has(r.symbol))}clearTradeRarities(){this.selectedTradeRarities=[],this.cdr.detectChanges()}refreshAvailableTradeSets(){const o=(this.sets||[]).map(s=>s.code).filter(s=>!(!s||this.excludeSpecialPacks&&this.isSpecialSet(s))),i=/^([A-Z]+)(\d+)([a-z]*)$/;o.sort((s,a)=>{const l=s.match(i),c=a.match(i);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return s.localeCompare(a)}),this.availableTradeSets=o}onExcludeSpecialPacksToggle(){this.refreshAvailableTradeSets();const r=this.selectedLFsets&&this.selectedLFsets.length===this.availableTradeSets.length,o=this.selectedFTsets&&this.selectedFTsets.length===this.availableTradeSets.length;this.selectedLFsets=(this.selectedLFsets||[]).filter(i=>this.availableTradeSets.includes(i)),this.selectedFTsets=(this.selectedFTsets||[]).filter(i=>this.availableTradeSets.includes(i)),r&&(this.selectedLFsets=[...this.availableTradeSets]),o&&(this.selectedFTsets=[...this.availableTradeSets]),this.cdr.detectChanges()}onDeluxeSpecialToggle(){if(this.tradeDeluxeSpecialOnly){const r=this.availableTradeSets.find(o=>"A4B"===o.toUpperCase());r&&(this.selectedLFsets=[r])}this.cdr.detectChanges()}isLFSetSelected(r){return this.selectedLFsets.includes(r)}toggleLFSet(r){const o=this.selectedLFsets.indexOf(r);o>=0?this.selectedLFsets.splice(o,1):this.selectedLFsets.push(r),this.cdr.detectChanges()}clearLFsets(){this.selectedLFsets=[],this.cdr.detectChanges()}selectAllLFsets(){this.selectedLFsets=[...this.availableTradeSets],this.cdr.detectChanges()}isFTSetSelected(r){return this.selectedFTsets.includes(r)}toggleFTSet(r){const o=this.selectedFTsets.indexOf(r);o>=0?this.selectedFTsets.splice(o,1):this.selectedFTsets.push(r),this.cdr.detectChanges()}clearFTsets(){this.selectedFTsets=[],this.cdr.detectChanges()}selectAllFTsets(){this.selectedFTsets=[...this.availableTradeSets],this.cdr.detectChanges()}openViewOthersModal(){this.isViewingOther||(this.showViewOthersModal=!0,this.cdr.detectChanges())}closeViewOthersModal(){this.showViewOthersModal=!1,this.cdr.detectChanges()}viewOtherCollectionFromModal(){var r=this;return b(function*(){r.openOtherCollectionInNewTab(),r.closeViewOthersModal()})()}openOtherCollectionInNewTab(){const r=(this.otherUsername||"").trim();if(!r)return void alert("Please enter a username");const o=this.router.createUrlTree(["/collection"],{queryParams:{otherUser:r}}),i=this.router.serializeUrl(o),a=(document.querySelector("base")?.getAttribute("href")||"/").trim();let l;/^https?:\/\//i.test(a),l=a.replace(/\/$/,"")+i,window.open(l,"_blank","noopener")}onDocumentClickCloseTradeDropdowns(r){if(!this.showTradeModal)return;const o=r.target,i=document.getElementById("lf-set-multiselect"),s=document.getElementById("ft-set-multiselect"),a=!!(i&&o&&i.contains(o)),l=!!(s&&o&&s.contains(o));!a&&this.lfSetDropdownOpen&&(this.lfSetDropdownOpen=!1,this.cdr.detectChanges()),!l&&this.ftSetDropdownOpen&&(this.ftSetDropdownOpen=!1,this.cdr.detectChanges())}generateAndCopyTradeText(){var r=this;return b(function*(){try{const o=r.generateTradeText();yield navigator.clipboard.writeText(o)}catch(o){console.error("Failed to copy to clipboard:",o),alert("Failed to copy to clipboard. Please try again.")}})()}generateTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],s=this.cards.filter(y=>{if(this.excludeSpecialPacks&&!this.tradeDeluxeSpecialOnly&&this.isSpecialSet(y.set)||this.tradeDeluxeSpecialOnly&&!this.isSpecialSet(y.set))return!1;const w=this.getCardRarityCode(y),T=w?this.rarityService.getSymbol(w):"";return!(T&&!o.includes(T)||this.selectedLFsets.length>0&&!this.selectedLFsets.includes(y.set)||this.tradeDeluxeSpecialOnly&&!0!==y.isFoil)&&0===this.getOwnedCount(y)}).reduce((y,w)=>((y[w.set]||=[]).push(w),y),{});let a="";if("details"===this.outputFormat)return this.generateDetailsTradeText();const l=y=>{const w=y.map(T=>{const D=T.label?.eng||"";return!0===T.isFoil?`${D} (foil)`:D});return 0===w.length?"":1===w.length?w[0]:2===w.length?`${w[0]} & ${w[1]}`:w.join(", ")};a+="LF:\n";const c=Object.entries(s).filter(([,y])=>y.length>0).sort((y,w)=>this.compareSetCodesAsc(y[0],w[0]));for(const[y,w]of c){const T=this.getSetShortName(y);w.sort((P,$)=>P.number-$.number||P.label.eng.localeCompare($.label.eng));const D=l(w);D&&(a+=`[${T}] ${D}\n`)}a+="\nFT:\n";const d=this.cards.filter(y=>{if(this.excludeSpecialPacks&&this.isSpecialSet(y.set))return!1;const w=this.getCardRarityCode(y),T=w?this.rarityService.getSymbol(w):"";return!(T&&!o.includes(T)||T&&this.excludedTradeSymbols.has(T)||this.selectedFTsets.length>0&&!this.selectedFTsets.includes(y.set))&&!(this.getOwnedCount(y)-this.getCardMinimumKeepCount(y)<this.tradeQuantityMin)}).reduce((y,w)=>((y[w.set]||=[]).push(w),y),{}),h=Object.entries(d).filter(([,y])=>y.length>0).sort((y,w)=>this.compareSetCodesAsc(y[0],w[0]));for(const[y,w]of h){const T=this.getSetShortName(y);w.sort((P,$)=>P.number-$.number||P.label.eng.localeCompare($.label.eng));const D=l(w);D&&(a+=`[${T}] ${D}\n`)}const f=(this.tradeTemplateText||"").trim(),p=(this.tradeFriendCode||"").trim(),v=(this.currentUser?.username||"").trim();return a+="\n=============================================================================",f&&(a+=`\n${f}\n`),(p||v)&&(v&&(a+=`\nIGN: ${v}`),p&&(a+=`\nFriend code: ${p}`)),a.trim()}compareSetCodesAsc(r,o){const i=/^([A-Z]+)(\d+)([a-z]*)$/,s=(r||"").match(i),a=(o||"").match(i);if(s&&a){if(s[1]!==a[1])return s[1].localeCompare(a[1]);const l=parseInt(s[2],10),c=parseInt(a[2],10);return l!==c?l-c:(s[3]||"").localeCompare(a[3]||"")}return(r||"").localeCompare(o||"")}generateDetailsTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],i=this.cards.filter(d=>{if(this.excludeSpecialPacks&&this.isSpecialSet(d.set)||this.selectedLFsets.length>0&&!this.selectedLFsets.includes(d.set))return!1;const h=this.getCardRarityCode(d),f=h?this.rarityService.getSymbol(h):"";return!(f&&!o.includes(f))&&0===this.getOwnedCount(d)}),s={};for(const d of i){const h=d.set,f=this.getCardRarityCode(d),p=f?this.rarityService.getSymbol(f):"Unknown";s[h]||(s[h]={}),s[h][p]||(s[h][p]=[]),s[h][p].push(d)}const a=d=>{const f=["\u25ca\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca","\u25ca","\u2606\u2606","\u2606","\u2735\u2735","\u2735"].indexOf(d);return f>=0?f:999},l=[],c=Object.keys(s).sort((d,h)=>this.compareSetCodesAsc(d,h)),u=(d,h)=>`${(d||h).toLowerCase().replace(/\s+/g,"")}(${h.toLowerCase()}):`;for(const d of c){const h=this.getSetShortName(d),f=s[d],p=Object.keys(f).sort((v,y)=>a(v)-a(y));for(const v of p){const y=u(h,d);l.push(y);const w=f[v].sort((T,D)=>T.number-D.number||T.label.eng.localeCompare(D.label.eng));for(const T of w)l.push(`${v} ${T.set}-${T.number} - ${T.label.eng}`);l.push("")}}return l.join("\n").trim()}loadOwnedCards(){var r=this;return b(function*(){r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}loadOwnedCardsForUser(r,o){var i=this;return b(function*(){i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage=o?`Loading ${o}'s collection...`:"Starting sync...",i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage="Starting sync...";try{const{quantities:s,minimumKeepCounts:a,allowTrade:l}=yield i.supabaseService.syncUserCollection(r,c=>{i.syncProgress=c,i.syncMessage=`Syncing cards... ${c} loaded`,i.cdr.detectChanges()});i.ownedCards=s,i.cardMinimumKeepCount=a,i.cardAllowTrade=l,i.calculateStatistics(),i.syncMessage=`Sync completed! ${Object.keys(s).length} cards loaded`,i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},1500)}catch(s){console.error("Error loading owned cards:",s),i.syncMessage="Sync failed, using local data...";const a=localStorage.getItem("ownedPokemonCards");a&&(i.ownedCards=JSON.parse(a),i.calculateStatistics()),i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},2e3)}finally{i.loadingOwnedCards=!1}})()}saveOwnedCards(){var r=this;return b(function*(){localStorage.setItem("ownedPokemonCards",JSON.stringify(r.ownedCards)),r.calculateStatistics()})()}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}getCardMinimumKeepCount(r){const o=this.getCardId(r);return this.cardMinimumKeepCount[o]||0}isCardAllowTrade(r){const o=this.getCardId(r);return!1!==this.cardAllowTrade[o]}toggleCardAllowTrade(r){var o=this;return b(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.isCardAllowTrade(r),a=!s,l=o.cardMinimumKeepCount[i]||0;if(o.cardAllowTrade[i]=a,a){if(0===l){const d=o.getCardRarityCode(r),h=o.rarityService.getRarityOrder(d);console.log(h),o.cardMinimumKeepCount[i]=h>=5?1:2}}else o.cardMinimumKeepCount[i]=0;o.cdr.detectChanges();const c=yield o.supabaseService.toggleAllowTrade(o.currentUser.id,i,a);if(!c.success)return console.error("Error toggling allow trade:",c.error),o.cardAllowTrade[i]=s,o.cardMinimumKeepCount[i]=l,void o.cdr.detectChanges();const u=yield o.supabaseService.updateCardMinimumKeepCount(o.currentUser.id,i,o.cardMinimumKeepCount[i]);u.success||console.error("Error updating minimum keep count:",u.error)})()}updateCardMinimumKeepCount(r,o){var i=this;return b(function*(){if(i.isViewingOther||!i.currentUser||o<0)return;const s=i.getCardId(r),a=i.getCardMinimumKeepCount(r);i.cardMinimumKeepCount[s]=o,i.cdr.detectChanges();const l=yield i.supabaseService.updateCardMinimumKeepCount(i.currentUser.id,s,o);l.success||(console.error("Failed to update minimum keep count:",l.error),i.cardMinimumKeepCount[s]=a,i.cdr.detectChanges())})()}increaseOwned(r){var o=this;return b(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r),a=s+1;o.updateLocalQuantity(i,a,r),yield o.persistQuantity(i,a,s,r)})()}decreaseOwned(r){var o=this;return b(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r);if(0===s)return;const a=s-1;o.updateLocalQuantity(i,a,r),yield o.persistQuantity(i,a,s,r)})()}startEditingCount(r){this.isViewingOther||(this.editingCardId=this.getCardId(r),this.editingCountValue=this.getOwnedCount(r),this.cdr.detectChanges(),this.focusEditingInput())}cancelEditingCount(){this.editingCardId=null,this.editingCountValue=0,this.cdr.detectChanges()}commitCount(r){var o=this;return b(function*(){if(o.isViewingOther)return void o.cancelEditingCount();if(!o.currentUser)return;const i=o.getCardId(r);if(o.editingCardId!==i)return;const s=Math.max(0,Math.floor(Number(o.editingCountValue)||0)),a=o.getOwnedCount(r);s!==a?(o.updateLocalQuantity(i,s,r),yield o.persistQuantity(i,s,a,r),o.cancelEditingCount()):o.cancelEditingCount()})()}onCountInputKeydown(r,o){if("Tab"!==r.key)return;r.preventDefault();const i=this.getFlatOrderedCards(),s=this.getCardId(o),a=i.findIndex(c=>this.getCardId(c)===s);if(-1===a)return;const l=r.shiftKey?a-1:a+1;this.commitCount(o).then(()=>{const c=i[l];c&&this.startEditingCount(c)})}focusEditingInput(){const r=this.editingCardId;r&&setTimeout(()=>{const o=document.querySelector(`.card-item[data-cardid="${r}"] .count-input`);o&&(o.focus(),o.select())})}getFlatOrderedCards(){const r=this.getGroupedCards();return this.lastFlatOrder=r.flatMap(o=>o.cards),this.lastFlatOrder}updateLocalQuantity(r,o,i){if(o<=0)delete this.ownedCards[r],delete this.cardMinimumKeepCount[r],delete this.cardAllowTrade[r];else{if(this.ownedCards[r]=o,void 0===this.cardMinimumKeepCount[r]){const s=this.getCardRarityCode(i),a=this.rarityService.getRarityOrder(s);this.cardMinimumKeepCount[r]=a>=5?1:2}void 0===this.cardAllowTrade[r]&&(this.cardAllowTrade[r]=!0)}this.saveOwnedCards(),this.cdr.detectChanges()}persistQuantity(r,o,i,s){var a=this;return b(function*(){if(a.currentUser)try{if(yield a.supabaseService.updateCardQuantity(a.currentUser.id,r,o),0===i&&o>0){const l=a.getCardRarityCode(s),u=a.rarityService.getRarityOrder(l)>=5?1:2;yield a.supabaseService.updateCardMinimumKeepCount(a.currentUser.id,r,u)}}catch(l){console.error("Error updating card quantity in database:",l),i<=0?delete a.ownedCards[r]:a.ownedCards[r]=i,a.saveOwnedCards(),a.cdr.detectChanges()}})()}calculateStatistics(){this.totalCards=this.cards.length,this.ownedCount=Object.values(this.ownedCards).reduce((r,o)=>r+o,0),this.uniqueOwned=Object.keys(this.ownedCards).length,this.completionPercentage=this.totalCards>0?Math.round(this.uniqueOwned/this.totalCards*100):0}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.name:r}getSetShortName(r){const o=this.sets.find(i=>i.code===r);return o?o.shortName:r}getFullRarityName(r){return this.rarityService.getStandardizedDisplayName(r)}getRarityClass(r){return{Common:"rarity-common",Uncommon:"rarity-uncommon",Rare:"rarity-rare","Double Rare":"rarity-double-rare","Art Rare":"rarity-art-rare","Super Rare":"rarity-super-rare","Special Art Rare":"rarity-special-art-rare","Immersive Rare":"rarity-immersive-rare","Crown Rare":"rarity-crown-rare",Shiny:"rarity-shiny","Shiny Super Rare":"rarity-shiny-super-rare"}[r]||"rarity-default"}toggleViewMode(){this.viewMode="grid"===this.viewMode?"list":"grid",console.log("View mode toggled to:",this.viewMode),this.cdr.detectChanges()}exportCollection(){if(this.isViewingOther)return void alert("Export is disabled when viewing another user's collection");let r="\ufeff";r+="Id,CardName,NumberOwn,Expansion,Pack,Rarity\n",this.cards.forEach(s=>{const a=this.getCardId(s),l=this.getOwnedCount(s),c=this.getCardRarityCode(s),u=c?this.rarityService.getSymbol(c):"Unknown",d=s.packs&&s.packs.length>0?s.packs[0]:"",h=s.label.eng.replace(/,/g,'""');r+=`${a},"${h}",${l},${s.set},"${d}",${u}\n`});const o=new Blob([r],{type:"text/csv;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="pokemon-tcg-collection.csv",i.click()}importCollection(r){var o=this;if(this.isViewingOther)return void alert("Import is disabled when viewing another user's collection");const i=r.target.files[0];if(i){const s=new FileReader;s.onload=function(){var a=b(function*(l){try{const d=(l.target?.result||"").split(/\r?\n/).filter(ue=>ue.trim().length>0);if(0===d.length)return void alert("CSV file appears to be empty.");const h=new Map;o.cards.forEach(ue=>{const De=o.getCardId(ue);h.set(o.normalizeId(De),De)});const f=o.parseCSVLine(d[0]),p=/(id|card|name|expansion|set|rarity|qty|quantity|owned|count|number|no)/i,v=f.some(ue=>p.test(ue)),y=v?1:0,w=v?o.buildHeaderMap(f):null;let T=0,D=0,P=0;const $={},le={},Cn=[];for(let ue=y;ue<d.length;ue++){const De=d[ue];try{const zt=o.parseCSVLine(De),{cardId:bn,quantity:M3}=o.resolveCsvRow(zt,w);if(!bn){D++;continue}const Qp=Math.max(0,Math.floor(Number(M3))||0),Ln=h.get(o.normalizeId(bn))||null;if(Ln){const aS=w?(()=>{const Ia=["allowtrade","allow_trade","trade","allow"];for(const eg of Ia){const $r=w[eg];if(void 0!==$r&&$r>=0&&$r<zt.length){const Aa=(zt[$r]||"").trim();if(Aa)return Aa}}})():void 0,Zp=void 0===aS||(o.parseBooleanLike(aS)??!0),lS=w?(()=>{const Ia=["minimumkeepcard","minimum_keep_card","min_keep","min_keep_count","minimum"];for(const eg of Ia){const $r=w[eg];if(void 0!==$r&&$r>=0&&$r<zt.length){const Aa=(zt[$r]||"").trim();if(Aa)return Aa}}})():void 0,cS=o.cards.find(Ia=>o.getCardId(Ia)===Ln)||null,T3=cS?o.getDefaultMinKeepForCard(cS):1,uS=void 0!==lS?Math.max(0,Math.floor(Number(lS)||0)):void 0,Xp=void 0!==uS?uS:T3;console.log(`Importing ${Ln}: owned=${Qp}, allow_trade=${Zp}, min_keep=${Xp}`),Qp>0?(o.ownedCards[Ln]=Qp,o.cardAllowTrade[Ln]=Zp,o.cardMinimumKeepCount[Ln]=Xp,$[Ln]=Zp,le[Ln]=Xp,Cn.push(Ln)):(delete o.ownedCards[Ln],delete o.cardAllowTrade[Ln],delete o.cardMinimumKeepCount[Ln]),T++}else console.log(bn),P++}catch(zt){console.error(`Error parsing line: ${De}`,zt),D++}}if(o.saveOwnedCards(),o.currentUser)try{const ue=yield o.supabaseService.bulkReplaceUserCollection(o.currentUser.id,o.ownedCards,{minKeep:le,allowTrade:$});if(ue.success){let De=`Import completed!\n${T} cards updated`;De+="\nCollection synced to database successfully",P>0&&(De+=`\n${P} rows referenced unknown cards (skipped)`),D>0&&(De+=`\n${D} parse errors encountered`),yield o.loadOwnedCards(),alert(De)}else{console.error("\u274c Failed to sync collection to database:",ue.error);let De=`Import completed!\n${T} cards updated locally`;De+=`\nDatabase sync failed: ${ue.error}`,P>0&&(De+=`\n${P} unknown cards (skipped)`),D>0&&(De+=`\n${D} parse errors encountered`),alert(De)}}catch(ue){console.error("\u274c Error during bulk sync:",ue);let De=`Import completed!\n${T} cards updated locally`;De+="\nDatabase sync failed - please try again",P>0&&(De+=`\n${P} unknown cards (skipped)`),D>0&&(De+=`\n${D} parse errors encountered`),alert(De)}else{let ue=`Import completed!\n${T} cards updated`;P>0&&(ue+=`\n${P} unknown cards (skipped)`),D>0&&(ue+=`\n${D} parse errors encountered`),alert(ue)}}catch(c){console.error("Failed to import collection:",c),alert("Failed to import collection. Please check the CSV file format.")}});return function(l){return a.apply(this,arguments)}}(),s.readAsText(i)}}viewOtherCollection(){var r=this;return b(function*(){const o=(r.otherUsername||"").trim();if(!o)return void alert("Please enter a username");if(r.currentUser&&o===r.currentUser.username)return void r.backToMyCollection();const i=yield r.supabaseService.getProfileByUsername(o);i?(r.isViewingOther=!0,r.viewingUser=i,yield r.loadOwnedCardsForUser(i.id,i.username)):alert(`User '${o}' not found`)})()}backToMyCollection(){var r=this;return b(function*(){r.isViewingOther=!1,r.viewingUser=null,r.otherUsername="",r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}buildHeaderMap(r){const o={};return r.forEach((i,s)=>{const a=i.trim().toLowerCase();o[a]=s}),o}resolveCsvRow(r,o){const i=c=>{if(o)for(const u of c){const d=o[u];if(void 0!==d&&d>=0&&d<r.length){const h=(r[d]||"").trim();if(h)return h}}},s=i(["numberown","quantity","qty","owned","count","number own","number_owned"]);let a=0;void 0!==s?a=Math.max(0,Math.floor(Number(s)||0)):r.length>=3&&(a=Math.max(0,Math.floor(Number(r[2])||0)));let l=i(["id","cardid","card id"]);if(!l){let c=i(["set","expansion"]),u=i(["number","no","card number","card no","card#"]);if(!c&&r.length>=4&&(c=(r[3]||"").trim()),!u&&r.length>=1){const d=(r[1]||"").trim();/^\d+/.test(d)&&(u=d)}if(c&&u){const d=this.mapToSetCode(c),h=this.extractLeadingInt(u);d&&null!==h&&(l=`${d}-${h}`)}}if(!l&&r.length>0){const c=(r[0]||"").trim();c&&(l=c)}return{cardId:l||null,quantity:a}}extractLeadingInt(r){const o=(r||"").match(/\d+/);return o?parseInt(o[0],10):null}mapToSetCode(r){const i=(r||"").trim().toUpperCase();if("PROMO-A"===i)return"P-A";const s=this.sets.find(l=>(l.code||"").toUpperCase()===i);if(s)return s.code;const a=this.sets.find(l=>(l.name||"").toUpperCase()===i);return a?a.code:null}normalizeId(r){let o=(r||"").trim().toUpperCase();return o=o.replace(/^PROMO-A(?=-)/,"P-A"),o}parseBooleanLike(r){const o=(r||"").trim().toLowerCase();return!!["true","1","yes","y"].includes(o)||!["false","0","no","n"].includes(o)&&null}getDefaultMinKeepForCard(r){const o=this.getCardRarityCode(r),i=o?this.rarityService.getSymbol(o):"";return new Set(["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca"]).has(i)?2:1}parseCSVLine(r){const o=[];let i="",s=!1;for(let a=0;a<r.length;a++){const l=r[a];'"'===l?s=!s:","!==l||s?i+=l:(o.push(i),i="")}return o.push(i),o}getCardImageUrl(r){return this.imageService.getCardImageUrl(r)}getCardDisplayName(r){return`${r.set}-${r.number} \u2013 ${r.label.eng}`}onImageError(r,o){console.error("\u274c Image failed to load:",o.imageName),r.target.src=this.imageService.getPlaceholderImageUrl()}getGroupedCards(){if("all"!==this.selectedSet&&"none"!==this.groupBy)return this.getGroupedCardsByCategory();const r={};this.filteredCards.forEach(a=>{const l=a.set;r[l]||(r[l]=[]),r[l].push(a)});const o=(a,l)=>{const c=a.match(/^([A-Z]+)(\d+)([a-z]*)$/),u=l.match(/^([A-Z]+)(\d+)([a-z]*)$/);if(c&&u){if(c[1]!==u[1])return c[1].localeCompare(u[1]);const d=parseInt(c[2],10),h=parseInt(u[2],10);return d!==h?d-h:(c[3]||"").localeCompare(u[3]||"")}return a.localeCompare(l)},s=(a,l)=>a.number!==l.number?a.number-l.number:a.label.eng.localeCompare(l.label.eng);return Object.keys(r).sort((a,l)=>{const c=h=>this.isSpecialSet(h),u=c(a),d=c(l);return u&&!d?1:!u&&d?-1:"latest"===this.sortBy?o(l,a):o(a,l)}).map(a=>({groupTitle:a,cards:r[a].sort(s)}))}getGroupedCardsByCategory(){const r={};this.filteredCards.forEach(s=>{let a;switch(this.groupBy){case"rarity":const l=this.getCardRarityCode(s);a=`${l?this.rarityService.getSymbol(l):"Unknown"} ${l?this.rarityService.getDisplayName(l):"Unknown"}`;break;case"pack":a=s.packs&&s.packs.length>0?s.packs[0]:"No Pack";break;case"type":a=s.types&&s.types.length>0?s.types[0]:"No Type";break;default:a="All Cards"}r[a]||(r[a]=[]),r[a].push(s)});const o=Object.keys(r).sort((s,a)=>{if("rarity"===this.groupBy){const l=c=>{const u=c.split(" ")[0];return this.rarityService.getRarityOrder(u)||999};return l(s)-l(a)}return s.localeCompare(a)}),i=(s,a)=>s.number!==a.number?s.number-a.number:s.label.eng.localeCompare(a.label.eng);return o.map(s=>({groupTitle:s,cards:r[s].sort(i)}))}getGroupDisplayName(r,o){const i=this.getSetName(r);return i&&i!==r?`${r} - ${i}`:`Set ${r}`}getGroupCollectedCount(r){return`${r.filter(s=>this.getOwnedCount(s)>0).length}/${r.length}`}setOwnership(r){this.ownershipFilter!==r&&(this.ownershipFilter=r,this.applyFilters(),this.cdr.detectChanges())}setFoilFilter(r){this.foilFilter!==r&&(this.foilFilter=r,this.applyFilters(),this.cdr.detectChanges())}isRaritySelected(r){return this.selectedRarities.includes(r)}toggleRarity(r){const o=this.selectedRarities.indexOf(r);o>=0?this.selectedRarities.splice(o,1):this.selectedRarities.push(r),this.applyFilters(),this.cdr.detectChanges()}clearRarity(){this.selectedRarities.length>0&&(this.selectedRarities=[],this.applyFilters(),this.cdr.detectChanges())}isTypeSelected(r){return this.selectedTypes.includes(r)}toggleType(r){const o=this.selectedTypes.indexOf(r);o>=0?this.selectedTypes.splice(o,1):this.selectedTypes.push(r),this.applyFilters(),this.cdr.detectChanges()}clearTypes(){this.selectedTypes.length>0&&(this.selectedTypes=[],this.applyFilters(),this.cdr.detectChanges())}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){const r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);window.scrollTo({top:r,behavior:"smooth"})}getSetElements(){return Array.from(document.querySelectorAll(".cards-container .card-group"))}getCurrentSetIndex(r=80){const o=window.scrollY||window.pageYOffset||0,i=this.getSetElements();let s=-1;for(let a=0;a<i.length&&i[a].getBoundingClientRect().top+window.scrollY-r<=o;a++)s=a;return s}scrollToNextSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),i=Math.min(o+1,r.length-1);if(i>=0){const a=r[i].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}}scrollToPrevSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),a=r[Math.max(o-1,0)].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}ngOnDestroy(){this.selectedCardForModal&&(document.removeEventListener("keydown",this.handleModalKeydown),document.body.style.overflow="auto")}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(tu),N(yD),N(bL),N(is),N(xt),N(io),N(Ti),N(nS))},n.\u0275cmp=zr({type:n,selectors:[["app-card-collection"]],hostBindings:function(o,i){1&o&&A("click",function(a){return i.onDocumentClickCloseTradeDropdowns(a)},0,d_)},decls:107,vars:50,consts:[[1,"collection-container"],[1,"collection-actions"],[1,"actions-left"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","import-btn"],["type","file","accept",".csv","hidden","",3,"change"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"actions-right"],["title","Toggle view mode",1,"btn","btn-secondary",3,"click"],["class","view-other-banner","style","margin-bottom:12px; padding:10px 14px; border-radius:12px; background:rgba(46,204,113,0.12); border:1px solid rgba(46,204,113,0.35); display:flex; align-items:center; justify-content:space-between; gap:12px;",4,"ngIf"],["role","region","aria-label","Collection filters",1,"filters-panel"],[1,"filters-row"],["type","text","placeholder","Search cards\u2026","aria-label","Search cards",1,"filter-input",3,"ngModel","ngModelChange","input"],[1,"filters-row","wrap","sets-row"],[1,"sort-group"],["for","series-select"],["id","series-select","aria-label","Select series",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["for","set-select"],["id","set-select","aria-label","Select set",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["for","pack-select"],["id","pack-select","aria-label","Select pack",1,"filter-select","compact",3,"disabled","ngModel","ngModelChange","change"],[1,"filters-row","rarity-row"],["for","rarity-chips",1,"filter-label"],["id","rarity-chips","aria-label","Rarity filter",1,"segmented","multi","chips-scroll"],["type","button","title","All rarities",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngIf"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","types-row"],["for","types-chips",1,"filter-label"],["id","types-chips","aria-label","Types filter",1,"segmented","multi","chips-scroll"],["type","button","title","All types",1,"chip",3,"click"],["type","button","class","chip type-chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","wrap"],["for","sort-select"],["id","sort-select","aria-label","Sort order",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","latest"],["value","oldest"],["class","sort-group",4,"ngIf"],["role","tablist","aria-label","Ownership filter",1,"segmented","ownership"],["type","button",3,"click"],["role","tablist","aria-label","Foil filter",1,"segmented","foil"],[1,"row-spacer"],["type","button","aria-label","Reset filters",1,"btn","btn-outline","reset-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","sync-progress",4,"ngIf"],["class","cards-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["aria-label","Collection navigation controls",1,"fab-stack"],["type","button","title","Top",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-up"],["type","button","title","Previous set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-up"],["type","button","title","Next set",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-down"],["type","button","title","Bottom",1,"fab",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-down"],["aria-label","Filter controls",1,"fab-stack-left"],["type","button","title","Filters",1,"fab","mobile-only",3,"click"],["aria-hidden","true",1,"fa","fa-filter"],["type","button","title","Copy For Trade",1,"fab","mobile-only",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-exchange-alt"],["type","button","title","View Others Collection",1,"fab","mobile-only",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-user"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"view-other-banner",2,"margin-bottom","12px","padding","10px 14px","border-radius","12px","background","rgba(46,204,113,0.12)","border","1px solid rgba(46,204,113,0.35)","display","flex","align-items","center","justify-content","space-between","gap","12px"],[2,"background-color","transparent"],[1,"btn","btn-outline",3,"click"],[3,"value"],["type","button",1,"chip",3,"title","click"],["type","button",1,"chip","type-chip",3,"title","click"],[4,"ngIf","ngIfElse"],["normalType",""],[1,"trainer-label",3,"ngClass"],[1,"type-icon",3,"src","alt"],["for","group-select"],["id","group-select","aria-label","Group by",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","none"],["value","rarity"],["value","pack"],["value","type"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"btn","btn-primary",3,"click"],[1,"sync-progress"],[1,"sync-message"],[1,"sync-icon"],[1,"sync-text"],[1,"sync-title"],["class","sync-count",4,"ngIf"],[1,"sync-count"],[1,"cards-container"],["class","card-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-group"],[1,"group-header"],[1,"group-title"],[1,"group-stats"],["class","group-count","style","margin-left:10px; color:#b9eaff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffe066;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#f7a6ff;",4,"ngIf"],["class","group-count","style","margin-left:10px; color:#ffd700;",4,"ngIf"],[1,"group-count"],["class","cards-grid",4,"ngIf"],["class","cards-list",4,"ngIf"],[1,"group-count",2,"margin-left","10px","color","#b9eaff"],[1,"group-count",2,"margin-left","10px","color","#ffe066"],[1,"group-count",2,"margin-left","10px","color","#f7a6ff"],[1,"group-count",2,"margin-left","10px","color","#ffd700"],[1,"cards-grid"],["class","card-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-item"],[1,"card-image"],["loading","lazy",1,"pokemon-card-img",2,"cursor","pointer",3,"src","alt","error","click"],[1,"card-info"],[1,"card-title"],[1,"ownership-controls"],[1,"count-btn","decrease",3,"disabled","click"],["displayCount",""],[1,"count-btn","increase",3,"disabled","click"],["class","minimum-keep-controls",4,"ngIf"],["type","number","min","0",1,"count-input",3,"ngModel","ngModelChange","keydown.enter","keydown","keydown.escape","blur"],["type","button",1,"count-display",3,"disabled","click"],[1,"minimum-keep-controls"],["type","button",1,"lock-toggle-btn",3,"title","click"],["type","number","min","0","placeholder","0",1,"minimum-keep-input",3,"value","max","disabled","change"],[1,"cards-list"],["class","card-list-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-list-item"],[1,"card-list-image",3,"click"],["loading","lazy",1,"card-list-img",3,"src","alt","error"],[1,"card-list-details"],[1,"card-list-name"],[1,"card-list-meta"],[1,"card-list-set"],["class","card-list-packs",4,"ngIf"],[1,"card-list-controls"],[1,"card-list-quantity"],["displayCountList",""],["class","card-list-keep",4,"ngIf"],[1,"card-list-packs"],[1,"card-list-keep"],["type","number","min","0","placeholder","0",1,"minimum-keep-input-list",3,"value","max","disabled","change"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-backdrop",3,"click"],[1,"modal-content","view-others-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"view-others-config"],[1,"config-section"],["for","other-username-input",1,"config-label"],["type","text","id","other-username-input","placeholder","Enter username to view their collection\u2026",1,"config-input-wide",3,"ngModel","ngModelChange","keydown.enter"],[1,"config-hint"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],[1,"modal-content","trade-modal",3,"click"],[1,"trade-config"],["for","exclude-special-toggle",1,"config-label"],["type","checkbox","id","exclude-special-toggle",3,"ngModel","ngModelChange"],["class","config-section",4,"ngIf"],["for","lf-set-multiselect",1,"config-label"],["id","lf-set-multiselect",2,"position","relative","display","inline-block","width","100%"],["type","button",2,"width","100%","background","rgba(255,255,255,0.08)","border","1px solid rgba(255,255,255,0.18)","color","var(--text)","padding","6px 10px","border-radius","8px","display","flex","align-items","center","justify-content","space-between","cursor","pointer","font-size","14px",3,"click"],[4,"ngIf"],[1,"fa",3,"ngClass"],["style","position:absolute; left:0; right:0; top: calc(100% + 4px); background: #1e2533; border:1px solid rgba(255,255,255,0.18); border-radius:10px; padding:8px 8px 10px; box-shadow:0 6px 16px rgba(0,0,0,0.45); z-index:50; max-height:260px; overflow-y:auto;",4,"ngIf"],["for","ft-set-multiselect",1,"config-label"],["id","ft-set-multiselect",2,"position","relative","display","inline-block","width","100%"],[1,"config-label"],[1,"rarity-chips"],["type","button",1,"chip",3,"click"],["role","tablist","aria-label","Output format",1,"segmented"],["type","button","role","tab",3,"click"],["for","trade-qty-min",1,"config-label"],["type","number","id","trade-qty-min","min","1","max","10",1,"config-input",3,"ngModel","ngModelChange"],["for","friend-code-input",1,"config-label"],["type","text","id","friend-code-input","placeholder","Enter your friend code to include in the copy\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],["for","trade-template-text",1,"config-label"],["id","trade-template-text","rows","2","placeholder","Add an extra note to include in the copied text\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],["for","deluxe-special-toggle",1,"config-label"],["type","checkbox","id","deluxe-special-toggle",3,"ngModel","ngModelChange"],[2,"position","absolute","left","0","right","0","top","calc(100% + 4px)","background","#1e2533","border","1px solid rgba(255,255,255,0.18)","border-radius","10px","padding","8px 8px 10px","box-shadow","0 6px 16px rgba(0,0,0,0.45)","z-index","50","max-height","260px","overflow-y","auto"],[2,"display","flex","gap","8px","margin-bottom","6px"],["type","button",1,"btn","btn-outline",2,"padding","4px 8px","font-size","11px","line-height","1",3,"click"],["role","listbox",2,"display","flex","flex-direction","column","gap","2px"],["type","button","style","border:none; text-align:left; padding:4px 6px; border-radius:6px; font-size:12px; cursor:pointer; display:flex; align-items:center; gap:6px;",3,"ngStyle","click",4,"ngFor","ngForOf"],["style","font-size:12px; opacity:0.7; padding:4px;",4,"ngIf"],["type","button",2,"border","none","text-align","left","padding","4px 6px","border-radius","6px","font-size","12px","cursor","pointer","display","flex","align-items","center","gap","6px",3,"ngStyle","click"],[2,"width","16px","display","inline-block"],[2,"font-size","12px","opacity","0.7","padding","4px"],[1,"modal-overlay",3,"click"],[1,"modal-content","card-modal",3,"click"],["aria-label","Close modal",1,"modal-close",3,"click"],[1,"card-modal-image",2,"display","flex","align-items","center","justify-content","center","gap","16px"],["aria-label","Previous card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"modal-card-image",3,"src","alt"],["aria-label","Next card",1,"modal-nav-btn",2,"font-size","2rem","color","white","background","none","border","none","cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"card-modal-info"],["class","modal-pack-badges",4,"ngIf"],[1,"modal-pack-badges"],["class","pack-badge",4,"ngFor","ngForOf"],[1,"pack-badge"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),A("click",function(){return i.exportCollection()}),C(4," \u{1f4e4} Export Collection "),m(),g(5,"label",4),C(6," \u{1f4e5} Import Collection "),g(7,"input",5),A("change",function(a){return i.importCollection(a)}),m()(),g(8,"button",6),A("click",function(){return i.openTradeModal()}),C(9," \u{1f4cb} Copy For Trade "),m(),g(10,"button",6),A("click",function(){return i.openViewOthersModal()}),C(11," \u{1f464} View Others Collection "),m()(),g(12,"div",7)(13,"button",8),A("click",function(){return i.toggleViewMode()}),C(14),m()()(),H(15,jV,8,1,"div",9),g(16,"div",10)(17,"div",11)(18,"input",12),A("ngModelChange",function(a){return i.searchTerm=a})("input",function(){return i.onSearchChange()}),m()(),g(19,"div",13)(20,"div",14)(21,"label",15),C(22,"Series"),m(),g(23,"select",16),A("ngModelChange",function(a){return i.selectedSeries=a})("change",function(){return i.onSeriesChange()}),g(24,"option",17),C(25,"All Series"),m(),H(26,VV,2,2,"option",18),m()(),g(27,"div",14)(28,"label",19),C(29),m(),g(30,"select",20),A("ngModelChange",function(a){return i.selectedSet=a})("change",function(){return i.onSetChange()}),g(31,"option",17),C(32),m(),H(33,$V,2,2,"option",18),m()(),g(34,"div",14)(35,"label",21),C(36),m(),g(37,"select",22),A("ngModelChange",function(a){return i.selectedPack=a})("change",function(){return i.applyFilters()}),g(38,"option",17),C(39),m(),H(40,UV,2,2,"option",18),m()()(),g(41,"div",23)(42,"label",24),C(43,"Rarity"),m(),g(44,"div",25)(45,"button",26),A("click",function(){return i.clearRarity()}),C(46,"ALL"),m(),H(47,BV,2,3,"button",27),H(48,HV,2,4,"button",28),m()(),g(49,"div",29)(50,"label",30),C(51,"Types"),m(),g(52,"div",31)(53,"button",32),A("click",function(){return i.clearTypes()}),C(54," ALL "),m(),H(55,KV,4,6,"button",33),m()(),g(56,"div",34)(57,"div",14)(58,"label",35),C(59,"Sort By"),m(),g(60,"select",36),A("ngModelChange",function(a){return i.sortBy=a})("change",function(){return i.applyFilters()}),g(61,"option",37),C(62,"Latest Set"),m(),g(63,"option",38),C(64,"Oldest Set"),m()()(),H(65,JV,12,1,"div",39),g(66,"div",40)(67,"button",41),A("click",function(){return i.setOwnership("all")}),C(68,"ALL"),m(),g(69,"button",41),A("click",function(){return i.setOwnership("missing")}),C(70,"MISSING"),m(),g(71,"button",41),A("click",function(){return i.setOwnership("owned")}),C(72,"OWNED"),m()(),g(73,"div",42)(74,"button",41),A("click",function(){return i.setFoilFilter("all")}),C(75,"ALL"),m(),g(76,"button",41),A("click",function(){return i.setFoilFilter("no-foil")}),C(77,"NO FOIL"),m(),g(78,"button",41),A("click",function(){return i.setFoilFilter("foil-only")}),C(79,"FOIL ONLY"),m()(),Qe(80,"div",43),g(81,"button",44),A("click",function(){return i.clearFilters()}),C(82,"Reset"),m()()(),H(83,YV,4,0,"div",45),H(84,QV,5,1,"div",46),H(85,XV,8,2,"div",47),H(86,m$,2,2,"div",48),H(87,_$,9,0,"div",49),g(88,"div",50)(89,"button",51),A("click",function(){return i.scrollToTop()}),Qe(90,"i",52),m(),g(91,"button",53),A("click",function(){return i.scrollToPrevSet()}),Qe(92,"i",54),m(),g(93,"button",55),A("click",function(){return i.scrollToNextSet()}),Qe(94,"i",56),m(),g(95,"button",57),A("click",function(){return i.scrollToBottom()}),Qe(96,"i",58),m()(),g(97,"div",59)(98,"button",60),A("click",function(){return i.toggleFilters()}),Qe(99,"i",61),m(),g(100,"button",62),A("click",function(){return i.openTradeModal()}),Qe(101,"i",63),m(),g(102,"button",64),A("click",function(){return i.openViewOthersModal()}),Qe(103,"i",65),m()(),H(104,y$,20,2,"div",66),H(105,N$,68,30,"div",66),H(106,j$,14,4,"div",67),m()),2&o&&(_(8),x("disabled",i.isViewingOther),_(2),x("disabled",i.isViewingOther),_(4),Oe(" ","grid"===i.viewMode?"\u{1f4cb} List View":"\u{1f5bc}\ufe0f Grid View"," "),_(1),x("ngIf",i.isViewingOther),_(1),Ae("collapsed",!i.filtersOpen),_(2),x("ngModel",i.searchTerm),_(5),x("ngModel",i.selectedSeries),_(3),x("ngForOf",i.availableSeries),_(3),Oe("Set ","all"!==i.selectedSeries?"(in "+i.selectedSeries+")":"",""),_(1),x("ngModel",i.selectedSet),_(2),ot("all"!==i.selectedSeries?"All Sets in "+i.selectedSeries:"All Sets"),_(1),x("ngForOf",i.availableSets),_(3),Oe("Pack ","all"!==i.selectedSet?"(in "+i.getSetName(i.selectedSet)+")":"(select a set first)",""),_(1),x("disabled","all"===i.selectedSet)("ngModel",i.selectedPack),_(2),ot("all"!==i.selectedSet?"All Packs in "+i.getSetName(i.selectedSet):"Select a set first"),_(1),x("ngForOf",i.availablePacks),_(5),Ae("active",0===i.selectedRarities.length),_(2),x("ngIf",!i.hasRaritySymbol("\u{1f308}")),_(1),x("ngForOf",i.availableRaritySymbols),_(5),Ae("active",0===i.selectedTypes.length),_(2),x("ngForOf",i.availableTypes),_(5),x("ngModel",i.sortBy),_(5),x("ngIf","all"!==i.selectedSet),_(2),Ae("active","all"===i.ownershipFilter),_(2),Ae("active","missing"===i.ownershipFilter),_(2),Ae("active","owned"===i.ownershipFilter),_(3),Ae("active","all"===i.foilFilter),_(2),Ae("active","no-foil"===i.foilFilter),_(2),Ae("active","foil-only"===i.foilFilter),_(5),x("ngIf",i.loading),_(1),x("ngIf",i.error),_(1),x("ngIf",i.syncingCards),_(1),x("ngIf",!i.loading&&!i.error),_(1),x("ngIf",!i.loading&&!i.error&&0===i.getGroupedCards().length),_(11),Nt("aria-pressed",i.filtersOpen),_(2),x("disabled",i.isViewingOther),_(2),x("disabled",i.isViewingOther),_(2),x("ngIf",i.showViewOthersModal),_(1),x("ngIf",i.showTradeModal),_(1),x("ngIf",i.selectedCardForModal))},dependencies:[oc,ic,Ii,ub,Mc,Tc,Pi,xc,pc,Li,ia,Oc,Lf,Fi],styles:['.group-header[_ngcontent-%COMP%]{flex-wrap:wrap}.group-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.group-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1rem;padding:2px 8px;border-radius:6px;background:rgba(255,255,255,.04);margin-bottom:2px}@media (max-width:600px){.group-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.group-stats[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:6px;font-size:.95rem;margin-top:4px}.group-count[_ngcontent-%COMP%]{font-size:.95rem;padding:2px 6px;margin-bottom:2px}}.chip.active[_ngcontent-%COMP%]   .trainer-item[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-tool[_ngcontent-%COMP%], .chip.active[_ngcontent-%COMP%]   .trainer-supporter[_ngcontent-%COMP%]{color:#fff!important}.trainer-item[_ngcontent-%COMP%], .trainer-tool[_ngcontent-%COMP%], .trainer-supporter[_ngcontent-%COMP%]{font-family:Roboto Condensed,Arial Narrow,sans-serif;font-weight:1000;font-style:italic;font-size:13px;text-transform:uppercase;letter-spacing:1px;-webkit-font-smoothing:antialiased;display:inline-block;margin:0 2px;-webkit-user-select:none;user-select:none;transition:filter .15s ease-in-out;filter:brightness(1.12)}.trainer-item[_ngcontent-%COMP%]{color:#2596be}.trainer-tool[_ngcontent-%COMP%]{color:#78619a}.trainer-supporter[_ngcontent-%COMP%]{color:#dc6c40}.collection-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:transparent;min-height:100vh;color:#fff}.sync-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,#1a4d3a 0%,#0f2d1f 100%);border:1px solid #28a745;border-radius:10px;padding:16px 22px;margin-bottom:20px;box-shadow:0 4px 18px #28a74540}.sync-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.sync-icon[_ngcontent-%COMP%]{font-size:22px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.sync-text[_ngcontent-%COMP%]{flex:1}.sync-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#28a745;margin-bottom:2px}.sync-count[_ngcontent-%COMP%]{font-size:12px;color:#9fb8aa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.collection-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:30px;flex-wrap:wrap}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.view-other-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.view-other-controls[_ngcontent-%COMP%]   .search-input.compact[_ngcontent-%COMP%]{width:auto;max-width:240px;min-width:200px;padding:8px 12px;border-radius:8px}@media (max-width: 768px){.collection-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{justify-content:space-between}}.import-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d;border:1px solid #404040}.filters-panel[_ngcontent-%COMP%]{border:1px solid #666;border-radius:10px;padding:14px;margin-bottom:20px;background-color:#12151c;background:#12151c;box-shadow:0 8px 18px #00000059}.filters-header[_ngcontent-%COMP%]{color:#ddd;font-weight:600;margin-bottom:10px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.filters-row.wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.rarity-row[_ngcontent-%COMP%]{align-items:flex-start;gap:10px}.filters-row.rarity-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filters-row.footer[_ngcontent-%COMP%]{justify-content:space-between}.filter-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.filter-select.compact[_ngcontent-%COMP%]{width:240px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.sort-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#cfcfcf;margin-right:8px}.segmented[_ngcontent-%COMP%]{display:inline-flex;background:#1b1e24;border:1px solid #4a4f5a;border-radius:6px;overflow:hidden}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;background:transparent;color:#cfd6e4;border:none;cursor:pointer}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-left:1px solid #4a4f5a}.segmented[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff}.segmented.multi[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;background:transparent;border:none;overflow-x:auto;padding:4px 2px 2px;-webkit-overflow-scrolling:touch}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#3a3f48;border-radius:4px}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{border:1px solid #3d4350;background:#171a20;color:#cfd6e4;border-radius:999px;padding:6px 10px;font-size:12px;line-height:1}.segmented.multi[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);border-color:#7056b1;color:#fff}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4b90ff;outline-offset:2px}.type-chip[_ngcontent-%COMP%]{padding:6px 8px!important;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.type-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:contain}.ownership[_ngcontent-%COMP%]{margin-left:4px}.row-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.reset-btn[_ngcontent-%COMP%]{white-space:nowrap}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;align-items:center;justify-content:center;padding:16px}.modal-content[_ngcontent-%COMP%]{width:min(520px,92vw);max-height:85vh;overflow:auto;background:#121317;border:1px solid #3e4654;border-radius:10px;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #2c3240}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#eaeaea}.modal-close[_ngcontent-%COMP%]{background:transparent;border:none;color:#aaa;font-size:18px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #2c3240}.trade-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.trade-config[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.config-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.config-label[_ngcontent-%COMP%]{font-weight:600;color:#ddd;font-size:14px}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #4a4f5a;border-radius:6px;background:#1b1e24;color:#cfd6e4;cursor:pointer;transition:all .2s ease}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.rarity-chips[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:var(--header-gradient);border-color:#6f79d9;color:#fff}.config-input[_ngcontent-%COMP%]{width:80px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-input-wide[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-hint[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:420px;margin:0 auto}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #444;border-radius:25px;background-color:#333;color:#fff;font-size:16px;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 10px #007bff4d}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ccc;letter-spacing:.5px}.filter-dependency[_ngcontent-%COMP%]{font-size:11px;color:#007bff;font-weight:400;text-transform:none;font-style:italic}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #444;border-radius:8px;background-color:#333;color:#fff;font-size:14px;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:hover{border-color:#555;background-color:#3a3a3a}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff33}.filter-select[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background-color:#2a2a2a;border-color:#333;color:#888}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.results-info[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:12px 20px;border-radius:8px;text-align:center;border:1px solid #333}.results-text[_ngcontent-%COMP%]{color:#ccc;font-size:14px;font-weight:500}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #333;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.cards-container[_ngcontent-%COMP%]{width:100%}.card-group[_ngcontent-%COMP%]{margin-bottom:40px}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:2px solid #333;flex-wrap:wrap;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin:0;text-shadow:1px 1px 2px rgba(0,0,0,.5);flex:1;min-width:280px;position:relative;line-height:1.3}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-shrink:0}.group-count[_ngcontent-%COMP%]{color:#ccc;font-size:14px;padding:4px 8px;background-color:#333;border-radius:4px;white-space:nowrap}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:18px}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;overflow:hidden;transition:transform .2s ease}.card-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.cards-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.card-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px 16px;background:linear-gradient(135deg,rgba(30,30,40,.6) 0%,rgba(20,20,30,.6) 100%);border:1px solid rgba(100,100,120,.3);border-radius:10px;transition:all .2s ease}.card-list-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,rgba(40,40,50,.7) 0%,rgba(30,30,40,.7) 100%);border-color:#78789680;transform:translate(4px)}.card-list-item.no-quantity[_ngcontent-%COMP%]{opacity:.5}.card-list-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.7}.card-list-image[_ngcontent-%COMP%]{flex-shrink:0;width:60px;height:84px;border-radius:6px;overflow:hidden;cursor:pointer;transition:transform .2s ease}.card-list-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-list-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:6px}.card-list-img.no-quantity[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-list-details[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}.card-list-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-list-meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:12px;color:#aaa}.card-list-set[_ngcontent-%COMP%]{font-weight:500;color:#7a9bff}.card-list-packs[_ngcontent-%COMP%]{color:#999}.card-list-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:flex-end}.card-list-quantity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.card-list-keep[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:4px 8px;background:rgba(30,30,40,.8);border:1px solid rgba(100,100,120,.3);border-radius:6px}.card-list-keep[_ngcontent-%COMP%]   .keep-icon[_ngcontent-%COMP%]{font-size:11px;opacity:.7}.minimum-keep-input-list[_ngcontent-%COMP%]{width:45px;padding:3px 6px;border-radius:4px;border:1px solid rgba(100,120,150,.4);background:rgba(40,40,50,.9);color:#fff;font-size:12px;font-weight:600;text-align:center;outline:none;transition:all .2s ease}.minimum-keep-input-list[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.minimum-keep-input-list[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.card-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2 / 3;overflow:hidden;padding:10px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.pokemon-card-img[_ngcontent-%COMP%]{width:90%;object-fit:cover;object-position:center;border-radius:10px;transition:transform .3s ease,opacity .3s ease;background-color:#222}.card-item[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{transform:scale(1.05)}.pokemon-card-img[_ngcontent-%COMP%]:not([src]), .pokemon-card-img[src=""][_ngcontent-%COMP%]{opacity:.5;background:linear-gradient(45deg,#333,#555,#333);background-size:200% 200%;animation:_ngcontent-%COMP%_loading-shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loading-shimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.card-item.no-quantity[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.9}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(0%) opacity(.8)}.card-item.no-quantity[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{color:#888}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]:hover   .count-display[_ngcontent-%COMP%]{color:#bbb}.card-info[_ngcontent-%COMP%]{text-align:center}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pack-badges[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.pack-badge[_ngcontent-%COMP%]{background:var(--header-gradient);color:#fff;padding:2px 6px;border-radius:10px;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.ownership-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.count-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #555;border-radius:4px;background-color:#444;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;transition:all .2s ease}.count-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#555;border-color:#666}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.count-btn.decrease[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;border-color:#dc3545}.count-btn.increase[_ngcontent-%COMP%]:hover{background-color:#28a745;border-color:#28a745}.count-display[_ngcontent-%COMP%]{min-width:32px;padding:4px 10px;border-radius:6px;border:1px dashed #666;background:rgba(51,51,51,.65);color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.count-display[_ngcontent-%COMP%]:hover, .count-display[_ngcontent-%COMP%]:focus-visible{border-color:#007bff;background:rgba(0,123,255,.2);outline:none}.count-input[_ngcontent-%COMP%]{width:56px;padding:4px 8px;border-radius:6px;border:1px solid #777;background:rgba(24,24,24,.95);color:#fff;font-size:14px;font-weight:600;text-align:center;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.minimum-keep-controls[_ngcontent-%COMP%]{margin-top:8px;width:100%;background:linear-gradient(135deg,rgba(30,30,40,.95) 0%,rgba(20,20,30,.95) 100%);border:1px solid rgba(100,100,120,.4);border-radius:8px;padding:8px 10px;display:flex;flex-direction:row;align-items:center;gap:8px;box-shadow:0 2px 6px #0000004d}.keep-icon[_ngcontent-%COMP%]{font-size:13px;opacity:.8;flex-shrink:0}.lock-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:16px;padding:0;margin:0 4px 0 0;display:flex;align-items:center;justify-content:center;flex-shrink:0;opacity:.8;transition:opacity .2s,transform .1s}.lock-toggle-btn[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.lock-toggle-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.minimum-keep-label[_ngcontent-%COMP%]{font-size:11px;color:#b8b8c8;font-weight:600;text-transform:uppercase;letter-spacing:.5px;flex-shrink:0}.minimum-keep-input[_ngcontent-%COMP%]{flex:1;padding:6px 10px;border-radius:6px;border:1px solid rgba(100,120,150,.5);background:rgba(40,40,50,.9);color:#fff;font-size:14px;font-weight:700;text-align:center;outline:none;transition:all .2s ease;box-shadow:inset 0 1px 3px #0006}.minimum-keep-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;background:rgba(45,45,60,1);box-shadow:0 0 0 2px #4a9eff33,inset 0 1px 3px #0006}.minimum-keep-input[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#788caab3;background:rgba(45,45,55,.95)}.minimum-keep-input[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;background:rgba(30,30,35,.7)}.count-input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 6px #007bff4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.pokemon-card-img.lazy-loading[_ngcontent-%COMP%]{opacity:.6;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.pokemon-card-img.lazy-loaded[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}.pokemon-card-img.lazy-error[_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 1200px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (max-width: 768px){.collection-container[_ngcontent-%COMP%]{padding:15px}.filters-panel[_ngcontent-%COMP%]{border-radius:10px;padding:12px}.filters-header[_ngcontent-%COMP%]{margin-bottom:8px}.filters-row[_ngcontent-%COMP%]{gap:10px}.filter-select.compact[_ngcontent-%COMP%]{width:100%}.filter-input[_ngcontent-%COMP%]{min-width:0}.rarity-row[_ngcontent-%COMP%], .types-row[_ngcontent-%COMP%]{flex-direction:column}.chips-scroll[_ngcontent-%COMP%]{width:100%}.ownership[_ngcontent-%COMP%]{width:100%;justify-content:space-between;display:flex}.collection-actions[_ngcontent-%COMP%]   .actions-left[_ngcontent-%COMP%], .filters-panel.collapsed[_ngcontent-%COMP%]{display:none}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}.card-list-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.card-list-image[_ngcontent-%COMP%]{width:80px;height:112px}.card-list-details[_ngcontent-%COMP%]{width:100%}.card-list-controls[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;align-items:center}.ownership-controls[_ngcontent-%COMP%]{gap:8px}.filters-section[_ngcontent-%COMP%]{padding:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-box[_ngcontent-%COMP%]{max-width:100%}.group-header[_ngcontent-%COMP%]{padding:10px 0}.group-title[_ngcontent-%COMP%]{font-size:1.3rem;padding-left:24px}.group-title[_ngcontent-%COMP%]:before{font-size:1rem}}@media (max-width: 540px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.card-list-item[_ngcontent-%COMP%]{padding:10px 12px}.card-list-name[_ngcontent-%COMP%]{font-size:14px}.card-list-meta[_ngcontent-%COMP%]{font-size:11px}.filters-row[_ngcontent-%COMP%]{margin-bottom:8px}.reset-btn[_ngcontent-%COMP%]{width:100%}.count-display[_ngcontent-%COMP%], .count-input[_ngcontent-%COMP%]{width:48px}.filters-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.filter-label[_ngcontent-%COMP%]{font-size:12px}.group-title[_ngcontent-%COMP%]{font-size:1.15rem}.group-title[_ngcontent-%COMP%]:before{font-size:.9rem}}.fab-stack[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:24px;display:flex;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}.fab[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:1px solid rgba(255,255,255,.18);background:var(--header-gradient);color:#fff;font-size:18px;cursor:pointer;box-shadow:0 10px 24px #070c1859;display:inline-flex;align-items:center;justify-content:center;transition:transform .14s ease,box-shadow .14s ease,border-color .14s ease,filter .14s ease}.fab[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 14px 28px #070c1873;filter:brightness(1.05)}.fab-stack-left[_ngcontent-%COMP%]{position:fixed;left:24px;bottom:24px;display:none;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{right:16px;bottom:16px;gap:8px}.fab[_ngcontent-%COMP%]{width:44px;height:44px}.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.fab-stack-left[_ngcontent-%COMP%]{display:flex;left:16px;bottom:16px}}.fab.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex!important}.fab-stack-left[_ngcontent-%COMP%]{display:flex!important}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px}.modal-content.card-modal[_ngcontent-%COMP%]{background:#2a2d3a;border-radius:12px;max-width:500px;max-height:90vh;width:100%;position:relative;overflow:hidden;box-shadow:0 20px 40px #00000080}.modal-close[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:rgba(0,0,0,.7);border:none;border-radius:50%;width:32px;height:32px;color:#fff;font-size:18px;cursor:pointer;z-index:10001;display:flex;align-items:center;justify-content:center;transition:background .2s ease}.modal-close[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.9)}.card-modal-image[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px 20px 10px}.modal-card-image[_ngcontent-%COMP%]{max-width:100%;height:auto;max-height:60vh;border-radius:8px;box-shadow:0 8px 16px #0000004d}.card-modal-info[_ngcontent-%COMP%]{padding:10px 20px 20px;text-align:center}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px;font-weight:600}.modal-pack-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}.modal-pack-badges[_ngcontent-%COMP%]   .pack-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 8px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content.card-modal[_ngcontent-%COMP%]{max-width:100%;max-height:95vh}.modal-card-image[_ngcontent-%COMP%]{max-height:70vh}.card-modal-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}'],changeDetection:0}),t})();function $$(t,n){1&t&&(g(0,"div",9),Qe(1,"div",10),g(2,"p"),C(3,"Calculating pack suggestions..."),m()())}function U$(t,n){1&t&&(g(0,"div",11)(1,"p"),C(2,"Please sign in to get personalized pack suggestions."),m()())}function B$(t,n){if(1&t&&(g(0,"option",19),C(1),m()),2&t){const e=n.$implicit;x("value",e),_(1),ot(e)}}function H$(t,n){if(1&t){const e=Me();g(0,"div",38),A("click",function(){const i=z(e).$implicit,s=S(2).$implicit;return G(S(2).onRarityClick(s,i))}),g(1,"span",39),C(2),m(),g(3,"span",40),C(4),m(),g(5,"span",41),C(6),m()()}if(2&t){const e=n.$implicit,r=S(4);Ae("complete",100===e.percentage),_(1),x("title",r.getRarityDisplayName(e.rarity)),_(1),Oe(" ",e.rarity," "),_(2),pr(" ",e.owned,"/",e.total," "),_(1),Ae("complete",100===e.percentage),_(1),Oe(" ",e.percentage.toFixed(0),"% ")}}function z$(t,n){if(1&t&&(g(0,"div",35)(1,"h5"),C(2,"Rarity Breakdown:"),m(),g(3,"div",36),H(4,H$,7,9,"div",37),m()()),2&t){const e=S().$implicit;_(4),x("ngForOf",e.rarityBreakdown)}}function G$(t,n){if(1&t&&(g(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"h4",24),C(5),m()(),g(6,"div",25)(7,"span",26),C(8),m(),g(9,"span",27),C(10),m()()(),g(11,"div",28)(12,"div",29)(13,"span",30),C(14,"New Card Chance"),m(),g(15,"span",31),C(16),m()(),g(17,"div",29)(18,"span",30),C(19,"Missing Cards"),m(),g(20,"span",32),C(21),m()(),g(22,"div",29)(23,"span",30),C(24,"Collection"),m(),g(25,"span",33),C(26),m()()(),H(27,z$,5,1,"div",34),m()()),2&t){const e=n.$implicit,r=n.index;_(5),pr("",r+1,". ",e.packName,""),_(3),ot(e.setCode),_(2),ot(e.setName),_(6),Oe("",e.newCardChance.toFixed(1),"%"),_(5),pr("",e.missingCards,"/",e.totalCards,""),_(5),Oe("",e.percentage.toFixed(1),"% complete"),_(1),x("ngIf",e.rarityBreakdown.length>0)}}function q$(t,n){if(1&t){const e=Me();g(0,"div",12)(1,"div",13)(2,"h3"),C(3),m(),g(4,"select",14),A("ngModelChange",function(o){return z(e),G(S().selectedSeriesFilter=o)})("change",function(){return z(e),G(S().onSeriesFilterChange())}),g(5,"option",15),C(6,"Top 3 Suggestions"),m(),g(7,"optgroup",16),H(8,B$,2,2,"option",17),m()()(),H(9,G$,28,9,"div",18),m()}if(2&t){const e=S();_(3),Oe("Recommended Packs (",e.packSuggestions.length," available)"),_(1),x("ngModel",e.selectedSeriesFilter),_(4),x("ngForOf",e.seriesList),_(1),x("ngForOf",e.packSuggestions)}}function W$(t,n){1&t&&(g(0,"div",42)(1,"p"),C(2,"\u{1f389} Congratulations! You have completed your collection according to the selected algorithm."),m(),g(3,"p"),C(4,"Try a different algorithm to find more cards to collect."),m()())}function K$(t,n){1&t&&(g(0,"span"),C(1,"\u{1f6ab}"),m())}function J$(t,n){1&t&&(g(0,"span"),C(1,"\u{1f4e6}"),m())}function Y$(t,n){1&t&&(g(0,"span"),C(1,"\u2b50"),m())}function Q$(t,n){1&t&&(g(0,"span"),C(1,"\u{1f48e}"),m())}function Z$(t,n){1&t&&(g(0,"span"),C(1,"\u{1f451}"),m())}const X$=function(t,n){return{"fab-excluding":t,"fab-including":n}},e3=function(t,n,e){return{"fab-tradable":t,"fab-common":n,"fab-all":e}};let t3=(()=>{const n=class{constructor(r,o,i,s,a){this.pokemonDataService=r,this.dataManager=o,this.supabaseService=i,this.cdr=s,this.router=a,this.cards=[],this.sets=[],this.rarityMapping={},this.currentUser=null,this.ownedCards={},this.selectedAlgorithm="new-card-chance",this.excludeSpecialPacks=!0,this.rarityFilterMode="tradable",this.selectedSeriesFilter="top-3",this.seriesList=[],this.packSuggestions=[],this.isLoading=!0}ngOnInit(){this.loadData()}onRarityClick(r,o){const s=this.sets.find(a=>a.code===r.setCode)?.series||"all";this.router.navigate(["/collection"],{queryParams:{series:s,set:r.setCode,pack:r.packName,rarity:o.rarity}})}loadData(){var r=this;return b(function*(){r.isLoading=!0;try{r.currentUser=yield r.supabaseService.getCurrentUser();const o=yield r.pokemonDataService.loadAllData().toPromise();o&&(r.cards=o.cards,r.sets=o.sets,r.rarityMapping=o.rarities),r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id)),r.seriesList=Array.from(new Set(r.sets.map(i=>i.series))).sort(),r.calculateSuggestions()}catch(o){console.error("Error loading data:",o)}finally{r.isLoading=!1,r.cdr.markForCheck()}})()}onExcludeSpecialPacksChange(){this.calculateSuggestions(),this.cdr.markForCheck()}onRarityFilterChange(){this.rarityFilterMode="tradable"===this.rarityFilterMode?"common":"common"===this.rarityFilterMode?"all":"tradable",this.calculateSuggestions(),this.cdr.markForCheck()}onSeriesFilterChange(){this.calculateSuggestions(),this.cdr.markForCheck()}calculateSuggestions(){if(!this.cards.length||!this.sets.length)return;const r=[],o="top-3"===this.selectedSeriesFilter?this.sets:this.sets.filter(a=>a.series===this.selectedSeriesFilter),i=new Set;o.forEach(a=>{a.packs?.forEach(l=>{this.excludeSpecialPacks&&this.isSpecialPack(l)||i.add(l)})}),i.forEach(a=>{const l=this.calculatePackSuggestion(a);l&&r.push(l)});const s=r.sort((a,l)=>l.newCardChance-a.newCardChance);this.packSuggestions="top-3"===this.selectedSeriesFilter?s.slice(0,3):s}calculatePackSuggestion(r){let o=this.cards.filter(f=>f.packs&&f.packs.includes(r));if(0===o.length)return null;const i=this.sets.find(f=>f.packs&&f.packs.includes(r));if(!i)return null;if("tradable"===this.rarityFilterMode){const f=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606"];o=o.filter(p=>f.includes(p.rarity))}else if("common"===this.rarityFilterMode){const f=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606"];o=o.filter(p=>f.includes(p.rarity))}const s=o,l=s.filter(f=>0===this.getOwnedCount(f)).length,c=s.length,u=c>0?(c-l)/c*100:0,d=c>0?l/c*100:0,h=this.calculateRarityBreakdown(s);return{setCode:i.code,setName:i.name,packName:r,missingCards:l,totalCards:c,percentage:u,newCardChance:d,rarityBreakdown:h}}calculateRarityBreakdown(r){const o=[...new Set(r.map(s=>s.rarity))],i=["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2606\u2606\u2606","\u{1f451}","\u2735","\u2735\u2735"];return o.sort((s,a)=>{const l=i.indexOf(s),c=i.indexOf(a);return(-1===l?999:l)-(-1===c?999:c)}),o.map(s=>{const a=r.filter(d=>d.rarity===s),l=a.filter(d=>this.getOwnedCount(d)>0).length,c=a.length;return{rarity:s,owned:l,total:c,percentage:c>0?l/c*100:0}})}getOwnedCount(r){return this.currentUser&&this.ownedCards[this.getCardId(r)]||0}loadOwnedCardsForUser(r){var o=this;return b(function*(){try{const{quantities:i}=yield o.supabaseService.syncUserCollection(r);o.ownedCards=i}catch(i){console.error("Error loading owned cards:",i),o.ownedCards={}}})()}getCardId(r){return`${r.set}-${r.number}`}isSpecialPack(r){return[/Deluxe/i,/vol/i].some(i=>i.test(r))}getRarityDisplayName(r){for(const[o,i]of Object.entries(this.rarityMapping))if(i.split(" - ")[0]===r)return i;return r}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(tu),N(yD),N(is),N(Ti),N(xt))},n.\u0275cmp=zr({type:n,selectors:[["app-suggestion"]],decls:13,vars:20,consts:[[1,"suggestion-container"],[1,"filter-section"],["class","loading-state",4,"ngIf"],["class","no-user-state",4,"ngIf"],["class","suggestions-list",4,"ngIf"],["class","no-suggestions",4,"ngIf"],[1,"fab","fab-special",3,"ngClass","title","click"],[4,"ngIf"],[1,"fab","fab-rarity",3,"ngClass","title","click"],[1,"loading-state"],[1,"spinner"],[1,"no-user-state"],[1,"suggestions-list"],[1,"suggestions-header-row"],[1,"set-filter",3,"ngModel","ngModelChange","change"],["value","top-3"],["label","Series"],[3,"value",4,"ngFor","ngForOf"],["class","suggestion-item",4,"ngFor","ngForOf"],[3,"value"],[1,"suggestion-item"],[1,"suggestion-content"],[1,"suggestion-header"],[1,"header-left"],[1,"pack-name"],[1,"header-right"],[1,"set-code"],[1,"set-name"],[1,"suggestion-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","chance"],[1,"stat-value","missing"],[1,"stat-value","percentage"],["class","rarity-breakdown",4,"ngIf"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-item clickable","tabindex","0",3,"complete","click",4,"ngFor","ngForOf"],["tabindex","0",1,"rarity-item","clickable",3,"click"],[1,"rarity-symbol",3,"title"],[1,"rarity-count"],[1,"rarity-percentage"],[1,"no-suggestions"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"div",1),H(2,$$,4,0,"div",2),H(3,U$,3,0,"div",3),H(4,q$,10,4,"div",4),m(),H(5,W$,5,0,"div",5),g(6,"button",6),A("click",function(){return i.excludeSpecialPacks=!i.excludeSpecialPacks,i.onExcludeSpecialPacksChange()}),H(7,K$,2,0,"span",7),H(8,J$,2,0,"span",7),m(),g(9,"button",8),A("click",function(){return i.onRarityFilterChange()}),H(10,Y$,2,0,"span",7),H(11,Q$,2,0,"span",7),H(12,Z$,2,0,"span",7),m()()),2&o&&(_(2),x("ngIf",i.isLoading),_(1),x("ngIf",!i.isLoading&&!i.currentUser),_(1),x("ngIf",!i.isLoading&&i.currentUser&&i.packSuggestions.length>0),_(1),x("ngIf",!i.isLoading&&i.currentUser&&0===i.packSuggestions.length),_(1),x("ngClass",Ei(13,X$,i.excludeSpecialPacks,!i.excludeSpecialPacks))("title",i.excludeSpecialPacks?"Excluding Special Packs":"Including Special Packs"),_(1),x("ngIf",i.excludeSpecialPacks),_(1),x("ngIf",!i.excludeSpecialPacks),_(1),x("ngClass",dh(16,e3,"tradable"===i.rarityFilterMode,"common"===i.rarityFilterMode,"all"===i.rarityFilterMode))("title","tradable"===i.rarityFilterMode?"Tradable cards: \u25ca-\u25ca\u25ca\u25ca\u25ca, \u2606, \u2606\u2606":"common"===i.rarityFilterMode?"Common only: \u25ca-\u25ca\u25ca\u25ca\u25ca, \u2606":"All rarities"),_(1),x("ngIf","tradable"===i.rarityFilterMode),_(1),x("ngIf","common"===i.rarityFilterMode),_(1),x("ngIf","all"===i.rarityFilterMode))},dependencies:[oc,ic,Ii,Mc,Tc,Li,ia,Fi],styles:['.suggestion-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:var(--text)}.suggestion-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:8px;font-size:2.2rem}.suggestion-header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.1rem;margin:0}.filter-section[_ngcontent-%COMP%]{background:var(--surface);border-radius:12px;padding:15px;margin-bottom:20px;border:1px solid var(--border)}.filter-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;flex-wrap:wrap}.checkbox-option.compact[_ngcontent-%COMP%]{padding:6px 8px;gap:8px}.checkbox-option.compact[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{transform:scale(.9)}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.9rem}.checkbox-option.compact[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.set-filter[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;background:var(--surface) url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%236c757d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>\') no-repeat right 8px center;border:1px solid var(--border);border-radius:8px;padding:8px 32px 8px 12px;font-size:.9rem;color:var(--text);cursor:pointer}.set-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px #5ba8ff26}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:15px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.radio-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-label[_ngcontent-%COMP%]{color:var(--text)}.radio-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.radio-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.radio-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.radio-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.filter-options[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid var(--border)}.checkbox-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:12px;border:1px solid var(--border);border-radius:8px;background:var(--surface);cursor:pointer;transition:all .2s ease}.checkbox-option[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:rgba(255,255,255,.03)}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0;flex-shrink:0}.checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkbox-label[_ngcontent-%COMP%]{color:var(--text)}.checkbox-option[_ngcontent-%COMP%]:has(input:checked){border-color:var(--accent);background:rgba(91,168,255,.08)}.checkbox-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.checkbox-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text)}.checkbox-label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;line-height:1.3}.loading-state[_ngcontent-%COMP%], .no-user-state[_ngcontent-%COMP%], .no-suggestions[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background:var(--surface);border:1px solid var(--border);border-radius:12px;margin:20px 0}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.08);border-top:4px solid var(--accent);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.suggestions-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text);margin-bottom:20px;font-size:1.4rem}.suggestions-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}.suggestion-item[_ngcontent-%COMP%]{display:block;background:rgb(14 21 37 / 85%);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:20px;transition:all .2s ease;box-shadow:0 2px 6px #00000040}.suggestion-content[_ngcontent-%COMP%]{width:100%}.suggestion-header[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;text-align:right}.pack-name[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--text);margin:0;font-weight:1000;text-align:left}.set-code[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:2px 8px;border-radius:4px;font-size:.8rem;font-weight:500}.set-name[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem}.suggestion-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:15px}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-muted);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.stat-value.score[_ngcontent-%COMP%]{color:#3498db}.stat-value.chance[_ngcontent-%COMP%]{color:#e74c3c}.stat-value.missing[_ngcontent-%COMP%]{color:#f39c12}.stat-value.percentage[_ngcontent-%COMP%]{color:#27ae60}.rarity-breakdown[_ngcontent-%COMP%]{margin-top:15px;padding-top:15px;border-top:1px solid var(--border)}.rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 10px;color:var(--text);font-size:.9rem;font-weight:600}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px}.rarity-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:8px;background:rgba(255,255,255,.03);border-radius:6px;border:1px solid var(--border);gap:4px}.rarity-item.complete[_ngcontent-%COMP%]{background:rgba(39,174,96,.15);border-color:#27ae60}.rarity-item.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:transform .15s ease,box-shadow .15s ease}.rarity-item.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014;transform:translateY(-1px)}.rarity-symbol[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--text)}.rarity-count[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);font-weight:500}.rarity-percentage[_ngcontent-%COMP%]{font-size:.75rem;color:#f39c12;font-weight:600}.rarity-percentage.complete[_ngcontent-%COMP%]{color:#27ae60}.exclude-toggle-fixed[_ngcontent-%COMP%]{position:fixed;top:16px;right:16px;z-index:1500;background:var(--surface);border-color:var(--border);box-shadow:0 4px 12px #0003}@media (max-width: 768px){.exclude-toggle-fixed[_ngcontent-%COMP%]{top:12px;right:12px;transform:scale(.95)}}@media (max-width: 768px){.suggestion-container[_ngcontent-%COMP%]{padding:15px}.suggestion-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.header-left[_ngcontent-%COMP%]{width:100%}.header-right[_ngcontent-%COMP%]{width:100%;text-align:left}.set-name[_ngcontent-%COMP%]{text-align:left;margin-left:0;width:100%}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.algorithm-selector[_ngcontent-%COMP%]{gap:8px}.radio-option[_ngcontent-%COMP%]{padding:12px}.filter-toolbar[_ngcontent-%COMP%]{justify-content:space-between}.rarity-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:6px}.rarity-item[_ngcontent-%COMP%]{padding:6px}}@media (max-width: 480px){.suggestion-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.suggestion-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.pack-name[_ngcontent-%COMP%]{font-size:1.1rem}}.fab[_ngcontent-%COMP%]{position:fixed;right:20px;width:56px;height:56px;border-radius:50%;color:#fff;border:none;font-size:1.5rem;cursor:pointer;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;z-index:1000;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.fab-special[_ngcontent-%COMP%]{bottom:20px}.fab-rarity[_ngcontent-%COMP%]{bottom:90px}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 16px #0006}.fab.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c 0%,#c0392b 100%)}.fab-tradable[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12 0%,#e67e22 100%)}.fab-common[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db 0%,#2980b9 100%)}.fab-all[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6 0%,#8e44ad 100%)}.fab-excluding[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c 0%,#c0392b 100%)}.fab-including[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60 0%,#229954 100%)}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:2000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:var(--surface-strong);color:var(--text);border:1px solid var(--border);border-radius:12px;max-width:800px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0006}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text);font-size:1.5rem}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:1.8rem;color:#7f8c8d;cursor:pointer;padding:0;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.close-button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.06);color:var(--text)}.modal-body[_ngcontent-%COMP%]{padding:24px}.modal-filter[_ngcontent-%COMP%]{margin-top:12px}.algorithm-detail[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:20px;border-bottom:1px solid var(--border)}.algorithm-detail[_ngcontent-%COMP%]:last-child, .scoring-detail[_ngcontent-%COMP%]:last-child, .filter-detail[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.algorithm-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1.2rem}.algorithm-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text-muted);line-height:1.6}.algorithm-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:8px 0 0;padding-left:20px;color:#495057}.algorithm-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .scoring-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .filter-detail[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;line-height:1.5}.rarity-points[_ngcontent-%COMP%]{background:rgba(255,255,255,.05);padding:16px;border-radius:8px;margin-top:12px}.rarity-points[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--text);font-size:1rem}.points-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px}.points-grid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--surface);padding:6px 10px;border-radius:4px;font-size:.85rem;color:var(--text);border:1px solid var(--border)}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end}.modal-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:10px 20px;border-radius:6px;font-size:1rem;cursor:pointer;transition:background .2s ease}.modal-button[_ngcontent-%COMP%]:hover{filter:brightness(.9)}.algorithm-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{max-height:95vh}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:16px}.points-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fab[_ngcontent-%COMP%]{bottom:16px;right:16px;width:48px;height:48px;font-size:1.3rem}}'],changeDetection:0}),t})();function n3(t,n){1&t&&(g(0,"span"),C(1,"No sets selected"),m())}function r3(t,n){1&t&&(g(0,"span"),C(1,"(Multiple select)"),m())}function o3(t,n){if(1&t){const e=Me();g(0,"button",39),A("click",function(){const i=z(e).$implicit;return G(S(2).toggleLFSet(i))}),g(1,"span",40),C(2),m(),g(3,"span"),C(4),m()()}if(2&t){const e=n.$implicit,r=S(2);Ae("selected",r.isLFSetSelected(e)),_(2),ot(r.isLFSetSelected(e)?"\u2714":""),_(2),pr("",e," \u2013 ",r.getSetName(e),"")}}function i3(t,n){if(1&t){const e=Me();g(0,"div",34)(1,"div",35)(2,"button",36),A("click",function(){return z(e),G(S().clearLFsets())}),C(3,"Clear"),m(),g(4,"button",36),A("click",function(){return z(e),G(S().selectAllLFsets())}),C(5,"All"),m()(),g(6,"div",37),H(7,o3,5,5,"button",38),m()()}if(2&t){const e=S();_(7),x("ngForOf",e.availableTradeSets)}}function s3(t,n){1&t&&(g(0,"span"),C(1,"No sets selected"),m())}function a3(t,n){1&t&&(g(0,"span"),C(1,"(Multiple select)"),m())}function l3(t,n){if(1&t){const e=Me();g(0,"button",39),A("click",function(){const i=z(e).$implicit;return G(S(2).toggleFTSet(i))}),g(1,"span",40),C(2),m(),g(3,"span"),C(4),m()()}if(2&t){const e=n.$implicit,r=S(2);Ae("selected",r.isFTSetSelected(e)),_(2),ot(r.isFTSetSelected(e)?"\u2714":""),_(2),pr("",e," \u2013 ",r.getSetName(e),"")}}function c3(t,n){if(1&t){const e=Me();g(0,"div",34)(1,"div",35)(2,"button",36),A("click",function(){return z(e),G(S().clearFTsets())}),C(3,"Clear"),m(),g(4,"button",36),A("click",function(){return z(e),G(S().selectAllFTsets())}),C(5,"All"),m()(),g(6,"div",37),H(7,l3,5,5,"button",38),m()()}if(2&t){const e=S();_(7),x("ngForOf",e.availableTradeSets)}}function u3(t,n){if(1&t){const e=Me();g(0,"button",41),A("click",function(){const i=z(e).$implicit;return G(S().toggleTradeRarity(i.symbol))}),C(1),m()}if(2&t){const e=n.$implicit;Ae("active",S().isTradeRaritySelected(e.symbol)),x("title",e.displayName),_(1),Oe(" ",e.symbol," ")}}function d3(t,n){if(1&t){const e=Me();g(0,"div",42)(1,"label",43),C(2,"Minimum Keep Count (>)"),m(),g(3,"input",44),A("ngModelChange",function(o){return z(e),G(S().overrideMinKeepValue=o)}),m()()}if(2&t){const e=S();_(3),x("ngModel",e.overrideMinKeepValue)}}function h3(t,n){1&t&&(g(0,"div",45),C(1,"\u26a0\ufe0f For discord, please choose only 1 rarity."),m())}function f3(t,n){1&t&&(g(0,"div",45),C(1,"\u26a0\ufe0f For foil trade, please choose only 1 rarity. It will ignore the pack selection."),m())}function p3(t,n){if(1&t){const e=Me();g(0,"textarea",46),A("ngModelChange",function(o){return z(e),G(S().generatedText=o)}),m()}2&t&&x("ngModel",S().generatedText)}function g3(t,n){1&t&&(g(0,"div",47),C(1,' Click "Generate" to create trade text '),m())}const sS=function(t,n){return{"fa-chevron-down":t,"fa-chevron-up":n}};let m3=(()=>{const n=class{constructor(r,o,i){this.supabaseService=r,this.pokemonDataService=o,this.rarityService=i,this.currentUser=null,this.cards=[],this.sets=[],this.ownedCards={},this.cardMinimumKeepCount={},this.cardAllowTrade={},this.selectedLFsets=[],this.selectedFTsets=[],this.availableTradeSets=[],this.selectedTradeRarities=[],this.outputFormat="details",this.tradeFriendCode="",this.tradeTemplateText="Please ping me if there is any possible trades. \nENGLISH cards only please.",this.excludePromo=!0,this.excludeDeluxe=!0,this.overrideMinKeepEnabled=!1,this.overrideMinKeepValue=3,this.lfSetDropdownOpen=!1,this.ftSetDropdownOpen=!1,this.generatedText="",this.loading=!0}ngOnInit(){var r=this;return b(function*(){yield r.loadData()})()}loadData(){var r=this;return b(function*(){r.loading=!0;try{if(r.currentUser=yield r.supabaseService.getCurrentUser(),r.currentUser){r.tradeFriendCode=r.currentUser.friend_code||"";const{quantities:i,minimumKeepCounts:s,allowTrade:a}=yield r.supabaseService.syncUserCollection(r.currentUser.id);r.ownedCards=i,r.cardMinimumKeepCount=s,r.cardAllowTrade=a}const o=yield r.pokemonDataService.loadAllData().toPromise();o&&(r.cards=o.cards,r.sets=o.sets),r.updateAvailableTradeSets(),r.selectedLFsets=[...r.availableTradeSets],r.selectedFTsets=[...r.availableTradeSets]}catch(o){console.error("Error loading data:",o)}r.loading=!1})()}updateAvailableTradeSets(){let r=Array.from(new Set(this.cards.map(o=>o.set))).sort();this.excludePromo&&(r=r.filter(o=>!o.startsWith("P-"))),this.excludeDeluxe&&(r=r.filter(o=>"A4B"!==o)),this.availableTradeSets=r,this.selectedLFsets=this.selectedLFsets.filter(o=>this.availableTradeSets.includes(o)),this.selectedFTsets=this.selectedFTsets.filter(o=>this.availableTradeSets.includes(o))}isSpecialSet(r){return"PROMO"===r||r.startsWith("A")}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.name:r}getSetShortName(r){const o=this.sets.find(i=>i.code===r);return o?o.shortName:r}getAvailableTradeRaritySymbols(){return this.rarityService.getUnifiedRarities()}isTradeRaritySelected(r){return this.selectedTradeRarities.includes(r)}toggleTradeRarity(r){const o=this.selectedTradeRarities.indexOf(r);o>-1?this.selectedTradeRarities.splice(o,1):this.selectedTradeRarities.push(r)}clearTradeRarities(){this.selectedTradeRarities=[]}isLFSetSelected(r){return this.selectedLFsets.includes(r)}toggleLFSet(r){const o=this.selectedLFsets.indexOf(r);o>-1?this.selectedLFsets.splice(o,1):this.selectedLFsets.push(r)}selectAllLFsets(){this.selectedLFsets=[...this.availableTradeSets]}clearLFsets(){this.selectedLFsets=[]}isFTSetSelected(r){return this.selectedFTsets.includes(r)}toggleFTSet(r){const o=this.selectedFTsets.indexOf(r);o>-1?this.selectedFTsets.splice(o,1):this.selectedFTsets.push(r)}selectAllFTsets(){this.selectedFTsets=[...this.availableTradeSets]}clearFTsets(){this.selectedFTsets=[]}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}getCardMinimumKeepCount(r){return this.cardMinimumKeepCount[this.getCardId(r)]||0}isCardAllowTrade(r){const o=this.getCardId(r);return!1!==this.cardAllowTrade[o]}generateTradeText(){const r=this.selectedTradeRarities.length>0?this.selectedTradeRarities:[],o="foil-trade"===this.outputFormat,i=this.cards.filter(a=>{if(o){if(!a.isFoil)return!1}else if(this.selectedLFsets.length>0&&!this.selectedLFsets.includes(a.set))return!1;const l=a.rarity,c=l?this.rarityService.getSymbol(l):"";return!(r.length>0&&(!c||!r.includes(c)))&&0===this.getOwnedCount(a)}),s=this.cards.filter(a=>{if(!o&&this.selectedFTsets.length>0&&!this.selectedFTsets.includes(a.set))return!1;const l=a.rarity,c=l?this.rarityService.getSymbol(l):"";return!(r.length>0&&(!c||!r.includes(c)))&&this.getOwnedCount(a)>(this.overrideMinKeepEnabled?this.overrideMinKeepValue:this.getCardMinimumKeepCount(a))});this.generatedText=this.formatTradeText(i,s)}formatTradeText(r,o){let i="";return i+="foil-trade"===this.outputFormat?this.formatFoilTrade(r,o):"discord"===this.outputFormat?this.formatDiscord(r,o):this.formatDetails(r,o),i+="\n",this.tradeTemplateText&&(i+=this.tradeTemplateText+"\n\n"),this.currentUser?.username&&(i+=`IGN: ${this.currentUser.username}\n`),this.tradeFriendCode&&(i+=`Friend code: ${this.tradeFriendCode}`),i}formatFoilTrade(r,o){let i="**Looking For (Foil Only)**\n";if(r.length>0){const s=this.groupBySet(r);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(d=>`${d.label.eng} (foil)`).join(", ")}\n`}else i+="None\n";if(i+="\n**For Trade**\n",o.length>0){const s=this.groupBySet(o);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(d=>{const h=d.label.eng;return d.isFoil?`${h} (foil)`:h}).join(", ")}\n`}else i+="None\n";return i}formatDiscord(r,o){let i="**Looking For**\n";if(r.length>0){const s=this.groupBySet(r);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(u=>u.label.eng).join(", ")}\n`}else i+="None\n";if(i+="\n**For Trade**\n",o.length>0){const s=this.groupBySet(o);for(const[a,l]of Object.entries(s))i+=`[${this.getSetShortName(a)}] ${l.map(u=>u.label.eng).join(", ")}\n`}else i+="None\n";return i}formatDetails(r,o){let i="**Looking For**\n";if(r.length>0){const s=this.groupBySet(r);for(const[a,l]of Object.entries(s)){const c=this.getSetShortName(a);i+=`\n[${c}]\n`,l.forEach(u=>{const d=this.rarityService.getSymbol(u.rarity);i+=`${d} ${a}-${u.number} - ${u.label.eng}\n`})}}else i+="None\n";if(i+="\n**For Trade**\n",o.length>0){const s=this.groupBySet(o);for(const[a,l]of Object.entries(s)){const c=this.getSetShortName(a);i+=`\n[${c}]\n`,l.forEach(u=>{const d=this.rarityService.getSymbol(u.rarity);i+=`${d} ${a}-${u.number} - ${u.label.eng}\n`})}}else i+="None\n";return i}groupBySet(r){return r.reduce((o,i)=>(o[i.set]||(o[i.set]=[]),o[i.set].push(i),o),{})}copyToClipboard(){navigator.clipboard.writeText(this.generatedText).then(()=>{}).catch(r=>{console.error("Failed to copy:",r),alert("Failed to copy to clipboard")})}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(is),N(tu),N(nS))},n.\u0275cmp=zr({type:n,selectors:[["app-trade-gen"]],decls:80,vars:30,consts:[[1,"trade-gen-container"],[1,"trade-gen-content"],[1,"config-panel"],[1,"config-section"],[1,"section-label"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"multiselect-dropdown"],["type","button",1,"dropdown-trigger",3,"click"],[4,"ngIf"],[1,"fa",3,"ngClass"],["class","dropdown-menu",4,"ngIf"],[1,"rarity-chips"],["type","button",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelChange"],["class","override-input-group",4,"ngIf"],["for","friend-code",1,"section-label"],["type","text","id","friend-code","placeholder","Friend code from your profile",1,"text-input",3,"ngModel","ngModelChange"],["for","template-text",1,"section-label"],["id","template-text","rows","3","placeholder","Add an extra note...",1,"textarea-input",3,"ngModel","ngModelChange"],[1,"select-input",3,"ngModel","ngModelChange"],["value","details"],["value","discord"],["value","foil-trade"],["class","warning-text",4,"ngIf"],["type","button",1,"btn-primary",3,"disabled","click"],[1,"output-panel"],[1,"output-header"],["type","button",1,"btn-copy",3,"disabled","click"],[1,"output-content"],["class","output-text",3,"ngModel","ngModelChange",4,"ngIf"],["class","output-placeholder",4,"ngIf"],[1,"dropdown-menu"],[1,"dropdown-actions"],["type","button",1,"btn-small",3,"click"],[1,"dropdown-options"],["type","button","class","dropdown-option",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"dropdown-option",3,"click"],[1,"checkmark"],["type","button",1,"chip",3,"title","click"],[1,"override-input-group"],["for","override-min-keep",1,"section-label"],["type","number","id","override-min-keep","min","0","placeholder","0",1,"text-input",3,"ngModel","ngModelChange"],[1,"warning-text"],[1,"output-text",3,"ngModel","ngModelChange"],[1,"output-placeholder"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),C(4,"Trade Generator"),m(),g(5,"div",3)(6,"label",4),C(7,"Pack Filters"),m(),g(8,"div",5)(9,"label",6)(10,"input",7),A("ngModelChange",function(a){return i.excludePromo=a})("change",function(){return i.updateAvailableTradeSets()}),m(),g(11,"span"),C(12,"Exclude Promo"),m()(),g(13,"label",6)(14,"input",7),A("ngModelChange",function(a){return i.excludeDeluxe=a})("change",function(){return i.updateAvailableTradeSets()}),m(),g(15,"span"),C(16,"Exclude Deluxe Pack"),m()()()(),g(17,"div",3)(18,"label",4),C(19,"Include sets (Looking For)"),m(),g(20,"div",8)(21,"button",9),A("click",function(){return i.lfSetDropdownOpen=!i.lfSetDropdownOpen}),H(22,n3,2,0,"span",10),H(23,r3,2,0,"span",10),Qe(24,"i",11),m(),H(25,i3,8,1,"div",12),m()(),g(26,"div",3)(27,"label",4),C(28,"Include sets (For Trade)"),m(),g(29,"div",8)(30,"button",9),A("click",function(){return i.ftSetDropdownOpen=!i.ftSetDropdownOpen}),H(31,s3,2,0,"span",10),H(32,a3,2,0,"span",10),Qe(33,"i",11),m(),H(34,c3,8,1,"div",12),m()(),g(35,"div",3)(36,"label",4),C(37,"Include rarities:"),m(),g(38,"div",13)(39,"button",14),A("click",function(){return i.clearTradeRarities()}),C(40,"ALL"),m(),H(41,u3,2,4,"button",15),m()(),g(42,"div",3)(43,"label",6)(44,"input",16),A("ngModelChange",function(a){return i.overrideMinKeepEnabled=a}),m(),g(45,"span"),C(46,"Override minimum keep count"),m()(),H(47,d3,4,1,"div",17),m(),g(48,"div",3)(49,"label",18),C(50,"Friend Code"),m(),g(51,"input",19),A("ngModelChange",function(a){return i.tradeFriendCode=a}),m()(),g(52,"div",3)(53,"label",20),C(54,"Template text:"),m(),g(55,"textarea",21),A("ngModelChange",function(a){return i.tradeTemplateText=a}),m()(),g(56,"div",3)(57,"label",4),C(58,"Output Format"),m(),g(59,"select",22),A("ngModelChange",function(a){return i.outputFormat=a}),g(60,"option",23),C(61,"Details Trade"),m(),g(62,"option",24),C(63,"Discord Trade"),m(),g(64,"option",25),C(65,"Foil Trade"),m()(),H(66,h3,2,0,"div",26),H(67,f3,2,0,"div",26),m(),g(68,"div",3)(69,"button",27),A("click",function(){return i.generateTradeText()}),C(70," Generate "),m()()(),g(71,"div",28)(72,"div",29)(73,"h3"),C(74,"Generated Trade Text"),m(),g(75,"button",30),A("click",function(){return i.copyToClipboard()}),C(76," Copy to clipboard "),m()(),g(77,"div",31),H(78,p3,1,1,"textarea",32),H(79,g3,2,0,"div",33),m()()()()),2&o&&(_(10),x("ngModel",i.excludePromo),_(4),x("ngModel",i.excludeDeluxe),_(8),x("ngIf",0===i.selectedLFsets.length),_(1),x("ngIf",i.selectedLFsets.length>0),_(1),x("ngClass",Ei(24,sS,!i.lfSetDropdownOpen,i.lfSetDropdownOpen)),_(1),x("ngIf",i.lfSetDropdownOpen),_(6),x("ngIf",0===i.selectedFTsets.length),_(1),x("ngIf",i.selectedFTsets.length>0),_(1),x("ngClass",Ei(27,sS,!i.ftSetDropdownOpen,i.ftSetDropdownOpen)),_(1),x("ngIf",i.ftSetDropdownOpen),_(5),Ae("active",0===i.selectedTradeRarities.length),_(2),x("ngForOf",i.getAvailableTradeRaritySymbols()),_(3),x("ngModel",i.overrideMinKeepEnabled),_(3),x("ngIf",i.overrideMinKeepEnabled),_(4),x("ngModel",i.tradeFriendCode),_(4),x("ngModel",i.tradeTemplateText),_(4),x("ngModel",i.outputFormat),_(7),x("ngIf","discord"==i.outputFormat),_(1),x("ngIf","foil-trade"==i.outputFormat),_(2),x("disabled",i.loading),_(6),x("disabled",!i.generatedText),_(3),x("ngIf",i.generatedText),_(1),x("ngIf",!i.generatedText))},dependencies:[oc,ic,Ii,Mc,Tc,Pi,xc,pc,Li,ia,Oc,Fi],styles:[".trade-gen-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;min-height:100vh;color:#fff}.trade-gen-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:400px 1fr;gap:20px;height:calc(100vh - 100px)}.config-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,30,40,.95) 0%,rgba(20,20,30,.95) 100%);border:1px solid rgba(100,100,120,.4);border-radius:12px;padding:24px;overflow-y:auto;box-shadow:0 4px 12px #0000004d}.config-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 24px;font-size:24px;font-weight:600;color:#fff}.config-section[_ngcontent-%COMP%]{margin-bottom:20px}.section-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#b8b8c8;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#ddd;cursor:pointer;-webkit-user-select:none;user-select:none}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#4a9eff}.checkbox-label[_ngcontent-%COMP%]:hover{color:#fff}.override-input-group[_ngcontent-%COMP%]{margin-top:12px}.multiselect-dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-trigger[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:all .2s ease}.dropdown-trigger[_ngcontent-%COMP%]:hover{border-color:#788caab3;background:rgba(45,45,55,.95)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 4px);background:#1e2533;border:1px solid rgba(255,255,255,.18);border-radius:10px;padding:8px;box-shadow:0 6px 16px #00000073;z-index:50;max-height:300px;overflow-y:auto}.dropdown-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,.1)}.btn-small[_ngcontent-%COMP%]{padding:4px 12px;background:rgba(60,60,70,.8);border:1px solid rgba(100,120,150,.4);border-radius:6px;color:#ddd;font-size:12px;cursor:pointer;transition:all .2s ease}.btn-small[_ngcontent-%COMP%]:hover{background:rgba(70,70,80,.9);border-color:#788caa99}.dropdown-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.dropdown-option[_ngcontent-%COMP%]{width:100%;padding:8px 12px;background:transparent;border:none;border-radius:6px;color:#ddd;font-size:13px;text-align:left;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s ease}.dropdown-option[_ngcontent-%COMP%]:hover{background:rgba(60,60,70,.6)}.dropdown-option.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);color:#fff}.checkmark[_ngcontent-%COMP%]{width:20px;font-size:12px;font-weight:700}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(100,120,150,.4);border-radius:6px;background:rgba(40,40,50,.8);color:#cfd6e4;font-size:13px;cursor:pointer;transition:all .2s ease}.chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7056B1,#6C80EA);border-color:#7056b1;color:#fff}.warning-text[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#fa0;display:flex;align-items:center;gap:4px}.text-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;outline:none;transition:all .2s ease}.text-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.textarea-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;font-family:inherit;resize:vertical;outline:none;transition:all .2s ease}.textarea-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.select-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;background:rgba(40,40,50,.9);border:1px solid rgba(100,120,150,.5);border-radius:8px;color:#fff;font-size:14px;cursor:pointer;outline:none;transition:all .2s ease}.select-input[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:12px 20px;background:linear-gradient(135deg,#7056B1,#6C80EA);border:1px solid #7056B1;border-radius:8px;color:#fff;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s ease;text-transform:uppercase;letter-spacing:.5px}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#6046A1,#5C70DA);transform:translateY(-1px);box-shadow:0 4px 12px #7056b166}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.output-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,30,40,.95) 0%,rgba(20,20,30,.95) 100%);border:1px solid rgba(100,100,120,.4);border-radius:12px;display:flex;flex-direction:column;box-shadow:0 4px 12px #0000004d;overflow:hidden}.output-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid rgba(100,100,120,.3)}.output-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#fff}.btn-copy[_ngcontent-%COMP%]{padding:8px 16px;background:rgba(40,167,69,.2);border:1px solid #28a745;border-radius:6px;color:#28a745;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}.btn-copy[_ngcontent-%COMP%]:hover:not(:disabled){background:rgba(40,167,69,.3);transform:translateY(-1px)}.btn-copy[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.output-content[_ngcontent-%COMP%]{flex:1;padding:24px;overflow:hidden;display:flex;flex-direction:column}.output-text[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:20px;background:rgba(20,20,30,.8);border:1px solid rgba(100,100,120,.3);border-radius:8px;color:#e0e0e0;font-family:Consolas,Monaco,Courier New,monospace;font-size:13px;line-height:1.6;white-space:pre-wrap;word-wrap:break-word;resize:none;outline:none;box-sizing:border-box}.output-text[_ngcontent-%COMP%]:focus{border-color:#4a9eff;box-shadow:0 0 0 2px #4a9eff33}.output-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;color:#666;font-size:16px;font-style:italic}@media (max-width: 1024px){.trade-gen-content[_ngcontent-%COMP%]{grid-template-columns:1fr;height:auto}.config-panel[_ngcontent-%COMP%]{max-height:none}.output-panel[_ngcontent-%COMP%]{min-height:400px}}@media (max-width: 768px){.trade-gen-container[_ngcontent-%COMP%]{padding:15px}.config-panel[_ngcontent-%COMP%], .output-panel[_ngcontent-%COMP%]{padding:16px}.output-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.btn-copy[_ngcontent-%COMP%]{width:100%}}"]}),t})();function _3(t,n){if(1&t&&(g(0,"div",19),C(1),m()),2&t){const e=S();_(1),Oe(" ",e.error," ")}}function y3(t,n){1&t&&Qe(0,"span",20)}function b3(t,n){if(1&t){const e=Me();g(0,"div",18)(1,"span",19),C(2),m(),g(3,"button",20),A("click",function(){return z(e),G(S().signOut())}),C(4,"Sign Out"),m()()}if(2&t){const e=S();_(2),Oe("\u{1f464} ",e.currentUser.username,"")}}function w3(t,n){if(1&t&&(g(0,"div",21)(1,"span",19),C(2),m()()),2&t){const e=S();_(2),Oe("\u{1f464} ",e.currentUser.username,"")}}function D3(t,n){if(1&t){const e=Me();g(0,"button",22),A("click",function(){z(e);const o=S();return o.signOut(),G(o.closeMobileMenu())}),C(1," \u{1f6aa} Sign Out "),m()}}const S3=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:(()=>{const n=class{constructor(r,o,i){this.supabaseService=r,this.router=o,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/collection"}ngOnInit(){this.supabaseService.isSignedIn()?this.router.navigate([this.returnUrl]):this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/collection"}get isFormValid(){return this.username.trim().length>0&&this.password.trim().length>0}onSubmit(){var r=this;return b(function*(){if(r.isFormValid){r.loading=!0,r.error="";try{const{user:o,error:i}=yield r.supabaseService.signIn(r.username.trim(),r.password.trim());i?(r.error=i,i.includes("Please wait a moment")&&(r.error+=" This usually resolves itself quickly.")):o&&r.router.navigate([r.returnUrl])}catch(o){if(console.error("Sign in error:",o),o&&"object"==typeof o&&"message"in o){const i=o.message;r.error=i.includes("NavigatorLockAcquireTimeoutError")||i.includes("lock")?"Please wait a moment and try signing in again.":"An unexpected error occurred"}else r.error="An unexpected error occurred"}finally{r.loading=!1}}else r.error="Please enter both username and password"})()}onUsernameChange(){this.error=""}onPasswordChange(){this.error=""}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(is),N(xt),N(io))},n.\u0275cmp=zr({type:n,selectors:[["app-signin"]],decls:26,vars:8,consts:[[1,"signin-container"],[1,"signin-card"],[1,"signin-header"],[1,"signin-title"],[1,"signin-subtitle"],[1,"signin-form",3,"ngSubmit"],["signinForm","ngForm"],[1,"form-group"],["for","username"],["id","username","name","username","type","text","placeholder","Enter your username","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["usernameInput","ngModel"],["for","password"],["id","password","name","password","type","password","placeholder","Enter your password","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["passwordInput","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"signin-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"signin-footer"],[1,"invite-note"],[1,"error-message"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),C(4,"\u{1f0cf} Pokemon TCG Pocket"),m(),g(5,"p",4),C(6,"Collection Manager"),m()(),g(7,"form",5,6),A("ngSubmit",function(){return i.onSubmit()}),g(9,"div",7)(10,"label",8),C(11,"Username"),m(),g(12,"input",9,10),A("ngModelChange",function(a){return i.username=a})("input",function(){return i.onUsernameChange()}),m()(),g(14,"div",7)(15,"label",11),C(16,"Password"),m(),g(17,"input",12,13),A("ngModelChange",function(a){return i.password=a})("input",function(){return i.onPasswordChange()}),m()(),H(19,_3,2,1,"div",14),g(20,"button",15),H(21,y3,1,0,"span",16),C(22),m()(),g(23,"div",17)(24,"p",18),C(25," \u{1f4e7} This is an invite-only system. Contact your administrator if you need access. "),m()()()()),2&o){const s=Vs(8);_(12),x("ngModel",i.username)("disabled",i.loading),_(5),x("ngModel",i.password)("disabled",i.loading),_(2),x("ngIf",i.error),_(1),x("disabled",i.loading||!s.valid),_(1),x("ngIf",i.loading),_(1),Oe(" ",i.loading?"Signing In...":"Sign In"," ")}},dependencies:[Ii,U0,Pi,ia,M0,Ic,Fi,Ec],styles:[".signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px}.signin-card[_ngcontent-%COMP%]{background:#333;border-radius:12px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 30px #0000004d;border:1px solid #444}.signin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signin-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.signin-subtitle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin:0;opacity:.8}.signin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #555;border-radius:6px;background-color:#444;color:#fff;font-size:16px;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;background-color:#555}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:#888}.error-message[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:10px 12px;border-radius:6px;font-size:14px;text-align:center;margin-top:-10px}.signin-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}.signin-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px)}.signin-btn[_ngcontent-%COMP%]:disabled{background-color:#666;cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signin-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.invite-note[_ngcontent-%COMP%]{color:#888;font-size:12px;line-height:1.4;margin:0;padding:15px;background-color:#2a2a2a;border-radius:6px;border-left:3px solid #007bff}@media (max-width: 480px){.signin-container[_ngcontent-%COMP%]{padding:10px}.signin-card[_ngcontent-%COMP%]{padding:30px 20px}.signin-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),t})()},{path:"",component:(()=>{const n=class{constructor(r,o){this.supabaseService=r,this.router=o,this.currentUser=null,this.appVersion="1.7.4",this.isMobileMenuOpen=!1}ngOnInit(){this.supabaseService.currentUser$.subscribe(r=>{this.currentUser=r}),this.router.events.subscribe(()=>{this.isMobileMenuOpen=!1})}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}};let t=n;return n.\u0275fac=function(o){return new(o||n)(N(is),N(xt))},n.\u0275cmp=zr({type:n,selectors:[["app-main-layout"]],decls:30,vars:7,consts:[[1,"app-layout"],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],[1,"nav-center","desktop-only"],[1,"nav-links"],["routerLink","/suggestion","routerLinkActive","active",1,"nav-link"],["routerLink","/collection","routerLinkActive","active",1,"nav-link"],["routerLink","/trade","routerLinkActive","active",1,"nav-link"],["class","nav-user desktop-only",4,"ngIf"],["type","button","aria-controls","mobileMenu","aria-label","Menu",1,"hamburger","mobile-only",3,"click"],["id","mobileMenu",1,"mobile-menu","mobile-only"],["class","mobile-menu-header",4,"ngIf"],["routerLink","/collection","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/suggestion","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/trade","routerLinkActive","active",1,"mobile-link",3,"click"],["class","mobile-link signout",3,"click",4,"ngIf"],[1,"main-content"],[1,"nav-user","desktop-only"],[1,"username"],[1,"btn-signout",3,"click"],[1,"mobile-menu-header"],[1,"mobile-link","signout",3,"click"]],template:function(o,i){1&o&&(g(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"h2"),C(5,"Pokemon TCGP Collector"),m(),g(6,"p"),C(7),m()(),g(8,"div",4)(9,"div",5)(10,"a",6),C(11," \u{1f4ca} Suggestion "),m(),g(12,"a",7),C(13," \u{1f5c2}\ufe0f Collection "),m(),g(14,"a",8),C(15," \u{1f504} Trade (Beta) "),m()()(),H(16,b3,5,1,"div",9),g(17,"button",10),A("click",function(){return i.toggleMobileMenu()}),C(18," \u2630 "),m()(),g(19,"div",11),H(20,w3,3,1,"div",12),g(21,"a",13),A("click",function(){return i.closeMobileMenu()}),C(22," \u{1f5c2}\ufe0f Collection "),m(),g(23,"a",14),A("click",function(){return i.closeMobileMenu()}),C(24," \u{1f4e6} Suggestion "),m(),g(25,"a",15),A("click",function(){return i.closeMobileMenu()}),C(26," \u{1f4ca} Trade (Beta) "),m(),H(27,D3,2,0,"button",16),m()(),g(28,"main",17),Qe(29,"router-outlet"),m()()),2&o&&(_(7),Oe("v",i.appVersion,""),_(9),x("ngIf",i.currentUser),_(1),Nt("aria-expanded",i.isMobileMenuOpen),_(2),Ae("open",i.isMobileMenuOpen),_(1),x("ngIf",i.currentUser),_(7),x("ngIf",i.currentUser))},dependencies:[Ii,zc,eu,aD],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#1d1b1b}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:0 20px;box-shadow:0 2px 10px #0000001a;position:relative}.nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff}.nav-brand[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f0f0f0;opacity:.9;font-size:.95rem}.nav-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;border-radius:5px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:0 2px 5px #0003}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.username[_ngcontent-%COMP%]{color:#f0f0f0;font-size:14px;font-weight:500}.btn-signout[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background-color:transparent;color:#fff;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-signout[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#1d1b1b}.desktop-only[_ngcontent-%COMP%]{display:flex}.mobile-only[_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.35);color:#fff;border-radius:6px;padding:6px 10px;font-size:18px;cursor:pointer}.mobile-menu[_ngcontent-%COMP%]{display:none!important;position:absolute;right:12px;top:100%;margin-top:8px;width:220px;z-index:100;flex-direction:column;gap:8px;padding:10px 12px 12px;border:1px solid rgba(255,255,255,.16);border-radius:10px;background:#1b1f2a;box-shadow:0 10px 28px #00000059}.mobile-menu.open[_ngcontent-%COMP%]{display:flex!important}.mobile-menu[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin-bottom:4px;display:inline-block;opacity:.9}.mobile-link[_ngcontent-%COMP%]{text-align:left;color:#fff;text-decoration:none;padding:10px 12px;border:1px solid rgba(255,255,255,.12);border-radius:6px;background:rgba(255,255,255,.05);font-size:14px}.mobile-link.signout[_ngcontent-%COMP%]{border-color:#dc3545;background:rgba(220,53,69,.15)}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.nav-container[_ngcontent-%COMP%]{padding:8px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}"]}),t})(),canActivate:[(()=>{const n=class{constructor(r,o){this.supabaseService=r,this.router=o}canActivate(r,o){const i=this.supabaseService.isSignedIn(),s=this.supabaseService.getCurrentUser();return!(!i||!s)||(this.router.navigate(["/signin"],{queryParams:{returnUrl:o.url}}),!1)}};let t=n;return n.\u0275fac=function(o){return new(o||n)(K(is),K(xt))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),t})()],children:[{path:"collection",component:V$},{path:"suggestion",component:t3},{path:"trade",component:m3}]},{path:"**",redirectTo:"/signin"}];let E3=(()=>{const n=class{};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=Vn({type:n}),n.\u0275inj=xn({imports:[gD.forRoot(S3),gD]}),t})(),x3=(()=>{const n=class{};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=Vn({type:n,bootstrap:[_L]}),n.\u0275inj=xn({imports:[cR,hb,VR,zN,E3]}),t})();lR().bootstrapModule(x3).catch(t=>console.error(t))},397:(Ot,he,ee)=>{"use strict";ee.r(he),ee.d(he,{Headers:()=>k,Request:()=>R,Response:()=>q,default:()=>qe,fetch:()=>je});var Ce=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const je=Ce.fetch,qe=Ce.fetch.bind(Ce),k=Ce.Headers,R=Ce.Request,q=Ce.Response},369:(Ot,he,ee)=>{"use strict";var re=ee(156).default;Object.defineProperty(he,"__esModule",{value:!0});const Ce=ee(582),je=Ce.__importDefault(ee(397)),qe=Ce.__importDefault(ee(839));he.default=class k{constructor(q){var Y,te;this.shouldThrowOnError=!1,this.method=q.method,this.url=q.url,this.headers=new Headers(q.headers),this.schema=q.schema,this.body=q.body,this.shouldThrowOnError=null!==(Y=q.shouldThrowOnError)&&void 0!==Y&&Y,this.signal=q.signal,this.isMaybeSingle=null!==(te=q.isMaybeSingle)&&void 0!==te&&te,this.fetch=q.fetch?q.fetch:typeof fetch>"u"?je.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(q,Y){return this.headers=new Headers(this.headers),this.headers.set(q,Y),this}then(q,Y){var te=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Le=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var Ee=re(function*(Ve){var at,Gt,It,Xe;let lt=null,Mt=null,Xn=null,Xt=Ve.status,wn=Ve.statusText;if(Ve.ok){if("HEAD"!==te.method){const Ur=yield Ve.text();""===Ur||(Mt="text/csv"===te.headers.get("Accept")||te.headers.get("Accept")&&null!==(at=te.headers.get("Accept"))&&void 0!==at&&at.includes("application/vnd.pgrst.plan+text")?Ur:JSON.parse(Ur))}const en=null===(Gt=te.headers.get("Prefer"))||void 0===Gt?void 0:Gt.match(/count=(exact|planned|estimated)/),Dn=null===(It=Ve.headers.get("content-range"))||void 0===It?void 0:It.split("/");en&&Dn&&Dn.length>1&&(Xn=parseInt(Dn[1])),te.isMaybeSingle&&"GET"===te.method&&Array.isArray(Mt)&&(Mt.length>1?(lt={code:"PGRST116",details:`Results contain ${Mt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Mt=null,Xn=null,Xt=406,wn="Not Acceptable"):Mt=1===Mt.length?Mt[0]:null)}else{const en=yield Ve.text();try{lt=JSON.parse(en),Array.isArray(lt)&&404===Ve.status&&(Mt=[],lt=null,Xt=200,wn="OK")}catch{404===Ve.status&&""===en?(Xt=204,wn="No Content"):lt={message:en}}if(lt&&te.isMaybeSingle&&!(null===(Xe=lt?.details)||void 0===Xe)&&Xe.includes("0 rows")&&(lt=null,Xt=200,wn="OK"),lt&&te.shouldThrowOnError)throw new qe.default(lt)}return{error:lt,data:Mt,count:Xn,status:Xt,statusText:wn}});return function(Ve){return Ee.apply(this,arguments)}}());return this.shouldThrowOnError||(Le=Le.catch(Ee=>{var Ve,at,Gt;return{error:{message:`${null!==(Ve=Ee?.name)&&void 0!==Ve?Ve:"FetchError"}: ${Ee?.message}`,details:`${null!==(at=Ee?.stack)&&void 0!==at?at:""}`,hint:"",code:`${null!==(Gt=Ee?.code)&&void 0!==Gt?Gt:""}`},data:null,count:null,status:0,statusText:""}})),Le.then(q,Y)}returns(){return this}overrideTypes(){return this}}},851:(Ot,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});const re=ee(582),Ce=re.__importDefault(ee(241)),je=re.__importDefault(ee(105));class qe{constructor(R,{headers:q={},schema:Y,fetch:te}={}){this.url=R,this.headers=new Headers(q),this.schemaName=Y,this.fetch=te}from(R){const q=new URL(`${this.url}/${R}`);return new Ce.default(q,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(R){return new qe(this.url,{headers:this.headers,schema:R,fetch:this.fetch})}rpc(R,q={},{head:Y=!1,get:te=!1,count:Te}={}){var Le;let Ee;const Ve=new URL(`${this.url}/rpc/${R}`);let at;Y||te?(Ee=Y?"HEAD":"GET",Object.entries(q).filter(([It,Xe])=>void 0!==Xe).map(([It,Xe])=>[It,Array.isArray(Xe)?`{${Xe.join(",")}}`:`${Xe}`]).forEach(([It,Xe])=>{Ve.searchParams.append(It,Xe)})):(Ee="POST",at=q);const Gt=new Headers(this.headers);return Te&&Gt.set("Prefer",`count=${Te}`),new je.default({method:Ee,url:Ve,headers:Gt,schema:this.schemaName,body:at,fetch:null!==(Le=this.fetch)&&void 0!==Le?Le:fetch})}}he.default=qe},839:(Ot,he)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});class ee extends Error{constructor(Ce){super(Ce.message),this.name="PostgrestError",this.details=Ce.details,this.hint=Ce.hint,this.code=Ce.code}}he.default=ee},105:(Ot,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});const Ce=ee(582).__importDefault(ee(594));he.default=class je extends Ce.default{eq(k,R){return this.url.searchParams.append(k,`eq.${R}`),this}neq(k,R){return this.url.searchParams.append(k,`neq.${R}`),this}gt(k,R){return this.url.searchParams.append(k,`gt.${R}`),this}gte(k,R){return this.url.searchParams.append(k,`gte.${R}`),this}lt(k,R){return this.url.searchParams.append(k,`lt.${R}`),this}lte(k,R){return this.url.searchParams.append(k,`lte.${R}`),this}like(k,R){return this.url.searchParams.append(k,`like.${R}`),this}likeAllOf(k,R){return this.url.searchParams.append(k,`like(all).{${R.join(",")}}`),this}likeAnyOf(k,R){return this.url.searchParams.append(k,`like(any).{${R.join(",")}}`),this}ilike(k,R){return this.url.searchParams.append(k,`ilike.${R}`),this}ilikeAllOf(k,R){return this.url.searchParams.append(k,`ilike(all).{${R.join(",")}}`),this}ilikeAnyOf(k,R){return this.url.searchParams.append(k,`ilike(any).{${R.join(",")}}`),this}is(k,R){return this.url.searchParams.append(k,`is.${R}`),this}in(k,R){const q=Array.from(new Set(R)).map(Y=>"string"==typeof Y&&new RegExp("[,()]").test(Y)?`"${Y}"`:`${Y}`).join(",");return this.url.searchParams.append(k,`in.(${q})`),this}contains(k,R){return"string"==typeof R?this.url.searchParams.append(k,`cs.${R}`):Array.isArray(R)?this.url.searchParams.append(k,`cs.{${R.join(",")}}`):this.url.searchParams.append(k,`cs.${JSON.stringify(R)}`),this}containedBy(k,R){return"string"==typeof R?this.url.searchParams.append(k,`cd.${R}`):Array.isArray(R)?this.url.searchParams.append(k,`cd.{${R.join(",")}}`):this.url.searchParams.append(k,`cd.${JSON.stringify(R)}`),this}rangeGt(k,R){return this.url.searchParams.append(k,`sr.${R}`),this}rangeGte(k,R){return this.url.searchParams.append(k,`nxl.${R}`),this}rangeLt(k,R){return this.url.searchParams.append(k,`sl.${R}`),this}rangeLte(k,R){return this.url.searchParams.append(k,`nxr.${R}`),this}rangeAdjacent(k,R){return this.url.searchParams.append(k,`adj.${R}`),this}overlaps(k,R){return this.url.searchParams.append(k,"string"==typeof R?`ov.${R}`:`ov.{${R.join(",")}}`),this}textSearch(k,R,{config:q,type:Y}={}){let te="";return"plain"===Y?te="pl":"phrase"===Y?te="ph":"websearch"===Y&&(te="w"),this.url.searchParams.append(k,`${te}fts${void 0===q?"":`(${q})`}.${R}`),this}match(k){return Object.entries(k).forEach(([R,q])=>{this.url.searchParams.append(R,`eq.${q}`)}),this}not(k,R,q){return this.url.searchParams.append(k,`not.${R}.${q}`),this}or(k,{foreignTable:R,referencedTable:q=R}={}){return this.url.searchParams.append(q?`${q}.or`:"or",`(${k})`),this}filter(k,R,q){return this.url.searchParams.append(k,`${R}.${q}`),this}}},241:(Ot,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});const Ce=ee(582).__importDefault(ee(105));he.default=class je{constructor(k,{headers:R={},schema:q,fetch:Y}){this.url=k,this.headers=new Headers(R),this.schema=q,this.fetch=Y}select(k,R){const{head:q=!1,count:Y}=R??{},te=q?"HEAD":"GET";let Te=!1;const Le=(k??"*").split("").map(Ee=>/\s/.test(Ee)&&!Te?"":('"'===Ee&&(Te=!Te),Ee)).join("");return this.url.searchParams.set("select",Le),Y&&this.headers.append("Prefer",`count=${Y}`),new Ce.default({method:te,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(k,{count:R,defaultToNull:q=!0}={}){var Y;if(R&&this.headers.append("Prefer",`count=${R}`),q||this.headers.append("Prefer","missing=default"),Array.isArray(k)){const Te=k.reduce((Le,Ee)=>Le.concat(Object.keys(Ee)),[]);if(Te.length>0){const Le=[...new Set(Te)].map(Ee=>`"${Ee}"`);this.url.searchParams.set("columns",Le.join(","))}}return new Ce.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:k,fetch:null!==(Y=this.fetch)&&void 0!==Y?Y:fetch})}upsert(k,{onConflict:R,ignoreDuplicates:q=!1,count:Y,defaultToNull:te=!0}={}){var Te;if(this.headers.append("Prefer",`resolution=${q?"ignore":"merge"}-duplicates`),void 0!==R&&this.url.searchParams.set("on_conflict",R),Y&&this.headers.append("Prefer",`count=${Y}`),te||this.headers.append("Prefer","missing=default"),Array.isArray(k)){const Ee=k.reduce((Ve,at)=>Ve.concat(Object.keys(at)),[]);if(Ee.length>0){const Ve=[...new Set(Ee)].map(at=>`"${at}"`);this.url.searchParams.set("columns",Ve.join(","))}}return new Ce.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:k,fetch:null!==(Te=this.fetch)&&void 0!==Te?Te:fetch})}update(k,{count:R}={}){var q;return R&&this.headers.append("Prefer",`count=${R}`),new Ce.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:k,fetch:null!==(q=this.fetch)&&void 0!==q?q:fetch})}delete({count:k}={}){var R;return k&&this.headers.append("Prefer",`count=${k}`),new Ce.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(R=this.fetch)&&void 0!==R?R:fetch})}}},594:(Ot,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});const Ce=ee(582).__importDefault(ee(369));he.default=class je extends Ce.default{select(k){let R=!1;const q=(k??"*").split("").map(Y=>/\s/.test(Y)&&!R?"":('"'===Y&&(R=!R),Y)).join("");return this.url.searchParams.set("select",q),this.headers.append("Prefer","return=representation"),this}order(k,{ascending:R=!0,nullsFirst:q,foreignTable:Y,referencedTable:te=Y}={}){const Te=te?`${te}.order`:"order",Le=this.url.searchParams.get(Te);return this.url.searchParams.set(Te,`${Le?`${Le},`:""}${k}.${R?"asc":"desc"}${void 0===q?"":q?".nullsfirst":".nullslast"}`),this}limit(k,{foreignTable:R,referencedTable:q=R}={}){return this.url.searchParams.set(typeof q>"u"?"limit":`${q}.limit`,`${k}`),this}range(k,R,{foreignTable:q,referencedTable:Y=q}={}){const Te=typeof Y>"u"?"limit":`${Y}.limit`;return this.url.searchParams.set(typeof Y>"u"?"offset":`${Y}.offset`,`${k}`),this.url.searchParams.set(Te,""+(R-k+1)),this}abortSignal(k){return this.signal=k,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:k=!1,verbose:R=!1,settings:q=!1,buffers:Y=!1,wal:te=!1,format:Te="text"}={}){var Le;const Ee=[k?"analyze":null,R?"verbose":null,q?"settings":null,Y?"buffers":null,te?"wal":null].filter(Boolean).join("|"),Ve=null!==(Le=this.headers.get("Accept"))&&void 0!==Le?Le:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${Te}; for="${Ve}"; options=${Ee};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(k){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${k}`),this}}},358:(Ot,he,ee)=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0}),he.PostgrestError=he.PostgrestBuilder=he.PostgrestTransformBuilder=he.PostgrestFilterBuilder=he.PostgrestQueryBuilder=he.PostgrestClient=void 0;const re=ee(582),Ce=re.__importDefault(ee(851));he.PostgrestClient=Ce.default;const je=re.__importDefault(ee(241));he.PostgrestQueryBuilder=je.default;const qe=re.__importDefault(ee(105));he.PostgrestFilterBuilder=qe.default;const k=re.__importDefault(ee(594));he.PostgrestTransformBuilder=k.default;const R=re.__importDefault(ee(369));he.PostgrestBuilder=R.default;const q=re.__importDefault(ee(839));he.PostgrestError=q.default,he.default={PostgrestClient:Ce.default,PostgrestQueryBuilder:je.default,PostgrestFilterBuilder:qe.default,PostgrestTransformBuilder:k.default,PostgrestBuilder:R.default,PostgrestError:q.default}},156:Ot=>{function he(re,Ce,je,qe,k,R,q){try{var Y=re[R](q),te=Y.value}catch(Te){return void je(Te)}Y.done?Ce(te):Promise.resolve(te).then(qe,k)}Ot.exports=function ee(re){return function(){var Ce=this,je=arguments;return new Promise(function(qe,k){var R=re.apply(Ce,je);function q(te){he(R,qe,k,q,Y,"next",te)}function Y(te){he(R,qe,k,q,Y,"throw",te)}q(void 0)})}},Ot.exports.__esModule=!0,Ot.exports.default=Ot.exports},582:(Ot,he,ee)=>{"use strict";ee.r(he),ee.d(he,{__addDisposableResource:()=>We,__assign:()=>je,__asyncDelegator:()=>ss,__asyncGenerator:()=>wn,__asyncValues:()=>en,__await:()=>Xt,__awaiter:()=>Ee,__classPrivateFieldGet:()=>er,__classPrivateFieldIn:()=>as,__classPrivateFieldSet:()=>Pa,__createBinding:()=>at,__decorate:()=>k,__disposeResources:()=>Na,__esDecorate:()=>q,__exportStar:()=>Gt,__extends:()=>Ce,__generator:()=>Ve,__importDefault:()=>Fo,__importStar:()=>ka,__makeTemplateObject:()=>Dn,__metadata:()=>Le,__param:()=>R,__propKey:()=>te,__read:()=>Xe,__rest:()=>qe,__rewriteRelativeImportExtension:()=>Fa,__runInitializers:()=>Y,__setFunctionName:()=>Te,__spread:()=>lt,__spreadArray:()=>Xn,__spreadArrays:()=>Mt,__values:()=>It,default:()=>fu});var re=function(E,O){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,M){I.__proto__=M}||function(I,M){for(var L in M)Object.prototype.hasOwnProperty.call(M,L)&&(I[L]=M[L])})(E,O)};function Ce(E,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function I(){this.constructor=E}re(E,O),E.prototype=null===O?Object.create(O):(I.prototype=O.prototype,new I)}var je=function(){return je=Object.assign||function(O){for(var I,M=1,L=arguments.length;M<L;M++)for(var B in I=arguments[M])Object.prototype.hasOwnProperty.call(I,B)&&(O[B]=I[B]);return O},je.apply(this,arguments)};function qe(E,O){var I={};for(var M in E)Object.prototype.hasOwnProperty.call(E,M)&&O.indexOf(M)<0&&(I[M]=E[M]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var L=0;for(M=Object.getOwnPropertySymbols(E);L<M.length;L++)O.indexOf(M[L])<0&&Object.prototype.propertyIsEnumerable.call(E,M[L])&&(I[M[L]]=E[M[L]])}return I}function k(E,O,I,M){var F,L=arguments.length,B=L<3?O:null===M?M=Object.getOwnPropertyDescriptor(O,I):M;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(E,O,I,M);else for(var V=E.length-1;V>=0;V--)(F=E[V])&&(B=(L<3?F(B):L>3?F(O,I,B):F(O,I))||B);return L>3&&B&&Object.defineProperty(O,I,B),B}function R(E,O){return function(I,M){O(I,M,E)}}function q(E,O,I,M,L,B){function F(tr){if(void 0!==tr&&"function"!=typeof tr)throw new TypeError("Function expected");return tr}for(var wt,V=M.kind,Tt="getter"===V?"get":"setter"===V?"set":"value",de=!O&&E?M.static?E:E.prototype:null,Ye=O||(de?Object.getOwnPropertyDescriptor(de,M.name):{}),Br=!1,Be=I.length-1;Be>=0;Be--){var Lt={};for(var tn in M)Lt[tn]="access"===tn?{}:M[tn];for(var tn in M.access)Lt.access[tn]=M.access[tn];Lt.addInitializer=function(tr){if(Br)throw new TypeError("Cannot add initializers after decoration has completed");B.push(F(tr||null))};var Sn=(0,I[Be])("accessor"===V?{get:Ye.get,set:Ye.set}:Ye[Tt],Lt);if("accessor"===V){if(void 0===Sn)continue;if(null===Sn||"object"!=typeof Sn)throw new TypeError("Object expected");(wt=F(Sn.get))&&(Ye.get=wt),(wt=F(Sn.set))&&(Ye.set=wt),(wt=F(Sn.init))&&L.unshift(wt)}else(wt=F(Sn))&&("field"===V?L.unshift(wt):Ye[Tt]=wt)}de&&Object.defineProperty(de,M.name,Ye),Br=!0}function Y(E,O,I){for(var M=arguments.length>2,L=0;L<O.length;L++)I=M?O[L].call(E,I):O[L].call(E);return M?I:void 0}function te(E){return"symbol"==typeof E?E:"".concat(E)}function Te(E,O,I){return"symbol"==typeof O&&(O=O.description?"[".concat(O.description,"]"):""),Object.defineProperty(E,"name",{configurable:!0,value:I?"".concat(I," ",O):O})}function Le(E,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(E,O)}function Ee(E,O,I,M){return new(I||(I=Promise))(function(B,F){function V(Ye){try{de(M.next(Ye))}catch(wt){F(wt)}}function Tt(Ye){try{de(M.throw(Ye))}catch(wt){F(wt)}}function de(Ye){Ye.done?B(Ye.value):function L(B){return B instanceof I?B:new I(function(F){F(B)})}(Ye.value).then(V,Tt)}de((M=M.apply(E,O||[])).next())})}function Ve(E,O){var M,L,B,I={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},F=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return F.next=V(0),F.throw=V(1),F.return=V(2),"function"==typeof Symbol&&(F[Symbol.iterator]=function(){return this}),F;function V(de){return function(Ye){return function Tt(de){if(M)throw new TypeError("Generator is already executing.");for(;F&&(F=0,de[0]&&(I=0)),I;)try{if(M=1,L&&(B=2&de[0]?L.return:de[0]?L.throw||((B=L.return)&&B.call(L),0):L.next)&&!(B=B.call(L,de[1])).done)return B;switch(L=0,B&&(de=[2&de[0],B.value]),de[0]){case 0:case 1:B=de;break;case 4:return I.label++,{value:de[1],done:!1};case 5:I.label++,L=de[1],de=[0];continue;case 7:de=I.ops.pop(),I.trys.pop();continue;default:if(!(B=(B=I.trys).length>0&&B[B.length-1])&&(6===de[0]||2===de[0])){I=0;continue}if(3===de[0]&&(!B||de[1]>B[0]&&de[1]<B[3])){I.label=de[1];break}if(6===de[0]&&I.label<B[1]){I.label=B[1],B=de;break}if(B&&I.label<B[2]){I.label=B[2],I.ops.push(de);break}B[2]&&I.ops.pop(),I.trys.pop();continue}de=O.call(E,I)}catch(Ye){de=[6,Ye],L=0}finally{M=B=0}if(5&de[0])throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}([de,Ye])}}}var at=Object.create?function(E,O,I,M){void 0===M&&(M=I);var L=Object.getOwnPropertyDescriptor(O,I);(!L||("get"in L?!O.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return O[I]}}),Object.defineProperty(E,M,L)}:function(E,O,I,M){void 0===M&&(M=I),E[M]=O[I]};function Gt(E,O){for(var I in E)"default"!==I&&!Object.prototype.hasOwnProperty.call(O,I)&&at(O,E,I)}function It(E){var O="function"==typeof Symbol&&Symbol.iterator,I=O&&E[O],M=0;if(I)return I.call(E);if(E&&"number"==typeof E.length)return{next:function(){return E&&M>=E.length&&(E=void 0),{value:E&&E[M++],done:!E}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xe(E,O){var I="function"==typeof Symbol&&E[Symbol.iterator];if(!I)return E;var L,F,M=I.call(E),B=[];try{for(;(void 0===O||O-- >0)&&!(L=M.next()).done;)B.push(L.value)}catch(V){F={error:V}}finally{try{L&&!L.done&&(I=M.return)&&I.call(M)}finally{if(F)throw F.error}}return B}function lt(){for(var E=[],O=0;O<arguments.length;O++)E=E.concat(Xe(arguments[O]));return E}function Mt(){for(var E=0,O=0,I=arguments.length;O<I;O++)E+=arguments[O].length;var M=Array(E),L=0;for(O=0;O<I;O++)for(var B=arguments[O],F=0,V=B.length;F<V;F++,L++)M[L]=B[F];return M}function Xn(E,O,I){if(I||2===arguments.length)for(var B,M=0,L=O.length;M<L;M++)(B||!(M in O))&&(B||(B=Array.prototype.slice.call(O,0,M)),B[M]=O[M]);return E.concat(B||Array.prototype.slice.call(O))}function Xt(E){return this instanceof Xt?(this.v=E,this):new Xt(E)}function wn(E,O,I){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L,M=I.apply(E,O||[]),B=[];return L=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),V("next"),V("throw"),V("return",function F(Be){return function(Lt){return Promise.resolve(Lt).then(Be,wt)}}),L[Symbol.asyncIterator]=function(){return this},L;function V(Be,Lt){M[Be]&&(L[Be]=function(tn){return new Promise(function(Sn,tr){B.push([Be,tn,Sn,tr])>1||Tt(Be,tn)})},Lt&&(L[Be]=Lt(L[Be])))}function Tt(Be,Lt){try{!function de(Be){Be.value instanceof Xt?Promise.resolve(Be.value.v).then(Ye,wt):Br(B[0][2],Be)}(M[Be](Lt))}catch(tn){Br(B[0][3],tn)}}function Ye(Be){Tt("next",Be)}function wt(Be){Tt("throw",Be)}function Br(Be,Lt){Be(Lt),B.shift(),B.length&&Tt(B[0][0],B[0][1])}}function ss(E){var O,I;return O={},M("next"),M("throw",function(L){throw L}),M("return"),O[Symbol.iterator]=function(){return this},O;function M(L,B){O[L]=E[L]?function(F){return(I=!I)?{value:Xt(E[L](F)),done:!1}:B?B(F):F}:B}}function en(E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I,O=E[Symbol.asyncIterator];return O?O.call(E):(E=It(E),I={},M("next"),M("throw"),M("return"),I[Symbol.asyncIterator]=function(){return this},I);function M(B){I[B]=E[B]&&function(F){return new Promise(function(V,Tt){!function L(B,F,V,Tt){Promise.resolve(Tt).then(function(de){B({value:de,done:V})},F)}(V,Tt,(F=E[B](F)).done,F.value)})}}}function Dn(E,O){return Object.defineProperty?Object.defineProperty(E,"raw",{value:O}):E.raw=O,E}var Ur=Object.create?function(E,O){Object.defineProperty(E,"default",{enumerable:!0,value:O})}:function(E,O){E.default=O},fo=function(E){return(fo=Object.getOwnPropertyNames||function(O){var I=[];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(I[I.length]=M);return I})(E)};function ka(E){if(E&&E.__esModule)return E;var O={};if(null!=E)for(var I=fo(E),M=0;M<I.length;M++)"default"!==I[M]&&at(O,E,I[M]);return Ur(O,E),O}function Fo(E){return E&&E.__esModule?E:{default:E}}function er(E,O,I,M){if("a"===I&&!M)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof O?E!==O||!M:!O.has(E))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===I?M:"a"===I?M.call(E):M?M.value:O.get(E)}function Pa(E,O,I,M,L){if("m"===M)throw new TypeError("Private method is not writable");if("a"===M&&!L)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof O?E!==O||!L:!O.has(E))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===M?L.call(E,I):L?L.value=I:O.set(E,I),I}function as(E,O){if(null===O||"object"!=typeof O&&"function"!=typeof O)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof E?O===E:E.has(O)}function We(E,O,I){if(null!=O){if("object"!=typeof O&&"function"!=typeof O)throw new TypeError("Object expected.");var M,L;if(I){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");M=O[Symbol.asyncDispose]}if(void 0===M){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");M=O[Symbol.dispose],I&&(L=M)}if("function"!=typeof M)throw new TypeError("Object not disposable.");L&&(M=function(){try{L.call(this)}catch(B){return Promise.reject(B)}}),E.stack.push({value:O,dispose:M,async:I})}else I&&E.stack.push({async:!0});return O}var Ra="function"==typeof SuppressedError?SuppressedError:function(E,O,I){var M=new Error(I);return M.name="SuppressedError",M.error=E,M.suppressed=O,M};function Na(E){function O(B){E.error=E.hasError?new Ra(B,E.error,"An error was suppressed during disposal."):B,E.hasError=!0}var I,M=0;return function L(){for(;I=E.stack.pop();)try{if(!I.async&&1===M)return M=0,E.stack.push(I),Promise.resolve().then(L);if(I.dispose){var B=I.dispose.call(I.value);if(I.async)return M|=2,Promise.resolve(B).then(L,function(F){return O(F),L()})}else M|=1}catch(F){O(F)}if(1===M)return E.hasError?Promise.reject(E.error):Promise.resolve();if(E.hasError)throw E.error}()}function Fa(E,O){return"string"==typeof E&&/^\.\.?\//.test(E)?E.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(I,M,L,B,F){return M?O?".jsx":".js":!L||B&&F?L+B+"."+F.toLowerCase()+"js":I}):E}const fu={__extends:Ce,__assign:je,__rest:qe,__decorate:k,__param:R,__esDecorate:q,__runInitializers:Y,__propKey:te,__setFunctionName:Te,__metadata:Le,__awaiter:Ee,__generator:Ve,__createBinding:at,__exportStar:Gt,__values:It,__read:Xe,__spread:lt,__spreadArrays:Mt,__spreadArray:Xn,__await:Xt,__asyncGenerator:wn,__asyncDelegator:ss,__asyncValues:en,__makeTemplateObject:Dn,__importStar:ka,__importDefault:Fo,__classPrivateFieldGet:er,__classPrivateFieldSet:Pa,__classPrivateFieldIn:as,__addDisposableResource:We,__disposeResources:Na,__rewriteRelativeImportExtension:Fa}}},Ot=>{Ot(Ot.s=734)}]);