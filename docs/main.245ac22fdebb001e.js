(self.webpackChunkPokemonTCGPCollector=self.webpackChunkPokemonTCGPCollector||[]).push([[179],{538:(Dt,le,Y)=>{"use strict";function X(t){return"function"==typeof t}function me(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Pe=me(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ue(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class I{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(X(r))try{r()}catch(i){e=i instanceof Pe?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{G(i)}catch(s){e=e??[],s instanceof Pe?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Pe(e)}}add(e){var n;if(e&&e!==this)if(this.closed)G(e);else{if(e instanceof I){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ue(n,e)}remove(e){const{_finalizers:n}=this;n&&Ue(n,e),e instanceof I&&e._removeParent(this)}}I.EMPTY=(()=>{const t=new I;return t.closed=!0,t})();const A=I.EMPTY;function U(t){return t instanceof I||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function G(t){X(t)?t():t.unsubscribe()}const Q={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},De={setTimeout(t,e,...n){const{delegate:r}=De;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=De;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Oe(t){De.setTimeout(()=>{const{onUnhandledError:e}=Q;if(!e)throw t;e(t)})}function be(){}const Re=Et("C",void 0,void 0);function Et(t,e,n){return{kind:t,value:e,error:n}}let qe=null;function tt(t){if(Q.useDeprecatedSynchronousErrorHandling){const e=!qe;if(e&&(qe={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=qe;if(qe=null,n)throw r}}else t()}class Yn extends I{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,U(e)&&e.add(this)):this.destination=Ea}static create(e,n,r){return new Kt(e,n,r)}next(e){this.isStopped?lo(function Vt(t){return Et("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?lo(function et(t){return Et("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?lo(Re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Jt=Function.prototype.bind;function yn(t,e){return Jt.call(t,e)}class es{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_n(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_n(r)}else _n(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_n(n)}}}class Kt extends Yn{constructor(e,n,r){let o;if(super(),X(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&Q.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&yn(e.next,i),error:e.error&&yn(e.error,i),complete:e.complete&&yn(e.complete,i)}):o=e}this.destination=new es(o)}}function _n(t){Q.useDeprecatedSynchronousErrorHandling?function bt(t){Q.useDeprecatedSynchronousErrorHandling&&qe&&(qe.errorThrown=!0,qe.error=t)}(t):Oe(t)}function lo(t,e){const{onStoppedNotification:n}=Q;n&&De.setTimeout(()=>n(t,e))}const Ea={closed:!0,next:be,error:function Vr(t){throw t},complete:be},Lo="function"==typeof Symbol&&Symbol.observable||"@@observable";function Qn(t){return t}function ts(t){return 0===t.length?Qn:1===t.length?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}let $e=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){const i=function xa(t){return t&&t instanceof Yn||function Ia(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}(t)&&U(t)}(n)?n:new Kt(n,r,o);return tt(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ma(r))((o,i)=>{const s=new Kt({next:a=>{try{n(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Lo](){return this}pipe(...n){return ts(n)(this)}toPromise(n){return new(n=Ma(n))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function Ma(t){var e;return null!==(e=t??Q.Promise)&&void 0!==e?e:Promise}const Qc=me(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let v=(()=>{class t extends $e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new E(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Qc}next(n){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:o,observers:i}=this;return r||o?A:(this.currentObservers=null,i.push(n),new I(()=>{this.currentObservers=null,Ue(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){const n=new $e;return n.source=this,n}}return t.create=(e,n)=>new E(e,n),t})();class E extends v{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:A}}function S(t){return X(t?.lift)}function w(t){return e=>{if(S(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function R(t,e,n,r,o){return new V(t,e,n,r,o)}class V extends Yn{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function O(t,e){return w((n,r)=>{let o=0;n.subscribe(R(r,i=>{r.next(t.call(e,i,o++))}))})}var F=Y(582);const wt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function ae(t){return X(t?.then)}function ze(t){return X(t[Lo])}function mt(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function Ur(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Pt=function Fe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Yt(t){return X(t?.[Pt])}function vn(t){return(0,F.__asyncGenerator)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:o}=yield(0,F.__await)(n.read());if(o)return yield(0,F.__await)(void 0);yield yield(0,F.__await)(r)}}finally{n.releaseLock()}})}function Zn(t){return X(t?.getReader)}function Pn(t){if(t instanceof $e)return t;if(null!=t){if(ze(t))return function HD(t){return new $e(e=>{const n=t[Lo]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(wt(t))return function zD(t){return new $e(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(ae(t))return function GD(t){return new $e(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Oe)})}(t);if(mt(t))return Up(t);if(Yt(t))return function qD(t){return new $e(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Zn(t))return function WD(t){return Up(vn(t))}(t)}throw Ur(t)}function Up(t){return new $e(e=>{(function JD(t,e){var n,r,o,i;return(0,F.__awaiter)(this,void 0,void 0,function*(){try{for(n=(0,F.__asyncValues)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function _r(t,e,n,r=0,o=!1){const i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function St(t,e,n=1/0){return X(e)?St((r,o)=>O((i,s)=>e(r,i,o,s))(Pn(t(r,o))),n):("number"==typeof e&&(n=e),w((r,o)=>function KD(t,e,n,r,o,i,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{i&&e.next(g),c++;let y=!1;Pn(n(g,u++)).subscribe(R(e,_=>{o?.(_),i?f(_):e.next(_)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<r;){const _=l.shift();s?_r(e,s,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return t.subscribe(R(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,t,n)))}function jo(t=1/0){return St(Qn,t)}const Xn=new $e(t=>t.complete());function Zc(t){return t[t.length-1]}function $p(t){return X(Zc(t))?t.pop():void 0}function ns(t){return function QD(t){return t&&X(t.schedule)}(Zc(t))?t.pop():void 0}function Bp(t,e=0){return w((n,r)=>{n.subscribe(R(r,o=>_r(r,t,()=>r.next(o),e),()=>_r(r,t,()=>r.complete(),e),o=>_r(r,t,()=>r.error(o),e)))})}function Hp(t,e=0){return w((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zp(t,e){if(!t)throw new Error("Iterable cannot be null");return new $e(n=>{_r(n,e,()=>{const r=t[Symbol.asyncIterator]();_r(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function lt(t,e){return e?function oE(t,e){if(null!=t){if(ze(t))return function XD(t,e){return Pn(t).pipe(Hp(e),Bp(e))}(t,e);if(wt(t))return function tE(t,e){return new $e(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(ae(t))return function eE(t,e){return Pn(t).pipe(Hp(e),Bp(e))}(t,e);if(mt(t))return zp(t,e);if(Yt(t))return function nE(t,e){return new $e(n=>{let r;return _r(n,e,()=>{r=t[Pt](),_r(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void n.error(s)}i?n.complete():n.next(o)},0,!0)}),()=>X(r?.return)&&r.return()})}(t,e);if(Zn(t))return function rE(t,e){return zp(vn(t),e)}(t,e)}throw Ur(t)}(t,e):Pn(t)}function Xc(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Kt({next:()=>{r.unsubscribe(),t()}});return e(...n).subscribe(r)}function ke(t){for(let e in t)if(t[e]===ke)return e;throw Error("Could not find renamed property on target object.")}function eu(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Le(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Le).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function tu(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const aE=ke({__forward_ref__:ke});function je(t){return t.__forward_ref__=je,t.toString=function(){return Le(this())},t}function te(t){return nu(t)?t():t}function nu(t){return"function"==typeof t&&t.hasOwnProperty(aE)&&t.__forward_ref__===je}function ru(t){return t&&!!t.\u0275providers}const Gp="https://g.co/ng/security#xss";class j extends Error{constructor(e,n){super(Aa(e,n)),this.code=e}}function Aa(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}function ce(t){return"string"==typeof t?t:null==t?"":String(t)}function Ta(t,e){throw new j(-201,!1)}function Cn(t,e){null==t&&function Ie(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function bn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Oa(t){return qp(t,Pa)||qp(t,Jp)}function qp(t,e){return t.hasOwnProperty(e)?t[e]:null}function Wp(t){return t&&(t.hasOwnProperty(ou)||t.hasOwnProperty(gE))?t[ou]:null}const Pa=ke({\u0275prov:ke}),ou=ke({\u0275inj:ke}),Jp=ke({ngInjectableDef:ke}),gE=ke({ngInjectorDef:ke});var ne=(()=>((ne=ne||{})[ne.Default=0]="Default",ne[ne.Host=1]="Host",ne[ne.Self=2]="Self",ne[ne.SkipSelf=4]="SkipSelf",ne[ne.Optional=8]="Optional",ne))();let iu;function wn(t){const e=iu;return iu=t,e}function Kp(t,e,n){const r=Oa(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ne.Optional?null:void 0!==e?e:void Ta(Le(t))}const Be=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),rs={},su="__NG_DI_FLAG__",Ra="ngTempTokenPath",yE="ngTokenPath",_E=/\n/gm,vE="\u0275",Yp="__source";let os;function Vo(t){const e=os;return os=t,e}function CE(t,e=ne.Default){if(void 0===os)throw new j(-203,!1);return null===os?Kp(t,void 0,e):os.get(t,e&ne.Optional?null:void 0,e)}function B(t,e=ne.Default){return(function mE(){return iu}()||CE)(te(t),e)}function ye(t,e=ne.Default){return B(t,ka(e))}function ka(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function au(t){const e=[];for(let n=0;n<t.length;n++){const r=te(t[n]);if(Array.isArray(r)){if(0===r.length)throw new j(900,!1);let o,i=ne.Default;for(let s=0;s<r.length;s++){const a=r[s],l=bE(a);"number"==typeof l?-1===l?o=a.token:i|=l:o=a}e.push(B(o,i))}else e.push(B(r))}return e}function is(t,e){return t[su]=e,t.prototype[su]=e,t}function bE(t){return t[su]}function vr(t){return{toString:t}.toString()}var er=(()=>((er=er||{})[er.OnPush=0]="OnPush",er[er.Default=1]="Default",er))(),tr=(()=>{return(t=tr||(tr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",tr;var t})();const Cr={},Se=[],Na=ke({\u0275cmp:ke}),lu=ke({\u0275dir:ke}),cu=ke({\u0275pipe:ke}),Zp=ke({\u0275mod:ke}),br=ke({\u0275fac:ke}),ss=ke({__NG_ELEMENT_ID__:ke});let EE=0;function Br(t){return vr(()=>{const e=eg(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===er.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,data:t.data||{},encapsulation:t.encapsulation||tr.Emulated,id:"c"+EE++,styles:t.styles||Se,_:null,schemas:t.schemas||null,tView:null};tg(n);const r=t.dependencies;return n.directiveDefs=Fa(r,!1),n.pipeDefs=Fa(r,!0),n})}function ME(t){return xe(t)||Rt(t)}function IE(t){return null!==t}function Rn(t){return vr(()=>({type:t.type,bootstrap:t.bootstrap||Se,declarations:t.declarations||Se,imports:t.imports||Se,exports:t.exports||Se,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Xp(t,e){if(null==t)return Cr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let o=t[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,e&&(e[o]=i)}return n}function ie(t){return vr(()=>{const e=eg(t);return tg(e),e})}function xe(t){return t[Na]||null}function Rt(t){return t[lu]||null}function Zt(t){return t[cu]||null}function on(t,e){const n=t[Zp]||null;if(!n&&!0===e)throw new Error(`Type ${Le(t)} does not have '\u0275mod' property.`);return n}function eg(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,exportAs:t.exportAs||null,standalone:!0===t.standalone,selectors:t.selectors||Se,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xp(t.inputs,e),outputs:Xp(t.outputs)}}function tg(t){t.features?.forEach(e=>e(t))}function Fa(t,e){if(!t)return null;const n=e?Zt:ME;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(IE)}const wr=0,H=1,pe=2,Ye=3,kn=4,co=5,kt=6,$o=7,nt=8,La=9,ja=10,_e=11,uu=12,as=13,ng=14,Bo=15,Nt=16,ls=17,Ho=18,nr=19,cs=20,rg=21,He=22,du=1,og=2,Va=7,Ua=8,zo=9,Ut=10;function sn(t){return Array.isArray(t)&&"object"==typeof t[du]}function Nn(t){return Array.isArray(t)&&!0===t[du]}function hu(t){return 0!=(4&t.flags)}function us(t){return t.componentOffset>-1}function $a(t){return 1==(1&t.flags)}function Fn(t){return!!t.template}function AE(t){return 0!=(256&t[pe])}function uo(t,e){return t.hasOwnProperty(br)?t[br]:null}class PE{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Dn(){return ag}function ag(t){return t.type.prototype.ngOnChanges&&(t.setInput=kE),RE}function RE(){const t=cg(this),e=t?.current;if(e){const n=t.previous;if(n===Cr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function kE(t,e,n,r){const o=this.declaredInputs[n],i=cg(t)||function NE(t,e){return t[lg]=e}(t,{previous:Cr,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[o];s[o]=new PE(l&&l.currentValue,e,a===Cr),t[r]=e}Dn.ngInherit=!0;const lg="__ngSimpleChanges__";function cg(t){return t[lg]||null}const En=function(t,e,n){};function Mt(t){for(;Array.isArray(t);)t=t[wr];return t}function Ba(t,e){return Mt(e[t])}function an(t,e){return Mt(e[t.index])}function hg(t,e){return t.data[e]}function Xt(t,e){const n=e[t];return sn(n)?n:n[wr]}function Ha(t){return 64==(64&t[pe])}function Hr(t,e){return null==e?null:t[e]}function fg(t){t[Ho]=0}function pu(t,e){t[co]+=e;let n=t,r=t[Ye];for(;null!==r&&(1===e&&1===n[co]||-1===e&&0===n[co]);)r[co]+=e,n=r,r=r[Ye]}const ue={lFrame:Dg(null),bindingsEnabled:!0};function gg(){return ue.bindingsEnabled}function k(){return ue.lFrame.lView}function Ee(){return ue.lFrame.tView}function It(t){return ue.lFrame.contextLView=t,t[nt]}function xt(t){return ue.lFrame.contextLView=null,t}function At(){let t=mg();for(;null!==t&&64===t.type;)t=t.parent;return t}function mg(){return ue.lFrame.currentTNode}function rr(t,e){const n=ue.lFrame;n.currentTNode=t,n.isParent=e}function gu(){return ue.lFrame.isParent}function mu(){ue.lFrame.isParent=!1}function qo(){return ue.lFrame.bindingIndex++}function Er(t){const e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function JE(t,e){const n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,yu(e)}function yu(t){ue.lFrame.currentDirectiveIndex=t}function Cg(){return ue.lFrame.currentQueryIndex}function vu(t){ue.lFrame.currentQueryIndex=t}function YE(t){const e=t[H];return 2===e.type?e.declTNode:1===e.type?t[kt]:null}function bg(t,e,n){if(n&ne.SkipSelf){let o=e,i=t;for(;!(o=o.parent,null!==o||n&ne.Host||(o=YE(i),null===o||(i=i[Bo],10&o.type))););if(null===o)return!1;e=o,t=i}const r=ue.lFrame=wg();return r.currentTNode=e,r.lView=t,!0}function Cu(t){const e=wg(),n=t[H];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function wg(){const t=ue.lFrame,e=null===t?null:t.child;return null===e?Dg(t):e}function Dg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Eg(){const t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Sg=Eg;function bu(){const t=Eg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Bt(){return ue.lFrame.selectedIndex}function ho(t){ue.lFrame.selectedIndex=t}function We(){const t=ue.lFrame;return hg(t.tView,t.selectedIndex)}function za(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(t.contentHooks??(t.contentHooks=[])).push(-n,s),a&&((t.contentHooks??(t.contentHooks=[])).push(n,a),(t.contentCheckHooks??(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks??(t.viewHooks=[])).push(-n,l),c&&((t.viewHooks??(t.viewHooks=[])).push(n,c),(t.viewCheckHooks??(t.viewCheckHooks=[])).push(n,c)),null!=u&&(t.destroyHooks??(t.destroyHooks=[])).push(n,u)}}function Ga(t,e,n){Mg(t,e,3,n)}function qa(t,e,n,r){(3&t[pe])===n&&Mg(t,e,n,r)}function wu(t,e){let n=t[pe];(3&n)===e&&(n&=2047,n+=1,t[pe]=n)}function Mg(t,e,n,r){const i=r??-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&t[Ho]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[Ho]+=65536),(a<i||-1==i)&&(iS(t,n,e,l),t[Ho]=(4294901760&t[Ho])+l+2),l++}function iS(t,e,n,r){const o=n[r]<0,i=n[r+1],a=t[o?-n[r]:n[r]];if(o){if(t[pe]>>11<t[Ho]>>16&&(3&t[pe])===e){t[pe]+=2048,En(4,a,i);try{i.call(a)}finally{En(5,a,i)}}}else{En(4,a,i);try{i.call(a)}finally{En(5,a,i)}}}const Wo=-1;class hs{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Eu(t,e,n){let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{const i=o,s=n[++r];xg(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}return r}function Ig(t){return 3===t||4===t||6===t}function xg(t){return 64===t.charCodeAt(0)}function fs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?n=o:0===n||Ag(t,n,o,null,-1===n||2===n?e[++r]:null)}}return t}function Ag(t,e,n,r,o){let i=0,s=t.length;if(-1===e)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==o&&(t[i+1]=o));if(r===t[i+1])return void(t[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==o&&t.splice(i++,0,o)}function Tg(t){return t!==Wo}function Wa(t){return 32767&t}function Ja(t,e){let n=function cS(t){return t>>16}(t),r=e;for(;n>0;)r=r[Bo],n--;return r}let Su=!0;function Ka(t){const e=Su;return Su=t,e}const Og=255,Pg=5;let uS=0;const or={};function Ya(t,e){const n=Rg(t,e);if(-1!==n)return n;const r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,Mu(r.data,t),Mu(e,null),Mu(r.blueprint,null));const o=Iu(t,e),i=t.injectorIndex;if(Tg(o)){const s=Wa(o),a=Ja(o,e),l=a[H].data;for(let c=0;c<8;c++)e[i+c]=a[s+c]|l[s+c]}return e[i+8]=o,i}function Mu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Rg(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Iu(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;null!==o;){if(r=Ug(o),null===r)return Wo;if(n++,o=o[Bo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Wo}function xu(t,e,n){!function dS(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ss)&&(r=n[ss]),null==r&&(r=n[ss]=uS++);const o=r&Og;e.data[t+(o>>Pg)]|=1<<o}(t,e,n)}function kg(t,e,n){if(n&ne.Optional||void 0!==t)return t;Ta()}function Ng(t,e,n,r){if(n&ne.Optional&&void 0===r&&(r=null),!(n&(ne.Self|ne.Host))){const o=t[La],i=wn(void 0);try{return o?o.get(e,r,n&ne.Optional):Kp(e,r,n&ne.Optional)}finally{wn(i)}}return kg(r,0,n)}function Fg(t,e,n,r=ne.Default,o){if(null!==t){if(1024&e[pe]){const s=function mS(t,e,n,r,o){let i=t,s=e;for(;null!==i&&null!==s&&1024&s[pe]&&!(256&s[pe]);){const a=Lg(i,s,n,r|ne.Self,or);if(a!==or)return a;let l=i.parent;if(!l){const c=s[rg];if(c){const u=c.get(n,or,r);if(u!==or)return u}l=Ug(s),s=s[Bo]}i=l}return o}(t,e,n,r,or);if(s!==or)return s}const i=Lg(t,e,n,r,or);if(i!==or)return i}return Ng(e,n,r,o)}function Lg(t,e,n,r,o){const i=function pS(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ss)?t[ss]:void 0;return"number"==typeof e?e>=0?e&Og:gS:e}(n);if("function"==typeof i){if(!bg(e,t,r))return r&ne.Host?kg(o,0,r):Ng(e,n,r,o);try{const s=i(r);if(null!=s||r&ne.Optional)return s;Ta()}finally{Sg()}}else if("number"==typeof i){let s=null,a=Rg(t,e),l=Wo,c=r&ne.Host?e[Nt][kt]:null;for((-1===a||r&ne.SkipSelf)&&(l=-1===a?Iu(t,e):e[a+8],l!==Wo&&Vg(r,!1)?(s=e[H],a=Wa(l),e=Ja(l,e)):a=-1);-1!==a;){const u=e[H];if(jg(i,a,u.data)){const d=fS(a,e,n,s,r,c);if(d!==or)return d}l=e[a+8],l!==Wo&&Vg(r,e[H].data[a+8]===c)&&jg(i,a,e)?(s=u,a=Wa(l),e=Ja(l,e)):a=-1}}return o}function fS(t,e,n,r,o,i){const s=e[H],a=s.data[t+8],u=Qa(a,s,n,null==r?us(a)&&Su:r!=s&&0!=(3&a.type),o&ne.Host&&i===a);return null!==u?fo(e,s,u,a):or}function Qa(t,e,n,r,o){const i=t.providerIndexes,s=e.data,a=1048575&i,l=t.directiveStart,u=i>>20,h=o?a+u:t.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(o){const f=s[l];if(f&&Fn(f)&&f.type===n)return l}return null}function fo(t,e,n,r){let o=t[n];const i=e.data;if(function sS(t){return t instanceof hs}(o)){const s=o;s.resolving&&function lE(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Me(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ce(t)}(i[n]));const a=Ka(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?wn(s.injectImpl):null;bg(t,r,ne.Default);try{o=t[n]=s.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function oS(t,e,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=ag(e);(n.preOrderHooks??(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks??(n.preOrderHooks=[])).push(0-t,o),i&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t,i))}(n,i[n],e)}finally{null!==l&&wn(l),Ka(a),s.resolving=!1,Sg()}}return o}function jg(t,e,n){return!!(n[e+(t>>Pg)]&1<<t)}function Vg(t,e){return!(t&ne.Self||t&ne.Host&&e)}class Jo{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Fg(this._tNode,this._lView,e,ka(r),n)}}function gS(){return new Jo(At(),k())}function Tt(t){return vr(()=>{const e=t.prototype.constructor,n=e[br]||Au(e),r=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){const i=o[br]||Au(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Au(t){return nu(t)?()=>{const e=Au(te(t));return e&&e()}:uo(t)}function Ug(t){const e=t[H],n=e.type;return 2===n?e.declTNode:1===n?t[kt]:null}const Yo="__parameters__";function Zo(t,e,n){return vr(()=>{const r=function Tu(t){return function(...n){if(t){const r=t(...n);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Yo)?l[Yo]:Object.defineProperty(l,Yo,{value:[]})[Yo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class J{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function po(t,e){t.forEach(n=>Array.isArray(n)?po(n,e):e(n))}function Bg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Xa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ln(t,e,n){let r=Xo(t,e);return r>=0?t[1|r]=n:(r=~r,function CS(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(1===o)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;)t[o]=t[o-2],o--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Pu(t,e){const n=Xo(t,e);if(n>=0)return t[1|n]}function Xo(t,e){return function Hg(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){const i=r+(o-r>>1),s=t[i<<n];if(e===s)return i<<n;s>e?o=i:r=i+1}return~(o<<n)}(t,e,1)}const ys=is(Zo("Optional"),8),_s=is(Zo("SkipSelf"),4);var en=(()=>((en=en||{})[en.Important=1]="Important",en[en.DashCase=2]="DashCase",en))();const ju=new Map;let BS=0;const Uu="__ngContext__";function Ft(t,e){sn(e)?(t[Uu]=e[cs],function zS(t){ju.set(t[cs],t)}(e)):t[Uu]=e}let $u;function Bu(t,e){return $u(t,e)}function ws(t){const e=t[Ye];return Nn(e)?e[Ye]:e}function Hu(t){return cm(t[as])}function zu(t){return cm(t[kn])}function cm(t){for(;null!==t&&!Nn(t);)t=t[kn];return t}function ti(t,e,n,r,o){if(null!=r){let i,s=!1;Nn(r)?i=r:sn(r)&&(s=!0,r=r[wr]);const a=Mt(r);0===t&&null!==n?null==o?gm(e,n,a):go(e,n,a,o||null,!0):1===t&&null!==n?go(e,n,a,o||null,!0):2===t?function Qu(t,e,n){const r=rl(t,e);r&&function uM(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=i&&function fM(t,e,n,r,o){const i=n[Va];i!==Mt(n)&&ti(e,t,r,i,o);for(let a=Ut;a<n.length;a++){const l=n[a];Ds(l[H],l,t,e,r,i)}}(e,t,i,n,o)}}function qu(t,e,n){return t.createElement(e,n)}function dm(t,e){const n=t[zo],r=n.indexOf(e),o=e[Ye];512&e[pe]&&(e[pe]&=-513,pu(o,-1)),n.splice(r,1)}function Wu(t,e){if(t.length<=Ut)return;const n=Ut+e,r=t[n];if(r){const o=r[ls];null!==o&&o!==t&&dm(o,r),e>0&&(t[n-1][kn]=r[kn]);const i=Xa(t,Ut+e);!function nM(t,e){Ds(t,e,e[_e],2,null,null),e[wr]=null,e[kt]=null}(r[H],r);const s=i[nr];null!==s&&s.detachView(i[H]),r[Ye]=null,r[kn]=null,r[pe]&=-65}return r}function hm(t,e){if(!(128&e[pe])){const n=e[_e];n.destroyNode&&Ds(t,e,n,3,null,null),function iM(t){let e=t[as];if(!e)return Ju(t[H],t);for(;e;){let n=null;if(sn(e))n=e[as];else{const r=e[Ut];r&&(n=r)}if(!n){for(;e&&!e[kn]&&e!==t;)sn(e)&&Ju(e[H],e),e=e[Ye];null===e&&(e=t),sn(e)&&Ju(e[H],e),n=e&&e[kn]}e=n}}(e)}}function Ju(t,e){if(!(128&e[pe])){e[pe]&=-65,e[pe]|=128,function cM(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const o=e[n[r]];if(!(o instanceof hs)){const i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],l=i[s+1];En(4,a,l);try{l.call(a)}finally{En(5,a,l)}}else{En(4,o,i);try{i.call(o)}finally{En(5,o,i)}}}}}(t,e),function lM(t,e){const n=t.cleanup,r=e[$o];let o=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const s=n[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=n[i+1]];n[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();e[$o]=null}}(t,e),1===e[H].type&&e[_e].destroy();const n=e[ls];if(null!==n&&Nn(e[Ye])){n!==e[Ye]&&dm(n,e);const r=e[nr];null!==r&&r.detachView(t)}!function GS(t){ju.delete(t[cs])}(e)}}function fm(t,e,n){return function pm(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[wr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=t.data[r.directiveStart+o];if(i===tr.None||i===tr.Emulated)return null}return an(r,n)}}(t,e.parent,n)}function go(t,e,n,r,o){t.insertBefore(e,n,r,o)}function gm(t,e,n){t.appendChild(e,n)}function mm(t,e,n,r,o){null!==r?go(t,e,n,r,o):gm(t,e,n)}function rl(t,e){return t.parentNode(e)}let Ku,ed,al,vm=function _m(t,e,n){return 40&t.type?an(t,n):null};function ol(t,e,n,r){const o=fm(t,r,e),i=e[_e],a=function ym(t,e,n){return vm(t,e,n)}(r.parent||e[kt],r,e);if(null!=o)if(Array.isArray(n))for(let l=0;l<n.length;l++)mm(i,o,n[l],a,!1);else mm(i,o,n,a,!1);void 0!==Ku&&Ku(i,r,e,n,o)}function il(t,e){if(null!==e){const n=e.type;if(3&n)return an(e,t);if(4&n)return Yu(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return il(t,r);{const o=t[e.index];return Nn(o)?Yu(-1,o):Mt(o)}}if(32&n)return Bu(e,t)()||Mt(t[e.index]);{const r=bm(t,e);return null!==r?Array.isArray(r)?r[0]:il(ws(t[Nt]),r):il(t,e.next)}}return null}function bm(t,e){return null!==e?t[Nt][kt].projection[e.projection]:null}function Yu(t,e){const n=Ut+t+1;if(n<e.length){const r=e[n],o=r[H].firstChild;if(null!==o)return il(r,o)}return e[Va]}function Zu(t,e,n,r,o,i,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&Ft(Mt(a),r),n.flags|=2),32!=(32&n.flags))if(8&l)Zu(t,e,n.child,r,o,i,!1),ti(e,t,o,a,i);else if(32&l){const c=Bu(n,r);let u;for(;u=c();)ti(e,t,o,u,i);ti(e,t,o,a,i)}else 16&l?wm(t,e,r,n,o,i):ti(e,t,o,a,i);n=s?n.projectionNext:n.next}}function Ds(t,e,n,r,o,i){Zu(n,r,t.firstChild,e,o,i,!1)}function wm(t,e,n,r,o,i){const s=n[Nt],l=s[kt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ti(e,t,o,l[c],i);else Zu(t,e,l,s[Ye],o,i,!0)}function Dm(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Em(t,e,n){const{mergedAttrs:r,classes:o,styles:i}=n;null!==r&&Eu(t,e,r),null!==o&&Dm(t,e,o),null!==i&&function gM(t,e,n){t.setAttribute(e,"style",n)}(t,e,i)}function xm(t){return function td(){if(void 0===al&&(al=null,Be.trustedTypes))try{al=Be.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return al}()?.createScriptURL(t)||t}class Am{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gp})`}}function zr(t){return t instanceof Am?t.changingThisBreaksApplicationSecurity:t}function Es(t,e){const n=function SM(t){return t instanceof Am&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Gp})`)}return n===e}const AM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ct=(()=>((ct=ct||{})[ct.NONE=0]="NONE",ct[ct.HTML=1]="HTML",ct[ct.STYLE=2]="STYLE",ct[ct.SCRIPT=3]="SCRIPT",ct[ct.URL=4]="URL",ct[ct.RESOURCE_URL=5]="RESOURCE_URL",ct))();function sd(t){const e=Ms();return e?e.sanitize(ct.URL,t)||"":Es(t,"URL")?zr(t):function nd(t){return(t=String(t)).match(AM)?t:"unsafe:"+t}(ce(t))}function Fm(t){const e=Ms();if(e)return xm(e.sanitize(ct.RESOURCE_URL,t)||"");if(Es(t,"ResourceURL"))return xm(zr(t));throw new j(904,!1)}function Ms(){const t=k();return t&&t[uu]}const cl=new J("ENVIRONMENT_INITIALIZER"),jm=new J("INJECTOR",-1),Vm=new J("INJECTOR_DEF_TYPES");class Um{get(e,n=rs){if(n===rs){const r=new Error(`NullInjectorError: No provider for ${Le(e)}!`);throw r.name="NullInjectorError",r}return n}}function HM(...t){return{\u0275providers:$m(0,t),\u0275fromNgModule:!0}}function $m(t,...e){const n=[],r=new Set;let o;return po(e,i=>{const s=i;ad(s,n,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&Bm(o,n),n}function Bm(t,e){for(let n=0;n<t.length;n++){const{providers:o}=t[n];ld(o,i=>{e.push(i)})}}function ad(t,e,n,r){if(!(t=te(t)))return!1;let o=null,i=Wp(t);const s=!i&&xe(t);if(i||s){if(s&&!s.standalone)return!1;o=t}else{const l=t.ngModule;if(i=Wp(l),!i)return!1;o=l}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)ad(c,e,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{po(i.imports,u=>{ad(u,e,n,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&Bm(c,e)}if(!a){const c=uo(o)||(()=>new o);e.push({provide:o,useFactory:c,deps:Se},{provide:Vm,useValue:o,multi:!0},{provide:cl,useValue:()=>B(o),multi:!0})}const l=i.providers;null==l||a||ld(l,u=>{e.push(u)})}}return o!==t&&void 0!==t.providers}function ld(t,e){for(let n of t)ru(n)&&(n=n.\u0275providers),Array.isArray(n)?ld(n,e):e(n)}const zM=ke({provide:String,useValue:ke});function cd(t){return null!==t&&"object"==typeof t&&zM in t}function mo(t){return"function"==typeof t}const ud=new J("Set Injector scope."),ul={},qM={};let dd;function dl(){return void 0===dd&&(dd=new Um),dd}class ir{}class Gm extends ir{get destroyed(){return this._destroyed}constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fd(e,s=>this.processProvider(s)),this.records.set(jm,ri(void 0,this)),o.has("environment")&&this.records.set(ir,ri(void 0,this));const i=this.records.get(ud);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Vm.multi,Se,ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=Vo(this),r=wn(void 0);try{return e()}finally{Vo(n),wn(r)}}get(e,n=rs,r=ne.Default){this.assertNotDestroyed(),r=ka(r);const o=Vo(this),i=wn(void 0);try{if(!(r&ne.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function QM(t){return"function"==typeof t||"object"==typeof t&&t instanceof J}(e)&&Oa(e);a=l&&this.injectableDefInScope(l)?ri(hd(e),ul):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&ne.Self?dl():this.parent).get(e,n=r&ne.Optional&&n===rs?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Ra]=s[Ra]||[]).unshift(Le(e)),o)throw s;return function wE(t,e,n,r){const o=t[Ra];throw e[Yp]&&o.unshift(e[Yp]),t.message=function DE(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==vE?t.slice(2):t;let o=Le(e);if(Array.isArray(e))o=e.map(Le).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Le(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(_E,"\n  ")}`}("\n"+t.message,o,n,r),t[yE]=o,t[Ra]=null,t}(s,e,"R3InjectorError",this.source)}throw s}finally{wn(i),Vo(o)}}resolveInjectorInitializers(){const e=Vo(this),n=wn(void 0);try{const r=this.get(cl.multi,Se,ne.Self);for(const o of r)o()}finally{Vo(e),wn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Le(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){let n=mo(e=te(e))?e:te(e&&e.provide);const r=function JM(t){return cd(t)?ri(void 0,t.useValue):ri(qm(t),ul)}(e);if(mo(e)||!0!==e.multi)this.records.get(n);else{let o=this.records.get(n);o||(o=ri(void 0,ul,!0),o.factory=()=>au(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===ul&&(n.value=qM,n.value=n.factory()),"object"==typeof n.value&&n.value&&function YM(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=te(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function hd(t){const e=Oa(t),n=null!==e?e.factory:uo(t);if(null!==n)return n;if(t instanceof J)throw new j(204,!1);if(t instanceof Function)return function WM(t){const e=t.length;if(e>0)throw function ms(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new j(204,!1);const n=function pE(t){return t&&(t[Pa]||t[Jp])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new j(204,!1)}function qm(t,e,n){let r;if(mo(t)){const o=te(t);return uo(o)||hd(o)}if(cd(t))r=()=>te(t.useValue);else if(function zm(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...au(t.deps||[]));else if(function Hm(t){return!(!t||!t.useExisting)}(t))r=()=>B(te(t.useExisting));else{const o=te(t&&(t.useClass||t.provide));if(!function KM(t){return!!t.deps}(t))return uo(o)||hd(o);r=()=>new o(...au(t.deps))}return r}function ri(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fd(t,e){for(const n of t)Array.isArray(n)?fd(n,e):n&&ru(n)?fd(n.\u0275providers,e):e(n)}class ZM{}class Wm{}class eI{resolveComponentFactory(e){throw function XM(t){const e=Error(`No component factory found for ${Le(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let Is=(()=>{class t{}return t.NULL=new eI,t})();function tI(){return oi(At(),k())}function oi(t,e){return new cn(an(t,e))}let cn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=tI,t})();function nI(t){return t instanceof cn?t.nativeElement:t}class Km{}let Mr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function rI(){const t=k(),n=Xt(At().index,t);return(sn(n)?n:t)[_e]}(),t})(),oI=(()=>{class t{}return t.\u0275prov=W({token:t,providedIn:"root",factory:()=>null}),t})();class xs{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const iI=new xs("15.2.10"),pd={},gd="ngOriginalError";function md(t){return t[gd]}class ii{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&md(e);for(;n&&md(n);)n=md(n);return n||null}}function Ir(t){return t instanceof Function?t():t}function Qm(t,e,n){let r=t.length;for(;;){const o=t.indexOf(e,n);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}const Zm="ng-template";function mI(t,e,n){let r=0,o=!0;for(;r<t.length;){let i=t[r++];if("string"==typeof i&&o){const s=t[r++];if(n&&"class"===i&&-1!==Qm(s.toLowerCase(),e,0))return!0}else{if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function Xm(t){return 4===t.type&&t.value!==Zm}function yI(t,e,n){return e===(4!==t.type||n?t.value:Zm)}function _I(t,e,n){let r=4;const o=t.attrs||[],i=function bI(t){for(let e=0;e<t.length;e++)if(Ig(t[e]))return e;return t.length}(o);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!yI(t,l,n)||""===l&&1===e.length){if(Ln(r))return!1;s=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!mI(t.attrs,c,n)){if(Ln(r))return!1;s=!0}continue}const d=vI(8&r?"class":l,o,Xm(t),n);if(-1===d){if(Ln(r))return!1;s=!0;continue}if(""!==c){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==Qm(f,c,0)||2&r&&c!==h){if(Ln(r))return!1;s=!0}}}}else{if(!s&&!Ln(r)&&!Ln(l))return!1;if(s&&Ln(l))continue;s=!1,r=l|1&r}}return Ln(r)||s}function Ln(t){return 0==(1&t)}function vI(t,e,n,r){if(null===e)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){const s=e[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function wI(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ey(t,e,n=!1){for(let r=0;r<e.length;r++)if(_I(t,e[r],n))return!0;return!1}function ty(t,e){return t?":not("+e.trim()+")":e}function EI(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Ln(s)&&(e+=ty(i,o),o=""),r=s,i=i||!Ln(r);n++}return""!==o&&(e+=ty(i,o)),e}const de={};function L(t){ny(Ee(),k(),Bt()+t,!1)}function ny(t,e,n,r){if(!r)if(3==(3&e[pe])){const i=t.preOrderCheckHooks;null!==i&&Ga(e,i,n)}else{const i=t.preOrderHooks;null!==i&&qa(e,i,0,n)}ho(n)}function sy(t,e=null,n=null,r){const o=ay(t,e,n,r);return o.resolveInjectorInitializers(),o}function ay(t,e=null,n=null,r,o=new Set){const i=[n||Se,HM(t)];return r=r||("object"==typeof t?void 0:Le(t)),new Gm(i,e||dl(),r||null,o)}let sr=(()=>{class t{static create(n,r){if(Array.isArray(n))return sy({name:""},r,n,"");{const o=n.name??"";return sy({name:o},n.parent,n.providers,o)}}}return t.THROW_IF_NOT_FOUND=rs,t.NULL=new Um,t.\u0275prov=W({token:t,providedIn:"any",factory:()=>B(jm)}),t.__NG_ELEMENT_ID__=-1,t})();function T(t,e=ne.Default){const n=k();return null===n?B(t,e):Fg(At(),n,te(t),e)}function gy(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r+1];if(-1!==i){const s=t.data[i];vu(n[r]),s.contentQueries(2,e[i],i)}}}function fl(t,e,n,r,o,i,s,a,l,c,u){const d=e.blueprint.slice();return d[wr]=o,d[pe]=76|r,(null!==u||t&&1024&t[pe])&&(d[pe]|=1024),fg(d),d[Ye]=d[Bo]=t,d[nt]=n,d[ja]=s||t&&t[ja],d[_e]=a||t&&t[_e],d[uu]=l||t&&t[uu]||null,d[La]=c||t&&t[La]||null,d[kt]=i,d[cs]=function HS(){return BS++}(),d[rg]=u,d[Nt]=2==e.type?t[Nt]:d,d}function li(t,e,n,r,o){let i=t.data[e];if(null===i)i=function bd(t,e,n,r,o){const i=mg(),s=gu(),l=t.data[e]=function YI(t,e,n,r,o,i){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,e,r,o);return null===t.firstChild&&(t.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(t,e,n,r,o),function WE(){return ue.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=function ds(){const t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return rr(i,!0),i}function As(t,e,n,r){if(0===n)return-1;const o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function wd(t,e,n){Cu(e);try{const r=t.viewQuery;null!==r&&Od(1,r,n);const o=t.template;null!==o&&my(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&gy(t,e),t.staticViewQueries&&Od(2,t.viewQuery,n);const i=t.components;null!==i&&function WI(t,e){for(let n=0;n<e.length;n++)mx(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[pe]&=-5,bu()}}function pl(t,e,n,r){const o=e[pe];if(128!=(128&o)){Cu(e);try{fg(e),function _g(t){return ue.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&my(t,e,n,2,r);const s=3==(3&o);if(s){const c=t.preOrderCheckHooks;null!==c&&Ga(e,c,null)}else{const c=t.preOrderHooks;null!==c&&qa(e,c,0,null),wu(e,0)}if(function px(t){for(let e=Hu(t);null!==e;e=zu(e)){if(!e[og])continue;const n=e[zo];for(let r=0;r<n.length;r++){const o=n[r];512&o[pe]||pu(o[Ye],1),o[pe]|=512}}}(e),function fx(t){for(let e=Hu(t);null!==e;e=zu(e))for(let n=Ut;n<e.length;n++){const r=e[n],o=r[H];Ha(r)&&pl(o,r,o.template,r[nt])}}(e),null!==t.contentQueries&&gy(t,e),s){const c=t.contentCheckHooks;null!==c&&Ga(e,c)}else{const c=t.contentHooks;null!==c&&qa(e,c,1),wu(e,1)}!function GI(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)ho(~o);else{const i=o,s=n[++r],a=n[++r];JE(s,i),a(2,e[i])}}}finally{ho(-1)}}(t,e);const a=t.components;null!==a&&function qI(t,e){for(let n=0;n<e.length;n++)gx(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&Od(2,l,r),s){const c=t.viewCheckHooks;null!==c&&Ga(e,c)}else{const c=t.viewHooks;null!==c&&qa(e,c,2),wu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[pe]&=-41,512&e[pe]&&(e[pe]&=-513,pu(e[Ye],-1))}finally{bu()}}}function my(t,e,n,r,o){const i=Bt(),s=2&r;try{ho(-1),s&&e.length>He&&ny(t,e,He,!1),En(s?2:0,o),n(r,o)}finally{ho(i),En(s?3:1,o)}}function Dd(t,e,n){if(hu(e)){const o=e.directiveEnd;for(let i=e.directiveStart;i<o;i++){const s=t.data[i];s.contentQueries&&s.contentQueries(1,n[i],i)}}}function Ed(t,e,n){gg()&&(function rx(t,e,n,r){const o=n.directiveStart,i=n.directiveEnd;us(n)&&function ux(t,e,n){const r=an(e,t),o=yy(n),i=t[ja],s=gl(t,fl(t,o,null,n.onPush?32:16,r,e,i,i.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||Ya(n,e),Ft(r,e);const s=n.initialInputs;for(let a=o;a<i;a++){const l=t.data[a],c=fo(e,t,a,n);Ft(c,e),null!==s&&dx(0,a-o,c,l,0,s),Fn(l)&&(Xt(n.index,e)[nt]=fo(e,t,a,n))}}(t,e,n,an(n,e)),64==(64&n.flags)&&wy(t,e,n))}function Sd(t,e,n=an){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?n(e,t):t[s];t[o++]=a}}}function yy(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Md(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Md(t,e,n,r,o,i,s,a,l,c){const u=He+r,d=u+o,h=function JI(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:de);return n}(u,d),f="function"==typeof c?c():c;return h[H]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function _y(t,e,n,r){const o=Ey(e);null===n?o.push(r):(o.push(n),t.firstCreatePass&&Sy(t).push(r,o.length-1))}function vy(t,e,n,r){for(let o in t)if(t.hasOwnProperty(o)){n=null===n?{}:n;const i=t[o];null===r?Cy(n,e,o,i):r.hasOwnProperty(o)&&Cy(n,e,r[o],i)}return n}function Cy(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Id(t,e,n,r){if(gg()){const o=null===r?null:{"":-1},i=function ix(t,e){const n=t.directiveRegistry;let r=null,o=null;if(n)for(let i=0;i<n.length;i++){const s=n[i];if(ey(e,s.selectors,!1))if(r||(r=[]),Fn(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),xd(t,e,a.length)}else r.unshift(s),xd(t,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(t,n);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&by(t,e,n,s,o,a),o&&function sx(t,e,n){if(e){const r=t.localNames=[];for(let o=0;o<e.length;o+=2){const i=n[e[o+1]];if(null==i)throw new j(-301,!1);r.push(e[o],i)}}}(n,r,o)}n.mergedAttrs=fs(n.mergedAttrs,n.attrs)}function by(t,e,n,r,o,i){for(let c=0;c<r.length;c++)xu(Ya(n,e),t,r[c].type);!function lx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=As(t,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];n.mergedAttrs=fs(n.mergedAttrs,u.hostAttrs),cx(t,n,e,l,u),ax(l,u,o),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function QI(t,e,n){const o=e.directiveEnd,i=t.data,s=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<o;u++){const d=i[u],h=n?n.get(d):null,p=h?h.outputs:null;l=vy(d.inputs,u,l,h?h.inputs:null),c=vy(d.outputs,u,c,p);const g=null===l||null===s||Xm(e)?null:hx(l,u,s);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,i)}function wy(t,e,n){const r=n.directiveStart,o=n.directiveEnd,i=n.index,s=function KE(){return ue.lFrame.currentDirectiveIndex}();try{ho(i);for(let a=r;a<o;a++){const l=t.data[a],c=e[a];yu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&ox(l,c)}}finally{ho(-1),yu(s)}}function ox(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function xd(t,e,n){e.componentOffset=n,(t.components??(t.components=[])).push(e.index)}function ax(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Fn(e)&&(n[""]=t)}}function cx(t,e,n,r,o){t.data[r]=o;const i=o.factory||(o.factory=uo(o.type)),s=new hs(i,Fn(o),T);t.blueprint[r]=s,n[r]=s,function tx(t,e,n,r,o){const i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function nx(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,i)}}(t,e,r,As(t,n,o.hostVars,de),o)}function ar(t,e,n,r,o,i){const s=an(t,e);!function Ad(t,e,n,r,o,i,s){if(null==i)t.removeAttribute(e,o,n);else{const a=null==s?ce(i):s(i,r||"",o);t.setAttribute(e,o,a,n)}}(e[_e],s,i,t.value,n,r,o)}function dx(t,e,n,r,o,i){const s=i[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(n,d,c,u):n[u]=d}}}function hx(t,e,n){let r=null,o=0;for(;o<n.length;){const i=n[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(t.hasOwnProperty(i)){null===r&&(r=[]);const s=t[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],n[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Dy(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null]}function gx(t,e){const n=Xt(e,t);if(Ha(n)){const r=n[H];48&n[pe]?pl(r,n,r.template,n[nt]):n[co]>0&&Td(n)}}function Td(t){for(let r=Hu(t);null!==r;r=zu(r))for(let o=Ut;o<r.length;o++){const i=r[o];if(Ha(i))if(512&i[pe]){const s=i[H];pl(s,i,s.template,i[nt])}else i[co]>0&&Td(i)}const n=t[H].components;if(null!==n)for(let r=0;r<n.length;r++){const o=Xt(n[r],t);Ha(o)&&o[co]>0&&Td(o)}}function mx(t,e){const n=Xt(e,t),r=n[H];(function yx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),wd(r,n,n[nt])}function gl(t,e){return t[as]?t[ng][kn]=e:t[as]=e,t[ng]=e,e}function ml(t){for(;t;){t[pe]|=32;const e=ws(t);if(AE(t)&&!e)return t;t=e}return null}function yl(t,e,n,r=!0){const o=e[ja];o.begin&&o.begin();try{pl(t,e,t.template,n)}catch(s){throw r&&Iy(e,s),s}finally{o.end&&o.end()}}function Od(t,e,n){vu(0),e(t,n)}function Ey(t){return t[$o]||(t[$o]=[])}function Sy(t){return t.cleanup||(t.cleanup=[])}function Iy(t,e){const n=t[La],r=n?n.get(ii,null):null;r&&r.handleError(e)}function Pd(t,e,n,r,o){for(let i=0;i<n.length;){const s=n[i++],a=n[i++],l=e[s],c=t.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function xr(t,e,n){const r=Ba(e,t);!function um(t,e,n){t.setValue(e,n)}(t[_e],r,n)}function _l(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=tu(o,a):2==i&&(r=tu(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function vl(t,e,n,r,o=!1){for(;null!==n;){const i=e[n.index];if(null!==i&&r.push(Mt(i)),Nn(i))for(let a=Ut;a<i.length;a++){const l=i[a],c=l[H].firstChild;null!==c&&vl(l[H],l,c,r)}const s=n.type;if(8&s)vl(t,e,n.child,r);else if(32&s){const a=Bu(n,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=bm(e,n);if(Array.isArray(a))r.push(...a);else{const l=ws(e[Nt]);vl(l[H],l,a,r,!0)}}n=o?n.projectionNext:n.next}return r}class Ts{get rootNodes(){const e=this._lView,n=e[H];return vl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nt]}set context(e){this._lView[nt]=e}get destroyed(){return 128==(128&this._lView[pe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ye];if(Nn(e)){const n=e[Ua],r=n?n.indexOf(this):-1;r>-1&&(Wu(e,r),Xa(n,r))}this._attachedToViewContainer=!1}hm(this._lView[H],this._lView)}onDestroy(e){_y(this._lView[H],this._lView,null,e)}markForCheck(){ml(this._cdRefInjectingView||this._lView)}detach(){this._lView[pe]&=-65}reattach(){this._lView[pe]|=64}detectChanges(){yl(this._lView[H],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oM(t,e){Ds(t,e,e[_e],2,null,null)}(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e}}class _x extends Ts{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;yl(e[H],e,e[nt],!1)}checkNoChanges(){}get context(){return null}}class xy extends Is{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=xe(e);return new Os(n,this.ngModule)}}function Ay(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Cx{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ka(r);const o=this.injector.get(e,pd,r);return o!==pd||n===pd?o:this.parentInjector.get(e,n,r)}}class Os extends Wm{get inputs(){return Ay(this.componentDef.inputs)}get outputs(){return Ay(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function SI(t){return t.map(EI).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,o){let i=(o=o||this.ngModule)instanceof ir?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new Cx(e,i):e,a=s.get(Km,null);if(null===a)throw new j(407,!1);const l=s.get(oI,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function KI(t,e,n){return t.selectRootElement(e,n===tr.ShadowDom)}(c,r,this.componentDef.encapsulation):qu(c,u,function vx(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Md(0,null,null,1,0,null,null,null,null,null),p=fl(null,f,null,h,null,null,a,c,l,s,null);let g,y;Cu(p);try{const _=this.componentDef;let x,b=null;_.findHostDirectiveDefs?(x=[],b=new Map,_.findHostDirectiveDefs(_,x,b),x.push(_)):x=[_];const P=function wx(t,e){const n=t[H],r=He;return t[r]=e,li(n,r,2,"#host",null)}(p,d),N=function Dx(t,e,n,r,o,i,s,a){const l=o[H];!function Ex(t,e,n,r){for(const o of t)e.mergedAttrs=fs(e.mergedAttrs,o.hostAttrs);null!==e.mergedAttrs&&(_l(e,e.mergedAttrs,!0),null!==n&&Em(r,n,e))}(r,t,e,s);const c=i.createRenderer(e,n),u=fl(o,yy(n),null,n.onPush?32:16,o[t.index],t,i,c,a||null,null,null);return l.firstCreatePass&&xd(l,t,r.length-1),gl(o,u),o[t.index]=u}(P,d,_,x,p,a,c);y=hg(f,He),d&&function Mx(t,e,n,r){if(r)Eu(t,n,["ng-version",iI.full]);else{const{attrs:o,classes:i}=function MI(t){const e=[],n=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&e.push(i,t[++r]):8===o&&n.push(i);else{if(!Ln(o))break;o=i}r++}return{attrs:e,classes:n}}(e.selectors[0]);o&&Eu(t,n,o),i&&i.length>0&&Dm(t,n,i.join(" "))}}(c,_,d,r),void 0!==n&&function Ix(t,e,n){const r=t.projection=[];for(let o=0;o<e.length;o++){const i=n[o];r.push(null!=i?Array.from(i):null)}}(y,this.ngContentSelectors,n),g=function Sx(t,e,n,r,o,i){const s=At(),a=o[H],l=an(s,o);by(a,o,s,n,null,r);for(let u=0;u<n.length;u++)Ft(fo(o,a,s.directiveStart+u,s),o);wy(a,o,s),l&&Ft(l,o);const c=fo(o,a,s.directiveStart+s.componentOffset,s);if(t[nt]=o[nt]=c,null!==i)for(const u of i)u(c,e);return Dd(a,s,t),c}(N,_,x,b,p,[xx]),wd(f,p,null)}finally{bu()}return new bx(this.componentType,g,oi(y,p),p,y)}}class bx extends ZM{constructor(e,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=n,this.hostView=this.changeDetectorRef=new _x(o),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[e])){const i=this._rootLView;Pd(i[H],i,o,e,n),ml(Xt(this._tNode.index,i))}}get injector(){return new Jo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function xx(){const t=At();za(k()[H],t)}function Te(t){let e=function Ty(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let o;if(Fn(t))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);o=e.\u0275dir}if(o){if(n){r.push(o);const s=t;s.inputs=Rd(t.inputs),s.declaredInputs=Rd(t.declaredInputs),s.outputs=Rd(t.outputs);const a=o.hostBindings;a&&Px(t,a);const l=o.viewQuery,c=o.contentQueries;if(l&&Tx(t,l),c&&Ox(t,c),eu(t.inputs,o.inputs),eu(t.declaredInputs,o.declaredInputs),eu(t.outputs,o.outputs),Fn(o)&&o.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(t),a===Te&&(n=!1)}}e=Object.getPrototypeOf(e)}!function Ax(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const o=t[r];o.hostVars=e+=o.hostVars,o.hostAttrs=fs(o.hostAttrs,n=fs(n,o.hostAttrs))}}(r)}function Rd(t){return t===Cr?{}:t===Se?[]:t}function Tx(t,e){const n=t.viewQuery;t.viewQuery=n?(r,o)=>{e(r,o),n(r,o)}:e}function Ox(t,e){const n=t.contentQueries;t.contentQueries=n?(r,o,i)=>{e(r,o,i),n(r,o,i)}:e}function Px(t,e){const n=t.hostBindings;t.hostBindings=n?(r,o)=>{e(r,o),n(r,o)}:e}function Cl(t){return!!kd(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function kd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Lt(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function dn(t,e,n,r){const o=k();return Lt(o,qo(),e)&&(Ee(),ar(We(),o,t,e,n,r)),dn}function di(t,e,n,r,o,i){const a=function yo(t,e,n,r){const o=Lt(t,e,n);return Lt(t,e+1,r)||o}(t,function Dr(){return ue.lFrame.bindingIndex}(),n,o);return Er(2),a?e+ce(n)+r+ce(o)+i:de}function Ce(t,e,n,r,o,i,s,a){const l=k(),c=Ee(),u=t+He,d=c.firstCreatePass?function Bx(t,e,n,r,o,i,s,a,l){const c=e.consts,u=li(e,t,4,s||null,Hr(c,a));Id(e,n,u,Hr(c,l)),za(e,u);const d=u.tView=Md(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,n,r,o,i,s):c.data[u];rr(d,!1);const h=l[_e].createComment("");ol(c,l,h,d),Ft(h,l),gl(l,l[u]=Dy(h,l,h,d)),$a(d)&&Ed(c,l,d),null!=s&&Sd(l,d,a)}function Nd(t){return function Go(t,e){return t[e]}(function qE(){return ue.lFrame.contextLView}(),He+t)}function q(t,e,n){const r=k();return Lt(r,qo(),e)&&function un(t,e,n,r,o,i,s,a){const l=an(e,n);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(Pd(t,n,u,r,o),us(e)&&function XI(t,e){const n=Xt(e,t);16&n[pe]||(n[pe]|=32)}(n,e.index)):3&e.type&&(r=function ZI(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),o=null!=s?s(o,e.value||"",r):o,i.setProperty(l,r,o))}(Ee(),We(),r,t,e,r[_e],n,!1),q}function Fd(t,e,n,r,o){const s=o?"class":"style";Pd(t,n,e.inputs[s],s,r)}function D(t,e,n,r){const o=k(),i=Ee(),s=He+t,a=o[_e],l=i.firstCreatePass?function zx(t,e,n,r,o,i){const s=e.consts,l=li(e,t,2,r,Hr(s,o));return Id(e,n,l,Hr(s,i)),null!==l.attrs&&_l(l,l.attrs,!1),null!==l.mergedAttrs&&_l(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,i,o,e,n,r):i.data[s],c=o[s]=qu(a,e,function rS(){return ue.lFrame.currentNamespace}()),u=$a(l);return rr(l,!0),Em(a,c,l),32!=(32&l.flags)&&ol(i,o,c,l),0===function $E(){return ue.lFrame.elementDepthCount}()&&Ft(c,o),function BE(){ue.lFrame.elementDepthCount++}(),u&&(Ed(i,o,l),Dd(i,l,o)),null!==r&&Sd(o,l),D}function C(){let t=At();gu()?mu():(t=t.parent,rr(t,!1));const e=t;!function HE(){ue.lFrame.elementDepthCount--}();const n=Ee();return n.firstCreatePass&&(za(n,t),hu(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function aS(t){return 0!=(8&t.flags)}(e)&&Fd(n,e,k(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function lS(t){return 0!=(16&t.flags)}(e)&&Fd(n,e,k(),e.stylesWithoutHost,!1),C}function jn(t,e,n,r){return D(t,e,n,r),C(),jn}function _o(t,e,n){const r=k(),o=Ee(),i=t+He,s=o.firstCreatePass?function Gx(t,e,n,r,o){const i=e.consts,s=Hr(i,r),a=li(e,t,8,"ng-container",s);return null!==s&&_l(a,s,!0),Id(e,n,a,Hr(i,o)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,o,r,e,n):o.data[i];rr(s,!0);const a=r[i]=r[_e].createComment("");return ol(o,r,a,s),Ft(a,r),$a(s)&&(Ed(o,r,s),Dd(o,s,r)),null!=n&&Sd(r,s),_o}function vo(){let t=At();const e=Ee();return gu()?mu():(t=t.parent,rr(t,!1)),e.firstCreatePass&&(za(e,t),hu(t)&&e.queries.elementEnd(t)),vo}function cr(){return k()}function Rs(t){return!!t&&"function"==typeof t.then}const Ld=function zy(t){return!!t&&"function"==typeof t.subscribe};function re(t,e,n,r){const o=k(),i=Ee(),s=At();return function qy(t,e,n,r,o,i,s){const a=$a(r),c=t.firstCreatePass&&Sy(t),u=e[nt],d=Ey(e);let h=!0;if(3&r.type||s){const g=an(r,e),y=s?s(g):g,_=d.length,x=s?P=>s(Mt(P[r.index])):r.index;let b=null;if(!s&&a&&(b=function qx(t,e,n,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===n&&o[i+1]===r){const a=e[$o],l=o[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(t,e,o,r.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=i,b.__ngLastListenerFn__=i,h=!1;else{i=Jy(r,e,u,i,!1);const P=n.listen(y,o,i);d.push(i,P),c&&c.push(o,x,_,_+1)}}else i=Jy(r,e,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const g=p.length;if(g)for(let y=0;y<g;y+=2){const N=e[p[y]][p[y+1]].subscribe(i),z=d.length;d.push(i,N),c&&c.push(o,r.index,z,-(z+1))}}}(i,o,o[_e],s,t,e,r),re}function Wy(t,e,n,r){try{return En(6,e,n),!1!==n(r)}catch(o){return Iy(t,o),!1}finally{En(7,e,n)}}function Jy(t,e,n,r,o){return function i(s){if(s===Function)return r;ml(t.componentOffset>-1?Xt(t.index,e):e);let l=Wy(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)l=Wy(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function se(t=1){return function QE(t){return(ue.lFrame.contextLView=function ZE(t,e){for(;t>0;)e=e[Bo],t--;return e}(t,ue.lFrame.contextLView))[nt]}(t)}function wl(t,e){return t<<17|e<<2}function Gr(t){return t>>17&32767}function Vd(t){return 2|t}function Co(t){return(131068&t)>>2}function Ud(t,e){return-131069&t|e<<2}function $d(t){return 1|t}function o_(t,e,n,r,o){const i=t[n+1],s=null===e;let a=r?Gr(i):Co(i),l=!1;for(;0!==a&&(!1===l||s);){const u=t[a+1];tA(t[a],e)&&(l=!0,t[a+1]=r?$d(u):Vd(u)),a=r?Gr(u):Co(u)}l&&(t[n+1]=r?Vd(i):$d(i))}function tA(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Xo(t,e)>=0}function ks(t,e,n){return Vn(t,e,n,!1),ks}function Ar(t,e){return Vn(t,e,null,!0),Ar}function Vn(t,e,n,r){const o=k(),i=Ee(),s=Er(2);i.firstUpdatePass&&function h_(t,e,n,r){const o=t.data;if(null===o[n+1]){const i=o[Bt()],s=function d_(t,e){return e>=t.expandoStartIndex}(t,n);(function m_(t,e){return 0!=(t.flags&(e?8:16))})(i,r)&&null===e&&!s&&(e=!1),e=function uA(t,e,n,r){const o=function _u(t){const e=ue.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=r?e.residualClasses:e.residualStyles;if(null===o)0===(r?e.classBindings:e.styleBindings)&&(n=Ns(n=Bd(null,t,e,n,r),e.attrs,r),i=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==o)if(n=Bd(o,t,e,n,r),null===i){let l=function dA(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Co(r))return t[Gr(r)]}(t,e,r);void 0!==l&&Array.isArray(l)&&(l=Bd(null,t,e,l[1],r),l=Ns(l,e.attrs,r),function hA(t,e,n,r){t[Gr(n?e.classBindings:e.styleBindings)]=r}(t,e,r,l))}else i=function fA(t,e,n){let r;const o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++)r=Ns(r,t[i].hostAttrs,n);return Ns(r,e.attrs,n)}(t,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),n}(o,i,e,r),function Xx(t,e,n,r,o,i){let s=i?e.classBindings:e.styleBindings,a=Gr(s),l=Co(s);t[r]=n;let u,c=!1;if(Array.isArray(n)?(u=n[1],(null===u||Xo(n,u)>0)&&(c=!0)):u=n,o)if(0!==l){const h=Gr(t[a+1]);t[r+1]=wl(h,a),0!==h&&(t[h+1]=Ud(t[h+1],r)),t[a+1]=function Qx(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=wl(a,0),0!==a&&(t[a+1]=Ud(t[a+1],r)),a=r;else t[r+1]=wl(l,0),0===a?a=r:t[l+1]=Ud(t[l+1],r),l=r;c&&(t[r+1]=Vd(t[r+1])),o_(t,u,r,!0),o_(t,u,r,!1),function eA(t,e,n,r,o){const i=o?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&Xo(i,e)>=0&&(n[r+1]=$d(n[r+1]))}(e,u,t,r,i),s=wl(a,l),i?e.classBindings=s:e.styleBindings=s}(o,i,e,n,s,r)}}(i,t,s,r),e!==de&&Lt(o,s,e)&&function p_(t,e,n,r,o,i,s,a){if(!(3&e.type))return;const l=t.data,c=l[a+1],u=function Zx(t){return 1==(1&t)}(c)?g_(l,e,n,o,Co(c),s):void 0;Dl(u)||(Dl(i)||function Yx(t){return 2==(2&t)}(c)&&(i=g_(l,null,n,o,a,s)),function pM(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let i=-1===r.indexOf("-")?void 0:en.DashCase;null==o?t.removeStyle(n,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=en.Important),t.setStyle(n,r,o,i))}}(r,s,Ba(Bt(),n),o,i))}(i,i.data[Bt()],o,o[_e],t,o[s+1]=function yA(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Le(zr(t)))),t}(e,n),r,s)}function Bd(t,e,n,r,o){let i=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(i=e[a],r=Ns(r,i.hostAttrs,o),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ns(t,e,n){const r=n?1:2;let o=-1;if(null!==e)for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?o=s:o===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ln(t,s,!!n||e[++i]))}return void 0===t?null:t}function g_(t,e,n,r,o,i){const s=null===e;let a;for(;o>0;){const l=t[o],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=n[o+1];h===de&&(h=d?Se:void 0);let f=d?Pu(h,r):u===r?h:void 0;if(c&&!Dl(f)&&(f=Pu(l,r)),Dl(f)&&(a=f,s))return a;const p=t[o+1];o=s?Gr(p):Co(p)}if(null!==e){let l=i?e.residualClasses:e.residualStyles;null!=l&&(a=Pu(l,r))}return a}function Dl(t){return void 0!==t}function M(t,e=""){const n=k(),r=Ee(),o=t+He,i=r.firstCreatePass?li(r,o,1,e,null):r.data[o],s=n[o]=function Gu(t,e){return t.createText(e)}(n[_e],e);ol(r,n,s,i),rr(i,!1)}function $n(t){return Qe("",t,""),$n}function Qe(t,e,n){const r=k(),o=function ui(t,e,n,r){return Lt(t,qo(),n)?e+ce(n)+r:de}(r,t,e,n);return o!==de&&xr(r,Bt(),o),Qe}function hr(t,e,n,r,o){const i=k(),s=di(i,t,e,n,r,o);return s!==de&&xr(i,Bt(),s),hr}const Ci="en-US";let L_=Ci;function Gd(t,e,n,r,o){if(t=te(t),Array.isArray(t))for(let i=0;i<t.length;i++)Gd(t[i],e,n,r,o);else{const i=Ee(),s=k();let a=mo(t)?t:te(t.provide),l=qm(t);const c=At(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(mo(t)||!t.multi){const f=new hs(l,o,T),p=Wd(a,e,o?u:u+h,d);-1===p?(xu(Ya(c,s),i,a),qd(i,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{const f=Wd(a,e,u+h,d),p=Wd(a,e,u,u+h),y=p>=0&&n[p];if(o&&!y||!o&&!(f>=0&&n[f])){xu(Ya(c,s),i,a);const _=function NT(t,e,n,r,o){const i=new hs(t,n,T);return i.multi=[],i.index=e,i.componentProviders=0,lv(i,o,r&&!n),i}(o?kT:RT,n.length,o,r,l);!o&&y&&(n[p].providerFactory=_),qd(i,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),n.push(_),s.push(_)}else qd(i,t,f>-1?f:p,lv(n[o?p:f],l,!o&&r));!o&&r&&y&&n[p].componentProviders++}}}function qd(t,e,n,r){const o=mo(e),i=function GM(t){return!!t.useClass}(e);if(o||i){const l=(i?te(e.useClass):e).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&e.multi){const u=c.indexOf(n);-1===u?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function lv(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Wd(t,e,n,r){for(let o=n;o<r;o++)if(e[o]===t)return o;return-1}function RT(t,e,n,r){return Jd(this.multi,[])}function kT(t,e,n,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=fo(n,n[H],this.providerFactory.index,r);i=a.slice(0,s),Jd(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],Jd(o,i);return i}function Jd(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ge(t,e=[]){return n=>{n.providersResolver=(r,o)=>function PT(t,e,n){const r=Ee();if(r.firstCreatePass){const o=Fn(t);Gd(n,r.data,r.blueprint,o,!0),Gd(e,r.data,r.blueprint,o,!1)}}(r,o?o(t):t,e)}}class bi{}class cv{}class uv extends bi{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xy(this);const r=on(e);this._bootstrapComponents=Ir(r.bootstrap),this._r3Injector=ay(e,n,[{provide:bi,useValue:this},{provide:Is,useValue:this.componentFactoryResolver}],Le(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Kd extends cv{constructor(e){super(),this.moduleType=e}create(e){return new uv(this.moduleType,e)}}class LT extends bi{constructor(e,n,r){super(),this.componentFactoryResolver=new xy(this),this.instance=null;const o=new Gm([...e,{provide:bi,useValue:this},{provide:Is,useValue:this.componentFactoryResolver}],n||dl(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function xl(t,e,n=null){return new LT(t,e,n).injector}let jT=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=$m(0,n.type),o=r.length>0?xl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,o)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=W({token:t,providedIn:"environment",factory:()=>new t(B(ir))}),t})();function dv(t){t.getStandaloneInjector=e=>e.get(jT).getOrCreateStandaloneInjector(t)}function Qd(t){return e=>{setTimeout(t,void 0,e)}}const Xe=class uO extends v{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&"object"==typeof e){const l=e;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=Qd(i),o&&(o=Qd(o)),s&&(s=Qd(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof I&&e.add(a),a}};function dO(){return this._results[Symbol.iterator]()}class Zd{get changes(){return this._changes||(this._changes=new Xe)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Zd.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=dO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const r=this;r.dirty=!1;const o=function Sn(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function _S(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=e[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}(r._results,o,n))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Tr=(()=>{class t{}return t.__NG_ELEMENT_ID__=pO,t})();const hO=Tr,fO=class extends hO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tView,o=fl(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);o[ls]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[nr];return null!==s&&(o[nr]=s.createEmbeddedView(r)),wd(r,o,e),new Ts(o)}};function pO(){return Al(At(),k())}function Al(t,e){return 4&t.type?new fO(e,t,oi(t,e)):null}let Bn=(()=>{class t{}return t.__NG_ELEMENT_ID__=gO,t})();function gO(){return Sv(At(),k())}const mO=Bn,Dv=class extends mO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return oi(this._hostTNode,this._hostLView)}get injector(){return new Jo(this._hostTNode,this._hostLView)}get parentInjector(){const e=Iu(this._hostTNode,this._hostLView);if(Tg(e)){const n=Ja(e,this._hostLView),r=Wa(e);return new Jo(n[H].data[r+8],n)}return new Jo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Ev(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Ut}createEmbeddedView(e,n,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=e.createEmbeddedView(n||{},i);return this.insert(s,o),s}createComponent(e,n,r,o,i){const s=e&&!function gs(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const d=n||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const l=s?e:new Os(xe(e)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const h=(s?c:this.parentInjector).get(ir,null);h&&(i=h)}const u=l.create(c,o,void 0,i);return this.insert(u.hostView,a),u}insert(e,n){const r=e._lView,o=r[H];if(function UE(t){return Nn(t[Ye])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[Ye],h=new Dv(d,d[kt],d[Ye]);h.detach(h.indexOf(e))}}const i=this._adjustIndex(n),s=this._lContainer;!function sM(t,e,n,r){const o=Ut+r,i=n.length;r>0&&(n[o-1][kn]=e),r<i-Ut?(e[kn]=n[o],Bg(n,Ut+r,e)):(n.push(e),e[kn]=null),e[Ye]=n;const s=e[ls];null!==s&&n!==s&&function aM(t,e){const n=t[zo];e[Nt]!==e[Ye][Ye][Nt]&&(t[og]=!0),null===n?t[zo]=[e]:n.push(e)}(s,e);const a=e[nr];null!==a&&a.insertView(t),e[pe]|=64}(o,r,s,i);const a=Yu(i,s),l=r[_e],c=rl(l,s[Va]);return null!==c&&function rM(t,e,n,r,o,i){r[wr]=o,r[kt]=e,Ds(t,r,n,1,o,i)}(o,s[kt],l,r,c,a),e.attachToViewContainerRef(),Bg(Xd(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Ev(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Wu(this._lContainer,n);r&&(Xa(Xd(this._lContainer),n),hm(r[H],r))}detach(e){const n=this._adjustIndex(e,-1),r=Wu(this._lContainer,n);return r&&null!=Xa(Xd(this._lContainer),n)?new Ts(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Ev(t){return t[Ua]}function Xd(t){return t[Ua]||(t[Ua]=[])}function Sv(t,e){let n;const r=e[t.index];if(Nn(r))n=r;else{let o;if(8&t.type)o=Mt(r);else{const i=e[_e];o=i.createComment("");const s=an(t,e);go(i,rl(i,s),o,function dM(t,e){return t.nextSibling(e)}(i,s),!1)}e[t.index]=n=Dy(r,e,o,t),gl(e,n)}return new Dv(n,t,e)}class eh{constructor(e){this.queryList=e,this.matches=null}clone(){return new eh(this.queryList)}setDirty(){this.queryList.setDirty()}}class th{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){const s=n.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new th(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==Rv(e,n).matches&&this.queries[n].setDirty()}}class Mv{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}}class nh{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const o=null!==n?n.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,null!==n?n.push(i):n=[i])}return null!==n?new nh(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class rh{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new rh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(e,n,yO(n,i)),this.matchTNodeWithReadOption(e,n,Qa(n,e,i,!1,!1))}else r===Tr?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Qa(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===cn||o===Bn||o===Tr&&4&n.type)this.addMatch(n.index,-2);else{const i=Qa(n,e,o,!1,!1);null!==i&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function yO(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function vO(t,e,n,r){return-1===n?function _O(t,e){return 11&t.type?oi(t,e):4&t.type?Al(t,e):null}(e,t):-2===n?function CO(t,e,n){return n===cn?oi(e,t):n===Tr?Al(e,t):n===Bn?Sv(e,t):void 0}(t,e,r):fo(t,t[H],n,e)}function Iv(t,e,n,r){const o=e[nr].queries[r];if(null===o.matches){const i=t.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:vO(e,i[c],s[l+1],n.metadata.read))}o.matches=a}return o.matches}function oh(t,e,n,r){const o=t.queries.getByIndex(n),i=o.matches;if(null!==i){const s=Iv(t,e,o,n);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(s[a/2]);else{const c=i[a+1],u=e[-l];for(let d=Ut;d<u.length;d++){const h=u[d];h[ls]===h[Ye]&&oh(h[H],h,c,r)}if(null!==u[zo]){const d=u[zo];for(let h=0;h<d.length;h++){const f=d[h];oh(f[H],f,c,r)}}}}}return r}function xv(t){const e=k(),n=Ee(),r=Cg();vu(r+1);const o=Rv(n,r);if(t.dirty&&function VE(t){return 4==(4&t[pe])}(e)===(2==(2&o.metadata.flags))){if(null===o.matches)t.reset([]);else{const i=o.crossesNgTemplate?oh(n,e,r,[]):Iv(n,e,o,r);t.reset(i,nI),t.notifyOnChanges()}return!0}return!1}function Av(t,e,n,r){const o=Ee();if(o.firstCreatePass){const i=At();(function Pv(t,e,n){null===t.queries&&(t.queries=new nh),t.queries.track(new rh(e,n))})(o,new Mv(e,n,r),i.index),function DO(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(o,t),2==(2&n)&&(o.staticContentQueries=!0)}!function Ov(t,e,n){const r=new Zd(4==(4&n));_y(t,e,r,r.destroy),null===e[nr]&&(e[nr]=new th),e[nr].queries.push(new eh(r))}(o,k(),n)}function Rv(t,e){return t.queries.getByIndex(e)}function kv(t,e){return Al(t,e)}function Ol(...t){}const Pl=new J("Application Initializer");let Rl=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Ol,this.reject=Ol,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(Rs(i))n.push(i);else if(Ld(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(B(Pl,8))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const zs=new J("AppId",{providedIn:"root",factory:function Zv(){return`${uh()}${uh()}${uh()}`}});function uh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Xv=new J("Platform Initializer"),dh=new J("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let HO=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Or=new J("LocaleId",{providedIn:"root",factory:()=>ye(Or,ne.Optional|ne.SkipSelf)||function zO(){return typeof $localize<"u"&&$localize.locale||Ci}()});class qO{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let eC=(()=>{class t{compileModuleSync(n){return new Kd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=Ir(on(n).declarations).reduce((s,a)=>{const l=xe(a);return l&&s.push(new Os(l)),s},[]);return new qO(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const KO=(()=>Promise.resolve(0))();function hh(t){typeof Zone>"u"?KO.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class rt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function YO(){let t=Be.requestAnimationFrame,e=Be.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function XO(t){const e=()=>{!function ZO(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Be,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ph(t),t.isCheckStableRunning=!0,fh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ph(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{try{return rC(t),n.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),oC(t)}},onInvoke:(n,r,o,i,s,a,l)=>{try{return rC(t),n.invoke(o,i,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),oC(t)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ph(t),fh(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rt.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(rt.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,QO,Ol,Ol);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const QO={};function fh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ph(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function rC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function oC(t){t._nesting--,fh(t)}class e1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}}const iC=new J(""),kl=new J("");let yh,gh=(()=>{class t{constructor(n,r,o){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yh||(function t1(t){yh=t}(o),o.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rt.assertNotInAngularZone(),hh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,o){return[]}}return t.\u0275fac=function(n){return new(n||t)(B(rt),B(mh),B(kl))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})(),mh=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return yh?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Pr=!1;let qr=null;const sC=new J("AllowMultipleToken"),_h=new J("PlatformDestroyListeners"),aC=new J("appBootstrapListener");class lC{constructor(e,n){this.name=e,this.token=n}}function uC(t,e,n=[]){const r=`Platform: ${e}`,o=new J(r);return(i=[])=>{let s=vh();if(!s||s.injector.get(sC,!1)){const a=[...n,...i,{provide:o,useValue:!0}];t?t(a):function o1(t){if(qr&&!qr.get(sC,!1))throw new j(400,!1);qr=t;const e=t.get(hC);(function cC(t){const e=t.get(Xv,null);e&&e.forEach(n=>n())})(t)}(function dC(t=[],e){return sr.create({name:e,providers:[{provide:ud,useValue:"platform"},{provide:_h,useValue:new Set([()=>qr=null])},...t]})}(a,r))}return function s1(t){const e=vh();if(!e)throw new j(401,!1);return e}()}}function vh(){return qr?.get(hC)??null}let hC=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const o=function pC(t,e){let n;return n="noop"===t?new e1:("zone.js"===t?void 0:t)||new rt(e),n}(r?.ngZone,function fC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:rt,useValue:o}];return o.run(()=>{const s=sr.create({providers:i,parent:this.injector,name:n.moduleType.name}),a=n.create(s),l=a.injector.get(ii,null);if(!l)throw new j(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Fl(this._modules,a),c.unsubscribe()})}),function gC(t,e,n){try{const r=n();return Rs(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(l,o,()=>{const c=a.injector.get(Rl);return c.runInitializers(),c.donePromise.then(()=>(function j_(t){Cn(t,"Expected localeId to be defined"),"string"==typeof t&&(L_=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Or,Ci)||Ci),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const o=mC({},r);return function n1(t,e,n){const r=new Kd(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(n){const r=n.injector.get(Nl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new j(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(_h,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(B(sr))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function mC(t,e){return Array.isArray(e)?e.reduce(mC,t):{...t,...e}}let Nl=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,o){this._zone=n,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new $e(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new $e(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{rt.assertNotInAngularZone(),hh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{rt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function iE(...t){const e=ns(t),n=function ZD(t,e){return"number"==typeof Zc(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Pn(r[0]):jo(n)(lt(r,e)):Xn}(i,s.pipe(function sE(t={}){const{connector:e=(()=>new v),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const g=s;f(),g?.unsubscribe()};return w((g,y)=>{c++,!d&&!u&&h();const _=l=l??e();y.add(()=>{c--,0===c&&!d&&!u&&(a=Xc(p,o))}),_.subscribe(y),!s&&c>0&&(s=new Kt({next:x=>_.next(x),error:x=>{d=!0,h(),a=Xc(f,n,x),_.error(x)},complete:()=>{u=!0,h(),a=Xc(f,r),_.complete()}}),Pn(g).subscribe(s))})(i)}}()))}bootstrap(n,r){const o=n instanceof Wm;if(!this._injector.get(Rl).done){!o&&function Uo(t){const e=xe(t)||Rt(t)||Zt(t);return null!==e&&e.standalone}(n);throw new j(405,Pr)}let s;s=o?n:this._injector.get(Is).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function r1(t){return t.isBoundToModule}(s)?void 0:this._injector.get(bi),c=s.create(sr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(iC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Fl(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new j(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Fl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(aC,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Fl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(B(rt),B(ir),B(ii))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Fl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let Ei=(()=>{class t{}return t.__NG_ELEMENT_ID__=l1,t})();function l1(t){return function c1(t,e,n){if(us(t)&&!n){const r=Xt(t.index,e);return new Ts(r,r)}return 47&t.type?new Ts(e[Nt],e):null}(At(),k(),16==(16&t))}class bC{constructor(){}supports(e){return Cl(e)}create(e){return new g1(e)}}const p1=(t,e)=>e;class g1{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||p1}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){const s=!r||n&&n.currentIndex<DC(r,o,i)?n:r,a=DC(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,u=l-o;if(c!=u){for(let h=0;h<c;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<c&&(i[h]=f+1)}i[s.previousIndex]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Cl(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let o,i,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,s,a),r=!0),n=n._next}else o=0,function Vx(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(o,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,o),r=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,o){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,o)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,o)):e=this._addAfter(new m1(n,r),i,o),e}_verifyReinsertion(e,n,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const o=e._prevRemoved,i=e._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const o=null===n?this._itHead:n._next;return e._next=o,e._prev=n,null===o?this._itTail=e:o._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new wC),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class m1{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class y1{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class wC{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new y1,this.map.set(n,r)),r.add(e)}get(e,n){const o=this.map.get(e);return o?o.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function DC(t,e,n){const r=t.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+e+o}class EC{constructor(){}supports(e){return e instanceof Map||kd(e)}create(){return new _1}}class _1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||kd(e)))throw new j(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,o)=>{if(n&&n.key===o)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const i=this._getOrCreateRecordForKey(o,r);n=this._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const o=this._records.get(e);this._maybeAddToChanges(o,n);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new v1(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class v1{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function SC(){return new Vl([new bC])}let Vl=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||SC()),deps:[[t,new _s,new ys]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(null!=r)return r;throw new j(901,!1)}}return t.\u0275prov=W({token:t,providedIn:"root",factory:SC}),t})();function MC(){return new Gs([new EC])}let Gs=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||MC()),deps:[[t,new _s,new ys]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(r)return r;throw new j(901,!1)}}return t.\u0275prov=W({token:t,providedIn:"root",factory:MC}),t})();const w1=uC(null,"core",[]);let D1=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(B(Nl))},t.\u0275mod=Rn({type:t}),t.\u0275inj=bn({}),t})();function Si(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Eh=null;function Rr(){return Eh}class M1{}const Gt=new J("DocumentToken");let Sh=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return function I1(){return B(IC)}()},providedIn:"platform"}),t})();const x1=new J("Location Initialized");let IC=(()=>{class t extends Sh{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(n){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){xC()?this._history.pushState(n,r,o):this._location.hash=o}replaceState(n,r,o){xC()?this._history.replaceState(n,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(B(Gt))},t.\u0275prov=W({token:t,factory:function(){return function A1(){return new IC(B(Gt))}()},providedIn:"platform"}),t})();function xC(){return!!window.history.pushState}function Mh(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function AC(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function kr(t){return t&&"?"!==t[0]?"?"+t:t}let Do=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return ye(OC)},providedIn:"root"}),t})();const TC=new J("appBaseHref");let OC=(()=>{class t extends Do{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ye(Gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Mh(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+kr(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){const s=this.prepareExternalUrl(o+kr(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){const s=this.prepareExternalUrl(o+kr(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(B(Sh),B(TC,8))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),T1=(()=>{class t extends Do{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Mh(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+kr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+kr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(B(Sh),B(TC,8))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})(),Ih=(()=>{class t{constructor(n){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function R1(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(AC(PC(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+kr(r))}normalize(n){return t.stripTrailingSlash(function P1(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,PC(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+kr(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+kr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}}return t.normalizeQueryParams=kr,t.joinWithSlash=Mh,t.stripTrailingSlash=AC,t.\u0275fac=function(n){return new(n||t)(B(Do))},t.\u0275prov=W({token:t,factory:function(){return function O1(){return new Ih(B(Do))}()},providedIn:"root"}),t})();function PC(t){return t.replace(/\/index.html$/,"")}function $C(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[o,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}const Lh=/\s+/,BC=[];let HC=(()=>{class t{constructor(n,r,o,i){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this.initialClasses=BC,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Lh):BC}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Lh):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,Boolean(n[r]));this._applyStateDiff()}_updateState(n,r){const o=this.stateMap.get(n);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],o=n[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Lh).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return t.\u0275fac=function(n){return new(n||t)(T(Vl),T(Gs),T(cn),T(Mr))},t.\u0275dir=ie({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class yP{constructor(e,n,r,o){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jh=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new yP(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),qC(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{qC(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(T(Bn),T(Tr),T(Vl))},t.\u0275dir=ie({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function qC(t,e){t.context.$implicit=e.item}let Mi=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new vP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){WC("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){WC("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(T(Bn),T(Tr))},t.\u0275dir=ie({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class vP{constructor(){this.$implicit=null,this.ngIf=null}}function WC(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Le(e)}'.`)}let zP=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=bn({}),t})();let JP=(()=>{class t{}return t.\u0275prov=W({token:t,providedIn:"root",factory:()=>new KP(B(Gt),window)}),t})();class KP{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function YP(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=QC(this.window.history)||QC(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function QC(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class ZC{}class DR extends M1{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Gh extends DR{static makeCurrent(){!function S1(t){Eh||(Eh=t)}(new Gh)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function ER(){return Ks=Ks||document.querySelector("base"),Ks?Ks.getAttribute("href"):null}();return null==n?null:function SR(t){Ql=Ql||document.createElement("a"),Ql.setAttribute("href",t);const e=Ql.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ks=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $C(document.cookie,e)}}let Ql,Ks=null;const rb=new J("TRANSITION_ID"),IR=[{provide:Pl,useFactory:function MR(t,e,n){return()=>{n.get(Rl).donePromise.then(()=>{const r=Rr(),o=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[rb,Gt,sr],multi:!0}];let AR=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const Zl=new J("EventManagerPlugins");let Xl=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}addGlobalEventListener(n,r,o){return this._findPluginFor(r).addGlobalEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(B(Zl),B(rt))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();class ob{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const o=Rr().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${n}`);return this.addEventListener(o,n,r)}}let ib=(()=>{class t{constructor(){this.usageCount=new Map}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,r){const o=this.usageCount;let i=o.get(n)??0;return i+=r,i>0?o.set(n,i):o.delete(n),i}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})(),Ys=(()=>{class t extends ib{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.forEach(i=>i.remove()),r.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,r){const o=this.doc.createElement("style");o.textContent=r,n.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return t.\u0275fac=function(n){return new(n||t)(B(Gt))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const qh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wh=/%COMP%/g,lb=new J("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function cb(t,e){return e.flat(100).map(n=>n.replace(Wh,t))}function ub(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Jh=(()=>{class t{constructor(n,r,o,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new Kh(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(n,r);return o instanceof fb?o.applyToHost(n):o instanceof Yh&&o.applyStyles(),o}getOrCreateRenderer(n,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case tr.Emulated:i=new fb(s,a,r,this.appId,l);break;case tr.ShadowDom:return new FR(s,a,n,r);default:i=new Yh(s,a,r,l)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(B(Xl),B(Ys),B(zs),B(lb))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();class Kh{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(qh[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(hb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(hb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;const i=qh[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const o=qh[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(en.DashCase|en.Important)?e.style.setProperty(n,r,o&en.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&en.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,ub(r)):this.eventManager.addEventListener(e,n,ub(r))}}function hb(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class FR extends Kh{constructor(e,n,r,o){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=cb(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Yh extends Kh{constructor(e,n,r,o,i=r.id){super(e),this.sharedStylesHost=n,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=cb(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class fb extends Yh{constructor(e,n,r,o,i){const s=o+"-"+r.id;super(e,n,r,i,s),this.contentAttr=function RR(t){return"_ngcontent-%COMP%".replace(Wh,t)}(s),this.hostAttr=function kR(t){return"_nghost-%COMP%".replace(Wh,t)}(s)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let LR=(()=>{class t extends ob{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}}return t.\u0275fac=function(n){return new(n||t)(B(Gt))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const pb=["alt","control","meta","shift"],jR={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},VR={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let UR=(()=>{class t extends ob{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,o){const i=t.parseEventName(r),s=t.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(n,i.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),pb.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let o=jR[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),pb.forEach(s=>{s!==o&&(0,VR[s])(n)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{t.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(B(Gt))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const zR=uC(w1,"browser",[{provide:dh,useValue:"browser"},{provide:Xv,useValue:function $R(){Gh.makeCurrent()},multi:!0},{provide:Gt,useFactory:function HR(){return function vM(t){ed=t}(document),document},deps:[]}]),yb=new J(""),_b=[{provide:kl,useClass:class xR{addToWindow(e){Be.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},Be.getAllAngularTestabilities=()=>e.getAllTestabilities(),Be.getAllAngularRootElements=()=>e.getAllRootElements(),Be.frameworkStabilizers||(Be.frameworkStabilizers=[]),Be.frameworkStabilizers.push(r=>{const o=Be.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(l){s=s||l,i--,0==i&&r(s)};o.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Rr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:iC,useClass:gh,deps:[rt,mh,kl]},{provide:gh,useClass:gh,deps:[rt,mh,kl]}],vb=[{provide:ud,useValue:"root"},{provide:ii,useFactory:function BR(){return new ii},deps:[]},{provide:Zl,useClass:LR,multi:!0,deps:[Gt,rt,dh]},{provide:Zl,useClass:UR,multi:!0,deps:[Gt]},{provide:Jh,useClass:Jh,deps:[Xl,Ys,zs,lb]},{provide:Km,useExisting:Jh},{provide:ib,useExisting:Ys},{provide:Ys,useClass:Ys,deps:[Gt]},{provide:Xl,useClass:Xl,deps:[Zl,rt]},{provide:ZC,useClass:AR,deps:[]},[]];let GR=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:zs,useValue:n.appId},{provide:rb,useExisting:zs},IR]}}}return t.\u0275fac=function(n){return new(n||t)(B(yb,12))},t.\u0275mod=Rn({type:t}),t.\u0275inj=bn({providers:[...vb,..._b],imports:[zP,D1]}),t})(),Cb=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(B(Gt))},t.\u0275prov=W({token:t,factory:function(n){let r=null;return r=n?new n:function WR(){return new Cb(B(Gt))}(),r},providedIn:"root"}),t})();function K(...t){return lt(t,ns(t))}function Jr(t,e){return X(e)?St(t,e,1):St(t,1)}function Fr(t,e){return w((n,r)=>{let o=0;n.subscribe(R(r,i=>t.call(e,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class ec{}class Xh{}class Lr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const o=n.slice(0,r),i=o.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=n.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(n,i)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Lr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Lr;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Lr?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const o=("a"===e.op?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class XR{encodeKey(e){return Db(e)}encodeValue(e){return Db(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tk=/%(\d[a-f0-9])/gi,nk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Db(t){return encodeURIComponent(t).replace(tk,(e,n)=>nk[n]??e)}function tc(t){return`${t}`}class Kr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new XR,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ek(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],o=Array.isArray(r)?r.map(tc):[tc(r)];this.map.set(n,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Kr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(tc(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(tc(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rk{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Eb(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Sb(t){return typeof Blob<"u"&&t instanceof Blob}function Mb(t){return typeof FormData<"u"&&t instanceof FormData}class Qs{constructor(e,n,r,o){let i;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function ok(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Lr),this.context||(this.context=new rk),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Kr,this.urlWithParams=n}serializeBody(){return null===this.body?null:Eb(this.body)||Sb(this.body)||Mb(this.body)||function ik(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Kr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Mb(this.body)?null:Sb(this.body)?this.body.type||null:Eb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Kr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new Qs(n,r,i,{params:c,headers:l,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var ht=(()=>((ht=ht||{})[ht.Sent=0]="Sent",ht[ht.UploadProgress=1]="UploadProgress",ht[ht.ResponseHeader=2]="ResponseHeader",ht[ht.DownloadProgress=3]="DownloadProgress",ht[ht.Response=4]="Response",ht[ht.User=5]="User",ht))();class ef{constructor(e,n=200,r="OK"){this.headers=e.headers||new Lr,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class tf extends ef{constructor(e={}){super(e),this.type=ht.ResponseHeader}clone(e={}){return new tf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nc extends ef{constructor(e={}){super(e),this.type=ht.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new nc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ib extends ef{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function nf(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Eo=(()=>{class t{constructor(n){this.handler=n}request(n,r,o={}){let i;if(n instanceof Qs)i=n;else{let l,c;l=o.headers instanceof Lr?o.headers:new Lr(o.headers),o.params&&(c=o.params instanceof Kr?o.params:new Kr({fromObject:o.params})),i=new Qs(n,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=K(i).pipe(Jr(l=>this.handler.handle(l)));if(n instanceof Qs||"events"===o.observe)return s;const a=s.pipe(Fr(l=>l instanceof nc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(O(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(O(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(O(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(O(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Kr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,nf(o,r))}post(n,r,o={}){return this.request("POST",n,nf(o,r))}put(n,r,o={}){return this.request("PUT",n,nf(o,r))}}return t.\u0275fac=function(n){return new(n||t)(B(ec))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();function xb(t,e){return e(t)}function sk(t,e){return(n,r)=>e.intercept(n,{handle:o=>t(o,r)})}const lk=new J("HTTP_INTERCEPTORS"),Zs=new J("HTTP_INTERCEPTOR_FNS");function ck(){let t=null;return(e,n)=>(null===t&&(t=(ye(lk,{optional:!0})??[]).reduceRight(sk,xb)),t(e,n))}let Ab=(()=>{class t extends ec{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Zs)));this.chain=r.reduceRight((o,i)=>function ak(t,e,n){return(r,o)=>n.runInContext(()=>e(r,i=>t(i,o)))}(o,i,this.injector),xb)}return this.chain(n,r=>this.backend.handle(r))}}return t.\u0275fac=function(n){return new(n||t)(B(Xh),B(ir))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const fk=/^\)\]\}',?\n/;let Ob=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new $e(r=>{const o=this.xhrFactory.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((f,p)=>o.setRequestHeader(f,p.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const f=n.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(n.responseType){const f=n.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",p=new Lr(o.getAllResponseHeaders()),g=function pk(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||n.url;return s=new tf({headers:p,status:o.status,statusText:f,url:g}),s},l=()=>{let{headers:f,status:p,statusText:g,url:y}=a(),_=null;204!==p&&(_=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=_?200:0);let x=p>=200&&p<300;if("json"===n.responseType&&"string"==typeof _){const b=_;_=_.replace(fk,"");try{_=""!==_?JSON.parse(_):null}catch(P){_=b,x&&(x=!1,_={error:P,text:_})}}x?(r.next(new nc({body:_,headers:f,status:p,statusText:g,url:y||void 0})),r.complete()):r.error(new Ib({error:_,headers:f,status:p,statusText:g,url:y||void 0}))},c=f=>{const{url:p}=a(),g=new Ib({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});r.error(g)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:ht.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===n.responseType&&o.responseText&&(p.partialText=o.responseText),r.next(p)},h=f=>{let p={type:ht.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return o.addEventListener("load",l),o.addEventListener("error",c),o.addEventListener("timeout",c),o.addEventListener("abort",c),n.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:ht.Sent}),()=>{o.removeEventListener("error",c),o.removeEventListener("abort",c),o.removeEventListener("load",l),o.removeEventListener("timeout",c),n.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return t.\u0275fac=function(n){return new(n||t)(B(ZC))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const rf=new J("XSRF_ENABLED"),Pb=new J("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Rb=new J("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class kb{}let yk=(()=>{class t{constructor(n,r,o){this.doc=n,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=$C(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(B(Gt),B(dh),B(Pb))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();function _k(t,e){const n=t.url.toLowerCase();if(!ye(rf)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=ye(kb).getToken(),o=ye(Rb);return null!=r&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),e(t)}var st=(()=>((st=st||{})[st.Interceptors=0]="Interceptors",st[st.LegacyInterceptors=1]="LegacyInterceptors",st[st.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",st[st.NoXsrfProtection=3]="NoXsrfProtection",st[st.JsonpSupport=4]="JsonpSupport",st[st.RequestsMadeViaParent=5]="RequestsMadeViaParent",st))();function Ii(t,e){return{\u0275kind:t,\u0275providers:e}}function vk(...t){const e=[Eo,Ob,Ab,{provide:ec,useExisting:Ab},{provide:Xh,useExisting:Ob},{provide:Zs,useValue:_k,multi:!0},{provide:rf,useValue:!0},{provide:kb,useClass:yk}];for(const n of t)e.push(...n.\u0275providers);return function BM(t){return{\u0275providers:t}}(e)}const Nb=new J("LEGACY_INTERCEPTOR_FN");let bk=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=bn({providers:[vk(Ii(st.LegacyInterceptors,[{provide:Nb,useFactory:ck},{provide:Zs,useExisting:Nb,multi:!0}]))]}),t})();const{isArray:wk}=Array,{getPrototypeOf:Dk,prototype:Ek,keys:Sk}=Object;function Fb(t){if(1===t.length){const e=t[0];if(wk(e))return{args:e,keys:null};if(function Mk(t){return t&&"object"==typeof t&&Dk(t)===Ek}(e)){const n=Sk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Ik}=Array;function Lb(t){return O(e=>function xk(t,e){return Ik(e)?t(...e):t(e)}(t,e))}function jb(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function So(...t){const e=$p(t),{args:n,keys:r}=Fb(t),o=new $e(i=>{const{length:s}=n;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Pn(n[u]).subscribe(R(i,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?jb(r,a):a),i.complete())}))}});return e?o.pipe(Lb(e)):o}let Vb=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(T(Mr),T(cn))},t.\u0275dir=ie({type:t}),t})(),Mo=(()=>{class t extends Vb{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tt(t)))(r||t)}}(),t.\u0275dir=ie({type:t,features:[Te]}),t})();const fr=new J("NgValueAccessor"),Ak={provide:fr,useExisting:je(()=>sf),multi:!0};let sf=(()=>{class t extends Mo{writeValue(n){this.setProperty("checked",n)}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tt(t)))(r||t)}}(),t.\u0275dir=ie({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){1&n&&re("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[Ge([Ak]),Te]}),t})();const Tk={provide:fr,useExisting:je(()=>xi),multi:!0},Pk=new J("CompositionEventMode");let xi=(()=>{class t extends Vb{constructor(n,r,o){super(n,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ok(){const t=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(T(Mr),T(cn),T(Pk,8))},t.\u0275dir=ie({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&re("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[Ge([Tk]),Te]}),t})();const Rk=!1;function Yr(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const jt=new J("NgValidators"),Qr=new J("NgAsyncValidators");function Hb(t){return Yr(t.value)?{required:!0}:null}function rc(t){return null}function Kb(t){return null!=t}function Yb(t){const e=Rs(t)?lt(t):t;if(Rk&&!Ld(e)){let n="Expected async validator to return Promise or Observable.";throw"object"==typeof t&&(n+=" Are you using a synchronous validator where an async validator is expected?"),new j(-1101,n)}return e}function Qb(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function Zb(t,e){return e.map(n=>n(t))}function Xb(t){return t.map(e=>function Nk(t){return!t.validate}(e)?e:n=>e.validate(n))}function af(t){return null!=t?function ew(t){if(!t)return null;const e=t.filter(Kb);return 0==e.length?null:function(n){return Qb(Zb(n,e))}}(Xb(t)):null}function lf(t){return null!=t?function tw(t){if(!t)return null;const e=t.filter(Kb);return 0==e.length?null:function(n){return So(Zb(n,e).map(Yb)).pipe(O(Qb))}}(Xb(t)):null}function nw(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function cf(t){return t?Array.isArray(t)?t:[t]:[]}function oc(t,e){return Array.isArray(t)?t.includes(e):t===e}function iw(t,e){const n=cf(e);return cf(t).forEach(o=>{oc(n,o)||n.push(o)}),n}function sw(t,e){return cf(e).filter(n=>!oc(t,n))}class aw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=af(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class qt extends aw{get formDirective(){return null}get path(){return null}}class Zr extends aw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lw{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xs=(()=>{class t extends lw{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(T(Zr,2))},t.\u0275dir=ie({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&Ar("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Te]}),t})(),cw=(()=>{class t extends lw{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(T(qt,10))},t.\u0275dir=ie({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&Ar("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Te]}),t})();function uw(t,e){return t?`with name: '${e}'`:`at index: ${e}`}const hf=!1,ea="VALID",sc="INVALID",Ai="PENDING",ta="DISABLED";function ff(t){return(ac(t)?t.validators:t)||null}function pf(t,e){return(ac(e)?e.asyncValidators:t)||null}function ac(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class fw{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ea}get invalid(){return this.status===sc}get pending(){return this.status==Ai}get disabled(){return this.status===ta}get enabled(){return this.status!==ta}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sw(e,this._rawAsyncValidators))}hasValidator(e){return oc(this._rawValidators,e)}hasAsyncValidator(e){return oc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ai,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=ta,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=ea,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ea||this.status===Ai)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ta:ea}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ai,this._hasOwnPendingAsyncValidator=!0;const n=Yb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?ta:this.errors?sc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ai)?Ai:this._anyControlsHaveStatus(sc)?sc:ea}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ac(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Bk(t){return Array.isArray(t)?af(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Hk(t){return Array.isArray(t)?lf(t):t||null}(this._rawAsyncValidators)}}class gf extends fw{constructor(e,n,r){super(ff(n),pf(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function hw(t,e,n){t._forEachChild((r,o)=>{if(void 0===n[o])throw new j(1002,hf?function $k(t,e){return`Must supply a value for form control ${uw(t,e)}`}(e,o):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function dw(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,hf?function Vk(t){return`\n    There are no form controls registered with this ${t?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[n])throw new j(1001,hf?function Uk(t,e){return`Cannot find form control ${uw(t,e)}`}(e,n):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,o)=>((r.enabled||this.disabled)&&(n[o]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((o,i)=>{r=n(r,o,i)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ti=new J("CallSetDisabledState",{providedIn:"root",factory:()=>lc}),lc="always";function na(t,e,n=lc){mf(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function qk(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&pw(t,e)})}(t,e),function Jk(t,e){const n=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Wk(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&pw(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Gk(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function dc(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function mf(t,e){const n=function rw(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(nw(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function ow(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(nw(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const o=()=>t.updateValueAndValidity();dc(e._rawValidators,o),dc(e._rawAsyncValidators,o)}function pw(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Xk={provide:qt,useExisting:je(()=>fc)},ra=(()=>Promise.resolve())();let fc=(()=>{class t extends qt{constructor(n,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Xe,this.form=new gf({},af(n),lf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){ra.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),na(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){ra.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){ra.then(()=>{const r=this._findContainer(n.path),o=new gf({});(function gw(t,e){mf(t,e)})(o,n),r.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){ra.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){ra.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function mw(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return t.\u0275fac=function(n){return new(n||t)(T(jt,10),T(Qr,10),T(Ti,8))},t.\u0275dir=ie({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){1&n&&re("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ge([Xk]),Te]}),t})();function yw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function _w(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const vw=class extends fw{constructor(e=null,n,r){super(ff(n),pf(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ac(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=_w(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){_w(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},nN={provide:Zr,useExisting:je(()=>Oi)},ww=(()=>Promise.resolve())();let Oi=(()=>{class t extends Zr{constructor(n,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new vw,this._registered=!1,this.update=new Xe,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function vf(t,e){if(!e)return null;let n,r,o;return Array.isArray(e),e.forEach(i=>{i.constructor===xi?n=i:function Qk(t){return Object.getPrototypeOf(t.constructor)===Mo}(i)?r=i:o=i}),o||r||n||null}(0,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function _f(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){na(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){ww.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,o=0!==r&&Si(r);ww.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function cc(t,e){return[...e.path,t]}(n,this._parent):[n]}}return t.\u0275fac=function(n){return new(n||t)(T(qt,9),T(jt,10),T(Qr,10),T(fr,10),T(Ei,8),T(Ti,8))},t.\u0275dir=ie({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ge([nN]),Te,Dn]}),t})(),Dw=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=ie({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const rN={provide:fr,useExisting:je(()=>Cf),multi:!0};let Cf=(()=>{class t extends Mo{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tt(t)))(r||t)}}(),t.\u0275dir=ie({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){1&n&&re("input",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},features:[Ge([rN]),Te]}),t})(),Ew=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=bn({}),t})();const hN={provide:fr,useExisting:je(()=>pc),multi:!0};function Ow(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let pc=(()=>{class t extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const o=Ow(this._getOptionId(n),n);this.setProperty("value",o)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function fN(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tt(t)))(r||t)}}(),t.\u0275dir=ie({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){1&n&&re("change",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ge([hN]),Te]}),t})(),Pw=(()=>{class t{constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(Ow(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(n){return new(n||t)(T(cn),T(Mr),T(pc,9))},t.\u0275dir=ie({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const pN={provide:fr,useExisting:je(()=>Ef),multi:!0};function Rw(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Ef=(()=>{class t extends Mo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const o=n.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);o.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,n(o)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function gN(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tt(t)))(r||t)}}(),t.\u0275dir=ie({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){1&n&&re("change",function(i){return r.onChange(i.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ge([pN]),Te]}),t})(),kw=(()=>{class t{constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(Rw(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Rw(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(n){return new(n||t)(T(cn),T(Mr),T(Ef,9))},t.\u0275dir=ie({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();let Io=(()=>{class t{constructor(){this._validator=rc}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rc,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=ie({type:t,features:[Dn]}),t})();const yN={provide:jt,useExisting:je(()=>Sf),multi:!0};let Sf=(()=>{class t extends Io{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>function Fw(t){return"number"==typeof t?t:parseFloat(t)}(n),this.createValidator=n=>function $b(t){return e=>{if(Yr(e.value)||Yr(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(n)}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tt(t)))(r||t)}}(),t.\u0275dir=ie({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){2&n&&dn("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Ge([yN]),Te]}),t})();const _N={provide:jt,useExisting:je(()=>gc),multi:!0};let gc=(()=>{class t extends Io{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Si,this.createValidator=n=>Hb}enabled(n){return n}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tt(t)))(r||t)}}(),t.\u0275dir=ie({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){2&n&&dn("required",r._enabled?"":null)},inputs:{required:"required"},features:[Ge([_N]),Te]}),t})(),EN=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=bn({imports:[Ew]}),t})(),MN=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Ti,useValue:n.callSetDisabledState??lc}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=bn({imports:[EN]}),t})();class An extends v{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const mc=me(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Hw(...t){const e=ns(t),n=$p(t),{args:r,keys:o}=Fb(t);if(0===r.length)return lt([],e);const i=new $e(function IN(t,e,n=Qn){return r=>{zw(e,()=>{const{length:o}=t,i=new Array(o);let s=o,a=o;for(let l=0;l<o;l++)zw(e,()=>{const c=lt(t[l],e);let u=!1;c.subscribe(R(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>jb(o,s):Qn));return n?i.pipe(Lb(n)):i}function zw(t,e,n){t?_r(n,t,e):e()}function Mf(...t){return function xN(){return jo(1)}()(lt(t,ns(t)))}function Gw(t){return new $e(e=>{Pn(t()).subscribe(e)})}function Pi(t,e){const n=X(t)?t:()=>t,r=o=>o.error(n());return new $e(e?o=>e.schedule(r,0,o):r)}function If(){return w((t,e)=>{let n=null;t._refCount++;const r=R(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const o=t._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class qw extends $e{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,S(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new I;const n=this.getSubject();e.add(this.source.subscribe(R(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=I.EMPTY)}return e}refCount(){return If()(this)}}function pr(t,e){return w((n,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();n.subscribe(R(r,l=>{o?.unsubscribe();let c=0;const u=i++;Pn(t(l,u)).subscribe(o=R(r,d=>r.next(e?e(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Ri(t){return t<=0?()=>Xn:w((e,n)=>{let r=0;e.subscribe(R(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function yc(t){return w((e,n)=>{let r=!1;e.subscribe(R(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function Ww(t=TN){return w((e,n)=>{let r=!1;e.subscribe(R(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function TN(){return new mc}function Xr(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Fr((o,i)=>t(o,i,r)):Qn,Ri(1),n?yc(e):Ww(()=>new mc))}function ft(t,e,n){const r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?w((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(R(i,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),i.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),i.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),i.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Qn}function qn(t){return w((e,n)=>{let i,r=null,o=!1;r=e.subscribe(R(n,void 0,void 0,s=>{i=Pn(t(s,qn(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Jw(t,e){return w(function ON(t,e,n,r,o){return(i,s)=>{let a=n,l=e,c=0;i.subscribe(R(s,u=>{const d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}(t,e,arguments.length>=2,!0))}function xf(t){return t<=0?()=>Xn:w((e,n)=>{let r=[];e.subscribe(R(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(const o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Kw(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Fr((o,i)=>t(o,i,r)):Qn,xf(1),n?yc(e):Ww(()=>new mc))}function Af(t){return w((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const fe="primary",oa=Symbol("RouteTitle");class kN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ki(t){return new kN(t)}function NN(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=t[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function gr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!Yw(t[o],e[o]))return!1;return!0}function Yw(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}return t===e}function Qw(t){return Array.prototype.concat.apply([],t)}function Zw(t){return t.length>0?t[t.length-1]:null}function Ot(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function eo(t){return Ld(t)?t:Rs(t)?lt(Promise.resolve(t)):K(t)}const _c=!1,LN={exact:function t0(t,e,n){if(!xo(t.segments,e.segments)||!vc(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!t0(t.children[r],e.children[r],n))return!1;return!0},subset:n0},Xw={exact:function jN(t,e){return gr(t,e)},subset:function VN(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Yw(t[n],e[n]))},ignored:()=>!0};function e0(t,e,n){return LN[n.paths](t.root,e.root,n.matrixParams)&&Xw[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function n0(t,e,n){return r0(t,e,e.segments,n)}function r0(t,e,n,r){if(t.segments.length>n.length){const o=t.segments.slice(0,n.length);return!(!xo(o,n)||e.hasChildren()||!vc(o,n,r))}if(t.segments.length===n.length){if(!xo(t.segments,n)||!vc(t.segments,n,r))return!1;for(const o in e.children)if(!t.children[o]||!n0(t.children[o],e.children[o],r))return!1;return!0}{const o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!(xo(t.segments,o)&&vc(t.segments,o,r)&&t.children[fe])&&r0(t.children[fe],e,i,r)}}function vc(t,e,n){return e.every((r,o)=>Xw[n](t[o].parameters,r.parameters))}class to{constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return BN.serialize(this)}}class ve{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Ot(n,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cc(this)}}class ia{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ki(this.parameters)),this._parameterMap}toString(){return a0(this)}}function xo(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let sa=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return new Tf},providedIn:"root"}),t})();class Tf{parse(e){const n=new QN(e);return new to(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${aa(e.root,!0)}`,r=function GN(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(o=>`${bc(n)}=${bc(o)}`).join("&"):`${bc(n)}=${bc(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function HN(t){return encodeURI(t)}(e.fragment)}`:""}`}}const BN=new Tf;function Cc(t){return t.segments.map(e=>a0(e)).join("/")}function aa(t,e){if(!t.hasChildren())return Cc(t);if(e){const n=t.children[fe]?aa(t.children[fe],!1):"",r=[];return Ot(t.children,(o,i)=>{i!==fe&&r.push(`${i}:${aa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function $N(t,e){let n=[];return Ot(t.children,(r,o)=>{o===fe&&(n=n.concat(e(r,o)))}),Ot(t.children,(r,o)=>{o!==fe&&(n=n.concat(e(r,o)))}),n}(t,(r,o)=>o===fe?[aa(t.children[fe],!1)]:[`${o}:${aa(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[fe]?`${Cc(t)}/${n[0]}`:`${Cc(t)}/(${n.join("//")})`}}function o0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bc(t){return o0(t).replace(/%3B/gi,";")}function Of(t){return o0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wc(t){return decodeURIComponent(t)}function s0(t){return wc(t.replace(/\+/g,"%20"))}function a0(t){return`${Of(t.path)}${function zN(t){return Object.keys(t).map(e=>`;${Of(e)}=${Of(t[e])}`).join("")}(t.parameters)}`}const qN=/^[^\/()?;=#]+/;function Dc(t){const e=t.match(qN);return e?e[0]:""}const WN=/^[^=?&#]+/,KN=/^[^&#]+/;class QN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[fe]=new ve(e,n)),r}parseSegment(){const e=Dc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new j(4009,_c);return this.capture(e),new ia(wc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=Dc(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=Dc(this.remaining);o&&(r=o,this.capture(r))}e[wc(n)]=wc(r)}parseQueryParam(e){const n=function JN(t){const e=t.match(WN);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function YN(t){const e=t.match(KN);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=s0(n),i=s0(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Dc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new j(4010,_c);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=fe);const s=this.parseChildren();n[i]=1===Object.keys(s).length?s[fe]:new ve([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new j(4011,_c)}}function Pf(t){return t.segments.length>0?new ve([],{[fe]:t}):t}function Ec(t){const e={};for(const r of Object.keys(t.children)){const i=Ec(t.children[r]);(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function ZN(t){if(1===t.numberOfChildren&&t.children[fe]){const e=t.children[fe];return new ve(t.segments.concat(e.segments),e.children)}return t}(new ve(t.segments,e))}function Ao(t){return t instanceof to}const Rf=!1;function XN(t,e,n,r,o){if(0===n.length)return Ni(e.root,e.root,e.root,r,o);const i=function h0(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new d0(!0,0,t);let e=0,n=!1;const r=t.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Ot(i.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new d0(n,e,r)}(n);return i.toRoot()?Ni(e.root,e.root,new ve([],{}),r,o):function s(l){const c=function tF(t,e,n,r){if(t.isAbsolute)return new Fi(e.root,!0,0);if(-1===r)return new Fi(n,n===e.root,0);return function f0(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new j(4005,Rf&&"Invalid number of '../'");o=r.segments.length}return new Fi(r,!1,o-i)}(n,r+(la(t.commands[0])?0:1),t.numberOfDoubleDots)}(i,e,t.snapshot?._urlSegment,l),u=c.processChildren?Li(c.segmentGroup,c.index,i.commands):kf(c.segmentGroup,c.index,i.commands);return Ni(e.root,c.segmentGroup,u,r,o)}(t.snapshot?._lastPathIndex)}function la(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ca(t){return"object"==typeof t&&null!=t&&t.outlets}function Ni(t,e,n,r,o){let s,i={};r&&Ot(r,(l,c)=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=t===e?n:u0(t,e,n);const a=Pf(Ec(s));return new to(a,i,o)}function u0(t,e,n){const r={};return Ot(t.children,(o,i)=>{r[i]=o===e?n:u0(o,e,n)}),new ve(t.segments,r)}class d0{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&la(r[0]))throw new j(4003,Rf&&"Root segment cannot have matrix parameters");const o=r.find(ca);if(o&&o!==Zw(r))throw new j(4004,Rf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fi{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function kf(t,e,n){if(t||(t=new ve([],{})),0===t.segments.length&&t.hasChildren())return Li(t,e,n);const r=function rF(t,e,n){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;const s=t.segments[o],a=n[r];if(ca(a))break;const l=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!g0(l,c,s))return i;r+=2}else{if(!g0(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new ve(t.segments.slice(0,r.pathIndex),{});return i.children[fe]=new ve(t.segments.slice(r.pathIndex),t.children),Li(i,0,o)}return r.match&&0===o.length?new ve(t.segments,{}):r.match&&!t.hasChildren()?Nf(t,e,n):r.match?Li(t,0,o):Nf(t,e,n)}function Li(t,e,n){if(0===n.length)return new ve(t.segments,{});{const r=function nF(t){return ca(t[0])?t[0].outlets:{[fe]:t}}(n),o={};if(!r[fe]&&t.children[fe]&&1===t.numberOfChildren&&0===t.children[fe].segments.length){const i=Li(t.children[fe],e,n);return new ve(t.segments,i.children)}return Ot(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=kf(t.children[s],e,i))}),Ot(t.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new ve(t.segments,o)}}function Nf(t,e,n){const r=t.segments.slice(0,e);let o=0;for(;o<n.length;){const i=n[o];if(ca(i)){const l=oF(i.outlets);return new ve(r,l)}if(0===o&&la(n[0])){r.push(new ia(t.segments[e].path,p0(n[0]))),o++;continue}const s=ca(i)?i.outlets[fe]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&la(a)?(r.push(new ia(s,p0(a))),o+=2):(r.push(new ia(s,{})),o++)}return new ve(r,{})}function oF(t){const e={};return Ot(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=Nf(new ve([],{}),0,n))}),e}function p0(t){const e={};return Ot(t,(n,r)=>e[r]=`${n}`),e}function g0(t,e,n){return t==n.path&&gr(e,n.parameters)}const ua="imperative";class mr{constructor(e,n){this.id=e,this.url=n}}class Ff extends mr{constructor(e,n,r="imperative",o=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class To extends mr{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sc extends mr{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mc extends mr{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=16}}class Lf extends mr{constructor(e,n,r,o){super(e,n),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iF extends mr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sF extends mr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aF extends mr{constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lF extends mr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cF extends mr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uF{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dF{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hF{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fF{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pF{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gF{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m0{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _F=(()=>{class t{createUrlTree(n,r,o,i,s,a){return XN(n||r.root,o,i,s,a)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})(),CF=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(e){return _F.\u0275fac(e)},providedIn:"root"}),t})();class y0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=jf(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=jf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Vf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Vf(e,this._root).map(n=>n.value)}}function jf(t,e){if(t===e.value)return e;for(const n of e.children){const r=jf(t,n);if(r)return r}return null}function Vf(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Vf(t,n);if(r.length)return r.unshift(e),r}return[]}class jr{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function ji(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class _0 extends y0{constructor(e,n){super(e),this.snapshot=n,Uf(this,e)}toString(){return this.snapshot.toString()}}function v0(t,e){const n=function bF(t,e){const s=new Ic([],{},{},"",{},fe,e,null,t.root,-1,{});return new b0("",new jr(s,[]))}(t,e),r=new An([new ia("",{})]),o=new An({}),i=new An({}),s=new An({}),a=new An(""),l=new Oo(r,o,s,a,i,fe,e,n.root);return l.snapshot=n.root,new _0(new jr(l,[]),n)}class Oo{constructor(e,n,r,o,i,s,a,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(O(c=>c[oa]))??K(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(O(e=>ki(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(O(e=>ki(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function C0(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const o=n[r],i=n[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function wF(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ic{get title(){return this.data?.[oa]}constructor(e,n,r,o,i,s,a,l,c,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ki(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class b0 extends y0{constructor(e,n){super(n),this.url=e,Uf(this,n)}toString(){return w0(this._root)}}function Uf(t,e){e.value._routerState=t,e.children.forEach(n=>Uf(t,n))}function w0(t){const e=t.children.length>0?` { ${t.children.map(w0).join(", ")} } `:"";return`${t.value}${e}`}function $f(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,gr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),gr(e.params,n.params)||t.params.next(n.params),function FN(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!gr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),gr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Bf(t,e){const n=gr(t.params,e.params)&&function UN(t,e){return xo(t,e)&&t.every((n,r)=>gr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Bf(t.parent,e.parent))}function da(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const o=function EF(t,e,n){return e.children.map(r=>{for(const o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return da(t,r,o);return da(t,r)})}(t,e,n);return new jr(r,o)}{if(t.shouldAttach(e.value)){const i=t.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>da(t,a)),s}}const r=function SF(t){return new Oo(new An(t.url),new An(t.params),new An(t.queryParams),new An(t.fragment),new An(t.data),t.outlet,t.component,t)}(e.value),o=e.children.map(i=>da(t,i));return new jr(r,o)}}const Hf="ngNavigationCancelingError";function D0(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Ao(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=E0(!1,0,e);return o.url=n,o.navigationBehaviorOptions=r,o}function E0(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[Hf]=!0,r.cancellationCode=e,n&&(r.url=n),r}function S0(t){return M0(t)&&Ao(t.url)}function M0(t){return t&&t[Hf]}class MF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ha,this.attachRef=null}}let ha=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new MF,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const xc=!1;let Ac=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=ye(ha),this.location=ye(Bn),this.changeDetector=ye(Ei),this.environmentInjector=ye(ir)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,xc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,xc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,xc);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,xc);this._activatedRoute=n;const o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new IF(n,a,o.injector);if(r&&function xF(t){return!!t.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=o.createComponent(c,o.length,l)}else this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=ie({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Dn]}),t})();class IF{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Oo?this.route:e===ha?this.childContexts:this.parent.get(e,n)}}let zf=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Br({type:t,selectors:[["ng-component"]],standalone:!0,features:[dv],decls:1,vars:0,template:function(n,r){1&n&&jn(0,"router-outlet")},dependencies:[Ac],encapsulation:2}),t})();function I0(t,e){return t.providers&&!t._injector&&(t._injector=xl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function qf(t){const e=t.children&&t.children.map(qf),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==fe&&(n.component=zf),n}function Tn(t){return t.outlet||fe}function x0(t,e){const n=t.filter(r=>Tn(r)===e);return n.push(...t.filter(r=>Tn(r)!==e)),n}function fa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class RF{constructor(e,n,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),$f(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const o=ji(n);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Ot(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=ji(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=ji(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const o=ji(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new gF(i.value.snapshot))}),e.children.length&&this.forwardEvent(new fF(e.value.snapshot))}activateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if($f(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),$f(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=fa(o.snapshot),l=a?.get(Is)??null;s.attachRef=null,s.route=o,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class A0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Tc{constructor(e,n){this.component=e,this.route=n}}function kF(t,e,n){const r=t._root;return pa(r,e?e._root:null,n,[r.value])}function Vi(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function fE(t){return null!==Oa(t)}(t)?e.get(t):t:r}function pa(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=ji(e);return t.children.forEach(s=>{(function FF(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function LF(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!xo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!xo(t.url,e.url)||!gr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bf(t,e)||!gr(t.queryParams,e.queryParams);default:return!Bf(t,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new A0(r)):(i.data=s.data,i._resolvedData=s._resolvedData),pa(t,e,i.component?a?a.children:null:n,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Tc(a.outlet.component,s))}else s&&ga(e,a,o),o.canActivateChecks.push(new A0(r)),pa(t,null,i.component?a?a.children:null:n,r,o)})(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Ot(i,(s,a)=>ga(s,n.getContext(a),o)),o}function ga(t,e,n){const r=ji(t),o=t.value;Ot(r,(i,s)=>{ga(i,o.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new Tc(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function ma(t){return"function"==typeof t}function Wf(t){return t instanceof mc||"EmptyError"===t?.name}const Oc=Symbol("INITIAL_VALUE");function Ui(){return pr(t=>Hw(t.map(e=>e.pipe(Ri(1),function AN(...t){const e=ns(t);return w((n,r)=>{(e?Mf(t,n,e):Mf(t,n)).subscribe(r)})}(Oc)))).pipe(O(e=>{for(const n of e)if(!0!==n){if(n===Oc)return Oc;if(!1===n||n instanceof to)return n}return!0}),Fr(e=>e!==Oc),Ri(1)))}function T0(t){return function Sa(...t){return ts(t)}(ft(e=>{if(Ao(e))throw D0(0,e)}),O(e=>!0===e))}const Jf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function O0(t,e,n,r,o){const i=Kf(t,e,n);return i.matched?function eL(t,e,n,r){const o=e.canMatch;return o&&0!==o.length?K(o.map(s=>{const a=Vi(s,t);return eo(function HF(t){return t&&ma(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Ui(),T0()):K(!0)}(r=I0(e,r),e,n).pipe(O(s=>!0===s?i:{...Jf})):K(i)}function Kf(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Jf}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(e.matcher||NN)(n,t,e);if(!o)return{...Jf};const i={};Ot(o.posParams,(a,l)=>{i[l]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Pc(t,e,n,r){if(n.length>0&&function rL(t,e,n){return n.some(r=>Rc(t,e,r)&&Tn(r)!==fe)}(t,n,r)){const i=new ve(e,function nL(t,e,n,r){const o={};o[fe]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&Tn(i)!==fe){const s=new ve([],{});s._sourceSegment=t,s._segmentIndexShift=e.length,o[Tn(i)]=s}return o}(t,e,r,new ve(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function oL(t,e,n){return n.some(r=>Rc(t,e,r))}(t,n,r)){const i=new ve(t.segments,function tL(t,e,n,r,o){const i={};for(const s of r)if(Rc(t,n,s)&&!o[Tn(s)]){const a=new ve([],{});a._sourceSegment=t,a._segmentIndexShift=e.length,i[Tn(s)]=a}return{...o,...i}}(t,e,n,r,t.children));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}const o=new ve(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Rc(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function P0(t,e,n,r){return!!(Tn(t)===r||r!==fe&&Rc(e,n,t))&&("**"===t.path||Kf(e,t,n).matched)}function R0(t,e,n){return 0===e.length&&!t.children[n]}const kc=!1;class Nc{constructor(e){this.segmentGroup=e||null}}class k0{constructor(e){this.urlTree=e}}function ya(t){return Pi(new Nc(t))}function N0(t){return Pi(new k0(t))}class lL{constructor(e,n,r,o,i){this.injector=e,this.configLoader=n,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const e=Pc(this.urlTree.root,[],[],this.config).segmentGroup,n=new ve(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,fe).pipe(O(i=>this.createUrlTree(Ec(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qn(i=>{if(i instanceof k0)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof Nc?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,fe).pipe(O(o=>this.createUrlTree(Ec(o),e.queryParams,e.fragment))).pipe(qn(o=>{throw o instanceof Nc?this.noMatchError(o):o}))}noMatchError(e){return new j(4002,kc)}createUrlTree(e,n,r){const o=Pf(e);return new to(o,n,r)}expandSegmentGroup(e,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(O(i=>new ve([],i))):this.expandSegment(e,r,n,r.segments,o,!0)}expandChildren(e,n,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return lt(o).pipe(Jr(i=>{const s=r.children[i],a=x0(n,i);return this.expandSegmentGroup(e,a,s,i).pipe(O(l=>({segment:l,outlet:i})))}),Jw((i,s)=>(i[s.outlet]=s.segment,i),{}),Kw())}expandSegment(e,n,r,o,i,s){return lt(r).pipe(Jr(a=>this.expandSegmentAgainstRoute(e,n,r,a,o,i,s).pipe(qn(c=>{if(c instanceof Nc)return K(null);throw c}))),Xr(a=>!!a),qn((a,l)=>{if(Wf(a))return R0(n,o,i)?K(new ve([],{})):ya(n);throw a}))}expandSegmentAgainstRoute(e,n,r,o,i,s,a){return P0(o,n,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,n,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s):ya(n):ya(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?N0(i):this.lineralizeSegments(r,i).pipe(St(s=>{const a=new ve(s,{});return this.expandSegment(e,a,n,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Kf(n,o,i);if(!a)return ya(n);const d=this.applyRedirectCommands(l,o.redirectTo,u);return o.redirectTo.startsWith("/")?N0(d):this.lineralizeSegments(o,d).pipe(St(h=>this.expandSegment(e,n,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,n,r,o,i){return"**"===r.path?(e=I0(r,e),r.loadChildren?(r._loadedRoutes?K({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(O(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new ve(o,{})))):K(new ve(o,{}))):O0(n,r,o,e).pipe(pr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(e=r._injector??e,r,o).pipe(St(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=Pc(n,a,l,h),g=new ve(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(O(b=>new ve(a,b)));if(0===h.length&&0===p.length)return K(new ve(a,{}));const y=Tn(r)===i;return this.expandSegment(d,g,h,p,y?fe:i,!0).pipe(O(x=>new ve(a.concat(x.segments),x.children)))})):ya(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?K({routes:n._loadedRoutes,injector:n._loadedInjector}):function XF(t,e,n,r){const o=e.canLoad;return void 0===o||0===o.length?K(!0):K(o.map(s=>{const a=Vi(s,t);return eo(function VF(t){return t&&ma(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Ui(),T0())}(e,n,r).pipe(St(o=>o?this.configLoader.loadChildren(e,n).pipe(ft(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):function sL(t){return Pi(E0(kc,3))}())):K({routes:[],injector:e})}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return K(r);if(o.numberOfChildren>1||!o.children[fe])return e.redirectTo,Pi(new j(4e3,kc));o=o.children[fe]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,o){const i=this.createSegmentGroup(e,n.root,r,o);return new to(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Ot(e,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,o){const i=this.createSegments(e,n.segments,r,o);let s={};return Ot(n.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,r,o)}),new ve(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){const o=r[n.path.substring(1)];if(!o)throw new j(4001,kc);return o}findOrReturn(e,n){let r=0;for(const o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}}class uL{}class fL{constructor(e,n,r,o,i,s,a){this.injector=e,this.rootComponentType=n,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=Pc(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,fe).pipe(O(n=>{if(null===n)return null;const r=new Ic([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},fe,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new jr(r,n),i=new b0(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(e){const n=e.value,r=C0(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,o)}processChildren(e,n,r){return lt(Object.keys(r.children)).pipe(Jr(o=>{const i=r.children[o],s=x0(n,o);return this.processSegmentGroup(e,s,i,o)}),Jw((o,i)=>o&&i?(o.push(...i),o):null),function PN(t,e=!1){return w((n,r)=>{let o=0;n.subscribe(R(r,i=>{const s=t(i,o++);(s||e)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),yc(null),Kw(),O(o=>{if(null===o)return null;const i=L0(o);return function pL(t){t.sort((e,n)=>e.value.outlet===fe?-1:n.value.outlet===fe?1:e.value.outlet.localeCompare(n.value.outlet))}(i),i}))}processSegment(e,n,r,o,i){return lt(n).pipe(Jr(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,o,i)),Xr(s=>!!s),qn(s=>{if(Wf(s))return R0(r,o,i)?K([]):K(null);throw s}))}processSegmentAgainstRoute(e,n,r,o,i){if(n.redirectTo||!P0(n,r,o,i))return K(null);let s;if("**"===n.path){const a=o.length>0?Zw(o).parameters:{},l=V0(r)+o.length;s=K({snapshot:new Ic(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U0(n),Tn(n),n.component??n._loadedComponent??null,n,j0(r),l,$0(n)),consumedSegments:[],remainingSegments:[]})}else s=O0(r,n,o,e).pipe(O(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=V0(r)+l.length;return{snapshot:new Ic(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U0(n),Tn(n),n.component??n._loadedComponent??null,n,j0(r),d,$0(n)),consumedSegments:l,remainingSegments:c}}));return s.pipe(pr(a=>{if(null===a)return K(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=n._injector??e;const d=n._loadedInjector??e,h=function gL(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(n),{segmentGroup:f,slicedSegments:p}=Pc(r,c,u,h.filter(y=>void 0===y.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(O(y=>null===y?null:[new jr(l,y)]));if(0===h.length&&0===p.length)return K([new jr(l,[])]);const g=Tn(n)===i;return this.processSegment(d,h,f,p,g?fe:i).pipe(O(y=>null===y?null:[new jr(l,y)]))}))}}function mL(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function L0(t){const e=[],n=new Set;for(const r of t){if(!mL(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):e.push(r)}for(const r of n){const o=L0(r.children);e.push(new jr(r.value,o))}return e.filter(r=>!n.has(r))}function j0(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function V0(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function U0(t){return t.data||{}}function $0(t){return t.resolve||{}}function B0(t){return"string"==typeof t.title||null===t.title}function Yf(t){return pr(e=>{const n=t(e);return n?lt(n).pipe(O(()=>e)):K(e)})}const $i=new J("ROUTES");let Qf=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ye(eC)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return K(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=eo(n.loadComponent()).pipe(O(z0),ft(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),Af(()=>{this.componentLoaders.delete(n)})),o=new qw(r,()=>new v).pipe(If());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(O(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(n).injector,c=Qw(l.get($i,[],ne.Self|ne.Optional)));return{routes:c.map(qf),injector:l}}),Af(()=>{this.childrenLoaders.delete(r)})),s=new qw(i,()=>new v).pipe(If());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(n){return eo(n()).pipe(O(z0),St(r=>r instanceof cv||Array.isArray(r)?K(r):lt(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function z0(t){return function EL(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Lc=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new v,this.configLoader=ye(Qf),this.environmentInjector=ye(ir),this.urlSerializer=ye(sa),this.rootContexts=ye(ha),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new dF(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new uF(o))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new An({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ua,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fr(r=>0!==r.id),O(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),pr(r=>{let o=!1,i=!1;return K(r).pipe(ft(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pr(s=>{const a=n.browserUrlTree.toString(),l=!n.navigated||s.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const u="";return this.events.next(new Mc(s.id,n.serializeUrl(r.rawUrl),u,0)),n.rawUrlTree=s.rawUrl,s.resolve(null),Xn}if(n.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return G0(s.source)&&(n.browserUrlTree=s.extractedUrl),K(s).pipe(pr(u=>{const d=this.transitions?.getValue();return this.events.next(new Ff(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?Xn:Promise.resolve(u)}),function cL(t,e,n,r){return pr(o=>function aL(t,e,n,r,o){return new lL(t,e,n,r,o).apply()}(t,e,n,o.extractedUrl,r).pipe(O(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),ft(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function _L(t,e,n,r,o){return St(i=>function hL(t,e,n,r,o,i,s="emptyOnly"){return new fL(t,e,n,r,o,s,i).recognize().pipe(pr(a=>null===a?function dL(t){return new $e(e=>e.error(t))}(new uL):K(a)))}(t,e,n,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(O(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),ft(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=n.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);n.setBrowserUrl(h,u)}n.browserUrlTree=u.urlAfterRedirects}const d=new iF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,g=new Ff(u,this.urlSerializer.serialize(d),h,f);this.events.next(g);const y=v0(d,this.rootComponentType).snapshot;return K(r={...s,targetSnapshot:y,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Mc(s.id,n.serializeUrl(r.extractedUrl),u,1)),n.rawUrlTree=s.rawUrl,s.resolve(null),Xn}}),ft(s=>{const a=new sF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),O(s=>r={...s,guards:kF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function GF(t,e){return St(n=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return 0===s.length&&0===i.length?K({...n,guardsResult:!0}):function qF(t,e,n,r){return lt(t).pipe(St(o=>function ZF(t,e,n,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?K(i.map(a=>{const l=fa(e)??o,c=Vi(a,l);return eo(function BF(t){return t&&ma(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):l.runInContext(()=>c(t,e,n,r))).pipe(Xr())})).pipe(Ui()):K(!0)}(o.component,o.route,n,e,r)),Xr(o=>!0!==o,!0))}(s,r,o,t).pipe(St(a=>a&&function jF(t){return"boolean"==typeof t}(a)?function WF(t,e,n,r){return lt(e).pipe(Jr(o=>Mf(function KF(t,e){return null!==t&&e&&e(new hF(t)),K(!0)}(o.route.parent,r),function JF(t,e){return null!==t&&e&&e(new pF(t)),K(!0)}(o.route,r),function QF(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function NF(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Gw(()=>K(s.guards.map(l=>{const c=fa(s.node)??n,u=Vi(l,c);return eo(function $F(t){return t&&ma(t.canActivateChild)}(u)?u.canActivateChild(r,t):c.runInContext(()=>u(r,t))).pipe(Xr())})).pipe(Ui())));return K(i).pipe(Ui())}(t,o.path,n),function YF(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return K(!0);const o=r.map(i=>Gw(()=>{const s=fa(e)??n,a=Vi(i,s);return eo(function UF(t){return t&&ma(t.canActivate)}(a)?a.canActivate(e,t):s.runInContext(()=>a(e,t))).pipe(Xr())}));return K(o).pipe(Ui())}(t,o.route,n))),Xr(o=>!0!==o,!0))}(r,i,t,e):K(a)),O(a=>({...n,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),ft(s=>{if(r.guardsResult=s.guardsResult,Ao(s.guardsResult))throw D0(0,s.guardsResult);const a=new aF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Fr(s=>!!s.guardsResult||(n.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),Yf(s=>{if(s.guards.canActivateChecks.length)return K(s).pipe(ft(a=>{const l=new lF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),pr(a=>{let l=!1;return K(a).pipe(function vL(t,e){return St(n=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return K(n);let i=0;return lt(o).pipe(Jr(s=>function CL(t,e,n,r){const o=t.routeConfig,i=t._resolve;return void 0!==o?.title&&!B0(o)&&(i[oa]=o.title),function bL(t,e,n,r){const o=function wL(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===o.length)return K({});const i={};return lt(o).pipe(St(s=>function DL(t,e,n,r){const o=fa(e)??r,i=Vi(t,o);return eo(i.resolve?i.resolve(e,n):o.runInContext(()=>i(e,n)))}(t[s],e,n,r).pipe(Xr(),ft(a=>{i[s]=a}))),xf(1),function RN(t){return O(()=>t)}(i),qn(s=>Wf(s)?Xn:Pi(s)))}(i,t,e,r).pipe(O(s=>(t._resolvedData=s,t.data=C0(t,n).resolve,o&&B0(o)&&(t.data[oa]=o.title),null)))}(s.route,r,t,e)),ft(()=>i++),xf(1),St(s=>i===o.length?K(n):Xn))})}(n.paramsInheritanceStrategy,this.environmentInjector),ft({next:()=>l=!0,complete:()=>{l||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),ft(a=>{const l=new cF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Yf(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(ft(u=>{l.component=u}),O(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Hw(a(s.targetSnapshot.root)).pipe(yc(),Ri(1))}),Yf(()=>this.afterPreactivation()),O(s=>{const a=function DF(t,e,n){const r=da(t,e._root,n?n._root:void 0);return new _0(r,e)}(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),ft(s=>{n.currentUrlTree=s.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),n.routerState=s.targetRouterState,"deferred"===n.urlUpdateStrategy&&(s.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,s),n.browserUrlTree=s.urlAfterRedirects)}),((t,e,n)=>O(r=>(new RF(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s)),Ri(1),ft({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new To(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Af(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),qn(s=>{if(i=!0,M0(s)){S0(s)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new Sc(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),S0(s)){const l=n.urlHandlingStrategy.merge(s.url,n.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||G0(r.source)};n.scheduleNavigation(l,ua,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new Lf(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(s))}catch(l){r.reject(l)}}return Xn}))}))}cancelNavigationTransition(n,r,o){const i=new Sc(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function G0(t){return t!==ua}let q0=(()=>{class t{buildTitle(n){let r,o=n.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===fe);return r}getResolvedTitleForRoute(n){return n.data[oa]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return ye(SL)},providedIn:"root"}),t})(),SL=(()=>{class t extends q0{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(B(Cb))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ML=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return ye(xL)},providedIn:"root"}),t})();class IL{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let xL=(()=>{class t extends IL{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Tt(t)))(r||t)}}(),t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const jc=new J("",{providedIn:"root",factory:()=>({})});let TL=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return ye(OL)},providedIn:"root"}),t})(),OL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function PL(t){throw t}function RL(t,e,n){return e.parse("/")}const kL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ct=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ye(HO),this.isNgZoneEnabled=!1,this.options=ye(jc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||PL,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||RL,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ye(TL),this.routeReuseStrategy=ye(ML),this.urlCreationStrategy=ye(CF),this.titleStrategy=ye(q0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Qw(ye($i,{optional:!0})??[]),this.navigationTransitions=ye(Lc),this.urlSerializer=ye(sa),this.location=ye(Ih),this.isNgZoneEnabled=ye(rt)instanceof rt&&rt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new to,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=v0(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ua,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(qf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,n,u,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const o=Ao(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ua,null,r)}navigate(n,r={skipLocationChange:!1}){return function FL(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new j(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,n)}return r}isActive(n,r){let o;if(o=!0===r?{...kL}:!1===r?{...NL}:r,Ao(n))return e0(this.currentUrlTree,n,o);const i=this.parseUrl(n);return e0(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.keys(n).reduce((r,o)=>{const i=n[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Vc=(()=>{class t{constructor(n,r,o,i,s,a){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new v;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=n.events.subscribe(c=>{c instanceof To&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(n){this._preserveFragment=Si(n)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(n){this._skipLocationChange=Si(n)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(n){this._replaceUrl=Si(n)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function Lm(t,e,n){return function $M(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?Fm:sd}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,n,r):o.removeAttribute(i,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return t.\u0275fac=function(n){return new(n||t)(T(Ct),T(Oo),function Za(t){return function hS(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let o=0;for(;o<r;){const i=n[o];if(Ig(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof n[o];)o++;else{if(i===e)return n[o+1];o+=2}}}return null}(At(),t)}("tabindex"),T(Mr),T(cn),T(Do))},t.\u0275dir=ie({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){1&n&&re("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&n&&dn("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Dn]}),t})(),W0=(()=>{class t{get isActive(){return this._isActive}constructor(n,r,o,i,s){this.router=n,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Xe,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof To&&this.update()})}ngAfterContentInit(){K(this.links.changes,K(null)).pipe(jo()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=lt(n).pipe(jo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){const r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const n=this.hasActiveLinks();this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(n))})}isLinkActive(n){const r=function LL(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&n.isActive(o.urlTree,r)}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}}return t.\u0275fac=function(n){return new(n||t)(T(Ct),T(cn),T(Mr),T(Ei),T(Vc,8))},t.\u0275dir=ie({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(n,r,o){if(1&n&&Av(o,Vc,5),2&n){let i;xv(i=function Tv(){return function wO(t,e){return t[nr].queries[e].queryList}(k(),Cg())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Dn]}),t})();class J0{}let jL=(()=>{class t{constructor(n,r,o,i,s){this.router=n,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Fr(n=>n instanceof To),Jr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=xl(i.providers,n,`Route: ${i.path}`));const s=i._injector??n,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return lt(o).pipe(jo())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):K(null);const i=o.pipe(St(s=>null===s?K(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?lt([i,this.loader.loadComponent(r)]).pipe(jo()):i})}}return t.\u0275fac=function(n){return new(n||t)(B(Ct),B(eC),B(ir),B(J0),B(Qf))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Xf=new J("");let K0=(()=>{class t{constructor(n,r,o,i,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ff?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof To&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof m0&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new m0(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){!function py(){throw new Error("invalid")}()},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();var hn=(()=>((hn=hn||{})[hn.COMPLETE=0]="COMPLETE",hn[hn.FAILED=1]="FAILED",hn[hn.REDIRECTING=2]="REDIRECTING",hn))();const Bi=!1;function no(t,e){return{\u0275kind:t,\u0275providers:e}}const ep=new J("",{providedIn:"root",factory:()=>!1});function Q0(){const t=ye(sr);return e=>{const n=t.get(Nl);if(e!==n.components[0])return;const r=t.get(Ct),o=t.get(Z0);1===t.get(tp)&&r.initialNavigation(),t.get(X0,null,ne.Optional)?.setUpPreloading(),t.get(Xf,null,ne.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const Z0=new J(Bi?"bootstrap done indicator":"",{factory:()=>new v}),tp=new J(Bi?"initial navigation":"",{providedIn:"root",factory:()=>1});function HL(){let t=[];return t=Bi?[{provide:cl,multi:!0,useFactory:()=>{const e=ye(Ct);return()=>e.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function mF(t){if(!("type"in t))return`Unknown Router Event: ${t.constructor.name}`;switch(t.type){case 14:return`ActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state}, shouldActivate: ${t.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 2:return`NavigationCancel(id: ${t.id}, url: '${t.url}')`;case 16:return`NavigationSkipped(id: ${t.id}, url: '${t.url}')`;case 1:return`NavigationEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${t.id}, url: '${t.url}', error: ${t.error})`;case 0:return`NavigationStart(id: ${t.id}, url: '${t.url}')`;case 6:return`ResolveEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 5:return`ResolveStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 10:return`RouteConfigLoadEnd(path: ${t.route.path})`;case 9:return`RouteConfigLoadStart(path: ${t.route.path})`;case 4:return`RoutesRecognized(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 15:return`Scroll(anchor: '${t.anchor}', position: '${t.position?`${t.position[0]}, ${t.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],no(1,t)}const X0=new J(Bi?"router preloader":"");function zL(t){return no(0,[{provide:X0,useExisting:jL},{provide:J0,useExisting:t}])}const _a=!1,eD=new J(_a?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),GL=[Ih,{provide:sa,useClass:Tf},Ct,ha,{provide:Oo,useFactory:function Y0(t){return t.routerState.root},deps:[Ct]},Qf,_a?{provide:ep,useValue:!0}:[]];function qL(){return new lC("Router",Ct)}let np=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[GL,_a&&r?.enableTracing?HL().\u0275providers:[],{provide:$i,multi:!0,useValue:n},{provide:eD,useFactory:YL,deps:[[Ct,new ys,new _s]]},{provide:jc,useValue:r||{}},r?.useHash?{provide:Do,useClass:T1}:{provide:Do,useClass:OC},{provide:Xf,useFactory:()=>{const t=ye(JP),e=ye(rt),n=ye(jc),r=ye(Lc),o=ye(sa);return n.scrollOffset&&t.setOffset(n.scrollOffset),new K0(o,r,t,e,n)}},r?.preloadingStrategy?zL(r.preloadingStrategy).\u0275providers:[],{provide:lC,multi:!0,useFactory:qL},r?.initialNavigation?QL(r):[],[{provide:tD,useFactory:Q0},{provide:aC,multi:!0,useExisting:tD}]]}}static forChild(n){return{ngModule:t,providers:[{provide:$i,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(B(eD,8))},t.\u0275mod=Rn({type:t}),t.\u0275inj=bn({imports:[zf]}),t})();function YL(t){if(_a&&t)throw new j(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function QL(t){return["disabled"===t.initialNavigation?no(3,[{provide:Pl,multi:!0,useFactory:()=>{const e=ye(Ct);return()=>{e.setUpLocationChangeListener()}}},{provide:tp,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?no(2,[{provide:tp,useValue:0},{provide:Pl,multi:!0,deps:[sr],useFactory:e=>{const n=e.get(x1,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const o=e.get(Ct),i=e.get(Z0);(function VL(t,e){t.events.pipe(Fr(n=>n instanceof To||n instanceof Sc||n instanceof Lf||n instanceof Mc),O(n=>n instanceof To||n instanceof Mc?hn.COMPLETE:n instanceof Sc&&(0===n.code||1===n.code)?hn.REDIRECTING:hn.FAILED),Fr(n=>n!==hn.REDIRECTING),Ri(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get(Lc).afterPreactivation=()=>(r(!0),i.closed?K(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const tD=new J(_a?"Router Initializer":"");let XL=(()=>{const e=class{constructor(){this.title="Pokemon TCG Pocket Collector"}};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=Br({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){1&o&&jn(0,"router-outlet")},dependencies:[Ac],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background-color:#000;min-height:100vh}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.data-overview[_ngcontent-%COMP%]{margin-top:30px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 6px #0000001a}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;opacity:.9}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0}.section[_ngcontent-%COMP%]{margin:40px 0;padding:20px 0;border-top:2px solid #e9ecef}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:20px}.sets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.set-card[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.set-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px}.rarity-stats[_ngcontent-%COMP%], .pack-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.rarity-item[_ngcontent-%COMP%], .pack-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#000;border-radius:5px;border-left:4px solid #007bff}.rarity-name[_ngcontent-%COMP%], .pack-name[_ngcontent-%COMP%]{font-weight:600;color:#fff}.rarity-count[_ngcontent-%COMP%], .pack-count[_ngcontent-%COMP%]{color:#ccc}.rarity-percentage[_ngcontent-%COMP%], .pack-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0}.feature[_ngcontent-%COMP%]{background-color:#000;padding:20px;border-radius:8px;border-left:4px solid #17a2b8}.feature[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0;font-size:14px}.api-info[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:20px}.api-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0}.api-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;margin:0}.api-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;color:#ff6b6b}.error[_ngcontent-%COMP%]{background-color:#000;color:#ff6b6b;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center;border:1px solid #ff6b6b}.card-info[_ngcontent-%COMP%]{margin-top:30px}.card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}.card-item[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.card-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin:0 0 10px;font-size:16px}.card-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#ccc}.note[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#ccc;margin-top:20px}.instructions[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:30px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:#fff}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace}.data-info[_ngcontent-%COMP%]{background-color:#000;border-left:4px solid #007bff;padding:15px;margin-top:20px}.data-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:200px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),t})();function nD(t,e,n,r,o,i,s){try{var a=t[i](s),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(r,o)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(l){nD(i,r,o,s,a,"next",l)}function a(l){nD(i,r,o,s,a,"throw",l)}s(void 0)})}}let e2=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json",this.LOCAL_CARDS_PATH="assets/cards/cards.json"}fetchCardsFromAPI(){return this.http.get(this.CARDS_API_URL)}downloadAndStoreCards(){return this.fetchCardsFromAPI().pipe(ft(r=>{localStorage.setItem("pokemonCards",JSON.stringify(r))}))}getStoredCards(){const r=localStorage.getItem("pokemonCards");return r?JSON.parse(r):null}loadCards(){return this.http.get(this.LOCAL_CARDS_PATH).pipe(O(r=>r||[]))}getCardsBySet(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.set===r)))}getCardsByType(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.type===r)))}getCardsByRarity(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.rarity===r)))}searchCardsByName(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.label.eng.toLowerCase().includes(r.toLowerCase()))))}getUniqueSets(){return this.loadCards().pipe(O(r=>[...new Set(r.map(o=>o.set))]))}getUniqueTypes(){return this.loadCards().pipe(O(r=>[...new Set(r.map(o=>o.type).filter(o=>!!o))]))}getUniqueRarities(){return this.loadCards().pipe(O(r=>[...new Set(r.map(o=>o.rarity))]))}getUniquePacks(){return this.loadCards().pipe(O(r=>[...new Set(r.flatMap(o=>o.packs))]))}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(Eo))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),t2=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsData(){return this.http.get(this.CARDS_API_URL).pipe(qn(r=>(console.error("Error downloading cards data:",r),Pi(()=>new Error("Failed to download cards data")))))}downloadCardsAsBlob(){return this.downloadCardsData().pipe(O(r=>{const o=JSON.stringify(r,null,2);return new Blob([o],{type:"application/json"})}))}triggerDownload(){this.downloadCardsAsBlob().subscribe({next:r=>{const o=window.URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download="cards.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},error:r=>{console.error("Failed to download cards data:",r)}})}getStorageInstructions(){return"\nTo store the cards data locally:\n\n1. Create a 'cards' folder in src/assets/\n2. Use the downloadCardsAsBlob() method to get the data\n3. Save the file as 'cards.json' in src/assets/cards/\n\nAlternative: Use triggerDownload() to download the file and manually move it to the assets folder.\n\nNote: In a production environment, you would typically have a backend service \nto handle file storage and serving.\n    "}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(Eo))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),n2=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsJson(){this.http.get(this.CARDS_API_URL).subscribe({next:r=>{const o=JSON.stringify(r,null,2),i=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="cards.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`Downloaded ${r.length} cards to cards.json\n\nPlease move the file to: src/assets/cards/cards.json`)},error:r=>{console.error("Failed to download cards data:",r),alert("Failed to download cards data. Please check your internet connection.")}})}showSetupInstructions(){return`\n=== Pokemon TCG Pocket Collector Setup Instructions ===\n\n1. AUTOMATIC DOWNLOAD (Recommended):\n   - Click "Download cards.json" button\n   - Move the downloaded file to: src/assets/cards/cards.json\n   - Restart the development server\n\n2. MANUAL DOWNLOAD:\n   - Go to: ${this.CARDS_API_URL}\n   - Right-click and "Save As" to src/assets/cards/cards.json\n   - Restart the development server\n\n3. VERIFY SETUP:\n   - Click "Load Cards Data" to test the service\n   - Check browser console for detailed information\n   - Data will be cached in localStorage for offline use\n\n=== Service Features ===\n- \u2705 Fetch cards from Pokemon TCG Pocket database\n- \u2705 Store data locally for offline access\n- \u2705 Filter by set, type, rarity\n- \u2705 Search cards by name\n- \u2705 Get unique values for filters\n- \u2705 Automatic fallback to localStorage\n\nFor more information, check the browser console when using the services.\n    `}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(Eo))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),rD=(()=>{const e=class{constructor(r){this.http=r,this.BASE_PATH="assets/cards/",this.API_BASE="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/"}loadSets(){return this.http.get(`${this.BASE_PATH}sets.json`)}loadRarities(){return this.http.get(`${this.BASE_PATH}rarity.json`)}loadCards(){return this.http.get(`${this.BASE_PATH}cards.json`)}loadAllData(){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(ft(r=>{}))}getSetByCode(r){return this.loadSets().pipe(O(o=>o.find(i=>i.code===r)))}getRarityName(r){return this.loadRarities().pipe(O(o=>o[r]))}getCardsBySetWithInfo(r){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(O(({cards:o,sets:i,rarities:s})=>{const a=i.find(l=>l.code===r);return o.filter(l=>l.set===r).map(l=>({...l,setInfo:a,fullRarityName:s[l.rarityCode]||l.rarity}))}))}getSetsWithCardCounts(){return So({cards:this.loadCards(),sets:this.loadSets()}).pipe(O(({cards:r,sets:o})=>o.map(i=>{const s=r.filter(a=>a.set===i.code).length;return{...i,actualCardCount:s}})))}getRarityDistribution(){return So({cards:this.loadCards(),rarities:this.loadRarities()}).pipe(O(({cards:r,rarities:o})=>{const i={};r.forEach(a=>{const l=a.rarityCode;i[l]=(i[l]||0)+1});const s=r.length;return Object.entries(i).map(([a,l])=>({code:a,name:o[a]||a,count:l,percentage:Math.round(l/s*100*100)/100})).sort((a,l)=>l.count-a.count)}))}getPackDistribution(){return this.loadCards().pipe(O(r=>{const o={};r.forEach(s=>{(Array.isArray(s.packs)?s.packs:[]).forEach(l=>{l&&l.trim()&&(o[l]=(o[l]||0)+1)})});const i=Object.values(o).reduce((s,a)=>s+a,0);return Object.entries(o).map(([s,a])=>({pack:s,count:a,percentage:i>0?Math.round(a/i*100*100)/100:0})).sort((s,a)=>a.count-s.count)}))}searchCardsEnhanced(r){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(O(({cards:o,sets:i,rarities:s})=>o.filter(l=>l.label.eng.toLowerCase().includes(r.toLowerCase())).map(l=>{const c=i.find(u=>u.code===l.set);return{...l,setInfo:c,fullRarityName:s[l.rarityCode]||l.rarity}})))}getComprehensiveStats(){return So({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(O(({cards:r,sets:o,rarities:i})=>({totalCards:r.length,totalSets:o.length,totalRarities:Object.keys(i).length,setBreakdown:o.map(a=>({...a,actualCardCount:r.filter(l=>l.set===a.code).length})),rarityBreakdown:Object.entries(i).map(([a,l])=>({code:a,name:l,count:r.filter(c=>c.rarityCode===a).length})),packBreakdown:this.calculatePackDistribution(r),dateRange:{earliest:o.reduce((a,l)=>new Date(l.releaseDate)<new Date(a)?l.releaseDate:a,o[0]?.releaseDate||""),latest:o.reduce((a,l)=>new Date(l.releaseDate)>new Date(a)?l.releaseDate:a,o[0]?.releaseDate||"")}})))}calculatePackDistribution(r){const o={};return r.forEach(i=>{(Array.isArray(i.packs)?i.packs:[]).forEach(a=>{a&&a.trim()&&(o[a]=(o[a]||0)+1)})}),Object.entries(o).map(([i,s])=>({pack:i,count:s})).sort((i,s)=>s.count-i.count)}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(Eo))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),oD=(()=>{const e=class{constructor(r,o,i,s){this.cardDataService=r,this.fileStorageService=o,this.assetsHelper=i,this.pokemonDataService=s}initializeCardData(){return this.cardDataService.downloadAndStoreCards().pipe(ft(r=>{this.logDataSummary(r)}),qn(r=>(console.error("Failed to initialize card data:",r),K(this.cardDataService.getStoredCards()||[]))))}downloadCardsFile(){this.assetsHelper.downloadCardsJson()}getStorageInstructions(){return this.assetsHelper.showSetupInstructions()}logDataSummary(r){new Set(r.map(a=>a.set)),new Set(r.map(a=>a.rarity)),new Set(r.flatMap(a=>a.packs))}getAllCards(){return this.cardDataService.loadCards()}getCardsBySet(r){return this.cardDataService.getCardsBySet(r)}getCardsByType(r){return this.cardDataService.getCardsByType(r)}getCardsByPack(r){return this.cardDataService.loadCards().pipe(O(o=>o.filter(i=>i.packs.includes(r))))}searchCards(r){return this.cardDataService.searchCardsByName(r)}getFilterOptions(){return new $e(r=>{Promise.all([this.cardDataService.getUniqueSets().toPromise(),this.cardDataService.getUniqueTypes().toPromise(),this.cardDataService.getUniqueRarities().toPromise(),this.cardDataService.getUniquePacks().toPromise()]).then(([o,i,s,a])=>{r.next({sets:o||[],types:i||[],rarities:s||[],packs:a||[]}),r.complete()}).catch(o=>{r.error(o)})})}loadAllPokemonData(){return this.pokemonDataService.loadAllData().pipe(ft(r=>{this.logEnhancedDataSummary(r)}))}getAllSets(){return this.pokemonDataService.loadSets()}getSetsWithCounts(){return this.pokemonDataService.getSetsWithCardCounts()}getRarityMapping(){return this.pokemonDataService.loadRarities()}getSetInfo(r){return this.pokemonDataService.getSetByCode(r)}getCardsBySetEnhanced(r){return this.pokemonDataService.getCardsBySetWithInfo(r)}searchCardsEnhanced(r){return this.pokemonDataService.searchCardsEnhanced(r)}getRarityStats(){return this.pokemonDataService.getRarityDistribution()}getPackStats(){return this.pokemonDataService.getPackDistribution()}getComprehensiveStats(){return this.pokemonDataService.getComprehensiveStats()}logEnhancedDataSummary(r){}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(e2),B(t2),B(n2),B(rD))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();class rp extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class iD extends rp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sD extends rp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class aD extends rp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Uc=(()=>{return(t=Uc||(Uc={})).Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2",Uc;var t})();class o2{constructor(e,{headers:n={},customFetch:r,region:o=Uc.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=(t=>{let e;return e=t||(typeof fetch>"u"?(...n)=>Promise.resolve().then(Y.bind(Y,397)).then(({default:r})=>r(...n)):fetch),(...n)=>e(...n)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,F.__awaiter)(this,arguments,void 0,function*(n,r={}){var o;try{const{headers:i,method:s,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${n}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):"string"==typeof a?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(_=>{throw"AbortError"===_.name?_:new iD(_)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new sD(f);if(!f.ok)throw new aD(f);let y,g=(null!==(o=f.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return y="application/json"===g?yield f.json():"application/octet-stream"===g||"application/pdf"===g?yield f.blob():"text/event-stream"===g?f:"multipart/form-data"===g?yield f.formData():yield f.text(),{data:y,error:null,response:f}}catch(i){return i instanceof Error&&"AbortError"===i.name?{data:null,error:new iD(i)}:{data:null,error:i,response:i instanceof aD||i instanceof sD?i.context:void 0}}})}}var i2=Y(358);const{PostgrestClient:lD}=i2,h2=class d2{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(e=navigator.userAgent)&&void 0!==e&&e.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=parseInt(n.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`\n\nSuggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){return new(this.getWebSocketConstructor())(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch{return!1}}};var Hi=(()=>{return(t=Hi||(Hi={}))[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",Hi;var t})(),pt=(()=>{return(t=pt||(pt={})).closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving",pt;var t})(),On=(()=>{return(t=On||(On={})).close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token",On;var t})(),$c=(()=>(($c||($c={})).websocket="websocket",$c))(),ro=(()=>{return(t=ro||(ro={})).Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed",ro;var t})();class y2{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),i=n.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(e.slice(s,s+o));s+=o;const l=r.decode(e.slice(s,s+i));return s+=i,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class cD{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne=(()=>{return(t=Ne||(Ne={})).abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange",Ne;var t})();const uD=(t,e,n={})=>{var r;const o=null!==(r=n.skipTypes)&&void 0!==r?r:[];return e?Object.keys(e).reduce((i,s)=>(i[s]=_2(s,t,e,o),i),{}):{}},_2=(t,e,n,r)=>{const i=e.find(a=>a.name===t)?.type,s=n[t];return i&&!r.includes(i)?dD(i,s):ip(s)},dD=(t,e)=>{if("_"===t.charAt(0)){const n=t.slice(1,t.length);return w2(e,n)}switch(t){case Ne.bool:return v2(e);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return C2(e);case Ne.json:case Ne.jsonb:return b2(e);case Ne.timestamp:return D2(e);default:return ip(e)}},ip=t=>t,v2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},C2=t=>{if("string"==typeof t){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},b2=t=>{if("string"==typeof t)try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},w2=(t,e)=>{if("string"!=typeof t)return t;const n=t.length-1;if("{"===t[0]&&"}"===t[n]){let i;const s=t.slice(1,n);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>dD(e,a))}return t},D2=t=>"string"==typeof t?t.replace(" ","T"):t,hD=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname=""===e.pathname||"/"===e.pathname?"/api/broadcast":e.pathname+"/api/broadcast",e.href};class sp{constructor(e,n,r={},o=1e4){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class va{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=va.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=va.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=va.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const i=this.cloneDeep(e),s=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[c]=p),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(e,n,r,o){const{joins:i,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=e[a])&&void 0!==c?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,o(a,c,l),0===c.length&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return n[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zi=(()=>{return(t=zi||(zi={})).BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",zi;var t})(),yr=(()=>{return(t=yr||(yr={})).SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR",yr;var t})();class ap{constructor(e,n={config:{}},r){var o,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new sp(this,On.join,this.params,this.timeout),this.rejoinTimer=new cD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(On.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new va(this),this.broadcastEndpointURL=hD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(p=>p.filter))&&void 0!==i?i:[],d=!!this.bindings[zi.PRESENCE]&&this.bindings[zi.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(yr.CHANNEL_ERROR,p)),this._onClose(()=>e?.(yr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",function(){var p=m(function*({postgres_changes:g}){var y;if(r.socket.setAuth(),void 0!==g){const _=r.bindings.postgres_changes,x=null!==(y=_?.length)&&void 0!==y?y:0,b=[];for(let P=0;P<x;P++){const N=_[P],{filter:{event:z,schema:Wt,table:Ae,filter:at}}=N,Kn=g&&g[P];if(!Kn||Kn.event!==z||Kn.schema!==Wt||Kn.table!==Ae||Kn.filter!==at)return r.unsubscribe(),r.state=pt.errored,void e?.(yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));b.push(Object.assign(Object.assign({},N),{id:Kn.id}))}return r.bindings.postgres_changes=b,void(e&&e(yr.SUBSCRIBED))}e?.(yr.SUBSCRIBED)});return function(g){return p.apply(this,arguments)}}()).receive("error",p=>{this.state=pt.errored,e?.(yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(e){var n=this;return m(function*(r,o={}){return yield n.send({type:"presence",event:"track",payload:r},o.timeout||n.timeout)}).apply(this,arguments)}untrack(){var e=this;return m(function*(n={}){return yield e.send({type:"presence",event:"untrack"},n)}).apply(this,arguments)}on(e,n,r){return this.state===pt.joined&&e===zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}httpSend(e,n){var r=this;return m(function*(o,i,s={}){var a;const l=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,c,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const h=yield u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(e){var n=this;return m(function*(r,o={}){var i,s;if(n._canPush()||"broadcast"!==r.type)return new Promise(a=>{var l,c,u;const d=n._push(r.type,r,o.timeout||n.timeout);"broadcast"===r.type&&!(null!==(u=null===(c=null===(l=n.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=r,u={method:"POST",headers:{Authorization:n.socket.accessTokenValue?`Bearer ${n.socket.accessTokenValue}`:"",apikey:n.socket.apiKey?n.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:n.subTopic,event:a,payload:l,private:n.private}]})};try{const d=yield n._fetchWithTimeout(n.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:n.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(On.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new sp(this,On.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}_fetchWithTimeout(e,n,r){var o=this;return m(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a})()}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new sp(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,i;const s=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=On;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(f=>{var p,g,y;return"*"===(null===(p=f.filter)||void 0===p?void 0:p.event)||(null===(y=null===(g=f.filter)||void 0===g?void 0:g.event)||void 0===y?void 0:y.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):null===(i=this.bindings[s])||void 0===i||i.filter(f=>{var p,g,y,_,x,b;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in f){const P=f.id,N=null===(p=f.filter)||void 0===p?void 0:p.event;return P&&(null===(g=n.ids)||void 0===g?void 0:g.includes(P))&&("*"===N||N?.toLocaleLowerCase()===(null===(y=n.data)||void 0===y?void 0:y.type.toLocaleLowerCase()))}{const P=null===(x=null===(_=f?.filter)||void 0===_?void 0:_.event)||void 0===x?void 0:x.toLocaleLowerCase();return"*"===P||P===(null===(b=n?.event)||void 0===b?void 0:b.toLocaleLowerCase())}}return f.type.toLocaleLowerCase()===s}).map(f=>{if("object"==typeof h&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:_,type:x,errors:b}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:_,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),i={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&ap.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(On.close,{},e)}_onError(e){this._on(On.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(n.new=uD(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(n.old=uD(e.columns,e.old_record)),n}}const lp=()=>{},E2=[1e3,2e3,5e3,1e4];class I2{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lp,this.ref=0,this.reconnectTimer=null,this.logger=lp,this.conn=null,this.sendBuffer=[],this.serializer=new y2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return i=o||(typeof fetch>"u"?(...s)=>Promise.resolve().then(Y.bind(Y,397)).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...s)=>i(...s)},null===(r=n?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${$c.websocket}`,this.httpEndpoint=hD(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=h2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){var n=this;return m(function*(){const r=yield e.unsubscribe();return 0===n.channels.length&&n.disconnect(),r})()}removeAllChannels(){var e=this;return m(function*(){const n=yield Promise.all(e.channels.map(r=>r.unsubscribe()));return e.channels=[],e.disconnect(),n})()}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Hi.connecting:return ro.Connecting;case Hi.open:return ro.Open;case Hi.closing:return ro.Closing;default:return ro.Closed}}isConnected(){return this.connectionState()===ro.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new ap(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:o,ref:i}=e,s=()=>{this.encode(e,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${n} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var e=this;return m(function*(n=null){e._authPromise=e._performAuth(n);try{yield e._authPromise}finally{e._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var e=this;return m(function*(){var n;if(e.isConnected()){if(e.pendingHeartbeatRef){e.pendingHeartbeatRef=null,e.log("transport","heartbeat timeout. Attempting to re-establish connection");try{e.heartbeatCallback("timeout")}catch(r){e.log("error","error in heartbeat callback",r)}return e._wasManualDisconnect=!1,null===(n=e.conn)||void 0===n||n.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;e.isConnected()||null===(r=e.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}e.pendingHeartbeatRef=e._makeRef(),e.push({topic:"phoenix",event:"heartbeat",payload:{},ref:e.pendingHeartbeatRef});try{e.heartbeatCallback("sent")}catch(r){e.log("error","error in heartbeat callback",r)}e._setAuthSafely("heartbeat")}else try{e.heartbeatCallback("disconnected")}catch(r){e.log("error","error in heartbeat callback",r)}})()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return this.ref=e===this.ref?0:e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if("phoenix"===n.topic&&"phx_reply"===n.event)try{this.heartbeatCallback("ok"===n.payload.status?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=n;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,i,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(n=this.reconnectTimer)||void 0===n||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{"keepAlive"===n.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(n=this.reconnectTimer)||void 0===n||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(On.error))}_appendParams(e,n){if(0===Object.keys(n).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(n)}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=n)}_performAuth(){var e=this;return m(function*(n=null){let r;r=n||(e.accessToken?yield e.accessToken():e.accessTokenValue),e.accessTokenValue!=r&&(e.accessTokenValue=r,e.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.76.1"}),o.joinedOnce&&o._isJoined()&&o._push(On.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var e=this;return m(function*(){e._authPromise&&(yield e._authPromise)})()}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){var e=this;this.reconnectTimer=new cD(m(function*(){setTimeout(m(function*(){yield e._waitForAuthIfNeeded(),e.isConnected()||e.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,i,s,a,l,c,u;if(this.transport=null!==(n=e?.transport)&&void 0!==n?n:null,this.timeout=null!==(r=e?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=e?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=e?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=e?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=e?.heartbeatCallback)&&void 0!==a?a:lp,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=e?.reconnectAfterMs)&&void 0!==l?l:d=>E2[d-1]||1e4,this.encode=null!==(c=e?.encode)&&void 0!==c?c:(d,h)=>h(JSON.stringify(d)),this.decode=null!==(u=e?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class cp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ke(t){return"object"==typeof t&&null!==t&&"__isStorageError"in t}class x2 extends cp{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class up extends cp{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const dp=t=>{let e;return e=t||(typeof fetch>"u"?(...n)=>Promise.resolve().then(Y.bind(Y,397)).then(({default:r})=>r(...n)):fetch),(...n)=>e(...n)},hp=t=>{if(Array.isArray(t))return t.map(n=>hp(n));if("function"==typeof t||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[o]=hp(r)}),e},fp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),O2=(t,e,n)=>(0,F.__awaiter)(void 0,void 0,void 0,function*(){const r=yield(0,F.__awaiter)(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(Y.bind(Y,397))).Response:Response});t instanceof r&&!n?.noResolveJson?t.json().then(o=>{const i=t.status||500,s=o?.statusCode||i+"";e(new x2(fp(o),i,s))}).catch(o=>{e(new up(fp(o),o))}):e(new up(fp(t),t))}),P2=(t,e,n,r)=>{const o={method:t,headers:e?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n)):o};function Ca(t,e,n,r,o,i){return(0,F.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(n,P2(e,r,o,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>O2(l,a,r))})})}function ba(t,e,n,r){return(0,F.__awaiter)(this,void 0,void 0,function*(){return Ca(t,"GET",e,n,r)})}function Wn(t,e,n,r,o){return(0,F.__awaiter)(this,void 0,void 0,function*(){return Ca(t,"POST",e,r,o,n)})}function pp(t,e,n,r,o){return(0,F.__awaiter)(this,void 0,void 0,function*(){return Ca(t,"PUT",e,r,o,n)})}function gp(t,e,n,r,o){return(0,F.__awaiter)(this,void 0,void 0,function*(){return Ca(t,"DELETE",e,r,o,n)})}class k2{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}}var fD;fD=Symbol.toStringTag;const L2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class j2{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=dp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},pD),o);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield("PUT"==e?pp:Wn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}upload(e,n,r){return(0,F.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return(0,F.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:pD.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(yield pp(this.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ke(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const i=yield Wn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new cp("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}update(e,n,r){return(0,F.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}copy(e,n,r){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Wn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),i=yield Wn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{const o=yield Wn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(n?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(e);return new class N2{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[fD]="BlobDownloadBuilder",this.promise=null}asStream(){return new k2(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}}(()=>ba(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ba(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:hp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}exists(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield function R2(t,e,n,r){return(0,F.__awaiter)(this,void 0,void 0,function*(){return Ca(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r)&&r instanceof up&&[400,404].includes(r.originalError?.status))return{data:!1,error:r};throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],i=n?.download?`download=${!0===n.download?"":n.download}`:"";""!==i&&o.push(i);const a=typeof n?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(n?.transform||{});""!==l&&o.push(l);let c=o.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}list(e,n,r){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},L2),n),{prefix:e||""});return{data:yield Wn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}listV2(e,n){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Wn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const mD={"X-Client-Info":"storage-js/2.76.1"};class V2{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const i=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mD),n),this.fetch=dp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}createBucket(e){return(0,F.__awaiter)(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Wn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield pp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}emptyBucket(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}}class U2{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mD),n),this.fetch=dp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}listBuckets(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{const n=new URLSearchParams;void 0!==e?.limit&&n.set("limit",e.limit.toString()),void 0!==e?.offset&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const r=n.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield ba(this.fetch,o,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}}const mp={"X-Client-Info":"storage-js/2.76.1","Content-Type":"application/json"};class yD extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function fn(t){return"object"==typeof t&&null!==t&&"__isStorageVectorsError"in t}class yp extends yD{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $2 extends yD{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}const _p=t=>{let e;return e=t||(typeof fetch>"u"?(...n)=>Promise.resolve().then(Y.bind(Y,397)).then(({default:r})=>r(...n)):fetch),(...n)=>e(...n)},_D=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),H2=(t,e,n)=>(0,F.__awaiter)(void 0,void 0,void 0,function*(){if(t&&"object"==typeof t&&"status"in t&&"ok"in t&&"number"==typeof t.status&&!n?.noResolveJson){const o=t.status||500,i=t;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";e(new yp(_D(s),o,a))}).catch(()=>{e(new yp(i.statusText||`HTTP ${o} error`,o,o+""))}):e(new yp(i.statusText||`HTTP ${o} error`,o,o+""))}else e(new $2(_D(t),t))}),z2=(t,e,n,r)=>{const o={method:t,headers:e?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),n)):o};function pn(t,e,n,r,o){return(0,F.__awaiter)(this,void 0,void 0,function*(){return function Hc(t,e,n,r,o,i){return(0,F.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(n,z2(e,r,o,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return c&&c.includes("application/json")?l.json():{}}).then(l=>s(l)).catch(l=>H2(l,a,r))})})}(t,"POST",e,r,o,n)})}class G2{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mp),n),this.fetch=_p(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield pn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}listIndexes(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield pn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}}class q2{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mp),n),this.fetch=_p(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield pn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}getVectors(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}listVectors(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield pn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}queryVectors(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield pn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}}class W2{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mp),n),this.fetch=_p(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield pn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}getBucket(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}listBuckets(){return(0,F.__awaiter)(this,arguments,void 0,function*(e={}){try{return{data:yield pn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return(0,F.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield pn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}}class J2 extends W2{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new K2(this.url,this.headers,e,this.fetch)}}class K2 extends G2{constructor(e,n,r,o){super(e,n,o),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,F.__awaiter)(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,F.__awaiter)(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,F.__awaiter)(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,F.__awaiter)(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Y2(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Y2 extends q2{constructor(e,n,r,o,i){super(e,n,i),this.vectorBucketName=r,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,F.__awaiter)(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,F.__awaiter)(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,F.__awaiter)(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,F.__awaiter)(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,F.__awaiter)(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Q2 extends V2{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new j2(this.url,this.headers,e,this.fetch)}get vectors(){return new J2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new U2(this.url+"/iceberg",this.headers,this.fetch)}}let wa="";wa=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const X2={headers:{"X-Client-Info":`supabase-js-${wa}/2.76.1`}},ej={schema:"public"},tj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nj={};var vD=Y(397);const ij=(t,e,n)=>{const r=(t=>{let e;return e=t||(typeof fetch>"u"?vD.default:fetch),(...n)=>e(...n)})(n),o=typeof Headers>"u"?vD.Headers:Headers;return function(){var i=m(function*(s,a){var l;const c=null!==(l=yield e())&&void 0!==l?l:t;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},Gi=3e4,bp="X-Supabase-Api-Version",bD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Da extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Z(t){return"object"==typeof t&&null!==t&&"__isAuthError"in t}class pj extends Da{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}class Po extends Da{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class oo extends Da{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class io extends oo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class qi extends oo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zc extends oo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Gc extends oo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wD extends oo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wp extends oo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Dp(t){return Z(t)&&"AuthRetryableFetchError"===t.name}class DD extends oo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ep extends oo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ED=" \t\n\r=".split(""),_j=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ED.length;e+=1)t[ED[e].charCodeAt(0)]=-2;for(let e=0;e<qc.length;e+=1)t[qc[e].charCodeAt(0)]=e;return t})();function Wc(t,e,n){if(null!==t)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;)n(qc[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6;else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;)n(qc[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6}function SD(t,e,n){const r=_j[t];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8}function MD(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function Cj(t,e,n){if(0===e.utf8seq){if(t<=127)return void n(t);for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(2===e.utf8seq)e.codepoint=31&t;else if(3===e.utf8seq)e.codepoint=15&t;else{if(4!==e.utf8seq)throw new Error("Invalid UTF-8 sequence");e.codepoint=7&t}e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|63&t,e.utf8seq-=1,0===e.utf8seq&&n(e.codepoint)}}(s,r,n)};for(let s=0;s<t.length;s+=1)SD(t.charCodeAt(s),o,i);return e.join("")}function vj(t,e){if(!(t<=127)){if(t<=2047)return e(192|t>>6),void e(128|63&t);if(t<=65535)return e(224|t>>12),e(128|t>>6&63),void e(128|63&t);if(t<=1114111)return e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),void e(128|63&t);throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}e(t)}function Wi(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)SD(t.charCodeAt(o),n,r);return new Uint8Array(e)}function Ro(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return t.forEach(o=>Wc(o,n,r)),Wc(null,n,r),e.join("")}const gn=()=>typeof window<"u"&&typeof document<"u",ko={tested:!1,writable:!1},xD=()=>{if(!gn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(ko.tested)return ko.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ko.tested=!0,ko.writable=!0}catch{ko.tested=!0,ko.writable=!1}return ko.writable},AD=t=>{let e;return e=t||(typeof fetch>"u"?(...n)=>Promise.resolve().then(Y.bind(Y,397)).then(({default:r})=>r(...n)):fetch),(...n)=>e(...n)},Sj=t=>"object"==typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json,Ji=function(){var t=m(function*(e,n,r){yield e.setItem(n,JSON.stringify(r))});return function(n,r,o){return t.apply(this,arguments)}}(),No=function(){var t=m(function*(e,n){const r=yield e.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(n,r){return t.apply(this,arguments)}}(),so=function(){var t=m(function*(e,n){yield e.removeItem(n)});return function(n,r){return t.apply(this,arguments)}}();class Jc{constructor(){this.promise=new Jc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}function Sp(t){const e=t.split(".");if(3!==e.length)throw new Ep("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!hj.test(e[r]))throw new Ep("JWT not in base64url format");return{header:JSON.parse(MD(e[0])),payload:JSON.parse(MD(e[1])),signature:Wi(e[2]),raw:{header:e[0],payload:e[1]}}}function Mp(){return(Mp=m(function*(t){return yield new Promise(e=>{setTimeout(()=>e(null),t)})})).apply(this,arguments)}function xj(t){return("0"+t.toString(16)).substr(-2)}function Ip(){return(Ip=m(function*(t){const n=(new TextEncoder).encode(t),r=yield crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function xp(){return xp=m(function*(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=yield function Tj(t){return Ip.apply(this,arguments)}(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),xp.apply(this,arguments)}function Ki(t,e){return Ap.apply(this,arguments)}function Ap(){return Ap=m(function*(t,e,n=!1){const r=function Aj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let i=0;i<56;i++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,xj).join("")}();let o=r;n&&(o+="/PASSWORD_RECOVERY"),yield Ji(t,`${e}-code-verifier`,o);const i=yield function Oj(t){return xp.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),Ap.apply(this,arguments)}Jc.promiseConstructor=Promise;const Pj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Fj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yi(t){if(!Fj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tp(){return new Proxy({},{get:(e,n)=>{if("__isUserNotAvailableProxy"===n)return!0;if("symbol"==typeof n){const r=n.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function TD(t){return JSON.parse(JSON.stringify(t))}const Fo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Lj=[502,503,504];function OD(t){return Op.apply(this,arguments)}function Op(){return(Op=m(function*(t){var e;if(!Sj(t))throw new wp(Fo(t),0);if(Lj.includes(t.status))throw new wp(Fo(t),t.status);let n,r;try{n=yield t.json()}catch(i){throw new Po(Fo(i),i)}const o=function Rj(t){const e=t.headers.get(bp);if(!e||!e.match(Pj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}(t);if(o&&o.getTime()>=bD["2024-01-01"].timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?r=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(r=n.error_code),r){if("weak_password"===r)throw new DD(Fo(n),t.status,(null===(e=n.weak_password)||void 0===e?void 0:e.reasons)||[]);if("session_not_found"===r)throw new io}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new DD(Fo(n),t.status,n.weak_password.reasons);throw new pj(Fo(n),t.status||500,r)})).apply(this,arguments)}const jj=(t,e,n,r)=>{const o={method:t,headers:e?.headers||{}};return"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};function he(t,e,n,r){return Pp.apply(this,arguments)}function Pp(){return Pp=m(function*(t,e,n,r){var o;const i=Object.assign({},r?.headers);i[bp]||(i[bp]=bD["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield function Vj(t,e,n,r,o,i){return Rp.apply(this,arguments)}(t,e,n+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),Pp.apply(this,arguments)}function Rp(){return(Rp=m(function*(t,e,n,r,o,i){const s=jj(e,r,o,i);let a;try{a=yield t(n,Object.assign({},s))}catch(l){throw console.error(l),new wp(Fo(l),0)}if(a.ok||(yield OD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield OD(l)}})).apply(this,arguments)}function Jn(t){var e;let n=null;return function Bj(t){return t.access_token&&t.refresh_token&&t.expires_in}(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=function wj(t){return Math.round(Date.now()/1e3)+t}(t.expires_in))),{data:{session:n,user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function PD(t){const e=Jn(t);return!e.error&&t.weak_password&&"object"==typeof t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&"string"==typeof t.weak_password.message&&t.weak_password.reasons.reduce((n,r)=>n&&"string"==typeof r,!0)&&(e.data.weak_password=t.weak_password),e}function ao(t){var e;return{data:{user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function Uj(t){return{data:t,error:null}}function $j(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i}=t,s=(0,F.__rest)(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function RD(t){return t}const kp=["global","local","others"];class Hj{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=AD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(e){var n=this;return m(function*(r,o=kp[0]){if(kp.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kp.join(", ")}`);try{return yield he(n.fetch,"POST",`${n.url}/logout?scope=${o}`,{headers:n.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Z(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(e){var n=this;return m(function*(r,o={}){try{return yield he(n.fetch,"POST",`${n.url}/invite`,{body:{email:r,data:o.data},headers:n.headers,redirectTo:o.redirectTo,xform:ao})}catch(i){if(Z(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(e){var n=this;return m(function*(){try{const{options:r}=e,o=(0,F.__rest)(e,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield he(n.fetch,"POST",`${n.url}/admin/generate_link`,{body:i,headers:n.headers,xform:$j,redirectTo:r?.redirectTo})}catch(r){if(Z(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(e){var n=this;return m(function*(){try{return yield he(n.fetch,"POST",`${n.url}/admin/users`,{body:e,headers:n.headers,xform:ao})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}})()}listUsers(e){var n=this;return m(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield he(n.fetch,"GET",`${n.url}/admin/users`,{headers:n.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=e?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:RD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Z(u))return{data:{users:[]},error:u};throw u}})()}getUserById(e){var n=this;return m(function*(){Yi(e);try{return yield he(n.fetch,"GET",`${n.url}/admin/users/${e}`,{headers:n.headers,xform:ao})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}})()}updateUserById(e,n){var r=this;return m(function*(){Yi(e);try{return yield he(r.fetch,"PUT",`${r.url}/admin/users/${e}`,{body:n,headers:r.headers,xform:ao})}catch(o){if(Z(o))return{data:{user:null},error:o};throw o}})()}deleteUser(e){var n=this;return m(function*(r,o=!1){Yi(r);try{return yield he(n.fetch,"DELETE",`${n.url}/admin/users/${r}`,{headers:n.headers,body:{should_soft_delete:o},xform:ao})}catch(i){if(Z(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(e){var n=this;return m(function*(){Yi(e.userId);try{const{data:r,error:o}=yield he(n.fetch,"GET",`${n.url}/admin/users/${e.userId}/factors`,{headers:n.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(Z(r))return{data:null,error:r};throw r}})()}_deleteFactor(e){var n=this;return m(function*(){Yi(e.userId),Yi(e.id);try{return{data:yield he(n.fetch,"DELETE",`${n.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:n.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})()}_listOAuthClients(e){var n=this;return m(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield he(n.fetch,"GET",`${n.url}/admin/oauth/clients`,{headers:n.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=e?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:RD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Z(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(e){var n=this;return m(function*(){try{return yield he(n.fetch,"POST",`${n.url}/admin/oauth/clients`,{body:e,headers:n.headers,xform:r=>({data:r,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}})()}_getOAuthClient(e){var n=this;return m(function*(){try{return yield he(n.fetch,"GET",`${n.url}/admin/oauth/clients/${e}`,{headers:n.headers,xform:r=>({data:r,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}})()}_deleteOAuthClient(e){var n=this;return m(function*(){try{return yield he(n.fetch,"DELETE",`${n.url}/admin/oauth/clients/${e}`,{headers:n.headers,xform:r=>({data:r,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(e){var n=this;return m(function*(){try{return yield he(n.fetch,"POST",`${n.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:n.headers,xform:r=>({data:r,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}})()}}function kD(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Qi={debug:!!(globalThis&&xD()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class ND extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zj extends ND{}function qj(t,e,n){return Np.apply(this,arguments)}function Np(){return Np=m(function*(t,e,n){Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(t,0===e?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=m(function*(i){if(!i){if(0===e)throw Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new zj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Qi.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield n()}Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return yield n()}finally{Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),Np.apply(this,arguments)}function LD(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Kj(t){const e=(new TextEncoder).encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}class gt extends Error{constructor({message:e,code:n,cause:r,name:o}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=n}}class Kc extends gt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Qj({error:t,options:e}){var n,r,o;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal instanceof AbortSignal)return new gt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(n=i.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new gt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===e.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new gt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new gt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new gt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new gt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new gt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new gt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if("SecurityError"===t.name){const s=window.location.hostname;if(!jD(s))return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rp.id!==s)return new gt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new gt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new gt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Zj({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal instanceof AbortSignal)return new gt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new gt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const r=window.location.hostname;if(!jD(r))return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(n.rpId!==r)return new gt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new gt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const eV=new class Xj{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function tV(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,o=(0,F.__rest)(t,["challenge","user","excludeCredentials"]),i=Wi(e).buffer,s=Object.assign(Object.assign({},n),{id:Wi(n.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Wi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function nV(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=(0,F.__rest)(t,["challenge","allowCredentials"]),o=Wi(e).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const a=n[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Wi(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function rV(t){var e;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ro(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ro(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:null!==(e=n.authenticatorAttachment)&&void 0!==e?e:void 0}}function oV(t){var e;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const n=t,r=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ro(new Uint8Array(o.authenticatorData)),clientDataJSON:Ro(new Uint8Array(o.clientDataJSON)),signature:Ro(new Uint8Array(o.signature)),userHandle:o.userHandle?Ro(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(e=n.authenticatorAttachment)&&void 0!==e?e:void 0}}function jD(t){return"localhost"===t||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function VD(){var t,e;return!!(gn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(t=navigator?.credentials)||void 0===t?void 0:t.create)&&"function"==typeof(null===(e=navigator?.credentials)||void 0===e?void 0:e.get))}function Lp(){return(Lp=m(function*(t){try{const e=yield navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Kc("Browser returned unexpected credential type",e)}:{data:null,error:new Kc("Empty credential response",e)}}catch(e){return{data:null,error:Qj({error:e,options:t})}}})).apply(this,arguments)}function jp(){return(jp=m(function*(t){try{const e=yield navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Kc("Browser returned unexpected credential type",e)}:{data:null,error:new Kc("Empty credential response",e)}}catch(e){return{data:null,error:Zj({error:e,options:t})}}})).apply(this,arguments)}const aV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},lV={userVerification:"preferred",hints:["security-key"]};function Yc(...t){const e=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of t)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(n(s))r[i]=s;else if(e(s)){const a=r[i];r[i]=e(a)?Yc(a,s):Yc(s)}else r[i]=s}return r}class dV{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(e){var n=this;return m(function*(){return n.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))})()}_challenge(e,n){var r=this;return m(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!c)return{data:null,error:u};const d=a??eV.createNewAbortSignal();if("create"===c.webauthn.type){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=function cV(t,e){return Yc(aV,t,e||{})}(c.webauthn.credential_options.publicKey,l?.create),{data:f,error:p}=yield function iV(t){return Lp.apply(this,arguments)}({publicKey:h,signal:d});return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=function uV(t,e){return Yc(lV,t,e||{})}(c.webauthn.credential_options.publicKey,l?.request),{data:f,error:p}=yield function sV(t){return jp.apply(this,arguments)}(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(c){return Z(c)?{data:null,error:c}:{data:null,error:new Po("Unexpected error in challenge",c)}}}).apply(this,arguments)}_verify(e){var n=this;return m(function*({challengeId:r,factorId:o,webauthn:i}){return n.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(e,n){var r=this;return m(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}},l){if(!i)return{data:null,error:new Da("rpId is required for WebAuthn authentication")};try{if(!VD())return{data:null,error:new Po("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:u};const{webauthn:d}=c;return r._verify({factorId:o,challengeId:c.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return Z(c)?{data:null,error:c}:{data:null,error:new Po("Unexpected error in authenticate",c)}}}).apply(this,arguments)}_register(e,n){var r=this;return m(function*({friendlyName:o,rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a},l){if(!i)return{data:null,error:new Da("rpId is required for WebAuthn registration")};try{if(!VD())return{data:null,error:new Po("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r._enroll({friendlyName:o});if(!c)return yield r.client.mfa.listFactors().then(f=>{var p;return null===(p=f.data)||void 0===p?void 0:p.all.find(g=>"webauthn"===g.factor_type&&g.friendly_name===o&&"unverified"!==g.status)}).then(f=>f?r.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:d,error:h}=yield r._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return d?r._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(c){return Z(c)?{data:null,error:c}:{data:null,error:new Po("Unexpected error in register",c)}}}).apply(this,arguments)}}!function Wj(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const hV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.76.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function UD(t,e,n){return Vp.apply(this,arguments)}function Vp(){return(Vp=m(function*(t,e,n){return yield n()})).apply(this,arguments)}const Zi={},pV=(()=>{class t{get jwks(){var n,r;return null!==(r=null===(n=Zi[this.storageKey])||void 0===n?void 0:n.jwks)&&void 0!==r?r:{keys:[]}}set jwks(n){Zi[this.storageKey]=Object.assign(Object.assign({},Zi[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return null!==(r=null===(n=Zi[this.storageKey])||void 0===n?void 0:n.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Zi[this.storageKey]=Object.assign(Object.assign({},Zi[this.storageKey]),{cachedAt:n})}constructor(n){var o,i,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=t.nextInstanceID,t.nextInstanceID+=1,this.instanceID>0&&gn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},hV),n);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Hj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=AD(s.fetch),this.lock=s.lock||UD,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.lock=s.lock?s.lock:gn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?qj:UD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dV(this)},this.persistSession?(s.storage?this.storage=s.storage:xD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=kD(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=kD(this.memoryStorage)),gn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=m(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.76.1) ${(new Date).toISOString()}`,...n),this}initialize(){var n=this;return m(function*(){return n.initializePromise||(n.initializePromise=m(function*(){return yield n._acquireLock(-1,m(function*(){return yield n._initialize()}))})()),yield n.initializePromise})()}_initialize(){var n=this;return m(function*(){var r;try{const o=function Ej(t){const e={},n=new URL(t);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((o,i)=>{e[i]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}(window.location.href);let i="none";if(n._isImplicitGrantCallback(o)?i="implicit":(yield n._isPKCECallback(o))&&(i="pkce"),gn()&&n.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield n._getSessionFromURL(o,i);if(a){if(n._debug("#_initialize()","error detecting session from URL",a),function yj(t){return Z(t)&&"AuthImplicitGrantRedirectError"===t.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield n._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return n._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield n._saveSession(l),setTimeout(m(function*(){"recovery"===c?yield n._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield n._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield n._recoverAndRefresh(),{error:null}}catch(o){return Z(o)?{error:o}:{error:new Po("Unexpected error during initialization",o)}}finally{yield n._handleVisibilityChange(),n._debug("#_initialize()","end")}})()}signInAnonymously(n){var r=this;return m(function*(){var o,i,s;try{const a=yield he(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=n?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=n?.options)||void 0===s?void 0:s.captchaToken}},xform:Jn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(Z(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(n){var r=this;return m(function*(){var o,i,s;try{let a;if("email"in n){const{email:h,password:f,options:p}=n;let g=null,y=null;"pkce"===r.flowType&&([g,y]=yield Ki(r.storage,r.storageKey)),a=yield he(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:null!==(o=p?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:y},xform:Jn})}else{if(!("phone"in n))throw new zc("You must provide either an email or phone number and a password");{const{phone:h,password:f,options:p}=n;a=yield he(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:h,password:f,data:null!==(i=p?.data)&&void 0!==i?i:{},channel:null!==(s=p?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Jn})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(Z(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(n){var r=this;return m(function*(){try{let o;if("email"in n){const{email:a,password:l,options:c}=n;o=yield he(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:PD})}else{if(!("phone"in n))throw new zc("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=n;o=yield he(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:PD})}}const{data:i,error:s}=o;return s?{data:{user:null,session:null},error:s}:i&&i.session&&i.user?(i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s}):{data:{user:null,session:null},error:new qi}}catch(o){if(Z(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(n){var r=this;return m(function*(){var o,i,s,a;return yield r._handleProviderSignIn(n.provider,{redirectTo:null===(o=n.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=n.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=n.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=n.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(n){var r=this;return m(function*(){return yield r.initializePromise,r._acquireLock(-1,m(function*(){return r._exchangeCodeForSession(n)}))})()}signInWithWeb3(n){var r=this;return m(function*(){const{chain:o}=n;switch(o){case"ethereum":return yield r.signInWithEthereum(n);case"solana":return yield r.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(n){var r=this;return m(function*(){var o,i,s,a,l,c,u,d,h,f,p;let g,y;if("message"in n)g=n.message,y=n.signature;else{const{wallet:x,statement:b,options:P}=n;let N;if(gn())if("object"==typeof x)N=x;else{const mn=window;if(!("ethereum"in mn)||"object"!=typeof mn.ethereum||!("request"in mn.ethereum)||"function"!=typeof mn.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");N=mn.ethereum}else{if("object"!=typeof x||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=x}const z=new URL(null!==(o=P?.url)&&void 0!==o?o:window.location.href),Wt=yield N.request({method:"eth_requestAccounts"}).then(mn=>mn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Wt||0===Wt.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Ae=LD(Wt[0]);let at=null===(i=P?.signInWithEthereum)||void 0===i?void 0:i.chainId;at||(at=function Jj(t){return parseInt(t,16)}(yield N.request({method:"eth_chainId"}))),g=function Yj(t){var e;const{chainId:n,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=t;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null!==(e=t.statement)&&void 0!==e&&e.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`);const y=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${LD(t.address)}\n\n${t.statement?`${t.statement}\n`:""}`;let _=`URI: ${d}\nVersion: ${h}\nChain ID: ${n}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(_+=`\nExpiration Time: ${o.toISOString()}`),a&&(_+=`\nNot Before: ${a.toISOString()}`),l&&(_+=`\nRequest ID: ${l}`),c){let x="\nResources:";for(const b of c){if(!b||"string"!=typeof b)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`\n- ${b}`}_+=x}return`${y}\n${_}`}({domain:z.host,address:Ae,statement:b,uri:z.href,version:"1",chainId:at,nonce:null===(s=P?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(l=null===(a=P?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==l?l:new Date,expirationTime:null===(c=P?.signInWithEthereum)||void 0===c?void 0:c.expirationTime,notBefore:null===(u=P?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=P?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(h=P?.signInWithEthereum)||void 0===h?void 0:h.resources}),y=yield N.request({method:"personal_sign",params:[Kj(g),Ae]})}try{const{data:_,error:x}=yield he(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},null!==(f=n.options)&&void 0!==f&&f.captchaToken?{gotrue_meta_security:{captcha_token:null===(p=n.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Jn});if(x)throw x;return _&&_.session&&_.user?(_.session&&(yield r._saveSession(_.session),yield r._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:x}):{data:{user:null,session:null},error:new qi}}catch(_){if(Z(_))return{data:{user:null,session:null},error:_};throw _}})()}signInWithSolana(n){var r=this;return m(function*(){var o,i,s,a,l,c,u,d,h,f,p,g;let y,_;if("message"in n)y=n.message,_=n.signature;else{const{wallet:b,statement:P,options:N}=n;let z;if(gn())if("object"==typeof b)z=b;else{const Ae=window;if(!("solana"in Ae)||"object"!=typeof Ae.solana||!("signIn"in Ae.solana&&"function"==typeof Ae.solana.signIn||"signMessage"in Ae.solana&&"function"==typeof Ae.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");z=Ae.solana}else{if("object"!=typeof b||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=b}const Wt=new URL(null!==(o=N?.url)&&void 0!==o?o:window.location.href);if("signIn"in z&&z.signIn){const Ae=yield z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},N?.signInWithSolana),{version:"1",domain:Wt.host,uri:Wt.href}),P?{statement:P}:null));let at;if(Array.isArray(Ae)&&Ae[0]&&"object"==typeof Ae[0])at=Ae[0];else{if(!(Ae&&"object"==typeof Ae&&"signedMessage"in Ae&&"signature"in Ae))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");at=Ae}if(!("signedMessage"in at&&"signature"in at&&("string"==typeof at.signedMessage||at.signedMessage instanceof Uint8Array)&&at.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");y="string"==typeof at.signedMessage?at.signedMessage:(new TextDecoder).decode(at.signedMessage),_=at.signature}else{if(!("signMessage"in z&&"function"==typeof z.signMessage&&"publicKey"in z&&"object"==typeof z&&z.publicKey&&"toBase58"in z.publicKey&&"function"==typeof z.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${Wt.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${Wt.href}`,`Issued At: ${null!==(s=null===(i=N?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=N?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...null!==(l=N?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...null!==(c=N?.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...null!==(u=N?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...null!==(d=N?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...null!==(f=null===(h=N?.signInWithSolana)||void 0===h?void 0:h.resources)&&void 0!==f&&f.length?["Resources",...N.signInWithSolana.resources.map(at=>`- ${at}`)]:[]].join("\n");const Ae=yield z.signMessage((new TextEncoder).encode(y),"utf8");if(!(Ae&&Ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=Ae}}try{const{data:x,error:b}=yield he(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:y,signature:Ro(_)},null!==(p=n.options)&&void 0!==p&&p.captchaToken?{gotrue_meta_security:{captcha_token:null===(g=n.options)||void 0===g?void 0:g.captchaToken}}:null),xform:Jn});if(b)throw b;return x&&x.session&&x.user?(x.session&&(yield r._saveSession(x.session),yield r._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:b}):{data:{user:null,session:null},error:new qi}}catch(x){if(Z(x))return{data:{user:null,session:null},error:x};throw x}})()}_exchangeCodeForSession(n){var r=this;return m(function*(){const o=yield No(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:l}=yield he(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:n,code_verifier:i},xform:Jn});if(yield so(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new qi}}catch(a){if(Z(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(n){var r=this;return m(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:l}=n,c=yield he(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Jn}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new qi}}catch(o){if(Z(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(n){var r=this;return m(function*(){var o,i,s,a,l;try{if("email"in n){const{email:c,options:u}=n;let d=null,h=null;"pkce"===r.flowType&&([d,h]=yield Ki(r.storage,r.storageKey));const{error:f}=yield he(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:c,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in n){const{phone:c,options:u}=n,{data:d,error:h}=yield he(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:c,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(l=u?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new zc("You must provide either an email or phone number.")}catch(c){if(Z(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(n){var r=this;return m(function*(){var o,i;try{let s,a;"options"in n&&(s=null===(o=n.options)||void 0===o?void 0:o.redirectTo,a=null===(i=n.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield he(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Jn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,d=l.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==n.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithSSO(n){var r=this;return m(function*(){var o,i,s;try{let a=null,l=null;return"pkce"===r.flowType&&([a,l]=yield Ki(r.storage,r.storageKey)),yield he(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:null!==(i=null===(o=n.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=n?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:Uj})}catch(a){if(Z(a))return{data:null,error:a};throw a}})()}reauthenticate(){var n=this;return m(function*(){return yield n.initializePromise,yield n._acquireLock(-1,m(function*(){return yield n._reauthenticate()}))})()}_reauthenticate(){var n=this;return m(function*(){try{return yield n._useSession(function(){var r=m(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new io;const{error:a}=yield he(n.fetch,"GET",`${n.url}/reauthenticate`,{headers:n.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(Z(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(n){var r=this;return m(function*(){try{const o=`${r.url}/resend`;if("email"in n){const{email:i,type:s,options:a}=n,{error:l}=yield he(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in n){const{phone:i,type:s,options:a}=n,{data:l,error:c}=yield he(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new zc("You must provide either an email or phone number and a type")}catch(o){if(Z(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var n=this;return m(function*(){return yield n.initializePromise,yield n._acquireLock(-1,m(function*(){return n._useSession(function(){var o=m(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(n,r){var o=this;return m(function*(){o._debug("#_acquireLock","begin",n);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=m(function*(){return yield i,yield r()})();return o.pendingInLock.push(m(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,n,m(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(m(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(n){var r=this;return m(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield n(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var n=this;return m(function*(){n._debug("#__loadSession()","begin"),n.lockAcquired||n._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield No(n.storage,n.storageKey);if(n._debug("#getSession()","session from storage",o),null!==o&&(n._isValidSession(o)?r=o:(n._debug("#getSession()","session from storage is not valid"),yield n._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(n._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(n.userStorage){const l=yield No(n.userStorage,n.storageKey+"-user");r.user=l?.user?l.user:Tp()}if(n.storage.isServer&&r.user){let l=n.suppressGetSessionWarning;r=new Proxy(r,{get:(u,d,h)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,n.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:r},error:null}}const{data:s,error:a}=yield n._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{n._debug("#__loadSession()","end")}})()}getUser(n){var r=this;return m(function*(){return n?yield r._getUser(n):(yield r.initializePromise,yield r._acquireLock(-1,m(function*(){return yield r._getUser()})))})()}_getUser(n){var r=this;return m(function*(){try{return n?yield he(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:n,xform:ao}):yield r._useSession(function(){var o=m(function*(i){var s,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(s=c.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield he(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:ao}):{data:{user:null},error:new io}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Z(o))return function mj(t){return Z(t)&&"AuthSessionMissingError"===t.name}(o)&&(yield r._removeSession(),yield so(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(n){var r=this;return m(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,m(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(n){var r=this;return m(function*(o,i={}){try{return yield r._useSession(function(){var s=m(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new io;const u=l.session;let d=null,h=null;"pkce"===r.flowType&&null!=o.email&&([d,h]=yield Ki(r.storage,r.storageKey));const{data:f,error:p}=yield he(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:ao});if(p)throw p;return u.user=f.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return s.apply(this,arguments)}}())}catch(s){if(Z(s))return{data:{user:null},error:s};throw s}}).apply(this,arguments)}setSession(n){var r=this;return m(function*(){return yield r.initializePromise,yield r._acquireLock(-1,m(function*(){return yield r._setSession(n)}))})()}_setSession(n){var r=this;return m(function*(){try{if(!n.access_token||!n.refresh_token)throw new io;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:l}=Sp(n.access_token);if(l.exp&&(i=l.exp,s=i<=o),s){const{data:c,error:u}=yield r._callRefreshToken(n.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield r._getUser(n.access_token);if(u)throw u;a={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(o){if(Z(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(n){var r=this;return m(function*(){return yield r.initializePromise,yield r._acquireLock(-1,m(function*(){return yield r._refreshSession(n)}))})()}_refreshSession(n){var r=this;return m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s;if(!n){const{data:c,error:u}=i;if(u)throw u;n=null!==(s=c.session)&&void 0!==s?s:void 0}if(!n?.refresh_token)throw new io;const{data:a,error:l}=yield r._callRefreshToken(n.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Z(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(n,r){var o=this;return m(function*(){try{if(!gn())throw new Gc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Gc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new wD("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new Gc("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new wD("No code detected.");const{data:P,error:N}=yield o._exchangeCodeForSession(n.code);if(N)throw N;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:d}=n;if(!(a&&c&&l&&d))throw new Gc("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let p=h+f;u&&(p=parseInt(u));const g=p-h;1e3*g<=Gi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const y=p-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,h);const{data:_,error:x}=yield o._getUser(a);if(x)throw x;const b={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:d,user:_.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:n.type},error:null}}catch(i){if(Z(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(n){return Boolean(n.access_token||n.error_description)}_isPKCECallback(n){var r=this;return m(function*(){const o=yield No(r.storage,`${r.storageKey}-code-verifier`);return!(!n.code||!o)})()}signOut(){var n=this;return m(function*(r={scope:"global"}){return yield n.initializePromise,yield n._acquireLock(-1,m(function*(){return yield n._signOut(r)}))}).apply(this,arguments)}_signOut(){var n=this;return m(function*({scope:r}={scope:"global"}){return yield n._useSession(function(){var o=m(function*(i){var s;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(s=a.session)||void 0===s?void 0:s.access_token;if(c){const{error:u}=yield n.admin.signOut(c,r);if(u&&(!function gj(t){return Z(t)&&"AuthApiError"===t.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==r&&(yield n._removeSession(),yield so(n.storage,`${n.storageKey}-code-verifier`)),{error:null}});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(n){var r=this;const o=function Dj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}(),i={id:o,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),m(function*(){yield r.initializePromise,yield r._acquireLock(-1,m(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(n){var r=this;return m(function*(){return yield r._useSession(function(){var o=m(function*(i){var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(s=r.stateChangeEmitters.get(n))||void 0===s?void 0:s.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",n,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(n))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",n,"error",l),console.error(l)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(n){var r=this;return m(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield Ki(r.storage,r.storageKey,!0));try{return yield he(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(l){if(Z(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var n=this;return m(function*(){var r;try{const{data:o,error:i}=yield n.getUser();if(i)throw i;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(Z(o))return{data:null,error:o};throw o}})()}linkIdentity(n){var r=this;return m(function*(){return"token"in n?r.linkIdentityIdToken(n):r.linkIdentityOAuth(n)})()}linkIdentityOAuth(n){var r=this;return m(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=m(function*(l){var c,u,d,h,f;const{data:p,error:g}=l;if(g)throw g;const y=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,n.provider,{redirectTo:null===(c=n.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=n.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=n.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield he(r.fetch,"GET",y,{headers:r.headers,jwt:null!==(f=null===(h=p.session)||void 0===h?void 0:h.access_token)&&void 0!==f?f:void 0})});return function(l){return a.apply(this,arguments)}}());if(s)throw s;return gn()&&!(null!==(o=n.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(Z(i))return{data:{provider:n.provider,url:null},error:i};throw i}})()}linkIdentityIdToken(n){var r=this;return m(function*(){return yield r._useSession(function(){var o=m(function*(i){var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:u,token:d,access_token:h,nonce:f}=n,p=yield he(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=l?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Jn}),{data:g,error:y}=p;return y?{data:{user:null,session:null},error:y}:g&&g.session&&g.user?(g.session&&(yield r._saveSession(g.session),yield r._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:y}):{data:{user:null,session:null},error:new qi}}catch(a){if(Z(a))return{data:{user:null,session:null},error:a};throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(n){var r=this;return m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s,a;const{data:l,error:c}=i;if(c)throw c;return yield he(r.fetch,"DELETE",`${r.url}/user/identities/${n.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=l.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Z(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(n){var r=this;return m(function*(){const o=`#_refreshAccessToken(${n.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function Ij(t,e){return new Promise((r,o)=>{m(function*(){for(let i=0;i<1/0;i++)try{const s=yield t(i);if(!e(i,null,s))return void r(s)}catch(s){if(!e(i,s))return void o(s)}})()})}(function(){var s=m(function*(a){return a>0&&(yield function Mj(t){return Mp.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield he(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:r.headers,xform:Jn})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const l=200*Math.pow(2,s);return a&&Dp(a)&&Date.now()+l-i<Gi})}catch(i){if(r._debug(o,"error",i),Z(i))return{data:{session:null,user:null},error:i};throw i}finally{r._debug(o,"end")}})()}_isValidSession(n){return"object"==typeof n&&null!==n&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}_handleProviderSignIn(n,r){var o=this;return m(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),gn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}})()}_recoverAndRefresh(){var n=this;return m(function*(){var r,o;const i="#_recoverAndRefresh()";n._debug(i,"begin");try{const s=yield No(n.storage,n.storageKey);if(s&&n.userStorage){let l=yield No(n.userStorage,n.storageKey+"-user");!n.storage.isServer&&Object.is(n.storage,n.userStorage)&&!l&&(l={user:s.user},yield Ji(n.userStorage,n.storageKey+"-user",l)),s.user=null!==(r=l?.user)&&void 0!==r?r:Tp()}else if(s&&!s.user&&!s.user){const l=yield No(n.storage,n.storageKey+"-user");l&&l?.user?(s.user=l.user,yield so(n.storage,n.storageKey+"-user"),yield Ji(n.storage,n.storageKey,s)):s.user=Tp()}if(n._debug(i,"session from storage",s),!n._isValidSession(s))return n._debug(i,"session is not valid"),void(null!==s&&(yield n._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(n._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(n.autoRefreshToken&&s.refresh_token){const{error:l}=yield n._callRefreshToken(s.refresh_token);l&&(console.error(l),Dp(l)||(n._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield n._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield n._getUser(s.access_token);!c&&l?.user?(s.user=l.user,yield n._saveSession(s),yield n._notifyAllSubscribers("SIGNED_IN",s)):n._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),n._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield n._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return n._debug(i,"error",s),void console.error(s)}finally{n._debug(i,"end")}})()}_callRefreshToken(n){var r=this;return m(function*(){var o,i;if(!n)throw new io;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${n.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new Jc;const{data:a,error:l}=yield r._refreshAccessToken(n);if(l)throw l;if(!a.session)throw new io;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return r.refreshingDeferred.resolve(c),c}catch(a){if(r._debug(s,"error",a),Z(a)){const l={data:null,error:a};return Dp(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(n,r){var o=this;return m(function*(i,s,a=!0){const l=`#_notifyAllSubscribers(${i})`;o._debug(l,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const c=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=m(function*(h){try{yield h.callback(i,s)}catch(f){c.push(f)}});return function(h){return d.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(n){var r=this;return m(function*(){r._debug("#_saveSession()",n),r.suppressGetSessionWarning=!0;const o=Object.assign({},n);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield Ji(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=TD(s);yield Ji(r.storage,r.storageKey,a)}else{const s=TD(o);yield Ji(r.storage,r.storageKey,s)}})()}_removeSession(){var n=this;return m(function*(){n._debug("#_removeSession()"),yield so(n.storage,n.storageKey),yield so(n.storage,n.storageKey+"-code-verifier"),yield so(n.storage,n.storageKey+"-user"),n.userStorage&&(yield so(n.userStorage,n.storageKey+"-user")),yield n._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&gn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var n=this;return m(function*(){yield n._stopAutoRefresh(),n._debug("#_startAutoRefresh()");const r=setInterval(()=>n._autoRefreshTokenTick(),Gi);n.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(m(function*(){yield n.initializePromise,yield n._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var n=this;return m(function*(){n._debug("#_stopAutoRefresh()");const r=n.autoRefreshTicker;n.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var n=this;return m(function*(){n._removeVisibilityChangedCallback(),yield n._startAutoRefresh()})()}stopAutoRefresh(){var n=this;return m(function*(){n._removeVisibilityChangedCallback(),yield n._stopAutoRefresh()})()}_autoRefreshTokenTick(){var n=this;return m(function*(){n._debug("#_autoRefreshTokenTick()","begin");try{yield n._acquireLock(0,m(function*(){try{const r=Date.now();try{return yield n._useSession(function(){var o=m(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void n._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/Gi);n._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield n._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{n._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof ND))throw r;n._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var n=this;return m(function*(){if(n._debug("#_handleVisibilityChange()"),!gn()||!window?.addEventListener)return n.autoRefreshToken&&n.startAutoRefresh(),!1;try{n.visibilityChangedCallback=m(function*(){return yield n._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",n.visibilityChangedCallback),yield n._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(n){var r=this;return m(function*(){const o=`#_onVisibilityChanged(${n})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),n||(yield r.initializePromise,yield r._acquireLock(-1,m(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(n,r,o){var i=this;return m(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,l]=yield Ki(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${s.join("&")}`})()}_unenroll(n){var r=this;return m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s;const{data:a,error:l}=i;return l?{data:null,error:l}:yield he(r.fetch,"DELETE",`${r.url}/factors/${n.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Z(o))return{data:null,error:o};throw o}})()}_enroll(n){var r=this;return m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},"phone"===n.factorType?{phone:n.phone}:"totp"===n.factorType?{issuer:n.issuer}:{}),{data:d,error:h}=yield he(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=l?.session)||void 0===s?void 0:s.access_token});return h?{data:null,error:h}:("totp"===n.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Z(o))return{data:null,error:o};throw o}})()}_verify(n){var r=this;return m(function*(){return r._acquireLock(-1,m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:"create"===n.webauthn.type?rV(n.webauthn.credential_response):oV(n.webauthn.credential_response)})}:{code:n.code}),{data:u,error:d}=yield he(r.fetch,"POST",`${r.url}/factors/${n.factorId}/verify`,{body:c,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?{data:null,error:d}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Z(o))return{data:null,error:o};throw o}}))})()}_challenge(n){var r=this;return m(function*(){return r._acquireLock(-1,m(function*(){try{return yield r._useSession(function(){var o=m(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=yield he(r.fetch,"POST",`${r.url}/factors/${n.factorId}/challenge`,{body:n,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:tV(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:nV(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(Z(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(n){var r=this;return m(function*(){const{data:o,error:i}=yield r._challenge({factorId:n.factorId});return i?{data:null,error:i}:yield r._verify({factorId:n.factorId,challengeId:o.id,code:n.code})})()}_listFactors(){var n=this;return m(function*(){var r;const{data:{user:o},error:i}=yield n.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var n=this;return m(function*(){return n._acquireLock(-1,m(function*(){return yield n._useSession(function(){var r=m(function*(o){var i,s;const{data:{session:a},error:l}=o;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Sp(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;return(null!==(s=null===(i=a.user.factors)||void 0===i?void 0:i.filter(p=>"verified"===p.status))&&void 0!==s?s:[]).length>0&&(d="aal2"),{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:c.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(n){var r=this;return m(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:l,error:c}=yield he(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=a,s=l.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(n){var r=this;return m(function*(o,i={}){try{let s=o;if(!s){const{data:y,error:_}=yield r.getSession();if(_||!y.session)return{data:null,error:_};s=y.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:d}}=Sp(s);i?.allowExpired||function kj(t){if(!t)throw new Error("Missing exp claim");if(t<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const h=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!h){const{error:y}=yield r.getUser(s);if(y)throw y;return{data:{claims:l,header:a,signature:c},error:null}}const f=function Nj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),p=yield crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!(yield crypto.subtle.verify(f,p,c,function bj(t){const e=[];return function ID(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(t.charCodeAt(n+1)-56320&65535|o),n+=1}vj(r,e)}}(t,n=>e.push(n)),new Uint8Array(e)}(`${u}.${d}`))))throw new Ep("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}}).apply(this,arguments)}}return t.nextInstanceID=0,t})();class gV extends pV{constructor(e){super(e)}}class mV{constructor(e,n,r){var o,i,s;this.supabaseUrl=e,this.supabaseKey=n;const a=function lj(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function sj(t){return t.endsWith("/")?t:t+"/"}(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function aj(t,e){var n,r;const{db:o,auth:i,realtime:s,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(n=d?.headers)&&void 0!==n?n:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(f=m(function*(){return""}),function(){return f.apply(this,arguments)})};var f;return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}(r??{},{db:ej,realtime:nj,auth:Object.assign(Object.assign({},tj),{storageKey:l}),global:X2});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=ij(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new lD(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Q2(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new o2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e=this;return m(function*(){var n,r;if(e.accessToken)return yield e.accessToken();const{data:o}=yield e.auth.getSession();return null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:e.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c},u,d){return new gV({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>"authorization"===f.toLowerCase())})}_initRealtimeClient(e){return new I2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==n&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function _V(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(null==t)return!1;const e=t.match(/^v(\d+)\./);return!!e&&parseInt(e[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $D_supabase_url="https://hpqwzclyjrfivcmkzwpo.supabase.co",$D_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwcXd6Y2x5anJmaXZjbWt6d3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2ODMzMjUsImV4cCI6MjA3NjI1OTMyNX0.pN-NPncmQCJoiBlYnFk77bAdxXEu5NAn3Fi8bk_c4wI";let Xi=(()=>{const e=class{constructor(){this.currentUserSubject=new An(null),this.currentUser$=this.currentUserSubject.asObservable(),this.isInitialized=!1,this.initializeClient()}initializeClient(){var r=this;return m(function*(){try{r.supabase=((t,e,n)=>new mV(t,e,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))($D_supabase_url,$D_supabase_anonKey),r.isInitialized=!0,yield r.checkExistingSession()}catch(o){console.error("Error initializing Supabase client:",o)}})()}checkExistingSession(){var r=this;return m(function*(){const o=localStorage.getItem("currentUser");if(o)try{const i=JSON.parse(o);r.currentUserSubject.next(i)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("currentUser")}})()}signInFallback(r,o){var i=this;return m(function*(){try{const a=[{id:"1",username:"test",password:"test",role:"user",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",created_at:(new Date).toISOString()}].find(l=>l.username===r&&l.password===o);return a?(localStorage.setItem("currentUser",JSON.stringify(a)),i.currentUserSubject.next(a),{user:a,error:null}):{user:null,error:"Invalid username or password"}}catch(s){return console.error("Fallback sign in error:",s),{user:null,error:"Sign in failed. Please try again."}}})()}signIn(r,o){var i=this;return m(function*(){try{i.isInitialized||(yield new Promise(l=>{const c=()=>{i.isInitialized?l(void 0):setTimeout(c,50)};c()})),yield new Promise(l=>setTimeout(l,100));const{data:s,error:a}=yield i.supabase.from("profiles").select("*").eq("username",r).eq("password",o).single();return a?(console.error("Database query error:",a),console.log("Trying fallback authentication..."),yield i.signInFallback(r,o)):s?(localStorage.setItem("currentUser",JSON.stringify(s)),i.currentUserSubject.next(s),{user:s,error:null}):{user:null,error:"User not found"}}catch(s){if(console.error("Sign in error:",s),s&&"object"==typeof s&&"message"in s){const a=s.message;if(a.includes("NavigatorLockAcquireTimeoutError")||a.includes("lock"))return console.log("Lock error detected, using fallback authentication..."),yield i.signInFallback(r,o)}return console.log("Error occurred, trying fallback authentication..."),yield i.signInFallback(r,o)}})()}signOut(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getCurrentUser(){return this.currentUserSubject.value}isSignedIn(){return null!==this.currentUserSubject.value}getProfileByUsername(r){var o=this;return m(function*(){try{o.isInitialized||(yield new Promise(a=>{const l=()=>{o.isInitialized?a():setTimeout(l,50)};l()}));const{data:i,error:s}=yield o.supabase.from("profiles").select("*").eq("username",r).maybeSingle();return s?(console.warn("getProfileByUsername fallback due to error:",s.message),[{id:"1",username:"test",password:"test",role:"user",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",created_at:(new Date).toISOString()}].find(l=>l.username===r)||null):i||null}catch(i){return console.error("Error in getProfileByUsername:",i),null}})()}getUserCards(r,o){var i=this;return m(function*(){try{const s=parseInt(r);if(isNaN(s))return{cards:[],error:"Invalid user ID format"};const a=1e3;let l=0,c=[],u=!0;for(;u;){const{data:d,error:h}=yield i.supabase.from("user_cards").select("*").eq("user_id",s).range(l,l+a-1);if(h)return{cards:[],error:h.message};d&&d.length>0?(c=c.concat(d),l+=a,u=d.length===a,o&&o(c.length)):u=!1}return{cards:c,error:null}}catch(s){return console.error("Error fetching user cards:",s),{cards:[],error:"Failed to fetch user cards"}}})()}updateCardQuantity(r,o,i){var s=this;return m(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};if(i<=0){const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a).eq("card_def_key",o);if(l)return{success:!1,error:l.message}}else{const{data:l,error:c}=yield s.supabase.from("user_cards").select("*").eq("user_id",a).eq("card_def_key",o).maybeSingle();if(c)return console.error("Error checking existing card:",c),{success:!1,error:c.message};if(l){const{error:u}=yield s.supabase.from("user_cards").update({quantity:i}).eq("user_id",a).eq("card_def_key",o);if(u)return{success:!1,error:u.message}}else{const{error:u}=yield s.supabase.from("user_cards").insert({user_id:a,card_def_key:o,quantity:i});if(u)return{success:!1,error:u.message}}}return{success:!0,error:null}}catch(a){return console.error("Error updating card quantity:",a),{success:!1,error:"Failed to update card quantity"}}})()}getCardQuantity(r,o){var i=this;return m(function*(){try{const{data:s,error:a}=yield i.supabase.from("user_cards").select("quantity").eq("user_id",r).eq("card_def_key",o).single();return a||!s?0:s.quantity||0}catch(s){return console.error("Error fetching card quantity:",s),0}})()}syncUserCollection(r,o){var i=this;return m(function*(){try{const{cards:s,error:a}=yield i.getUserCards(r,o);if(a)return console.error("Error syncing user collection:",a),{};const l={};return s.forEach(c=>{l[c.card_def_key]=c.quantity}),l}catch(s){return console.error("Error syncing user collection:",s),{}}})()}bulkReplaceUserCollection(r,o){var i=this;return m(function*(){try{const s=parseInt(r);if(isNaN(s))return{success:!1,error:"Invalid user ID format"};const{error:a}=yield i.supabase.from("user_cards").delete().eq("user_id",s);if(a)return console.error("Error deleting existing cards:",a),{success:!1,error:a.message};const l=Object.entries(o).filter(([c,u])=>u>0).map(([c,u])=>({user_id:s,card_def_key:c,quantity:u}));if(l.length>0){const{error:c}=yield i.supabase.from("user_cards").insert(l);if(c)return console.error("Error inserting new cards:",c),{success:!1,error:c.message};console.log(`\u2705 Bulk sync completed: ${l.length} cards inserted`)}else console.log("\u2705 Bulk sync completed: No cards to insert (collection is empty)");return{success:!0,error:null}}catch(s){return console.error("Error in bulk replace user collection:",s),{success:!1,error:"Failed to bulk replace user collection"}}})()}};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"}),t})(),BD=(()=>{const e=class{constructor(){this.rarityMap=new Map([["C",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["U",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["R",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["RR",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["AR",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["SR",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["SAR",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["IM",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["UR",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["CR",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["S",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["SSR",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}],["Common",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["Uncommon",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["Rare",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["Double Rare",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["Art Rare",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["Super Rare",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Special Art Rare",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Immersive Rare",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["Ultimate Rare",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["Crown Rare",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["Shiny",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["Shiny Super Rare",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}]])}getRarityInfo(r){return this.rarityMap.get(r)}getDisplayName(r){const o=this.getRarityInfo(r);return o?o.displayName:r}getSymbol(r){const o=this.getRarityInfo(r);return o?o.symbol:r}getAllRarities(){return Array.from(this.rarityMap.values()).filter(r=>!r.code.includes(" ")).sort((r,o)=>r.order-o.order)}getRarityOrder(r){const o=this.getRarityInfo(r);return o?o.order:999}sortRarities(r){return r.sort((o,i)=>this.getRarityOrder(o)-this.getRarityOrder(i))}isRare(r){return["IM","UR","SSR"].includes(r)}isSuperRare(r){return["SR","SAR","IM","UR","SSR"].includes(r)}getNormalizedCode(r){const o=this.getRarityInfo(r);return o?"SAR"===o.code||"Special Art Rare"===r?"SR":o.code:r}getStandardizedDisplayName(r){const o=this.getNormalizedCode(r),i=this.getRarityInfo(o);return i?i.displayName:r}getUnifiedRarities(){return this.getAllRarities().filter(o=>"SAR"!==o.code)}groupCardsByNormalizedRarity(r){const o=new Map;return r.forEach(i=>{if(!i.rarityCode)return;const s=this.getNormalizedCode(i.rarityCode);o.has(s)||o.set(s,[]),o.get(s).push(i)}),o}};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function vV(t,e){if(1&t&&(D(0,"div",4),M(1),C()),2&t){const n=se();L(1),Qe(" ",n.error," ")}}function CV(t,e){1&t&&(D(0,"div",5)(1,"h2"),M(2,"Loading your collection..."),C(),jn(3,"div",6),C())}function bV(t,e){1&t&&(D(0,"span",29),M(1,"\u{1f3c6} TOP PICK"),C())}function wV(t,e){if(1&t&&(D(0,"span",30),M(1),C()),2&t){const n=se(2).$implicit;L(1),hr("[",n.primarySetCode,"] - ",n.primarySetName,"")}}function DV(t,e){if(1&t&&(D(0,"div",20)(1,"div",21)(2,"span",22),M(3),C(),Ce(4,bV,2,0,"span",23),D(5,"strong"),M(6),C(),Ce(7,wV,2,2,"span",24),C(),D(8,"div",25)(9,"span",26),M(10),C(),D(11,"span",27),M(12),C(),D(13,"span",28),M(14),C()()()),2&t){const n=se(),r=n.index,o=n.$implicit;Ar("top-pick",0===r),L(3),Qe("#",r+1,""),L(1),q("ngIf",0===r),L(2),$n(o.packName),L(1),q("ngIf",o.primarySetCode),L(3),Qe("",o.missingCards," missing cards"),L(2),Qe("",o.completionPercentage,"% complete"),L(2),hr("(",o.ownedCards,"/",o.totalCards,")")}}function EV(t,e){if(1&t&&(_o(0),Ce(1,DV,15,10,"div",19),vo()),2&t){const n=e.$implicit,r=se(3);L(1),q("ngIf",!r.excludeDeluxePack||!r.isDeluxeA4B(n.packName))}}function SV(t,e){if(1&t&&(D(0,"div",14)(1,"details",15)(2,"summary"),M(3,"\u{1f381} Pack Opening Suggestions"),C(),D(4,"p",16),M(5,"Optimized recommendations based on your missing cards"),C(),D(6,"div",17),Ce(7,EV,2,1,"ng-container",18),C()()()),2&t){const n=se(2);L(7),q("ngForOf",n.packSuggestions)}}function MV(t,e){if(1&t&&(D(0,"div",44)(1,"span",45),M(2),C(),D(3,"div",46)(4,"div",47),jn(5,"div",48),C(),D(6,"span",49),M(7),C()()()),2&t){const n=e.$implicit;q("ngClass","rarity-"+n.code),dn("title",n.name+": "+n.owned+"/"+n.total+" ("+n.percentage+"%)"),L(2),$n(n.name),L(3),ks("width",n.percentage,"%"),L(2),hr("",n.owned,"/",n.total,"")}}function IV(t,e){if(1&t&&(D(0,"div",41)(1,"h5"),M(2,"Rarity Progress:"),C(),D(3,"div",42),Ce(4,MV,8,7,"div",43),C()()),2&t){const n=se(2).$implicit;L(4),q("ngForOf",n.rarityBreakdown)}}function xV(t,e){if(1&t&&(D(0,"div",34)(1,"div",35)(2,"h4"),M(3),C(),D(4,"span",36),M(5),C()(),D(6,"div",37),jn(7,"div",38),C(),D(8,"p",39),M(9),C(),Ce(10,IV,5,1,"div",40),C()),2&t){const n=se().$implicit;L(3),hr("[",n.code,"] - ",n.name,""),L(2),Qe("",n.percentage,"%"),L(2),ks("width",n.percentage,"%"),L(2),hr("",n.owned,"/",n.total," cards"),L(1),q("ngIf",n.rarityBreakdown&&n.rarityBreakdown.length>0)}}function AV(t,e){if(1&t&&(_o(0),Ce(1,xV,11,8,"div",33),vo()),2&t){const n=e.$implicit;L(1),q("ngIf",n.total>0)}}function TV(t,e){if(1&t&&(D(0,"div",31)(1,"details")(2,"summary"),M(3,"\u{1f4e6} Set Completion Progress"),C(),D(4,"div",32),Ce(5,AV,2,1,"ng-container",18),C()()()),2&t){const n=se(2);L(5),q("ngForOf",n.setProgress)}}function OV(t,e){if(1&t&&(D(0,"div",53)(1,"div",54)(2,"h4"),M(3),C(),D(4,"span",55),M(5),C()(),D(6,"div",56)(7,"div",57),jn(8,"div",58),C(),D(9,"span",59),M(10),C()()()),2&t){const n=se().$implicit;q("ngClass","rarity-"+n.code),dn("title",n.name+": "+n.owned+"/"+n.total+" ("+n.percentage+"%)"),L(3),$n(n.name),L(2),hr("",n.owned,"/",n.total,""),L(3),ks("width",n.percentage,"%"),L(2),Qe("",n.percentage,"%")}}function PV(t,e){if(1&t&&(_o(0),Ce(1,OV,11,8,"div",52),vo()),2&t){const n=e.$implicit;L(1),q("ngIf",n.total>0)}}function RV(t,e){if(1&t&&(D(0,"div",50)(1,"details")(2,"summary"),M(3,"\u2b50 Collection by Rarity"),C(),D(4,"div",51),Ce(5,PV,2,1,"ng-container",18),C()()()),2&t){const n=se(2);L(5),q("ngForOf",n.userRarityStats)}}function kV(t,e){if(1&t){const n=cr();D(0,"div",7)(1,"div",8)(2,"label",9)(3,"input",10),re("ngModelChange",function(o){return It(n),xt(se().excludeDeluxePack=o)})("ngModelChange",function(){return It(n),xt(se().excludeModelChange())}),C(),M(4," Exclude A4B - DELUXE PACK "),C()(),Ce(5,SV,8,1,"div",11),Ce(6,TV,6,1,"div",12),Ce(7,RV,6,1,"div",13),C()}if(2&t){const n=se();L(3),q("ngModel",n.excludeDeluxePack),L(2),q("ngIf",n.packSuggestions.length>0),L(1),q("ngIf",n.setProgress.length>0),L(1),q("ngIf",n.userRarityStats.length>0)}}let NV=(()=>{const e=class{constructor(r,o,i,s){this.dataManager=r,this.supabaseService=o,this.router=i,this.rarityService=s,this.title="Pokemon TCG Pocket Collector",this.cards=[],this.sets=[],this.rarityStats=[],this.packStats=[],this.loading=!1,this.error=null,this.dataLoaded=!1,this.userCollectionLoaded=!1,this.userCards=[],this.userStats={totalOwned:0,uniqueCards:0,completionPercentage:0,rareCards:0,recentSetsOwned:0,missingCommons:0,missingRares:0},this.setProgress=[],this.userRarityStats=[],this.recentCards=[],this.nearestCompleteSet=null,this.packSuggestions=[],this.excludeDeluxePack=!0}ngOnInit(){this.supabaseService.isSignedIn()?this.loadAllData():this.router.navigate(["/signin"])}loadCards(){this.loading=!0,this.error=null,this.dataManager.initializeCardData().subscribe({next:r=>{this.cards=r,this.loading=!1},error:r=>{this.error="Failed to load cards data",this.loading=!1,console.error("Error loading cards:",r)}})}loadAllData(){this.loading=!0,this.error=null,this.dataManager.loadAllPokemonData().subscribe({next:r=>{this.cards=r.cards,this.sets=r.sets,this.dataLoaded=!0,this.loading=!1,this.loadStats(),this.loadUserCollection()},error:r=>{this.error="Failed to load Pokemon data",this.loading=!1,console.error("Error loading data:",r)}})}loadStats(){this.dataManager.getRarityStats().subscribe({next:r=>{this.rarityStats=r},error:r=>console.error("Error loading rarity stats:",r)}),this.dataManager.getPackStats().subscribe({next:r=>{this.packStats=r.slice(0,10)},error:r=>console.error("Error loading pack stats:",r)})}downloadCardsFile(){this.dataManager.downloadCardsFile()}getStorageInstructions(){const r=this.dataManager.getStorageInstructions();alert(r)}showComprehensiveStats(){this.dataManager.getComprehensiveStats().subscribe({next:r=>{alert(`Comprehensive Statistics loaded!\n\nSummary:\n- ${r.totalCards} total cards\n- ${r.totalSets} sets\n- ${r.totalRarities} rarity types\n- Date range: ${r.dateRange.earliest} to ${r.dateRange.latest}`)},error:r=>{console.error("Error loading comprehensive stats:",r),alert("Failed to load comprehensive statistics")}})}loadUserCollection(){var r=this;return m(function*(){const o=yield r.supabaseService.getCurrentUser();if(o)try{const i=yield r.supabaseService.syncUserCollection(o.id);r.userCards=Object.entries(i).map(([s,a])=>({card_def_key:s,quantity:a})),r.userCollectionLoaded=!0,r.calculateSetProgress(),r.calculateUserRarityStats(),r.calculatePackSuggestions()}catch(i){console.error("Error loading user collection:",i)}})()}excludeModelChange(){this.calculateSetProgress(),this.calculateUserRarityStats(),this.calculatePackSuggestions()}getCardId(r){return`${r.set}-${r.number}`}calculateSetProgress(){if(!this.userCards||!this.sets.length||!this.cards.length)return;const r=new Map;this.userCards.forEach(o=>{r.set(o.card_def_key,!0)}),this.setProgress=this.sets.map(o=>{const i=this.cards.filter(u=>u.set===o.code),s=this.excludeDeluxePack?i.filter(u=>!(u.packs&&u.packs.some(d=>this.isDeluxeA4B(d)))):i,a=s.filter(u=>r.has(this.getCardId(u))),l=s.length>0?Math.round(a.length/s.length*100):0,c=this.calculateSetRarityBreakdown(s,r);return{name:o.label?.en||o.code,code:o.code,owned:a.length,total:s.length,percentage:l,rarityBreakdown:c}}).sort((o,i)=>o.code.localeCompare(i.code)),this.nearestCompleteSet=this.setProgress.find(o=>o.percentage<100)||this.setProgress[0]}calculateSetRarityBreakdown(r,o){const i=this.rarityService.groupCardsByNormalizedRarity(r),s=[];return i.forEach((a,l)=>{const c=a.filter(h=>o.has(this.getCardId(h))),u=a.length>0?Math.round(c.length/a.length*100):0,d=this.rarityService.getStandardizedDisplayName(l);s.push({name:d,code:l,owned:c.length,total:a.length,percentage:u})}),s.sort((a,l)=>this.rarityService.getRarityOrder(a.code)-this.rarityService.getRarityOrder(l.code))}calculateUserRarityStats(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(l=>{r.set(l.card_def_key,!0)});const o=this.excludeDeluxePack?this.cards.filter(l=>!(l.packs&&l.packs.some(c=>this.isDeluxeA4B(c)))):this.cards,i=this.rarityService.groupCardsByNormalizedRarity(o),s=[];i.forEach((l,c)=>{const u=l.filter(f=>r.has(this.getCardId(f))),d=l.length>0?Math.round(u.length/l.length*100):0,h=this.rarityService.getStandardizedDisplayName(c);s.push({name:h,code:c,owned:u.length,total:l.length,percentage:d})});const a=new Map;s.forEach(l=>{const c=a.get(l.code);c?(c.owned+=l.owned,c.total+=l.total):a.set(l.code,{name:l.name,code:l.code,owned:l.owned,total:l.total})}),this.userRarityStats=Array.from(a.values()).map(l=>({name:l.name,code:l.code,owned:l.owned,total:l.total,percentage:l.total>0?Math.round(l.owned/l.total*100):0})),this.userRarityStats.sort((l,c)=>this.rarityService.getRarityOrder(l.code)-this.rarityService.getRarityOrder(c.code))}loadRecentCards(){!this.userCards||!this.cards.length||(this.recentCards=this.userCards.slice(0,6).map(r=>({...this.cards.find(i=>this.getCardId(i)===r.card_def_key),quantity:r.quantity})).filter(r=>r))}calculatePackSuggestions(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(s=>{r.set(s.card_def_key,!0)});const o=new Set;this.cards.forEach(s=>{s.packs&&s.packs.length>0&&s.packs.forEach(a=>{this.excludeDeluxePack&&this.isDeluxeA4B(a)||o.add(a)})});const i=Array.from(o).map(s=>{const a=this.cards.filter(g=>g.packs&&g.packs.includes(s)),l=new Map;a.forEach(g=>{g.set&&l.set(g.set,(l.get(g.set)||0)+1)});let c=null,u=0;l.forEach((g,y)=>{g>u&&(u=g,c=y)});let d="";if(c){const g=this.sets.find(y=>y.code===c);d=g?.label?.en||g?.label?.eng||g?.code||c}const h=a.filter(g=>!r.has(this.getCardId(g))),f=new Map;h.forEach(g=>{const _=this.rarityService.getNormalizedCode(g.rarityCode||"Unknown"),x=f.get(_)||0;f.set(_,x+1)});let p=0;return f.forEach((g,y)=>{const _=this.rarityService.getRarityOrder(y),x=Math.max(1,10-_);p+=g*x}),{packName:s,primarySetCode:c,primarySetName:d,totalCards:a.length,missingCards:h.length,ownedCards:a.length-h.length,completionPercentage:a.length>0?Math.round((a.length-h.length)/a.length*100):100,rarityBreakdown:Array.from(f.entries()).map(([g,y])=>({code:g,count:y,displayName:this.rarityService.getDisplayName(g),symbol:this.rarityService.getSymbol(g)})).sort((g,y)=>this.rarityService.getRarityOrder(g.code)-this.rarityService.getRarityOrder(y.code)),score:p,missingCardsList:h.slice(0,5)}});this.packSuggestions=i.filter(s=>s.missingCards>0).sort((s,a)=>a.score-s.score).slice(0,5)}isDeluxeA4B(r){return!!r&&r.toUpperCase().replace(/[\u2012\u2013\u2014\u2015\-]/g,"-").replace(/\s+/g," ").trim().includes("DELUXE")}exportCollection(){if(!this.userCollectionLoaded)return void alert("Collection not loaded yet. Please wait...");const r=this.generateCollectionCSV(),o=new Blob(["\ufeff"+r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),s=URL.createObjectURL(o);i.setAttribute("href",s),i.setAttribute("download","pokemon_collection.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}generateCollectionCSV(){const o=[["Card Name","Set","Number","Rarity","Quantity"].join(",")];return this.userCards.forEach(i=>{const s=this.cards.find(a=>this.getCardId(a)===i.card_def_key);if(s){const a=[`"${s.label?.eng||s.name||""}"`,`"${s.set||""}"`,`"${s.number||""}"`,`"${s.rarity||""}"`,i.quantity.toString()];o.push(a.join(","))}}),o.join("\n")}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}};let t=e;return e.\u0275fac=function(o){return new(o||e)(T(oD),T(Xi),T(Ct),T(BD))},e.\u0275cmp=Br({type:e,selectors:[["app-dashboard"]],decls:4,vars:3,consts:[[1,"container"],["class","error",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"error"],[1,"loading-state"],[1,"loading-spinner"],[1,"dashboard-content"],[1,"suggestion-controls",2,"margin","8px 0 16px","display","flex","justify-content","flex-end","align-items","center","gap","12px"],[2,"display","inline-flex","align-items","center","gap","8px","cursor","pointer"],["type","checkbox",3,"ngModel","ngModelChange"],["class","pack-suggestions",4,"ngIf"],["class","set-progress",4,"ngIf"],["class","rarity-breakdown",4,"ngIf"],[1,"pack-suggestions"],["open",""],[1,"suggestion-subtitle"],[1,"suggestions-list"],[4,"ngFor","ngForOf"],["class","suggestion-item",3,"top-pick",4,"ngIf"],[1,"suggestion-item"],[1,"suggestion-header"],[1,"rank-number"],["class","top-pick-badge",4,"ngIf"],["class","pack-set",4,"ngIf"],[1,"suggestion-summary"],[1,"missing-count"],[1,"completion-rate"],[1,"progress-count"],[1,"top-pick-badge"],[1,"pack-set"],[1,"set-progress"],[1,"progress-list"],["class","progress-item",4,"ngIf"],[1,"progress-item"],[1,"progress-header"],[1,"progress-percentage"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-details"],["class","set-rarity-breakdown",4,"ngIf"],[1,"set-rarity-breakdown"],[1,"set-rarity-grid"],["class","set-rarity-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"set-rarity-item",3,"ngClass"],[1,"rarity-name"],[1,"rarity-mini-progress"],[1,"rarity-mini-bar"],[1,"rarity-mini-fill"],[1,"rarity-mini-text"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-card",3,"ngClass",4,"ngIf"],[1,"rarity-card",3,"ngClass"],[1,"rarity-header"],[1,"rarity-count"],[1,"rarity-progress"],[1,"rarity-bar"],[1,"rarity-fill"],[1,"percentage"]],template:function(o,i){1&o&&(D(0,"div",0),Ce(1,vV,2,1,"div",1),Ce(2,CV,4,0,"div",2),Ce(3,kV,8,4,"div",3),C()),2&o&&(L(1),q("ngIf",i.error),L(1),q("ngIf",i.loading),L(1),q("ngIf",!i.loading))},dependencies:[HC,jh,Mi,sf,Xs,Oi],styles:['.container[_ngcontent-%COMP%]{position:relative;max-width:1280px;margin:30px auto 0;min-height:100vh;color:var(--text);background:transparent;overflow:visible;border-radius:0;box-shadow:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{color:var(--text);margin-bottom:12px;font-weight:600}.dashboard-content[_ngcontent-%COMP%]{display:grid;gap:32px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.stat-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.22);border-radius:20px;padding:22px;display:flex;flex-direction:column;gap:12px;box-shadow:0 16px 32px #0c142447;transition:transform .16s ease,border-color .16s ease}.stat-card.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(91,168,255,.25),rgba(34,46,70,.85))}.stat-icon[_ngcontent-%COMP%]{font-size:2rem}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--text-muted);letter-spacing:.02em}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0}.stat-detail[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem}.error[_ngcontent-%COMP%]{background:rgba(255,107,107,.12);color:var(--danger);border:1px solid rgba(255,107,107,.35);padding:18px 22px;border-radius:14px;text-align:center;font-weight:500}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:80px 0;color:var(--text)}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;margin:24px auto;border-radius:50%;border:4px solid rgba(91,168,255,.2);border-top-color:var(--accent);animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:clamp(20px,2.4vw,28px);box-shadow:0 18px 36px #070c1859;transition:transform .16s ease,box-shadow .16s ease,border-color .18s ease}.pack-suggestions[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]{width:100%}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;list-style:none;cursor:pointer;font-size:clamp(1.25rem,2vw,1.55rem);font-weight:700;color:var(--text);padding-bottom:18px;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:22px}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{content:"";width:11px;height:11px;border-radius:50%;background:var(--accent);box-shadow:0 0 18px #5ba8ffa6}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker{display:none}.pack-suggestions[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{background:var(--accent-strong)}.suggestion-subtitle[_ngcontent-%COMP%]{color:var(--text-muted);margin-bottom:18px;font-size:.95rem;font-style:italic}.suggestions-list[_ngcontent-%COMP%]{display:grid;gap:14px}.suggestion-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:18px;padding:18px 20px;border:1px solid rgba(91,168,255,.2);transition:transform .16s ease,border-color .16s ease,box-shadow .16s ease}.suggestion-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#5ba8ff8c;box-shadow:0 14px 28px #101c3459}.suggestion-item.top-pick[_ngcontent-%COMP%]{border:1px solid rgba(241,196,15,.65);background:linear-gradient(120deg,rgba(241,196,15,.22),rgba(44,62,80,.45))}.suggestion-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.pack-set[_ngcontent-%COMP%]{margin-left:6px;color:var(--text-muted);font-size:.9rem}.rank-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:32px;padding:4px 10px;border-radius:999px;background:rgba(91,168,255,.2);color:var(--accent);font-weight:600}.top-pick-badge[_ngcontent-%COMP%]{font-size:.72rem;letter-spacing:.12em;text-transform:uppercase;padding:4px 10px;border-radius:999px;background:rgba(241,196,15,.16);color:var(--warning)}.suggestion-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:14px;color:var(--text-muted);font-size:.92rem}.missing-count[_ngcontent-%COMP%]{color:var(--danger);font-weight:600}.completion-rate[_ngcontent-%COMP%]{color:var(--success);font-weight:600}.progress-count[_ngcontent-%COMP%]{color:var(--accent);font-weight:600}.progress-list[_ngcontent-%COMP%]{display:grid;gap:18px}.progress-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:20px;padding:20px 22px;border:1px solid rgba(91,168,255,.18);transition:transform .16s ease,border-color .16s ease}.progress-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.progress-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;color:var(--text)}.progress-percentage[_ngcontent-%COMP%]{color:var(--success);font-weight:700}.progress-bar[_ngcontent-%COMP%]{background:rgba(91,168,255,.14);border-radius:999px;height:10px;overflow:hidden;margin-bottom:10px}.progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent-strong));transition:width .22s ease-in-out}.progress-details[_ngcontent-%COMP%]{color:var(--text-muted);margin:0;font-size:.92rem}.set-rarity-breakdown[_ngcontent-%COMP%]{margin-top:18px}.set-rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:12px;color:var(--text-muted);font-weight:600;letter-spacing:.02em}.set-rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.set-rarity-item[_ngcontent-%COMP%]{background:rgba(13,19,33,.7);border:1px solid rgba(91,168,255,.14);border-radius:16px;padding:12px 14px;text-align:center;box-shadow:inset 0 1px #ffffff0a,0 6px 14px #080c1659;display:flex;flex-direction:column;min-height:96px}.rarity-name[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:.8rem;font-weight:600;color:var(--text)}.rarity-mini-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:auto}.rarity-mini-bar[_ngcontent-%COMP%]{flex:1;height:8px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(91,168,255,.12));border:1px solid rgba(91,168,255,.22);overflow:hidden;position:relative}.rarity-mini-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--rarity-start, var(--accent)) 0%,var(--rarity-end, var(--accent-strong)) 100%);border-radius:999px;box-shadow:0 0 8px var(--rarity-glow, rgba(76, 138, 255, .6));transition:width .26s ease}.rarity-mini-text[_ngcontent-%COMP%]{font-size:.72rem;color:var(--text);background:rgba(255,255,255,.06);border:1px solid rgba(91,168,255,.18);padding:2px 8px;border-radius:999px;font-weight:600;letter-spacing:.01em;font-variant-numeric:tabular-nums}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.rarity-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.18);border-radius:18px;padding:20px;display:flex;flex-direction:column;gap:14px;min-height:140px;transition:transform .16s ease,border-color .16s ease}.rarity-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.rarity-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.rarity-count[_ngcontent-%COMP%]{font-weight:700;color:var(--accent)}.rarity-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:auto}.rarity-bar[_ngcontent-%COMP%]{flex:1;height:10px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(91,168,255,.12));border:1px solid rgba(91,168,255,.22);overflow:hidden}.rarity-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--rarity-start, var(--accent)) 0%,var(--rarity-end, var(--accent-strong)) 100%);border-radius:999px;box-shadow:0 0 10px var(--rarity-glow, rgba(76, 138, 255, .65));transition:width .26s ease-in-out}.percentage[_ngcontent-%COMP%]{min-width:48px;text-align:right;font-weight:700;color:var(--success);background:rgba(46,204,113,.1);border:1px solid rgba(46,204,113,.25);padding:2px 8px;border-radius:999px}@media (max-width: 768px){.suggestion-summary[_ngcontent-%COMP%], .progress-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.rarity-grid[_ngcontent-%COMP%], .set-rarity-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.rank-number[_ngcontent-%COMP%]{min-width:28px}}']}),t})(),FV=(()=>{const e=class{constructor(r){this.http=r,this.BASE_IMAGE_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-exchange/main/public/images/cards",this.imageCache=new Map}getCardImageUrl(r){return`${this.BASE_IMAGE_URL}/${r}`}checkImageExists(r){if(this.imageCache.has(r))return K(this.imageCache.get(r));const o=this.getCardImageUrl(r);return this.http.head(o,{observe:"response"}).pipe(O(i=>{const s=200===i.status;return this.imageCache.set(r,s),s}),qn(()=>(this.imageCache.set(r,!1),K(!1))))}preloadImage(r){return new Promise(o=>{const i=new Image;i.onload=()=>{this.imageCache.set(r,!0),o(!0)},i.onerror=()=>{this.imageCache.set(r,!1),o(!1)},i.src=this.getCardImageUrl(r)})}getPlaceholderImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDIwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExNi41NjkgMTQwIDEzMCAxMjYuNTY5IDEzMCAxMTBDMTMwIDkzLjQzMTUgMTE2LjU2OSA4MCAxMDAgODBDODMuNDMxNSA4MCA3MCA5My40MzE1IDcwIDExMEM3MCAxMjYuNTY5IDgzLjQzMTUgMTQwIDEwMCAxNDBaIiBmaWxsPSIjOUI5QkE4Ii8+CjxwYXRoIGQ9Ik0xMDAgMTAwQzEwNS41MjMgMTAwIDExMCAxMDQuNDc3IDExMCAxMTBDMTEwIDExNS41MjMgMTA1LjUyMyAxMjAgMTAwIDEyMEM5NC40NzcgMTIwIDkwIDExNS41MjMgOTAgMTEwQzkwIDEwNC40NzcgOTQuNDc3IDEwMCAxMDAgMTAwWiIgZmlsbD0iI0Y5RkFGQiIvPgo8L3N2Zz4K"}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(Eo))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"}),t})();function LV(t,e){if(1&t){const n=cr();D(0,"button",9),re("click",function(){return It(n),xt(se().backToMyCollection())}),M(1,"My collection"),C()}}function jV(t,e){if(1&t&&(D(0,"div",36),M(1),C()),2&t){const n=se(2);L(1),Qe("",n.syncProgress," cards loaded")}}function VV(t,e){if(1&t&&(D(0,"div",30)(1,"div",31)(2,"div",32),M(3,"\u23f3"),C(),D(4,"div",33)(5,"div",34),M(6),C(),Ce(7,jV,2,1,"div",35),C()()()),2&t){const n=se();L(6),$n(n.syncMessage),L(1),q("ngIf",n.syncProgress>0)}}function UV(t,e){if(1&t){const n=cr();D(0,"div",37)(1,"div"),M(2,"Viewing "),D(3,"strong"),M(4),C(),M(5,"'s collection (read-only)"),C(),D(6,"button",9),re("click",function(){return It(n),xt(se().backToMyCollection())}),M(7,"Back to my collection"),C()()}if(2&t){const n=se();L(4),$n(null==n.viewingUser?null:n.viewingUser.username)}}function $V(t,e){if(1&t&&(D(0,"option",38),M(1),C()),2&t){const n=e.$implicit,r=se();q("value",n),L(1),hr(" ",r.getSetName(n)," (",n,") ")}}function BV(t,e){if(1&t&&(D(0,"option",38),M(1),C()),2&t){const n=e.$implicit;q("value",n.symbol),L(1),Qe(" ",n.displayName," ")}}function HV(t,e){if(1&t&&(D(0,"span",39),M(1),C()),2&t){const n=se();L(1),Qe("(filtered by ",n.getSetName(n.selectedSet),")")}}function zV(t,e){if(1&t&&(D(0,"option",38),M(1),C()),2&t){const n=e.$implicit;q("value",n),L(1),Qe(" ",n," ")}}function GV(t,e){1&t&&(D(0,"div",40),jn(1,"div",41),D(2,"p"),M(3,"Loading Pokemon cards..."),C()())}function qV(t,e){if(1&t){const n=cr();D(0,"div",42)(1,"p"),M(2),C(),D(3,"button",43),re("click",function(){return It(n),xt(se().loadAllData())}),M(4,"Retry"),C()()}if(2&t){const n=se();L(2),$n(n.error)}}function WV(t,e){if(1&t){const n=cr();_o(0),D(1,"input",63),re("ngModelChange",function(o){return It(n),xt(se(4).editingCountValue=o)})("keydown.enter",function(){It(n);const o=se().$implicit;return xt(se(3).commitCount(o))})("keydown",function(o){It(n);const i=se().$implicit;return xt(se(3).onCountInputKeydown(o,i))})("keydown.escape",function(){return It(n),xt(se(4).cancelEditingCount())})("blur",function(){It(n);const o=se().$implicit;return xt(se(3).commitCount(o))}),C(),vo()}if(2&t){const n=se(4);L(1),q("ngModel",n.editingCountValue)}}function JV(t,e){if(1&t){const n=cr();D(0,"button",64),re("click",function(){It(n);const o=se().$implicit,i=se(3);return xt(i.isViewingOther?null:i.startEditingCount(o))}),M(1),C()}if(2&t){const n=se().$implicit,r=se(3);q("disabled",r.isViewingOther),L(1),Qe(" ",r.getOwnedCount(n)," ")}}function KV(t,e){if(1&t){const n=cr();D(0,"div",53)(1,"div",54)(2,"img",55),re("error",function(o){const s=It(n).$implicit;return xt(se(3).onImageError(o,s))}),C()(),D(3,"div",56)(4,"div",57),M(5),C(),D(6,"div",58)(7,"button",59),re("click",function(){const i=It(n).$implicit;return xt(se(3).decreaseOwned(i))}),M(8," \u2212 "),C(),Ce(9,WV,2,1,"ng-container",60),Ce(10,JV,2,2,"ng-template",null,61,kv),D(12,"button",62),re("click",function(){const i=It(n).$implicit;return xt(se(3).increaseOwned(i))}),M(13," + "),C()()()()}if(2&t){const n=e.$implicit,r=Nd(11),o=se(3);Ar("no-quantity",0===o.getOwnedCount(n)),dn("data-cardid",o.getCardId(n)),L(1),Ar("no-quantity",0===o.getOwnedCount(n)),L(1),Ar("no-quantity",0===o.getOwnedCount(n)),q("src",o.getCardImageUrl(n.imageName),sd)("alt",n.label.eng+" Pokemon Card"),L(3),$n(o.getCardDisplayName(n)),L(2),q("disabled",o.isViewingOther||0===o.getOwnedCount(n)),L(2),q("ngIf",o.editingCardId===o.getCardId(n))("ngIfElse",r),L(3),q("disabled",o.isViewingOther)}}function YV(t,e){if(1&t&&(D(0,"div",46)(1,"div",47)(2,"h3",48),M(3),C(),D(4,"div",49)(5,"span",50),M(6),C()()(),D(7,"div",51),Ce(8,KV,14,14,"div",52),C()()),2&t){const n=e.$implicit,r=se(2);L(3),$n(r.getGroupDisplayName(n.groupTitle,n.cards)),L(3),hr("",n.cards.length," card",1!==n.cards.length?"s":"",""),L(2),q("ngForOf",n.cards)("ngForTrackBy",r.trackByCardInGroup)}}function QV(t,e){if(1&t&&(D(0,"div",44),Ce(1,YV,9,5,"div",45),C()),2&t){const n=se();L(1),q("ngForOf",n.getGroupedCards())("ngForTrackBy",n.trackByGroupTitle)}}function ZV(t,e){if(1&t){const n=cr();D(0,"div",65)(1,"div",66),M(2,"\u{1f50d}"),C(),D(3,"h3"),M(4,"No cards found"),C(),D(5,"p"),M(6,"Try adjusting your search or filter criteria"),C(),D(7,"button",43),re("click",function(){return It(n),xt(se().clearFilters())}),M(8,"Clear All Filters"),C()()}}let XV=(()=>{const e=class{constructor(r,o,i,s,a,l,c){this.pokemonDataService=r,this.dataManager=o,this.imageService=i,this.supabaseService=s,this.router=a,this.cdr=l,this.rarityService=c,this.cards=[],this.filteredCards=[],this.sets=[],this.rarityMapping={},this.ownedCards={},this.selectedSet="all",this.selectedRarity="all",this.selectedPack="all",this.searchTerm="",this.availableSets=[],this.availableRarities=[],this.availableRaritySymbols=[],this.availablePacks=[],this.loading=!0,this.loadingOwnedCards=!1,this.syncingCards=!1,this.syncProgress=0,this.syncMessage="",this.error=null,this.viewMode="grid",this.editingCardId=null,this.editingCountValue=0,this.lastFlatOrder=[],this.isViewingOther=!1,this.otherUsername="",this.viewingUser=null,this.totalCards=0,this.ownedCount=0,this.uniqueOwned=0,this.completionPercentage=0,this.currentUser=null,this.trackByCardId=(u,d)=>this.getCardId(d),this.trackByGroupTitle=(u,d)=>d.groupTitle,this.trackByCardInGroup=(u,d)=>this.getCardId(d)}ngOnInit(){this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser?this.loadAllData():this.router.navigate(["/signin"])}loadAllData(){this.loading=!0,this.error=null,this.pokemonDataService.loadAllData().subscribe({next:r=>{this.cards=r.cards,this.filteredCards=[...this.cards],this.sets=r.sets,this.rarityMapping=r.rarities,this.extractFilterOptions(),this.calculateStatistics(),this.loading=!1,this.cdr.detectChanges(),this.loadOwnedCards()},error:r=>{this.error="Failed to load card collection",this.loading=!1,this.cdr.detectChanges(),console.error("Error loading card collection:",r)}})}extractFilterOptions(){this.availableSets=[...new Set(this.cards.map(a=>a.set))];const r=[...new Set(this.cards.map(a=>a.rarityCode).filter(a=>a))];this.availableRarities=r,this.availableRaritySymbols=[];const o=new Set;this.cards.forEach(a=>{if(a.rarityCode){const l=this.rarityService.getNormalizedCode(a.rarityCode);o.add(l)}});const i=new Map;this.rarityService.getUnifiedRarities().forEach(a=>{o.has(a.code)&&i.set(a.symbol,{symbol:a.symbol,rarities:[a.code],displayName:a.displayName})}),this.availableRaritySymbols=Array.from(i.values()).sort((a,l)=>this.rarityService.getRarityOrder(a.rarities[0])-this.rarityService.getRarityOrder(l.rarities[0])),this.extractAvailablePacks()}convertRarityNameToCode(r){return{Common:"C",Uncommon:"U",Rare:"R","Double Rare":"RR","Art Rare":"AR","Super Rare":"SR","Special Art Rare":"SAR","Immersive Rare":"IM","Crown Rare":"UR",Shiny:"S","Shiny Super Rare":"SSR"}[r]||r}extractAvailablePacks(){let r=this.cards;"all"!==this.selectedSet&&(r=this.cards.filter(i=>i.set===this.selectedSet));const o=r.flatMap(i=>i.packs).filter(i=>i&&i.trim());this.availablePacks=[...new Set(o)],"all"!==this.selectedPack&&!this.availablePacks.includes(this.selectedPack)&&(this.selectedPack="all")}applyFilters(){this.filteredCards=this.cards.filter(r=>{if("all"!==this.selectedSet&&r.set!==this.selectedSet)return!1;if("all"!==this.selectedRarity){const o=this.availableRaritySymbols.find(i=>i.symbol===this.selectedRarity);if(o){const i=r.rarityCode?this.rarityService.getNormalizedCode(r.rarityCode):"";if(!o.rarities.includes(i))return!1}else if((r.rarityCode?this.rarityService.getSymbol(r.rarityCode):"")!==this.selectedRarity)return!1}return!("all"!==this.selectedPack&&!r.packs.includes(this.selectedPack)||this.searchTerm&&!r.label.eng.toLowerCase().includes(this.searchTerm.toLowerCase()))})}onFilterChange(){this.extractAvailablePacks(),this.applyFilters()}onSetChange(){this.extractAvailablePacks(),this.applyFilters()}onSearchChange(){this.applyFilters()}clearFilters(){this.selectedSet="all",this.selectedRarity="all",this.selectedPack="all",this.searchTerm="",this.applyFilters()}loadOwnedCards(){var r=this;return m(function*(){r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}loadOwnedCardsForUser(r,o){var i=this;return m(function*(){i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage=o?`Loading ${o}'s collection...`:"Starting sync...",i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage="Starting sync...";try{const s=yield i.supabaseService.syncUserCollection(r,a=>{i.syncProgress=a,i.syncMessage=`Syncing cards... ${a} loaded`,i.cdr.detectChanges()});i.ownedCards=s,i.calculateStatistics(),i.syncMessage=`Sync completed! ${Object.keys(s).length} cards loaded`,i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},1500)}catch(s){console.error("Error loading owned cards:",s),i.syncMessage="Sync failed, using local data...";const a=localStorage.getItem("ownedPokemonCards");a&&(i.ownedCards=JSON.parse(a),i.calculateStatistics()),i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},2e3)}finally{i.loadingOwnedCards=!1}})()}saveOwnedCards(){var r=this;return m(function*(){localStorage.setItem("ownedPokemonCards",JSON.stringify(r.ownedCards)),r.calculateStatistics()})()}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}increaseOwned(r){var o=this;return m(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r),a=s+1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}decreaseOwned(r){var o=this;return m(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r);if(0===s)return;const a=s-1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}startEditingCount(r){this.isViewingOther||(this.editingCardId=this.getCardId(r),this.editingCountValue=this.getOwnedCount(r),this.cdr.detectChanges(),this.focusEditingInput())}cancelEditingCount(){this.editingCardId=null,this.editingCountValue=0,this.cdr.detectChanges()}commitCount(r){var o=this;return m(function*(){if(o.isViewingOther)return void o.cancelEditingCount();if(!o.currentUser)return;const i=o.getCardId(r);if(o.editingCardId!==i)return;const s=Math.max(0,Math.floor(Number(o.editingCountValue)||0)),a=o.getOwnedCount(r);s!==a?(o.updateLocalQuantity(i,s),yield o.persistQuantity(i,s,a),o.cancelEditingCount()):o.cancelEditingCount()})()}onCountInputKeydown(r,o){if("Tab"!==r.key)return;r.preventDefault();const i=this.getFlatOrderedCards(),s=this.getCardId(o),a=i.findIndex(c=>this.getCardId(c)===s);if(-1===a)return;const l=r.shiftKey?a-1:a+1;this.commitCount(o).then(()=>{const c=i[l];c&&this.startEditingCount(c)})}focusEditingInput(){const r=this.editingCardId;r&&setTimeout(()=>{const o=document.querySelector(`.card-item[data-cardid="${r}"] .count-input`);o&&(o.focus(),o.select())})}getFlatOrderedCards(){const r=this.getGroupedCards();return this.lastFlatOrder=r.flatMap(o=>o.cards),this.lastFlatOrder}updateLocalQuantity(r,o){o<=0?delete this.ownedCards[r]:this.ownedCards[r]=o,this.saveOwnedCards(),this.cdr.detectChanges()}persistQuantity(r,o,i){var s=this;return m(function*(){if(s.currentUser)try{yield s.supabaseService.updateCardQuantity(s.currentUser.id,r,o)}catch(a){console.error("Error updating card quantity in database:",a),i<=0?delete s.ownedCards[r]:s.ownedCards[r]=i,s.saveOwnedCards(),s.cdr.detectChanges()}})()}calculateStatistics(){this.totalCards=this.cards.length,this.ownedCount=Object.values(this.ownedCards).reduce((r,o)=>r+o,0),this.uniqueOwned=Object.keys(this.ownedCards).length,this.completionPercentage=this.totalCards>0?Math.round(this.uniqueOwned/this.totalCards*100):0}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.label.en:r}getFullRarityName(r){return this.rarityService.getStandardizedDisplayName(r)}getRarityClass(r){return{Common:"rarity-common",Uncommon:"rarity-uncommon",Rare:"rarity-rare","Double Rare":"rarity-double-rare","Art Rare":"rarity-art-rare","Super Rare":"rarity-super-rare","Special Art Rare":"rarity-special-art-rare","Immersive Rare":"rarity-immersive-rare","Crown Rare":"rarity-crown-rare",Shiny:"rarity-shiny","Shiny Super Rare":"rarity-shiny-super-rare"}[r]||"rarity-default"}toggleViewMode(){this.viewMode="grid"===this.viewMode?"list":"grid"}exportCollection(){if(this.isViewingOther)return void alert("Export is disabled when viewing another user's collection");let r="\ufeff";r+="Id,CardName,NumberOwn,Expansion,Pack,Rarity\n",this.cards.forEach(s=>{const a=this.getCardId(s),l=this.getOwnedCount(s),c=s.rarityCode?this.rarityService.getSymbol(s.rarityCode):"Unknown",u=s.packs&&s.packs.length>0?s.packs[0]:"",d=s.label.eng.replace(/,/g,'""');r+=`${a},"${d}",${l},${s.set},"${u}",${c}\n`});const o=new Blob([r],{type:"text/csv;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="pokemon-tcg-collection.csv",i.click()}importCollection(r){var o=this;if(this.isViewingOther)return void alert("Import is disabled when viewing another user's collection");const i=r.target.files[0];if(i){const s=new FileReader;s.onload=function(){var a=m(function*(l){try{const d=(l.target?.result||"").split(/\r?\n/).filter(N=>N.trim().length>0);if(0===d.length)return void alert("CSV file appears to be empty.");const h=new Map;o.cards.forEach(N=>{const z=o.getCardId(N);h.set(o.normalizeId(z),z)});const f=o.parseCSVLine(d[0]),p=/(id|card|name|expansion|set|rarity|qty|quantity|owned|count|number|no)/i,g=f.some(N=>p.test(N)),y=g?1:0,_=g?o.buildHeaderMap(f):null;let x=0,b=0,P=0;for(let N=y;N<d.length;N++){const z=d[N];try{const Wt=o.parseCSVLine(z),{cardId:Ae,quantity:at}=o.resolveCsvRow(Wt,_);if(!Ae){b++;continue}const Kn=Math.max(0,Math.floor(Number(at))||0),mn=h.get(o.normalizeId(Ae))||null;mn?(Kn>0?o.ownedCards[mn]=Kn:delete o.ownedCards[mn],x++):(console.log(Ae),P++)}catch(Wt){console.error(`Error parsing line: ${z}`,Wt),b++}}if(o.saveOwnedCards(),o.currentUser)try{const N=yield o.supabaseService.bulkReplaceUserCollection(o.currentUser.id,o.ownedCards);if(N.success){let z=`Import completed!\n${x} cards updated`;z+="\nCollection synced to database successfully",P>0&&(z+=`\n${P} rows referenced unknown cards (skipped)`),b>0&&(z+=`\n${b} parse errors encountered`),yield o.loadOwnedCards(),alert(z)}else{console.error("\u274c Failed to sync collection to database:",N.error);let z=`Import completed!\n${x} cards updated locally`;z+=`\nDatabase sync failed: ${N.error}`,P>0&&(z+=`\n${P} unknown cards (skipped)`),b>0&&(z+=`\n${b} parse errors encountered`),alert(z)}}catch(N){console.error("\u274c Error during bulk sync:",N);let z=`Import completed!\n${x} cards updated locally`;z+="\nDatabase sync failed - please try again",P>0&&(z+=`\n${P} unknown cards (skipped)`),b>0&&(z+=`\n${b} parse errors encountered`),alert(z)}else{let N=`Import completed!\n${x} cards updated`;P>0&&(N+=`\n${P} unknown cards (skipped)`),b>0&&(N+=`\n${b} parse errors encountered`),alert(N)}}catch(c){console.error("Failed to import collection:",c),alert("Failed to import collection. Please check the CSV file format.")}});return function(l){return a.apply(this,arguments)}}(),s.readAsText(i)}}viewOtherCollection(){var r=this;return m(function*(){const o=(r.otherUsername||"").trim();if(!o)return void alert("Please enter a username");if(r.currentUser&&o===r.currentUser.username)return void r.backToMyCollection();const i=yield r.supabaseService.getProfileByUsername(o);i?(r.isViewingOther=!0,r.viewingUser=i,yield r.loadOwnedCardsForUser(i.id,i.username)):alert(`User '${o}' not found`)})()}backToMyCollection(){var r=this;return m(function*(){r.isViewingOther=!1,r.viewingUser=null,r.otherUsername="",r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}buildHeaderMap(r){const o={};return r.forEach((i,s)=>{const a=i.trim().toLowerCase();o[a]=s}),o}resolveCsvRow(r,o){const i=c=>{if(o)for(const u of c){const d=o[u];if(void 0!==d&&d>=0&&d<r.length){const h=(r[d]||"").trim();if(h)return h}}},s=i(["numberown","quantity","qty","owned","count","number own","number_owned"]);let a=0;void 0!==s?a=Math.max(0,Math.floor(Number(s)||0)):r.length>=3&&(a=Math.max(0,Math.floor(Number(r[2])||0)));let l=i(["id","cardid","card id"]);if(!l){let c=i(["set","expansion"]),u=i(["number","no","card number","card no","card#"]);if(!c&&r.length>=4&&(c=(r[3]||"").trim()),!u&&r.length>=1){const d=(r[1]||"").trim();/^\d+/.test(d)&&(u=d)}if(c&&u){const d=this.mapToSetCode(c),h=this.extractLeadingInt(u);d&&null!==h&&(l=`${d}-${h}`)}}if(!l&&r.length>0){const c=(r[0]||"").trim();c&&(l=c)}return{cardId:l||null,quantity:a}}extractLeadingInt(r){const o=(r||"").match(/\d+/);return o?parseInt(o[0],10):null}mapToSetCode(r){const i=(r||"").trim().toUpperCase();if("PROMO-A"===i)return"P-A";const s=this.sets.find(l=>(l.code||"").toUpperCase()===i);if(s)return s.code;const a=this.sets.find(l=>(l.label?.en||"").toUpperCase()===i);return a?a.code:null}normalizeId(r){let o=(r||"").trim().toUpperCase();return o=o.replace(/^PROMO-A(?=-)/,"P-A"),o}parseCSVLine(r){const o=[];let i="",s=!1;for(let a=0;a<r.length;a++){const l=r[a];'"'===l?s=!s:","!==l||s?i+=l:(o.push(i),i="")}return o.push(i),o}getCardImageUrl(r){return this.imageService.getCardImageUrl(r)}getCardDisplayName(r){return`${r.set}-${r.number} \u2013 ${r.label.eng}`}onImageError(r,o){console.error("\u274c Image failed to load:",o.imageName),r.target.src=this.imageService.getPlaceholderImageUrl()}getGroupedCards(){const r={};return this.filteredCards.forEach(o=>{const i=o.set;r[i]||(r[i]=[]),r[i].push(o)}),Object.keys(r).sort((o,i)=>{const s=o.match(/^([A-Z]+)(\d+)([a-z]*)$/),a=i.match(/^([A-Z]+)(\d+)([a-z]*)$/);if(s&&a){if(s[1]!==a[1])return s[1].localeCompare(a[1]);const l=parseInt(s[2]),c=parseInt(a[2]);return l!==c?l-c:(s[3]||"").localeCompare(a[3]||"")}return o.localeCompare(i)}).map(o=>({groupTitle:o,cards:r[o].sort((i,s)=>i.number!==s.number?i.number-s.number:i.label.eng.localeCompare(s.label.eng))}))}getGroupDisplayName(r,o){const i=this.getSetName(r);return i&&i!==r?`${r} - ${i}`:`Set ${r}`}};let t=e;return e.\u0275fac=function(o){return new(o||e)(T(rD),T(oD),T(FV),T(Xi),T(Ct),T(Ei),T(BD))},e.\u0275cmp=Br({type:e,selectors:[["app-card-collection"]],decls:52,vars:16,consts:[[1,"collection-container"],[1,"collection-actions"],[1,"actions-left"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","import-btn"],["type","file","accept",".csv","hidden","",3,"change"],[1,"actions-right"],[1,"view-other-controls"],["type","text","placeholder","View username\u2026",1,"search-input","compact",3,"ngModel","ngModelChange","keydown.enter"],[1,"btn","btn-outline",3,"click"],["class","btn btn-outline",3,"click",4,"ngIf"],["class","sync-progress",4,"ngIf"],["class","view-other-banner","style","margin-bottom:12px; padding:10px 14px; border-radius:12px; background:rgba(46,204,113,0.12); border:1px solid rgba(46,204,113,0.35); display:flex; align-items:center; justify-content:space-between; gap:12px;",4,"ngIf"],[1,"filters-section"],[1,"search-container"],[1,"search-box"],["type","text","placeholder","\u{1f50d} Search Pokemon cards...",1,"search-input",3,"ngModel","ngModelChange","input"],[1,"filter-controls"],[1,"filter-group"],[1,"filter-label"],[1,"filter-select",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["class","filter-dependency",4,"ngIf"],[1,"filter-actions"],[1,"btn-icon"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","cards-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"sync-progress"],[1,"sync-message"],[1,"sync-icon"],[1,"sync-text"],[1,"sync-title"],["class","sync-count",4,"ngIf"],[1,"sync-count"],[1,"view-other-banner",2,"margin-bottom","12px","padding","10px 14px","border-radius","12px","background","rgba(46,204,113,0.12)","border","1px solid rgba(46,204,113,0.35)","display","flex","align-items","center","justify-content","space-between","gap","12px"],[3,"value"],[1,"filter-dependency"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"btn","btn-primary",3,"click"],[1,"cards-container"],["class","card-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-group"],[1,"group-header"],[1,"group-title"],[1,"group-stats"],[1,"group-count"],[1,"cards-grid"],["class","card-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-item"],[1,"card-image"],["loading","lazy",1,"pokemon-card-img",3,"src","alt","error"],[1,"card-info"],[1,"card-title"],[1,"ownership-controls"],[1,"count-btn","decrease",3,"disabled","click"],[4,"ngIf","ngIfElse"],["displayCount",""],[1,"count-btn","increase",3,"disabled","click"],["type","number","min","0",1,"count-input",3,"ngModel","ngModelChange","keydown.enter","keydown","keydown.escape","blur"],["type","button",1,"count-display",3,"disabled","click"],[1,"empty-state"],[1,"empty-icon"]],template:function(o,i){1&o&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),re("click",function(){return i.exportCollection()}),M(4," \u{1f4e4} Export Collection "),C(),D(5,"label",4),M(6," \u{1f4e5} Import Collection "),D(7,"input",5),re("change",function(a){return i.importCollection(a)}),C()()(),D(8,"div",6)(9,"div",7)(10,"input",8),re("ngModelChange",function(a){return i.otherUsername=a})("keydown.enter",function(){return i.viewOtherCollection()}),C(),D(11,"button",9),re("click",function(){return i.viewOtherCollection()}),M(12,"View"),C(),Ce(13,LV,2,0,"button",10),C()()(),Ce(14,VV,8,2,"div",11),Ce(15,UV,8,1,"div",12),D(16,"div",13)(17,"div",14)(18,"div",15)(19,"input",16),re("ngModelChange",function(a){return i.searchTerm=a})("input",function(){return i.onSearchChange()}),C()()(),D(20,"div",17)(21,"div",18)(22,"label",19),M(23,"Set"),C(),D(24,"select",20),re("ngModelChange",function(a){return i.selectedSet=a})("change",function(){return i.onSetChange()}),D(25,"option",21),M(26,"All Sets"),C(),Ce(27,$V,2,3,"option",22),C()(),D(28,"div",18)(29,"label",19),M(30,"Rarity"),C(),D(31,"select",20),re("ngModelChange",function(a){return i.selectedRarity=a})("change",function(){return i.onFilterChange()}),D(32,"option",21),M(33,"All Rarities"),C(),Ce(34,BV,2,2,"option",22),C()(),D(35,"div",18)(36,"label",19),M(37," Pack "),Ce(38,HV,2,1,"span",23),C(),D(39,"select",20),re("ngModelChange",function(a){return i.selectedPack=a})("change",function(){return i.onFilterChange()}),D(40,"option",21),M(41,"All Packs"),C(),Ce(42,zV,2,2,"option",22),C()(),D(43,"div",24)(44,"button",9),re("click",function(){return i.clearFilters()}),D(45,"span",25),M(46,"\u{1f5d1}\ufe0f"),C(),M(47," Clear Filters "),C()()()(),Ce(48,GV,4,0,"div",26),Ce(49,qV,5,1,"div",27),Ce(50,QV,2,2,"div",28),Ce(51,ZV,9,0,"div",29),C()),2&o&&(L(10),q("ngModel",i.otherUsername),L(3),q("ngIf",i.isViewingOther),L(1),q("ngIf",i.syncingCards),L(1),q("ngIf",i.isViewingOther),L(4),q("ngModel",i.searchTerm),L(5),q("ngModel",i.selectedSet),L(3),q("ngForOf",i.availableSets),L(4),q("ngModel",i.selectedRarity),L(3),q("ngForOf",i.availableRaritySymbols),L(4),q("ngIf","all"!==i.selectedSet),L(1),q("ngModel",i.selectedPack),L(3),q("ngForOf",i.availablePacks),L(6),q("ngIf",i.loading),L(1),q("ngIf",i.error),L(1),q("ngIf",!i.loading&&!i.error),L(1),q("ngIf",!i.loading&&!i.error&&0===i.getGroupedCards().length))},dependencies:[jh,Mi,Pw,kw,xi,Cf,pc,Xs,Sf,Oi],styles:['.collection-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:#000;min-height:100vh;color:#fff}.sync-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,#1a4d3a 0%,#0f2d1f 100%);border:1px solid #28a745;border-radius:10px;padding:16px 22px;margin-bottom:20px;box-shadow:0 4px 18px #28a74540}.sync-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.sync-icon[_ngcontent-%COMP%]{font-size:22px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.sync-text[_ngcontent-%COMP%]{flex:1}.sync-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#28a745;margin-bottom:2px}.sync-count[_ngcontent-%COMP%]{font-size:12px;color:#9fb8aa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.collection-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:30px;flex-wrap:wrap}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.view-other-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.view-other-controls[_ngcontent-%COMP%]   .search-input.compact[_ngcontent-%COMP%]{width:auto;max-width:240px;min-width:200px;padding:8px 12px;border-radius:8px}@media (max-width: 768px){.collection-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{justify-content:space-between}}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #444;border-radius:6px;background-color:#333;color:#fff;cursor:pointer;font-size:14px;transition:all .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#444;border-color:#555}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#555;border-color:#666}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#666;border-color:#777}.btn-outline[_ngcontent-%COMP%]{background:transparent;border-color:#555}.btn-outline[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.06)}.btn-outline-small[_ngcontent-%COMP%]{padding:4px 12px;border:1px solid #666;border-radius:4px;background-color:transparent;color:#ccc;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-outline-small[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;color:#fff}.btn-icon[_ngcontent-%COMP%]{margin-right:6px}.btn[_ngcontent-%COMP%]:disabled, .btn-outline-small[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.import-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d;border:1px solid #404040}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:420px;margin:0 auto}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #444;border-radius:25px;background-color:#333;color:#fff;font-size:16px;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 10px #007bff4d}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ccc;text-transform:uppercase;letter-spacing:.5px}.filter-dependency[_ngcontent-%COMP%]{font-size:11px;color:#007bff;font-weight:400;text-transform:none;font-style:italic}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #444;border-radius:8px;background-color:#333;color:#fff;font-size:14px;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:hover{border-color:#555;background-color:#3a3a3a}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff33}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.results-info[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:12px 20px;border-radius:8px;text-align:center;border:1px solid #333}.results-text[_ngcontent-%COMP%]{color:#ccc;font-size:14px;font-weight:500}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #333;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.cards-container[_ngcontent-%COMP%]{width:100%}.card-group[_ngcontent-%COMP%]{margin-bottom:40px}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:15px 0;border-bottom:2px solid #333;flex-wrap:wrap;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin:0;text-shadow:1px 1px 2px rgba(0,0,0,.5);flex:1;min-width:280px;position:relative;padding-left:30px;line-height:1.3}.group-title[_ngcontent-%COMP%]:before{content:"\\1f4cb";position:absolute;left:0;top:50%;transform:translateY(-50%);font-size:1.2rem}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-shrink:0}.group-count[_ngcontent-%COMP%]{color:#ccc;font-size:14px;padding:4px 8px;background-color:#333;border-radius:4px;white-space:nowrap}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:18px;padding:20px 0}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;overflow:hidden;transition:transform .2s ease}.card-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2 / 3;overflow:hidden;padding:10px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.pokemon-card-img[_ngcontent-%COMP%]{width:90%;object-fit:cover;object-position:center;border-radius:10px;transition:transform .3s ease,opacity .3s ease;background-color:#222}.card-item[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{transform:scale(1.05)}.pokemon-card-img[_ngcontent-%COMP%]:not([src]), .pokemon-card-img[src=""][_ngcontent-%COMP%]{opacity:.5;background:linear-gradient(45deg,#333,#555,#333);background-size:200% 200%;animation:_ngcontent-%COMP%_loading-shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loading-shimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.card-item.no-quantity[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.9}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(0%) opacity(.8)}.card-item.no-quantity[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{color:#888}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]:hover   .count-display[_ngcontent-%COMP%]{color:#bbb}.card-info[_ngcontent-%COMP%]{padding:10px 0;text-align:center}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ownership-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.count-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #555;border-radius:4px;background-color:#444;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;transition:all .2s ease}.count-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#555;border-color:#666}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.count-btn.decrease[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;border-color:#dc3545}.count-btn.increase[_ngcontent-%COMP%]:hover{background-color:#28a745;border-color:#28a745}.count-display[_ngcontent-%COMP%]{min-width:32px;padding:4px 10px;border-radius:6px;border:1px dashed #666;background:rgba(51,51,51,.65);color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.count-display[_ngcontent-%COMP%]:hover, .count-display[_ngcontent-%COMP%]:focus-visible{border-color:#007bff;background:rgba(0,123,255,.2);outline:none}.count-input[_ngcontent-%COMP%]{width:56px;padding:4px 8px;border-radius:6px;border:1px solid #777;background:rgba(24,24,24,.95);color:#fff;font-size:14px;font-weight:600;text-align:center;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.count-input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 6px #007bff4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.pokemon-card-img.lazy-loading[_ngcontent-%COMP%]{opacity:.6;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.pokemon-card-img.lazy-loaded[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}.pokemon-card-img.lazy-error[_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 1200px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (max-width: 768px){.collection-container[_ngcontent-%COMP%]{padding:15px}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}.ownership-controls[_ngcontent-%COMP%]{gap:8px}.filters-section[_ngcontent-%COMP%]{padding:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-box[_ngcontent-%COMP%]{max-width:100%}}@media (max-width: 540px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.count-display[_ngcontent-%COMP%], .count-input[_ngcontent-%COMP%]{width:48px}.filters-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.filter-label[_ngcontent-%COMP%]{font-size:12px}}'],changeDetection:0}),t})();function eU(t,e){if(1&t&&(D(0,"div",19),M(1),C()),2&t){const n=se();L(1),Qe(" ",n.error," ")}}function tU(t,e){1&t&&jn(0,"span",20)}function rU(t,e){1&t&&(D(0,"a",11),M(1," \u{1f527} Admin "),C())}function oU(t,e){if(1&t){const n=cr();D(0,"div",12)(1,"span",13),M(2),C(),D(3,"button",14),re("click",function(){return It(n),xt(se().signOut())}),M(4,"Sign Out"),C()()}if(2&t){const n=se();L(2),Qe("\u{1f464} ",n.currentUser.username,"")}}function sU(t,e){if(1&t&&(D(0,"div",20),M(1),C()),2&t){const n=se();Ar("success","success"===n.messageType)("error","error"===n.messageType),L(1),Qe(" ",n.message," ")}}const aU=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:(()=>{const e=class{constructor(r,o,i){this.supabaseService=r,this.router=o,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/collection"}ngOnInit(){this.supabaseService.isSignedIn()?this.router.navigate([this.returnUrl]):this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/collection"}get isFormValid(){return this.username.trim().length>0&&this.password.trim().length>0}onSubmit(){var r=this;return m(function*(){if(r.isFormValid){r.loading=!0,r.error="";try{const{user:o,error:i}=yield r.supabaseService.signIn(r.username.trim(),r.password.trim());i?(r.error=i,i.includes("Please wait a moment")&&(r.error+=" This usually resolves itself quickly.")):o&&r.router.navigate([r.returnUrl])}catch(o){if(console.error("Sign in error:",o),o&&"object"==typeof o&&"message"in o){const i=o.message;r.error=i.includes("NavigatorLockAcquireTimeoutError")||i.includes("lock")?"Please wait a moment and try signing in again.":"An unexpected error occurred"}else r.error="An unexpected error occurred"}finally{r.loading=!1}}else r.error="Please enter both username and password"})()}onUsernameChange(){this.error=""}onPasswordChange(){this.error=""}};let t=e;return e.\u0275fac=function(o){return new(o||e)(T(Xi),T(Ct),T(Oo))},e.\u0275cmp=Br({type:e,selectors:[["app-signin"]],decls:26,vars:8,consts:[[1,"signin-container"],[1,"signin-card"],[1,"signin-header"],[1,"signin-title"],[1,"signin-subtitle"],[1,"signin-form",3,"ngSubmit"],["signinForm","ngForm"],[1,"form-group"],["for","username"],["id","username","name","username","type","text","placeholder","Enter your username","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["usernameInput","ngModel"],["for","password"],["id","password","name","password","type","password","placeholder","Enter your password","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["passwordInput","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"signin-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"signin-footer"],[1,"invite-note"],[1,"error-message"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),M(4,"\u{1f0cf} Pokemon TCG Pocket"),C(),D(5,"p",4),M(6,"Collection Manager"),C()(),D(7,"form",5,6),re("ngSubmit",function(){return i.onSubmit()}),D(9,"div",7)(10,"label",8),M(11,"Username"),C(),D(12,"input",9,10),re("ngModelChange",function(a){return i.username=a})("input",function(){return i.onUsernameChange()}),C()(),D(14,"div",7)(15,"label",11),M(16,"Password"),C(),D(17,"input",12,13),re("ngModelChange",function(a){return i.password=a})("input",function(){return i.onPasswordChange()}),C()(),Ce(19,eU,2,1,"div",14),D(20,"button",15),Ce(21,tU,1,0,"span",16),M(22),C()(),D(23,"div",17)(24,"p",18),M(25," \u{1f4e7} This is an invite-only system. Contact your administrator if you need access. "),C()()()()),2&o){const s=Nd(8);L(12),q("ngModel",i.username)("disabled",i.loading),L(5),q("ngModel",i.password)("disabled",i.loading),L(2),q("ngIf",i.error),L(1),q("disabled",i.loading||!s.valid),L(1),q("ngIf",i.loading),L(1),Qe(" ",i.loading?"Signing In...":"Sign In"," ")}},dependencies:[Mi,Dw,xi,Xs,cw,gc,Oi,fc],styles:[".signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px}.signin-card[_ngcontent-%COMP%]{background:#333;border-radius:12px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 30px #0000004d;border:1px solid #444}.signin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signin-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.signin-subtitle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin:0;opacity:.8}.signin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #555;border-radius:6px;background-color:#444;color:#fff;font-size:16px;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;background-color:#555}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:#888}.error-message[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:10px 12px;border-radius:6px;font-size:14px;text-align:center;margin-top:-10px}.signin-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}.signin-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px)}.signin-btn[_ngcontent-%COMP%]:disabled{background-color:#666;cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signin-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.invite-note[_ngcontent-%COMP%]{color:#888;font-size:12px;line-height:1.4;margin:0;padding:15px;background-color:#2a2a2a;border-radius:6px;border-left:3px solid #007bff}@media (max-width: 480px){.signin-container[_ngcontent-%COMP%]{padding:10px}.signin-card[_ngcontent-%COMP%]{padding:30px 20px}.signin-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),t})()},{path:"",component:(()=>{const e=class{constructor(r,o){this.supabaseService=r,this.router=o,this.currentUser=null}ngOnInit(){this.supabaseService.currentUser$.subscribe(r=>{this.currentUser=r})}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}};let t=e;return e.\u0275fac=function(o){return new(o||e)(T(Xi),T(Ct))},e.\u0275cmp=Br({type:e,selectors:[["app-main-layout"]],decls:18,vars:2,consts:[[1,"app-layout"],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],[1,"nav-center"],[1,"nav-links"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],["routerLink","/collection","routerLinkActive","active",1,"nav-link"],["routerLink","/admin","routerLinkActive","active","class","nav-link admin-link",4,"ngIf"],["class","nav-user",4,"ngIf"],[1,"main-content"],["routerLink","/admin","routerLinkActive","active",1,"nav-link","admin-link"],[1,"nav-user"],[1,"username"],[1,"btn-signout",3,"click"]],template:function(o,i){1&o&&(D(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"h2"),M(5,"Pokemon TCG Pocket Collector"),C(),D(6,"p"),M(7,"v1.0.0"),C()(),D(8,"div",4)(9,"div",5)(10,"a",6),M(11," \u{1f4ca} Dashboard "),C(),D(12,"a",7),M(13," \u{1f5c2}\ufe0f Collection "),C(),Ce(14,rU,2,0,"a",8),C()(),Ce(15,oU,5,1,"div",9),C()(),D(16,"main",10),jn(17,"router-outlet"),C()()),2&o&&(L(14),q("ngIf","admin"===(null==i.currentUser?null:i.currentUser.role)),L(1),q("ngIf",i.currentUser))},dependencies:[Mi,Ac,Vc,W0],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#000}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:0 20px;box-shadow:0 2px 10px #0000001a}.nav-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:15px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff}.nav-brand[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f0f0f0;opacity:.9;font-size:.95rem}.nav-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;border-radius:5px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:0 2px 5px #0003}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.username[_ngcontent-%COMP%]{color:#f0f0f0;font-size:14px;font-weight:500}.btn-signout[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background-color:transparent;color:#fff;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-signout[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#000}@media (max-width: 768px){.nav-container[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.nav-center[_ngcontent-%COMP%]{order:3}.nav-user[_ngcontent-%COMP%]{order:2}.nav-links[_ngcontent-%COMP%]{gap:15px}.nav-link[_ngcontent-%COMP%]{padding:8px 15px;font-size:14px}}"]}),t})(),canActivate:[(()=>{const e=class{constructor(r,o){this.supabaseService=r,this.router=o}canActivate(r,o){const i=this.supabaseService.isSignedIn(),s=this.supabaseService.getCurrentUser();return!(!i||!s)||(this.router.navigate(["/signin"],{queryParams:{returnUrl:o.url}}),!1)}};let t=e;return e.\u0275fac=function(o){return new(o||e)(B(Xi),B(Ct))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"}),t})()],children:[{path:"dashboard",component:NV},{path:"collection",component:XV},{path:"admin",component:(()=>{const e=class{constructor(r,o,i,s){this.supabaseService=r,this.router=o,this.http=i,this.cdr=s,this.currentUser=null,this.cardsJson="",this.rarityJson="",this.setsJson="",this.loadingCards=!1,this.loadingRarity=!1,this.loadingSets=!1,this.message="",this.messageType=""}ngOnInit(){this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser?"admin"===this.currentUser.role?this.loadAllJsonFiles():this.router.navigate(["/collection"]):this.router.navigate(["/signin"])}loadAllJsonFiles(){var r=this;return m(function*(){yield Promise.all([r.loadCardsJson(),r.loadRarityJson(),r.loadSetsJson()])})()}loadCardsJson(){var r=this;return m(function*(){r.loadingCards=!0,r.cdr.detectChanges();try{const o=yield r.http.get("/assets/cards/cards.json",{responseType:"text"}).toPromise();r.cardsJson=o||"",r.showMessage("Cards JSON loaded successfully","success")}catch(o){console.error("Error loading cards.json:",o),r.showMessage("Error loading cards.json","error"),r.cardsJson="[]"}finally{r.loadingCards=!1,r.cdr.detectChanges()}})()}loadRarityJson(){var r=this;return m(function*(){r.loadingRarity=!0,r.cdr.detectChanges();try{const o=yield r.http.get("/assets/cards/rarity.json",{responseType:"text"}).toPromise();r.rarityJson=o||"",r.showMessage("Rarity JSON loaded successfully","success")}catch(o){console.error("Error loading rarity.json:",o),r.showMessage("Error loading rarity.json","error"),r.rarityJson="{}"}finally{r.loadingRarity=!1,r.cdr.detectChanges()}})()}loadSetsJson(){var r=this;return m(function*(){r.loadingSets=!0,r.cdr.detectChanges();try{const o=yield r.http.get("/assets/cards/sets.json",{responseType:"text"}).toPromise();r.setsJson=o||"",r.showMessage("Sets JSON loaded successfully","success")}catch(o){console.error("Error loading sets.json:",o),r.showMessage("Error loading sets.json","error"),r.setsJson="[]"}finally{r.loadingSets=!1,r.cdr.detectChanges()}})()}downloadCardsJson(){this.downloadFile(this.cardsJson,"cards.json","application/json")}downloadRarityJson(){this.downloadFile(this.rarityJson,"rarity.json","application/json")}downloadSetsJson(){this.downloadFile(this.setsJson,"sets.json","application/json")}copyCardsToClipboard(){this.validateJson(this.cardsJson)?this.copyToClipboard(this.cardsJson,"Cards JSON copied to clipboard"):this.showMessage("Invalid JSON format for cards","error")}copyRarityToClipboard(){this.validateJson(this.rarityJson)?this.copyToClipboard(this.rarityJson,"Rarity JSON copied to clipboard"):this.showMessage("Invalid JSON format for rarity","error")}copySetsToClipboard(){this.validateJson(this.setsJson)?this.copyToClipboard(this.setsJson,"Sets JSON copied to clipboard"):this.showMessage("Invalid JSON format for sets","error")}validateJson(r){try{return JSON.parse(r),!0}catch{return!1}}copyToClipboard(r,o){navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(r).then(()=>{this.showMessage(o,"success")}).catch(()=>{this.fallbackCopyToClipboard(r,o)}):this.fallbackCopyToClipboard(r,o)}fallbackCopyToClipboard(r,o){const i=document.createElement("textarea");i.value=r,i.style.position="fixed",i.style.left="-999999px",i.style.top="-999999px",document.body.appendChild(i),i.focus(),i.select();try{document.execCommand("copy"),this.showMessage(o,"success")}catch{this.showMessage("Failed to copy to clipboard","error")}finally{document.body.removeChild(i)}}downloadFile(r,o,i){const s=new Blob([r],{type:i}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download=o,a.click(),URL.revokeObjectURL(a.href),this.showMessage(`${o} downloaded successfully`,"success")}showMessage(r,o){this.message=r,this.messageType=o,this.cdr.detectChanges(),setTimeout(()=>{this.message="",this.messageType="",this.cdr.detectChanges()},3e3)}formatJson(r){try{const o=JSON.parse(r),i=JSON.stringify(o,null,2);r===this.cardsJson?this.cardsJson=i:r===this.rarityJson?this.rarityJson=i:r===this.setsJson&&(this.setsJson=i),this.cdr.detectChanges(),this.showMessage("JSON formatted successfully","success")}catch{this.showMessage("Invalid JSON format","error")}}};let t=e;return e.\u0275fac=function(o){return new(o||e)(T(Xi),T(Ct),T(Eo),T(Ei))},e.\u0275cmp=Br({type:e,selectors:[["app-admin"]],decls:119,vars:15,consts:[[1,"admin-container"],[1,"user-info"],[1,"role-badge"],["class","message",3,"success","error",4,"ngIf"],[1,"json-management"],[1,"json-section"],[1,"json-header"],[1,"json-actions"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-info",3,"click"],[1,"json-editor"],["placeholder","Cards JSON content will appear here...",1,"json-textarea",3,"ngModel","readonly","ngModelChange"],["placeholder","Rarity JSON content will appear here...",1,"json-textarea",3,"ngModel","readonly","ngModelChange"],["placeholder","Sets JSON content will appear here...",1,"json-textarea",3,"ngModel","readonly","ngModelChange"],[1,"instructions"],[1,"workflow-steps"],[1,"workflow-note"],[1,"warning"],[1,"message"]],template:function(o,i){1&o&&(D(0,"div",0)(1,"h1"),M(2,"\u{1f527} Admin Panel"),C(),D(3,"div",1)(4,"span"),M(5),C(),D(6,"span",2),M(7),C()(),Ce(8,sU,2,5,"div",3),D(9,"div",4)(10,"h2"),M(11,"\u{1f4c1} JSON File Management"),C(),D(12,"div",5)(13,"div",6)(14,"h3"),M(15,"\u{1f0cf} Cards JSON"),C(),D(16,"div",7)(17,"button",8),re("click",function(){return i.loadCardsJson()}),M(18),C(),D(19,"button",9),re("click",function(){return i.downloadCardsJson()}),M(20," \u{1f4e5} Download "),C(),D(21,"button",10),re("click",function(){return i.formatJson(i.cardsJson)}),M(22," \u2728 Format "),C(),D(23,"button",11),re("click",function(){return i.copyCardsToClipboard()}),M(24," \ufffd Copy "),C()()(),D(25,"div",12)(26,"textarea",13),re("ngModelChange",function(a){return i.cardsJson=a}),M(27,"        "),C()()(),D(28,"div",5)(29,"div",6)(30,"h3"),M(31,"\u2b50 Rarity JSON"),C(),D(32,"div",7)(33,"button",8),re("click",function(){return i.loadRarityJson()}),M(34),C(),D(35,"button",9),re("click",function(){return i.downloadRarityJson()}),M(36," \u{1f4e5} Download "),C(),D(37,"button",10),re("click",function(){return i.formatJson(i.rarityJson)}),M(38," \u2728 Format "),C(),D(39,"button",11),re("click",function(){return i.copyRarityToClipboard()}),M(40," \ufffd Copy "),C()()(),D(41,"div",12)(42,"textarea",14),re("ngModelChange",function(a){return i.rarityJson=a}),M(43,"        "),C()()(),D(44,"div",5)(45,"div",6)(46,"h3"),M(47,"\u{1f4e6} Sets JSON"),C(),D(48,"div",7)(49,"button",8),re("click",function(){return i.loadSetsJson()}),M(50),C(),D(51,"button",9),re("click",function(){return i.downloadSetsJson()}),M(52," \u{1f4e5} Download "),C(),D(53,"button",10),re("click",function(){return i.formatJson(i.setsJson)}),M(54," \u2728 Format "),C(),D(55,"button",11),re("click",function(){return i.copySetsToClipboard()}),M(56," \ufffd Copy "),C()()(),D(57,"div",12)(58,"textarea",15),re("ngModelChange",function(a){return i.setsJson=a}),M(59,"        "),C()()()(),D(60,"div",16)(61,"h3"),M(62,"\u{1f4cb} GitHub Pages Deployment Workflow"),C(),D(63,"div",17)(64,"h4"),M(65,"\u{1f527} Editing JSON Files:"),C(),D(66,"ol")(67,"li")(68,"strong"),M(69,"\u{1f4e5} Download:"),C(),M(70," Download current JSON files to your computer"),C(),D(71,"li")(72,"strong"),M(73,"\u270f\ufe0f Edit:"),C(),M(74," Modify the JSON content in the text areas above"),C(),D(75,"li")(76,"strong"),M(77,"\u2728 Format:"),C(),M(78," Use Format button for proper JSON indentation"),C(),D(79,"li")(80,"strong"),M(81,"\u{1f4cb} Copy:"),C(),M(82," Copy formatted JSON to clipboard for easy pasting"),C()(),D(83,"h4"),M(84,"\u{1f680} Deploying Changes:"),C(),D(85,"ol")(86,"li")(87,"strong"),M(88,"\u{1f4be} Save Files:"),C(),M(89," Replace JSON files in your local "),D(90,"code"),M(91,"src/assets/cards/"),C(),M(92," folder"),C(),D(93,"li")(94,"strong"),M(95,"\u{1f4dd} Commit:"),C(),M(96," Add and commit changes to your Git repository"),C(),D(97,"li")(98,"strong"),M(99,"\u2b06\ufe0f Push:"),C(),M(100," Push changes to GitHub main/master branch"),C(),D(101,"li")(102,"strong"),M(103,"\u{1f504} Wait:"),C(),M(104," GitHub Pages will automatically rebuild and deploy"),C(),D(105,"li")(106,"strong"),M(107,"\u2705 Live:"),C(),M(108," Changes will be live in 1-5 minutes"),C()()(),D(109,"div",18),M(110," \u{1f4a1} "),D(111,"strong"),M(112,"Pro Tip:"),C(),M(113," Always validate your JSON before deploying to avoid breaking the application! "),C(),D(114,"div",19),M(115," \u26a0\ufe0f "),D(116,"strong"),M(117,"GitHub Pages Limitation:"),C(),M(118," JSON files cannot be updated directly from the web interface. Manual file replacement and deployment is required for changes to take effect. "),C()()()),2&o&&(L(5),Qe("Welcome, ",null==i.currentUser?null:i.currentUser.username,""),L(2),$n(null==i.currentUser?null:i.currentUser.role),L(1),q("ngIf",i.message),L(9),q("disabled",i.loadingCards),L(1),Qe(" ",i.loadingCards?"\u23f3 Loading...":"\u{1f504} Reload"," "),L(8),q("ngModel",i.cardsJson)("readonly",i.loadingCards),L(7),q("disabled",i.loadingRarity),L(1),Qe(" ",i.loadingRarity?"\u23f3 Loading...":"\u{1f504} Reload"," "),L(8),q("ngModel",i.rarityJson)("readonly",i.loadingRarity),L(7),q("disabled",i.loadingSets),L(1),Qe(" ",i.loadingSets?"\u23f3 Loading...":"\u{1f504} Reload"," "),L(8),q("ngModel",i.setsJson)("readonly",i.loadingSets))},dependencies:[Mi,xi,Xs,Oi],styles:[".admin-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:#000;min-height:100vh;color:#fff}.admin-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;background:linear-gradient(45deg,#ff6b6b,#4ecdc4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-size:2.5rem;font-weight:700}.user-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:15px;margin-bottom:30px;padding:15px;background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);border-radius:10px;border:1px solid #404040}.role-badge[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff6b6b,#ff8787);color:#fff;padding:5px 12px;border-radius:20px;font-size:12px;font-weight:700;text-transform:uppercase}.message[_ngcontent-%COMP%]{padding:12px 20px;margin-bottom:20px;border-radius:8px;text-align:center;font-weight:500}.message.success[_ngcontent-%COMP%]{background-color:#1a4d3a;border:1px solid #28a745;color:#28a745}.message.error[_ngcontent-%COMP%]{background-color:#4d1a1a;border:1px solid #dc3545;color:#dc3545}.json-management[_ngcontent-%COMP%]{margin-bottom:40px}.json-management[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center;color:#4ecdc4}.json-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);border-radius:12px;border:1px solid #404040;margin-bottom:30px;overflow:hidden}.json-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:linear-gradient(135deg,#333 0%,#2a2a2a 100%);border-bottom:1px solid #404040}.json-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.2rem}.json-actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;display:inline-flex;align-items:center;gap:5px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#0056b3);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#0056b3,#004085);transform:translateY(-1px)}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#6c757d,#5a6268);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#5a6268,#495057);transform:translateY(-1px)}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#1e7e34);color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#1e7e34,#155724);transform:translateY(-1px)}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(45deg,#17a2b8,#138496);color:#fff}.btn-info[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#138496,#117a8b);transform:translateY(-1px)}.json-editor[_ngcontent-%COMP%]{padding:0}.json-textarea[_ngcontent-%COMP%]{width:100%;min-height:300px;max-height:500px;padding:20px;background-color:#1a1a1a;color:#e0e0e0;border:none;font-family:Courier New,monospace;font-size:14px;line-height:1.5;resize:vertical;outline:none;box-sizing:border-box}.json-textarea[_ngcontent-%COMP%]:focus{background-color:#222}.json-textarea[_ngcontent-%COMP%]:readonly{background-color:#0f0f0f;color:#999}.instructions[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);border-radius:12px;border:1px solid #404040;padding:25px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;color:#4ecdc4}.instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:20px}.instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;line-height:1.5}.instructions[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.workflow-steps[_ngcontent-%COMP%]{margin-bottom:25px}.workflow-steps[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#4ecdc4;margin-bottom:15px;margin-top:20px}.workflow-steps[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin-bottom:20px;padding-left:20px}.workflow-steps[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;line-height:1.6}.workflow-steps[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 6px;border-radius:4px;color:#e0e0e0;font-family:Courier New,monospace;font-size:12px}.workflow-note[_ngcontent-%COMP%]{background-color:#1a4d3a;border:1px solid #28a745;color:#28a745;padding:15px;border-radius:8px;font-size:14px;margin-bottom:15px}.warning[_ngcontent-%COMP%]{background-color:#4d3319;border:1px solid #ffc107;color:#ffc107;padding:15px;border-radius:8px;font-size:14px}@media (max-width: 768px){.admin-container[_ngcontent-%COMP%]{padding:15px}.json-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.json-actions[_ngcontent-%COMP%]{justify-content:center}.btn[_ngcontent-%COMP%]{flex:1;justify-content:center}.admin-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}"],changeDetection:0}),t})()}]},{path:"**",redirectTo:"/signin"}];let lU=(()=>{const e=class{};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Rn({type:e}),e.\u0275inj=bn({imports:[np.forRoot(aU),np]}),t})(),cU=(()=>{const e=class{};let t=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Rn({type:e,bootstrap:[XL]}),e.\u0275inj=bn({imports:[GR,bk,MN,np,lU]}),t})();zR().bootstrapModule(cU).catch(t=>console.error(t))},397:(Dt,le,Y)=>{"use strict";Y.r(le),Y.d(le,{Headers:()=>I,Request:()=>A,Response:()=>U,default:()=>Ue,fetch:()=>Pe});var me=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const Pe=me.fetch,Ue=me.fetch.bind(me),I=me.Headers,A=me.Request,U=me.Response},369:(Dt,le,Y)=>{"use strict";var X=Y(156).default;Object.defineProperty(le,"__esModule",{value:!0});const me=Y(582),Pe=me.__importDefault(Y(397)),Ue=me.__importDefault(Y(839));le.default=class I{constructor(U){var G,Q;this.shouldThrowOnError=!1,this.method=U.method,this.url=U.url,this.headers=new Headers(U.headers),this.schema=U.schema,this.body=U.body,this.shouldThrowOnError=null!==(G=U.shouldThrowOnError)&&void 0!==G&&G,this.signal=U.signal,this.isMaybeSingle=null!==(Q=U.isMaybeSingle)&&void 0!==Q&&Q,this.fetch=U.fetch?U.fetch:typeof fetch>"u"?Pe.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(U,G){return this.headers=new Headers(this.headers),this.headers.set(U,G),this}then(U,G){var Q=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Oe=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var be=X(function*(Re){var et,Vt,Et,qe;let tt=null,bt=null,Yn=null,Jt=Re.status,yn=Re.statusText;if(Re.ok){if("HEAD"!==Q.method){const Vr=yield Re.text();""===Vr||(bt="text/csv"===Q.headers.get("Accept")||Q.headers.get("Accept")&&null!==(et=Q.headers.get("Accept"))&&void 0!==et&&et.includes("application/vnd.pgrst.plan+text")?Vr:JSON.parse(Vr))}const Kt=null===(Vt=Q.headers.get("Prefer"))||void 0===Vt?void 0:Vt.match(/count=(exact|planned|estimated)/),_n=null===(Et=Re.headers.get("content-range"))||void 0===Et?void 0:Et.split("/");Kt&&_n&&_n.length>1&&(Yn=parseInt(_n[1])),Q.isMaybeSingle&&"GET"===Q.method&&Array.isArray(bt)&&(bt.length>1?(tt={code:"PGRST116",details:`Results contain ${bt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},bt=null,Yn=null,Jt=406,yn="Not Acceptable"):bt=1===bt.length?bt[0]:null)}else{const Kt=yield Re.text();try{tt=JSON.parse(Kt),Array.isArray(tt)&&404===Re.status&&(bt=[],tt=null,Jt=200,yn="OK")}catch{404===Re.status&&""===Kt?(Jt=204,yn="No Content"):tt={message:Kt}}if(tt&&Q.isMaybeSingle&&!(null===(qe=tt?.details)||void 0===qe)&&qe.includes("0 rows")&&(tt=null,Jt=200,yn="OK"),tt&&Q.shouldThrowOnError)throw new Ue.default(tt)}return{error:tt,data:bt,count:Yn,status:Jt,statusText:yn}});return function(Re){return be.apply(this,arguments)}}());return this.shouldThrowOnError||(Oe=Oe.catch(be=>{var Re,et,Vt;return{error:{message:`${null!==(Re=be?.name)&&void 0!==Re?Re:"FetchError"}: ${be?.message}`,details:`${null!==(et=be?.stack)&&void 0!==et?et:""}`,hint:"",code:`${null!==(Vt=be?.code)&&void 0!==Vt?Vt:""}`},data:null,count:null,status:0,statusText:""}})),Oe.then(U,G)}returns(){return this}overrideTypes(){return this}}},851:(Dt,le,Y)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});const X=Y(582),me=X.__importDefault(Y(241)),Pe=X.__importDefault(Y(105));class Ue{constructor(A,{headers:U={},schema:G,fetch:Q}={}){this.url=A,this.headers=new Headers(U),this.schemaName=G,this.fetch=Q}from(A){const U=new URL(`${this.url}/${A}`);return new me.default(U,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(A){return new Ue(this.url,{headers:this.headers,schema:A,fetch:this.fetch})}rpc(A,U={},{head:G=!1,get:Q=!1,count:De}={}){var Oe;let be;const Re=new URL(`${this.url}/rpc/${A}`);let et;G||Q?(be=G?"HEAD":"GET",Object.entries(U).filter(([Et,qe])=>void 0!==qe).map(([Et,qe])=>[Et,Array.isArray(qe)?`{${qe.join(",")}}`:`${qe}`]).forEach(([Et,qe])=>{Re.searchParams.append(Et,qe)})):(be="POST",et=U);const Vt=new Headers(this.headers);return De&&Vt.set("Prefer",`count=${De}`),new Pe.default({method:be,url:Re,headers:Vt,schema:this.schemaName,body:et,fetch:null!==(Oe=this.fetch)&&void 0!==Oe?Oe:fetch})}}le.default=Ue},839:(Dt,le)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});class Y extends Error{constructor(me){super(me.message),this.name="PostgrestError",this.details=me.details,this.hint=me.hint,this.code=me.code}}le.default=Y},105:(Dt,le,Y)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});const me=Y(582).__importDefault(Y(594));le.default=class Pe extends me.default{eq(I,A){return this.url.searchParams.append(I,`eq.${A}`),this}neq(I,A){return this.url.searchParams.append(I,`neq.${A}`),this}gt(I,A){return this.url.searchParams.append(I,`gt.${A}`),this}gte(I,A){return this.url.searchParams.append(I,`gte.${A}`),this}lt(I,A){return this.url.searchParams.append(I,`lt.${A}`),this}lte(I,A){return this.url.searchParams.append(I,`lte.${A}`),this}like(I,A){return this.url.searchParams.append(I,`like.${A}`),this}likeAllOf(I,A){return this.url.searchParams.append(I,`like(all).{${A.join(",")}}`),this}likeAnyOf(I,A){return this.url.searchParams.append(I,`like(any).{${A.join(",")}}`),this}ilike(I,A){return this.url.searchParams.append(I,`ilike.${A}`),this}ilikeAllOf(I,A){return this.url.searchParams.append(I,`ilike(all).{${A.join(",")}}`),this}ilikeAnyOf(I,A){return this.url.searchParams.append(I,`ilike(any).{${A.join(",")}}`),this}is(I,A){return this.url.searchParams.append(I,`is.${A}`),this}in(I,A){const U=Array.from(new Set(A)).map(G=>"string"==typeof G&&new RegExp("[,()]").test(G)?`"${G}"`:`${G}`).join(",");return this.url.searchParams.append(I,`in.(${U})`),this}contains(I,A){return"string"==typeof A?this.url.searchParams.append(I,`cs.${A}`):Array.isArray(A)?this.url.searchParams.append(I,`cs.{${A.join(",")}}`):this.url.searchParams.append(I,`cs.${JSON.stringify(A)}`),this}containedBy(I,A){return"string"==typeof A?this.url.searchParams.append(I,`cd.${A}`):Array.isArray(A)?this.url.searchParams.append(I,`cd.{${A.join(",")}}`):this.url.searchParams.append(I,`cd.${JSON.stringify(A)}`),this}rangeGt(I,A){return this.url.searchParams.append(I,`sr.${A}`),this}rangeGte(I,A){return this.url.searchParams.append(I,`nxl.${A}`),this}rangeLt(I,A){return this.url.searchParams.append(I,`sl.${A}`),this}rangeLte(I,A){return this.url.searchParams.append(I,`nxr.${A}`),this}rangeAdjacent(I,A){return this.url.searchParams.append(I,`adj.${A}`),this}overlaps(I,A){return this.url.searchParams.append(I,"string"==typeof A?`ov.${A}`:`ov.{${A.join(",")}}`),this}textSearch(I,A,{config:U,type:G}={}){let Q="";return"plain"===G?Q="pl":"phrase"===G?Q="ph":"websearch"===G&&(Q="w"),this.url.searchParams.append(I,`${Q}fts${void 0===U?"":`(${U})`}.${A}`),this}match(I){return Object.entries(I).forEach(([A,U])=>{this.url.searchParams.append(A,`eq.${U}`)}),this}not(I,A,U){return this.url.searchParams.append(I,`not.${A}.${U}`),this}or(I,{foreignTable:A,referencedTable:U=A}={}){return this.url.searchParams.append(U?`${U}.or`:"or",`(${I})`),this}filter(I,A,U){return this.url.searchParams.append(I,`${A}.${U}`),this}}},241:(Dt,le,Y)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});const me=Y(582).__importDefault(Y(105));le.default=class Pe{constructor(I,{headers:A={},schema:U,fetch:G}){this.url=I,this.headers=new Headers(A),this.schema=U,this.fetch=G}select(I,A){const{head:U=!1,count:G}=A??{},Q=U?"HEAD":"GET";let De=!1;const Oe=(I??"*").split("").map(be=>/\s/.test(be)&&!De?"":('"'===be&&(De=!De),be)).join("");return this.url.searchParams.set("select",Oe),G&&this.headers.append("Prefer",`count=${G}`),new me.default({method:Q,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(I,{count:A,defaultToNull:U=!0}={}){var G;if(A&&this.headers.append("Prefer",`count=${A}`),U||this.headers.append("Prefer","missing=default"),Array.isArray(I)){const De=I.reduce((Oe,be)=>Oe.concat(Object.keys(be)),[]);if(De.length>0){const Oe=[...new Set(De)].map(be=>`"${be}"`);this.url.searchParams.set("columns",Oe.join(","))}}return new me.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(G=this.fetch)&&void 0!==G?G:fetch})}upsert(I,{onConflict:A,ignoreDuplicates:U=!1,count:G,defaultToNull:Q=!0}={}){var De;if(this.headers.append("Prefer",`resolution=${U?"ignore":"merge"}-duplicates`),void 0!==A&&this.url.searchParams.set("on_conflict",A),G&&this.headers.append("Prefer",`count=${G}`),Q||this.headers.append("Prefer","missing=default"),Array.isArray(I)){const be=I.reduce((Re,et)=>Re.concat(Object.keys(et)),[]);if(be.length>0){const Re=[...new Set(be)].map(et=>`"${et}"`);this.url.searchParams.set("columns",Re.join(","))}}return new me.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(De=this.fetch)&&void 0!==De?De:fetch})}update(I,{count:A}={}){var U;return A&&this.headers.append("Prefer",`count=${A}`),new me.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:I,fetch:null!==(U=this.fetch)&&void 0!==U?U:fetch})}delete({count:I}={}){var A;return I&&this.headers.append("Prefer",`count=${I}`),new me.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(A=this.fetch)&&void 0!==A?A:fetch})}}},594:(Dt,le,Y)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});const me=Y(582).__importDefault(Y(369));le.default=class Pe extends me.default{select(I){let A=!1;const U=(I??"*").split("").map(G=>/\s/.test(G)&&!A?"":('"'===G&&(A=!A),G)).join("");return this.url.searchParams.set("select",U),this.headers.append("Prefer","return=representation"),this}order(I,{ascending:A=!0,nullsFirst:U,foreignTable:G,referencedTable:Q=G}={}){const De=Q?`${Q}.order`:"order",Oe=this.url.searchParams.get(De);return this.url.searchParams.set(De,`${Oe?`${Oe},`:""}${I}.${A?"asc":"desc"}${void 0===U?"":U?".nullsfirst":".nullslast"}`),this}limit(I,{foreignTable:A,referencedTable:U=A}={}){return this.url.searchParams.set(typeof U>"u"?"limit":`${U}.limit`,`${I}`),this}range(I,A,{foreignTable:U,referencedTable:G=U}={}){const De=typeof G>"u"?"limit":`${G}.limit`;return this.url.searchParams.set(typeof G>"u"?"offset":`${G}.offset`,`${I}`),this.url.searchParams.set(De,""+(A-I+1)),this}abortSignal(I){return this.signal=I,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:I=!1,verbose:A=!1,settings:U=!1,buffers:G=!1,wal:Q=!1,format:De="text"}={}){var Oe;const be=[I?"analyze":null,A?"verbose":null,U?"settings":null,G?"buffers":null,Q?"wal":null].filter(Boolean).join("|"),Re=null!==(Oe=this.headers.get("Accept"))&&void 0!==Oe?Oe:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${De}; for="${Re}"; options=${be};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(I){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${I}`),this}}},358:(Dt,le,Y)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0}),le.PostgrestError=le.PostgrestBuilder=le.PostgrestTransformBuilder=le.PostgrestFilterBuilder=le.PostgrestQueryBuilder=le.PostgrestClient=void 0;const X=Y(582),me=X.__importDefault(Y(851));le.PostgrestClient=me.default;const Pe=X.__importDefault(Y(241));le.PostgrestQueryBuilder=Pe.default;const Ue=X.__importDefault(Y(105));le.PostgrestFilterBuilder=Ue.default;const I=X.__importDefault(Y(594));le.PostgrestTransformBuilder=I.default;const A=X.__importDefault(Y(369));le.PostgrestBuilder=A.default;const U=X.__importDefault(Y(839));le.PostgrestError=U.default,le.default={PostgrestClient:me.default,PostgrestQueryBuilder:Pe.default,PostgrestFilterBuilder:Ue.default,PostgrestTransformBuilder:I.default,PostgrestBuilder:A.default,PostgrestError:U.default}},156:Dt=>{function le(X,me,Pe,Ue,I,A,U){try{var G=X[A](U),Q=G.value}catch(De){return void Pe(De)}G.done?me(Q):Promise.resolve(Q).then(Ue,I)}Dt.exports=function Y(X){return function(){var me=this,Pe=arguments;return new Promise(function(Ue,I){var A=X.apply(me,Pe);function U(Q){le(A,Ue,I,U,G,"next",Q)}function G(Q){le(A,Ue,I,U,G,"throw",Q)}U(void 0)})}},Dt.exports.__esModule=!0,Dt.exports.default=Dt.exports},582:(Dt,le,Y)=>{"use strict";Y.r(le),Y.d(le,{__addDisposableResource:()=>$e,__assign:()=>Pe,__asyncDelegator:()=>es,__asyncGenerator:()=>yn,__asyncValues:()=>Kt,__await:()=>Jt,__awaiter:()=>be,__classPrivateFieldGet:()=>Qn,__classPrivateFieldIn:()=>ts,__classPrivateFieldSet:()=>Sa,__createBinding:()=>et,__decorate:()=>I,__disposeResources:()=>Ia,__esDecorate:()=>U,__exportStar:()=>Vt,__extends:()=>me,__generator:()=>Re,__importDefault:()=>Lo,__importStar:()=>Ea,__makeTemplateObject:()=>_n,__metadata:()=>Oe,__param:()=>A,__propKey:()=>Q,__read:()=>qe,__rest:()=>Ue,__rewriteRelativeImportExtension:()=>xa,__runInitializers:()=>G,__setFunctionName:()=>De,__spread:()=>tt,__spreadArray:()=>Yn,__spreadArrays:()=>bt,__values:()=>Et,default:()=>Qc});var X=function(v,E){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,w){S.__proto__=w}||function(S,w){for(var R in w)Object.prototype.hasOwnProperty.call(w,R)&&(S[R]=w[R])})(v,E)};function me(v,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function S(){this.constructor=v}X(v,E),v.prototype=null===E?Object.create(E):(S.prototype=E.prototype,new S)}var Pe=function(){return Pe=Object.assign||function(E){for(var S,w=1,R=arguments.length;w<R;w++)for(var V in S=arguments[w])Object.prototype.hasOwnProperty.call(S,V)&&(E[V]=S[V]);return E},Pe.apply(this,arguments)};function Ue(v,E){var S={};for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&E.indexOf(w)<0&&(S[w]=v[w]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(w=Object.getOwnPropertySymbols(v);R<w.length;R++)E.indexOf(w[R])<0&&Object.prototype.propertyIsEnumerable.call(v,w[R])&&(S[w[R]]=v[w[R]])}return S}function I(v,E,S,w){var O,R=arguments.length,V=R<3?E:null===w?w=Object.getOwnPropertyDescriptor(E,S):w;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)V=Reflect.decorate(v,E,S,w);else for(var F=v.length-1;F>=0;F--)(O=v[F])&&(V=(R<3?O(V):R>3?O(E,S,V):O(E,S))||V);return R>3&&V&&Object.defineProperty(E,S,V),V}function A(v,E){return function(S,w){E(S,w,v)}}function U(v,E,S,w,R,V){function O(Zn){if(void 0!==Zn&&"function"!=typeof Zn)throw new TypeError("Function expected");return Zn}for(var mt,F=w.kind,wt="getter"===F?"get":"setter"===F?"set":"value",ae=!E&&v?w.static?v:v.prototype:null,ze=E||(ae?Object.getOwnPropertyDescriptor(ae,w.name):{}),Ur=!1,Fe=S.length-1;Fe>=0;Fe--){var Pt={};for(var Yt in w)Pt[Yt]="access"===Yt?{}:w[Yt];for(var Yt in w.access)Pt.access[Yt]=w.access[Yt];Pt.addInitializer=function(Zn){if(Ur)throw new TypeError("Cannot add initializers after decoration has completed");V.push(O(Zn||null))};var vn=(0,S[Fe])("accessor"===F?{get:ze.get,set:ze.set}:ze[wt],Pt);if("accessor"===F){if(void 0===vn)continue;if(null===vn||"object"!=typeof vn)throw new TypeError("Object expected");(mt=O(vn.get))&&(ze.get=mt),(mt=O(vn.set))&&(ze.set=mt),(mt=O(vn.init))&&R.unshift(mt)}else(mt=O(vn))&&("field"===F?R.unshift(mt):ze[wt]=mt)}ae&&Object.defineProperty(ae,w.name,ze),Ur=!0}function G(v,E,S){for(var w=arguments.length>2,R=0;R<E.length;R++)S=w?E[R].call(v,S):E[R].call(v);return w?S:void 0}function Q(v){return"symbol"==typeof v?v:"".concat(v)}function De(v,E,S){return"symbol"==typeof E&&(E=E.description?"[".concat(E.description,"]"):""),Object.defineProperty(v,"name",{configurable:!0,value:S?"".concat(S," ",E):E})}function Oe(v,E){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,E)}function be(v,E,S,w){return new(S||(S=Promise))(function(V,O){function F(ze){try{ae(w.next(ze))}catch(mt){O(mt)}}function wt(ze){try{ae(w.throw(ze))}catch(mt){O(mt)}}function ae(ze){ze.done?V(ze.value):function R(V){return V instanceof S?V:new S(function(O){O(V)})}(ze.value).then(F,wt)}ae((w=w.apply(v,E||[])).next())})}function Re(v,E){var w,R,V,S={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]},O=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return O.next=F(0),O.throw=F(1),O.return=F(2),"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function F(ae){return function(ze){return function wt(ae){if(w)throw new TypeError("Generator is already executing.");for(;O&&(O=0,ae[0]&&(S=0)),S;)try{if(w=1,R&&(V=2&ae[0]?R.return:ae[0]?R.throw||((V=R.return)&&V.call(R),0):R.next)&&!(V=V.call(R,ae[1])).done)return V;switch(R=0,V&&(ae=[2&ae[0],V.value]),ae[0]){case 0:case 1:V=ae;break;case 4:return S.label++,{value:ae[1],done:!1};case 5:S.label++,R=ae[1],ae=[0];continue;case 7:ae=S.ops.pop(),S.trys.pop();continue;default:if(!(V=(V=S.trys).length>0&&V[V.length-1])&&(6===ae[0]||2===ae[0])){S=0;continue}if(3===ae[0]&&(!V||ae[1]>V[0]&&ae[1]<V[3])){S.label=ae[1];break}if(6===ae[0]&&S.label<V[1]){S.label=V[1],V=ae;break}if(V&&S.label<V[2]){S.label=V[2],S.ops.push(ae);break}V[2]&&S.ops.pop(),S.trys.pop();continue}ae=E.call(v,S)}catch(ze){ae=[6,ze],R=0}finally{w=V=0}if(5&ae[0])throw ae[1];return{value:ae[0]?ae[1]:void 0,done:!0}}([ae,ze])}}}var et=Object.create?function(v,E,S,w){void 0===w&&(w=S);var R=Object.getOwnPropertyDescriptor(E,S);(!R||("get"in R?!E.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return E[S]}}),Object.defineProperty(v,w,R)}:function(v,E,S,w){void 0===w&&(w=S),v[w]=E[S]};function Vt(v,E){for(var S in v)"default"!==S&&!Object.prototype.hasOwnProperty.call(E,S)&&et(E,v,S)}function Et(v){var E="function"==typeof Symbol&&Symbol.iterator,S=E&&v[E],w=0;if(S)return S.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&w>=v.length&&(v=void 0),{value:v&&v[w++],done:!v}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}function qe(v,E){var S="function"==typeof Symbol&&v[Symbol.iterator];if(!S)return v;var R,O,w=S.call(v),V=[];try{for(;(void 0===E||E-- >0)&&!(R=w.next()).done;)V.push(R.value)}catch(F){O={error:F}}finally{try{R&&!R.done&&(S=w.return)&&S.call(w)}finally{if(O)throw O.error}}return V}function tt(){for(var v=[],E=0;E<arguments.length;E++)v=v.concat(qe(arguments[E]));return v}function bt(){for(var v=0,E=0,S=arguments.length;E<S;E++)v+=arguments[E].length;var w=Array(v),R=0;for(E=0;E<S;E++)for(var V=arguments[E],O=0,F=V.length;O<F;O++,R++)w[R]=V[O];return w}function Yn(v,E,S){if(S||2===arguments.length)for(var V,w=0,R=E.length;w<R;w++)(V||!(w in E))&&(V||(V=Array.prototype.slice.call(E,0,w)),V[w]=E[w]);return v.concat(V||Array.prototype.slice.call(E))}function Jt(v){return this instanceof Jt?(this.v=v,this):new Jt(v)}function yn(v,E,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,w=S.apply(v,E||[]),V=[];return R=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),F("next"),F("throw"),F("return",function O(Fe){return function(Pt){return Promise.resolve(Pt).then(Fe,mt)}}),R[Symbol.asyncIterator]=function(){return this},R;function F(Fe,Pt){w[Fe]&&(R[Fe]=function(Yt){return new Promise(function(vn,Zn){V.push([Fe,Yt,vn,Zn])>1||wt(Fe,Yt)})},Pt&&(R[Fe]=Pt(R[Fe])))}function wt(Fe,Pt){try{!function ae(Fe){Fe.value instanceof Jt?Promise.resolve(Fe.value.v).then(ze,mt):Ur(V[0][2],Fe)}(w[Fe](Pt))}catch(Yt){Ur(V[0][3],Yt)}}function ze(Fe){wt("next",Fe)}function mt(Fe){wt("throw",Fe)}function Ur(Fe,Pt){Fe(Pt),V.shift(),V.length&&wt(V[0][0],V[0][1])}}function es(v){var E,S;return E={},w("next"),w("throw",function(R){throw R}),w("return"),E[Symbol.iterator]=function(){return this},E;function w(R,V){E[R]=v[R]?function(O){return(S=!S)?{value:Jt(v[R](O)),done:!1}:V?V(O):O}:V}}function Kt(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S,E=v[Symbol.asyncIterator];return E?E.call(v):(v=Et(v),S={},w("next"),w("throw"),w("return"),S[Symbol.asyncIterator]=function(){return this},S);function w(V){S[V]=v[V]&&function(O){return new Promise(function(F,wt){!function R(V,O,F,wt){Promise.resolve(wt).then(function(ae){V({value:ae,done:F})},O)}(F,wt,(O=v[V](O)).done,O.value)})}}}function _n(v,E){return Object.defineProperty?Object.defineProperty(v,"raw",{value:E}):v.raw=E,v}var Vr=Object.create?function(v,E){Object.defineProperty(v,"default",{enumerable:!0,value:E})}:function(v,E){v.default=E},lo=function(v){return(lo=Object.getOwnPropertyNames||function(E){var S=[];for(var w in E)Object.prototype.hasOwnProperty.call(E,w)&&(S[S.length]=w);return S})(v)};function Ea(v){if(v&&v.__esModule)return v;var E={};if(null!=v)for(var S=lo(v),w=0;w<S.length;w++)"default"!==S[w]&&et(E,v,S[w]);return Vr(E,v),E}function Lo(v){return v&&v.__esModule?v:{default:v}}function Qn(v,E,S,w){if("a"===S&&!w)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof E?v!==E||!w:!E.has(v))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===S?w:"a"===S?w.call(v):w?w.value:E.get(v)}function Sa(v,E,S,w,R){if("m"===w)throw new TypeError("Private method is not writable");if("a"===w&&!R)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof E?v!==E||!R:!E.has(v))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===w?R.call(v,S):R?R.value=S:E.set(v,S),S}function ts(v,E){if(null===E||"object"!=typeof E&&"function"!=typeof E)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof v?E===v:v.has(E)}function $e(v,E,S){if(null!=E){if("object"!=typeof E&&"function"!=typeof E)throw new TypeError("Object expected.");var w,R;if(S){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");w=E[Symbol.asyncDispose]}if(void 0===w){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");w=E[Symbol.dispose],S&&(R=w)}if("function"!=typeof w)throw new TypeError("Object not disposable.");R&&(w=function(){try{R.call(this)}catch(V){return Promise.reject(V)}}),v.stack.push({value:E,dispose:w,async:S})}else S&&v.stack.push({async:!0});return E}var Ma="function"==typeof SuppressedError?SuppressedError:function(v,E,S){var w=new Error(S);return w.name="SuppressedError",w.error=v,w.suppressed=E,w};function Ia(v){function E(V){v.error=v.hasError?new Ma(V,v.error,"An error was suppressed during disposal."):V,v.hasError=!0}var S,w=0;return function R(){for(;S=v.stack.pop();)try{if(!S.async&&1===w)return w=0,v.stack.push(S),Promise.resolve().then(R);if(S.dispose){var V=S.dispose.call(S.value);if(S.async)return w|=2,Promise.resolve(V).then(R,function(O){return E(O),R()})}else w|=1}catch(O){E(O)}if(1===w)return v.hasError?Promise.reject(v.error):Promise.resolve();if(v.hasError)throw v.error}()}function xa(v,E){return"string"==typeof v&&/^\.\.?\//.test(v)?v.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(S,w,R,V,O){return w?E?".jsx":".js":!R||V&&O?R+V+"."+O.toLowerCase()+"js":S}):v}const Qc={__extends:me,__assign:Pe,__rest:Ue,__decorate:I,__param:A,__esDecorate:U,__runInitializers:G,__propKey:Q,__setFunctionName:De,__metadata:Oe,__awaiter:be,__generator:Re,__createBinding:et,__exportStar:Vt,__values:Et,__read:qe,__spread:tt,__spreadArrays:bt,__spreadArray:Yn,__await:Jt,__asyncGenerator:yn,__asyncDelegator:es,__asyncValues:Kt,__makeTemplateObject:_n,__importStar:Ea,__importDefault:Lo,__classPrivateFieldGet:Qn,__classPrivateFieldSet:Sa,__classPrivateFieldIn:ts,__addDisposableResource:$e,__disposeResources:Ia,__rewriteRelativeImportExtension:xa}}},Dt=>{Dt(Dt.s=538)}]);