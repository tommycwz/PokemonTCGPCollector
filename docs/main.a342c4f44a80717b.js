(self.webpackChunkPokemonTCGPCollector=self.webpackChunkPokemonTCGPCollector||[]).push([[179],{716:(St,le,Z)=>{"use strict";function te(n){return"function"==typeof n}function me(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ke=me(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Be(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class M{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const i of t)i.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(te(r))try{r()}catch(i){e=i instanceof ke?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{K(i)}catch(s){e=e??[],s instanceof ke?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ke(e)}}add(e){var t;if(e&&e!==this)if(this.closed)K(e);else{if(e instanceof M){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Be(t,e)}remove(e){const{_finalizers:t}=this;t&&Be(t,e),e instanceof M&&e._removeParent(this)}}M.EMPTY=(()=>{const n=new M;return n.closed=!0,n})();const I=M.EMPTY;function U(n){return n instanceof M||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function K(n){te(n)?n():n.unsubscribe()}const X={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},De={setTimeout(n,e,...t){const{delegate:r}=De;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=De;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Re(n){De.setTimeout(()=>{const{onUnhandledError:e}=X;if(!e)throw n;e(n)})}function be(){}const Ne=Mt("C",void 0,void 0);function Mt(n,e,t){return{kind:n,value:e,error:t}}let Ke=null;function nt(n){if(X.useDeprecatedSynchronousErrorHandling){const e=!Ke;if(e&&(Ke={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ke;if(Ke=null,t)throw r}}else n()}class Zn extends M{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,U(e)&&e.add(this)):this.destination=Da}static create(e,t,r){return new Qt(e,t,r)}next(e){this.isStopped?ao(function $t(n){return Mt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ao(function tt(n){return Mt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ao(Ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Yt=Function.prototype.bind;function vn(n,e){return Yt.call(n,e)}class Ji{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Cn(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Cn(r)}else Cn(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cn(t)}}}class Qt extends Zn{constructor(e,t,r){let o;if(super(),te(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&X.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&vn(e.next,i),error:e.error&&vn(e.error,i),complete:e.complete&&vn(e.complete,i)}):o=e}this.destination=new Ji(o)}}function Cn(n){X.useDeprecatedSynchronousErrorHandling?function bt(n){X.useDeprecatedSynchronousErrorHandling&&Ke&&(Ke.errorThrown=!0,Ke.error=n)}(n):Re(n)}function ao(n,e){const{onStoppedNotification:t}=X;t&&De.setTimeout(()=>t(n,e))}const Da={closed:!0,next:be,error:function Vr(n){throw n},complete:be},Fo="function"==typeof Symbol&&Symbol.observable||"@@observable";function Xn(n){return n}function Yi(n){return 0===n.length?Xn:1===n.length?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}let He=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){const i=function xa(n){return n&&n instanceof Zn||function Ma(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}(n)&&U(n)}(t)?t:new Qt(t,r,o);return nt(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Sa(r))((o,i)=>{const s=new Qt({next:a=>{try{t(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Fo](){return this}pipe(...t){return Yi(t)(this)}toPromise(t){return new(t=Sa(t))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function Sa(n){var e;return null!==(e=n??X.Promise)&&void 0!==e?e:Promise}const Zc=me(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let v=(()=>{class n extends He{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new E(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Zc}next(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:o,observers:i}=this;return r||o?I:(this.currentObservers=null,i.push(t),new M(()=>{this.currentObservers=null,Be(i,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){const t=new He;return t.source=this,t}}return n.create=(e,t)=>new E(e,t),n})();class E extends v{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:I}}function S(n){return te(n?.lift)}function b(n){return e=>{if(S(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function R(n,e,t,r,o){return new V(n,e,t,r,o)}class V extends Zn{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function O(n,e){return b((t,r)=>{let o=0;t.subscribe(R(r,i=>{r.next(n.call(e,i,o++))}))})}var L=Z(582);const wt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ae(n){return te(n?.then)}function qe(n){return te(n[Fo])}function yt(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Ur(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Rt=function je(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Zt(n){return te(n?.[Rt])}function bn(n){return(0,L.__asyncGenerator)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:o}=yield(0,L.__await)(t.read());if(o)return yield(0,L.__await)(void 0);yield yield(0,L.__await)(r)}}finally{t.releaseLock()}})}function er(n){return te(n?.getReader)}function Fn(n){if(n instanceof He)return n;if(null!=n){if(qe(n))return function HD(n){return new He(e=>{const t=n[Fo]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(wt(n))return function zD(n){return new He(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ae(n))return function GD(n){return new He(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Re)})}(n);if(yt(n))return $p(n);if(Zt(n))return function qD(n){return new He(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(er(n))return function WD(n){return $p(bn(n))}(n)}throw Ur(n)}function $p(n){return new He(e=>{(function KD(n,e){var t,r,o,i;return(0,L.__awaiter)(this,void 0,void 0,function*(){try{for(t=(0,L.__asyncValues)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function _r(n,e,t,r=0,o=!1){const i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function xt(n,e,t=1/0){return te(e)?xt((r,o)=>O((i,s)=>e(r,i,o,s))(Fn(n(r,o))),t):("number"==typeof e&&(t=e),b((r,o)=>function JD(n,e,t,r,o,i,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{i&&e.next(g),c++;let m=!1;Fn(t(g,u++)).subscribe(R(e,_=>{o?.(_),i?f(_):e.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<r;){const _=l.shift();s?_r(e,s,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(R(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,n,t)))}function Lo(n=1/0){return xt(Xn,n)}const tr=new He(n=>n.complete());function Xc(n){return n[n.length-1]}function Bp(n){return te(Xc(n))?n.pop():void 0}function Qi(n){return function QD(n){return n&&te(n.schedule)}(Xc(n))?n.pop():void 0}function Hp(n,e=0){return b((t,r)=>{t.subscribe(R(r,o=>_r(r,n,()=>r.next(o),e),()=>_r(r,n,()=>r.complete(),e),o=>_r(r,n,()=>r.error(o),e)))})}function zp(n,e=0){return b((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Gp(n,e){if(!n)throw new Error("Iterable cannot be null");return new He(t=>{_r(t,e,()=>{const r=n[Symbol.asyncIterator]();_r(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function ct(n,e){return e?function oE(n,e){if(null!=n){if(qe(n))return function XD(n,e){return Fn(n).pipe(zp(e),Hp(e))}(n,e);if(wt(n))return function tE(n,e){return new He(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(ae(n))return function eE(n,e){return Fn(n).pipe(zp(e),Hp(e))}(n,e);if(yt(n))return Gp(n,e);if(Zt(n))return function nE(n,e){return new He(t=>{let r;return _r(t,e,()=>{r=n[Rt](),_r(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void t.error(s)}i?t.complete():t.next(o)},0,!0)}),()=>te(r?.return)&&r.return()})}(n,e);if(er(n))return function rE(n,e){return Gp(bn(n),e)}(n,e)}throw Ur(n)}(n,e):Fn(n)}function eu(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Qt({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function tu(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ve(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ve).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function nu(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const aE=Fe({__forward_ref__:Fe});function Ue(n){return n.__forward_ref__=Ue,n.toString=function(){return Ve(this())},n}function re(n){return ru(n)?n():n}function ru(n){return"function"==typeof n&&n.hasOwnProperty(aE)&&n.__forward_ref__===Ue}function ou(n){return n&&!!n.\u0275providers}const qp="https://g.co/ng/security#xss";class j extends Error{constructor(e,t){super(Ia(e,t)),this.code=e}}function Ia(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function ce(n){return"string"==typeof n?n:null==n?"":String(n)}function Ta(n,e){throw new j(-201,!1)}function wn(n,e){null==n&&function Te(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function J(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Oa(n){return Wp(n,Aa)||Wp(n,Jp)}function Wp(n,e){return n.hasOwnProperty(e)?n[e]:null}function Kp(n){return n&&(n.hasOwnProperty(iu)||n.hasOwnProperty(gE))?n[iu]:null}const Aa=Fe({\u0275prov:Fe}),iu=Fe({\u0275inj:Fe}),Jp=Fe({ngInjectableDef:Fe}),gE=Fe({ngInjectorDef:Fe});var oe=(()=>((oe=oe||{})[oe.Default=0]="Default",oe[oe.Host=1]="Host",oe[oe.Self=2]="Self",oe[oe.SkipSelf=4]="SkipSelf",oe[oe.Optional=8]="Optional",oe))();let su;function En(n){const e=su;return su=n,e}function Yp(n,e,t){const r=Oa(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&oe.Optional?null:void 0!==e?e:void Ta(Ve(n))}const ze=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zi={},au="__NG_DI_FLAG__",Pa="ngTempTokenPath",yE="ngTokenPath",_E=/\n/gm,vE="\u0275",Qp="__source";let Xi;function jo(n){const e=Xi;return Xi=n,e}function CE(n,e=oe.Default){if(void 0===Xi)throw new j(-203,!1);return null===Xi?Yp(n,void 0,e):Xi.get(n,e&oe.Optional?null:void 0,e)}function B(n,e=oe.Default){return(function mE(){return su}()||CE)(re(n),e)}function ye(n,e=oe.Default){return B(n,Ra(e))}function Ra(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function lu(n){const e=[];for(let t=0;t<n.length;t++){const r=re(n[t]);if(Array.isArray(r)){if(0===r.length)throw new j(900,!1);let o,i=oe.Default;for(let s=0;s<r.length;s++){const a=r[s],l=bE(a);"number"==typeof l?-1===l?o=a.token:i|=l:o=a}e.push(B(o,i))}else e.push(B(r))}return e}function es(n,e){return n[au]=e,n.prototype[au]=e,n}function bE(n){return n[au]}function vr(n){return{toString:n}.toString()}var nr=(()=>((nr=nr||{})[nr.OnPush=0]="OnPush",nr[nr.Default=1]="Default",nr))(),rr=(()=>{return(n=rr||(rr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",rr;var n})();const Cr={},xe=[],ka=Fe({\u0275cmp:Fe}),cu=Fe({\u0275dir:Fe}),uu=Fe({\u0275pipe:Fe}),Xp=Fe({\u0275mod:Fe}),br=Fe({\u0275fac:Fe}),ts=Fe({__NG_ELEMENT_ID__:Fe});let EE=0;function lo(n){return vr(()=>{const e=tg(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||rr.Emulated,id:"c"+EE++,styles:n.styles||xe,_:null,schemas:n.schemas||null,tView:null};ng(t);const r=n.dependencies;return t.directiveDefs=Na(r,!1),t.pipeDefs=Na(r,!0),t})}function ME(n){return Oe(n)||kt(n)}function xE(n){return null!==n}function Ln(n){return vr(()=>({type:n.type,bootstrap:n.bootstrap||xe,declarations:n.declarations||xe,imports:n.imports||xe,exports:n.exports||xe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function eg(n,e){if(null==n)return Cr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),t[o]=r,e&&(e[o]=i)}return t}function se(n){return vr(()=>{const e=tg(n);return ng(e),e})}function Oe(n){return n[ka]||null}function kt(n){return n[cu]||null}function en(n){return n[uu]||null}function ln(n,e){const t=n[Xp]||null;if(!t&&!0===e)throw new Error(`Type ${Ve(n)} does not have '\u0275mod' property.`);return t}function tg(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||xe,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:eg(n.inputs,e),outputs:eg(n.outputs)}}function ng(n){n.features?.forEach(e=>e(n))}function Na(n,e){if(!n)return null;const t=e?en:ME;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(xE)}const wr=0,H=1,pe=2,Ze=3,jn=4,co=5,Nt=6,Uo=7,rt=8,Fa=9,La=10,_e=11,du=12,ns=13,rg=14,$o=15,Ft=16,rs=17,Bo=18,or=19,os=20,og=21,Ge=22,hu=1,ig=2,ja=7,Va=8,Ho=9,Bt=10;function cn(n){return Array.isArray(n)&&"object"==typeof n[hu]}function Vn(n){return Array.isArray(n)&&!0===n[hu]}function fu(n){return 0!=(4&n.flags)}function is(n){return n.componentOffset>-1}function Ua(n){return 1==(1&n.flags)}function Un(n){return!!n.template}function TE(n){return 0!=(256&n[pe])}function uo(n,e){return n.hasOwnProperty(br)?n[br]:null}class PE{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Sn(){return lg}function lg(n){return n.type.prototype.ngOnChanges&&(n.setInput=kE),RE}function RE(){const n=ug(this),e=n?.current;if(e){const t=n.previous;if(t===Cr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function kE(n,e,t,r){const o=this.declaredInputs[t],i=ug(n)||function NE(n,e){return n[cg]=e}(n,{previous:Cr,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[o];s[o]=new PE(l&&l.currentValue,e,a===Cr),n[r]=e}Sn.ngInherit=!0;const cg="__ngSimpleChanges__";function ug(n){return n[cg]||null}const Mn=function(n,e,t){};function It(n){for(;Array.isArray(n);)n=n[wr];return n}function $a(n,e){return It(e[n])}function un(n,e){return It(e[n.index])}function fg(n,e){return n.data[e]}function tn(n,e){const t=e[n];return cn(t)?t:t[wr]}function Ba(n){return 64==(64&n[pe])}function Br(n,e){return null==e?null:n[e]}function pg(n){n[Bo]=0}function gu(n,e){n[co]+=e;let t=n,r=n[Ze];for(;null!==r&&(1===e&&1===t[co]||-1===e&&0===t[co]);)r[co]+=e,t=r,r=r[Ze]}const ue={lFrame:Eg(null),bindingsEnabled:!0};function mg(){return ue.bindingsEnabled}function k(){return ue.lFrame.lView}function Ee(){return ue.lFrame.tView}function Se(n){return ue.lFrame.contextLView=n,n[rt]}function Me(n){return ue.lFrame.contextLView=null,n}function Tt(){let n=yg();for(;null!==n&&64===n.type;)n=n.parent;return n}function yg(){return ue.lFrame.currentTNode}function ir(n,e){const t=ue.lFrame;t.currentTNode=n,t.isParent=e}function mu(){return ue.lFrame.isParent}function yu(){ue.lFrame.isParent=!1}function Go(){return ue.lFrame.bindingIndex++}function Er(n){const e=ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function KE(n,e){const t=ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,_u(e)}function _u(n){ue.lFrame.currentDirectiveIndex=n}function bg(){return ue.lFrame.currentQueryIndex}function Cu(n){ue.lFrame.currentQueryIndex=n}function YE(n){const e=n[H];return 2===e.type?e.declTNode:1===e.type?n[Nt]:null}function wg(n,e,t){if(t&oe.SkipSelf){let o=e,i=n;for(;!(o=o.parent,null!==o||t&oe.Host||(o=YE(i),null===o||(i=i[$o],10&o.type))););if(null===o)return!1;e=o,n=i}const r=ue.lFrame=Dg();return r.currentTNode=e,r.lView=n,!0}function bu(n){const e=Dg(),t=n[H];ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Dg(){const n=ue.lFrame,e=null===n?null:n.child;return null===e?Eg(n):e}function Eg(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Sg(){const n=ue.lFrame;return ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Mg=Sg;function wu(){const n=Sg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function zt(){return ue.lFrame.selectedIndex}function ho(n){ue.lFrame.selectedIndex=n}function Je(){const n=ue.lFrame;return fg(n.tView,n.selectedIndex)}function Ha(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(n.contentHooks??(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks??(n.contentHooks=[])).push(t,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks??(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks??(n.viewHooks=[])).push(t,c),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks??(n.destroyHooks=[])).push(t,u)}}function za(n,e,t){xg(n,e,3,t)}function Ga(n,e,t,r){(3&n[pe])===t&&xg(n,e,t,r)}function Du(n,e){let t=n[pe];(3&t)===e&&(t&=2047,t+=1,n[pe]=t)}function xg(n,e,t,r){const i=r??-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Bo]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Bo]+=65536),(a<i||-1==i)&&(iS(n,t,e,l),n[Bo]=(4294901760&n[Bo])+l+2),l++}function iS(n,e,t,r){const o=t[r]<0,i=t[r+1],a=n[o?-t[r]:t[r]];if(o){if(n[pe]>>11<n[Bo]>>16&&(3&n[pe])===e){n[pe]+=2048,Mn(4,a,i);try{i.call(a)}finally{Mn(5,a,i)}}}else{Mn(4,a,i);try{i.call(a)}finally{Mn(5,a,i)}}}const qo=-1;class as{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Su(n,e,t){let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{const i=o,s=t[++r];Tg(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function Ig(n){return 3===n||4===n||6===n}function Tg(n){return 64===n.charCodeAt(0)}function ls(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?t=o:0===t||Og(n,t,o,null,-1===t||2===t?e[++r]:null)}}return n}function Og(n,e,t,r,o){let i=0,s=n.length;if(-1===e)s=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==o&&(n[i+1]=o));if(r===n[i+1])return void(n[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),null!==r&&n.splice(i++,0,r),null!==o&&n.splice(i++,0,o)}function Ag(n){return n!==qo}function qa(n){return 32767&n}function Wa(n,e){let t=function cS(n){return n>>16}(n),r=e;for(;t>0;)r=r[$o],t--;return r}let Mu=!0;function Ka(n){const e=Mu;return Mu=n,e}const Pg=255,Rg=5;let uS=0;const sr={};function Ja(n,e){const t=kg(n,e);if(-1!==t)return t;const r=e[H];r.firstCreatePass&&(n.injectorIndex=e.length,xu(r.data,n),xu(e,null),xu(r.blueprint,null));const o=Iu(n,e),i=n.injectorIndex;if(Ag(o)){const s=qa(o),a=Wa(o,e),l=a[H].data;for(let c=0;c<8;c++)e[i+c]=a[s+c]|l[s+c]}return e[i+8]=o,i}function xu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function kg(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Iu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;null!==o;){if(r=$g(o),null===r)return qo;if(t++,o=o[$o],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return qo}function Tu(n,e,t){!function dS(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ts)&&(r=t[ts]),null==r&&(r=t[ts]=uS++);const o=r&Pg;e.data[n+(o>>Rg)]|=1<<o}(n,e,t)}function Ng(n,e,t){if(t&oe.Optional||void 0!==n)return n;Ta()}function Fg(n,e,t,r){if(t&oe.Optional&&void 0===r&&(r=null),!(t&(oe.Self|oe.Host))){const o=n[Fa],i=En(void 0);try{return o?o.get(e,r,t&oe.Optional):Yp(e,r,t&oe.Optional)}finally{En(i)}}return Ng(r,0,t)}function Lg(n,e,t,r=oe.Default,o){if(null!==n){if(1024&e[pe]){const s=function mS(n,e,t,r,o){let i=n,s=e;for(;null!==i&&null!==s&&1024&s[pe]&&!(256&s[pe]);){const a=jg(i,s,t,r|oe.Self,sr);if(a!==sr)return a;let l=i.parent;if(!l){const c=s[og];if(c){const u=c.get(t,sr,r);if(u!==sr)return u}l=$g(s),s=s[$o]}i=l}return o}(n,e,t,r,sr);if(s!==sr)return s}const i=jg(n,e,t,r,sr);if(i!==sr)return i}return Fg(e,t,r,o)}function jg(n,e,t,r,o){const i=function pS(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ts)?n[ts]:void 0;return"number"==typeof e?e>=0?e&Pg:gS:e}(t);if("function"==typeof i){if(!wg(e,n,r))return r&oe.Host?Ng(o,0,r):Fg(e,t,r,o);try{const s=i(r);if(null!=s||r&oe.Optional)return s;Ta()}finally{Mg()}}else if("number"==typeof i){let s=null,a=kg(n,e),l=qo,c=r&oe.Host?e[Ft][Nt]:null;for((-1===a||r&oe.SkipSelf)&&(l=-1===a?Iu(n,e):e[a+8],l!==qo&&Ug(r,!1)?(s=e[H],a=qa(l),e=Wa(l,e)):a=-1);-1!==a;){const u=e[H];if(Vg(i,a,u.data)){const d=fS(a,e,t,s,r,c);if(d!==sr)return d}l=e[a+8],l!==qo&&Ug(r,e[H].data[a+8]===c)&&Vg(i,a,e)?(s=u,a=qa(l),e=Wa(l,e)):a=-1}}return o}function fS(n,e,t,r,o,i){const s=e[H],a=s.data[n+8],u=Ya(a,s,t,null==r?is(a)&&Mu:r!=s&&0!=(3&a.type),o&oe.Host&&i===a);return null!==u?fo(e,s,u,a):sr}function Ya(n,e,t,r,o){const i=n.providerIndexes,s=e.data,a=1048575&i,l=n.directiveStart,u=i>>20,h=o?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(o){const f=s[l];if(f&&Un(f)&&f.type===t)return l}return null}function fo(n,e,t,r){let o=n[t];const i=e.data;if(function sS(n){return n instanceof as}(o)){const s=o;s.resolving&&function lE(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new j(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Ie(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ce(n)}(i[t]));const a=Ka(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?En(s.injectImpl):null;wg(n,r,oe.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&function oS(n,e,t){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=lg(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s)}o&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,o),i&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,i),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,i))}(t,i[t],e)}finally{null!==l&&En(l),Ka(a),s.resolving=!1,Mg()}}return o}function Vg(n,e,t){return!!(t[e+(n>>Rg)]&1<<n)}function Ug(n,e){return!(n&oe.Self||n&oe.Host&&e)}class Wo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Lg(this._tNode,this._lView,e,Ra(r),t)}}function gS(){return new Wo(Tt(),k())}function Ot(n){return vr(()=>{const e=n.prototype.constructor,t=e[br]||Ou(e),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const i=o[br]||Ou(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Ou(n){return ru(n)?()=>{const e=Ou(re(n));return e&&e()}:uo(n)}function $g(n){const e=n[H],t=e.type;return 2===t?e.declTNode:1===t?n[Nt]:null}const Jo="__parameters__";function Qo(n,e,t){return vr(()=>{const r=function Au(n){return function(...t){if(n){const r=n(...t);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Jo)?l[Jo]:Object.defineProperty(l,Jo,{value:[]})[Jo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}class Y{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=J({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function po(n,e){n.forEach(t=>Array.isArray(t)?po(t,e):e(t))}function Hg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Za(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function dn(n,e,t){let r=Zo(n,e);return r>=0?n[1|r]=t:(r=~r,function CS(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(1===o)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;)n[o]=n[o-2],o--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Ru(n,e){const t=Zo(n,e);if(t>=0)return n[1|t]}function Zo(n,e){return function zg(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){const i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}(n,e,1)}const hs=es(Qo("Optional"),8),fs=es(Qo("SkipSelf"),4);var nn=(()=>((nn=nn||{})[nn.Important=1]="Important",nn[nn.DashCase=2]="DashCase",nn))();const Vu=new Map;let BS=0;const $u="__ngContext__";function Lt(n,e){cn(e)?(n[$u]=e[os],function zS(n){Vu.set(n[os],n)}(e)):n[$u]=e}let Bu;function Hu(n,e){return Bu(n,e)}function ys(n){const e=n[Ze];return Vn(e)?e[Ze]:e}function zu(n){return um(n[ns])}function Gu(n){return um(n[jn])}function um(n){for(;null!==n&&!Vn(n);)n=n[jn];return n}function ei(n,e,t,r,o){if(null!=r){let i,s=!1;Vn(r)?i=r:cn(r)&&(s=!0,r=r[wr]);const a=It(r);0===n&&null!==t?null==o?mm(e,t,a):go(e,t,a,o||null,!0):1===n&&null!==t?go(e,t,a,o||null,!0):2===n?function Zu(n,e,t){const r=nl(n,e);r&&function uM(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=i&&function fM(n,e,t,r,o){const i=t[ja];i!==It(t)&&ei(e,n,r,i,o);for(let a=Bt;a<t.length;a++){const l=t[a];_s(l[H],l,n,e,r,i)}}(e,n,i,t,o)}}function Wu(n,e,t){return n.createElement(e,t)}function hm(n,e){const t=n[Ho],r=t.indexOf(e),o=e[Ze];512&e[pe]&&(e[pe]&=-513,gu(o,-1)),t.splice(r,1)}function Ku(n,e){if(n.length<=Bt)return;const t=Bt+e,r=n[t];if(r){const o=r[rs];null!==o&&o!==n&&hm(o,r),e>0&&(n[t-1][jn]=r[jn]);const i=Za(n,Bt+e);!function nM(n,e){_s(n,e,e[_e],2,null,null),e[wr]=null,e[Nt]=null}(r[H],r);const s=i[or];null!==s&&s.detachView(i[H]),r[Ze]=null,r[jn]=null,r[pe]&=-65}return r}function fm(n,e){if(!(128&e[pe])){const t=e[_e];t.destroyNode&&_s(n,e,t,3,null,null),function iM(n){let e=n[ns];if(!e)return Ju(n[H],n);for(;e;){let t=null;if(cn(e))t=e[ns];else{const r=e[Bt];r&&(t=r)}if(!t){for(;e&&!e[jn]&&e!==n;)cn(e)&&Ju(e[H],e),e=e[Ze];null===e&&(e=n),cn(e)&&Ju(e[H],e),t=e&&e[jn]}e=t}}(e)}}function Ju(n,e){if(!(128&e[pe])){e[pe]&=-65,e[pe]|=128,function cM(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const o=e[t[r]];if(!(o instanceof as)){const i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],l=i[s+1];Mn(4,a,l);try{l.call(a)}finally{Mn(5,a,l)}}else{Mn(4,o,i);try{i.call(o)}finally{Mn(5,o,i)}}}}}(n,e),function lM(n,e){const t=n.cleanup,r=e[Uo];let o=-1;if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const s=t[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=t[i+1]];t[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();e[Uo]=null}}(n,e),1===e[H].type&&e[_e].destroy();const t=e[rs];if(null!==t&&Vn(e[Ze])){t!==e[Ze]&&hm(t,e);const r=e[or];null!==r&&r.detachView(n)}!function GS(n){Vu.delete(n[os])}(e)}}function pm(n,e,t){return function gm(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[wr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=n.data[r.directiveStart+o];if(i===rr.None||i===rr.Emulated)return null}return un(r,t)}}(n,e.parent,t)}function go(n,e,t,r,o){n.insertBefore(e,t,r,o)}function mm(n,e,t){n.appendChild(e,t)}function ym(n,e,t,r,o){null!==r?go(n,e,t,r,o):mm(n,e,t)}function nl(n,e){return n.parentNode(e)}let Yu,td,sl,Cm=function vm(n,e,t){return 40&n.type?un(n,t):null};function rl(n,e,t,r){const o=pm(n,r,e),i=e[_e],a=function _m(n,e,t){return Cm(n,e,t)}(r.parent||e[Nt],r,e);if(null!=o)if(Array.isArray(t))for(let l=0;l<t.length;l++)ym(i,o,t[l],a,!1);else ym(i,o,t,a,!1);void 0!==Yu&&Yu(i,r,e,t,o)}function ol(n,e){if(null!==e){const t=e.type;if(3&t)return un(e,n);if(4&t)return Qu(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return ol(n,r);{const o=n[e.index];return Vn(o)?Qu(-1,o):It(o)}}if(32&t)return Hu(e,n)()||It(n[e.index]);{const r=wm(n,e);return null!==r?Array.isArray(r)?r[0]:ol(ys(n[Ft]),r):ol(n,e.next)}}return null}function wm(n,e){return null!==e?n[Ft][Nt].projection[e.projection]:null}function Qu(n,e){const t=Bt+n+1;if(t<e.length){const r=e[t],o=r[H].firstChild;if(null!==o)return ol(r,o)}return e[ja]}function Xu(n,e,t,r,o,i,s){for(;null!=t;){const a=r[t.index],l=t.type;if(s&&0===e&&(a&&Lt(It(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)Xu(n,e,t.child,r,o,i,!1),ei(e,n,o,a,i);else if(32&l){const c=Hu(t,r);let u;for(;u=c();)ei(e,n,o,u,i);ei(e,n,o,a,i)}else 16&l?Dm(n,e,r,t,o,i):ei(e,n,o,a,i);t=s?t.projectionNext:t.next}}function _s(n,e,t,r,o,i){Xu(t,r,n.firstChild,e,o,i,!1)}function Dm(n,e,t,r,o,i){const s=t[Ft],l=s[Nt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ei(e,n,o,l[c],i);else Xu(n,e,l,s[Ze],o,i,!0)}function Em(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Sm(n,e,t){const{mergedAttrs:r,classes:o,styles:i}=t;null!==r&&Su(n,e,r),null!==o&&Em(n,e,o),null!==i&&function gM(n,e,t){n.setAttribute(e,"style",t)}(n,e,i)}function Tm(n){return function nd(){if(void 0===sl&&(sl=null,ze.trustedTypes))try{sl=ze.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sl}()?.createScriptURL(n)||n}class Om{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qp})`}}function Hr(n){return n instanceof Om?n.changingThisBreaksApplicationSecurity:n}function vs(n,e){const t=function SM(n){return n instanceof Om&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${qp})`)}return t===e}const TM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ut=(()=>((ut=ut||{})[ut.NONE=0]="NONE",ut[ut.HTML=1]="HTML",ut[ut.STYLE=2]="STYLE",ut[ut.SCRIPT=3]="SCRIPT",ut[ut.URL=4]="URL",ut[ut.RESOURCE_URL=5]="RESOURCE_URL",ut))();function ad(n){const e=bs();return e?e.sanitize(ut.URL,n)||"":vs(n,"URL")?Hr(n):function rd(n){return(n=String(n)).match(TM)?n:"unsafe:"+n}(ce(n))}function Lm(n){const e=bs();if(e)return Tm(e.sanitize(ut.RESOURCE_URL,n)||"");if(vs(n,"ResourceURL"))return Tm(Hr(n));throw new j(904,!1)}function bs(){const n=k();return n&&n[du]}const ll=new Y("ENVIRONMENT_INITIALIZER"),Vm=new Y("INJECTOR",-1),Um=new Y("INJECTOR_DEF_TYPES");class $m{get(e,t=Zi){if(t===Zi){const r=new Error(`NullInjectorError: No provider for ${Ve(e)}!`);throw r.name="NullInjectorError",r}return t}}function HM(...n){return{\u0275providers:Bm(0,n),\u0275fromNgModule:!0}}function Bm(n,...e){const t=[],r=new Set;let o;return po(e,i=>{const s=i;ld(s,t,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&Hm(o,t),t}function Hm(n,e){for(let t=0;t<n.length;t++){const{providers:o}=n[t];cd(o,i=>{e.push(i)})}}function ld(n,e,t,r){if(!(n=re(n)))return!1;let o=null,i=Kp(n);const s=!i&&Oe(n);if(i||s){if(s&&!s.standalone)return!1;o=n}else{const l=n.ngModule;if(i=Kp(l),!i)return!1;o=l}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)ld(c,e,t,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{po(i.imports,u=>{ld(u,e,t,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&Hm(c,e)}if(!a){const c=uo(o)||(()=>new o);e.push({provide:o,useFactory:c,deps:xe},{provide:Um,useValue:o,multi:!0},{provide:ll,useValue:()=>B(o),multi:!0})}const l=i.providers;null==l||a||cd(l,u=>{e.push(u)})}}return o!==n&&void 0!==n.providers}function cd(n,e){for(let t of n)ou(t)&&(t=t.\u0275providers),Array.isArray(t)?cd(t,e):e(t)}const zM=Fe({provide:String,useValue:Fe});function ud(n){return null!==n&&"object"==typeof n&&zM in n}function mo(n){return"function"==typeof n}const dd=new Y("Set Injector scope."),cl={},qM={};let hd;function ul(){return void 0===hd&&(hd=new $m),hd}class ar{}class qm extends ar{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pd(e,s=>this.processProvider(s)),this.records.set(Vm,ni(void 0,this)),o.has("environment")&&this.records.set(ar,ni(void 0,this));const i=this.records.get(dd);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Um.multi,xe,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=jo(this),r=En(void 0);try{return e()}finally{jo(t),En(r)}}get(e,t=Zi,r=oe.Default){this.assertNotDestroyed(),r=Ra(r);const o=jo(this),i=En(void 0);try{if(!(r&oe.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function QM(n){return"function"==typeof n||"object"==typeof n&&n instanceof Y}(e)&&Oa(e);a=l&&this.injectableDefInScope(l)?ni(fd(e),cl):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&oe.Self?ul():this.parent).get(e,t=r&oe.Optional&&t===Zi?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Pa]=s[Pa]||[]).unshift(Ve(e)),o)throw s;return function wE(n,e,t,r){const o=n[Pa];throw e[Qp]&&o.unshift(e[Qp]),n.message=function DE(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==vE?n.slice(2):n;let o=Ve(e);if(Array.isArray(e))o=e.map(Ve).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Ve(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(_E,"\n  ")}`}("\n"+n.message,o,t,r),n[yE]=o,n[Pa]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{En(i),jo(o)}}resolveInjectorInitializers(){const e=jo(this),t=En(void 0);try{const r=this.get(ll.multi,xe,oe.Self);for(const o of r)o()}finally{jo(e),En(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ve(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){let t=mo(e=re(e))?e:re(e&&e.provide);const r=function KM(n){return ud(n)?ni(void 0,n.useValue):ni(Wm(n),cl)}(e);if(mo(e)||!0!==e.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=ni(void 0,cl,!0),o.factory=()=>lu(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===cl&&(t.value=qM,t.value=t.factory()),"object"==typeof t.value&&t.value&&function YM(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=re(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function fd(n){const e=Oa(n),t=null!==e?e.factory:uo(n);if(null!==t)return t;if(n instanceof Y)throw new j(204,!1);if(n instanceof Function)return function WM(n){const e=n.length;if(e>0)throw function ds(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new j(204,!1);const t=function pE(n){return n&&(n[Aa]||n[Jp])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new j(204,!1)}function Wm(n,e,t){let r;if(mo(n)){const o=re(n);return uo(o)||fd(o)}if(ud(n))r=()=>re(n.useValue);else if(function Gm(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...lu(n.deps||[]));else if(function zm(n){return!(!n||!n.useExisting)}(n))r=()=>B(re(n.useExisting));else{const o=re(n&&(n.useClass||n.provide));if(!function JM(n){return!!n.deps}(n))return uo(o)||fd(o);r=()=>new o(...lu(n.deps))}return r}function ni(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function pd(n,e){for(const t of n)Array.isArray(t)?pd(t,e):t&&ou(t)?pd(t.\u0275providers,e):e(t)}class ZM{}class Km{}class ex{resolveComponentFactory(e){throw function XM(n){const e=Error(`No component factory found for ${Ve(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let ws=(()=>{class n{}return n.NULL=new ex,n})();function tx(){return ri(Tt(),k())}function ri(n,e){return new hn(un(n,e))}let hn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=tx,n})();function nx(n){return n instanceof hn?n.nativeElement:n}class Ym{}let Mr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function rx(){const n=k(),t=tn(Tt().index,n);return(cn(t)?t:n)[_e]}(),n})(),ox=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>null}),n})();class Ds{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ix=new Ds("15.2.10"),gd={},md="ngOriginalError";function yd(n){return n[md]}class oi{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&yd(e);for(;t&&yd(t);)t=yd(t);return t||null}}function xr(n){return n instanceof Function?n():n}function Zm(n,e,t){let r=n.length;for(;;){const o=n.indexOf(e,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}const Xm="ng-template";function mx(n,e,t){let r=0,o=!0;for(;r<n.length;){let i=n[r++];if("string"==typeof i&&o){const s=n[r++];if(t&&"class"===i&&-1!==Zm(s.toLowerCase(),e,0))return!0}else{if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function ey(n){return 4===n.type&&n.value!==Xm}function yx(n,e,t){return e===(4!==n.type||t?n.value:Xm)}function _x(n,e,t){let r=4;const o=n.attrs||[],i=function bx(n){for(let e=0;e<n.length;e++)if(Ig(n[e]))return e;return n.length}(o);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!yx(n,l,t)||""===l&&1===e.length){if($n(r))return!1;s=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!mx(n.attrs,c,t)){if($n(r))return!1;s=!0}continue}const d=vx(8&r?"class":l,o,ey(n),t);if(-1===d){if($n(r))return!1;s=!0;continue}if(""!==c){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==Zm(f,c,0)||2&r&&c!==h){if($n(r))return!1;s=!0}}}}else{if(!s&&!$n(r)&&!$n(l))return!1;if(s&&$n(l))continue;s=!1,r=l|1&r}}return $n(r)||s}function $n(n){return 0==(1&n)}function vx(n,e,t,r){if(null===e)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){const s=e[o];if(s===n)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function wx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ty(n,e,t=!1){for(let r=0;r<e.length;r++)if(_x(n,e[r],t))return!0;return!1}function ny(n,e){return n?":not("+e.trim()+")":e}function Ex(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!$n(s)&&(e+=ny(i,o),o=""),r=s,i=i||!$n(r);t++}return""!==o&&(e+=ny(i,o)),e}const de={};function F(n){ry(Ee(),k(),zt()+n,!1)}function ry(n,e,t,r){if(!r)if(3==(3&e[pe])){const i=n.preOrderCheckHooks;null!==i&&za(e,i,t)}else{const i=n.preOrderHooks;null!==i&&Ga(e,i,0,t)}ho(t)}function ay(n,e=null,t=null,r){const o=ly(n,e,t,r);return o.resolveInjectorInitializers(),o}function ly(n,e=null,t=null,r,o=new Set){const i=[t||xe,HM(n)];return r=r||("object"==typeof n?void 0:Ve(n)),new qm(i,e||ul(),r||null,o)}let lr=(()=>{class n{static create(t,r){if(Array.isArray(t))return ay({name:""},r,t,"");{const o=t.name??"";return ay({name:o},t.parent,t.providers,o)}}}return n.THROW_IF_NOT_FOUND=Zi,n.NULL=new $m,n.\u0275prov=J({token:n,providedIn:"any",factory:()=>B(Vm)}),n.__NG_ELEMENT_ID__=-1,n})();function T(n,e=oe.Default){const t=k();return null===t?B(n,e):Lg(Tt(),t,re(n),e)}function my(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r+1];if(-1!==i){const s=n.data[i];Cu(t[r]),s.contentQueries(2,e[i],i)}}}function hl(n,e,t,r,o,i,s,a,l,c,u){const d=e.blueprint.slice();return d[wr]=o,d[pe]=76|r,(null!==u||n&&1024&n[pe])&&(d[pe]|=1024),pg(d),d[Ze]=d[$o]=n,d[rt]=t,d[La]=s||n&&n[La],d[_e]=a||n&&n[_e],d[du]=l||n&&n[du]||null,d[Fa]=c||n&&n[Fa]||null,d[Nt]=i,d[os]=function HS(){return BS++}(),d[og]=u,d[Ft]=2==e.type?n[Ft]:d,d}function ai(n,e,t,r,o){let i=n.data[e];if(null===i)i=function wd(n,e,t,r,o){const i=yg(),s=mu(),l=n.data[e]=function Yx(n,e,t,r,o,i){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,t,e,r,o);return null===n.firstChild&&(n.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(n,e,t,r,o),function WE(){return ue.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=t,i.value=r,i.attrs=o;const s=function ss(){const n=ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return ir(i,!0),i}function Es(n,e,t,r){if(0===t)return-1;const o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function Dd(n,e,t){bu(e);try{const r=n.viewQuery;null!==r&&Pd(1,r,t);const o=n.template;null!==o&&yy(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&my(n,e),n.staticViewQueries&&Pd(2,n.viewQuery,t);const i=n.components;null!==i&&function Wx(n,e){for(let t=0;t<e.length;t++)mI(n,e[t])}(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,wu()}}function fl(n,e,t,r){const o=e[pe];if(128!=(128&o)){bu(e);try{pg(e),function vg(n){return ue.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&yy(n,e,t,2,r);const s=3==(3&o);if(s){const c=n.preOrderCheckHooks;null!==c&&za(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Ga(e,c,0,null),Du(e,0)}if(function pI(n){for(let e=zu(n);null!==e;e=Gu(e)){if(!e[ig])continue;const t=e[Ho];for(let r=0;r<t.length;r++){const o=t[r];512&o[pe]||gu(o[Ze],1),o[pe]|=512}}}(e),function fI(n){for(let e=zu(n);null!==e;e=Gu(e))for(let t=Bt;t<e.length;t++){const r=e[t],o=r[H];Ba(r)&&fl(o,r,o.template,r[rt])}}(e),null!==n.contentQueries&&my(n,e),s){const c=n.contentCheckHooks;null!==c&&za(e,c)}else{const c=n.contentHooks;null!==c&&Ga(e,c,1),Du(e,1)}!function Gx(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)ho(~o);else{const i=o,s=t[++r],a=t[++r];KE(s,i),a(2,e[i])}}}finally{ho(-1)}}(n,e);const a=n.components;null!==a&&function qx(n,e){for(let t=0;t<e.length;t++)gI(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Pd(2,l,r),s){const c=n.viewCheckHooks;null!==c&&za(e,c)}else{const c=n.viewHooks;null!==c&&Ga(e,c,2),Du(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[pe]&=-41,512&e[pe]&&(e[pe]&=-513,gu(e[Ze],-1))}finally{wu()}}}function yy(n,e,t,r,o){const i=zt(),s=2&r;try{ho(-1),s&&e.length>Ge&&ry(n,e,Ge,!1),Mn(s?2:0,o),t(r,o)}finally{ho(i),Mn(s?3:1,o)}}function Ed(n,e,t){if(fu(e)){const o=e.directiveEnd;for(let i=e.directiveStart;i<o;i++){const s=n.data[i];s.contentQueries&&s.contentQueries(1,t[i],i)}}}function Sd(n,e,t){mg()&&(function rI(n,e,t,r){const o=t.directiveStart,i=t.directiveEnd;is(t)&&function uI(n,e,t){const r=un(e,n),o=_y(t),i=n[La],s=pl(n,hl(n,o,null,t.onPush?32:16,r,e,i,i.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||Ja(t,e),Lt(r,e);const s=t.initialInputs;for(let a=o;a<i;a++){const l=n.data[a],c=fo(e,n,a,t);Lt(c,e),null!==s&&dI(0,a-o,c,l,0,s),Un(l)&&(tn(t.index,e)[rt]=fo(e,n,a,t))}}(n,e,t,un(t,e)),64==(64&t.flags)&&Dy(n,e,t))}function Md(n,e,t=un){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?t(e,n):n[s];n[o++]=a}}}function _y(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=xd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function xd(n,e,t,r,o,i,s,a,l,c){const u=Ge+r,d=u+o,h=function Kx(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:de);return t}(u,d),f="function"==typeof c?c():c;return h[H]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function vy(n,e,t,r){const o=Sy(e);null===t?o.push(r):(o.push(t),n.firstCreatePass&&My(n).push(r,o.length-1))}function Cy(n,e,t,r){for(let o in n)if(n.hasOwnProperty(o)){t=null===t?{}:t;const i=n[o];null===r?by(t,e,o,i):r.hasOwnProperty(o)&&by(t,e,r[o],i)}return t}function by(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Id(n,e,t,r){if(mg()){const o=null===r?null:{"":-1},i=function iI(n,e){const t=n.directiveRegistry;let r=null,o=null;if(t)for(let i=0;i<t.length;i++){const s=t[i];if(ty(e,s.selectors,!1))if(r||(r=[]),Un(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Td(n,e,a.length)}else r.unshift(s),Td(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(n,t);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&wy(n,e,t,s,o,a),o&&function sI(n,e,t){if(e){const r=n.localNames=[];for(let o=0;o<e.length;o+=2){const i=t[e[o+1]];if(null==i)throw new j(-301,!1);r.push(e[o],i)}}}(t,r,o)}t.mergedAttrs=ls(t.mergedAttrs,t.attrs)}function wy(n,e,t,r,o,i){for(let c=0;c<r.length;c++)Tu(Ja(t,e),n,r[c].type);!function lI(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Es(n,e,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=ls(t.mergedAttrs,u.hostAttrs),cI(n,t,e,l,u),aI(l,u,o),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function Qx(n,e,t){const o=e.directiveEnd,i=n.data,s=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<o;u++){const d=i[u],h=t?t.get(d):null,p=h?h.outputs:null;l=Cy(d.inputs,u,l,h?h.inputs:null),c=Cy(d.outputs,u,c,p);const g=null===l||null===s||ey(e)?null:hI(l,u,s);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,i)}function Dy(n,e,t){const r=t.directiveStart,o=t.directiveEnd,i=t.index,s=function JE(){return ue.lFrame.currentDirectiveIndex}();try{ho(i);for(let a=r;a<o;a++){const l=n.data[a],c=e[a];_u(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&oI(l,c)}}finally{ho(-1),_u(s)}}function oI(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Td(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function aI(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Un(e)&&(t[""]=n)}}function cI(n,e,t,r,o){n.data[r]=o;const i=o.factory||(o.factory=uo(o.type)),s=new as(i,Un(o),T);n.blueprint[r]=s,t[r]=s,function tI(n,e,t,r,o){const i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function nI(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,i)}}(n,e,r,Es(n,t,o.hostVars,de),o)}function cr(n,e,t,r,o,i){const s=un(n,e);!function Od(n,e,t,r,o,i,s){if(null==i)n.removeAttribute(e,o,t);else{const a=null==s?ce(i):s(i,r||"",o);n.setAttribute(e,o,a,t)}}(e[_e],s,i,n.value,t,r,o)}function dI(n,e,t,r,o,i){const s=i[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function hI(n,e,t){let r=null,o=0;for(;o<t.length;){const i=t[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const s=n[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Ey(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function gI(n,e){const t=tn(e,n);if(Ba(t)){const r=t[H];48&t[pe]?fl(r,t,r.template,t[rt]):t[co]>0&&Ad(t)}}function Ad(n){for(let r=zu(n);null!==r;r=Gu(r))for(let o=Bt;o<r.length;o++){const i=r[o];if(Ba(i))if(512&i[pe]){const s=i[H];fl(s,i,s.template,i[rt])}else i[co]>0&&Ad(i)}const t=n[H].components;if(null!==t)for(let r=0;r<t.length;r++){const o=tn(t[r],n);Ba(o)&&o[co]>0&&Ad(o)}}function mI(n,e){const t=tn(e,n),r=t[H];(function yI(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Dd(r,t,t[rt])}function pl(n,e){return n[ns]?n[rg][jn]=e:n[ns]=e,n[rg]=e,e}function gl(n){for(;n;){n[pe]|=32;const e=ys(n);if(TE(n)&&!e)return n;n=e}return null}function ml(n,e,t,r=!0){const o=e[La];o.begin&&o.begin();try{fl(n,e,n.template,t)}catch(s){throw r&&Iy(e,s),s}finally{o.end&&o.end()}}function Pd(n,e,t){Cu(0),e(n,t)}function Sy(n){return n[Uo]||(n[Uo]=[])}function My(n){return n.cleanup||(n.cleanup=[])}function Iy(n,e){const t=n[Fa],r=t?t.get(oi,null):null;r&&r.handleError(e)}function Rd(n,e,t,r,o){for(let i=0;i<t.length;){const s=t[i++],a=t[i++],l=e[s],c=n.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function Ir(n,e,t){const r=$a(e,n);!function dm(n,e,t){n.setValue(e,t)}(n[_e],r,t)}function yl(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=nu(o,a):2==i&&(r=nu(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function _l(n,e,t,r,o=!1){for(;null!==t;){const i=e[t.index];if(null!==i&&r.push(It(i)),Vn(i))for(let a=Bt;a<i.length;a++){const l=i[a],c=l[H].firstChild;null!==c&&_l(l[H],l,c,r)}const s=t.type;if(8&s)_l(n,e,t.child,r);else if(32&s){const a=Hu(t,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=wm(e,t);if(Array.isArray(a))r.push(...a);else{const l=ys(e[Ft]);_l(l[H],l,a,r,!0)}}t=o?t.projectionNext:t.next}return r}class Ss{get rootNodes(){const e=this._lView,t=e[H];return _l(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rt]}set context(e){this._lView[rt]=e}get destroyed(){return 128==(128&this._lView[pe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ze];if(Vn(e)){const t=e[Va],r=t?t.indexOf(this):-1;r>-1&&(Ku(e,r),Za(t,r))}this._attachedToViewContainer=!1}fm(this._lView[H],this._lView)}onDestroy(e){vy(this._lView[H],this._lView,null,e)}markForCheck(){gl(this._cdRefInjectingView||this._lView)}detach(){this._lView[pe]&=-65}reattach(){this._lView[pe]|=64}detectChanges(){ml(this._lView[H],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oM(n,e){_s(n,e,e[_e],2,null,null)}(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e}}class _I extends Ss{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;ml(e[H],e,e[rt],!1)}checkNoChanges(){}get context(){return null}}class Ty extends ws{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Oe(e);return new Ms(t,this.ngModule)}}function Oy(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class CI{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ra(r);const o=this.injector.get(e,gd,r);return o!==gd||t===gd?o:this.parentInjector.get(e,t,r)}}class Ms extends Km{get inputs(){return Oy(this.componentDef.inputs)}get outputs(){return Oy(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Sx(n){return n.map(Ex).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=(o=o||this.ngModule)instanceof ar?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new CI(e,i):e,a=s.get(Ym,null);if(null===a)throw new j(407,!1);const l=s.get(ox,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function Jx(n,e,t){return n.selectRootElement(e,t===rr.ShadowDom)}(c,r,this.componentDef.encapsulation):Wu(c,u,function vI(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=xd(0,null,null,1,0,null,null,null,null,null),p=hl(null,f,null,h,null,null,a,c,l,s,null);let g,m;bu(p);try{const _=this.componentDef;let x,C=null;_.findHostDirectiveDefs?(x=[],C=new Map,_.findHostDirectiveDefs(_,x,C),x.push(_)):x=[_];const A=function wI(n,e){const t=n[H],r=Ge;return n[r]=e,ai(t,r,2,"#host",null)}(p,d),N=function DI(n,e,t,r,o,i,s,a){const l=o[H];!function EI(n,e,t,r){for(const o of n)e.mergedAttrs=ls(e.mergedAttrs,o.hostAttrs);null!==e.mergedAttrs&&(yl(e,e.mergedAttrs,!0),null!==t&&Sm(r,t,e))}(r,n,e,s);const c=i.createRenderer(e,t),u=hl(o,_y(t),null,t.onPush?32:16,o[n.index],n,i,c,a||null,null,null);return l.firstCreatePass&&Td(l,n,r.length-1),pl(o,u),o[n.index]=u}(A,d,_,x,p,a,c);m=fg(f,Ge),d&&function MI(n,e,t,r){if(r)Su(n,t,["ng-version",ix.full]);else{const{attrs:o,classes:i}=function Mx(n){const e=[],t=[];let r=1,o=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===o?""!==i&&e.push(i,n[++r]):8===o&&t.push(i);else{if(!$n(o))break;o=i}r++}return{attrs:e,classes:t}}(e.selectors[0]);o&&Su(n,t,o),i&&i.length>0&&Em(n,t,i.join(" "))}}(c,_,d,r),void 0!==t&&function xI(n,e,t){const r=n.projection=[];for(let o=0;o<e.length;o++){const i=t[o];r.push(null!=i?Array.from(i):null)}}(m,this.ngContentSelectors,t),g=function SI(n,e,t,r,o,i){const s=Tt(),a=o[H],l=un(s,o);wy(a,o,s,t,null,r);for(let u=0;u<t.length;u++)Lt(fo(o,a,s.directiveStart+u,s),o);Dy(a,o,s),l&&Lt(l,o);const c=fo(o,a,s.directiveStart+s.componentOffset,s);if(n[rt]=o[rt]=c,null!==i)for(const u of i)u(c,e);return Ed(a,s,n),c}(N,_,x,C,p,[II]),Dd(f,p,null)}finally{wu()}return new bI(this.componentType,g,ri(m,p),p,m)}}class bI extends ZM{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new _I(o),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[e])){const i=this._rootLView;Rd(i[H],i,o,e,t),gl(tn(this._tNode.index,i))}}get injector(){return new Wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function II(){const n=Tt();Ha(k()[H],n)}function Pe(n){let e=function Ay(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let o;if(Un(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);o=e.\u0275dir}if(o){if(t){r.push(o);const s=n;s.inputs=kd(n.inputs),s.declaredInputs=kd(n.declaredInputs),s.outputs=kd(n.outputs);const a=o.hostBindings;a&&PI(n,a);const l=o.viewQuery,c=o.contentQueries;if(l&&OI(n,l),c&&AI(n,c),tu(n.inputs,o.inputs),tu(n.declaredInputs,o.declaredInputs),tu(n.outputs,o.outputs),Un(o)&&o.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(n),a===Pe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function TI(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const o=n[r];o.hostVars=e+=o.hostVars,o.hostAttrs=ls(o.hostAttrs,t=ls(t,o.hostAttrs))}}(r)}function kd(n){return n===Cr?{}:n===xe?[]:n}function OI(n,e){const t=n.viewQuery;n.viewQuery=t?(r,o)=>{e(r,o),t(r,o)}:e}function AI(n,e){const t=n.contentQueries;n.contentQueries=t?(r,o,i)=>{e(r,o,i),t(r,o,i)}:e}function PI(n,e){const t=n.hostBindings;n.hostBindings=t?(r,o)=>{e(r,o),t(r,o)}:e}function vl(n){return!!Nd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Nd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function jt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Vt(n,e,t,r){const o=k();return jt(o,Go(),e)&&(Ee(),cr(Je(),o,n,e,t,r)),Vt}function ui(n,e,t,r,o,i){const a=function yo(n,e,t,r){const o=jt(n,e,t);return jt(n,e+1,r)||o}(n,function Dr(){return ue.lFrame.bindingIndex}(),t,o);return Er(2),a?e+ce(t)+r+ce(o)+i:de}function Ce(n,e,t,r,o,i,s,a){const l=k(),c=Ee(),u=n+Ge,d=c.firstCreatePass?function BI(n,e,t,r,o,i,s,a,l){const c=e.consts,u=ai(e,n,4,s||null,Br(c,a));Id(e,t,u,Br(c,l)),Ha(e,u);const d=u.tView=xd(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,o,i,s):c.data[u];ir(d,!1);const h=l[_e].createComment("");rl(c,l,h,d),Lt(h,l),pl(l,l[u]=Ey(h,l,h,d)),Ua(d)&&Sd(c,l,d),null!=s&&Md(l,d,a)}function Fd(n){return function zo(n,e){return n[e]}(function qE(){return ue.lFrame.contextLView}(),Ge+n)}function z(n,e,t){const r=k();return jt(r,Go(),e)&&function fn(n,e,t,r,o,i,s,a){const l=un(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(Rd(n,t,u,r,o),is(e)&&function Xx(n,e){const t=tn(e,n);16&t[pe]||(t[pe]|=32)}(t,e.index)):3&e.type&&(r=function Zx(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=s?s(o,e.value||"",r):o,i.setProperty(l,r,o))}(Ee(),Je(),r,n,e,r[_e],t,!1),z}function Ld(n,e,t,r,o){const s=o?"class":"style";Rd(n,t,e.inputs[s],s,r)}function w(n,e,t,r){const o=k(),i=Ee(),s=Ge+n,a=o[_e],l=i.firstCreatePass?function zI(n,e,t,r,o,i){const s=e.consts,l=ai(e,n,2,r,Br(s,o));return Id(e,t,l,Br(s,i)),null!==l.attrs&&yl(l,l.attrs,!1),null!==l.mergedAttrs&&yl(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,i,o,e,t,r):i.data[s],c=o[s]=Wu(a,e,function rS(){return ue.lFrame.currentNamespace}()),u=Ua(l);return ir(l,!0),Sm(a,c,l),32!=(32&l.flags)&&rl(i,o,c,l),0===function $E(){return ue.lFrame.elementDepthCount}()&&Lt(c,o),function BE(){ue.lFrame.elementDepthCount++}(),u&&(Sd(i,o,l),Ed(i,l,o)),null!==r&&Md(o,l),w}function D(){let n=Tt();mu()?yu():(n=n.parent,ir(n,!1));const e=n;!function HE(){ue.lFrame.elementDepthCount--}();const t=Ee();return t.firstCreatePass&&(Ha(t,n),fu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function aS(n){return 0!=(8&n.flags)}(e)&&Ld(t,e,k(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function lS(n){return 0!=(16&n.flags)}(e)&&Ld(t,e,k(),e.stylesWithoutHost,!1),D}function Tn(n,e,t,r){return w(n,e,t,r),D(),Tn}function _o(n,e,t){const r=k(),o=Ee(),i=n+Ge,s=o.firstCreatePass?function GI(n,e,t,r,o){const i=e.consts,s=Br(i,r),a=ai(e,n,8,"ng-container",s);return null!==s&&yl(a,s,!0),Id(e,t,a,Br(i,o)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,o,r,e,t):o.data[i];ir(s,!0);const a=r[i]=r[_e].createComment("");return rl(o,r,a,s),Lt(a,r),Ua(s)&&(Sd(o,r,s),Ed(o,s,r)),null!=t&&Md(r,s),_o}function vo(){let n=Tt();const e=Ee();return mu()?yu():(n=n.parent,ir(n,!1)),e.firstCreatePass&&(Ha(e,n),fu(n)&&e.queries.elementEnd(n)),vo}function on(){return k()}function Is(n){return!!n&&"function"==typeof n.then}const jd=function Gy(n){return!!n&&"function"==typeof n.subscribe};function G(n,e,t,r){const o=k(),i=Ee(),s=Tt();return function Wy(n,e,t,r,o,i,s){const a=Ua(r),c=n.firstCreatePass&&My(n),u=e[rt],d=Sy(e);let h=!0;if(3&r.type||s){const g=un(r,e),m=s?s(g):g,_=d.length,x=s?A=>s(It(A[r.index])):r.index;let C=null;if(!s&&a&&(C=function qI(n,e,t,r){const o=n.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===t&&o[i+1]===r){const a=e[Uo],l=o[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(n,e,o,r.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=i,C.__ngLastListenerFn__=i,h=!1;else{i=Jy(r,e,u,i,!1);const A=t.listen(m,o,i);d.push(i,A),c&&c.push(o,x,_,_+1)}}else i=Jy(r,e,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const N=e[p[m]][p[m+1]].subscribe(i),W=d.length;d.push(i,N),c&&c.push(o,r.index,W,-(W+1))}}}(i,o,o[_e],s,n,e,r),G}function Ky(n,e,t,r){try{return Mn(6,e,t),!1!==t(r)}catch(o){return Iy(n,o),!1}finally{Mn(7,e,t)}}function Jy(n,e,t,r,o){return function i(s){if(s===Function)return r;gl(n.componentOffset>-1?tn(n.index,e):e);let l=Ky(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)l=Ky(e,t,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function q(n=1){return function QE(n){return(ue.lFrame.contextLView=function ZE(n,e){for(;n>0;)e=e[$o],n--;return e}(n,ue.lFrame.contextLView))[rt]}(n)}function bl(n,e){return n<<17|e<<2}function zr(n){return n>>17&32767}function Ud(n){return 2|n}function Co(n){return(131068&n)>>2}function $d(n,e){return-131069&n|e<<2}function Bd(n){return 1|n}function i_(n,e,t,r,o){const i=n[t+1],s=null===e;let a=r?zr(i):Co(i),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];tT(n[a],e)&&(l=!0,n[a+1]=r?Bd(u):Ud(u)),a=r?zr(u):Co(u)}l&&(n[t+1]=r?Ud(i):Bd(i))}function tT(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Zo(n,e)>=0}function Ts(n,e,t){return Bn(n,e,t,!1),Ts}function At(n,e){return Bn(n,e,null,!0),At}function Bn(n,e,t,r){const o=k(),i=Ee(),s=Er(2);i.firstUpdatePass&&function f_(n,e,t,r){const o=n.data;if(null===o[t+1]){const i=o[zt()],s=function h_(n,e){return e>=n.expandoStartIndex}(n,t);(function y_(n,e){return 0!=(n.flags&(e?8:16))})(i,r)&&null===e&&!s&&(e=!1),e=function uT(n,e,t,r){const o=function vu(n){const e=ue.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let i=r?e.residualClasses:e.residualStyles;if(null===o)0===(r?e.classBindings:e.styleBindings)&&(t=Os(t=Hd(null,n,e,t,r),e.attrs,r),i=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==o)if(t=Hd(o,n,e,t,r),null===i){let l=function dT(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Co(r))return n[zr(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=Hd(null,n,e,l[1],r),l=Os(l,e.attrs,r),function hT(n,e,t,r){n[zr(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else i=function fT(n,e,t){let r;const o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++)r=Os(r,n[i].hostAttrs,t);return Os(r,e.attrs,t)}(n,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),t}(o,i,e,r),function XI(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=zr(s),l=Co(s);n[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||Zo(t,u)>0)&&(c=!0)):u=t,o)if(0!==l){const h=zr(n[a+1]);n[r+1]=bl(h,a),0!==h&&(n[h+1]=$d(n[h+1],r)),n[a+1]=function QI(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=bl(a,0),0!==a&&(n[a+1]=$d(n[a+1],r)),a=r;else n[r+1]=bl(l,0),0===a?a=r:n[l+1]=$d(n[l+1],r),l=r;c&&(n[r+1]=Ud(n[r+1])),i_(n,u,r,!0),i_(n,u,r,!1),function eT(n,e,t,r,o){const i=o?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof e&&Zo(i,e)>=0&&(t[r+1]=Bd(t[r+1]))}(e,u,n,r,i),s=bl(a,l),i?e.classBindings=s:e.styleBindings=s}(o,i,e,t,s,r)}}(i,n,s,r),e!==de&&jt(o,s,e)&&function g_(n,e,t,r,o,i,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function ZI(n){return 1==(1&n)}(c)?m_(l,e,t,o,Co(c),s):void 0;wl(u)||(wl(i)||function YI(n){return 2==(2&n)}(c)&&(i=m_(l,null,t,o,a,s)),function pM(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=-1===r.indexOf("-")?void 0:nn.DashCase;null==o?n.removeStyle(t,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=nn.Important),n.setStyle(t,r,o,i))}}(r,s,$a(zt(),t),o,i))}(i,i.data[zt()],o,o[_e],n,o[s+1]=function yT(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ve(Hr(n)))),n}(e,t),r,s)}function Hd(n,e,t,r,o){let i=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(i=e[a],r=Os(r,i.hostAttrs,o),i!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Os(n,e,t){const r=t?1:2;let o=-1;if(null!==e)for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?o=s:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),dn(n,s,!!t||e[++i]))}return void 0===n?null:n}function m_(n,e,t,r,o,i){const s=null===e;let a;for(;o>0;){const l=n[o],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[o+1];h===de&&(h=d?xe:void 0);let f=d?Ru(h,r):u===r?h:void 0;if(c&&!wl(f)&&(f=Ru(l,r)),wl(f)&&(a=f,s))return a;const p=n[o+1];o=s?zr(p):Co(p)}if(null!==e){let l=i?e.residualClasses:e.residualStyles;null!=l&&(a=Ru(l,r))}return a}function wl(n){return void 0!==n}function P(n,e=""){const t=k(),r=Ee(),o=n+Ge,i=r.firstCreatePass?ai(r,o,1,e,null):r.data[o],s=t[o]=function qu(n,e){return n.createText(e)}(t[_e],e);rl(r,t,s,i),ir(i,!1)}function On(n){return Dt("",n,""),On}function Dt(n,e,t){const r=k(),o=function ci(n,e,t,r){return jt(n,Go(),t)?e+ce(t)+r:de}(r,n,e,t);return o!==de&&Ir(r,zt(),o),Dt}function Tr(n,e,t,r,o){const i=k(),s=ui(i,n,e,t,r,o);return s!==de&&Ir(i,zt(),s),Tr}const vi="en-US";let j_=vi;function qd(n,e,t,r,o){if(n=re(n),Array.isArray(n))for(let i=0;i<n.length;i++)qd(n[i],e,t,r,o);else{const i=Ee(),s=k();let a=mo(n)?n:re(n.provide),l=Wm(n);const c=Tt(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(mo(n)||!n.multi){const f=new as(l,o,T),p=Kd(a,e,o?u:u+h,d);-1===p?(Tu(Ja(c,s),i,a),Wd(i,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=Kd(a,e,u+h,d),p=Kd(a,e,u,u+h),m=p>=0&&t[p];if(o&&!m||!o&&!(f>=0&&t[f])){Tu(Ja(c,s),i,a);const _=function NO(n,e,t,r,o){const i=new as(n,t,T);return i.multi=[],i.index=e,i.componentProviders=0,cv(i,o,r&&!t),i}(o?kO:RO,t.length,o,r,l);!o&&m&&(t[p].providerFactory=_),Wd(i,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),t.push(_),s.push(_)}else Wd(i,n,f>-1?f:p,cv(t[o?p:f],l,!o&&r));!o&&r&&m&&t[p].componentProviders++}}}function Wd(n,e,t,r){const o=mo(e),i=function GM(n){return!!n.useClass}(e);if(o||i){const l=(i?re(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function cv(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Kd(n,e,t,r){for(let o=t;o<r;o++)if(e[o]===n)return o;return-1}function RO(n,e,t,r){return Jd(this.multi,[])}function kO(n,e,t,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=fo(t,t[H],this.providerFactory.index,r);i=a.slice(0,s),Jd(o,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],Jd(o,i);return i}function Jd(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function We(n,e=[]){return t=>{t.providersResolver=(r,o)=>function PO(n,e,t){const r=Ee();if(r.firstCreatePass){const o=Un(n);qd(t,r.data,r.blueprint,o,!0),qd(e,r.data,r.blueprint,o,!1)}}(r,o?o(n):n,e)}}class Ci{}class uv{}class dv extends Ci{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ty(this);const r=ln(e);this._bootstrapComponents=xr(r.bootstrap),this._r3Injector=ly(e,t,[{provide:Ci,useValue:this},{provide:ws,useValue:this.componentFactoryResolver}],Ve(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Yd extends uv{constructor(e){super(),this.moduleType=e}create(e){return new dv(this.moduleType,e)}}class LO extends Ci{constructor(e,t,r){super(),this.componentFactoryResolver=new Ty(this),this.instance=null;const o=new qm([...e,{provide:Ci,useValue:this},{provide:ws,useValue:this.componentFactoryResolver}],t||ul(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function xl(n,e,t=null){return new LO(n,e,t).injector}let jO=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=Bm(0,t.type),o=r.length>0?xl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,o)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=J({token:n,providedIn:"environment",factory:()=>new n(B(ar))}),n})();function hv(n){n.getStandaloneInjector=e=>e.get(jO).getOrCreateStandaloneInjector(n)}function Zd(n){return e=>{setTimeout(n,void 0,e)}}const et=class uA extends v{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&"object"==typeof e){const l=e;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=Zd(i),o&&(o=Zd(o)),s&&(s=Zd(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof M&&e.add(a),a}};function dA(){return this._results[Symbol.iterator]()}class Xd{get changes(){return this._changes||(this._changes=new et)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Xd.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=dA)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const o=function xn(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function _S(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],i=e[r];if(t&&(o=t(o),i=t(i)),i!==o)return!1}return!0}(r._results,o,t))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Or=(()=>{class n{}return n.__NG_ELEMENT_ID__=pA,n})();const hA=Or,fA=class extends hA{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tView,o=hl(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);o[rs]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[or];return null!==s&&(o[or]=s.createEmbeddedView(r)),Dd(r,o,e),new Ss(o)}};function pA(){return Il(Tt(),k())}function Il(n,e){return 4&n.type?new fA(e,n,ri(n,e)):null}let zn=(()=>{class n{}return n.__NG_ELEMENT_ID__=gA,n})();function gA(){return Mv(Tt(),k())}const mA=zn,Ev=class extends mA{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ri(this._hostTNode,this._hostLView)}get injector(){return new Wo(this._hostTNode,this._hostLView)}get parentInjector(){const e=Iu(this._hostTNode,this._hostLView);if(Ag(e)){const t=Wa(e,this._hostLView),r=qa(e);return new Wo(t[H].data[r+8],t)}return new Wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Sv(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(e,t,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=e.createEmbeddedView(t||{},i);return this.insert(s,o),s}createComponent(e,t,r,o,i){const s=e&&!function us(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const l=s?e:new Ms(Oe(e)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const h=(s?c:this.parentInjector).get(ar,null);h&&(i=h)}const u=l.create(c,o,void 0,i);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,o=r[H];if(function UE(n){return Vn(n[Ze])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[Ze],h=new Ev(d,d[Nt],d[Ze]);h.detach(h.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function sM(n,e,t,r){const o=Bt+r,i=t.length;r>0&&(t[o-1][jn]=e),r<i-Bt?(e[jn]=t[o],Hg(t,Bt+r,e)):(t.push(e),e[jn]=null),e[Ze]=t;const s=e[rs];null!==s&&t!==s&&function aM(n,e){const t=n[Ho];e[Ft]!==e[Ze][Ze][Ft]&&(n[ig]=!0),null===t?n[Ho]=[e]:t.push(e)}(s,e);const a=e[or];null!==a&&a.insertView(n),e[pe]|=64}(o,r,s,i);const a=Qu(i,s),l=r[_e],c=nl(l,s[ja]);return null!==c&&function rM(n,e,t,r,o,i){r[wr]=o,r[Nt]=e,_s(n,r,t,1,o,i)}(o,s[Nt],l,r,c,a),e.attachToViewContainerRef(),Hg(eh(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Sv(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Ku(this._lContainer,t);r&&(Za(eh(this._lContainer),t),fm(r[H],r))}detach(e){const t=this._adjustIndex(e,-1),r=Ku(this._lContainer,t);return r&&null!=Za(eh(this._lContainer),t)?new Ss(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Sv(n){return n[Va]}function eh(n){return n[Va]||(n[Va]=[])}function Mv(n,e){let t;const r=e[n.index];if(Vn(r))t=r;else{let o;if(8&n.type)o=It(r);else{const i=e[_e];o=i.createComment("");const s=un(n,e);go(i,nl(i,s),o,function dM(n,e){return n.nextSibling(e)}(i,s),!1)}e[n.index]=t=Ey(r,e,o,n),pl(e,t)}return new Ev(t,n,e)}class th{constructor(e){this.queryList=e,this.matches=null}clone(){return new th(this.queryList)}setDirty(){this.queryList.setDirty()}}class nh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,o=[];for(let i=0;i<r;i++){const s=t.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new nh(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==kv(e,t).matches&&this.queries[t].setDirty()}}class xv{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class rh{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const o=null!==t?t.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,null!==t?t.push(i):t=[i])}return null!==t?new rh(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class oh{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new oh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(e,t,yA(t,i)),this.matchTNodeWithReadOption(e,t,Ya(t,e,i,!1,!1))}else r===Or?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ya(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===hn||o===zn||o===Or&&4&t.type)this.addMatch(t.index,-2);else{const i=Ya(t,e,o,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function yA(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function vA(n,e,t,r){return-1===t?function _A(n,e){return 11&n.type?ri(n,e):4&n.type?Il(n,e):null}(e,n):-2===t?function CA(n,e,t){return t===hn?ri(e,n):t===Or?Il(e,n):t===zn?Mv(e,n):void 0}(n,e,r):fo(n,n[H],t,e)}function Iv(n,e,t,r){const o=e[or].queries[r];if(null===o.matches){const i=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:vA(e,i[c],s[l+1],t.metadata.read))}o.matches=a}return o.matches}function ih(n,e,t,r){const o=n.queries.getByIndex(t),i=o.matches;if(null!==i){const s=Iv(n,e,o,t);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(s[a/2]);else{const c=i[a+1],u=e[-l];for(let d=Bt;d<u.length;d++){const h=u[d];h[rs]===h[Ze]&&ih(h[H],h,c,r)}if(null!==u[Ho]){const d=u[Ho];for(let h=0;h<d.length;h++){const f=d[h];ih(f[H],f,c,r)}}}}}return r}function Tv(n){const e=k(),t=Ee(),r=bg();Cu(r+1);const o=kv(t,r);if(n.dirty&&function VE(n){return 4==(4&n[pe])}(e)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{const i=o.crossesNgTemplate?ih(t,e,r,[]):Iv(t,e,o,r);n.reset(i,nx),n.notifyOnChanges()}return!0}return!1}function Ov(n,e,t,r){const o=Ee();if(o.firstCreatePass){const i=Tt();(function Rv(n,e,t){null===n.queries&&(n.queries=new rh),n.queries.track(new oh(e,t))})(o,new xv(e,t,r),i.index),function DA(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(o,n),2==(2&t)&&(o.staticContentQueries=!0)}!function Pv(n,e,t){const r=new Xd(4==(4&t));vy(n,e,r,r.destroy),null===e[or]&&(e[or]=new nh),e[or].queries.push(new th(r))}(o,k(),t)}function kv(n,e){return n.queries.getByIndex(e)}function Nv(n,e){return Il(n,e)}function Ol(...n){}const Al=new Y("Application Initializer");let Pl=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Ol,this.reject=Ol,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(Is(i))t.push(i);else if(jd(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(B(Al,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vs=new Y("AppId",{providedIn:"root",factory:function Xv(){return`${dh()}${dh()}${dh()}`}});function dh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eC=new Y("Platform Initializer"),hh=new Y("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let HA=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ar=new Y("LocaleId",{providedIn:"root",factory:()=>ye(Ar,oe.Optional|oe.SkipSelf)||function zA(){return typeof $localize<"u"&&$localize.locale||vi}()});class qA{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let tC=(()=>{class n{compileModuleSync(t){return new Yd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),i=xr(ln(t).declarations).reduce((s,a)=>{const l=Oe(a);return l&&s.push(new Ms(l)),s},[]);return new qA(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JA=(()=>Promise.resolve(0))();function fh(n){typeof Zone>"u"?JA.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ot{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function YA(){let n=ze.requestAnimationFrame,e=ze.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function XA(n){const e=()=>{!function ZA(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ze,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,gh(n),n.isCheckStableRunning=!0,ph(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),gh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,i,s,a)=>{try{return oC(n),t.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&e(),iC(n)}},onInvoke:(t,r,o,i,s,a,l)=>{try{return oC(n),t.invoke(o,i,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),iC(n)}},onHasTask:(t,r,o,i)=>{t.hasTask(o,i),r===o&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,gh(n),ph(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,o,i)=>(t.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ot.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(ot.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,QA,Ol,Ol);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const QA={};function ph(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function oC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function iC(n){n._nesting--,ph(n)}class e1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}}const sC=new Y(""),Rl=new Y("");let _h,mh=(()=>{class n{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_h||(function t1(n){_h=n}(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ot.assertNotInAngularZone(),fh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fh(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}}return n.\u0275fac=function(t){return new(t||n)(B(ot),B(yh),B(Rl))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),yh=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return _h?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Pr=!1;let Gr=null;const aC=new Y("AllowMultipleToken"),vh=new Y("PlatformDestroyListeners"),lC=new Y("appBootstrapListener");class cC{constructor(e,t){this.name=e,this.token=t}}function dC(n,e,t=[]){const r=`Platform: ${e}`,o=new Y(r);return(i=[])=>{let s=Ch();if(!s||s.injector.get(aC,!1)){const a=[...t,...i,{provide:o,useValue:!0}];n?n(a):function o1(n){if(Gr&&!Gr.get(aC,!1))throw new j(400,!1);Gr=n;const e=n.get(fC);(function uC(n){const e=n.get(eC,null);e&&e.forEach(t=>t())})(n)}(function hC(n=[],e){return lr.create({name:e,providers:[{provide:dd,useValue:"platform"},{provide:vh,useValue:new Set([()=>Gr=null])},...n]})}(a,r))}return function s1(n){const e=Ch();if(!e)throw new j(401,!1);return e}()}}function Ch(){return Gr?.get(fC)??null}let fC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const o=function gC(n,e){let t;return t="noop"===n?new e1:("zone.js"===n?void 0:n)||new ot(e),t}(r?.ngZone,function pC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:ot,useValue:o}];return o.run(()=>{const s=lr.create({providers:i,parent:this.injector,name:t.moduleType.name}),a=t.create(s),l=a.injector.get(oi,null);if(!l)throw new j(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Nl(this._modules,a),c.unsubscribe()})}),function mC(n,e,t){try{const r=t();return Is(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(l,o,()=>{const c=a.injector.get(Pl);return c.runInitializers(),c.donePromise.then(()=>(function V_(n){wn(n,"Expected localeId to be defined"),"string"==typeof n&&(j_=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ar,vi)||vi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const o=yC({},r);return function n1(n,e,t){const r=new Yd(t);return Promise.resolve(r)}(0,0,t).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(t){const r=t.injector.get(kl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new j(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(vh,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(B(lr))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function yC(n,e){return Array.isArray(e)?e.reduce(yC,n):{...n,...e}}let kl=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,o){this._zone=t,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new He(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new He(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{ot.assertNotInAngularZone(),fh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{ot.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function iE(...n){const e=Qi(n),t=function ZD(n,e){return"number"==typeof Xc(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Fn(r[0]):Lo(t)(ct(r,e)):tr}(i,s.pipe(function sE(n={}){const{connector:e=(()=>new v),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=n;return i=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const g=s;f(),g?.unsubscribe()};return b((g,m)=>{c++,!d&&!u&&h();const _=l=l??e();m.add(()=>{c--,0===c&&!d&&!u&&(a=eu(p,o))}),_.subscribe(m),!s&&c>0&&(s=new Qt({next:x=>_.next(x),error:x=>{d=!0,h(),a=eu(f,t,x),_.error(x)},complete:()=>{u=!0,h(),a=eu(f,r),_.complete()}}),Fn(g).subscribe(s))})(i)}}()))}bootstrap(t,r){const o=t instanceof Km;if(!this._injector.get(Pl).done){!o&&function Vo(n){const e=Oe(n)||kt(n)||en(n);return null!==e&&e.standalone}(t);throw new j(405,Pr)}let s;s=o?t:this._injector.get(ws).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function r1(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Ci),c=s.create(lr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(sC,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Nl(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new j(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Nl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(lC,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Nl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(B(ot),B(ar),B(oi))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nl(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Us=(()=>{class n{}return n.__NG_ELEMENT_ID__=l1,n})();function l1(n){return function c1(n,e,t){if(is(n)&&!t){const r=tn(n.index,e);return new Ss(r,r)}return 47&n.type?new Ss(e[Ft],e):null}(Tt(),k(),16==(16&n))}class wC{constructor(){}supports(e){return vl(e)}create(e){return new g1(e)}}const p1=(n,e)=>e;class g1{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||p1}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){const s=!r||t&&t.currentIndex<EC(r,o,i)?t:r,a=EC(s,o,i),l=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,u=l-o;if(c!=u){for(let h=0;h<c;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<c&&(i[h]=f+1)}i[s.previousIndex]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!vl(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let o,i,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,i,s,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)):(t=this._mismatch(t,i,s,a),r=!0),t=t._next}else o=0,function VI(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(o,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,o),r=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,o){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,o)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,o)):e=this._addAfter(new m1(t,r),i,o),e}_verifyReinsertion(e,t,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const o=e._prevRemoved,i=e._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const o=null===t?this._itHead:t._next;return e._next=o,e._prev=t,null===o?this._itTail=e:o._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new DC),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class m1{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class y1{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class DC{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new y1,this.map.set(t,r)),r.add(e)}get(e,t){const o=this.map.get(e);return o?o.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EC(n,e,t){const r=n.previousIndex;if(null===r)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+e+o}class SC{constructor(){}supports(e){return e instanceof Map||Nd(e)}create(){return new _1}}class _1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Nd(e)))throw new j(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,o)=>{if(t&&t.key===o)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(o,r);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const o=this._records.get(e);this._maybeAddToChanges(o,t);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new v1(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class v1{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function MC(){return new jl([new wC])}let jl=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||MC()),deps:[[n,new fs,new hs]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(null!=r)return r;throw new j(901,!1)}}return n.\u0275prov=J({token:n,providedIn:"root",factory:MC}),n})();function xC(){return new $s([new SC])}let $s=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||xC()),deps:[[n,new fs,new hs]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(r)return r;throw new j(901,!1)}}return n.\u0275prov=J({token:n,providedIn:"root",factory:xC}),n})();const w1=dC(null,"core",[]);let D1=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(B(kl))},n.\u0275mod=Ln({type:n}),n.\u0275inj=Dn({}),n})();function Di(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Sh=null;function Rr(){return Sh}class M1{}const Wt=new Y("DocumentToken");let Mh=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return function x1(){return B(IC)}()},providedIn:"platform"}),n})();const I1=new Y("Location Initialized");let IC=(()=>{class n extends Mh{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(t){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){TC()?this._history.pushState(t,r,o):this._location.hash=o}replaceState(t,r,o){TC()?this._history.replaceState(t,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(B(Wt))},n.\u0275prov=J({token:n,factory:function(){return function T1(){return new IC(B(Wt))}()},providedIn:"platform"}),n})();function TC(){return!!window.history.pushState}function xh(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function OC(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function kr(n){return n&&"?"!==n[0]?"?"+n:n}let Do=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return ye(PC)},providedIn:"root"}),n})();const AC=new Y("appBaseHref");let PC=(()=>{class n extends Do{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ye(Wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xh(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+kr(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){const s=this.prepareExternalUrl(o+kr(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){const s=this.prepareExternalUrl(o+kr(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(B(Mh),B(AC,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O1=(()=>{class n extends Do{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+kr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+kr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(B(Mh),B(AC,8))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),Ih=(()=>{class n{constructor(t){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function R1(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(OC(RC(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+kr(r))}normalize(t){return n.stripTrailingSlash(function P1(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,RC(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=kr,n.joinWithSlash=xh,n.stripTrailingSlash=OC,n.\u0275fac=function(t){return new(t||n)(B(Do))},n.\u0275prov=J({token:n,factory:function(){return function A1(){return new Ih(B(Do))}()},providedIn:"root"}),n})();function RC(n){return n.replace(/\/index.html$/,"")}function BC(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,i]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}const jh=/\s+/,HC=[];let zC=(()=>{class n{constructor(t,r,o,i){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this.initialClasses=HC,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(jh):HC}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(jh):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(jh).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(T(jl),T($s),T(hn),T(Mr))},n.\u0275dir=se({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class yP{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vh=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new yP(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),WC(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{WC(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(T(zn),T(Or),T(jl))},n.\u0275dir=se({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function WC(n,e){n.context.$implicit=e.item}let zs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KC("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KC("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(T(zn),T(Or))},n.\u0275dir=se({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class vP{constructor(){this.$implicit=null,this.ngIf=null}}function KC(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ve(e)}'.`)}let zP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Dn({}),n})();let KP=(()=>{class n{}return n.\u0275prov=J({token:n,providedIn:"root",factory:()=>new JP(B(Wt),window)}),n})();class JP{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function YP(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ZC(this.window.history)||ZC(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ZC(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class XC{}class DR extends M1{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class qh extends DR{static makeCurrent(){!function S1(n){Sh||(Sh=n)}(new qh)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ER(){return qs=qs||document.querySelector("base"),qs?qs.getAttribute("href"):null}();return null==t?null:function SR(n){Yl=Yl||document.createElement("a"),Yl.setAttribute("href",n);const e=Yl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return BC(document.cookie,e)}}let Yl,qs=null;const ob=new Y("TRANSITION_ID"),xR=[{provide:Al,useFactory:function MR(n,e,t){return()=>{t.get(Pl).donePromise.then(()=>{const r=Rr(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[ob,Wt,lr],multi:!0}];let TR=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const Ql=new Y("EventManagerPlugins");let Zl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(B(Ql),B(ot))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class ib{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=Rr().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let sb=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const o=this.usageCount;let i=o.get(t)??0;return i+=r,i>0?o.set(t,i):o.delete(t),i}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),Ws=(()=>{class n extends sb{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(i=>i.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const o=this.doc.createElement("style");o.textContent=r,t.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(B(Wt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const Wh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kh=/%COMP%/g,cb=new Y("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ub(n,e){return e.flat(100).map(t=>t.replace(Kh,n))}function db(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Jh=(()=>{class n{constructor(t,r,o,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new Yh(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof pb?o.applyToHost(t):o instanceof Qh&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case rr.Emulated:i=new pb(s,a,r,this.appId,l);break;case rr.ShadowDom:return new FR(s,a,t,r);default:i=new Qh(s,a,r,l)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(B(Zl),B(Ws),B(Vs),B(cb))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();class Yh{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Wh[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(fb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(fb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const i=Wh[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Wh[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(nn.DashCase|nn.Important)?e.style.setProperty(t,r,o&nn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&nn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,db(r)):this.eventManager.addEventListener(e,t,db(r))}}function fb(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class FR extends Yh{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=ub(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Qh extends Yh{constructor(e,t,r,o,i=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=ub(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class pb extends Qh{constructor(e,t,r,o,i){const s=o+"-"+r.id;super(e,t,r,i,s),this.contentAttr=function RR(n){return"_ngcontent-%COMP%".replace(Kh,n)}(s),this.hostAttr=function kR(n){return"_nghost-%COMP%".replace(Kh,n)}(s)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let LR=(()=>{class n extends ib{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(B(Wt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const gb=["alt","control","meta","shift"],jR={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},VR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let UR=(()=>{class n extends ib{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),gb.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let o=jR[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),gb.forEach(s=>{s!==o&&(0,VR[s])(t)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(B(Wt))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const zR=dC(w1,"browser",[{provide:hh,useValue:"browser"},{provide:eC,useValue:function $R(){qh.makeCurrent()},multi:!0},{provide:Wt,useFactory:function HR(){return function vM(n){td=n}(document),document},deps:[]}]),_b=new Y(""),vb=[{provide:Rl,useClass:class IR{addToWindow(e){ze.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},ze.getAllAngularTestabilities=()=>e.getAllTestabilities(),ze.getAllAngularRootElements=()=>e.getAllRootElements(),ze.frameworkStabilizers||(ze.frameworkStabilizers=[]),ze.frameworkStabilizers.push(r=>{const o=ze.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(l){s=s||l,i--,0==i&&r(s)};o.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Rr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:sC,useClass:mh,deps:[ot,yh,Rl]},{provide:mh,useClass:mh,deps:[ot,yh,Rl]}],Cb=[{provide:dd,useValue:"root"},{provide:oi,useFactory:function BR(){return new oi},deps:[]},{provide:Ql,useClass:LR,multi:!0,deps:[Wt,ot,hh]},{provide:Ql,useClass:UR,multi:!0,deps:[Wt]},{provide:Jh,useClass:Jh,deps:[Zl,Ws,Vs,cb]},{provide:Ym,useExisting:Jh},{provide:sb,useExisting:Ws},{provide:Ws,useClass:Ws,deps:[Wt]},{provide:Zl,useClass:Zl,deps:[Ql,ot]},{provide:XC,useClass:TR,deps:[]},[]];let GR=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Vs,useValue:t.appId},{provide:ob,useExisting:Vs},xR]}}}return n.\u0275fac=function(t){return new(t||n)(B(_b,12))},n.\u0275mod=Ln({type:n}),n.\u0275inj=Dn({providers:[...Cb,...vb],imports:[zP,D1]}),n})(),bb=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(B(Wt))},n.\u0275prov=J({token:n,factory:function(t){let r=null;return r=t?new t:function WR(){return new bb(B(Wt))}(),r},providedIn:"root"}),n})();function Q(...n){return ct(n,Qi(n))}function Wr(n,e){return te(e)?xt(n,e,1):xt(n,1)}function Fr(n,e){return b((t,r)=>{let o=0;t.subscribe(R(r,i=>n.call(e,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class Xl{}class ef{}class Lr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),i=o.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=t.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(t,i)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Lr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Lr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Lr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class XR{encodeKey(e){return Eb(e)}encodeValue(e){return Eb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tk=/%(\d[a-f0-9])/gi,nk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Eb(n){return encodeURIComponent(n).replace(tk,(e,t)=>nk[t]??e)}function ec(n){return`${n}`}class Kr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new XR,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ek(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(ec):[ec(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Kr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ec(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(ec(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rk{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Sb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Mb(n){return typeof Blob<"u"&&n instanceof Blob}function xb(n){return typeof FormData<"u"&&n instanceof FormData}class Ks{constructor(e,t,r,o){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function ok(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Lr),this.context||(this.context=new rk),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Kr,this.urlWithParams=t}serializeBody(){return null===this.body?null:Sb(this.body)||Mb(this.body)||xb(this.body)||function ik(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Kr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xb(this.body)?null:Mb(this.body)?this.body.type||null:Sb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Kr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new Ks(t,r,i,{params:c,headers:l,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var ft=(()=>((ft=ft||{})[ft.Sent=0]="Sent",ft[ft.UploadProgress=1]="UploadProgress",ft[ft.ResponseHeader=2]="ResponseHeader",ft[ft.DownloadProgress=3]="DownloadProgress",ft[ft.Response=4]="Response",ft[ft.User=5]="User",ft))();class tf{constructor(e,t=200,r="OK"){this.headers=e.headers||new Lr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class nf extends tf{constructor(e={}){super(e),this.type=ft.ResponseHeader}clone(e={}){return new nf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class tc extends tf{constructor(e={}){super(e),this.type=ft.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new tc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ib extends tf{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function rf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ei=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof Ks)i=t;else{let l,c;l=o.headers instanceof Lr?o.headers:new Lr(o.headers),o.params&&(c=o.params instanceof Kr?o.params:new Kr({fromObject:o.params})),i=new Ks(t,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=Q(i).pipe(Wr(l=>this.handler.handle(l)));if(t instanceof Ks||"events"===o.observe)return s;const a=s.pipe(Fr(l=>l instanceof tc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(O(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(O(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(O(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(O(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Kr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,rf(o,r))}post(t,r,o={}){return this.request("POST",t,rf(o,r))}put(t,r,o={}){return this.request("PUT",t,rf(o,r))}}return n.\u0275fac=function(t){return new(t||n)(B(Xl))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function Tb(n,e){return e(n)}function sk(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}const lk=new Y("HTTP_INTERCEPTORS"),Js=new Y("HTTP_INTERCEPTOR_FNS");function ck(){let n=null;return(e,t)=>(null===n&&(n=(ye(lk,{optional:!0})??[]).reduceRight(sk,Tb)),n(e,t))}let Ob=(()=>{class n extends Xl{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Js)));this.chain=r.reduceRight((o,i)=>function ak(n,e,t){return(r,o)=>t.runInContext(()=>e(r,i=>n(i,o)))}(o,i,this.injector),Tb)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(B(ef),B(ar))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const fk=/^\)\]\}',?\n/;let Pb=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new He(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((f,p)=>o.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=t.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",p=new Lr(o.getAllResponseHeaders()),g=function pk(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return s=new nf({headers:p,status:o.status,statusText:f,url:g}),s},l=()=>{let{headers:f,status:p,statusText:g,url:m}=a(),_=null;204!==p&&(_=typeof o.response>"u"?o.responseText:o.response),0===p&&(p=_?200:0);let x=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof _){const C=_;_=_.replace(fk,"");try{_=""!==_?JSON.parse(_):null}catch(A){_=C,x&&(x=!1,_={error:A,text:_})}}x?(r.next(new tc({body:_,headers:f,status:p,statusText:g,url:m||void 0})),r.complete()):r.error(new Ib({error:_,headers:f,status:p,statusText:g,url:m||void 0}))},c=f=>{const{url:p}=a(),g=new Ib({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:p||void 0});r.error(g)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:ft.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&o.responseText&&(p.partialText=o.responseText),r.next(p)},h=f=>{let p={type:ft.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return o.addEventListener("load",l),o.addEventListener("error",c),o.addEventListener("timeout",c),o.addEventListener("abort",c),t.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:ft.Sent}),()=>{o.removeEventListener("error",c),o.removeEventListener("abort",c),o.removeEventListener("load",l),o.removeEventListener("timeout",c),t.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(B(XC))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();const sf=new Y("XSRF_ENABLED"),Rb=new Y("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),kb=new Y("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Nb{}let yk=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=BC(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(B(Wt),B(hh),B(Rb))},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();function _k(n,e){const t=n.url.toLowerCase();if(!ye(sf)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=ye(Nb).getToken(),o=ye(kb);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var at=(()=>((at=at||{})[at.Interceptors=0]="Interceptors",at[at.LegacyInterceptors=1]="LegacyInterceptors",at[at.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",at[at.NoXsrfProtection=3]="NoXsrfProtection",at[at.JsonpSupport=4]="JsonpSupport",at[at.RequestsMadeViaParent=5]="RequestsMadeViaParent",at))();function Si(n,e){return{\u0275kind:n,\u0275providers:e}}function vk(...n){const e=[Ei,Pb,Ob,{provide:Xl,useExisting:Ob},{provide:ef,useExisting:Pb},{provide:Js,useValue:_k,multi:!0},{provide:sf,useValue:!0},{provide:Nb,useClass:yk}];for(const t of n)e.push(...t.\u0275providers);return function BM(n){return{\u0275providers:n}}(e)}const Fb=new Y("LEGACY_INTERCEPTOR_FN");let bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Dn({providers:[vk(Si(at.LegacyInterceptors,[{provide:Fb,useFactory:ck},{provide:Js,useExisting:Fb,multi:!0}]))]}),n})();const{isArray:wk}=Array,{getPrototypeOf:Dk,prototype:Ek,keys:Sk}=Object;function Lb(n){if(1===n.length){const e=n[0];if(wk(e))return{args:e,keys:null};if(function Mk(n){return n&&"object"==typeof n&&Dk(n)===Ek}(e)){const t=Sk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:xk}=Array;function jb(n){return O(e=>function Ik(n,e){return xk(e)?n(...e):n(e)}(n,e))}function Vb(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function Eo(...n){const e=Bp(n),{args:t,keys:r}=Lb(n),o=new He(i=>{const{length:s}=t;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Fn(t[u]).subscribe(R(i,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?Vb(r,a):a),i.complete())}))}});return e?o.pipe(jb(e)):o}let Ub=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(T(Mr),T(hn))},n.\u0275dir=se({type:n}),n})(),So=(()=>{class n extends Ub{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ot(n)))(r||n)}}(),n.\u0275dir=se({type:n,features:[Pe]}),n})();const fr=new Y("NgValueAccessor"),Tk={provide:fr,useExisting:Ue(()=>nc),multi:!0};let nc=(()=>{class n extends So{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ot(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&G("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[We([Tk]),Pe]}),n})();const Ok={provide:fr,useExisting:Ue(()=>Ys),multi:!0},Pk=new Y("CompositionEventMode");let Ys=(()=>{class n extends Ub{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ak(){const n=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(T(Mr),T(hn),T(Pk,8))},n.\u0275dir=se({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&G("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[We([Ok]),Pe]}),n})();const Rk=!1;function Jr(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Ut=new Y("NgValidators"),Yr=new Y("NgAsyncValidators");function zb(n){return Jr(n.value)?{required:!0}:null}function rc(n){return null}function Yb(n){return null!=n}function Qb(n){const e=Is(n)?ct(n):n;if(Rk&&!jd(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new j(-1101,t)}return e}function Zb(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Xb(n,e){return e.map(t=>t(n))}function ew(n){return n.map(e=>function Nk(n){return!n.validate}(e)?e:t=>e.validate(t))}function af(n){return null!=n?function tw(n){if(!n)return null;const e=n.filter(Yb);return 0==e.length?null:function(t){return Zb(Xb(t,e))}}(ew(n)):null}function lf(n){return null!=n?function nw(n){if(!n)return null;const e=n.filter(Yb);return 0==e.length?null:function(t){return Eo(Xb(t,e).map(Qb)).pipe(O(Zb))}}(ew(n)):null}function rw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cf(n){return n?Array.isArray(n)?n:[n]:[]}function oc(n,e){return Array.isArray(n)?n.includes(e):n===e}function sw(n,e){const t=cf(e);return cf(n).forEach(o=>{oc(t,o)||t.push(o)}),t}function aw(n,e){return cf(e).filter(t=>!oc(n,t))}class lw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=af(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Kt extends lw{get formDirective(){return null}get path(){return null}}class Qr extends lw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cw{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ic=(()=>{class n extends cw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(T(Qr,2))},n.\u0275dir=se({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&At("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Pe]}),n})(),uw=(()=>{class n extends cw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(T(Kt,10))},n.\u0275dir=se({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&At("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Pe]}),n})();function dw(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const hf=!1,Qs="VALID",ac="INVALID",Mi="PENDING",Zs="DISABLED";function ff(n){return(lc(n)?n.validators:n)||null}function pf(n,e){return(lc(e)?e.asyncValidators:n)||null}function lc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class pw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Qs}get invalid(){return this.status===ac}get pending(){return this.status==Mi}get disabled(){return this.status===Zs}get enabled(){return this.status!==Zs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aw(e,this._rawAsyncValidators))}hasValidator(e){return oc(this._rawValidators,e)}hasAsyncValidator(e){return oc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Mi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zs,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qs,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qs||this.status===Mi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zs:Qs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Mi,this._hasOwnPendingAsyncValidator=!0;const t=Qb(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?Zs:this.errors?ac:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mi)?Mi:this._anyControlsHaveStatus(ac)?ac:Qs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Bk(n){return Array.isArray(n)?af(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Hk(n){return Array.isArray(n)?lf(n):n||null}(this._rawAsyncValidators)}}class gf extends pw{constructor(e,t,r){super(ff(t),pf(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function fw(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new j(1002,hf?function $k(n,e){return`Must supply a value for form control ${dw(n,e)}`}(e,o):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function hw(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,hf?function Vk(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new j(1001,hf?function Uk(n,e){return`Cannot find form control ${dw(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,i)=>{r=t(r,o,i)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const xi=new Y("CallSetDisabledState",{providedIn:"root",factory:()=>cc}),cc="always";function Xs(n,e,t=cc){mf(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function qk(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&gw(n,e)})}(n,e),function Kk(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Wk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&gw(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Gk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function hc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mf(n,e){const t=function ow(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(rw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function iw(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(rw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();hc(e._rawValidators,o),hc(e._rawAsyncValidators,o)}function gw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Xk={provide:Kt,useExisting:Ue(()=>pc)},ea=(()=>Promise.resolve())();let pc=(()=>{class n extends Kt{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new et,this.form=new gf({},af(t),lf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ea.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Xs(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ea.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ea.then(()=>{const r=this._findContainer(t.path),o=new gf({});(function mw(n,e){mf(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ea.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ea.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function yw(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(T(Ut,10),T(Yr,10),T(xi,8))},n.\u0275dir=se({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&G("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[We([Xk]),Pe]}),n})();function _w(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function vw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Cw=class extends pw{constructor(e=null,t,r){super(ff(t),pf(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=vw(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_w(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_w(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},nN={provide:Qr,useExisting:Ue(()=>ta)},Dw=(()=>Promise.resolve())();let ta=(()=>{class n extends Qr{constructor(t,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Cw,this._registered=!1,this.update=new et,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function vf(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(i=>{i.constructor===Ys?t=i:function Qk(n){return Object.getPrototypeOf(n.constructor)===So}(i)?r=i:o=i}),o||r||t||null}(0,i)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function _f(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Xs(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Dw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&Di(r);Dw.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function uc(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(T(Kt,9),T(Ut,10),T(Yr,10),T(fr,10),T(Us,8),T(xi,8))},n.\u0275dir=se({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[We([nN]),Pe,Sn]}),n})(),Ew=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=se({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const rN={provide:fr,useExisting:Ue(()=>Cf),multi:!0};let Cf=(()=>{class n extends So{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ot(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&G("input",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},features:[We([rN]),Pe]}),n})(),Sw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Dn({}),n})();const hN={provide:fr,useExisting:Ue(()=>gc),multi:!0};function Pw(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let gc=(()=>{class n extends So{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=Pw(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function fN(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ot(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&G("change",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[We([hN]),Pe]}),n})(),Rw=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Pw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(T(hn),T(Mr),T(gc,9))},n.\u0275dir=se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const pN={provide:fr,useExisting:Ue(()=>Ef),multi:!0};function kw(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ef=(()=>{class n extends So{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);o.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function gN(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ot(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&G("change",function(i){return r.onChange(i.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[We([pN]),Pe]}),n})(),Nw=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(kw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(kw(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(T(hn),T(Mr),T(Ef,9))},n.\u0275dir=se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function Lw(n){return"number"==typeof n?n:parseFloat(n)}let Mo=(()=>{class n{constructor(){this._validator=rc}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rc,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=se({type:n,features:[Sn]}),n})();const mN={provide:Ut,useExisting:Ue(()=>Sf),multi:!0};let Sf=(()=>{class n extends Mo{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>Lw(t),this.createValidator=t=>function Hb(n){return e=>{if(Jr(e.value)||Jr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ot(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Vt("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[We([mN]),Pe]}),n})();const yN={provide:Ut,useExisting:Ue(()=>Mf),multi:!0};let Mf=(()=>{class n extends Mo{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>Lw(t),this.createValidator=t=>function Bb(n){return e=>{if(Jr(e.value)||Jr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ot(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Vt("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[We([yN]),Pe]}),n})();const _N={provide:Ut,useExisting:Ue(()=>mc),multi:!0};let mc=(()=>{class n extends Mo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Di,this.createValidator=t=>zb}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ot(n)))(r||n)}}(),n.\u0275dir=se({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&Vt("required",r._enabled?"":null)},inputs:{required:"required"},features:[We([_N]),Pe]}),n})(),EN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Dn({imports:[Sw]}),n})(),MN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xi,useValue:t.callSetDisabledState??cc}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ln({type:n}),n.\u0275inj=Dn({imports:[EN]}),n})();class Rn extends v{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const yc=me(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Hw(...n){const e=Qi(n),t=Bp(n),{args:r,keys:o}=Lb(n);if(0===r.length)return ct([],e);const i=new He(function xN(n,e,t=Xn){return r=>{zw(e,()=>{const{length:o}=n,i=new Array(o);let s=o,a=o;for(let l=0;l<o;l++)zw(e,()=>{const c=ct(n[l],e);let u=!1;c.subscribe(R(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>Vb(o,s):Xn));return t?i.pipe(jb(t)):i}function zw(n,e,t){n?_r(t,n,e):e()}function xf(...n){return function IN(){return Lo(1)}()(ct(n,Qi(n)))}function Gw(n){return new He(e=>{Fn(n()).subscribe(e)})}function Ii(n,e){const t=te(n)?n:()=>n,r=o=>o.error(t());return new He(e?o=>e.schedule(r,0,o):r)}function If(){return b((n,e)=>{let t=null;n._refCount++;const r=R(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class qw extends He{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,S(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new M;const t=this.getSubject();e.add(this.source.subscribe(R(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=M.EMPTY)}return e}refCount(){return If()(this)}}function pr(n,e){return b((t,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();t.subscribe(R(r,l=>{o?.unsubscribe();let c=0;const u=i++;Fn(n(l,u)).subscribe(o=R(r,d=>r.next(e?e(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Ti(n){return n<=0?()=>tr:b((e,t)=>{let r=0;e.subscribe(R(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function _c(n){return b((e,t)=>{let r=!1;e.subscribe(R(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Ww(n=ON){return b((e,t)=>{let r=!1;e.subscribe(R(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function ON(){return new yc}function Zr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fr((o,i)=>n(o,i,r)):Xn,Ti(1),t?_c(e):Ww(()=>new yc))}function pt(n,e,t){const r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?b((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(R(i,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),i.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),i.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),i.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Xn}function Kn(n){return b((e,t)=>{let i,r=null,o=!1;r=e.subscribe(R(t,void 0,void 0,s=>{i=Fn(n(s,Kn(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function Kw(n,e){return b(function AN(n,e,t,r,o){return(i,s)=>{let a=t,l=e,c=0;i.subscribe(R(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}(n,e,arguments.length>=2,!0))}function Tf(n){return n<=0?()=>tr:b((e,t)=>{let r=[];e.subscribe(R(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Jw(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fr((o,i)=>n(o,i,r)):Xn,Tf(1),t?_c(e):Ww(()=>new yc))}function Of(n){return b((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const fe="primary",na=Symbol("RouteTitle");class kN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Oi(n){return new kN(n)}function NN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function gr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!Yw(n[o],e[o]))return!1;return!0}function Yw(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}return n===e}function Qw(n){return Array.prototype.concat.apply([],n)}function Zw(n){return n.length>0?n[n.length-1]:null}function Pt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Xr(n){return jd(n)?n:Is(n)?ct(Promise.resolve(n)):Q(n)}const vc=!1,LN={exact:function t0(n,e,t){if(!xo(n.segments,e.segments)||!Cc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!t0(n.children[r],e.children[r],t))return!1;return!0},subset:n0},Xw={exact:function jN(n,e){return gr(n,e)},subset:function VN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Yw(n[t],e[t]))},ignored:()=>!0};function e0(n,e,t){return LN[t.paths](n.root,e.root,t.matrixParams)&&Xw[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function n0(n,e,t){return r0(n,e,e.segments,t)}function r0(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!xo(o,t)||e.hasChildren()||!Cc(o,t,r))}if(n.segments.length===t.length){if(!xo(n.segments,t)||!Cc(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!n0(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!!(xo(n.segments,o)&&Cc(n.segments,o,r)&&n.children[fe])&&r0(n.children[fe],e,i,r)}}function Cc(n,e,t){return e.every((r,o)=>Xw[t](n[o].parameters,r.parameters))}class eo{constructor(e=new ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){return BN.serialize(this)}}class ve{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Pt(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bc(this)}}class ra{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Oi(this.parameters)),this._parameterMap}toString(){return a0(this)}}function xo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let oa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return new Af},providedIn:"root"}),n})();class Af{parse(e){const t=new QN(e);return new eo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ia(e.root,!0)}`,r=function GN(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${wc(t)}=${wc(o)}`).join("&"):`${wc(t)}=${wc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function HN(n){return encodeURI(n)}(e.fragment)}`:""}`}}const BN=new Af;function bc(n){return n.segments.map(e=>a0(e)).join("/")}function ia(n,e){if(!n.hasChildren())return bc(n);if(e){const t=n.children[fe]?ia(n.children[fe],!1):"",r=[];return Pt(n.children,(o,i)=>{i!==fe&&r.push(`${i}:${ia(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $N(n,e){let t=[];return Pt(n.children,(r,o)=>{o===fe&&(t=t.concat(e(r,o)))}),Pt(n.children,(r,o)=>{o!==fe&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===fe?[ia(n.children[fe],!1)]:[`${o}:${ia(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[fe]?`${bc(n)}/${t[0]}`:`${bc(n)}/(${t.join("//")})`}}function o0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wc(n){return o0(n).replace(/%3B/gi,";")}function Pf(n){return o0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dc(n){return decodeURIComponent(n)}function s0(n){return Dc(n.replace(/\+/g,"%20"))}function a0(n){return`${Pf(n.path)}${function zN(n){return Object.keys(n).map(e=>`;${Pf(e)}=${Pf(n[e])}`).join("")}(n.parameters)}`}const qN=/^[^\/()?;=#]+/;function Ec(n){const e=n.match(qN);return e?e[0]:""}const WN=/^[^=?&#]+/,JN=/^[^&#]+/;class QN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new ve(e,t)),r}parseSegment(){const e=Ec(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new j(4009,vc);return this.capture(e),new ra(Dc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ec(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ec(this.remaining);o&&(r=o,this.capture(r))}e[Dc(t)]=Dc(r)}parseQueryParam(e){const t=function KN(n){const e=n.match(WN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function YN(n){const e=n.match(JN);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=s0(t),i=s0(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ec(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new j(4010,vc);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=fe);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[fe]:new ve([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new j(4011,vc)}}function Rf(n){return n.segments.length>0?new ve([],{[fe]:n}):n}function Sc(n){const e={};for(const r of Object.keys(n.children)){const i=Sc(n.children[r]);(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function ZN(n){if(1===n.numberOfChildren&&n.children[fe]){const e=n.children[fe];return new ve(n.segments.concat(e.segments),e.children)}return n}(new ve(n.segments,e))}function Io(n){return n instanceof eo}const kf=!1;function XN(n,e,t,r,o){if(0===t.length)return Ai(e.root,e.root,e.root,r,o);const i=function h0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new d0(!0,0,n);let e=0,t=!1;const r=n.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Pt(i.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new d0(t,e,r)}(t);return i.toRoot()?Ai(e.root,e.root,new ve([],{}),r,o):function s(l){const c=function tF(n,e,t,r){if(n.isAbsolute)return new Pi(e.root,!0,0);if(-1===r)return new Pi(t,t===e.root,0);return function f0(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new j(4005,kf&&"Invalid number of '../'");o=r.segments.length}return new Pi(r,!1,o-i)}(t,r+(sa(n.commands[0])?0:1),n.numberOfDoubleDots)}(i,e,n.snapshot?._urlSegment,l),u=c.processChildren?Ri(c.segmentGroup,c.index,i.commands):Nf(c.segmentGroup,c.index,i.commands);return Ai(e.root,c.segmentGroup,u,r,o)}(n.snapshot?._lastPathIndex)}function sa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function aa(n){return"object"==typeof n&&null!=n&&n.outlets}function Ai(n,e,t,r,o){let s,i={};r&&Pt(r,(l,c)=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===e?t:u0(n,e,t);const a=Rf(Sc(s));return new eo(a,i,o)}function u0(n,e,t){const r={};return Pt(n.children,(o,i)=>{r[i]=o===e?t:u0(o,e,t)}),new ve(n.segments,r)}class d0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&sa(r[0]))throw new j(4003,kf&&"Root segment cannot have matrix parameters");const o=r.find(aa);if(o&&o!==Zw(r))throw new j(4004,kf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pi{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Nf(n,e,t){if(n||(n=new ve([],{})),0===n.segments.length&&n.hasChildren())return Ri(n,e,t);const r=function rF(n,e,t){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;const s=n.segments[o],a=t[r];if(aa(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(o>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!g0(l,c,s))return i;r+=2}else{if(!g0(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new ve(n.segments.slice(0,r.pathIndex),{});return i.children[fe]=new ve(n.segments.slice(r.pathIndex),n.children),Ri(i,0,o)}return r.match&&0===o.length?new ve(n.segments,{}):r.match&&!n.hasChildren()?Ff(n,e,t):r.match?Ri(n,0,o):Ff(n,e,t)}function Ri(n,e,t){if(0===t.length)return new ve(n.segments,{});{const r=function nF(n){return aa(n[0])?n[0].outlets:{[fe]:n}}(t),o={};if(!r[fe]&&n.children[fe]&&1===n.numberOfChildren&&0===n.children[fe].segments.length){const i=Ri(n.children[fe],e,t);return new ve(n.segments,i.children)}return Pt(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=Nf(n.children[s],e,i))}),Pt(n.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new ve(n.segments,o)}}function Ff(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const i=t[o];if(aa(i)){const l=oF(i.outlets);return new ve(r,l)}if(0===o&&sa(t[0])){r.push(new ra(n.segments[e].path,p0(t[0]))),o++;continue}const s=aa(i)?i.outlets[fe]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&sa(a)?(r.push(new ra(s,p0(a))),o+=2):(r.push(new ra(s,{})),o++)}return new ve(r,{})}function oF(n){const e={};return Pt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ff(new ve([],{}),0,t))}),e}function p0(n){const e={};return Pt(n,(t,r)=>e[r]=`${t}`),e}function g0(n,e,t){return n==t.path&&gr(e,t.parameters)}const la="imperative";class mr{constructor(e,t){this.id=e,this.url=t}}class Lf extends mr{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class To extends mr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Mc extends mr{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xc extends mr{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class jf extends mr{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iF extends mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sF extends mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aF extends mr{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lF extends mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cF extends mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uF{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dF{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hF{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fF{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pF{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gF{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m0{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _F=(()=>{class n{createUrlTree(t,r,o,i,s,a){return XN(t||r.root,o,i,s,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})(),CF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(e){return _F.\u0275fac(e)},providedIn:"root"}),n})();class y0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Vf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Vf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Uf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Uf(e,this._root).map(t=>t.value)}}function Vf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Vf(n,t);if(r)return r}return null}function Uf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Uf(n,t);if(r.length)return r.unshift(e),r}return[]}class jr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ki(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _0 extends y0{constructor(e,t){super(e),this.snapshot=t,$f(this,e)}toString(){return this.snapshot.toString()}}function v0(n,e){const t=function bF(n,e){const s=new Ic([],{},{},"",{},fe,e,null,n.root,-1,{});return new b0("",new jr(s,[]))}(n,e),r=new Rn([new ra("",{})]),o=new Rn({}),i=new Rn({}),s=new Rn({}),a=new Rn(""),l=new Oo(r,o,s,a,i,fe,e,t.root);return l.snapshot=t.root,new _0(new jr(l,[]),t)}class Oo{constructor(e,t,r,o,i,s,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(O(c=>c[na]))??Q(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(O(e=>Oi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(O(e=>Oi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function C0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],i=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function wF(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ic{get title(){return this.data?.[na]}constructor(e,t,r,o,i,s,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class b0 extends y0{constructor(e,t){super(t),this.url=e,$f(this,t)}toString(){return w0(this._root)}}function $f(n,e){e.value._routerState=n,e.children.forEach(t=>$f(n,t))}function w0(n){const e=n.children.length>0?` { ${n.children.map(w0).join(", ")} } `:"";return`${n.value}${e}`}function Bf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gr(e.params,t.params)||n.params.next(t.params),function FN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Hf(n,e){const t=gr(n.params,e.params)&&function UN(n,e){return xo(n,e)&&n.every((t,r)=>gr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Hf(n.parent,e.parent))}function ca(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function EF(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ca(n,r,o);return ca(n,r)})}(n,e,t);return new jr(r,o)}{if(n.shouldAttach(e.value)){const i=n.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ca(n,a)),s}}const r=function SF(n){return new Oo(new Rn(n.url),new Rn(n.params),new Rn(n.queryParams),new Rn(n.fragment),new Rn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(i=>ca(n,i));return new jr(r,o)}}const zf="ngNavigationCancelingError";function D0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Io(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=E0(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function E0(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[zf]=!0,r.cancellationCode=e,t&&(r.url=t),r}function S0(n){return M0(n)&&Io(n.url)}function M0(n){return n&&n[zf]}class MF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ua,this.attachRef=null}}let ua=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new MF,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tc=!1;let Oc=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=ye(ua),this.location=ye(zn),this.changeDetector=ye(Us),this.environmentInjector=ye(ar)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,Tc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,Tc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,Tc);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,Tc);this._activatedRoute=t;const o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new xF(t,a,o.injector);if(r&&function IF(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=o.createComponent(c,o.length,l)}else this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=se({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sn]}),n})();class xF{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oo?this.route:e===ua?this.childContexts:this.parent.get(e,t)}}let Gf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=lo({type:n,selectors:[["ng-component"]],standalone:!0,features:[hv],decls:1,vars:0,template:function(t,r){1&t&&Tn(0,"router-outlet")},dependencies:[Oc],encapsulation:2}),n})();function x0(n,e){return n.providers&&!n._injector&&(n._injector=xl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wf(n){const e=n.children&&n.children.map(Wf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=Gf),t}function kn(n){return n.outlet||fe}function I0(n,e){const t=n.filter(r=>kn(r)===e);return t.push(...n.filter(r=>kn(r)!==e)),t}function da(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class RF{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Bf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ki(t);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Pt(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=ki(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=ki(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ki(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new gF(i.value.snapshot))}),e.children.length&&this.forwardEvent(new fF(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(Bf(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Bf(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=da(o.snapshot),l=a?.get(ws)??null;s.attachRef=null,s.route=o,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class T0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ac{constructor(e,t){this.component=e,this.route=t}}function kF(n,e,t){const r=n._root;return ha(r,e?e._root:null,t,[r.value])}function Ni(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function fE(n){return null!==Oa(n)}(n)?e.get(n):n:r}function ha(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=ki(e);return n.children.forEach(s=>{(function FF(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function LF(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xo(n.url,e.url)||!gr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hf(n,e)||!gr(n.queryParams,e.queryParams);default:return!Hf(n,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new T0(r)):(i.data=s.data,i._resolvedData=s._resolvedData),ha(n,e,i.component?a?a.children:null:t,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Ac(a.outlet.component,s))}else s&&fa(e,a,o),o.canActivateChecks.push(new T0(r)),ha(n,null,i.component?a?a.children:null:t,r,o)})(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Pt(i,(s,a)=>fa(s,t.getContext(a),o)),o}function fa(n,e,t){const r=ki(n),o=n.value;Pt(r,(i,s)=>{fa(i,o.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Ac(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function pa(n){return"function"==typeof n}function Kf(n){return n instanceof yc||"EmptyError"===n?.name}const Pc=Symbol("INITIAL_VALUE");function Fi(){return pr(n=>Hw(n.map(e=>e.pipe(Ti(1),function TN(...n){const e=Qi(n);return b((t,r)=>{(e?xf(n,t,e):xf(n,t)).subscribe(r)})}(Pc)))).pipe(O(e=>{for(const t of e)if(!0!==t){if(t===Pc)return Pc;if(!1===t||t instanceof eo)return t}return!0}),Fr(e=>e!==Pc),Ti(1)))}function O0(n){return function Ea(...n){return Yi(n)}(pt(e=>{if(Io(e))throw D0(0,e)}),O(e=>!0===e))}const Jf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function A0(n,e,t,r,o){const i=Yf(n,e,t);return i.matched?function eL(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?Q(o.map(s=>{const a=Ni(s,n);return Xr(function HF(n){return n&&pa(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Fi(),O0()):Q(!0)}(r=x0(e,r),e,t).pipe(O(s=>!0===s?i:{...Jf})):Q(i)}function Yf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Jf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||NN)(t,n,e);if(!o)return{...Jf};const i={};Pt(o.posParams,(a,l)=>{i[l]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Rc(n,e,t,r){if(t.length>0&&function rL(n,e,t){return t.some(r=>kc(n,e,r)&&kn(r)!==fe)}(n,t,r)){const i=new ve(e,function nL(n,e,t,r){const o={};o[fe]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const i of t)if(""===i.path&&kn(i)!==fe){const s=new ve([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,o[kn(i)]=s}return o}(n,e,r,new ve(t,n.children)));return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===t.length&&function oL(n,e,t){return t.some(r=>kc(n,e,r))}(n,t,r)){const i=new ve(n.segments,function tL(n,e,t,r,o){const i={};for(const s of r)if(kc(n,t,s)&&!o[kn(s)]){const a=new ve([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,i[kn(s)]=a}return{...o,...i}}(n,e,t,r,n.children));return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}const o=new ve(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function kc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function P0(n,e,t,r){return!!(kn(n)===r||r!==fe&&kc(e,t,n))&&("**"===n.path||Yf(e,n,t).matched)}function R0(n,e,t){return 0===e.length&&!n.children[t]}const Nc=!1;class Fc{constructor(e){this.segmentGroup=e||null}}class k0{constructor(e){this.urlTree=e}}function ga(n){return Ii(new Fc(n))}function N0(n){return Ii(new k0(n))}class lL{constructor(e,t,r,o,i){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const e=Rc(this.urlTree.root,[],[],this.config).segmentGroup,t=new ve(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,fe).pipe(O(i=>this.createUrlTree(Sc(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Kn(i=>{if(i instanceof k0)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof Fc?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,fe).pipe(O(o=>this.createUrlTree(Sc(o),e.queryParams,e.fragment))).pipe(Kn(o=>{throw o instanceof Fc?this.noMatchError(o):o}))}noMatchError(e){return new j(4002,Nc)}createUrlTree(e,t,r){const o=Rf(e);return new eo(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(O(i=>new ve([],i))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return ct(o).pipe(Wr(i=>{const s=r.children[i],a=I0(t,i);return this.expandSegmentGroup(e,a,s,i).pipe(O(l=>({segment:l,outlet:i})))}),Kw((i,s)=>(i[s.outlet]=s.segment,i),{}),Jw())}expandSegment(e,t,r,o,i,s){return ct(r).pipe(Wr(a=>this.expandSegmentAgainstRoute(e,t,r,a,o,i,s).pipe(Kn(c=>{if(c instanceof Fc)return Q(null);throw c}))),Zr(a=>!!a),Kn((a,l)=>{if(Kf(a))return R0(t,o,i)?Q(new ve([],{})):ga(t);throw a}))}expandSegmentAgainstRoute(e,t,r,o,i,s,a){return P0(o,t,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s):ga(t):ga(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?N0(i):this.lineralizeSegments(r,i).pipe(xt(s=>{const a=new ve(s,{});return this.expandSegment(e,a,t,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Yf(t,o,i);if(!a)return ga(t);const d=this.applyRedirectCommands(l,o.redirectTo,u);return o.redirectTo.startsWith("/")?N0(d):this.lineralizeSegments(o,d).pipe(xt(h=>this.expandSegment(e,t,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,r,o,i){return"**"===r.path?(e=x0(r,e),r.loadChildren?(r._loadedRoutes?Q({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(O(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new ve(o,{})))):Q(new ve(o,{}))):A0(t,r,o,e).pipe(pr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(e=r._injector??e,r,o).pipe(xt(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=Rc(t,a,l,h),g=new ve(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(O(C=>new ve(a,C)));if(0===h.length&&0===p.length)return Q(new ve(a,{}));const m=kn(r)===i;return this.expandSegment(d,g,h,p,m?fe:i,!0).pipe(O(x=>new ve(a.concat(x.segments),x.children)))})):ga(t)))}getChildConfig(e,t,r){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):function XF(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?Q(!0):Q(o.map(s=>{const a=Ni(s,n);return Xr(function VF(n){return n&&pa(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Fi(),O0())}(e,t,r).pipe(xt(o=>o?this.configLoader.loadChildren(e,t).pipe(pt(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):function sL(n){return Ii(E0(Nc,3))}())):Q({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Q(r);if(o.numberOfChildren>1||!o.children[fe])return e.redirectTo,Ii(new j(4e3,Nc));o=o.children[fe]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const i=this.createSegmentGroup(e,t.root,r,o);return new eo(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Pt(e,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,o){const i=this.createSegments(e,t.segments,r,o);let s={};return Pt(t.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,r,o)}),new ve(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new j(4001,Nc);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class uL{}class fL{constructor(e,t,r,o,i,s,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=Rc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,fe).pipe(O(t=>{if(null===t)return null;const r=new Ic([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},fe,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new jr(r,t),i=new b0(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(e){const t=e.value,r=C0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return ct(Object.keys(r.children)).pipe(Wr(o=>{const i=r.children[o],s=I0(t,o);return this.processSegmentGroup(e,s,i,o)}),Kw((o,i)=>o&&i?(o.push(...i),o):null),function PN(n,e=!1){return b((t,r)=>{let o=0;t.subscribe(R(r,i=>{const s=n(i,o++);(s||e)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),_c(null),Jw(),O(o=>{if(null===o)return null;const i=L0(o);return function pL(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}))}processSegment(e,t,r,o,i){return ct(t).pipe(Wr(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,o,i)),Zr(s=>!!s),Kn(s=>{if(Kf(s))return R0(r,o,i)?Q([]):Q(null);throw s}))}processSegmentAgainstRoute(e,t,r,o,i){if(t.redirectTo||!P0(t,r,o,i))return Q(null);let s;if("**"===t.path){const a=o.length>0?Zw(o).parameters:{},l=V0(r)+o.length;s=Q({snapshot:new Ic(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U0(t),kn(t),t.component??t._loadedComponent??null,t,j0(r),l,$0(t)),consumedSegments:[],remainingSegments:[]})}else s=A0(r,t,o,e).pipe(O(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=V0(r)+l.length;return{snapshot:new Ic(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U0(t),kn(t),t.component??t._loadedComponent??null,t,j0(r),d,$0(t)),consumedSegments:l,remainingSegments:c}}));return s.pipe(pr(a=>{if(null===a)return Q(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function gL(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=Rc(r,c,u,h.filter(m=>void 0===m.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(O(m=>null===m?null:[new jr(l,m)]));if(0===h.length&&0===p.length)return Q([new jr(l,[])]);const g=kn(t)===i;return this.processSegment(d,h,f,p,g?fe:i).pipe(O(m=>null===m?null:[new jr(l,m)]))}))}}function mL(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function L0(n){const e=[],t=new Set;for(const r of n){if(!mL(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=L0(r.children);e.push(new jr(r.value,o))}return e.filter(r=>!t.has(r))}function j0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function V0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function U0(n){return n.data||{}}function $0(n){return n.resolve||{}}function B0(n){return"string"==typeof n.title||null===n.title}function Qf(n){return pr(e=>{const t=n(e);return t?ct(t).pipe(O(()=>e)):Q(e)})}const Li=new Y("ROUTES");let Zf=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ye(tC)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Xr(t.loadComponent()).pipe(O(z0),pt(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),Of(()=>{this.componentLoaders.delete(t)})),o=new qw(r,()=>new v).pipe(If());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(O(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=Qw(l.get(Li,[],oe.Self|oe.Optional)));return{routes:c.map(Wf),injector:l}}),Of(()=>{this.childrenLoaders.delete(r)})),s=new qw(i,()=>new v).pipe(If());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return Xr(t()).pipe(O(z0),xt(r=>r instanceof uv||Array.isArray(r)?Q(r):ct(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z0(n){return function EL(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let jc=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new v,this.configLoader=ye(Zf),this.environmentInjector=ye(ar),this.urlSerializer=ye(oa),this.rootContexts=ye(ua),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new dF(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new uF(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Rn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:la,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fr(r=>0!==r.id),O(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),pr(r=>{let o=!1,i=!1;return Q(r).pipe(pt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pr(s=>{const a=t.browserUrlTree.toString(),l=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new xc(s.id,t.serializeUrl(r.rawUrl),u,0)),t.rawUrlTree=s.rawUrl,s.resolve(null),tr}if(t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return G0(s.source)&&(t.browserUrlTree=s.extractedUrl),Q(s).pipe(pr(u=>{const d=this.transitions?.getValue();return this.events.next(new Lf(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?tr:Promise.resolve(u)}),function cL(n,e,t,r){return pr(o=>function aL(n,e,t,r,o){return new lL(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe(O(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),pt(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function _L(n,e,t,r,o){return xt(i=>function hL(n,e,t,r,o,i,s="emptyOnly"){return new fL(n,e,t,r,o,s,i).recognize().pipe(pr(a=>null===a?function dL(n){return new He(e=>e.error(n))}(new uL):Q(a)))}(n,e,t,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(O(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),pt(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(h,u)}t.browserUrlTree=u.urlAfterRedirects}const d=new iF(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,g=new Lf(u,this.urlSerializer.serialize(d),h,f);this.events.next(g);const m=v0(d,this.rootComponentType).snapshot;return Q(r={...s,targetSnapshot:m,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new xc(s.id,t.serializeUrl(r.extractedUrl),u,1)),t.rawUrlTree=s.rawUrl,s.resolve(null),tr}}),pt(s=>{const a=new sF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),O(s=>r={...s,guards:kF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function GF(n,e){return xt(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return 0===s.length&&0===i.length?Q({...t,guardsResult:!0}):function qF(n,e,t,r){return ct(n).pipe(xt(o=>function ZF(n,e,t,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?Q(i.map(a=>{const l=da(e)??o,c=Ni(a,l);return Xr(function BF(n){return n&&pa(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(Zr())})).pipe(Fi()):Q(!0)}(o.component,o.route,t,e,r)),Zr(o=>!0!==o,!0))}(s,r,o,n).pipe(xt(a=>a&&function jF(n){return"boolean"==typeof n}(a)?function WF(n,e,t,r){return ct(e).pipe(Wr(o=>xf(function JF(n,e){return null!==n&&e&&e(new hF(n)),Q(!0)}(o.route.parent,r),function KF(n,e){return null!==n&&e&&e(new pF(n)),Q(!0)}(o.route,r),function QF(n,e,t){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function NF(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Gw(()=>Q(s.guards.map(l=>{const c=da(s.node)??t,u=Ni(l,c);return Xr(function $F(n){return n&&pa(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(Zr())})).pipe(Fi())));return Q(i).pipe(Fi())}(n,o.path,t),function YF(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Q(!0);const o=r.map(i=>Gw(()=>{const s=da(e)??t,a=Ni(i,s);return Xr(function UF(n){return n&&pa(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Zr())}));return Q(o).pipe(Fi())}(n,o.route,t))),Zr(o=>!0!==o,!0))}(r,i,n,e):Q(a)),O(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),pt(s=>{if(r.guardsResult=s.guardsResult,Io(s.guardsResult))throw D0(0,s.guardsResult);const a=new aF(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Fr(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),Qf(s=>{if(s.guards.canActivateChecks.length)return Q(s).pipe(pt(a=>{const l=new lF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),pr(a=>{let l=!1;return Q(a).pipe(function vL(n,e){return xt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Q(t);let i=0;return ct(o).pipe(Wr(s=>function CL(n,e,t,r){const o=n.routeConfig,i=n._resolve;return void 0!==o?.title&&!B0(o)&&(i[na]=o.title),function bL(n,e,t,r){const o=function wL(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Q({});const i={};return ct(o).pipe(xt(s=>function DL(n,e,t,r){const o=da(e)??r,i=Ni(n,o);return Xr(i.resolve?i.resolve(e,t):o.runInContext(()=>i(e,t)))}(n[s],e,t,r).pipe(Zr(),pt(a=>{i[s]=a}))),Tf(1),function RN(n){return O(()=>n)}(i),Kn(s=>Kf(s)?tr:Ii(s)))}(i,n,e,r).pipe(O(s=>(n._resolvedData=s,n.data=C0(n,t).resolve,o&&B0(o)&&(n.data[na]=o.title),null)))}(s.route,r,n,e)),pt(()=>i++),Tf(1),xt(s=>i===o.length?Q(t):tr))})}(t.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),pt(a=>{const l=new cF(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Qf(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(pt(u=>{l.component=u}),O(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Hw(a(s.targetSnapshot.root)).pipe(_c(),Ti(1))}),Qf(()=>this.afterPreactivation()),O(s=>{const a=function DF(n,e,t){const r=ca(n,e._root,t?t._root:void 0);return new _0(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),pt(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>O(r=>(new RF(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),Ti(1),pt({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new To(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Of(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Kn(s=>{if(i=!0,M0(s)){S0(s)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new Mc(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),S0(s)){const l=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||G0(r.source)};t.scheduleNavigation(l,la,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new jf(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(s))}catch(l){r.reject(l)}}return tr}))}))}cancelNavigationTransition(t,r,o){const i=new Mc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function G0(n){return n!==la}let q0=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[na]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return ye(SL)},providedIn:"root"}),n})(),SL=(()=>{class n extends q0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(B(bb))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ML=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return ye(IL)},providedIn:"root"}),n})();class xL{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let IL=(()=>{class n extends xL{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ot(n)))(r||n)}}(),n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vc=new Y("",{providedIn:"root",factory:()=>({})});let OL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:function(){return ye(AL)},providedIn:"root"}),n})(),AL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PL(n){throw n}function RL(n,e,t){return e.parse("/")}const kL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Et=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ye(HA),this.isNgZoneEnabled=!1,this.options=ye(Vc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||PL,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||RL,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ye(OL),this.routeReuseStrategy=ye(ML),this.urlCreationStrategy=ye(CF),this.titleStrategy=ye(q0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Qw(ye(Li,{optional:!0})??[]),this.navigationTransitions=ye(jc),this.urlSerializer=ye(oa),this.location=ye(Ih),this.isNgZoneEnabled=ye(ot)instanceof ot&&ot.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new eo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=v0(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),la,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const l={...o};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Wf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Io(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,la,null,r)}navigate(t,r={skipLocationChange:!1}){return function FL(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new j(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...kL}:!1===r?{...NL}:r,Io(t))return e0(this.currentUrlTree,t,o);const i=this.parseUrl(t);return e0(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const i=t[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uc=(()=>{class n{constructor(t,r,o,i,s,a){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new v;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof To&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Di(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Di(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Di(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function jm(n,e,t){return function $M(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?Lm:ad}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,t,r):o.removeAttribute(i,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(T(Et),T(Oo),function Qa(n){return function hS(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let o=0;for(;o<r;){const i=t[o];if(Ig(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof t[o];)o++;else{if(i===e)return t[o+1];o+=2}}}return null}(Tt(),n)}("tabindex"),T(Mr),T(hn),T(Do))},n.\u0275dir=se({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&G("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&t&&Vt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Sn]}),n})(),W0=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,o,i,s){this.router=t,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new et,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof To&&this.update()})}ngAfterContentInit(){Q(this.links.changes,Q(null)).pipe(Lo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ct(t).pipe(Lo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function LL(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(T(Et),T(hn),T(Mr),T(Us),T(Uc,8))},n.\u0275dir=se({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&Ov(o,Uc,5),2&t){let i;Tv(i=function Av(){return function wA(n,e){return n[or].queries[e].queryList}(k(),bg())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Sn]}),n})();class K0{}let jL=(()=>{class n{constructor(t,r,o,i,s){this.router=t,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Fr(t=>t instanceof To),Wr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=xl(i.providers,t,`Route: ${i.path}`));const s=i._injector??t,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return ct(o).pipe(Lo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Q(null);const i=o.pipe(xt(s=>null===s?Q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?ct([i,this.loader.loadComponent(r)]).pipe(Lo()):i})}}return n.\u0275fac=function(t){return new(t||n)(B(Et),B(tC),B(ar),B(K0),B(Zf))},n.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ep=new Y("");let J0=(()=>{class n{constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Lf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof To&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof m0&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new m0(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function gy(){throw new Error("invalid")}()},n.\u0275prov=J({token:n,factory:n.\u0275fac}),n})();var pn=(()=>((pn=pn||{})[pn.COMPLETE=0]="COMPLETE",pn[pn.FAILED=1]="FAILED",pn[pn.REDIRECTING=2]="REDIRECTING",pn))();const ji=!1;function to(n,e){return{\u0275kind:n,\u0275providers:e}}const tp=new Y("",{providedIn:"root",factory:()=>!1});function Q0(){const n=ye(lr);return e=>{const t=n.get(kl);if(e!==t.components[0])return;const r=n.get(Et),o=n.get(Z0);1===n.get(np)&&r.initialNavigation(),n.get(X0,null,oe.Optional)?.setUpPreloading(),n.get(ep,null,oe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const Z0=new Y(ji?"bootstrap done indicator":"",{factory:()=>new v}),np=new Y(ji?"initial navigation":"",{providedIn:"root",factory:()=>1});function HL(){let n=[];return n=ji?[{provide:ll,multi:!0,useFactory:()=>{const e=ye(Et);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function mF(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],to(1,n)}const X0=new Y(ji?"router preloader":"");function zL(n){return to(0,[{provide:X0,useExisting:jL},{provide:K0,useExisting:n}])}const ma=!1,eD=new Y(ma?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),GL=[Ih,{provide:oa,useClass:Af},Et,ua,{provide:Oo,useFactory:function Y0(n){return n.routerState.root},deps:[Et]},Zf,ma?{provide:tp,useValue:!0}:[]];function qL(){return new cC("Router",Et)}let rp=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[GL,ma&&r?.enableTracing?HL().\u0275providers:[],{provide:Li,multi:!0,useValue:t},{provide:eD,useFactory:YL,deps:[[Et,new hs,new fs]]},{provide:Vc,useValue:r||{}},r?.useHash?{provide:Do,useClass:O1}:{provide:Do,useClass:PC},{provide:ep,useFactory:()=>{const n=ye(KP),e=ye(ot),t=ye(Vc),r=ye(jc),o=ye(oa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new J0(o,r,n,e,t)}},r?.preloadingStrategy?zL(r.preloadingStrategy).\u0275providers:[],{provide:cC,multi:!0,useFactory:qL},r?.initialNavigation?QL(r):[],[{provide:tD,useFactory:Q0},{provide:lC,multi:!0,useExisting:tD}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Li,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(B(eD,8))},n.\u0275mod=Ln({type:n}),n.\u0275inj=Dn({imports:[Gf]}),n})();function YL(n){if(ma&&n)throw new j(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function QL(n){return["disabled"===n.initialNavigation?to(3,[{provide:Al,multi:!0,useFactory:()=>{const e=ye(Et);return()=>{e.setUpLocationChangeListener()}}},{provide:np,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?to(2,[{provide:np,useValue:0},{provide:Al,multi:!0,deps:[lr],useFactory:e=>{const t=e.get(I1,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(Et),i=e.get(Z0);(function VL(n,e){n.events.pipe(Fr(t=>t instanceof To||t instanceof Mc||t instanceof jf||t instanceof xc),O(t=>t instanceof To||t instanceof xc?pn.COMPLETE:t instanceof Mc&&(0===t.code||1===t.code)?pn.REDIRECTING:pn.FAILED),Fr(t=>t!==pn.REDIRECTING),Ti(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get(jc).afterPreactivation=()=>(r(!0),i.closed?Q(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const tD=new Y(ma?"Router Initializer":"");let XL=(()=>{const e=class{constructor(){this.title="Pokemon TCG Pocket Collector"}};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=lo({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){1&o&&Tn(0,"router-outlet")},dependencies:[Oc],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background-color:#000;min-height:100vh}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:30px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.data-overview[_ngcontent-%COMP%]{margin-top:30px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:20px 0}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;box-shadow:0 4px 6px #0000001a}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;opacity:.9}.stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0}.section[_ngcontent-%COMP%]{margin:40px 0;padding:20px 0;border-top:2px solid #e9ecef}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:20px}.sets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.set-card[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.set-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:18px}.rarity-stats[_ngcontent-%COMP%], .pack-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.rarity-item[_ngcontent-%COMP%], .pack-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#000;border-radius:5px;border-left:4px solid #007bff}.rarity-name[_ngcontent-%COMP%], .pack-name[_ngcontent-%COMP%]{font-weight:600;color:#fff}.rarity-count[_ngcontent-%COMP%], .pack-count[_ngcontent-%COMP%]{color:#ccc}.rarity-percentage[_ngcontent-%COMP%], .pack-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0}.feature[_ngcontent-%COMP%]{background-color:#000;padding:20px;border-radius:8px;border-left:4px solid #17a2b8}.feature[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:0;font-size:14px}.api-info[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:20px}.api-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0}.api-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;margin:0}.api-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace;color:#ff6b6b}.error[_ngcontent-%COMP%]{background-color:#000;color:#ff6b6b;padding:15px;border-radius:5px;margin-bottom:20px;text-align:center;border:1px solid #ff6b6b}.card-info[_ngcontent-%COMP%]{margin-top:30px}.card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}.card-item[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a}.card-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#495057;margin:0 0 10px;font-size:16px}.card-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#ccc}.note[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#ccc;margin-top:20px}.instructions[_ngcontent-%COMP%]{background-color:#000;border:1px solid #444;border-radius:8px;padding:20px;margin-top:30px}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:#fff}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#333;padding:2px 4px;border-radius:3px;font-family:Courier New,monospace}.data-info[_ngcontent-%COMP%]{background-color:#000;border-left:4px solid #007bff;padding:15px;margin-top:20px}.data-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-top:0;margin-bottom:10px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{width:200px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),n})();function nD(n,e,t,r,o,i,s){try{var a=n[i](s),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,o)}function y(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function s(l){nD(i,r,o,s,a,"next",l)}function a(l){nD(i,r,o,s,a,"throw",l)}s(void 0)})}}let e2=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json",this.LOCAL_CARDS_PATH="assets/cards/cards.json"}fetchCardsFromAPI(){return this.http.get(this.CARDS_API_URL)}downloadAndStoreCards(){return this.fetchCardsFromAPI().pipe(pt(r=>{localStorage.setItem("pokemonCards",JSON.stringify(r))}))}getStoredCards(){const r=localStorage.getItem("pokemonCards");return r?JSON.parse(r):null}loadCards(){return this.http.get(this.LOCAL_CARDS_PATH).pipe(O(r=>r||[]))}getCardsBySet(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.set===r)))}getCardsByType(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.type===r)))}getCardsByRarity(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.rarity===r)))}searchCardsByName(r){return this.loadCards().pipe(O(o=>o.filter(i=>i.label.eng.toLowerCase().includes(r.toLowerCase()))))}getUniqueSets(){return this.loadCards().pipe(O(r=>[...new Set(r.map(o=>o.set))]))}getUniqueTypes(){return this.loadCards().pipe(O(r=>[...new Set(r.map(o=>o.type).filter(o=>!!o))]))}getUniqueRarities(){return this.loadCards().pipe(O(r=>[...new Set(r.map(o=>o.rarity))]))}getUniquePacks(){return this.loadCards().pipe(O(r=>[...new Set(r.flatMap(o=>o.packs))]))}};let n=e;return e.\u0275fac=function(o){return new(o||e)(B(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),t2=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsData(){return this.http.get(this.CARDS_API_URL).pipe(Kn(r=>(console.error("Error downloading cards data:",r),Ii(()=>new Error("Failed to download cards data")))))}downloadCardsAsBlob(){return this.downloadCardsData().pipe(O(r=>{const o=JSON.stringify(r,null,2);return new Blob([o],{type:"application/json"})}))}triggerDownload(){this.downloadCardsAsBlob().subscribe({next:r=>{const o=window.URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download="cards.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)},error:r=>{console.error("Failed to download cards data:",r)}})}getStorageInstructions(){return"\nTo store the cards data locally:\n\n1. Create a 'cards' folder in src/assets/\n2. Use the downloadCardsAsBlob() method to get the data\n3. Save the file as 'cards.json' in src/assets/cards/\n\nAlternative: Use triggerDownload() to download the file and manually move it to the assets folder.\n\nNote: In a production environment, you would typically have a backend service \nto handle file storage and serving.\n    "}};let n=e;return e.\u0275fac=function(o){return new(o||e)(B(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),n2=(()=>{const e=class{constructor(r){this.http=r,this.CARDS_API_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/cards.json"}downloadCardsJson(){this.http.get(this.CARDS_API_URL).subscribe({next:r=>{const o=JSON.stringify(r,null,2),i=new Blob([o],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="cards.json",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`Downloaded ${r.length} cards to cards.json\n\nPlease move the file to: src/assets/cards/cards.json`)},error:r=>{console.error("Failed to download cards data:",r),alert("Failed to download cards data. Please check your internet connection.")}})}showSetupInstructions(){return`\n=== Pokemon TCG Pocket Collector Setup Instructions ===\n\n1. AUTOMATIC DOWNLOAD (Recommended):\n   - Click "Download cards.json" button\n   - Move the downloaded file to: src/assets/cards/cards.json\n   - Restart the development server\n\n2. MANUAL DOWNLOAD:\n   - Go to: ${this.CARDS_API_URL}\n   - Right-click and "Save As" to src/assets/cards/cards.json\n   - Restart the development server\n\n3. VERIFY SETUP:\n   - Click "Load Cards Data" to test the service\n   - Check browser console for detailed information\n   - Data will be cached in localStorage for offline use\n\n=== Service Features ===\n- \u2705 Fetch cards from Pokemon TCG Pocket database\n- \u2705 Store data locally for offline access\n- \u2705 Filter by set, type, rarity\n- \u2705 Search cards by name\n- \u2705 Get unique values for filters\n- \u2705 Automatic fallback to localStorage\n\nFor more information, check the browser console when using the services.\n    `}};let n=e;return e.\u0275fac=function(o){return new(o||e)(B(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),rD=(()=>{const e=class{constructor(r){this.http=r,this.BASE_PATH="assets/cards/",this.API_BASE="https://raw.githubusercontent.com/flibustier/pokemon-tcg-pocket-database/main/dist/"}loadSets(){return this.http.get(`${this.BASE_PATH}sets.json`)}loadRarities(){return this.http.get(`${this.BASE_PATH}rarity.json`)}loadCards(){return this.http.get(`${this.BASE_PATH}cards.json`)}loadAllData(){return Eo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(pt(r=>{}))}getSetByCode(r){return this.loadSets().pipe(O(o=>o.find(i=>i.code===r)))}getRarityName(r){return this.loadRarities().pipe(O(o=>o[r]))}getCardsBySetWithInfo(r){return Eo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(O(({cards:o,sets:i,rarities:s})=>{const a=i.find(l=>l.code===r);return o.filter(l=>l.set===r).map(l=>({...l,setInfo:a,fullRarityName:s[l.rarityCode]||l.rarity}))}))}getSetsWithCardCounts(){return Eo({cards:this.loadCards(),sets:this.loadSets()}).pipe(O(({cards:r,sets:o})=>o.map(i=>{const s=r.filter(a=>a.set===i.code).length;return{...i,actualCardCount:s}})))}getRarityDistribution(){return Eo({cards:this.loadCards(),rarities:this.loadRarities()}).pipe(O(({cards:r,rarities:o})=>{const i={};r.forEach(a=>{const l=a.rarityCode;i[l]=(i[l]||0)+1});const s=r.length;return Object.entries(i).map(([a,l])=>({code:a,name:o[a]||a,count:l,percentage:Math.round(l/s*100*100)/100})).sort((a,l)=>l.count-a.count)}))}getPackDistribution(){return this.loadCards().pipe(O(r=>{const o={};r.forEach(s=>{(Array.isArray(s.packs)?s.packs:[]).forEach(l=>{l&&l.trim()&&(o[l]=(o[l]||0)+1)})});const i=Object.values(o).reduce((s,a)=>s+a,0);return Object.entries(o).map(([s,a])=>({pack:s,count:a,percentage:i>0?Math.round(a/i*100*100)/100:0})).sort((s,a)=>a.count-s.count)}))}searchCardsEnhanced(r){return Eo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(O(({cards:o,sets:i,rarities:s})=>o.filter(l=>l.label.eng.toLowerCase().includes(r.toLowerCase())).map(l=>{const c=i.find(u=>u.code===l.set);return{...l,setInfo:c,fullRarityName:s[l.rarityCode]||l.rarity}})))}getComprehensiveStats(){return Eo({cards:this.loadCards(),sets:this.loadSets(),rarities:this.loadRarities()}).pipe(O(({cards:r,sets:o,rarities:i})=>({totalCards:r.length,totalSets:o.length,totalRarities:Object.keys(i).length,setBreakdown:o.map(a=>({...a,actualCardCount:r.filter(l=>l.set===a.code).length})),rarityBreakdown:Object.entries(i).map(([a,l])=>({code:a,name:l,count:r.filter(c=>c.rarityCode===a).length})),packBreakdown:this.calculatePackDistribution(r),dateRange:{earliest:o.reduce((a,l)=>new Date(l.releaseDate)<new Date(a)?l.releaseDate:a,o[0]?.releaseDate||""),latest:o.reduce((a,l)=>new Date(l.releaseDate)>new Date(a)?l.releaseDate:a,o[0]?.releaseDate||"")}})))}calculatePackDistribution(r){const o={};return r.forEach(i=>{(Array.isArray(i.packs)?i.packs:[]).forEach(a=>{a&&a.trim()&&(o[a]=(o[a]||0)+1)})}),Object.entries(o).map(([i,s])=>({pack:i,count:s})).sort((i,s)=>s.count-i.count)}};let n=e;return e.\u0275fac=function(o){return new(o||e)(B(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),oD=(()=>{const e=class{constructor(r,o,i,s){this.cardDataService=r,this.fileStorageService=o,this.assetsHelper=i,this.pokemonDataService=s}initializeCardData(){return this.cardDataService.downloadAndStoreCards().pipe(pt(r=>{this.logDataSummary(r)}),Kn(r=>(console.error("Failed to initialize card data:",r),Q(this.cardDataService.getStoredCards()||[]))))}downloadCardsFile(){this.assetsHelper.downloadCardsJson()}getStorageInstructions(){return this.assetsHelper.showSetupInstructions()}logDataSummary(r){new Set(r.map(a=>a.set)),new Set(r.map(a=>a.rarity)),new Set(r.flatMap(a=>a.packs))}getAllCards(){return this.cardDataService.loadCards()}getCardsBySet(r){return this.cardDataService.getCardsBySet(r)}getCardsByType(r){return this.cardDataService.getCardsByType(r)}getCardsByPack(r){return this.cardDataService.loadCards().pipe(O(o=>o.filter(i=>i.packs.includes(r))))}searchCards(r){return this.cardDataService.searchCardsByName(r)}getFilterOptions(){return new He(r=>{Promise.all([this.cardDataService.getUniqueSets().toPromise(),this.cardDataService.getUniqueTypes().toPromise(),this.cardDataService.getUniqueRarities().toPromise(),this.cardDataService.getUniquePacks().toPromise()]).then(([o,i,s,a])=>{r.next({sets:o||[],types:i||[],rarities:s||[],packs:a||[]}),r.complete()}).catch(o=>{r.error(o)})})}loadAllPokemonData(){return this.pokemonDataService.loadAllData().pipe(pt(r=>{this.logEnhancedDataSummary(r)}))}getAllSets(){return this.pokemonDataService.loadSets()}getSetsWithCounts(){return this.pokemonDataService.getSetsWithCardCounts()}getRarityMapping(){return this.pokemonDataService.loadRarities()}getSetInfo(r){return this.pokemonDataService.getSetByCode(r)}getCardsBySetEnhanced(r){return this.pokemonDataService.getCardsBySetWithInfo(r)}searchCardsEnhanced(r){return this.pokemonDataService.searchCardsEnhanced(r)}getRarityStats(){return this.pokemonDataService.getRarityDistribution()}getPackStats(){return this.pokemonDataService.getPackDistribution()}getComprehensiveStats(){return this.pokemonDataService.getComprehensiveStats()}logEnhancedDataSummary(r){}};let n=e;return e.\u0275fac=function(o){return new(o||e)(B(e2),B(t2),B(n2),B(rD))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();class op extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class iD extends op{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sD extends op{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class aD extends op{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $c=(()=>{return(n=$c||($c={})).Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",$c;var n})();class o2{constructor(e,{headers:t={},customFetch:r,region:o=$c.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=(n=>{let e;return e=n||(typeof fetch>"u"?(...t)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,L.__awaiter)(this,arguments,void 0,function*(t,r={}){var o;try{const{headers:i,method:s,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${t}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=a):"string"==typeof a?(c["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(c["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(_=>{throw"AbortError"===_.name?_:new iD(_)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new sD(f);if(!f.ok)throw new aD(f);let m,g=(null!==(o=f.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return m="application/json"===g?yield f.json():"application/octet-stream"===g||"application/pdf"===g?yield f.blob():"text/event-stream"===g?f:"multipart/form-data"===g?yield f.formData():yield f.text(),{data:m,error:null,response:f}}catch(i){return i instanceof Error&&"AbortError"===i.name?{data:null,error:new iD(i)}:{data:null,error:i,response:i instanceof aD||i instanceof sD?i.context:void 0}}})}}var i2=Z(358);const{PostgrestClient:lD}=i2,h2=class d2{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(e=navigator.userAgent)&&void 0!==e&&e.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const o=parseInt(t.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch{return!1}}};var Vi=(()=>{return(n=Vi||(Vi={}))[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",Vi;var n})(),gt=(()=>{return(n=gt||(gt={})).closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",gt;var n})(),Nn=(()=>{return(n=Nn||(Nn={})).close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",Nn;var n})(),Bc=(()=>((Bc||(Bc={})).websocket="websocket",Bc))(),no=(()=>{return(n=no||(no={})).Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",no;var n})();class y2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const o=t.getUint8(1),i=t.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(e.slice(s,s+o));s+=o;const l=r.decode(e.slice(s,s+i));return s+=i,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class cD{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le=(()=>{return(n=Le||(Le={})).abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",Le;var n})();const uD=(n,e,t={})=>{var r;const o=null!==(r=t.skipTypes)&&void 0!==r?r:[];return e?Object.keys(e).reduce((i,s)=>(i[s]=_2(s,n,e,o),i),{}):{}},_2=(n,e,t,r)=>{const i=e.find(a=>a.name===n)?.type,s=t[n];return i&&!r.includes(i)?dD(i,s):sp(s)},dD=(n,e)=>{if("_"===n.charAt(0)){const t=n.slice(1,n.length);return w2(e,t)}switch(n){case Le.bool:return v2(e);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return C2(e);case Le.json:case Le.jsonb:return b2(e);case Le.timestamp:return D2(e);default:return sp(e)}},sp=n=>n,v2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},C2=n=>{if("string"==typeof n){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},b2=n=>{if("string"==typeof n)try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},w2=(n,e)=>{if("string"!=typeof n)return n;const t=n.length-1;if("{"===n[0]&&"}"===n[t]){let i;const s=n.slice(1,t);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>dD(e,a))}return n},D2=n=>"string"==typeof n?n.replace(" ","T"):n,hD=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname=""===e.pathname||"/"===e.pathname?"/api/broadcast":e.pathname+"/api/broadcast",e.href};class ap{constructor(e,t,r={},o=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class ya{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ya.syncState(this.state,o,i,s),this.pendingDiffs.forEach(l=>{this.state=ya.syncDiff(this.state,l,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ya.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const i=this.cloneDeep(e),s=this.transformState(t),a={},l={};return this.map(i,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=i[c];if(d){const h=u.map(m=>m.presence_ref),f=d.map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0),g=d.filter(m=>h.indexOf(m.presence_ref)<0);p.length>0&&(a[c]=p),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,o)}static syncDiff(e,t,r,o){const{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,l)=>{var c;const u=null!==(c=e[a])&&void 0!==c?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,o(a,c,l),0===c.length&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return t[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ui=(()=>{return(n=Ui||(Ui={})).BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",Ui;var n})(),yr=(()=>{return(n=yr||(yr={})).SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",yr;var n})();class lp{constructor(e,t={config:{}},r){var o,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ap(this,Nn.join,this.params,this.timeout),this.rejoinTimer=new cD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nn.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new ya(this),this.broadcastEndpointURL=hD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(p=>p.filter))&&void 0!==i?i:[],d=!!this.bindings[Ui.PRESENCE]&&this.bindings[Ui.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(yr.CHANNEL_ERROR,p)),this._onClose(()=>e?.(yr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",function(){var p=y(function*({postgres_changes:g}){var m;if(r.socket.setAuth(),void 0!==g){const _=r.bindings.postgres_changes,x=null!==(m=_?.length)&&void 0!==m?m:0,C=[];for(let A=0;A<x;A++){const N=_[A],{filter:{event:W,schema:Jt,table:Ae,filter:lt}}=N,Qn=g&&g[A];if(!Qn||Qn.event!==W||Qn.schema!==Jt||Qn.table!==Ae||Qn.filter!==lt)return r.unsubscribe(),r.state=gt.errored,void e?.(yr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));C.push(Object.assign(Object.assign({},N),{id:Qn.id}))}return r.bindings.postgres_changes=C,void(e&&e(yr.SUBSCRIBED))}e?.(yr.SUBSCRIBED)});return function(g){return p.apply(this,arguments)}}()).receive("error",p=>{this.state=gt.errored,e?.(yr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(yr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(e){var t=this;return y(function*(r,o={}){return yield t.send({type:"presence",event:"track",payload:r},o.timeout||t.timeout)}).apply(this,arguments)}untrack(){var e=this;return y(function*(t={}){return yield e.send({type:"presence",event:"untrack"},t)}).apply(this,arguments)}on(e,t,r){return this.state===gt.joined&&e===Ui.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}httpSend(e,t){var r=this;return y(function*(o,i,s={}){var a;const l=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,c,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const h=yield u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(e){var t=this;return y(function*(r,o={}){var i,s;if(t._canPush()||"broadcast"!==r.type)return new Promise(a=>{var l,c,u;const d=t._push(r.type,r,o.timeout||t.timeout);"broadcast"===r.type&&!(null!==(u=null===(c=null===(l=t.params)||void 0===l?void 0:l.config)||void 0===c?void 0:c.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=r,u={method:"POST",headers:{Authorization:t.socket.accessTokenValue?`Bearer ${t.socket.accessTokenValue}`:"",apikey:t.socket.apiKey?t.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:t.subTopic,event:a,payload:l,private:t.private}]})};try{const d=yield t._fetchWithTimeout(t.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:t.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=gt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new ap(this,Nn.leave,{},e),r.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gt.closed,this.bindings={}}_fetchWithTimeout(e,t,r){var o=this;return y(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),a})()}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ap(this,e,t,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,i;const s=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Nn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(f=>{var p,g,m;return"*"===(null===(p=f.filter)||void 0===p?void 0:p.event)||(null===(m=null===(g=f.filter)||void 0===g?void 0:g.event)||void 0===m?void 0:m.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):null===(i=this.bindings[s])||void 0===i||i.filter(f=>{var p,g,m,_,x,C;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in f){const A=f.id,N=null===(p=f.filter)||void 0===p?void 0:p.event;return A&&(null===(g=t.ids)||void 0===g?void 0:g.includes(A))&&("*"===N||N?.toLocaleLowerCase()===(null===(m=t.data)||void 0===m?void 0:m.type.toLocaleLowerCase()))}{const A=null===(x=null===(_=f?.filter)||void 0===_?void 0:_.event)||void 0===x?void 0:x.toLocaleLowerCase();return"*"===A||A===(null===(C=t?.event)||void 0===C?void 0:C.toLocaleLowerCase())}}return f.type.toLocaleLowerCase()===s}).map(f=>{if("object"==typeof h&&"ids"in h){const p=h.data,{schema:g,table:m,commit_timestamp:_,type:x,errors:C}=p;h=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:_,eventType:x,new:{},old:{},errors:C}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),i={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&lp.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Nn.close,{},e)}_onError(e){this._on(Nn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=uD(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=uD(e.columns,e.old_record)),t}}const cp=()=>{},E2=[1e3,2e3,5e3,1e4];class x2{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cp,this.ref=0,this.reconnectTimer=null,this.logger=cp,this.conn=null,this.sendBuffer=[],this.serializer=new y2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return i=o||(typeof fetch>"u"?(...s)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...s)=>i(...s)},null===(r=t?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Bc.websocket}`,this.httpEndpoint=hD(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=h2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){var t=this;return y(function*(){const r=yield e.unsubscribe();return 0===t.channels.length&&t.disconnect(),r})()}removeAllChannels(){var e=this;return y(function*(){const t=yield Promise.all(e.channels.map(r=>r.unsubscribe()));return e.channels=[],e.disconnect(),t})()}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vi.connecting:return no.Connecting;case Vi.open:return no.Open;case Vi.closing:return no.Closing;default:return no.Closed}}isConnected(){return this.connectionState()===no.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new lp(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:o,ref:i}=e,s=()=>{this.encode(e,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${t} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var e=this;return y(function*(t=null){e._authPromise=e._performAuth(t);try{yield e._authPromise}finally{e._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var e=this;return y(function*(){var t;if(e.isConnected()){if(e.pendingHeartbeatRef){e.pendingHeartbeatRef=null,e.log("transport","heartbeat timeout. Attempting to re-establish connection");try{e.heartbeatCallback("timeout")}catch(r){e.log("error","error in heartbeat callback",r)}return e._wasManualDisconnect=!1,null===(t=e.conn)||void 0===t||t.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;e.isConnected()||null===(r=e.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}e.pendingHeartbeatRef=e._makeRef(),e.push({topic:"phoenix",event:"heartbeat",payload:{},ref:e.pendingHeartbeatRef});try{e.heartbeatCallback("sent")}catch(r){e.log("error","error in heartbeat callback",r)}e._setAuthSafely("heartbeat")}else try{e.heartbeatCallback("disconnected")}catch(r){e.log("error","error in heartbeat callback",r)}})()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return this.ref=e===this.ref?0:e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if("phoenix"===t.topic&&"phx_reply"===t.event)try{this.heartbeatCallback("ok"===t.payload.status?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=t;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(o,i,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{"keepAlive"===t.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Nn.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}_performAuth(){var e=this;return y(function*(t=null){let r;r=t||(e.accessToken?yield e.accessToken():e.accessTokenValue),e.accessTokenValue!=r&&(e.accessTokenValue=r,e.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.76.1"}),o.joinedOnce&&o._isJoined()&&o._push(Nn.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var e=this;return y(function*(){e._authPromise&&(yield e._authPromise)})()}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){var e=this;this.reconnectTimer=new cD(y(function*(){setTimeout(y(function*(){yield e._waitForAuthIfNeeded(),e.isConnected()||e.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(e){var t,r,o,i,s,a,l,c,u;if(this.transport=null!==(t=e?.transport)&&void 0!==t?t:null,this.timeout=null!==(r=e?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=e?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=e?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=e?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=e?.heartbeatCallback)&&void 0!==a?a:cp,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=e?.reconnectAfterMs)&&void 0!==l?l:d=>E2[d-1]||1e4,this.encode=null!==(c=e?.encode)&&void 0!==c?c:(d,h)=>h(JSON.stringify(d)),this.decode=null!==(u=e?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class up extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qe(n){return"object"==typeof n&&null!==n&&"__isStorageError"in n}class I2 extends up{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dp extends up{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const hp=n=>{let e;return e=n||(typeof fetch>"u"?(...t)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)},fp=n=>{if(Array.isArray(n))return n.map(t=>fp(t));if("function"==typeof n||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[o]=fp(r)}),e},pp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),A2=(n,e,t)=>(0,L.__awaiter)(void 0,void 0,void 0,function*(){const r=yield(0,L.__awaiter)(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(Z.bind(Z,397))).Response:Response});n instanceof r&&!t?.noResolveJson?n.json().then(o=>{const i=n.status||500,s=o?.statusCode||i+"";e(new I2(pp(o),i,s))}).catch(o=>{e(new dp(pp(o),o))}):e(new dp(pp(n),n))}),P2=(n,e,t,r)=>{const o={method:n,headers:e?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const e=Object.getPrototypeOf(n);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),t)):o};function _a(n,e,t,r,o,i){return(0,L.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(t,P2(e,r,o,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>A2(l,a,r))})})}function va(n,e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){return _a(n,"GET",e,t,r)})}function Jn(n,e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){return _a(n,"POST",e,r,o,t)})}function gp(n,e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){return _a(n,"PUT",e,r,o,t)})}function mp(n,e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){return _a(n,"DELETE",e,r,o,t)})}class k2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}var fD;fD=Symbol.toStringTag;const L2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class j2{constructor(e,t={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=hp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},pD),o);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield("PUT"==e?gp:Jn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}upload(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:pD.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(yield gp(this.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Qe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);t?.upsert&&(o["x-upsert"]="true");const i=yield Jn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new up("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}update(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}copy(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),i=yield Jn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{const o=yield Jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}download(e,t){const o=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(e);return new class N2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[fD]="BlobDownloadBuilder",this.promise=null}asStream(){return new k2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}(()=>va(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield va(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:fp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}exists(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function R2(n,e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){return _a(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r)&&r instanceof dp&&[400,404].includes(r.originalError?.status))return{data:!1,error:r};throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),o=[],i=t?.download?`download=${!0===t.download?"":t.download}`:"";""!==i&&o.push(i);const a=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});""!==l&&o.push(l);let c=o.join("&");return""!==c&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield mp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}list(e,t,r){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},L2),t),{prefix:e||""});return{data:yield Jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}listV2(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Jn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const mD={"X-Client-Info":"storage-js/2.76.1"};class V2{constructor(e,t={},r,o){this.shouldThrowOnError=!1;const i=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mD),t),this.fetch=hp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}createBucket(e){return(0,L.__awaiter)(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}updateBucket(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield mp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}}class U2{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mD),t),this.fetch=hp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}listBuckets(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==e?.limit&&t.set("limit",e.limit.toString()),void 0!==e?.offset&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield va(this.fetch,o,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>"ANALYTICS"===a.type):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield mp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}}const yp={"X-Client-Info":"storage-js/2.76.1","Content-Type":"application/json"};class yD extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function gn(n){return"object"==typeof n&&null!==n&&"__isStorageVectorsError"in n}class _p extends yD{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $2 extends yD{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}const vp=n=>{let e;return e=n||(typeof fetch>"u"?(...t)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)},_D=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),H2=(n,e,t)=>(0,L.__awaiter)(void 0,void 0,void 0,function*(){if(n&&"object"==typeof n&&"status"in n&&"ok"in n&&"number"==typeof n.status&&!t?.noResolveJson){const o=n.status||500,i=n;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";e(new _p(_D(s),o,a))}).catch(()=>{e(new _p(i.statusText||`HTTP ${o} error`,o,o+""))}):e(new _p(i.statusText||`HTTP ${o} error`,o,o+""))}else e(new $2(_D(n),n))}),z2=(n,e,t,r)=>{const o={method:n,headers:e?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const e=Object.getPrototypeOf(n);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),t)):o};function mn(n,e,t,r,o){return(0,L.__awaiter)(this,void 0,void 0,function*(){return function zc(n,e,t,r,o,i){return(0,L.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(t,z2(e,r,o,i)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return c&&c.includes("application/json")?l.json():{}}).then(l=>s(l)).catch(l=>H2(l,a,r))})})}(n,"POST",e,r,o,t)})}class G2{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yp),t),this.fetch=vp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield mn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}})}listIndexes(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield mn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}})}}class q2{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yp),t),this.fetch=vp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield mn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}getVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}listVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield mn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}queryVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield mn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}}class W2{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yp),t),this.fetch=vp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield mn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}listBuckets(){return(0,L.__awaiter)(this,arguments,void 0,function*(e={}){try{return{data:yield mn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,L.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield mn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gn(t))return{data:null,error:t};throw t}})}}class K2 extends W2{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new J2(this.url,this.headers,e,this.fetch)}}class J2 extends G2{constructor(e,t,r,o){super(e,t,o),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,L.__awaiter)(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Y2(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Y2 extends q2{constructor(e,t,r,o,i){super(e,t,i),this.vectorBucketName=r,this.indexName=o}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,L.__awaiter)(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,L.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Q2 extends V2{constructor(e,t={},r,o){super(e,t,r,o)}from(e){return new j2(this.url,this.headers,e,this.fetch)}get vectors(){return new K2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new U2(this.url+"/iceberg",this.headers,this.fetch)}}let Ca="";Ca=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const X2={headers:{"X-Client-Info":`supabase-js-${Ca}/2.76.1`}},ej={schema:"public"},tj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nj={};var vD=Z(397);const ij=(n,e,t)=>{const r=(n=>{let e;return e=n||(typeof fetch>"u"?vD.default:fetch),(...t)=>e(...t)})(t),o=typeof Headers>"u"?vD.Headers:Headers;return function(){var i=y(function*(s,a){var l;const c=null!==(l=yield e())&&void 0!==l?l:n;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},$i=3e4,wp="X-Supabase-Api-Version",bD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ba extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ee(n){return"object"==typeof n&&null!==n&&"__isAuthError"in n}class pj extends ba{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Ao extends ba{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ro extends ba{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class oo extends ro{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Bi extends ro{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gc extends ro{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qc extends ro{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wD extends ro{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dp extends ro{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ep(n){return ee(n)&&"AuthRetryableFetchError"===n.name}class DD extends ro{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Sp extends ro{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ED=" \t\n\r=".split(""),_j=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<ED.length;e+=1)n[ED[e].charCodeAt(0)]=-2;for(let e=0;e<Wc.length;e+=1)n[Wc[e].charCodeAt(0)]=e;return n})();function Kc(n,e,t){if(null!==n)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;)t(Wc[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6;else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;)t(Wc[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6}function SD(n,e,t){const r=_j[n];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8}function MD(n){const e=[],t=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function Cj(n,e,t){if(0===e.utf8seq){if(n<=127)return void t(n);for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(2===e.utf8seq)e.codepoint=31&n;else if(3===e.utf8seq)e.codepoint=15&n;else{if(4!==e.utf8seq)throw new Error("Invalid UTF-8 sequence");e.codepoint=7&n}e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|63&n,e.utf8seq-=1,0===e.utf8seq&&t(e.codepoint)}}(s,r,t)};for(let s=0;s<n.length;s+=1)SD(n.charCodeAt(s),o,i);return e.join("")}function vj(n,e){if(!(n<=127)){if(n<=2047)return e(192|n>>6),void e(128|63&n);if(n<=65535)return e(224|n>>12),e(128|n>>6&63),void e(128|63&n);if(n<=1114111)return e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),void e(128|63&n);throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}e(n)}function Hi(n){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<n.length;o+=1)SD(n.charCodeAt(o),t,r);return new Uint8Array(e)}function Po(n){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};return n.forEach(o=>Kc(o,t,r)),Kc(null,t,r),e.join("")}const yn=()=>typeof window<"u"&&typeof document<"u",Ro={tested:!1,writable:!1},ID=()=>{if(!yn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Ro.tested)return Ro.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ro.tested=!0,Ro.writable=!0}catch{Ro.tested=!0,Ro.writable=!1}return Ro.writable},TD=n=>{let e;return e=n||(typeof fetch>"u"?(...t)=>Promise.resolve().then(Z.bind(Z,397)).then(({default:r})=>r(...t)):fetch),(...t)=>e(...t)},Sj=n=>"object"==typeof n&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json,zi=function(){var n=y(function*(e,t,r){yield e.setItem(t,JSON.stringify(r))});return function(t,r,o){return n.apply(this,arguments)}}(),ko=function(){var n=y(function*(e,t){const r=yield e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(t,r){return n.apply(this,arguments)}}(),io=function(){var n=y(function*(e,t){yield e.removeItem(t)});return function(t,r){return n.apply(this,arguments)}}();class Jc{constructor(){this.promise=new Jc.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Mp(n){const e=n.split(".");if(3!==e.length)throw new Sp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!hj.test(e[r]))throw new Sp("JWT not in base64url format");return{header:JSON.parse(MD(e[0])),payload:JSON.parse(MD(e[1])),signature:Hi(e[2]),raw:{header:e[0],payload:e[1]}}}function xp(){return(xp=y(function*(n){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})).apply(this,arguments)}function Ij(n){return("0"+n.toString(16)).substr(-2)}function Ip(){return(Ip=y(function*(n){const t=(new TextEncoder).encode(n),r=yield crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function Tp(){return Tp=y(function*(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=yield function Oj(n){return Ip.apply(this,arguments)}(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Tp.apply(this,arguments)}function Gi(n,e){return Op.apply(this,arguments)}function Op(){return Op=y(function*(n,e,t=!1){const r=function Tj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let i=0;i<56;i++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,Ij).join("")}();let o=r;t&&(o+="/PASSWORD_RECOVERY"),yield zi(n,`${e}-code-verifier`,o);const i=yield function Aj(n){return Tp.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),Op.apply(this,arguments)}Jc.promiseConstructor=Promise;const Pj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Fj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qi(n){if(!Fj.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ap(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function OD(n){return JSON.parse(JSON.stringify(n))}const No=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Lj=[502,503,504];function AD(n){return Pp.apply(this,arguments)}function Pp(){return(Pp=y(function*(n){var e;if(!Sj(n))throw new Dp(No(n),0);if(Lj.includes(n.status))throw new Dp(No(n),n.status);let t,r;try{t=yield n.json()}catch(i){throw new Ao(No(i),i)}const o=function Rj(n){const e=n.headers.get(wp);if(!e||!e.match(Pj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}(n);if(o&&o.getTime()>=bD["2024-01-01"].timestamp&&"object"==typeof t&&t&&"string"==typeof t.code?r=t.code:"object"==typeof t&&t&&"string"==typeof t.error_code&&(r=t.error_code),r){if("weak_password"===r)throw new DD(No(t),n.status,(null===(e=t.weak_password)||void 0===e?void 0:e.reasons)||[]);if("session_not_found"===r)throw new oo}else if("object"==typeof t&&t&&"object"==typeof t.weak_password&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new DD(No(t),n.status,t.weak_password.reasons);throw new pj(No(t),n.status||500,r)})).apply(this,arguments)}const jj=(n,e,t,r)=>{const o={method:n,headers:e?.headers||{}};return"GET"===n?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};function he(n,e,t,r){return Rp.apply(this,arguments)}function Rp(){return Rp=y(function*(n,e,t,r){var o;const i=Object.assign({},r?.headers);i[wp]||(i[wp]=bD["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield function Vj(n,e,t,r,o,i){return kp.apply(this,arguments)}(n,e,t+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),Rp.apply(this,arguments)}function kp(){return(kp=y(function*(n,e,t,r,o,i){const s=jj(e,r,o,i);let a;try{a=yield n(t,Object.assign({},s))}catch(l){throw console.error(l),new Dp(No(l),0)}if(a.ok||(yield AD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield AD(l)}})).apply(this,arguments)}function Yn(n){var e;let t=null;return function Bj(n){return n.access_token&&n.refresh_token&&n.expires_in}(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=function wj(n){return Math.round(Date.now()/1e3)+n}(n.expires_in))),{data:{session:t,user:null!==(e=n.user)&&void 0!==e?e:n},error:null}}function PD(n){const e=Yn(n);return!e.error&&n.weak_password&&"object"==typeof n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&"string"==typeof n.weak_password.message&&n.weak_password.reasons.reduce((t,r)=>t&&"string"==typeof r,!0)&&(e.data.weak_password=n.weak_password),e}function so(n){var e;return{data:{user:null!==(e=n.user)&&void 0!==e?e:n},error:null}}function Uj(n){return{data:n,error:null}}function $j(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:i}=n,s=(0,L.__rest)(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function RD(n){return n}const Np=["global","local","others"];class Hj{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=TD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(e){var t=this;return y(function*(r,o=Np[0]){if(Np.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Np.join(", ")}`);try{return yield he(t.fetch,"POST",`${t.url}/logout?scope=${o}`,{headers:t.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ee(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(e){var t=this;return y(function*(r,o={}){try{return yield he(t.fetch,"POST",`${t.url}/invite`,{body:{email:r,data:o.data},headers:t.headers,redirectTo:o.redirectTo,xform:so})}catch(i){if(ee(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(e){var t=this;return y(function*(){try{const{options:r}=e,o=(0,L.__rest)(e,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield he(t.fetch,"POST",`${t.url}/admin/generate_link`,{body:i,headers:t.headers,xform:$j,redirectTo:r?.redirectTo})}catch(r){if(ee(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(e){var t=this;return y(function*(){try{return yield he(t.fetch,"POST",`${t.url}/admin/users`,{body:e,headers:t.headers,xform:so})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}})()}listUsers(e){var t=this;return y(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield he(t.fetch,"GET",`${t.url}/admin/users`,{headers:t.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=e?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:RD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ee(u))return{data:{users:[]},error:u};throw u}})()}getUserById(e){var t=this;return y(function*(){qi(e);try{return yield he(t.fetch,"GET",`${t.url}/admin/users/${e}`,{headers:t.headers,xform:so})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}})()}updateUserById(e,t){var r=this;return y(function*(){qi(e);try{return yield he(r.fetch,"PUT",`${r.url}/admin/users/${e}`,{body:t,headers:r.headers,xform:so})}catch(o){if(ee(o))return{data:{user:null},error:o};throw o}})()}deleteUser(e){var t=this;return y(function*(r,o=!1){qi(r);try{return yield he(t.fetch,"DELETE",`${t.url}/admin/users/${r}`,{headers:t.headers,body:{should_soft_delete:o},xform:so})}catch(i){if(ee(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(e){var t=this;return y(function*(){qi(e.userId);try{const{data:r,error:o}=yield he(t.fetch,"GET",`${t.url}/admin/users/${e.userId}/factors`,{headers:t.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_deleteFactor(e){var t=this;return y(function*(){qi(e.userId),qi(e.id);try{return{data:yield he(t.fetch,"DELETE",`${t.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:t.headers}),error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_listOAuthClients(e){var t=this;return y(function*(){var r,o,i,s,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=yield he(t.fetch,"GET",`${t.url}/admin/oauth/clients`,{headers:t.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=e?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:RD});if(d.error)throw d.error;const h=yield d.json(),f=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(c=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==c?c:[];return p.length>0&&(p.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ee(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(e){var t=this;return y(function*(){try{return yield he(t.fetch,"POST",`${t.url}/admin/oauth/clients`,{body:e,headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_getOAuthClient(e){var t=this;return y(function*(){try{return yield he(t.fetch,"GET",`${t.url}/admin/oauth/clients/${e}`,{headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_deleteOAuthClient(e){var t=this;return y(function*(){try{return yield he(t.fetch,"DELETE",`${t.url}/admin/oauth/clients/${e}`,{headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(e){var t=this;return y(function*(){try{return yield he(t.fetch,"POST",`${t.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})()}}function kD(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Wi={debug:!!(globalThis&&ID()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class ND extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zj extends ND{}function qj(n,e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=y(function*(n,e,t){Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,0===e?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=y(function*(i){if(!i){if(0===e)throw Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new zj(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Wi.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield t()}finally{Wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),Fp.apply(this,arguments)}function LD(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Jj(n){const e=(new TextEncoder).encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}class mt extends Error{constructor({message:e,code:t,cause:r,name:o}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=t}}class Yc extends mt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Qj({error:n,options:e}){var t,r,o;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(e.signal instanceof AbortSignal)return new mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if("ConstraintError"===n.name){if(!0===(null===(t=i.authenticatorSelection)||void 0===t?void 0:t.requireResidentKey))return new mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if("conditional"===e.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if("InvalidStateError"===n.name)return new mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if("NotAllowedError"===n.name)return new mt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("NotSupportedError"===n.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if("SecurityError"===n.name){const s=window.location.hostname;if(!jD(s))return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(i.rp.id!==s)return new mt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("TypeError"===n.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if("UnknownError"===n.name)return new mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Zj({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(e.signal instanceof AbortSignal)return new mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if("NotAllowedError"===n.name)return new mt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("SecurityError"===n.name){const r=window.location.hostname;if(!jD(r))return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(t.rpId!==r)return new mt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("UnknownError"===n.name)return new mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}const eV=new class Xj{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function tV(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,o=(0,L.__rest)(n,["challenge","user","excludeCredentials"]),i=Hi(e).buffer,s=Object.assign(Object.assign({},t),{id:Hi(t.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Hi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function nV(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=(0,L.__rest)(n,["challenge","allowCredentials"]),o=Hi(e).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let s=0;s<t.length;s++){const a=t[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Hi(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function rV(n){var e;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Po(new Uint8Array(n.response.attestationObject)),clientDataJSON:Po(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:null!==(e=t.authenticatorAttachment)&&void 0!==e?e:void 0}}function oV(n){var e;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const t=n,r=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Po(new Uint8Array(o.authenticatorData)),clientDataJSON:Po(new Uint8Array(o.clientDataJSON)),signature:Po(new Uint8Array(o.signature)),userHandle:o.userHandle?Po(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(e=t.authenticatorAttachment)&&void 0!==e?e:void 0}}function jD(n){return"localhost"===n||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function VD(){var n,e;return!!(yn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(n=navigator?.credentials)||void 0===n?void 0:n.create)&&"function"==typeof(null===(e=navigator?.credentials)||void 0===e?void 0:e.get))}function jp(){return(jp=y(function*(n){try{const e=yield navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Yc("Browser returned unexpected credential type",e)}:{data:null,error:new Yc("Empty credential response",e)}}catch(e){return{data:null,error:Qj({error:e,options:n})}}})).apply(this,arguments)}function Vp(){return(Vp=y(function*(n){try{const e=yield navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Yc("Browser returned unexpected credential type",e)}:{data:null,error:new Yc("Empty credential response",e)}}catch(e){return{data:null,error:Zj({error:e,options:n})}}})).apply(this,arguments)}const aV={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},lV={userVerification:"preferred",hints:["security-key"]};function Qc(...n){const e=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of n)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(t(s))r[i]=s;else if(e(s)){const a=r[i];r[i]=e(a)?Qc(a,s):Qc(s)}else r[i]=s}return r}class dV{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(e){var t=this;return y(function*(){return t.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))})()}_challenge(e,t){var r=this;return y(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!c)return{data:null,error:u};const d=a??eV.createNewAbortSignal();if("create"===c.webauthn.type){const{user:h}=c.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(c.webauthn.type){case"create":{const h=function cV(n,e){return Qc(aV,n,e||{})}(c.webauthn.credential_options.publicKey,l?.create),{data:f,error:p}=yield function iV(n){return jp.apply(this,arguments)}({publicKey:h,signal:d});return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=function uV(n,e){return Qc(lV,n,e||{})}(c.webauthn.credential_options.publicKey,l?.request),{data:f,error:p}=yield function sV(n){return Vp.apply(this,arguments)}(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:o,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(c){return ee(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in challenge",c)}}}).apply(this,arguments)}_verify(e){var t=this;return y(function*({challengeId:r,factorId:o,webauthn:i}){return t.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(e,t){var r=this;return y(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}},l){if(!i)return{data:null,error:new ba("rpId is required for WebAuthn authentication")};try{if(!VD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:u};const{webauthn:d}=c;return r._verify({factorId:o,challengeId:c.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return ee(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in authenticate",c)}}}).apply(this,arguments)}_register(e,t){var r=this;return y(function*({friendlyName:o,rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a},l){if(!i)return{data:null,error:new ba("rpId is required for WebAuthn registration")};try{if(!VD())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:c,error:u}=yield r._enroll({friendlyName:o});if(!c)return yield r.client.mfa.listFactors().then(f=>{var p;return null===(p=f.data)||void 0===p?void 0:p.all.find(g=>"webauthn"===g.factor_type&&g.friendly_name===o&&"unverified"!==g.status)}).then(f=>f?r.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:d,error:h}=yield r._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return d?r._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(c){return ee(c)?{data:null,error:c}:{data:null,error:new Ao("Unexpected error in register",c)}}}).apply(this,arguments)}}!function Wj(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const hV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.76.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function UD(n,e,t){return Up.apply(this,arguments)}function Up(){return(Up=y(function*(n,e,t){return yield t()})).apply(this,arguments)}const Ki={},pV=(()=>{class n{get jwks(){var t,r;return null!==(r=null===(t=Ki[this.storageKey])||void 0===t?void 0:t.jwks)&&void 0!==r?r:{keys:[]}}set jwks(t){Ki[this.storageKey]=Object.assign(Object.assign({},Ki[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return null!==(r=null===(t=Ki[this.storageKey])||void 0===t?void 0:t.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ki[this.storageKey]=Object.assign(Object.assign({},Ki[this.storageKey]),{cachedAt:t})}constructor(t){var o,i,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&yn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},hV),t);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Hj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=TD(s.fetch),this.lock=s.lock||UD,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.lock=s.lock?s.lock:yn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?qj:UD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dV(this)},this.persistSession?(s.storage?this.storage=s.storage:ID()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=kD(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=kD(this.memoryStorage)),yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",function(){var a=y(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.76.1) ${(new Date).toISOString()}`,...t),this}initialize(){var t=this;return y(function*(){return t.initializePromise||(t.initializePromise=y(function*(){return yield t._acquireLock(-1,y(function*(){return yield t._initialize()}))})()),yield t.initializePromise})()}_initialize(){var t=this;return y(function*(){var r;try{const o=function Ej(n){const e={},t=new URL(n);if(t.hash&&"#"===t.hash[0])try{new URLSearchParams(t.hash.substring(1)).forEach((o,i)=>{e[i]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}(window.location.href);let i="none";if(t._isImplicitGrantCallback(o)?i="implicit":(yield t._isPKCECallback(o))&&(i="pkce"),yn()&&t.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield t._getSessionFromURL(o,i);if(a){if(t._debug("#_initialize()","error detecting session from URL",a),function yj(n){return ee(n)&&"AuthImplicitGrantRedirectError"===n.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield t._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return t._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield t._saveSession(l),setTimeout(y(function*(){"recovery"===c?yield t._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield t._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield t._recoverAndRefresh(),{error:null}}catch(o){return ee(o)?{error:o}:{error:new Ao("Unexpected error during initialization",o)}}finally{yield t._handleVisibilityChange(),t._debug("#_initialize()","end")}})()}signInAnonymously(t){var r=this;return y(function*(){var o,i,s;try{const a=yield he(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=t?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=t?.options)||void 0===s?void 0:s.captchaToken}},xform:Yn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(ee(a))return{data:{user:null,session:null},error:a};throw a}})()}signUp(t){var r=this;return y(function*(){var o,i,s;try{let a;if("email"in t){const{email:h,password:f,options:p}=t;let g=null,m=null;"pkce"===r.flowType&&([g,m]=yield Gi(r.storage,r.storageKey)),a=yield he(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:null!==(o=p?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:m},xform:Yn})}else{if(!("phone"in t))throw new Gc("You must provide either an email or phone number and a password");{const{phone:h,password:f,options:p}=t;a=yield he(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:h,password:f,data:null!==(i=p?.data)&&void 0!==i?i:{},channel:null!==(s=p?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Yn})}}const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(ee(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(t){var r=this;return y(function*(){try{let o;if("email"in t){const{email:a,password:l,options:c}=t;o=yield he(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:PD})}else{if(!("phone"in t))throw new Gc("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:c}=t;o=yield he(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:PD})}}const{data:i,error:s}=o;return s?{data:{user:null,session:null},error:s}:i&&i.session&&i.user?(i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Bi}}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(t){var r=this;return y(function*(){var o,i,s,a;return yield r._handleProviderSignIn(t.provider,{redirectTo:null===(o=t.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=t.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=t.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=t.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(t){var r=this;return y(function*(){return yield r.initializePromise,r._acquireLock(-1,y(function*(){return r._exchangeCodeForSession(t)}))})()}signInWithWeb3(t){var r=this;return y(function*(){const{chain:o}=t;switch(o){case"ethereum":return yield r.signInWithEthereum(t);case"solana":return yield r.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(t){var r=this;return y(function*(){var o,i,s,a,l,c,u,d,h,f,p;let g,m;if("message"in t)g=t.message,m=t.signature;else{const{wallet:x,statement:C,options:A}=t;let N;if(yn())if("object"==typeof x)N=x;else{const _n=window;if(!("ethereum"in _n)||"object"!=typeof _n.ethereum||!("request"in _n.ethereum)||"function"!=typeof _n.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");N=_n.ethereum}else{if("object"!=typeof x||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=x}const W=new URL(null!==(o=A?.url)&&void 0!==o?o:window.location.href),Jt=yield N.request({method:"eth_requestAccounts"}).then(_n=>_n).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Jt||0===Jt.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Ae=LD(Jt[0]);let lt=null===(i=A?.signInWithEthereum)||void 0===i?void 0:i.chainId;lt||(lt=function Kj(n){return parseInt(n,16)}(yield N.request({method:"eth_chainId"}))),g=function Yj(n){var e;const{chainId:t,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=n;if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null!==(e=n.statement)&&void 0!==e&&e.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`);const m=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${LD(n.address)}\n\n${n.statement?`${n.statement}\n`:""}`;let _=`URI: ${d}\nVersion: ${h}\nChain ID: ${t}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(_+=`\nExpiration Time: ${o.toISOString()}`),a&&(_+=`\nNot Before: ${a.toISOString()}`),l&&(_+=`\nRequest ID: ${l}`),c){let x="\nResources:";for(const C of c){if(!C||"string"!=typeof C)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);x+=`\n- ${C}`}_+=x}return`${m}\n${_}`}({domain:W.host,address:Ae,statement:C,uri:W.href,version:"1",chainId:lt,nonce:null===(s=A?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(l=null===(a=A?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==l?l:new Date,expirationTime:null===(c=A?.signInWithEthereum)||void 0===c?void 0:c.expirationTime,notBefore:null===(u=A?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=A?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(h=A?.signInWithEthereum)||void 0===h?void 0:h.resources}),m=yield N.request({method:"personal_sign",params:[Jj(g),Ae]})}try{const{data:_,error:x}=yield he(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:g,signature:m},null!==(f=t.options)&&void 0!==f&&f.captchaToken?{gotrue_meta_security:{captcha_token:null===(p=t.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Yn});if(x)throw x;return _&&_.session&&_.user?(_.session&&(yield r._saveSession(_.session),yield r._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:x}):{data:{user:null,session:null},error:new Bi}}catch(_){if(ee(_))return{data:{user:null,session:null},error:_};throw _}})()}signInWithSolana(t){var r=this;return y(function*(){var o,i,s,a,l,c,u,d,h,f,p,g;let m,_;if("message"in t)m=t.message,_=t.signature;else{const{wallet:C,statement:A,options:N}=t;let W;if(yn())if("object"==typeof C)W=C;else{const Ae=window;if(!("solana"in Ae)||"object"!=typeof Ae.solana||!("signIn"in Ae.solana&&"function"==typeof Ae.solana.signIn||"signMessage"in Ae.solana&&"function"==typeof Ae.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");W=Ae.solana}else{if("object"!=typeof C||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=C}const Jt=new URL(null!==(o=N?.url)&&void 0!==o?o:window.location.href);if("signIn"in W&&W.signIn){const Ae=yield W.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},N?.signInWithSolana),{version:"1",domain:Jt.host,uri:Jt.href}),A?{statement:A}:null));let lt;if(Array.isArray(Ae)&&Ae[0]&&"object"==typeof Ae[0])lt=Ae[0];else{if(!(Ae&&"object"==typeof Ae&&"signedMessage"in Ae&&"signature"in Ae))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");lt=Ae}if(!("signedMessage"in lt&&"signature"in lt&&("string"==typeof lt.signedMessage||lt.signedMessage instanceof Uint8Array)&&lt.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof lt.signedMessage?lt.signedMessage:(new TextDecoder).decode(lt.signedMessage),_=lt.signature}else{if(!("signMessage"in W&&"function"==typeof W.signMessage&&"publicKey"in W&&"object"==typeof W&&W.publicKey&&"toBase58"in W.publicKey&&"function"==typeof W.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${Jt.host} wants you to sign in with your Solana account:`,W.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${Jt.href}`,`Issued At: ${null!==(s=null===(i=N?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=N?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...null!==(l=N?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...null!==(c=N?.signInWithSolana)&&void 0!==c&&c.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...null!==(u=N?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...null!==(d=N?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...null!==(f=null===(h=N?.signInWithSolana)||void 0===h?void 0:h.resources)&&void 0!==f&&f.length?["Resources",...N.signInWithSolana.resources.map(lt=>`- ${lt}`)]:[]].join("\n");const Ae=yield W.signMessage((new TextEncoder).encode(m),"utf8");if(!(Ae&&Ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=Ae}}try{const{data:x,error:C}=yield he(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:m,signature:Po(_)},null!==(p=t.options)&&void 0!==p&&p.captchaToken?{gotrue_meta_security:{captcha_token:null===(g=t.options)||void 0===g?void 0:g.captchaToken}}:null),xform:Yn});if(C)throw C;return x&&x.session&&x.user?(x.session&&(yield r._saveSession(x.session),yield r._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:C}):{data:{user:null,session:null},error:new Bi}}catch(x){if(ee(x))return{data:{user:null,session:null},error:x};throw x}})()}_exchangeCodeForSession(t){var r=this;return y(function*(){const o=yield ko(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:l}=yield he(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:t,code_verifier:i},xform:Yn});if(yield io(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Bi}}catch(a){if(ee(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})()}signInWithIdToken(t){var r=this;return y(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:l}=t,c=yield he(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Yn}),{data:u,error:d}=c;return d?{data:{user:null,session:null},error:d}:u&&u.session&&u.user?(u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d}):{data:{user:null,session:null},error:new Bi}}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(t){var r=this;return y(function*(){var o,i,s,a,l;try{if("email"in t){const{email:c,options:u}=t;let d=null,h=null;"pkce"===r.flowType&&([d,h]=yield Gi(r.storage,r.storageKey));const{error:f}=yield he(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:c,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:c,options:u}=t,{data:d,error:h}=yield he(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:c,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(l=u?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new Gc("You must provide either an email or phone number.")}catch(c){if(ee(c))return{data:{user:null,session:null},error:c};throw c}})()}verifyOtp(t){var r=this;return y(function*(){var o,i;try{let s,a;"options"in t&&(s=null===(o=t.options)||void 0===o?void 0:o.redirectTo,a=null===(i=t.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:c}=yield he(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Yn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,d=l.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==t.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithSSO(t){var r=this;return y(function*(){var o,i,s;try{let a=null,l=null;return"pkce"===r.flowType&&([a,l]=yield Gi(r.storage,r.storageKey)),yield he(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(i=null===(o=t.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=t?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:Uj})}catch(a){if(ee(a))return{data:null,error:a};throw a}})()}reauthenticate(){var t=this;return y(function*(){return yield t.initializePromise,yield t._acquireLock(-1,y(function*(){return yield t._reauthenticate()}))})()}_reauthenticate(){var t=this;return y(function*(){try{return yield t._useSession(function(){var r=y(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new oo;const{error:a}=yield he(t.fetch,"GET",`${t.url}/reauthenticate`,{headers:t.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(t){var r=this;return y(function*(){try{const o=`${r.url}/resend`;if("email"in t){const{email:i,type:s,options:a}=t,{error:l}=yield he(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in t){const{phone:i,type:s,options:a}=t,{data:l,error:c}=yield he(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new Gc("You must provide either an email or phone number and a type")}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var t=this;return y(function*(){return yield t.initializePromise,yield t._acquireLock(-1,y(function*(){return t._useSession(function(){var o=y(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(t,r){var o=this;return y(function*(){o._debug("#_acquireLock","begin",t);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=y(function*(){return yield i,yield r()})();return o.pendingInLock.push(y(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,t,y(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(y(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(t){var r=this;return y(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield t(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var t=this;return y(function*(){t._debug("#__loadSession()","begin"),t.lockAcquired||t._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield ko(t.storage,t.storageKey);if(t._debug("#getSession()","session from storage",o),null!==o&&(t._isValidSession(o)?r=o:(t._debug("#getSession()","session from storage is not valid"),yield t._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(t._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(t.userStorage){const l=yield ko(t.userStorage,t.storageKey+"-user");r.user=l?.user?l.user:Ap()}if(t.storage.isServer&&r.user){let l=t.suppressGetSessionWarning;r=new Proxy(r,{get:(u,d,h)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,t.suppressGetSessionWarning=!0),Reflect.get(u,d,h))})}return{data:{session:r},error:null}}const{data:s,error:a}=yield t._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{t._debug("#__loadSession()","end")}})()}getUser(t){var r=this;return y(function*(){return t?yield r._getUser(t):(yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._getUser()})))})()}_getUser(t){var r=this;return y(function*(){try{return t?yield he(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:t,xform:so}):yield r._useSession(function(){var o=y(function*(i){var s,a,l;const{data:c,error:u}=i;if(u)throw u;return null!==(s=c.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield he(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(a=c.session)||void 0===a?void 0:a.access_token)&&void 0!==l?l:void 0,xform:so}):{data:{user:null},error:new oo}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return function mj(n){return ee(n)&&"AuthSessionMissingError"===n.name}(o)&&(yield r._removeSession(),yield io(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(t){var r=this;return y(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(t){var r=this;return y(function*(o,i={}){try{return yield r._useSession(function(){var s=y(function*(a){const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new oo;const u=l.session;let d=null,h=null;"pkce"===r.flowType&&null!=o.email&&([d,h]=yield Gi(r.storage,r.storageKey));const{data:f,error:p}=yield he(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:so});if(p)throw p;return u.user=f.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(a){return s.apply(this,arguments)}}())}catch(s){if(ee(s))return{data:{user:null},error:s};throw s}}).apply(this,arguments)}setSession(t){var r=this;return y(function*(){return yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._setSession(t)}))})()}_setSession(t){var r=this;return y(function*(){try{if(!t.access_token||!t.refresh_token)throw new oo;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:l}=Mp(t.access_token);if(l.exp&&(i=l.exp,s=i<=o),s){const{data:c,error:u}=yield r._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=yield r._getUser(t.access_token);if(u)throw u;a={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(o){if(ee(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(t){var r=this;return y(function*(){return yield r.initializePromise,yield r._acquireLock(-1,y(function*(){return yield r._refreshSession(t)}))})()}_refreshSession(t){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;if(!t){const{data:c,error:u}=i;if(u)throw u;t=null!==(s=c.session)&&void 0!==s?s:void 0}if(!t?.refresh_token)throw new oo;const{data:a,error:l}=yield r._callRefreshToken(t.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(t,r){var o=this;return y(function*(){try{if(!yn())throw new qc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new qc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new wD("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new qc("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new wD("No code detected.");const{data:A,error:N}=yield o._exchangeCodeForSession(t.code);if(N)throw N;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:u,token_type:d}=t;if(!(a&&c&&l&&d))throw new qc("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let p=h+f;u&&(p=parseInt(u));const g=p-h;1e3*g<=$i&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const m=p-f;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,p,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,p,h);const{data:_,error:x}=yield o._getUser(a);if(x)throw x;const C={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:d,user:_.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(i){if(ee(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantCallback(t){return Boolean(t.access_token||t.error_description)}_isPKCECallback(t){var r=this;return y(function*(){const o=yield ko(r.storage,`${r.storageKey}-code-verifier`);return!(!t.code||!o)})()}signOut(){var t=this;return y(function*(r={scope:"global"}){return yield t.initializePromise,yield t._acquireLock(-1,y(function*(){return yield t._signOut(r)}))}).apply(this,arguments)}_signOut(){var t=this;return y(function*({scope:r}={scope:"global"}){return yield t._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;if(l)return{error:l};const c=null===(s=a.session)||void 0===s?void 0:s.access_token;if(c){const{error:u}=yield t.admin.signOut(c,r);if(u&&(!function gj(n){return ee(n)&&"AuthApiError"===n.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return{error:u}}return"others"!==r&&(yield t._removeSession(),yield io(t.storage,`${t.storageKey}-code-verifier`)),{error:null}});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(t){var r=this;const o=function Dj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=16*Math.random()|0;return("x"==n?e:3&e|8).toString(16)})}(),i={id:o,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),y(function*(){yield r.initializePromise,yield r._acquireLock(-1,y(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(t){var r=this;return y(function*(){return yield r._useSession(function(){var o=y(function*(i){var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;yield null===(s=r.stateChangeEmitters.get(t))||void 0===s?void 0:s.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(t))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(t){var r=this;return y(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield Gi(r.storage,r.storageKey,!0));try{return yield he(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(l){if(ee(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var t=this;return y(function*(){var r;try{const{data:o,error:i}=yield t.getUser();if(i)throw i;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(ee(o))return{data:null,error:o};throw o}})()}linkIdentity(t){var r=this;return y(function*(){return"token"in t?r.linkIdentityIdToken(t):r.linkIdentityOAuth(t)})()}linkIdentityOAuth(t){var r=this;return y(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=y(function*(l){var c,u,d,h,f;const{data:p,error:g}=l;if(g)throw g;const m=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,t.provider,{redirectTo:null===(c=t.options)||void 0===c?void 0:c.redirectTo,scopes:null===(u=t.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=t.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield he(r.fetch,"GET",m,{headers:r.headers,jwt:null!==(f=null===(h=p.session)||void 0===h?void 0:h.access_token)&&void 0!==f?f:void 0})});return function(l){return a.apply(this,arguments)}}());if(s)throw s;return yn()&&!(null!==(o=t.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:t.provider,url:i?.url},error:null}}catch(i){if(ee(i))return{data:{provider:t.provider,url:null},error:i};throw i}})()}linkIdentityIdToken(t){var r=this;return y(function*(){return yield r._useSession(function(){var o=y(function*(i){var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:u,token:d,access_token:h,nonce:f}=t,p=yield he(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=l?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Yn}),{data:g,error:m}=p;return m?{data:{user:null,session:null},error:m}:g&&g.session&&g.user?(g.session&&(yield r._saveSession(g.session),yield r._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:m}):{data:{user:null,session:null},error:new Bi}}catch(a){if(ee(a))return{data:{user:null,session:null},error:a};throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(t){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s,a;const{data:l,error:c}=i;if(c)throw c;return yield he(r.fetch,"DELETE",`${r.url}/user/identities/${t.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=l.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(t){var r=this;return y(function*(){const o=`#_refreshAccessToken(${t.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function xj(n,e){return new Promise((r,o)=>{y(function*(){for(let i=0;i<1/0;i++)try{const s=yield n(i);if(!e(i,null,s))return void r(s)}catch(s){if(!e(i,s))return void o(s)}})()})}(function(){var s=y(function*(a){return a>0&&(yield function Mj(n){return xp.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield he(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:r.headers,xform:Yn})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const l=200*Math.pow(2,s);return a&&Ep(a)&&Date.now()+l-i<$i})}catch(i){if(r._debug(o,"error",i),ee(i))return{data:{session:null,user:null},error:i};throw i}finally{r._debug(o,"end")}})()}_isValidSession(t){return"object"==typeof t&&null!==t&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){var o=this;return y(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),yn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}})()}_recoverAndRefresh(){var t=this;return y(function*(){var r,o;const i="#_recoverAndRefresh()";t._debug(i,"begin");try{const s=yield ko(t.storage,t.storageKey);if(s&&t.userStorage){let l=yield ko(t.userStorage,t.storageKey+"-user");!t.storage.isServer&&Object.is(t.storage,t.userStorage)&&!l&&(l={user:s.user},yield zi(t.userStorage,t.storageKey+"-user",l)),s.user=null!==(r=l?.user)&&void 0!==r?r:Ap()}else if(s&&!s.user&&!s.user){const l=yield ko(t.storage,t.storageKey+"-user");l&&l?.user?(s.user=l.user,yield io(t.storage,t.storageKey+"-user"),yield zi(t.storage,t.storageKey,s)):s.user=Ap()}if(t._debug(i,"session from storage",s),!t._isValidSession(s))return t._debug(i,"session is not valid"),void(null!==s&&(yield t._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(t._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(t.autoRefreshToken&&s.refresh_token){const{error:l}=yield t._callRefreshToken(s.refresh_token);l&&(console.error(l),Ep(l)||(t._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield t._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:l,error:c}=yield t._getUser(s.access_token);!c&&l?.user?(s.user=l.user,yield t._saveSession(s),yield t._notifyAllSubscribers("SIGNED_IN",s)):t._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),t._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else yield t._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return t._debug(i,"error",s),void console.error(s)}finally{t._debug(i,"end")}})()}_callRefreshToken(t){var r=this;return y(function*(){var o,i;if(!t)throw new oo;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new Jc;const{data:a,error:l}=yield r._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new oo;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return r.refreshingDeferred.resolve(c),c}catch(a){if(r._debug(s,"error",a),ee(a)){const l={data:null,error:a};return Ep(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(t,r){var o=this;return y(function*(i,s,a=!0){const l=`#_notifyAllSubscribers(${i})`;o._debug(l,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const c=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=y(function*(h){try{yield h.callback(i,s)}catch(f){c.push(f)}});return function(h){return d.apply(this,arguments)}}());if(yield Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(t){var r=this;return y(function*(){r._debug("#_saveSession()",t),r.suppressGetSessionWarning=!0;const o=Object.assign({},t);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield zi(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=OD(s);yield zi(r.storage,r.storageKey,a)}else{const s=OD(o);yield zi(r.storage,r.storageKey,s)}})()}_removeSession(){var t=this;return y(function*(){t._debug("#_removeSession()"),yield io(t.storage,t.storageKey),yield io(t.storage,t.storageKey+"-code-verifier"),yield io(t.storage,t.storageKey+"-user"),t.userStorage&&(yield io(t.userStorage,t.storageKey+"-user")),yield t._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&yn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var t=this;return y(function*(){yield t._stopAutoRefresh(),t._debug("#_startAutoRefresh()");const r=setInterval(()=>t._autoRefreshTokenTick(),$i);t.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(y(function*(){yield t.initializePromise,yield t._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var t=this;return y(function*(){t._debug("#_stopAutoRefresh()");const r=t.autoRefreshTicker;t.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var t=this;return y(function*(){t._removeVisibilityChangedCallback(),yield t._startAutoRefresh()})()}stopAutoRefresh(){var t=this;return y(function*(){t._removeVisibilityChangedCallback(),yield t._stopAutoRefresh()})()}_autoRefreshTokenTick(){var t=this;return y(function*(){t._debug("#_autoRefreshTokenTick()","begin");try{yield t._acquireLock(0,y(function*(){try{const r=Date.now();try{return yield t._useSession(function(){var o=y(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void t._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/$i);t._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield t._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{t._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof ND))throw r;t._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var t=this;return y(function*(){if(t._debug("#_handleVisibilityChange()"),!yn()||!window?.addEventListener)return t.autoRefreshToken&&t.startAutoRefresh(),!1;try{t.visibilityChangedCallback=y(function*(){return yield t._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",t.visibilityChangedCallback),yield t._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(t){var r=this;return y(function*(){const o=`#_onVisibilityChanged(${t})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),t||(yield r.initializePromise,yield r._acquireLock(-1,y(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(t,r,o){var i=this;return y(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,l]=yield Gi(i.storage,i.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${t}?${s.join("&")}`})()}_unenroll(t){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;return l?{data:null,error:l}:yield he(r.fetch,"DELETE",`${r.url}/factors/${t.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}})()}_enroll(t){var r=this;return y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s,a;const{data:l,error:c}=i;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},"phone"===t.factorType?{phone:t.phone}:"totp"===t.factorType?{issuer:t.issuer}:{}),{data:d,error:h}=yield he(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=l?.session)||void 0===s?void 0:s.access_token});return h?{data:null,error:h}:("totp"===t.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}})()}_verify(t){var r=this;return y(function*(){return r._acquireLock(-1,y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:"create"===t.webauthn.type?rV(t.webauthn.credential_response):oV(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=yield he(r.fetch,"POST",`${r.url}/factors/${t.factorId}/verify`,{body:c,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?{data:null,error:d}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}}))})()}_challenge(t){var r=this;return y(function*(){return r._acquireLock(-1,y(function*(){try{return yield r._useSession(function(){var o=y(function*(i){var s;const{data:a,error:l}=i;if(l)return{data:null,error:l};const c=yield he(r.fetch,"POST",`${r.url}/factors/${t.factorId}/challenge`,{body:t,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:tV(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:nV(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ee(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(t){var r=this;return y(function*(){const{data:o,error:i}=yield r._challenge({factorId:t.factorId});return i?{data:null,error:i}:yield r._verify({factorId:t.factorId,challengeId:o.id,code:t.code})})()}_listFactors(){var t=this;return y(function*(){var r;const{data:{user:o},error:i}=yield t.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var t=this;return y(function*(){return t._acquireLock(-1,y(function*(){return yield t._useSession(function(){var r=y(function*(o){var i,s;const{data:{session:a},error:l}=o;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Mp(a.access_token);let u=null;c.aal&&(u=c.aal);let d=u;return(null!==(s=null===(i=a.user.factors)||void 0===i?void 0:i.filter(p=>"verified"===p.status))&&void 0!==s?s:[]).length>0&&(d="aal2"),{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:c.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(t){var r=this;return y(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:l,error:c}=yield he(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(c)throw c;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=a,s=l.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(t){var r=this;return y(function*(o,i={}){try{let s=o;if(!s){const{data:m,error:_}=yield r.getSession();if(_||!m.session)return{data:null,error:_};s=m.session.access_token}const{header:a,payload:l,signature:c,raw:{header:u,payload:d}}=Mp(s);i?.allowExpired||function kj(n){if(!n)throw new Error("Missing exp claim");if(n<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const h=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!h){const{error:m}=yield r.getUser(s);if(m)throw m;return{data:{claims:l,header:a,signature:c},error:null}}const f=function Nj(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),p=yield crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!(yield crypto.subtle.verify(f,p,c,function bj(n){const e=[];return function xD(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(n.charCodeAt(t+1)-56320&65535|o),t+=1}vj(r,e)}}(n,t=>e.push(t)),new Uint8Array(e)}(`${u}.${d}`))))throw new Sp("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}}).apply(this,arguments)}}return n.nextInstanceID=0,n})();class gV extends pV{constructor(e){super(e)}}class mV{constructor(e,t,r){var o,i,s;this.supabaseUrl=e,this.supabaseKey=t;const a=function lj(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function sj(n){return n.endsWith("/")?n:n+"/"}(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function aj(n,e){var t,r;const{db:o,auth:i,realtime:s,global:a}=n,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(t=d?.headers)&&void 0!==t?t:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(f=y(function*(){return""}),function(){return f.apply(this,arguments)})};var f;return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}(r??{},{db:ej,realtime:nj,auth:Object.assign(Object.assign({},tj),{storageKey:l}),global:X2});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=ij(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new lD(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Q2(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new o2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e=this;return y(function*(){var t,r;if(e.accessToken)return yield e.accessToken();const{data:o}=yield e.auth.getSession();return null!==(r=null===(t=o.session)||void 0===t?void 0:t.access_token)&&void 0!==r?r:e.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c},u,d){return new gV({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>"authorization"===f.toLowerCase())})}_initRealtimeClient(e){return new x2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function _V(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(null==n)return!1;const e=n.match(/^v(\d+)\./);return!!e&&parseInt(e[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $D_supabase_url="https://hpqwzclyjrfivcmkzwpo.supabase.co",$D_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwcXd6Y2x5anJmaXZjbWt6d3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2ODMzMjUsImV4cCI6MjA3NjI1OTMyNX0.pN-NPncmQCJoiBlYnFk77bAdxXEu5NAn3Fi8bk_c4wI";let wa=(()=>{const e=class{constructor(){this.currentUserSubject=new Rn(null),this.currentUser$=this.currentUserSubject.asObservable(),this.isInitialized=!1,this.initializeClient()}initializeClient(){var r=this;return y(function*(){try{r.supabase=((n,e,t)=>new mV(n,e,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}))($D_supabase_url,$D_supabase_anonKey),r.isInitialized=!0,yield r.checkExistingSession()}catch(o){console.error("Error initializing Supabase client:",o)}})()}checkExistingSession(){var r=this;return y(function*(){const o=localStorage.getItem("currentUser");if(o)try{const i=JSON.parse(o);r.currentUserSubject.next(i)}catch(i){console.error("Error parsing saved user:",i),localStorage.removeItem("currentUser")}})()}signInFallback(r,o){var i=this;return y(function*(){try{const a=[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r&&l.password===o);return a?(localStorage.setItem("currentUser",JSON.stringify(a)),i.currentUserSubject.next(a),{user:a,error:null}):{user:null,error:"Invalid username or password"}}catch(s){return console.error("Fallback sign in error:",s),{user:null,error:"Sign in failed. Please try again."}}})()}signIn(r,o){var i=this;return y(function*(){try{i.isInitialized||(yield new Promise(l=>{const c=()=>{i.isInitialized?l(void 0):setTimeout(c,50)};c()})),yield new Promise(l=>setTimeout(l,100));const{data:s,error:a}=yield i.supabase.from("profiles").select("*").eq("username",r).eq("password",o).single();return a?(console.error("Database query error:",a),console.log("Trying fallback authentication..."),yield i.signInFallback(r,o)):s?(localStorage.setItem("currentUser",JSON.stringify(s)),i.currentUserSubject.next(s),{user:s,error:null}):{user:null,error:"User not found"}}catch(s){if(console.error("Sign in error:",s),s&&"object"==typeof s&&"message"in s){const a=s.message;if(a.includes("NavigatorLockAcquireTimeoutError")||a.includes("lock"))return console.log("Lock error detected, using fallback authentication..."),yield i.signInFallback(r,o)}return console.log("Error occurred, trying fallback authentication..."),yield i.signInFallback(r,o)}})()}signOut(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}getCurrentUser(){return this.currentUserSubject.value}isSignedIn(){return null!==this.currentUserSubject.value}getProfileByUsername(r){var o=this;return y(function*(){try{o.isInitialized||(yield new Promise(a=>{const l=()=>{o.isInitialized?a():setTimeout(l,50)};l()}));const{data:i,error:s}=yield o.supabase.from("profiles").select("*").eq("username",r).maybeSingle();return s?(console.warn("getProfileByUsername fallback due to error:",s.message),[{id:"1",username:"test",password:"test",role:"user",friend_code:"FRIEND123",created_at:(new Date).toISOString()},{id:"2",username:"admin",password:"admin",role:"admin",friend_code:"FRIEND456",created_at:(new Date).toISOString()}].find(l=>l.username===r)||null):i||null}catch(i){return console.error("Error in getProfileByUsername:",i),null}})()}getUserCards(r,o){var i=this;return y(function*(){try{const s=parseInt(r);if(isNaN(s))return{cards:[],error:"Invalid user ID format"};const a=1e3;let l=0,c=[],u=!0;for(;u;){const{data:d,error:h}=yield i.supabase.from("user_cards").select("*").eq("user_id",s).range(l,l+a-1);if(h)return{cards:[],error:h.message};d&&d.length>0?(c=c.concat(d),l+=a,u=d.length===a,o&&o(c.length)):u=!1}return{cards:c,error:null}}catch(s){return console.error("Error fetching user cards:",s),{cards:[],error:"Failed to fetch user cards"}}})()}updateCardQuantity(r,o,i){var s=this;return y(function*(){try{const a=parseInt(r);if(isNaN(a))return{success:!1,error:"Invalid user ID format"};if(i<=0){const{error:l}=yield s.supabase.from("user_cards").delete().eq("user_id",a).eq("card_def_key",o);if(l)return{success:!1,error:l.message}}else{const{data:l,error:c}=yield s.supabase.from("user_cards").select("*").eq("user_id",a).eq("card_def_key",o).maybeSingle();if(c)return console.error("Error checking existing card:",c),{success:!1,error:c.message};if(l){const{error:u}=yield s.supabase.from("user_cards").update({quantity:i}).eq("user_id",a).eq("card_def_key",o);if(u)return{success:!1,error:u.message}}else{const{error:u}=yield s.supabase.from("user_cards").insert({user_id:a,card_def_key:o,quantity:i});if(u)return{success:!1,error:u.message}}}return{success:!0,error:null}}catch(a){return console.error("Error updating card quantity:",a),{success:!1,error:"Failed to update card quantity"}}})()}getCardQuantity(r,o){var i=this;return y(function*(){try{const{data:s,error:a}=yield i.supabase.from("user_cards").select("quantity").eq("user_id",r).eq("card_def_key",o).single();return a||!s?0:s.quantity||0}catch(s){return console.error("Error fetching card quantity:",s),0}})()}syncUserCollection(r,o){var i=this;return y(function*(){try{const{cards:s,error:a}=yield i.getUserCards(r,o);if(a)return console.error("Error syncing user collection:",a),{};const l={};return s.forEach(c=>{l[c.card_def_key]=c.quantity}),l}catch(s){return console.error("Error syncing user collection:",s),{}}})()}bulkReplaceUserCollection(r,o){var i=this;return y(function*(){try{const s=parseInt(r);if(isNaN(s))return{success:!1,error:"Invalid user ID format"};const{error:a}=yield i.supabase.from("user_cards").delete().eq("user_id",s);if(a)return console.error("Error deleting existing cards:",a),{success:!1,error:a.message};const l=Object.entries(o).filter(([c,u])=>u>0).map(([c,u])=>({user_id:s,card_def_key:c,quantity:u}));if(l.length>0){const{error:c}=yield i.supabase.from("user_cards").insert(l);if(c)return console.error("Error inserting new cards:",c),{success:!1,error:c.message};console.log(`\u2705 Bulk sync completed: ${l.length} cards inserted`)}else console.log("\u2705 Bulk sync completed: No cards to insert (collection is empty)");return{success:!0,error:null}}catch(s){return console.error("Error in bulk replace user collection:",s),{success:!1,error:"Failed to bulk replace user collection"}}})()}};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),BD=(()=>{const e=class{constructor(){this.rarityMap=new Map([["C",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["U",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["R",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["RR",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["AR",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["SR",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["SAR",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["IM",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["UR",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["CR",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["S",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["SSR",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}],["Common",{code:"C",symbol:"\u25ca",name:"Common",displayName:"\u25ca - Common",order:1}],["Uncommon",{code:"U",symbol:"\u25ca\u25ca",name:"Uncommon",displayName:"\u25ca\u25ca - Uncommon",order:2}],["Rare",{code:"R",symbol:"\u25ca\u25ca\u25ca",name:"Rare",displayName:"\u25ca\u25ca\u25ca - Rare",order:3}],["Double Rare",{code:"RR",symbol:"\u25ca\u25ca\u25ca\u25ca",name:"Double Rare",displayName:"\u25ca\u25ca\u25ca\u25ca - Double Rare",order:4}],["Art Rare",{code:"AR",symbol:"\u2606",name:"Art Rare",displayName:"\u2606 - Art Rare",order:5}],["Super Rare",{code:"SR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Special Art Rare",{code:"SAR",symbol:"\u2606\u2606",name:"Super Rare",displayName:"\u2606\u2606 - Super Rare /Special Art Rare",order:6}],["Immersive Rare",{code:"IM",symbol:"\u2606\u2606\u2606",name:"Immersive Rare",displayName:"\u2606\u2606\u2606 - Immersive Rare",order:7}],["Ultimate Rare",{code:"UR",symbol:"\u{1f451}",name:"Ultimate Rare",displayName:"\u{1f451} - Ultimate Rare",order:8}],["Crown Rare",{code:"CR",symbol:"\u{1f451}",name:"Crown Rare",displayName:"\u{1f451} - Crown Rare",order:8}],["Shiny",{code:"S",symbol:"\u2735",name:"Shiny",displayName:"\u2735 - Shiny",order:9}],["Shiny Super Rare",{code:"SSR",symbol:"\u2735\u2735",name:"Shiny Super Rare",displayName:"\u2735\u2735 - Shiny Super Rare",order:10}]])}getRarityInfo(r){return this.rarityMap.get(r)}getDisplayName(r){const o=this.getRarityInfo(r);return o?o.displayName:r}getSymbol(r){const o=this.getRarityInfo(r);return o?o.symbol:r}getAllRarities(){return Array.from(this.rarityMap.values()).filter(r=>!r.code.includes(" ")).sort((r,o)=>r.order-o.order)}getRarityOrder(r){const o=this.getRarityInfo(r);return o?o.order:999}sortRarities(r){return r.sort((o,i)=>this.getRarityOrder(o)-this.getRarityOrder(i))}isRare(r){return["IM","UR","SSR"].includes(r)}isSuperRare(r){return["SR","SAR","IM","UR","SSR"].includes(r)}getNormalizedCode(r){const o=this.getRarityInfo(r);return o?"SAR"===o.code||"Special Art Rare"===r?"SR":o.code:r}getStandardizedDisplayName(r){const o=this.getNormalizedCode(r),i=this.getRarityInfo(o);return i?i.displayName:r}getUnifiedRarities(){return this.getAllRarities().filter(o=>"SAR"!==o.code)}groupCardsByNormalizedRarity(r){const o=new Map;return r.forEach(i=>{if(!i.rarityCode)return;const s=this.getNormalizedCode(i.rarityCode);o.has(s)||o.set(s,[]),o.get(s).push(i)}),o}};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function vV(n,e){if(1&n&&(w(0,"div",4),P(1),D()),2&n){const t=q();F(1),Dt(" ",t.error," ")}}function CV(n,e){1&n&&(w(0,"div",5)(1,"h2"),P(2,"Loading your collection..."),D(),Tn(3,"div",6),D())}function bV(n,e){if(1&n&&(w(0,"span",28),P(1),D()),2&n){const t=q(2).$implicit;F(1),Tr("[",t.primarySetCode,"] - ",t.primarySetName,"")}}function wV(n,e){if(1&n&&(w(0,"div",20)(1,"div",21)(2,"span",22),P(3),D(),w(4,"strong"),P(5),D()(),w(6,"div",23),Ce(7,bV,2,2,"span",24),w(8,"span",25),P(9),D(),w(10,"span",26),P(11),D(),w(12,"span",27),P(13),D()()()),2&n){const t=q(),r=t.index,o=t.$implicit;At("top-pick",0===r),F(3),Dt("#",r+1,""),F(2),On(o.packName),F(2),z("ngIf",o.primarySetCode),F(2),Dt("",o.missingCards," missing cards"),F(2),Dt("",o.completionPercentage,"% complete"),F(2),Tr("(",o.ownedCards,"/",o.totalCards,")")}}function DV(n,e){if(1&n&&(_o(0),Ce(1,wV,14,9,"div",19),vo()),2&n){const t=e.$implicit,r=q(3);F(1),z("ngIf",!r.excludeDeluxePack||!r.isDeluxeA4B(t.packName))}}function EV(n,e){if(1&n&&(w(0,"div",14)(1,"details",15)(2,"summary"),P(3,"\u{1f381} Pack Opening Suggestions"),D(),w(4,"p",16),P(5,"Optimized recommendations based on your missing cards"),D(),w(6,"div",17),Ce(7,DV,2,1,"ng-container",18),D()()()),2&n){const t=q(2);F(7),z("ngForOf",t.packSuggestions)}}function SV(n,e){if(1&n&&(w(0,"div",42)(1,"span",43),P(2),D(),w(3,"div",44)(4,"div",45),Tn(5,"div",46),D(),w(6,"span",47),P(7),D()()()),2&n){const t=e.$implicit;z("ngClass","rarity-"+t.code),Vt("title",t.name+": "+t.owned+"/"+t.total+" ("+t.percentage+"%)"),F(2),On(t.name),F(3),Ts("width",t.percentage,"%"),F(2),Tr("",t.owned,"/",t.total,"")}}function MV(n,e){if(1&n&&(w(0,"div",39)(1,"h5"),P(2,"Rarity Progress:"),D(),w(3,"div",40),Ce(4,SV,8,7,"div",41),D()()),2&n){const t=q(2).$implicit;F(4),z("ngForOf",t.rarityBreakdown)}}function xV(n,e){if(1&n&&(w(0,"div",32)(1,"div",33)(2,"h4"),P(3),D(),w(4,"span",34),P(5),D()(),w(6,"div",35),Tn(7,"div",36),D(),w(8,"p",37),P(9),D(),Ce(10,MV,5,1,"div",38),D()),2&n){const t=q().$implicit;F(3),Tr("[",t.code,"] - ",t.name,""),F(2),Dt("",t.percentage,"%"),F(2),Ts("width",t.percentage,"%"),F(2),Tr("",t.owned,"/",t.total," cards"),F(1),z("ngIf",t.rarityBreakdown&&t.rarityBreakdown.length>0)}}function IV(n,e){if(1&n&&(_o(0),Ce(1,xV,11,8,"div",31),vo()),2&n){const t=e.$implicit;F(1),z("ngIf",t.total>0)}}function TV(n,e){if(1&n&&(w(0,"div",29)(1,"details")(2,"summary"),P(3,"\u{1f4e6} Set Completion Progress"),D(),w(4,"div",30),Ce(5,IV,2,1,"ng-container",18),D()()()),2&n){const t=q(2);F(5),z("ngForOf",t.setProgress)}}function OV(n,e){if(1&n&&(w(0,"div",51)(1,"div",52)(2,"h4"),P(3),D(),w(4,"span",53),P(5),D()(),w(6,"div",54)(7,"div",55),Tn(8,"div",56),D(),w(9,"span",57),P(10),D()()()),2&n){const t=q().$implicit;z("ngClass","rarity-"+t.code),Vt("title",t.name+": "+t.owned+"/"+t.total+" ("+t.percentage+"%)"),F(3),On(t.name),F(2),Tr("",t.owned,"/",t.total,""),F(3),Ts("width",t.percentage,"%"),F(2),Dt("",t.percentage,"%")}}function AV(n,e){if(1&n&&(_o(0),Ce(1,OV,11,8,"div",50),vo()),2&n){const t=e.$implicit;F(1),z("ngIf",t.total>0)}}function PV(n,e){if(1&n&&(w(0,"div",48)(1,"details")(2,"summary"),P(3,"\u2b50 Collection by Rarity"),D(),w(4,"div",49),Ce(5,AV,2,1,"ng-container",18),D()()()),2&n){const t=q(2);F(5),z("ngForOf",t.userRarityStats)}}function RV(n,e){if(1&n){const t=on();w(0,"div",7)(1,"div",8)(2,"label",9)(3,"input",10),G("ngModelChange",function(o){return Se(t),Me(q().excludeDeluxePack=o)})("ngModelChange",function(){return Se(t),Me(q().excludeModelChange())}),D(),P(4," Exclude A4B - DELUXE PACK "),D()(),Ce(5,EV,8,1,"div",11),Ce(6,TV,6,1,"div",12),Ce(7,PV,6,1,"div",13),D()}if(2&n){const t=q();F(3),z("ngModel",t.excludeDeluxePack),F(2),z("ngIf",t.packSuggestions.length>0),F(1),z("ngIf",t.setProgress.length>0),F(1),z("ngIf",t.userRarityStats.length>0)}}let kV=(()=>{const e=class{constructor(r,o,i,s){this.dataManager=r,this.supabaseService=o,this.router=i,this.rarityService=s,this.title="Pokemon TCG Pocket Collector",this.cards=[],this.sets=[],this.rarityStats=[],this.packStats=[],this.loading=!1,this.error=null,this.dataLoaded=!1,this.userCollectionLoaded=!1,this.userCards=[],this.userStats={totalOwned:0,uniqueCards:0,completionPercentage:0,rareCards:0,recentSetsOwned:0,missingCommons:0,missingRares:0},this.setProgress=[],this.userRarityStats=[],this.recentCards=[],this.nearestCompleteSet=null,this.packSuggestions=[],this.excludeDeluxePack=!0}ngOnInit(){this.supabaseService.isSignedIn()?this.loadAllData():this.router.navigate(["/signin"])}loadCards(){this.loading=!0,this.error=null,this.dataManager.initializeCardData().subscribe({next:r=>{this.cards=r,this.loading=!1},error:r=>{this.error="Failed to load cards data",this.loading=!1,console.error("Error loading cards:",r)}})}loadAllData(){this.loading=!0,this.error=null,this.dataManager.loadAllPokemonData().subscribe({next:r=>{this.cards=r.cards,this.sets=r.sets,this.dataLoaded=!0,this.loading=!1,this.loadStats(),this.loadUserCollection()},error:r=>{this.error="Failed to load Pokemon data",this.loading=!1,console.error("Error loading data:",r)}})}loadStats(){this.dataManager.getRarityStats().subscribe({next:r=>{this.rarityStats=r},error:r=>console.error("Error loading rarity stats:",r)}),this.dataManager.getPackStats().subscribe({next:r=>{this.packStats=r.slice(0,10)},error:r=>console.error("Error loading pack stats:",r)})}downloadCardsFile(){this.dataManager.downloadCardsFile()}getStorageInstructions(){const r=this.dataManager.getStorageInstructions();alert(r)}showComprehensiveStats(){this.dataManager.getComprehensiveStats().subscribe({next:r=>{alert(`Comprehensive Statistics loaded!\n\nSummary:\n- ${r.totalCards} total cards\n- ${r.totalSets} sets\n- ${r.totalRarities} rarity types\n- Date range: ${r.dateRange.earliest} to ${r.dateRange.latest}`)},error:r=>{console.error("Error loading comprehensive stats:",r),alert("Failed to load comprehensive statistics")}})}loadUserCollection(){var r=this;return y(function*(){const o=yield r.supabaseService.getCurrentUser();if(o)try{const i=yield r.supabaseService.syncUserCollection(o.id);r.userCards=Object.entries(i).map(([s,a])=>({card_def_key:s,quantity:a})),r.userCollectionLoaded=!0,r.calculateSetProgress(),r.calculateUserRarityStats(),r.calculatePackSuggestions()}catch(i){console.error("Error loading user collection:",i)}})()}excludeModelChange(){this.calculateSetProgress(),this.calculateUserRarityStats(),this.calculatePackSuggestions()}getCardId(r){return`${r.set}-${r.number}`}calculateSetProgress(){if(!this.userCards||!this.sets.length||!this.cards.length)return;const r=new Map;this.userCards.forEach(o=>{r.set(o.card_def_key,!0)}),this.setProgress=this.sets.map(o=>{const i=this.cards.filter(u=>u.set===o.code),s=this.excludeDeluxePack?i.filter(u=>!(u.packs&&u.packs.some(d=>this.isDeluxeA4B(d)))):i,a=s.filter(u=>r.has(this.getCardId(u))),l=s.length>0?Math.round(a.length/s.length*100):0,c=this.calculateSetRarityBreakdown(s,r);return{name:o.label?.en||o.code,code:o.code,owned:a.length,total:s.length,percentage:l,rarityBreakdown:c}}).sort((o,i)=>o.code.localeCompare(i.code)),this.nearestCompleteSet=this.setProgress.find(o=>o.percentage<100)||this.setProgress[0]}calculateSetRarityBreakdown(r,o){const i=this.rarityService.groupCardsByNormalizedRarity(r),s=[];return i.forEach((a,l)=>{const c=a.filter(h=>o.has(this.getCardId(h))),u=a.length>0?Math.round(c.length/a.length*100):0,d=this.rarityService.getStandardizedDisplayName(l);s.push({name:d,code:l,owned:c.length,total:a.length,percentage:u})}),s.sort((a,l)=>this.rarityService.getRarityOrder(a.code)-this.rarityService.getRarityOrder(l.code))}calculateUserRarityStats(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(l=>{r.set(l.card_def_key,!0)});const o=this.excludeDeluxePack?this.cards.filter(l=>!(l.packs&&l.packs.some(c=>this.isDeluxeA4B(c)))):this.cards,i=this.rarityService.groupCardsByNormalizedRarity(o),s=[];i.forEach((l,c)=>{const u=l.filter(f=>r.has(this.getCardId(f))),d=l.length>0?Math.round(u.length/l.length*100):0,h=this.rarityService.getStandardizedDisplayName(c);s.push({name:h,code:c,owned:u.length,total:l.length,percentage:d})});const a=new Map;s.forEach(l=>{const c=a.get(l.code);c?(c.owned+=l.owned,c.total+=l.total):a.set(l.code,{name:l.name,code:l.code,owned:l.owned,total:l.total})}),this.userRarityStats=Array.from(a.values()).map(l=>({name:l.name,code:l.code,owned:l.owned,total:l.total,percentage:l.total>0?Math.round(l.owned/l.total*100):0})),this.userRarityStats.sort((l,c)=>this.rarityService.getRarityOrder(l.code)-this.rarityService.getRarityOrder(c.code))}loadRecentCards(){!this.userCards||!this.cards.length||(this.recentCards=this.userCards.slice(0,6).map(r=>({...this.cards.find(i=>this.getCardId(i)===r.card_def_key),quantity:r.quantity})).filter(r=>r))}calculatePackSuggestions(){if(!this.userCards||!this.cards.length)return;const r=new Map;this.userCards.forEach(s=>{r.set(s.card_def_key,!0)});const o=new Set;this.cards.forEach(s=>{s.packs&&s.packs.length>0&&s.packs.forEach(a=>{this.excludeDeluxePack&&this.isDeluxeA4B(a)||o.add(a)})});const i=Array.from(o).map(s=>{const a=this.cards.filter(g=>g.packs&&g.packs.includes(s)),l=new Map;a.forEach(g=>{g.set&&l.set(g.set,(l.get(g.set)||0)+1)});let c=null,u=0;l.forEach((g,m)=>{g>u&&(u=g,c=m)});let d="";if(c){const g=this.sets.find(m=>m.code===c);d=g?.label?.en||g?.label?.eng||g?.code||c}const h=a.filter(g=>!r.has(this.getCardId(g))),f=new Map;h.forEach(g=>{const _=this.rarityService.getNormalizedCode(g.rarityCode||"Unknown"),x=f.get(_)||0;f.set(_,x+1)});let p=0;return f.forEach((g,m)=>{const _=this.rarityService.getRarityOrder(m),x=Math.max(1,10-_);p+=g*x}),{packName:s,primarySetCode:c,primarySetName:d,totalCards:a.length,missingCards:h.length,ownedCards:a.length-h.length,completionPercentage:a.length>0?Math.round((a.length-h.length)/a.length*100):100,rarityBreakdown:Array.from(f.entries()).map(([g,m])=>({code:g,count:m,displayName:this.rarityService.getDisplayName(g),symbol:this.rarityService.getSymbol(g)})).sort((g,m)=>this.rarityService.getRarityOrder(g.code)-this.rarityService.getRarityOrder(m.code)),score:p,missingCardsList:h.slice(0,5)}});this.packSuggestions=i.filter(s=>s.missingCards>0).sort((s,a)=>a.score-s.score).slice(0,5)}isDeluxeA4B(r){return!!r&&r.toUpperCase().replace(/[\u2012\u2013\u2014\u2015\-]/g,"-").replace(/\s+/g," ").trim().includes("DELUXE")}exportCollection(){if(!this.userCollectionLoaded)return void alert("Collection not loaded yet. Please wait...");const r=this.generateCollectionCSV(),o=new Blob(["\ufeff"+r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),s=URL.createObjectURL(o);i.setAttribute("href",s),i.setAttribute("download","pokemon_collection.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}generateCollectionCSV(){const o=[["Card Name","Set","Number","Rarity","Quantity"].join(",")];return this.userCards.forEach(i=>{const s=this.cards.find(a=>this.getCardId(a)===i.card_def_key);if(s){const a=[`"${s.label?.eng||s.name||""}"`,`"${s.set||""}"`,`"${s.number||""}"`,`"${s.rarity||""}"`,i.quantity.toString()];o.push(a.join(","))}}),o.join("\n")}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}};let n=e;return e.\u0275fac=function(o){return new(o||e)(T(oD),T(wa),T(Et),T(BD))},e.\u0275cmp=lo({type:e,selectors:[["app-dashboard"]],decls:4,vars:3,consts:[[1,"container"],["class","error",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"error"],[1,"loading-state"],[1,"loading-spinner"],[1,"dashboard-content"],[1,"suggestion-controls",2,"display","flex","justify-content","flex-end","align-items","center","gap","12px"],[2,"display","inline-flex","align-items","center","gap","8px","cursor","pointer"],["type","checkbox",3,"ngModel","ngModelChange"],["class","pack-suggestions",4,"ngIf"],["class","set-progress",4,"ngIf"],["class","rarity-breakdown",4,"ngIf"],[1,"pack-suggestions"],["open",""],[1,"suggestion-subtitle"],[1,"suggestions-list"],[4,"ngFor","ngForOf"],["class","suggestion-item",3,"top-pick",4,"ngIf"],[1,"suggestion-item"],[1,"suggestion-header"],[1,"rank-number"],[1,"suggestion-summary"],["class","pack-set",4,"ngIf"],[1,"missing-count"],[1,"completion-rate"],[1,"progress-count"],[1,"pack-set"],[1,"set-progress"],[1,"progress-list"],["class","progress-item",4,"ngIf"],[1,"progress-item"],[1,"progress-header"],[1,"progress-percentage"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-details"],["class","set-rarity-breakdown",4,"ngIf"],[1,"set-rarity-breakdown"],[1,"set-rarity-grid"],["class","set-rarity-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"set-rarity-item",3,"ngClass"],[1,"rarity-name"],[1,"rarity-mini-progress"],[1,"rarity-mini-bar"],[1,"rarity-mini-fill"],[1,"rarity-mini-text"],[1,"rarity-breakdown"],[1,"rarity-grid"],["class","rarity-card",3,"ngClass",4,"ngIf"],[1,"rarity-card",3,"ngClass"],[1,"rarity-header"],[1,"rarity-count"],[1,"rarity-progress"],[1,"rarity-bar"],[1,"rarity-fill"],[1,"percentage"]],template:function(o,i){1&o&&(w(0,"div",0),Ce(1,vV,2,1,"div",1),Ce(2,CV,4,0,"div",2),Ce(3,RV,8,4,"div",3),D()),2&o&&(F(1),z("ngIf",i.error),F(1),z("ngIf",i.loading),F(1),z("ngIf",!i.loading))},dependencies:[zC,Vh,zs,nc,ic,ta],styles:['.container[_ngcontent-%COMP%]{position:relative;max-width:1280px;margin:30px auto 0;min-height:100vh;color:var(--text);background:transparent;overflow:visible;border-radius:0;box-shadow:none;padding:0 20px;box-sizing:border-box;width:100%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{color:var(--text);margin-bottom:12px;font-weight:600}.dashboard-content[_ngcontent-%COMP%]{display:grid;gap:32px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.stat-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.22);border-radius:20px;padding:22px;display:flex;flex-direction:column;gap:12px;box-shadow:0 16px 32px #0c142447;transition:transform .16s ease,border-color .16s ease}.stat-card.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(91,168,255,.25),rgba(34,46,70,.85))}.stat-icon[_ngcontent-%COMP%]{font-size:2rem}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--text-muted);letter-spacing:.02em}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0}.stat-detail[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem}.error[_ngcontent-%COMP%]{background:rgba(255,107,107,.12);color:var(--danger);border:1px solid rgba(255,107,107,.35);padding:18px 22px;border-radius:14px;text-align:center;font-weight:500}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:80px 0;color:var(--text)}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;margin:24px auto;border-radius:50%;border:4px solid rgba(91,168,255,.2);border-top-color:var(--accent);animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:clamp(20px,2.4vw,28px);box-shadow:0 18px 36px #070c1859;transition:transform .16s ease,box-shadow .16s ease,border-color .18s ease;max-width:100%;box-sizing:border-box}.pack-suggestions[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   details[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]{width:100%}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;list-style:none;cursor:pointer;font-size:clamp(1.25rem,2vw,1.55rem);font-weight:700;color:var(--text);padding-bottom:18px;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:22px}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{content:"";width:11px;height:11px;border-radius:50%;background:var(--accent);box-shadow:0 0 18px #5ba8ffa6}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker, .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker{display:none}.pack-suggestions[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .set-progress[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before, .rarity-breakdown[_ngcontent-%COMP%]   details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{background:var(--accent-strong)}.suggestion-subtitle[_ngcontent-%COMP%]{color:var(--text-muted);margin-bottom:18px;font-size:.95rem;font-style:italic}.suggestions-list[_ngcontent-%COMP%]{display:grid;gap:14px}.suggestion-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:18px;padding:18px 20px;border:1px solid rgba(91,168,255,.2);transition:transform .16s ease,border-color .16s ease,box-shadow .16s ease}.suggestion-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#5ba8ff8c;box-shadow:0 14px 28px #101c3459}.suggestion-item.top-pick[_ngcontent-%COMP%]{border:1px solid rgba(241,196,15,.65);background:linear-gradient(120deg,rgba(241,196,15,.22),rgba(44,62,80,.45))}.suggestion-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.pack-set[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9rem;font-weight:700}.rank-number[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:32px;padding:4px 10px;border-radius:999px;background:rgba(91,168,255,.2);color:var(--accent);font-weight:600}.top-pick-badge[_ngcontent-%COMP%]{font-size:.72rem;letter-spacing:.12em;text-transform:uppercase;padding:4px 10px;border-radius:999px;background:rgba(241,196,15,.16);color:var(--warning)}.suggestion-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:14px;color:var(--text-muted);font-size:.92rem}.missing-count[_ngcontent-%COMP%]{color:var(--danger);font-weight:600}.completion-rate[_ngcontent-%COMP%]{color:var(--success);font-weight:600}.progress-count[_ngcontent-%COMP%]{color:var(--accent);font-weight:600}.progress-list[_ngcontent-%COMP%]{display:grid;gap:18px}.progress-item[_ngcontent-%COMP%]{background:var(--surface-strong);border-radius:20px;padding:20px 22px;border:1px solid rgba(91,168,255,.18);transition:transform .16s ease,border-color .16s ease}.progress-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.progress-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;color:var(--text)}.progress-percentage[_ngcontent-%COMP%]{color:var(--success);font-weight:700}.progress-bar[_ngcontent-%COMP%]{background:rgba(91,168,255,.14);border-radius:999px;height:10px;overflow:hidden;margin-bottom:10px}.progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent-strong));transition:width .22s ease-in-out}.progress-details[_ngcontent-%COMP%]{color:var(--text-muted);margin:0;font-size:.92rem}.set-rarity-breakdown[_ngcontent-%COMP%]{margin-top:18px}.set-rarity-breakdown[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:12px;color:var(--text-muted);font-weight:600;letter-spacing:.02em}.set-rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.set-rarity-item[_ngcontent-%COMP%]{background:rgba(13,19,33,.7);border:1px solid rgba(91,168,255,.14);border-radius:16px;padding:12px 14px;text-align:center;box-shadow:inset 0 1px #ffffff0a,0 6px 14px #080c1659;display:flex;flex-direction:column;min-height:96px}.rarity-name[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-size:.8rem;font-weight:600;color:var(--text)}.rarity-mini-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:auto}.rarity-mini-bar[_ngcontent-%COMP%]{flex:1;height:8px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(91,168,255,.12));border:1px solid rgba(91,168,255,.22);overflow:hidden;position:relative}.rarity-mini-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--rarity-start, var(--accent)) 0%,var(--rarity-end, var(--accent-strong)) 100%);border-radius:999px;box-shadow:0 0 8px var(--rarity-glow, rgba(76, 138, 255, .6));transition:width .26s ease}.rarity-mini-text[_ngcontent-%COMP%]{font-size:.72rem;color:var(--text);background:rgba(255,255,255,.06);border:1px solid rgba(91,168,255,.18);padding:2px 8px;border-radius:999px;font-weight:600;letter-spacing:.01em;font-variant-numeric:tabular-nums}.rarity-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}.rarity-card[_ngcontent-%COMP%]{background:var(--surface-strong);border:1px solid rgba(91,168,255,.18);border-radius:18px;padding:20px;display:flex;flex-direction:column;gap:14px;min-height:140px;transition:transform .16s ease,border-color .16s ease}.rarity-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#5ba8ff66}.rarity-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.rarity-count[_ngcontent-%COMP%]{font-weight:700;color:var(--accent)}.rarity-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:auto}.rarity-bar[_ngcontent-%COMP%]{flex:1;height:10px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(91,168,255,.12));border:1px solid rgba(91,168,255,.22);overflow:hidden}.rarity-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--rarity-start, var(--accent)) 0%,var(--rarity-end, var(--accent-strong)) 100%);border-radius:999px;box-shadow:0 0 10px var(--rarity-glow, rgba(76, 138, 255, .65));transition:width .26s ease-in-out}.percentage[_ngcontent-%COMP%]{min-width:48px;text-align:right;font-weight:700;color:var(--success);background:rgba(46,204,113,.1);border:1px solid rgba(46,204,113,.25);padding:2px 8px;border-radius:999px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding-left:16px!important;padding-right:16px!important}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{margin-inline:8px}.suggestion-summary[_ngcontent-%COMP%], .progress-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.suggestions-list[_ngcontent-%COMP%]{gap:10px}.suggestion-item[_ngcontent-%COMP%]{padding:14px 16px;box-sizing:border-box;max-width:100%}.suggestion-item.top-pick[_ngcontent-%COMP%]{padding:12px 14px;border-radius:16px}.suggestion-header[_ngcontent-%COMP%]{gap:10px}.top-pick-badge[_ngcontent-%COMP%]{font-size:.68rem;padding:3px 8px}.pack-set[_ngcontent-%COMP%]{font-size:.85rem}.rarity-grid[_ngcontent-%COMP%], .set-rarity-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.rank-number[_ngcontent-%COMP%]{min-width:24px;padding:3px 8px;font-size:.9rem}.suggestion-summary[_ngcontent-%COMP%]{gap:10px;font-size:.88rem;overflow-wrap:anywhere;word-break:break-word}.pack-suggestions[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]{padding:clamp(18px,2.16vw,25px);font-size:.9em}.pack-suggestions[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .set-progress[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%], .rarity-breakdown[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{font-size:.9em}.suggestion-item[_ngcontent-%COMP%]{padding:12px 14px}.suggestion-item.top-pick[_ngcontent-%COMP%]{padding:10px 12px}.progress-item[_ngcontent-%COMP%]{padding:18px 20px}.rarity-card[_ngcontent-%COMP%]{padding:18px}.suggestion-summary[_ngcontent-%COMP%]{font-size:.8rem}.top-pick-badge[_ngcontent-%COMP%]{font-size:.62rem;padding:3px 7px}.rank-number[_ngcontent-%COMP%]{min-width:22px;padding:2px 7px;font-size:.82rem}.pack-set[_ngcontent-%COMP%]{font-size:.78rem}}']}),n})(),NV=(()=>{const e=class{constructor(r){this.http=r,this.BASE_IMAGE_URL="https://raw.githubusercontent.com/flibustier/pokemon-tcg-exchange/main/public/images/cards",this.imageCache=new Map}getCardImageUrl(r){return`${this.BASE_IMAGE_URL}/${r}`}checkImageExists(r){if(this.imageCache.has(r))return Q(this.imageCache.get(r));const o=this.getCardImageUrl(r);return this.http.head(o,{observe:"response"}).pipe(O(i=>{const s=200===i.status;return this.imageCache.set(r,s),s}),Kn(()=>(this.imageCache.set(r,!1),Q(!1))))}preloadImage(r){return new Promise(o=>{const i=new Image;i.onload=()=>{this.imageCache.set(r,!0),o(!0)},i.onerror=()=>{this.imageCache.set(r,!1),o(!1)},i.src=this.getCardImageUrl(r)})}getPlaceholderImageUrl(){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDIwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExNi41NjkgMTQwIDEzMCAxMjYuNTY5IDEzMCAxMTBDMTMwIDkzLjQzMTUgMTE2LjU2OSA4MCAxMDAgODBDODMuNDMxNSA4MCA3MCA5My40MzE1IDcwIDExMEM3MCAxMjYuNTY5IDgzLjQzMTUgMTQwIDEwMCAxNDBaIiBmaWxsPSIjOUI5QkE4Ii8+CjxwYXRoIGQ9Ik0xMDAgMTAwQzEwNS41MjMgMTAwIDExMCAxMDQuNDc3IDExMCAxMTBDMTEwIDExNS41MjMgMTA1LjUyMyAxMjAgMTAwIDEyMEM5NC40NzcgMTIwIDkwIDExNS41MjMgOTAgMTEwQzkwIDEwNC40NzcgOTQuNDc3IDEwMCAxMDAgMTAwWiIgZmlsbD0iI0Y5RkFGQiIvPgo8L3N2Zz4K"}};let n=e;return e.\u0275fac=function(o){return new(o||e)(B(Ei))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function FV(n,e){if(1&n){const t=on();w(0,"div",48)(1,"div"),P(2,"Viewing "),w(3,"strong"),P(4),D(),P(5,"'s collection (read-only)"),D(),w(6,"button",49),G("click",function(){return Se(t),Me(q().backToMyCollection())}),P(7,"Back to my collection"),D()()}if(2&n){const t=q();F(4),On(null==t.viewingUser?null:t.viewingUser.username)}}function LV(n,e){if(1&n&&(w(0,"option",50),P(1),D()),2&n){const t=e.$implicit,r=q();z("value",t),F(1),On(r.getSetName(t))}}function jV(n,e){if(1&n&&(w(0,"option",50),P(1),D()),2&n){const t=e.$implicit;z("value",t),F(1),On(t)}}function VV(n,e){if(1&n){const t=on();w(0,"button",51),G("click",function(){const i=Se(t).$implicit;return Me(q().toggleRarity(i.symbol))}),P(1),D()}if(2&n){const t=e.$implicit;At("active",q().isRaritySelected(t.symbol)),z("title",t.displayName),F(1),Dt(" ",t.symbol," ")}}function UV(n,e){1&n&&(w(0,"div",52),Tn(1,"div",53),w(2,"p"),P(3,"Loading Pokemon cards..."),D()())}function $V(n,e){if(1&n){const t=on();w(0,"div",54)(1,"p"),P(2),D(),w(3,"button",55),G("click",function(){return Se(t),Me(q().loadAllData())}),P(4,"Retry"),D()()}if(2&n){const t=q();F(2),On(t.error)}}function BV(n,e){if(1&n&&(w(0,"div",62),P(1),D()),2&n){const t=q(2);F(1),Dt("",t.syncProgress," cards loaded")}}function HV(n,e){if(1&n&&(w(0,"div",56)(1,"div",57)(2,"div",58),P(3,"\u23f3"),D(),w(4,"div",59)(5,"div",60),P(6),D(),Ce(7,BV,2,1,"div",61),D()()()),2&n){const t=q();F(6),On(t.syncMessage),F(1),z("ngIf",t.syncProgress>0)}}function zV(n,e){if(1&n){const t=on();_o(0),w(1,"input",82),G("ngModelChange",function(o){return Se(t),Me(q(4).editingCountValue=o)})("keydown.enter",function(){Se(t);const o=q().$implicit;return Me(q(3).commitCount(o))})("keydown",function(o){Se(t);const i=q().$implicit;return Me(q(3).onCountInputKeydown(o,i))})("keydown.escape",function(){return Se(t),Me(q(4).cancelEditingCount())})("blur",function(){Se(t);const o=q().$implicit;return Me(q(3).commitCount(o))}),D(),vo()}if(2&n){const t=q(4);F(1),z("ngModel",t.editingCountValue)}}function GV(n,e){if(1&n){const t=on();w(0,"button",83),G("click",function(){Se(t);const o=q().$implicit,i=q(3);return Me(i.isViewingOther?null:i.startEditingCount(o))}),P(1),D()}if(2&n){const t=q().$implicit,r=q(3);z("disabled",r.isViewingOther),F(1),Dt(" ",r.getOwnedCount(t)," ")}}function qV(n,e){if(1&n){const t=on();w(0,"div",72)(1,"div",73)(2,"img",74),G("error",function(o){const s=Se(t).$implicit;return Me(q(3).onImageError(o,s))}),D()(),w(3,"div",75)(4,"div",76),P(5),D(),w(6,"div",77)(7,"button",78),G("click",function(){const i=Se(t).$implicit;return Me(q(3).decreaseOwned(i))}),P(8," \u2212 "),D(),Ce(9,zV,2,1,"ng-container",79),Ce(10,GV,2,2,"ng-template",null,80,Nv),w(12,"button",81),G("click",function(){const i=Se(t).$implicit;return Me(q(3).increaseOwned(i))}),P(13," + "),D()()()()}if(2&n){const t=e.$implicit,r=Fd(11),o=q(3);At("no-quantity",0===o.getOwnedCount(t)),Vt("data-cardid",o.getCardId(t)),F(1),At("no-quantity",0===o.getOwnedCount(t)),F(1),At("no-quantity",0===o.getOwnedCount(t)),z("src",o.getCardImageUrl(t.imageName),ad)("alt",t.label.eng+" Pokemon Card"),F(3),On(o.getCardDisplayName(t)),F(2),z("disabled",o.isViewingOther||0===o.getOwnedCount(t)),F(2),z("ngIf",o.editingCardId===o.getCardId(t))("ngIfElse",r),F(3),z("disabled",o.isViewingOther)}}function WV(n,e){if(1&n&&(w(0,"div",65)(1,"div",66)(2,"h3",67),P(3),D(),w(4,"div",68)(5,"span",69),P(6),D()()(),w(7,"div",70),Ce(8,qV,14,14,"div",71),D()()),2&n){const t=e.$implicit,r=q(2);Vt("id","set-"+t.groupTitle),F(3),On(r.getGroupDisplayName(t.groupTitle,t.cards)),F(3),Tr("",t.cards.length," card",1!==t.cards.length?"s":"",""),F(2),z("ngForOf",t.cards)("ngForTrackBy",r.trackByCardInGroup)}}function KV(n,e){if(1&n&&(w(0,"div",63),Ce(1,WV,9,6,"div",64),D()),2&n){const t=q();F(1),z("ngForOf",t.getGroupedCards())("ngForTrackBy",t.trackByGroupTitle)}}function JV(n,e){if(1&n){const t=on();w(0,"div",84)(1,"div",85),P(2,"\u{1f50d}"),D(),w(3,"h3"),P(4,"No cards found"),D(),w(5,"p"),P(6,"Try adjusting your search or filter criteria"),D(),w(7,"button",55),G("click",function(){return Se(t),Me(q().clearFilters())}),P(8,"Clear All Filters"),D()()}}function YV(n,e){if(1&n){const t=on();w(0,"div",86),G("click",function(){return Se(t),Me(q().closeViewOthersModal())}),w(1,"div",87),G("click",function(o){return o.stopPropagation()}),w(2,"div",88)(3,"h3"),P(4,"View Others Collection"),D(),w(5,"button",89),G("click",function(){return Se(t),Me(q().closeViewOthersModal())}),P(6,"\xd7"),D()(),w(7,"div",90)(8,"div",91)(9,"div",92)(10,"label",93),P(11,"Username:"),D(),w(12,"input",94),G("ngModelChange",function(o){return Se(t),Me(q().otherUsername=o)})("keydown.enter",function(){return Se(t),Me(q().viewOtherCollectionFromModal())}),D(),w(13,"span",95),P(14,"Enter the username of the collection you want to view"),D()()()(),w(15,"div",96)(16,"button",49),G("click",function(){return Se(t),Me(q().closeViewOthersModal())}),P(17,"Cancel"),D(),w(18,"button",97),G("click",function(){return Se(t),Me(q().viewOtherCollectionFromModal())}),P(19," \u{1f464} View Collection "),D()()()()}if(2&n){const t=q();F(12),z("ngModel",t.otherUsername),F(6),z("disabled",!t.otherUsername.trim())}}function QV(n,e){if(1&n){const t=on();w(0,"button",51),G("click",function(){const i=Se(t).$implicit;return Me(q(2).toggleTradeRarity(i.symbol))}),P(1),D()}if(2&n){const t=e.$implicit;At("active",q(2).isTradeRaritySelected(t.symbol)),z("title",t.displayName),F(1),Dt(" ",t.symbol," ")}}function ZV(n,e){if(1&n){const t=on();w(0,"div",86),G("click",function(){return Se(t),Me(q().closeTradeModal())}),w(1,"div",98),G("click",function(o){return o.stopPropagation()}),w(2,"div",88)(3,"h3"),P(4,"Copy For Trade"),D(),w(5,"button",89),G("click",function(){return Se(t),Me(q().closeTradeModal())}),P(6,"\xd7"),D()(),w(7,"div",90)(8,"div",99)(9,"div",92)(10,"label",100)(11,"input",101),G("ngModelChange",function(o){return Se(t),Me(q().excludeSpecialPacks=o)}),D(),P(12," Exclude Special packs "),D(),w(13,"span",95),P(14,'When enabled, cards from packs with "PROMO" and "A4b" are omitted.'),D()(),w(15,"div",92)(16,"label",102),P(17,"Include rarities:"),D(),w(18,"div",103)(19,"button",104),G("click",function(){return Se(t),Me(q().clearTradeRarities())}),P(20,"ALL"),D(),Ce(21,QV,2,4,"button",23),D()(),w(22,"div",92)(23,"label",105),P(24,"Trade cards (quantity \u2265):"),D(),w(25,"input",106),G("ngModelChange",function(o){return Se(t),Me(q().tradeQuantityMin=o)}),D(),w(26,"span",95),P(27,'Cards with this quantity or more will be listed as "for trade"'),D()(),w(28,"div",92)(29,"label",107),P(30,"Friend Code:"),D(),w(31,"input",108),G("ngModelChange",function(o){return Se(t),Me(q().tradeFriendCode=o)}),D(),w(32,"span",95),P(33,"This is not saved. It's only used in the copied text."),D()(),w(34,"div",92)(35,"label",109),P(36,"Template text:"),D(),w(37,"textarea",110),G("ngModelChange",function(o){return Se(t),Me(q().tradeTemplateText=o)}),D(),w(38,"span",95),P(39,"Not saved. Will be appended to the copied text."),D()()()(),w(40,"div",96)(41,"button",49),G("click",function(){return Se(t),Me(q().closeTradeModal())}),P(42,"Cancel"),D(),w(43,"button",55),G("click",function(){return Se(t),Me(q().generateAndCopyTradeText())}),P(44,"\u{1f4cb} Copy Trade Text"),D()()()()}if(2&n){const t=q();F(11),z("ngModel",t.excludeSpecialPacks),F(8),At("active",0===t.selectedTradeRarities.length),F(2),z("ngForOf",t.getAvailableTradeRaritySymbols()),F(4),z("ngModel",t.tradeQuantityMin),F(6),z("ngModel",t.tradeFriendCode),F(6),z("ngModel",t.tradeTemplateText)}}let XV=(()=>{const e=class{constructor(r,o,i,s,a,l,c){this.pokemonDataService=r,this.dataManager=o,this.imageService=i,this.supabaseService=s,this.router=a,this.cdr=l,this.rarityService=c,this.cards=[],this.filteredCards=[],this.sets=[],this.rarityMapping={},this.ownedCards={},this.selectedSet="all",this.selectedRarities=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.availableSets=[],this.availableRarities=[],this.availableRaritySymbols=[],this.availablePacks=[],this.loading=!0,this.loadingOwnedCards=!1,this.syncingCards=!1,this.syncProgress=0,this.syncMessage="",this.error=null,this.viewMode="grid",this.editingCardId=null,this.editingCountValue=0,this.lastFlatOrder=[],this.isViewingOther=!1,this.otherUsername="",this.viewingUser=null,this.totalCards=0,this.ownedCount=0,this.uniqueOwned=0,this.completionPercentage=0,this.currentUser=null,this.filtersOpen=!1,this.showTradeModal=!1,this.selectedTradeRarities=[],this.tradeQuantityMin=2,this.tradeFriendCode="",this.tradeTemplateText="Please ping me if there is any possible trades. \nENGLISH cards only please.",this.excludedTradeSymbols=new Set(["\u2606\u2606\u2606","\u{1f451}"]),this.excludeSpecialPacks=!0,this.showViewOthersModal=!1,this.trackByCardId=(u,d)=>this.getCardId(d),this.trackByGroupTitle=(u,d)=>d.groupTitle,this.trackByCardInGroup=(u,d)=>this.getCardId(d)}ngOnInit(){if(this.currentUser=this.supabaseService.getCurrentUser(),this.currentUser){try{typeof window<"u"&&window?.innerWidth<=768&&(this.filtersOpen=!1)}catch{}this.loadAllData()}else this.router.navigate(["/signin"])}loadAllData(){this.loading=!0,this.error=null,this.pokemonDataService.loadAllData().subscribe({next:r=>{this.cards=r.cards,this.filteredCards=[...this.cards],this.sets=r.sets,this.rarityMapping=r.rarities,this.extractFilterOptions(),this.calculateStatistics(),this.loading=!1,this.cdr.detectChanges(),this.loadOwnedCards()},error:r=>{this.error="Failed to load card collection",this.loading=!1,this.cdr.detectChanges(),console.error("Error loading card collection:",r)}})}extractFilterOptions(){this.availableSets=[...new Set(this.cards.map(a=>a.set))];const r=[...new Set(this.cards.map(a=>a.rarityCode).filter(a=>a))];this.availableRarities=r,this.availableRaritySymbols=[];const o=new Set;this.cards.forEach(a=>{if(a.rarityCode){const l=this.rarityService.getNormalizedCode(a.rarityCode);o.add(l)}});const i=new Map;this.rarityService.getUnifiedRarities().forEach(a=>{o.has(a.code)&&i.set(a.symbol,{symbol:a.symbol,rarities:[a.code],displayName:a.displayName})}),this.availableRaritySymbols=Array.from(i.values()).sort((a,l)=>this.rarityService.getRarityOrder(a.rarities[0])-this.rarityService.getRarityOrder(l.rarities[0])),this.extractAvailablePacks()}convertRarityNameToCode(r){return{Common:"C",Uncommon:"U",Rare:"R","Double Rare":"RR","Art Rare":"AR","Super Rare":"SR","Special Art Rare":"SAR","Immersive Rare":"IM","Crown Rare":"UR",Shiny:"S","Shiny Super Rare":"SSR"}[r]||r}extractAvailablePacks(){let r=this.cards;"all"!==this.selectedSet&&(r=this.cards.filter(i=>i.set===this.selectedSet));const o=r.flatMap(i=>Array.isArray(i.packs)?i.packs:[]).filter(i=>"string"==typeof i&&i.trim());this.availablePacks=[...new Set(o)],"all"!==this.selectedPack&&!this.availablePacks.includes(this.selectedPack)&&(this.selectedPack="all")}applyFilters(){this.filteredCards=this.cards.filter(i=>{if("all"!==this.selectedSet&&i.set!==this.selectedSet)return!1;if(this.selectedRarities.length>0){const s=i.rarityCode?this.rarityService.getSymbol(i.rarityCode):"";if(!s||!this.selectedRarities.includes(s))return!1}return!("all"!==this.selectedSet&&"all"!==this.selectedPack&&!(Array.isArray(i.packs)?i.packs:[]).includes(this.selectedPack)||this.searchTerm&&!i.label.eng.toLowerCase().includes(this.searchTerm.toLowerCase())||"missing"===this.ownershipFilter&&this.getOwnedCount(i)>0||"owned"===this.ownershipFilter&&0===this.getOwnedCount(i))});const r=i=>this.isSpecialSet(i),o=(i,s)=>{const a=/^([A-Z]+)(\d+)([a-z]*)$/,l=(i||"").match(a),c=(s||"").match(a);if(l&&c){if(l[1]!==c[1])return l[1].localeCompare(c[1]);const u=parseInt(l[2],10),d=parseInt(c[2],10);return u!==d?u-d:(l[3]||"").localeCompare(c[3]||"")}return(i||"").localeCompare(s||"")};this.filteredCards.sort("oldest"===this.sortBy?(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(i.set,s.set);return 0!==c?c:i.number-s.number}:(i,s)=>{const a=r(i.set),l=r(s.set);if(a&&!l)return 1;if(!a&&l)return-1;const c=o(s.set,i.set);return 0!==c?c:s.number-i.number})}onFilterChange(){this.extractAvailablePacks(),this.applyFilters()}onSetChange(){this.extractAvailablePacks(),"all"===this.selectedSet&&(this.selectedPack="all"),this.applyFilters()}onSearchChange(){this.applyFilters()}clearFilters(){this.selectedSet="all",this.selectedRarities=[],this.selectedPack="all",this.searchTerm="",this.sortBy="latest",this.ownershipFilter="all",this.applyFilters()}toggleFilters(){this.filtersOpen=!this.filtersOpen,this.cdr.detectChanges(),this.filtersOpen&&setTimeout(()=>{const r=document.querySelector(".filters-panel");if(r){const o=r.getBoundingClientRect().top+window.scrollY-8;window.scrollTo({top:o,behavior:"smooth"})}})}isSpecialSet(r){const o=(r||"").toUpperCase();return o.startsWith("P-")||o.endsWith("-P")||"P-A"===o||o.startsWith("PROMO")||o.startsWith("A4B")}openTradeModal(){this.isViewingOther||(this.tradeFriendCode=this.currentUser?.friend_code||"",this.selectedTradeRarities=this.selectedTradeRarities.filter(r=>!this.isTradeRarityDisabled(r)),this.showTradeModal=!0,this.cdr.detectChanges())}closeTradeModal(){this.showTradeModal=!1,this.cdr.detectChanges()}isTradeRaritySelected(r){return this.selectedTradeRarities.includes(r)}toggleTradeRarity(r){if(this.isTradeRarityDisabled(r))return;const o=this.selectedTradeRarities.indexOf(r);o>=0?this.selectedTradeRarities.splice(o,1):this.selectedTradeRarities.push(r),this.cdr.detectChanges()}isTradeRarityDisabled(r){return this.excludedTradeSymbols.has(r)}getAvailableTradeRaritySymbols(){return(this.availableRaritySymbols||[]).filter(r=>!this.excludedTradeSymbols.has(r.symbol))}clearTradeRarities(){this.selectedTradeRarities=[],this.cdr.detectChanges()}openViewOthersModal(){this.isViewingOther||(this.showViewOthersModal=!0,this.cdr.detectChanges())}closeViewOthersModal(){this.showViewOthersModal=!1,this.cdr.detectChanges()}viewOtherCollectionFromModal(){var r=this;return y(function*(){yield r.viewOtherCollection(),r.closeViewOthersModal()})()}generateAndCopyTradeText(){var r=this;return y(function*(){try{const o=r.generateTradeText();yield navigator.clipboard.writeText(o),r.closeTradeModal()}catch(o){console.error("Failed to copy to clipboard:",o),alert("Failed to copy to clipboard. Please try again.")}})()}generateTradeText(){const o=this.selectedTradeRarities&&this.selectedTradeRarities.length>0?this.selectedTradeRarities:["\u25ca","\u25ca\u25ca","\u25ca\u25ca\u25ca","\u25ca\u25ca\u25ca\u25ca","\u2606","\u2606\u2606","\u2735","\u2735\u2735"],s=this.cards.filter(f=>{if(this.excludeSpecialPacks&&this.isSpecialSet(f.set))return!1;const p=f.rarityCode?this.rarityService.getSymbol(f.rarityCode):"";return!(p&&!o.includes(p))&&0===this.getOwnedCount(f)}).reduce((f,p)=>((f[p.set]||=[]).push(p),f),{});let a="";a+="\n=============================================================================",a+="\nLooking for cards:",a+="\n=============================================================================\n\n";for(const[f,p]of Object.entries(s))if(0!==p.length){a+=`[${this.getSetName(f)}]:\n`;for(const m of p)a+=`${m.rarityCode?this.rarityService.getSymbol(m.rarityCode):""} ${this.getCardDisplayName(m)}\n`;a+="\n"}a+="\n=============================================================================",a+="\nCards for trade:",a+="\n=============================================================================\n\n";const c=this.cards.filter(f=>{if(this.excludeSpecialPacks&&this.isSpecialSet(f.set))return!1;const p=f.rarityCode?this.rarityService.getSymbol(f.rarityCode):"";return!(p&&!o.includes(p)||p&&this.excludedTradeSymbols.has(p))&&this.getOwnedCount(f)>=this.tradeQuantityMin}).reduce((f,p)=>((f[p.set]||=[]).push(p),f),{});for(const[f,p]of Object.entries(c))if(0!==p.length){a+=`[${this.getSetName(f)}]:\n`;for(const m of p)a+=`${m.rarityCode?this.rarityService.getSymbol(m.rarityCode):""} ${this.getCardDisplayName(m)}\n`;a+="\n"}const u=(this.tradeTemplateText||"").trim(),d=(this.tradeFriendCode||"").trim(),h=(this.currentUser?.username||"").trim();return a+="\n=============================================================================",u&&(a+=`\n${u}\n`),(d||h)&&(h&&(a+=`\nIGN: ${h}`),d&&(a+=`\nFriend code: ${d}`)),a+="\n=============================================================================\n",a.trim()}loadOwnedCards(){var r=this;return y(function*(){r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}loadOwnedCardsForUser(r,o){var i=this;return y(function*(){i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage=o?`Loading ${o}'s collection...`:"Starting sync...",i.loadingOwnedCards=!0,i.syncingCards=!0,i.syncProgress=0,i.syncMessage="Starting sync...";try{const s=yield i.supabaseService.syncUserCollection(r,a=>{i.syncProgress=a,i.syncMessage=`Syncing cards... ${a} loaded`,i.cdr.detectChanges()});i.ownedCards=s,i.calculateStatistics(),i.syncMessage=`Sync completed! ${Object.keys(s).length} cards loaded`,i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},1500)}catch(s){console.error("Error loading owned cards:",s),i.syncMessage="Sync failed, using local data...";const a=localStorage.getItem("ownedPokemonCards");a&&(i.ownedCards=JSON.parse(a),i.calculateStatistics()),i.cdr.detectChanges(),setTimeout(()=>{i.syncingCards=!1,i.syncMessage="",i.cdr.detectChanges()},2e3)}finally{i.loadingOwnedCards=!1}})()}saveOwnedCards(){var r=this;return y(function*(){localStorage.setItem("ownedPokemonCards",JSON.stringify(r.ownedCards)),r.calculateStatistics()})()}getCardId(r){return`${r.set}-${r.number}`}getOwnedCount(r){return this.ownedCards[this.getCardId(r)]||0}increaseOwned(r){var o=this;return y(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r),a=s+1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}decreaseOwned(r){var o=this;return y(function*(){if(o.isViewingOther||!o.currentUser)return;const i=o.getCardId(r),s=o.getOwnedCount(r);if(0===s)return;const a=s-1;o.updateLocalQuantity(i,a),yield o.persistQuantity(i,a,s)})()}startEditingCount(r){this.isViewingOther||(this.editingCardId=this.getCardId(r),this.editingCountValue=this.getOwnedCount(r),this.cdr.detectChanges(),this.focusEditingInput())}cancelEditingCount(){this.editingCardId=null,this.editingCountValue=0,this.cdr.detectChanges()}commitCount(r){var o=this;return y(function*(){if(o.isViewingOther)return void o.cancelEditingCount();if(!o.currentUser)return;const i=o.getCardId(r);if(o.editingCardId!==i)return;const s=Math.max(0,Math.floor(Number(o.editingCountValue)||0)),a=o.getOwnedCount(r);s!==a?(o.updateLocalQuantity(i,s),yield o.persistQuantity(i,s,a),o.cancelEditingCount()):o.cancelEditingCount()})()}onCountInputKeydown(r,o){if("Tab"!==r.key)return;r.preventDefault();const i=this.getFlatOrderedCards(),s=this.getCardId(o),a=i.findIndex(c=>this.getCardId(c)===s);if(-1===a)return;const l=r.shiftKey?a-1:a+1;this.commitCount(o).then(()=>{const c=i[l];c&&this.startEditingCount(c)})}focusEditingInput(){const r=this.editingCardId;r&&setTimeout(()=>{const o=document.querySelector(`.card-item[data-cardid="${r}"] .count-input`);o&&(o.focus(),o.select())})}getFlatOrderedCards(){const r=this.getGroupedCards();return this.lastFlatOrder=r.flatMap(o=>o.cards),this.lastFlatOrder}updateLocalQuantity(r,o){o<=0?delete this.ownedCards[r]:this.ownedCards[r]=o,this.saveOwnedCards(),this.cdr.detectChanges()}persistQuantity(r,o,i){var s=this;return y(function*(){if(s.currentUser)try{yield s.supabaseService.updateCardQuantity(s.currentUser.id,r,o)}catch(a){console.error("Error updating card quantity in database:",a),i<=0?delete s.ownedCards[r]:s.ownedCards[r]=i,s.saveOwnedCards(),s.cdr.detectChanges()}})()}calculateStatistics(){this.totalCards=this.cards.length,this.ownedCount=Object.values(this.ownedCards).reduce((r,o)=>r+o,0),this.uniqueOwned=Object.keys(this.ownedCards).length,this.completionPercentage=this.totalCards>0?Math.round(this.uniqueOwned/this.totalCards*100):0}getSetName(r){const o=this.sets.find(i=>i.code===r);return o?o.label.en:r}getFullRarityName(r){return this.rarityService.getStandardizedDisplayName(r)}getRarityClass(r){return{Common:"rarity-common",Uncommon:"rarity-uncommon",Rare:"rarity-rare","Double Rare":"rarity-double-rare","Art Rare":"rarity-art-rare","Super Rare":"rarity-super-rare","Special Art Rare":"rarity-special-art-rare","Immersive Rare":"rarity-immersive-rare","Crown Rare":"rarity-crown-rare",Shiny:"rarity-shiny","Shiny Super Rare":"rarity-shiny-super-rare"}[r]||"rarity-default"}toggleViewMode(){this.viewMode="grid"===this.viewMode?"list":"grid"}exportCollection(){if(this.isViewingOther)return void alert("Export is disabled when viewing another user's collection");let r="\ufeff";r+="Id,CardName,NumberOwn,Expansion,Pack,Rarity\n",this.cards.forEach(s=>{const a=this.getCardId(s),l=this.getOwnedCount(s),c=s.rarityCode?this.rarityService.getSymbol(s.rarityCode):"Unknown",u=s.packs&&s.packs.length>0?s.packs[0]:"",d=s.label.eng.replace(/,/g,'""');r+=`${a},"${d}",${l},${s.set},"${u}",${c}\n`});const o=new Blob([r],{type:"text/csv;charset=utf-8"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download="pokemon-tcg-collection.csv",i.click()}importCollection(r){var o=this;if(this.isViewingOther)return void alert("Import is disabled when viewing another user's collection");const i=r.target.files[0];if(i){const s=new FileReader;s.onload=function(){var a=y(function*(l){try{const d=(l.target?.result||"").split(/\r?\n/).filter(N=>N.trim().length>0);if(0===d.length)return void alert("CSV file appears to be empty.");const h=new Map;o.cards.forEach(N=>{const W=o.getCardId(N);h.set(o.normalizeId(W),W)});const f=o.parseCSVLine(d[0]),p=/(id|card|name|expansion|set|rarity|qty|quantity|owned|count|number|no)/i,g=f.some(N=>p.test(N)),m=g?1:0,_=g?o.buildHeaderMap(f):null;let x=0,C=0,A=0;for(let N=m;N<d.length;N++){const W=d[N];try{const Jt=o.parseCSVLine(W),{cardId:Ae,quantity:lt}=o.resolveCsvRow(Jt,_);if(!Ae){C++;continue}const Qn=Math.max(0,Math.floor(Number(lt))||0),_n=h.get(o.normalizeId(Ae))||null;_n?(Qn>0?o.ownedCards[_n]=Qn:delete o.ownedCards[_n],x++):(console.log(Ae),A++)}catch(Jt){console.error(`Error parsing line: ${W}`,Jt),C++}}if(o.saveOwnedCards(),o.currentUser)try{const N=yield o.supabaseService.bulkReplaceUserCollection(o.currentUser.id,o.ownedCards);if(N.success){let W=`Import completed!\n${x} cards updated`;W+="\nCollection synced to database successfully",A>0&&(W+=`\n${A} rows referenced unknown cards (skipped)`),C>0&&(W+=`\n${C} parse errors encountered`),yield o.loadOwnedCards(),alert(W)}else{console.error("\u274c Failed to sync collection to database:",N.error);let W=`Import completed!\n${x} cards updated locally`;W+=`\nDatabase sync failed: ${N.error}`,A>0&&(W+=`\n${A} unknown cards (skipped)`),C>0&&(W+=`\n${C} parse errors encountered`),alert(W)}}catch(N){console.error("\u274c Error during bulk sync:",N);let W=`Import completed!\n${x} cards updated locally`;W+="\nDatabase sync failed - please try again",A>0&&(W+=`\n${A} unknown cards (skipped)`),C>0&&(W+=`\n${C} parse errors encountered`),alert(W)}else{let N=`Import completed!\n${x} cards updated`;A>0&&(N+=`\n${A} unknown cards (skipped)`),C>0&&(N+=`\n${C} parse errors encountered`),alert(N)}}catch(c){console.error("Failed to import collection:",c),alert("Failed to import collection. Please check the CSV file format.")}});return function(l){return a.apply(this,arguments)}}(),s.readAsText(i)}}viewOtherCollection(){var r=this;return y(function*(){const o=(r.otherUsername||"").trim();if(!o)return void alert("Please enter a username");if(r.currentUser&&o===r.currentUser.username)return void r.backToMyCollection();const i=yield r.supabaseService.getProfileByUsername(o);i?(r.isViewingOther=!0,r.viewingUser=i,yield r.loadOwnedCardsForUser(i.id,i.username)):alert(`User '${o}' not found`)})()}backToMyCollection(){var r=this;return y(function*(){r.isViewingOther=!1,r.viewingUser=null,r.otherUsername="",r.currentUser&&(yield r.loadOwnedCardsForUser(r.currentUser.id,r.currentUser.username))})()}buildHeaderMap(r){const o={};return r.forEach((i,s)=>{const a=i.trim().toLowerCase();o[a]=s}),o}resolveCsvRow(r,o){const i=c=>{if(o)for(const u of c){const d=o[u];if(void 0!==d&&d>=0&&d<r.length){const h=(r[d]||"").trim();if(h)return h}}},s=i(["numberown","quantity","qty","owned","count","number own","number_owned"]);let a=0;void 0!==s?a=Math.max(0,Math.floor(Number(s)||0)):r.length>=3&&(a=Math.max(0,Math.floor(Number(r[2])||0)));let l=i(["id","cardid","card id"]);if(!l){let c=i(["set","expansion"]),u=i(["number","no","card number","card no","card#"]);if(!c&&r.length>=4&&(c=(r[3]||"").trim()),!u&&r.length>=1){const d=(r[1]||"").trim();/^\d+/.test(d)&&(u=d)}if(c&&u){const d=this.mapToSetCode(c),h=this.extractLeadingInt(u);d&&null!==h&&(l=`${d}-${h}`)}}if(!l&&r.length>0){const c=(r[0]||"").trim();c&&(l=c)}return{cardId:l||null,quantity:a}}extractLeadingInt(r){const o=(r||"").match(/\d+/);return o?parseInt(o[0],10):null}mapToSetCode(r){const i=(r||"").trim().toUpperCase();if("PROMO-A"===i)return"P-A";const s=this.sets.find(l=>(l.code||"").toUpperCase()===i);if(s)return s.code;const a=this.sets.find(l=>(l.label?.en||"").toUpperCase()===i);return a?a.code:null}normalizeId(r){let o=(r||"").trim().toUpperCase();return o=o.replace(/^PROMO-A(?=-)/,"P-A"),o}parseCSVLine(r){const o=[];let i="",s=!1;for(let a=0;a<r.length;a++){const l=r[a];'"'===l?s=!s:","!==l||s?i+=l:(o.push(i),i="")}return o.push(i),o}getCardImageUrl(r){return this.imageService.getCardImageUrl(r)}getCardDisplayName(r){return`${r.set}-${r.number} \u2013 ${r.label.eng}`}onImageError(r,o){console.error("\u274c Image failed to load:",o.imageName),r.target.src=this.imageService.getPlaceholderImageUrl()}getGroupedCards(){const r={};this.filteredCards.forEach(a=>{const l=a.set;r[l]||(r[l]=[]),r[l].push(a)});const o=(a,l)=>{const c=a.match(/^([A-Z]+)(\d+)([a-z]*)$/),u=l.match(/^([A-Z]+)(\d+)([a-z]*)$/);if(c&&u){if(c[1]!==u[1])return c[1].localeCompare(u[1]);const d=parseInt(c[2],10),h=parseInt(u[2],10);return d!==h?d-h:(c[3]||"").localeCompare(u[3]||"")}return a.localeCompare(l)},s=(a,l)=>a.number!==l.number?a.number-l.number:a.label.eng.localeCompare(l.label.eng);return Object.keys(r).sort((a,l)=>{const c=h=>this.isSpecialSet(h),u=c(a),d=c(l);return u&&!d?1:!u&&d?-1:"latest"===this.sortBy?o(l,a):o(a,l)}).map(a=>({groupTitle:a,cards:r[a].sort(s)}))}getGroupDisplayName(r,o){const i=this.getSetName(r);return i&&i!==r?`${r} - ${i}`:`Set ${r}`}setOwnership(r){this.ownershipFilter!==r&&(this.ownershipFilter=r,this.applyFilters(),this.cdr.detectChanges())}isRaritySelected(r){return this.selectedRarities.includes(r)}toggleRarity(r){const o=this.selectedRarities.indexOf(r);o>=0?this.selectedRarities.splice(o,1):this.selectedRarities.push(r),this.applyFilters(),this.cdr.detectChanges()}clearRarity(){this.selectedRarities.length>0&&(this.selectedRarities=[],this.applyFilters(),this.cdr.detectChanges())}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){const r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);window.scrollTo({top:r,behavior:"smooth"})}getSetElements(){return Array.from(document.querySelectorAll(".cards-container .card-group"))}getCurrentSetIndex(r=80){const o=window.scrollY||window.pageYOffset||0,i=this.getSetElements();let s=-1;for(let a=0;a<i.length&&i[a].getBoundingClientRect().top+window.scrollY-r<=o;a++)s=a;return s}scrollToNextSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),i=Math.min(o+1,r.length-1);if(i>=0){const a=r[i].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}}scrollToPrevSet(){const r=this.getSetElements();if(0===r.length)return;const o=this.getCurrentSetIndex(),a=r[Math.max(o-1,0)].getBoundingClientRect().top+window.scrollY-12;window.scrollTo({top:a,behavior:"smooth"})}};let n=e;return e.\u0275fac=function(o){return new(o||e)(T(rD),T(oD),T(NV),T(wa),T(Et),T(Us),T(BD))},e.\u0275cmp=lo({type:e,selectors:[["app-card-collection"]],decls:80,vars:31,consts:[[1,"collection-container"],[1,"collection-actions"],[1,"actions-left"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","import-btn"],["type","file","accept",".csv","hidden","",3,"change"],[1,"btn","btn-secondary",3,"disabled","click"],["class","view-other-banner","style","margin-bottom:12px; padding:10px 14px; border-radius:12px; background:rgba(46,204,113,0.12); border:1px solid rgba(46,204,113,0.35); display:flex; align-items:center; justify-content:space-between; gap:12px;",4,"ngIf"],["role","region","aria-label","Collection filters",1,"filters-panel"],[1,"filters-row"],["type","text","placeholder","Search cards\u2026","aria-label","Search cards",1,"filter-input",3,"ngModel","ngModelChange","input"],[1,"filters-row","wrap","sets-row"],[1,"sort-group"],["for","set-select"],["id","set-select","aria-label","Select set",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["for","pack-select"],["id","pack-select","aria-label","Select pack",1,"filter-select","compact",3,"disabled","ngModel","ngModelChange","change"],[1,"filters-row","rarity-row"],["for","rarity-chips",1,"filter-label"],["id","rarity-chips","aria-label","Rarity filter",1,"segmented","multi","chips-scroll"],["type","button","title","All rarities",1,"chip",3,"click"],["type","button","class","chip",3,"active","title","click",4,"ngFor","ngForOf"],[1,"filters-row","wrap"],["for","sort-select"],["id","sort-select","aria-label","Sort order",1,"filter-select","compact",3,"ngModel","ngModelChange","change"],["value","latest"],["value","oldest"],["role","tablist","aria-label","Ownership filter",1,"segmented","ownership"],["type","button",3,"click"],[1,"row-spacer"],["type","button","aria-label","Reset filters",1,"btn","btn-outline","reset-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","sync-progress",4,"ngIf"],["class","cards-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["aria-label","Collection navigation controls",1,"fab-stack"],["type","button","title","Top",1,"fab",3,"click"],["type","button","title","Previous set",1,"fab",3,"click"],["type","button","title","Next set",1,"fab",3,"click"],["type","button","title","Bottom",1,"fab",3,"click"],["aria-label","Filter controls",1,"fab-stack-left"],["type","button","title","Filters",1,"fab","mobile-only",3,"click"],["type","button","title","Copy For Trade",1,"fab","mobile-only",3,"disabled","click"],["type","button","title","View Others Collection",1,"fab","mobile-only",3,"disabled","click"],["class","modal-backdrop",3,"click",4,"ngIf"],[1,"view-other-banner",2,"margin-bottom","12px","padding","10px 14px","border-radius","12px","background","rgba(46,204,113,0.12)","border","1px solid rgba(46,204,113,0.35)","display","flex","align-items","center","justify-content","space-between","gap","12px"],[1,"btn","btn-outline",3,"click"],[3,"value"],["type","button",1,"chip",3,"title","click"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"btn","btn-primary",3,"click"],[1,"sync-progress"],[1,"sync-message"],[1,"sync-icon"],[1,"sync-text"],[1,"sync-title"],["class","sync-count",4,"ngIf"],[1,"sync-count"],[1,"cards-container"],["class","card-group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-group"],[1,"group-header"],[1,"group-title"],[1,"group-stats"],[1,"group-count"],[1,"cards-grid"],["class","card-item",3,"no-quantity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-item"],[1,"card-image"],["loading","lazy",1,"pokemon-card-img",3,"src","alt","error"],[1,"card-info"],[1,"card-title"],[1,"ownership-controls"],[1,"count-btn","decrease",3,"disabled","click"],[4,"ngIf","ngIfElse"],["displayCount",""],[1,"count-btn","increase",3,"disabled","click"],["type","number","min","0",1,"count-input",3,"ngModel","ngModelChange","keydown.enter","keydown","keydown.escape","blur"],["type","button",1,"count-display",3,"disabled","click"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-backdrop",3,"click"],[1,"modal-content","view-others-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"view-others-config"],[1,"config-section"],["for","other-username-input",1,"config-label"],["type","text","id","other-username-input","placeholder","Enter username to view their collection\u2026",1,"config-input-wide",3,"ngModel","ngModelChange","keydown.enter"],[1,"config-hint"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],[1,"modal-content","trade-modal",3,"click"],[1,"trade-config"],["for","exclude-special-toggle",1,"config-label"],["type","checkbox","id","exclude-special-toggle",3,"ngModel","ngModelChange"],[1,"config-label"],[1,"rarity-chips"],["type","button",1,"chip",3,"click"],["for","trade-qty-min",1,"config-label"],["type","number","id","trade-qty-min","min","1","max","10",1,"config-input",3,"ngModel","ngModelChange"],["for","friend-code-input",1,"config-label"],["type","text","id","friend-code-input","placeholder","Enter your friend code to include in the copy\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"],["for","trade-template-text",1,"config-label"],["id","trade-template-text","rows","2","placeholder","Add an extra note to include in the copied text\u2026",1,"config-input-wide",3,"ngModel","ngModelChange"]],template:function(o,i){1&o&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),G("click",function(){return i.exportCollection()}),P(4," \u{1f4e4} Export Collection "),D(),w(5,"label",4),P(6," \u{1f4e5} Import Collection "),w(7,"input",5),G("change",function(a){return i.importCollection(a)}),D()(),w(8,"button",6),G("click",function(){return i.openTradeModal()}),P(9," \u{1f4cb} Copy For Trade "),D(),w(10,"button",6),G("click",function(){return i.openViewOthersModal()}),P(11," \u{1f464} View Others Collection "),D()()(),Ce(12,FV,8,1,"div",7),w(13,"div",8)(14,"div",9)(15,"input",10),G("ngModelChange",function(a){return i.searchTerm=a})("input",function(){return i.onSearchChange()}),D()(),w(16,"div",11)(17,"div",12)(18,"label",13),P(19,"Set"),D(),w(20,"select",14),G("ngModelChange",function(a){return i.selectedSet=a})("change",function(){return i.onSetChange()}),w(21,"option",15),P(22,"All Sets"),D(),Ce(23,LV,2,2,"option",16),D()(),w(24,"div",12)(25,"label",17),P(26,"Pack"),D(),w(27,"select",18),G("ngModelChange",function(a){return i.selectedPack=a})("change",function(){return i.applyFilters()}),w(28,"option",15),P(29,"All Packs"),D(),Ce(30,jV,2,2,"option",16),D()()(),w(31,"div",19)(32,"label",20),P(33,"Rarity"),D(),w(34,"div",21)(35,"button",22),G("click",function(){return i.clearRarity()}),P(36,"ALL"),D(),Ce(37,VV,2,4,"button",23),D()(),w(38,"div",24)(39,"div",12)(40,"label",25),P(41,"Sort By"),D(),w(42,"select",26),G("ngModelChange",function(a){return i.sortBy=a})("change",function(){return i.applyFilters()}),w(43,"option",27),P(44,"Latest Set"),D(),w(45,"option",28),P(46,"Oldest Set"),D()()(),w(47,"div",29)(48,"button",30),G("click",function(){return i.setOwnership("all")}),P(49,"ALL"),D(),w(50,"button",30),G("click",function(){return i.setOwnership("missing")}),P(51,"MISSING"),D(),w(52,"button",30),G("click",function(){return i.setOwnership("owned")}),P(53,"OWNED"),D()(),Tn(54,"div",31),w(55,"button",32),G("click",function(){return i.clearFilters()}),P(56,"Reset"),D()()(),Ce(57,UV,4,0,"div",33),Ce(58,$V,5,1,"div",34),Ce(59,HV,8,2,"div",35),Ce(60,KV,2,2,"div",36),Ce(61,JV,9,0,"div",37),w(62,"div",38)(63,"button",39),G("click",function(){return i.scrollToTop()}),P(64,"\u2912"),D(),w(65,"button",40),G("click",function(){return i.scrollToPrevSet()}),P(66,"\u2191"),D(),w(67,"button",41),G("click",function(){return i.scrollToNextSet()}),P(68,"\u2193"),D(),w(69,"button",42),G("click",function(){return i.scrollToBottom()}),P(70,"\u2913"),D()(),w(71,"div",43)(72,"button",44),G("click",function(){return i.toggleFilters()}),P(73,"\u{1f50e}"),D(),w(74,"button",45),G("click",function(){return i.openTradeModal()}),P(75,"\u{1f4cb}"),D(),w(76,"button",46),G("click",function(){return i.openViewOthersModal()}),P(77,"\u{1f464}"),D()(),Ce(78,YV,20,2,"div",47),Ce(79,ZV,45,7,"div",47),D()),2&o&&(F(8),z("disabled",i.isViewingOther),F(2),z("disabled",i.isViewingOther),F(2),z("ngIf",i.isViewingOther),F(1),At("collapsed",!i.filtersOpen),F(2),z("ngModel",i.searchTerm),F(5),z("ngModel",i.selectedSet),F(3),z("ngForOf",i.availableSets),F(4),z("disabled","all"===i.selectedSet)("ngModel",i.selectedPack),F(3),z("ngForOf",i.availablePacks),F(5),At("active",0===i.selectedRarities.length),F(2),z("ngForOf",i.availableRaritySymbols),F(5),z("ngModel",i.sortBy),F(6),At("active","all"===i.ownershipFilter),F(2),At("active","missing"===i.ownershipFilter),F(2),At("active","owned"===i.ownershipFilter),F(5),z("ngIf",i.loading),F(1),z("ngIf",i.error),F(1),z("ngIf",i.syncingCards),F(1),z("ngIf",!i.loading&&!i.error),F(1),z("ngIf",!i.loading&&!i.error&&0===i.getGroupedCards().length),F(11),Vt("aria-pressed",i.filtersOpen),F(2),z("disabled",i.isViewingOther),F(2),z("disabled",i.isViewingOther),F(2),z("ngIf",i.showViewOthersModal),F(1),z("ngIf",i.showTradeModal))},dependencies:[Vh,zs,Rw,Nw,Ys,Cf,nc,gc,ic,Mf,Sf,ta],styles:['.collection-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background-color:transparent;min-height:100vh;color:#fff}.sync-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,#1a4d3a 0%,#0f2d1f 100%);border:1px solid #28a745;border-radius:10px;padding:16px 22px;margin-bottom:20px;box-shadow:0 4px 18px #28a74540}.sync-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;flex:1}.sync-icon[_ngcontent-%COMP%]{font-size:22px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.sync-text[_ngcontent-%COMP%]{flex:1}.sync-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#28a745;margin-bottom:2px}.sync-count[_ngcontent-%COMP%]{font-size:12px;color:#9fb8aa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.collection-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:30px;flex-wrap:wrap}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.view-other-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.view-other-controls[_ngcontent-%COMP%]   .search-input.compact[_ngcontent-%COMP%]{width:auto;max-width:240px;min-width:200px;padding:8px 12px;border-radius:8px}@media (max-width: 768px){.collection-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.actions-left[_ngcontent-%COMP%], .actions-right[_ngcontent-%COMP%]{justify-content:space-between}}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #444;border-radius:6px;background-color:#333;color:#fff;cursor:pointer;font-size:14px;transition:all .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#444;border-color:#555}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#555;border-color:#666}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#666;border-color:#777}.btn-outline[_ngcontent-%COMP%]{background:transparent;border-color:#555}.btn-outline[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.06)}.btn-outline-small[_ngcontent-%COMP%]{padding:4px 12px;border:1px solid #666;border-radius:4px;background-color:transparent;color:#ccc;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-outline-small[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;color:#fff}.btn-icon[_ngcontent-%COMP%]{margin-right:6px}.btn[_ngcontent-%COMP%]:disabled, .btn-outline-small[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.import-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a 0%,#1e1e1e 100%);padding:25px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 15px #0000004d;border:1px solid #404040}.filters-panel[_ngcontent-%COMP%]{border:1px solid #666;border-radius:10px;padding:14px;margin-bottom:20px;background-color:#12151c;background:#12151c;box-shadow:0 8px 18px #00000059}.filters-header[_ngcontent-%COMP%]{color:#ddd;font-weight:600;margin-bottom:10px}.filters-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:10px}.filters-row.wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.rarity-row[_ngcontent-%COMP%]{align-items:flex-start;gap:10px}.filters-row.footer[_ngcontent-%COMP%]{justify-content:space-between}.filter-input[_ngcontent-%COMP%]{flex:1;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.filter-select.compact[_ngcontent-%COMP%]{width:240px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea}.sort-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#cfcfcf;margin-right:8px}.segmented[_ngcontent-%COMP%]{display:inline-flex;background:#1b1e24;border:1px solid #4a4f5a;border-radius:6px;overflow:hidden}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;background:transparent;color:#cfd6e4;border:none;cursor:pointer}.segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{border-left:1px solid #4a4f5a}.segmented[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#737e91;color:#fff}.segmented.multi[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;background:transparent;border:none;overflow-x:auto;padding:4px 2px 2px;-webkit-overflow-scrolling:touch}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.chips-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#3a3f48;border-radius:4px}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{border:1px solid #3d4350;background:#171a20;color:#cfd6e4;border-radius:999px;padding:6px 10px;font-size:12px;line-height:1}.segmented.multi[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4b90ff,#335a9e);border-color:#4b90ff;color:#fff}.segmented.multi[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:focus-visible{outline:2px solid #4b90ff;outline-offset:2px}.ownership[_ngcontent-%COMP%]{margin-left:4px}.row-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.reset-btn[_ngcontent-%COMP%]{white-space:nowrap}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;align-items:center;justify-content:center;padding:16px}.modal-content[_ngcontent-%COMP%]{width:min(520px,92vw);max-height:85vh;overflow:auto;background:#121317;border:1px solid #3e4654;border-radius:10px;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #2c3240}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#eaeaea}.modal-close[_ngcontent-%COMP%]{background:transparent;border:none;color:#aaa;font-size:18px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #2c3240}.trade-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.trade-config[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.config-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.config-label[_ngcontent-%COMP%]{font-weight:600;color:#ddd;font-size:14px}.rarity-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #4a4f5a;border-radius:6px;background:#1b1e24;color:#cfd6e4;cursor:pointer;transition:all .2s ease}.rarity-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:hover{border-color:#007bff;background:rgba(0,123,255,.1)}.rarity-chips[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:#007bff;border-color:#007bff;color:#fff}.config-input[_ngcontent-%COMP%]{width:80px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-input-wide[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:8px 10px;background:#1d1f24;border:1px solid #4a4f5a;border-radius:4px;color:#eaeaea;font-size:14px}.config-hint[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-box[_ngcontent-%COMP%]{position:relative;max-width:420px;margin:0 auto}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #444;border-radius:25px;background-color:#333;color:#fff;font-size:16px;transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 10px #007bff4d}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ccc;text-transform:uppercase;letter-spacing:.5px}.filter-dependency[_ngcontent-%COMP%]{font-size:11px;color:#007bff;font-weight:400;text-transform:none;font-style:italic}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #444;border-radius:8px;background-color:#333;color:#fff;font-size:14px;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:hover{border-color:#555;background-color:#3a3a3a}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff33}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.results-info[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:12px 20px;border-radius:8px;text-align:center;border:1px solid #333}.results-text[_ngcontent-%COMP%]{color:#ccc;font-size:14px;font-weight:500}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #333;border-top:4px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.cards-container[_ngcontent-%COMP%]{width:100%}.card-group[_ngcontent-%COMP%]{margin-bottom:40px}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:2px solid #333;flex-wrap:wrap;gap:10px}.group-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin:0;text-shadow:1px 1px 2px rgba(0,0,0,.5);flex:1;min-width:280px;position:relative;padding-left:30px;line-height:1.3}.group-title[_ngcontent-%COMP%]:before{content:"\\1f4cb";position:absolute;left:0;top:50%;transform:translateY(-50%);font-size:1.2rem}.group-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-shrink:0}.group-count[_ngcontent-%COMP%]{color:#ccc;font-size:14px;padding:4px 8px;background-color:#333;border-radius:4px;white-space:nowrap}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:18px}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;overflow:hidden;transition:transform .2s ease}.card-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2 / 3;overflow:hidden;padding:10px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.pokemon-card-img[_ngcontent-%COMP%]{width:90%;object-fit:cover;object-position:center;border-radius:10px;transition:transform .3s ease,opacity .3s ease;background-color:#222}.card-item[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{transform:scale(1.05)}.pokemon-card-img[_ngcontent-%COMP%]:not([src]), .pokemon-card-img[src=""][_ngcontent-%COMP%]{opacity:.5;background:linear-gradient(45deg,#333,#555,#333);background-size:200% 200%;animation:_ngcontent-%COMP%_loading-shimmer 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loading-shimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.card-item.no-quantity[_ngcontent-%COMP%]{opacity:.7;transition:opacity .3s ease}.card-item.no-quantity[_ngcontent-%COMP%]   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(100%) opacity(.5)}.card-item.no-quantity[_ngcontent-%COMP%]:hover{opacity:.9}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .pokemon-card-img[_ngcontent-%COMP%]{filter:grayscale(0%) opacity(.8)}.card-item.no-quantity[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]   .count-display[_ngcontent-%COMP%]{color:#888}.card-item.no-quantity[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%], .card-item.no-quantity[_ngcontent-%COMP%]:hover   .count-display[_ngcontent-%COMP%]{color:#bbb}.card-info[_ngcontent-%COMP%]{padding:10px 0;text-align:center}.card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ownership-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.count-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #555;border-radius:4px;background-color:#444;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;transition:all .2s ease}.count-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#555;border-color:#666}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.count-btn.decrease[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;border-color:#dc3545}.count-btn.increase[_ngcontent-%COMP%]:hover{background-color:#28a745;border-color:#28a745}.count-display[_ngcontent-%COMP%]{min-width:32px;padding:4px 10px;border-radius:6px;border:1px dashed #666;background:rgba(51,51,51,.65);color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.count-display[_ngcontent-%COMP%]:hover, .count-display[_ngcontent-%COMP%]:focus-visible{border-color:#007bff;background:rgba(0,123,255,.2);outline:none}.count-input[_ngcontent-%COMP%]{width:56px;padding:4px 8px;border-radius:6px;border:1px solid #777;background:rgba(24,24,24,.95);color:#fff;font-size:14px;font-weight:600;text-align:center;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.count-input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 6px #007bff4d}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.pokemon-card-img.lazy-loading[_ngcontent-%COMP%]{opacity:.6;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.pokemon-card-img.lazy-loaded[_ngcontent-%COMP%]{opacity:1;transition:opacity .3s ease-in-out}.pokemon-card-img.lazy-error[_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 1200px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:16px}}@media (max-width: 768px){.collection-container[_ngcontent-%COMP%]{padding:15px}.filters-panel[_ngcontent-%COMP%]{border-radius:10px;padding:12px}.filters-header[_ngcontent-%COMP%]{margin-bottom:8px}.filters-row[_ngcontent-%COMP%]{gap:10px}.filter-select.compact[_ngcontent-%COMP%]{width:100%}.filter-input[_ngcontent-%COMP%]{min-width:0}.rarity-row[_ngcontent-%COMP%]{flex-direction:column}.chips-scroll[_ngcontent-%COMP%]{width:100%}.ownership[_ngcontent-%COMP%]{width:100%;justify-content:space-between;display:flex}.collection-actions[_ngcontent-%COMP%]   .actions-left[_ngcontent-%COMP%], .filters-panel.collapsed[_ngcontent-%COMP%]{display:none}.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:12px}.ownership-controls[_ngcontent-%COMP%]{gap:8px}.filters-section[_ngcontent-%COMP%]{padding:20px}.filter-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-box[_ngcontent-%COMP%]{max-width:100%}.group-header[_ngcontent-%COMP%]{padding:10px 0}.group-title[_ngcontent-%COMP%]{font-size:1.3rem;padding-left:24px}.group-title[_ngcontent-%COMP%]:before{font-size:1rem}}@media (max-width: 540px){.cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.filters-row[_ngcontent-%COMP%]{margin-bottom:8px}.reset-btn[_ngcontent-%COMP%]{width:100%}.count-display[_ngcontent-%COMP%], .count-input[_ngcontent-%COMP%]{width:48px}.filters-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:14px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.filter-label[_ngcontent-%COMP%]{font-size:12px}.group-title[_ngcontent-%COMP%]{font-size:1.15rem}.group-title[_ngcontent-%COMP%]:before{font-size:.9rem}}.fab-stack[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:24px;display:flex;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}.fab[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:1px solid #3a5f8f;background:linear-gradient(135deg,rgb(91,168,255),rgba(34,46,70,.85));color:#e7eefc;font-size:18px;cursor:pointer;box-shadow:0 10px 24px #070c1859;display:inline-flex;align-items:center;justify-content:center;transition:transform .14s ease,box-shadow .14s ease,border-color .14s ease}.fab[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 14px 28px #070c1873;border-color:#5ba8ff99}.fab-stack-left[_ngcontent-%COMP%]{position:fixed;left:24px;bottom:24px;display:none;flex-direction:column;gap:10px;z-index:1000;background-color:transparent}@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{right:16px;bottom:16px;gap:8px}.fab[_ngcontent-%COMP%]{width:44px;height:44px}.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.fab-stack-left[_ngcontent-%COMP%]{display:flex;left:16px;bottom:16px}}.fab.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.fab.mobile-only[_ngcontent-%COMP%]{display:inline-flex!important}.fab-stack-left[_ngcontent-%COMP%]{display:flex!important}}'],changeDetection:0}),n})();function eU(n,e){if(1&n&&(w(0,"div",19),P(1),D()),2&n){const t=q();F(1),Dt(" ",t.error," ")}}function tU(n,e){1&n&&Tn(0,"span",20)}function oU(n,e){if(1&n){const t=on();w(0,"div",16)(1,"span",17),P(2),D(),w(3,"button",18),G("click",function(){return Se(t),Me(q().signOut())}),P(4,"Sign Out"),D()()}if(2&n){const t=q();F(2),Dt("\u{1f464} ",t.currentUser.username,"")}}function iU(n,e){if(1&n&&(w(0,"div",19)(1,"span",17),P(2),D()()),2&n){const t=q();F(2),Dt("\u{1f464} ",t.currentUser.username,"")}}function sU(n,e){if(1&n){const t=on();w(0,"button",20),G("click",function(){Se(t);const o=q();return o.signOut(),Me(o.closeMobileMenu())}),P(1," \u{1f6aa} Sign Out "),D()}}const aU=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:(()=>{const e=class{constructor(r,o,i){this.supabaseService=r,this.router=o,this.route=i,this.username="",this.password="",this.loading=!1,this.error="",this.returnUrl="/collection"}ngOnInit(){this.supabaseService.isSignedIn()?this.router.navigate([this.returnUrl]):this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/collection"}get isFormValid(){return this.username.trim().length>0&&this.password.trim().length>0}onSubmit(){var r=this;return y(function*(){if(r.isFormValid){r.loading=!0,r.error="";try{const{user:o,error:i}=yield r.supabaseService.signIn(r.username.trim(),r.password.trim());i?(r.error=i,i.includes("Please wait a moment")&&(r.error+=" This usually resolves itself quickly.")):o&&r.router.navigate([r.returnUrl])}catch(o){if(console.error("Sign in error:",o),o&&"object"==typeof o&&"message"in o){const i=o.message;r.error=i.includes("NavigatorLockAcquireTimeoutError")||i.includes("lock")?"Please wait a moment and try signing in again.":"An unexpected error occurred"}else r.error="An unexpected error occurred"}finally{r.loading=!1}}else r.error="Please enter both username and password"})()}onUsernameChange(){this.error=""}onPasswordChange(){this.error=""}};let n=e;return e.\u0275fac=function(o){return new(o||e)(T(wa),T(Et),T(Oo))},e.\u0275cmp=lo({type:e,selectors:[["app-signin"]],decls:26,vars:8,consts:[[1,"signin-container"],[1,"signin-card"],[1,"signin-header"],[1,"signin-title"],[1,"signin-subtitle"],[1,"signin-form",3,"ngSubmit"],["signinForm","ngForm"],[1,"form-group"],["for","username"],["id","username","name","username","type","text","placeholder","Enter your username","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["usernameInput","ngModel"],["for","password"],["id","password","name","password","type","password","placeholder","Enter your password","required","",1,"form-input",3,"ngModel","disabled","ngModelChange","input"],["passwordInput","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"signin-btn",3,"disabled"],["class","loading-spinner",4,"ngIf"],[1,"signin-footer"],[1,"invite-note"],[1,"error-message"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),P(4,"\u{1f0cf} Pokemon TCG Pocket"),D(),w(5,"p",4),P(6,"Collection Manager"),D()(),w(7,"form",5,6),G("ngSubmit",function(){return i.onSubmit()}),w(9,"div",7)(10,"label",8),P(11,"Username"),D(),w(12,"input",9,10),G("ngModelChange",function(a){return i.username=a})("input",function(){return i.onUsernameChange()}),D()(),w(14,"div",7)(15,"label",11),P(16,"Password"),D(),w(17,"input",12,13),G("ngModelChange",function(a){return i.password=a})("input",function(){return i.onPasswordChange()}),D()(),Ce(19,eU,2,1,"div",14),w(20,"button",15),Ce(21,tU,1,0,"span",16),P(22),D()(),w(23,"div",17)(24,"p",18),P(25," \u{1f4e7} This is an invite-only system. Contact your administrator if you need access. "),D()()()()),2&o){const s=Fd(8);F(12),z("ngModel",i.username)("disabled",i.loading),F(5),z("ngModel",i.password)("disabled",i.loading),F(2),z("ngIf",i.error),F(1),z("disabled",i.loading||!s.valid),F(1),z("ngIf",i.loading),F(1),Dt(" ",i.loading?"Signing In...":"Sign In"," ")}},dependencies:[zs,Ew,Ys,ic,uw,mc,ta,pc],styles:[".signin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:20px}.signin-card[_ngcontent-%COMP%]{background:#333;border-radius:12px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 30px #0000004d;border:1px solid #444}.signin-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signin-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.signin-subtitle[_ngcontent-%COMP%]{color:#ccc;font-size:1rem;margin:0;opacity:.8}.signin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #555;border-radius:6px;background-color:#444;color:#fff;font-size:16px;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;background-color:#555}.form-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-input[_ngcontent-%COMP%]::placeholder{color:#888}.error-message[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:10px 12px;border-radius:6px;font-size:14px;text-align:center;margin-top:-10px}.signin-btn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:10px}.signin-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3;transform:translateY(-1px)}.signin-btn[_ngcontent-%COMP%]:disabled{background-color:#666;cursor:not-allowed;transform:none}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signin-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.invite-note[_ngcontent-%COMP%]{color:#888;font-size:12px;line-height:1.4;margin:0;padding:15px;background-color:#2a2a2a;border-radius:6px;border-left:3px solid #007bff}@media (max-width: 480px){.signin-container[_ngcontent-%COMP%]{padding:10px}.signin-card[_ngcontent-%COMP%]{padding:30px 20px}.signin-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]}),n})()},{path:"",component:(()=>{const e=class{constructor(r,o){this.supabaseService=r,this.router=o,this.currentUser=null,this.appVersion="1.2.1",this.isMobileMenuOpen=!1}ngOnInit(){this.supabaseService.currentUser$.subscribe(r=>{this.currentUser=r}),this.router.events.subscribe(()=>{this.isMobileMenuOpen=!1})}signOut(){this.supabaseService.signOut(),this.router.navigate(["/signin"])}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}};let n=e;return e.\u0275fac=function(o){return new(o||e)(T(wa),T(Et))},e.\u0275cmp=lo({type:e,selectors:[["app-main-layout"]],decls:26,vars:7,consts:[[1,"app-layout"],[1,"navbar"],[1,"nav-container"],[1,"nav-brand"],[1,"nav-center","desktop-only"],[1,"nav-links"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],["routerLink","/collection","routerLinkActive","active",1,"nav-link"],["class","nav-user desktop-only",4,"ngIf"],["type","button","aria-controls","mobileMenu","aria-label","Menu",1,"hamburger","mobile-only",3,"click"],["id","mobileMenu",1,"mobile-menu","mobile-only"],["class","mobile-menu-header",4,"ngIf"],["routerLink","/dashboard","routerLinkActive","active",1,"mobile-link",3,"click"],["routerLink","/collection","routerLinkActive","active",1,"mobile-link",3,"click"],["class","mobile-link signout",3,"click",4,"ngIf"],[1,"main-content"],[1,"nav-user","desktop-only"],[1,"username"],[1,"btn-signout",3,"click"],[1,"mobile-menu-header"],[1,"mobile-link","signout",3,"click"]],template:function(o,i){1&o&&(w(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"h2"),P(5,"Pokemon TCGP Collector"),D(),w(6,"p"),P(7),D()(),w(8,"div",4)(9,"div",5)(10,"a",6),P(11," \u{1f4ca} Dashboard "),D(),w(12,"a",7),P(13," \u{1f5c2}\ufe0f Collection "),D()()(),Ce(14,oU,5,1,"div",8),w(15,"button",9),G("click",function(){return i.toggleMobileMenu()}),P(16," \u2630 "),D()(),w(17,"div",10),Ce(18,iU,3,1,"div",11),w(19,"a",12),G("click",function(){return i.closeMobileMenu()}),P(20," \u{1f4ca} Dashboard "),D(),w(21,"a",13),G("click",function(){return i.closeMobileMenu()}),P(22," \u{1f5c2}\ufe0f Collection "),D(),Ce(23,sU,2,0,"button",14),D()(),w(24,"main",15),Tn(25,"router-outlet"),D()()),2&o&&(F(7),Dt("v",i.appVersion,""),F(7),z("ngIf",i.currentUser),F(1),Vt("aria-expanded",i.isMobileMenuOpen),F(2),At("open",i.isMobileMenuOpen),F(1),z("ngIf",i.currentUser),F(5),z("ngIf",i.currentUser))},dependencies:[zs,Oc,Uc,W0],styles:[".app-layout[_ngcontent-%COMP%]{min-height:100vh;background-color:#000}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:0 20px;box-shadow:0 2px 10px #0000001a;position:relative}.nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff}.nav-brand[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f0f0f0;opacity:.9;font-size:.95rem}.nav-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;border-radius:5px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-2px)}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:0 2px 5px #0003}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.username[_ngcontent-%COMP%]{color:#f0f0f0;font-size:14px;font-weight:500}.btn-signout[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background-color:transparent;color:#fff;cursor:pointer;font-size:12px;transition:all .2s ease}.btn-signout[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545;transform:translateY(-1px)}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background-color:#000}.desktop-only[_ngcontent-%COMP%]{display:flex}.mobile-only[_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.35);color:#fff;border-radius:6px;padding:6px 10px;font-size:18px;cursor:pointer}.mobile-menu[_ngcontent-%COMP%]{display:none!important;position:absolute;right:12px;top:100%;margin-top:8px;width:220px;z-index:100;flex-direction:column;gap:8px;padding:10px 12px 12px;border:1px solid rgba(255,255,255,.16);border-radius:10px;background:#1b1f2a;box-shadow:0 10px 28px #00000059}.mobile-menu.open[_ngcontent-%COMP%]{display:flex!important}.mobile-menu[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin-bottom:4px;display:inline-block;opacity:.9}.mobile-link[_ngcontent-%COMP%]{text-align:left;color:#fff;text-decoration:none;padding:10px 12px;border:1px solid rgba(255,255,255,.12);border-radius:6px;background:rgba(255,255,255,.05);font-size:14px}.mobile-link.signout[_ngcontent-%COMP%]{border-color:#dc3545;background:rgba(220,53,69,.15)}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:inline-flex}.nav-container[_ngcontent-%COMP%]{padding:8px 0}.nav-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.nav-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}"]}),n})(),canActivate:[(()=>{const e=class{constructor(r,o){this.supabaseService=r,this.router=o}canActivate(r,o){const i=this.supabaseService.isSignedIn(),s=this.supabaseService.getCurrentUser();return!(!i||!s)||(this.router.navigate(["/signin"],{queryParams:{returnUrl:o.url}}),!1)}};let n=e;return e.\u0275fac=function(o){return new(o||e)(B(wa),B(Et))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"}),n})()],children:[{path:"dashboard",component:kV},{path:"collection",component:XV}]},{path:"**",redirectTo:"/signin"}];let lU=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ln({type:e}),e.\u0275inj=Dn({imports:[rp.forRoot(aU),rp]}),n})(),cU=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ln({type:e,bootstrap:[XL]}),e.\u0275inj=Dn({imports:[GR,bk,MN,rp,lU]}),n})();zR().bootstrapModule(cU).catch(n=>console.error(n))},397:(St,le,Z)=>{"use strict";Z.r(le),Z.d(le,{Headers:()=>M,Request:()=>I,Response:()=>U,default:()=>Be,fetch:()=>ke});var me=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const ke=me.fetch,Be=me.fetch.bind(me),M=me.Headers,I=me.Request,U=me.Response},369:(St,le,Z)=>{"use strict";var te=Z(156).default;Object.defineProperty(le,"__esModule",{value:!0});const me=Z(582),ke=me.__importDefault(Z(397)),Be=me.__importDefault(Z(839));le.default=class M{constructor(U){var K,X;this.shouldThrowOnError=!1,this.method=U.method,this.url=U.url,this.headers=new Headers(U.headers),this.schema=U.schema,this.body=U.body,this.shouldThrowOnError=null!==(K=U.shouldThrowOnError)&&void 0!==K&&K,this.signal=U.signal,this.isMaybeSingle=null!==(X=U.isMaybeSingle)&&void 0!==X&&X,this.fetch=U.fetch?U.fetch:typeof fetch>"u"?ke.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(U,K){return this.headers=new Headers(this.headers),this.headers.set(U,K),this}then(U,K){var X=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Re=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var be=te(function*(Ne){var tt,$t,Mt,Ke;let nt=null,bt=null,Zn=null,Yt=Ne.status,vn=Ne.statusText;if(Ne.ok){if("HEAD"!==X.method){const Vr=yield Ne.text();""===Vr||(bt="text/csv"===X.headers.get("Accept")||X.headers.get("Accept")&&null!==(tt=X.headers.get("Accept"))&&void 0!==tt&&tt.includes("application/vnd.pgrst.plan+text")?Vr:JSON.parse(Vr))}const Qt=null===($t=X.headers.get("Prefer"))||void 0===$t?void 0:$t.match(/count=(exact|planned|estimated)/),Cn=null===(Mt=Ne.headers.get("content-range"))||void 0===Mt?void 0:Mt.split("/");Qt&&Cn&&Cn.length>1&&(Zn=parseInt(Cn[1])),X.isMaybeSingle&&"GET"===X.method&&Array.isArray(bt)&&(bt.length>1?(nt={code:"PGRST116",details:`Results contain ${bt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},bt=null,Zn=null,Yt=406,vn="Not Acceptable"):bt=1===bt.length?bt[0]:null)}else{const Qt=yield Ne.text();try{nt=JSON.parse(Qt),Array.isArray(nt)&&404===Ne.status&&(bt=[],nt=null,Yt=200,vn="OK")}catch{404===Ne.status&&""===Qt?(Yt=204,vn="No Content"):nt={message:Qt}}if(nt&&X.isMaybeSingle&&!(null===(Ke=nt?.details)||void 0===Ke)&&Ke.includes("0 rows")&&(nt=null,Yt=200,vn="OK"),nt&&X.shouldThrowOnError)throw new Be.default(nt)}return{error:nt,data:bt,count:Zn,status:Yt,statusText:vn}});return function(Ne){return be.apply(this,arguments)}}());return this.shouldThrowOnError||(Re=Re.catch(be=>{var Ne,tt,$t;return{error:{message:`${null!==(Ne=be?.name)&&void 0!==Ne?Ne:"FetchError"}: ${be?.message}`,details:`${null!==(tt=be?.stack)&&void 0!==tt?tt:""}`,hint:"",code:`${null!==($t=be?.code)&&void 0!==$t?$t:""}`},data:null,count:null,status:0,statusText:""}})),Re.then(U,K)}returns(){return this}overrideTypes(){return this}}},851:(St,le,Z)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});const te=Z(582),me=te.__importDefault(Z(241)),ke=te.__importDefault(Z(105));class Be{constructor(I,{headers:U={},schema:K,fetch:X}={}){this.url=I,this.headers=new Headers(U),this.schemaName=K,this.fetch=X}from(I){const U=new URL(`${this.url}/${I}`);return new me.default(U,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(I){return new Be(this.url,{headers:this.headers,schema:I,fetch:this.fetch})}rpc(I,U={},{head:K=!1,get:X=!1,count:De}={}){var Re;let be;const Ne=new URL(`${this.url}/rpc/${I}`);let tt;K||X?(be=K?"HEAD":"GET",Object.entries(U).filter(([Mt,Ke])=>void 0!==Ke).map(([Mt,Ke])=>[Mt,Array.isArray(Ke)?`{${Ke.join(",")}}`:`${Ke}`]).forEach(([Mt,Ke])=>{Ne.searchParams.append(Mt,Ke)})):(be="POST",tt=U);const $t=new Headers(this.headers);return De&&$t.set("Prefer",`count=${De}`),new ke.default({method:be,url:Ne,headers:$t,schema:this.schemaName,body:tt,fetch:null!==(Re=this.fetch)&&void 0!==Re?Re:fetch})}}le.default=Be},839:(St,le)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});class Z extends Error{constructor(me){super(me.message),this.name="PostgrestError",this.details=me.details,this.hint=me.hint,this.code=me.code}}le.default=Z},105:(St,le,Z)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});const me=Z(582).__importDefault(Z(594));le.default=class ke extends me.default{eq(M,I){return this.url.searchParams.append(M,`eq.${I}`),this}neq(M,I){return this.url.searchParams.append(M,`neq.${I}`),this}gt(M,I){return this.url.searchParams.append(M,`gt.${I}`),this}gte(M,I){return this.url.searchParams.append(M,`gte.${I}`),this}lt(M,I){return this.url.searchParams.append(M,`lt.${I}`),this}lte(M,I){return this.url.searchParams.append(M,`lte.${I}`),this}like(M,I){return this.url.searchParams.append(M,`like.${I}`),this}likeAllOf(M,I){return this.url.searchParams.append(M,`like(all).{${I.join(",")}}`),this}likeAnyOf(M,I){return this.url.searchParams.append(M,`like(any).{${I.join(",")}}`),this}ilike(M,I){return this.url.searchParams.append(M,`ilike.${I}`),this}ilikeAllOf(M,I){return this.url.searchParams.append(M,`ilike(all).{${I.join(",")}}`),this}ilikeAnyOf(M,I){return this.url.searchParams.append(M,`ilike(any).{${I.join(",")}}`),this}is(M,I){return this.url.searchParams.append(M,`is.${I}`),this}in(M,I){const U=Array.from(new Set(I)).map(K=>"string"==typeof K&&new RegExp("[,()]").test(K)?`"${K}"`:`${K}`).join(",");return this.url.searchParams.append(M,`in.(${U})`),this}contains(M,I){return"string"==typeof I?this.url.searchParams.append(M,`cs.${I}`):Array.isArray(I)?this.url.searchParams.append(M,`cs.{${I.join(",")}}`):this.url.searchParams.append(M,`cs.${JSON.stringify(I)}`),this}containedBy(M,I){return"string"==typeof I?this.url.searchParams.append(M,`cd.${I}`):Array.isArray(I)?this.url.searchParams.append(M,`cd.{${I.join(",")}}`):this.url.searchParams.append(M,`cd.${JSON.stringify(I)}`),this}rangeGt(M,I){return this.url.searchParams.append(M,`sr.${I}`),this}rangeGte(M,I){return this.url.searchParams.append(M,`nxl.${I}`),this}rangeLt(M,I){return this.url.searchParams.append(M,`sl.${I}`),this}rangeLte(M,I){return this.url.searchParams.append(M,`nxr.${I}`),this}rangeAdjacent(M,I){return this.url.searchParams.append(M,`adj.${I}`),this}overlaps(M,I){return this.url.searchParams.append(M,"string"==typeof I?`ov.${I}`:`ov.{${I.join(",")}}`),this}textSearch(M,I,{config:U,type:K}={}){let X="";return"plain"===K?X="pl":"phrase"===K?X="ph":"websearch"===K&&(X="w"),this.url.searchParams.append(M,`${X}fts${void 0===U?"":`(${U})`}.${I}`),this}match(M){return Object.entries(M).forEach(([I,U])=>{this.url.searchParams.append(I,`eq.${U}`)}),this}not(M,I,U){return this.url.searchParams.append(M,`not.${I}.${U}`),this}or(M,{foreignTable:I,referencedTable:U=I}={}){return this.url.searchParams.append(U?`${U}.or`:"or",`(${M})`),this}filter(M,I,U){return this.url.searchParams.append(M,`${I}.${U}`),this}}},241:(St,le,Z)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});const me=Z(582).__importDefault(Z(105));le.default=class ke{constructor(M,{headers:I={},schema:U,fetch:K}){this.url=M,this.headers=new Headers(I),this.schema=U,this.fetch=K}select(M,I){const{head:U=!1,count:K}=I??{},X=U?"HEAD":"GET";let De=!1;const Re=(M??"*").split("").map(be=>/\s/.test(be)&&!De?"":('"'===be&&(De=!De),be)).join("");return this.url.searchParams.set("select",Re),K&&this.headers.append("Prefer",`count=${K}`),new me.default({method:X,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(M,{count:I,defaultToNull:U=!0}={}){var K;if(I&&this.headers.append("Prefer",`count=${I}`),U||this.headers.append("Prefer","missing=default"),Array.isArray(M)){const De=M.reduce((Re,be)=>Re.concat(Object.keys(be)),[]);if(De.length>0){const Re=[...new Set(De)].map(be=>`"${be}"`);this.url.searchParams.set("columns",Re.join(","))}}return new me.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:M,fetch:null!==(K=this.fetch)&&void 0!==K?K:fetch})}upsert(M,{onConflict:I,ignoreDuplicates:U=!1,count:K,defaultToNull:X=!0}={}){var De;if(this.headers.append("Prefer",`resolution=${U?"ignore":"merge"}-duplicates`),void 0!==I&&this.url.searchParams.set("on_conflict",I),K&&this.headers.append("Prefer",`count=${K}`),X||this.headers.append("Prefer","missing=default"),Array.isArray(M)){const be=M.reduce((Ne,tt)=>Ne.concat(Object.keys(tt)),[]);if(be.length>0){const Ne=[...new Set(be)].map(tt=>`"${tt}"`);this.url.searchParams.set("columns",Ne.join(","))}}return new me.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:M,fetch:null!==(De=this.fetch)&&void 0!==De?De:fetch})}update(M,{count:I}={}){var U;return I&&this.headers.append("Prefer",`count=${I}`),new me.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:M,fetch:null!==(U=this.fetch)&&void 0!==U?U:fetch})}delete({count:M}={}){var I;return M&&this.headers.append("Prefer",`count=${M}`),new me.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(I=this.fetch)&&void 0!==I?I:fetch})}}},594:(St,le,Z)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});const me=Z(582).__importDefault(Z(369));le.default=class ke extends me.default{select(M){let I=!1;const U=(M??"*").split("").map(K=>/\s/.test(K)&&!I?"":('"'===K&&(I=!I),K)).join("");return this.url.searchParams.set("select",U),this.headers.append("Prefer","return=representation"),this}order(M,{ascending:I=!0,nullsFirst:U,foreignTable:K,referencedTable:X=K}={}){const De=X?`${X}.order`:"order",Re=this.url.searchParams.get(De);return this.url.searchParams.set(De,`${Re?`${Re},`:""}${M}.${I?"asc":"desc"}${void 0===U?"":U?".nullsfirst":".nullslast"}`),this}limit(M,{foreignTable:I,referencedTable:U=I}={}){return this.url.searchParams.set(typeof U>"u"?"limit":`${U}.limit`,`${M}`),this}range(M,I,{foreignTable:U,referencedTable:K=U}={}){const De=typeof K>"u"?"limit":`${K}.limit`;return this.url.searchParams.set(typeof K>"u"?"offset":`${K}.offset`,`${M}`),this.url.searchParams.set(De,""+(I-M+1)),this}abortSignal(M){return this.signal=M,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:M=!1,verbose:I=!1,settings:U=!1,buffers:K=!1,wal:X=!1,format:De="text"}={}){var Re;const be=[M?"analyze":null,I?"verbose":null,U?"settings":null,K?"buffers":null,X?"wal":null].filter(Boolean).join("|"),Ne=null!==(Re=this.headers.get("Accept"))&&void 0!==Re?Re:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${De}; for="${Ne}"; options=${be};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(M){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${M}`),this}}},358:(St,le,Z)=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0}),le.PostgrestError=le.PostgrestBuilder=le.PostgrestTransformBuilder=le.PostgrestFilterBuilder=le.PostgrestQueryBuilder=le.PostgrestClient=void 0;const te=Z(582),me=te.__importDefault(Z(851));le.PostgrestClient=me.default;const ke=te.__importDefault(Z(241));le.PostgrestQueryBuilder=ke.default;const Be=te.__importDefault(Z(105));le.PostgrestFilterBuilder=Be.default;const M=te.__importDefault(Z(594));le.PostgrestTransformBuilder=M.default;const I=te.__importDefault(Z(369));le.PostgrestBuilder=I.default;const U=te.__importDefault(Z(839));le.PostgrestError=U.default,le.default={PostgrestClient:me.default,PostgrestQueryBuilder:ke.default,PostgrestFilterBuilder:Be.default,PostgrestTransformBuilder:M.default,PostgrestBuilder:I.default,PostgrestError:U.default}},156:St=>{function le(te,me,ke,Be,M,I,U){try{var K=te[I](U),X=K.value}catch(De){return void ke(De)}K.done?me(X):Promise.resolve(X).then(Be,M)}St.exports=function Z(te){return function(){var me=this,ke=arguments;return new Promise(function(Be,M){var I=te.apply(me,ke);function U(X){le(I,Be,M,U,K,"next",X)}function K(X){le(I,Be,M,U,K,"throw",X)}U(void 0)})}},St.exports.__esModule=!0,St.exports.default=St.exports},582:(St,le,Z)=>{"use strict";Z.r(le),Z.d(le,{__addDisposableResource:()=>He,__assign:()=>ke,__asyncDelegator:()=>Ji,__asyncGenerator:()=>vn,__asyncValues:()=>Qt,__await:()=>Yt,__awaiter:()=>be,__classPrivateFieldGet:()=>Xn,__classPrivateFieldIn:()=>Yi,__classPrivateFieldSet:()=>Ea,__createBinding:()=>tt,__decorate:()=>M,__disposeResources:()=>Ma,__esDecorate:()=>U,__exportStar:()=>$t,__extends:()=>me,__generator:()=>Ne,__importDefault:()=>Fo,__importStar:()=>Da,__makeTemplateObject:()=>Cn,__metadata:()=>Re,__param:()=>I,__propKey:()=>X,__read:()=>Ke,__rest:()=>Be,__rewriteRelativeImportExtension:()=>xa,__runInitializers:()=>K,__setFunctionName:()=>De,__spread:()=>nt,__spreadArray:()=>Zn,__spreadArrays:()=>bt,__values:()=>Mt,default:()=>Zc});var te=function(v,E){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,b){S.__proto__=b}||function(S,b){for(var R in b)Object.prototype.hasOwnProperty.call(b,R)&&(S[R]=b[R])})(v,E)};function me(v,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function S(){this.constructor=v}te(v,E),v.prototype=null===E?Object.create(E):(S.prototype=E.prototype,new S)}var ke=function(){return ke=Object.assign||function(E){for(var S,b=1,R=arguments.length;b<R;b++)for(var V in S=arguments[b])Object.prototype.hasOwnProperty.call(S,V)&&(E[V]=S[V]);return E},ke.apply(this,arguments)};function Be(v,E){var S={};for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&E.indexOf(b)<0&&(S[b]=v[b]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(b=Object.getOwnPropertySymbols(v);R<b.length;R++)E.indexOf(b[R])<0&&Object.prototype.propertyIsEnumerable.call(v,b[R])&&(S[b[R]]=v[b[R]])}return S}function M(v,E,S,b){var O,R=arguments.length,V=R<3?E:null===b?b=Object.getOwnPropertyDescriptor(E,S):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)V=Reflect.decorate(v,E,S,b);else for(var L=v.length-1;L>=0;L--)(O=v[L])&&(V=(R<3?O(V):R>3?O(E,S,V):O(E,S))||V);return R>3&&V&&Object.defineProperty(E,S,V),V}function I(v,E){return function(S,b){E(S,b,v)}}function U(v,E,S,b,R,V){function O(er){if(void 0!==er&&"function"!=typeof er)throw new TypeError("Function expected");return er}for(var yt,L=b.kind,wt="getter"===L?"get":"setter"===L?"set":"value",ae=!E&&v?b.static?v:v.prototype:null,qe=E||(ae?Object.getOwnPropertyDescriptor(ae,b.name):{}),Ur=!1,je=S.length-1;je>=0;je--){var Rt={};for(var Zt in b)Rt[Zt]="access"===Zt?{}:b[Zt];for(var Zt in b.access)Rt.access[Zt]=b.access[Zt];Rt.addInitializer=function(er){if(Ur)throw new TypeError("Cannot add initializers after decoration has completed");V.push(O(er||null))};var bn=(0,S[je])("accessor"===L?{get:qe.get,set:qe.set}:qe[wt],Rt);if("accessor"===L){if(void 0===bn)continue;if(null===bn||"object"!=typeof bn)throw new TypeError("Object expected");(yt=O(bn.get))&&(qe.get=yt),(yt=O(bn.set))&&(qe.set=yt),(yt=O(bn.init))&&R.unshift(yt)}else(yt=O(bn))&&("field"===L?R.unshift(yt):qe[wt]=yt)}ae&&Object.defineProperty(ae,b.name,qe),Ur=!0}function K(v,E,S){for(var b=arguments.length>2,R=0;R<E.length;R++)S=b?E[R].call(v,S):E[R].call(v);return b?S:void 0}function X(v){return"symbol"==typeof v?v:"".concat(v)}function De(v,E,S){return"symbol"==typeof E&&(E=E.description?"[".concat(E.description,"]"):""),Object.defineProperty(v,"name",{configurable:!0,value:S?"".concat(S," ",E):E})}function Re(v,E){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,E)}function be(v,E,S,b){return new(S||(S=Promise))(function(V,O){function L(qe){try{ae(b.next(qe))}catch(yt){O(yt)}}function wt(qe){try{ae(b.throw(qe))}catch(yt){O(yt)}}function ae(qe){qe.done?V(qe.value):function R(V){return V instanceof S?V:new S(function(O){O(V)})}(qe.value).then(L,wt)}ae((b=b.apply(v,E||[])).next())})}function Ne(v,E){var b,R,V,S={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]},O=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return O.next=L(0),O.throw=L(1),O.return=L(2),"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function L(ae){return function(qe){return function wt(ae){if(b)throw new TypeError("Generator is already executing.");for(;O&&(O=0,ae[0]&&(S=0)),S;)try{if(b=1,R&&(V=2&ae[0]?R.return:ae[0]?R.throw||((V=R.return)&&V.call(R),0):R.next)&&!(V=V.call(R,ae[1])).done)return V;switch(R=0,V&&(ae=[2&ae[0],V.value]),ae[0]){case 0:case 1:V=ae;break;case 4:return S.label++,{value:ae[1],done:!1};case 5:S.label++,R=ae[1],ae=[0];continue;case 7:ae=S.ops.pop(),S.trys.pop();continue;default:if(!(V=(V=S.trys).length>0&&V[V.length-1])&&(6===ae[0]||2===ae[0])){S=0;continue}if(3===ae[0]&&(!V||ae[1]>V[0]&&ae[1]<V[3])){S.label=ae[1];break}if(6===ae[0]&&S.label<V[1]){S.label=V[1],V=ae;break}if(V&&S.label<V[2]){S.label=V[2],S.ops.push(ae);break}V[2]&&S.ops.pop(),S.trys.pop();continue}ae=E.call(v,S)}catch(qe){ae=[6,qe],R=0}finally{b=V=0}if(5&ae[0])throw ae[1];return{value:ae[0]?ae[1]:void 0,done:!0}}([ae,qe])}}}var tt=Object.create?function(v,E,S,b){void 0===b&&(b=S);var R=Object.getOwnPropertyDescriptor(E,S);(!R||("get"in R?!E.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return E[S]}}),Object.defineProperty(v,b,R)}:function(v,E,S,b){void 0===b&&(b=S),v[b]=E[S]};function $t(v,E){for(var S in v)"default"!==S&&!Object.prototype.hasOwnProperty.call(E,S)&&tt(E,v,S)}function Mt(v){var E="function"==typeof Symbol&&Symbol.iterator,S=E&&v[E],b=0;if(S)return S.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&b>=v.length&&(v=void 0),{value:v&&v[b++],done:!v}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(v,E){var S="function"==typeof Symbol&&v[Symbol.iterator];if(!S)return v;var R,O,b=S.call(v),V=[];try{for(;(void 0===E||E-- >0)&&!(R=b.next()).done;)V.push(R.value)}catch(L){O={error:L}}finally{try{R&&!R.done&&(S=b.return)&&S.call(b)}finally{if(O)throw O.error}}return V}function nt(){for(var v=[],E=0;E<arguments.length;E++)v=v.concat(Ke(arguments[E]));return v}function bt(){for(var v=0,E=0,S=arguments.length;E<S;E++)v+=arguments[E].length;var b=Array(v),R=0;for(E=0;E<S;E++)for(var V=arguments[E],O=0,L=V.length;O<L;O++,R++)b[R]=V[O];return b}function Zn(v,E,S){if(S||2===arguments.length)for(var V,b=0,R=E.length;b<R;b++)(V||!(b in E))&&(V||(V=Array.prototype.slice.call(E,0,b)),V[b]=E[b]);return v.concat(V||Array.prototype.slice.call(E))}function Yt(v){return this instanceof Yt?(this.v=v,this):new Yt(v)}function vn(v,E,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,b=S.apply(v,E||[]),V=[];return R=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),L("next"),L("throw"),L("return",function O(je){return function(Rt){return Promise.resolve(Rt).then(je,yt)}}),R[Symbol.asyncIterator]=function(){return this},R;function L(je,Rt){b[je]&&(R[je]=function(Zt){return new Promise(function(bn,er){V.push([je,Zt,bn,er])>1||wt(je,Zt)})},Rt&&(R[je]=Rt(R[je])))}function wt(je,Rt){try{!function ae(je){je.value instanceof Yt?Promise.resolve(je.value.v).then(qe,yt):Ur(V[0][2],je)}(b[je](Rt))}catch(Zt){Ur(V[0][3],Zt)}}function qe(je){wt("next",je)}function yt(je){wt("throw",je)}function Ur(je,Rt){je(Rt),V.shift(),V.length&&wt(V[0][0],V[0][1])}}function Ji(v){var E,S;return E={},b("next"),b("throw",function(R){throw R}),b("return"),E[Symbol.iterator]=function(){return this},E;function b(R,V){E[R]=v[R]?function(O){return(S=!S)?{value:Yt(v[R](O)),done:!1}:V?V(O):O}:V}}function Qt(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S,E=v[Symbol.asyncIterator];return E?E.call(v):(v=Mt(v),S={},b("next"),b("throw"),b("return"),S[Symbol.asyncIterator]=function(){return this},S);function b(V){S[V]=v[V]&&function(O){return new Promise(function(L,wt){!function R(V,O,L,wt){Promise.resolve(wt).then(function(ae){V({value:ae,done:L})},O)}(L,wt,(O=v[V](O)).done,O.value)})}}}function Cn(v,E){return Object.defineProperty?Object.defineProperty(v,"raw",{value:E}):v.raw=E,v}var Vr=Object.create?function(v,E){Object.defineProperty(v,"default",{enumerable:!0,value:E})}:function(v,E){v.default=E},ao=function(v){return(ao=Object.getOwnPropertyNames||function(E){var S=[];for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&(S[S.length]=b);return S})(v)};function Da(v){if(v&&v.__esModule)return v;var E={};if(null!=v)for(var S=ao(v),b=0;b<S.length;b++)"default"!==S[b]&&tt(E,v,S[b]);return Vr(E,v),E}function Fo(v){return v&&v.__esModule?v:{default:v}}function Xn(v,E,S,b){if("a"===S&&!b)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof E?v!==E||!b:!E.has(v))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===S?b:"a"===S?b.call(v):b?b.value:E.get(v)}function Ea(v,E,S,b,R){if("m"===b)throw new TypeError("Private method is not writable");if("a"===b&&!R)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof E?v!==E||!R:!E.has(v))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===b?R.call(v,S):R?R.value=S:E.set(v,S),S}function Yi(v,E){if(null===E||"object"!=typeof E&&"function"!=typeof E)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof v?E===v:v.has(E)}function He(v,E,S){if(null!=E){if("object"!=typeof E&&"function"!=typeof E)throw new TypeError("Object expected.");var b,R;if(S){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");b=E[Symbol.asyncDispose]}if(void 0===b){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");b=E[Symbol.dispose],S&&(R=b)}if("function"!=typeof b)throw new TypeError("Object not disposable.");R&&(b=function(){try{R.call(this)}catch(V){return Promise.reject(V)}}),v.stack.push({value:E,dispose:b,async:S})}else S&&v.stack.push({async:!0});return E}var Sa="function"==typeof SuppressedError?SuppressedError:function(v,E,S){var b=new Error(S);return b.name="SuppressedError",b.error=v,b.suppressed=E,b};function Ma(v){function E(V){v.error=v.hasError?new Sa(V,v.error,"An error was suppressed during disposal."):V,v.hasError=!0}var S,b=0;return function R(){for(;S=v.stack.pop();)try{if(!S.async&&1===b)return b=0,v.stack.push(S),Promise.resolve().then(R);if(S.dispose){var V=S.dispose.call(S.value);if(S.async)return b|=2,Promise.resolve(V).then(R,function(O){return E(O),R()})}else b|=1}catch(O){E(O)}if(1===b)return v.hasError?Promise.reject(v.error):Promise.resolve();if(v.hasError)throw v.error}()}function xa(v,E){return"string"==typeof v&&/^\.\.?\//.test(v)?v.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(S,b,R,V,O){return b?E?".jsx":".js":!R||V&&O?R+V+"."+O.toLowerCase()+"js":S}):v}const Zc={__extends:me,__assign:ke,__rest:Be,__decorate:M,__param:I,__esDecorate:U,__runInitializers:K,__propKey:X,__setFunctionName:De,__metadata:Re,__awaiter:be,__generator:Ne,__createBinding:tt,__exportStar:$t,__values:Mt,__read:Ke,__spread:nt,__spreadArrays:bt,__spreadArray:Zn,__await:Yt,__asyncGenerator:vn,__asyncDelegator:Ji,__asyncValues:Qt,__makeTemplateObject:Cn,__importStar:Da,__importDefault:Fo,__classPrivateFieldGet:Xn,__classPrivateFieldSet:Ea,__classPrivateFieldIn:Yi,__addDisposableResource:He,__disposeResources:Ma,__rewriteRelativeImportExtension:xa}}},St=>{St(St.s=716)}]);